@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Work+Sans:wght@300..700&display=swap');

@layer base {
  :root {
    --background: 0 0% 98%;
    --foreground: 240 10% 16%;

    --card: 0 0% 100%;
    --card-foreground: 240 10% 16%;

    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 16%;

    --primary: 278 99% 45%;
    --primary-foreground: 0 0% 100%;

    --secondary: 275 20% 95%;
    --secondary-foreground: 275 15% 35%;

    --muted: 275 10% 95%;
    --muted-foreground: 275 8% 50%;

    --accent: 275 20% 93%;
    --accent-foreground: 275 15% 30%;

    --destructive: 0 68% 55%;
    --destructive-foreground: 0 0% 100%;

    --warning: 38 92% 50%;
    --warning-foreground: 38 80% 15%;

    --success: 152 55% 42%;
    --success-foreground: 0 0% 100%;

    --border: 275 12% 90%;
    --input: 275 12% 90%;
    --ring: 278 99% 45%;

    --radius: 0.75rem;

    --sidebar-background: 0 0% 100%;
    --sidebar-foreground: 275 10% 40%;
    --sidebar-primary: 278 99% 45%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 275 20% 95%;
    --sidebar-accent-foreground: 275 15% 30%;
    --sidebar-border: 275 12% 92%;
    --sidebar-ring: 278 99% 45%;

    --font-sans: 'Work Sans', 'Inter', system-ui, sans-serif;
    --font-mono: 'Inter', system-ui, sans-serif;

    --gradient-primary: hsl(278 99% 45%);
    --gradient-card: linear-gradient(135deg, hsl(0 0% 100%), hsl(260 20% 98%));
    --gradient-health-good: linear-gradient(135deg, hsl(152 55% 42%), hsl(162 50% 48%));
    --gradient-health-warn: linear-gradient(135deg, hsl(38 92% 50%), hsl(28 85% 52%));
    --gradient-health-bad: linear-gradient(135deg, hsl(0 68% 55%), hsl(15 70% 50%));

    --shadow-glow: 0 0 30px -5px hsl(278 99% 45% / 0.15);
    --shadow-card: 0 1px 3px hsl(275 10% 50% / 0.06), 0 4px 16px hsl(275 10% 50% / 0.04);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased font-body;
    font-family: var(--font-sans);
    letter-spacing: -0.05em;
    line-height: 1.5;
  }

  h1, h2, h3 {
    @apply font-heading;
    letter-spacing: -0.06em;
    line-height: 1.2;
  }

  h4 {
    @apply font-heading;
    letter-spacing: -0.06em;
    line-height: 1.4;
  }

  h5 {
    @apply font-subheading;
    letter-spacing: -0.05em;
    line-height: 1.4;
  }

  h6 {
    @apply font-caption;
    letter-spacing: -0.05em;
    line-height: 1.5;
  }
}

@layer utilities {
  .font-mono {
    font-family: var(--font-mono);
  }

  .gradient-primary {
    background: var(--gradient-primary);
  }

  .gradient-card {
    background: var(--gradient-card);
  }

  .shadow-glow {
    box-shadow: var(--shadow-glow);
  }

  .shadow-card {
    box-shadow: var(--shadow-card);
  }

  .health-gradient-good {
    background: var(--gradient-health-good);
  }

  .health-gradient-warn {
    background: var(--gradient-health-warn);
  }

  .health-gradient-bad {
    background: var(--gradient-health-bad);
  }

  /* ── TipTap editor & viewer styles ────────────────────────────── */

  /* Shared prose styles for both editor and read-only viewer */
  .tiptap-editor-content,
  .tiptap-viewer-content {
    @apply text-sm leading-relaxed;
  }

  .tiptap-editor-content {
    @apply w-full min-h-[300px] bg-card p-4 outline-none resize-y;
  }

  .tiptap-editor-content:focus {
    @apply ring-2 ring-primary/30;
  }

  .tiptap-editor-content p.is-editor-empty:first-child::before {
    @apply text-muted-foreground pointer-events-none float-left h-0;
    content: attr(data-placeholder);
  }

  /* Headings */
  .tiptap-editor-content h1,
  .tiptap-viewer-content h1 {
    @apply text-lg text-foreground mt-5 mb-2;
  }
  .tiptap-editor-content h2,
  .tiptap-viewer-content h2 {
    @apply text-base text-foreground mt-4 mb-2;
  }
  .tiptap-editor-content h3,
  .tiptap-viewer-content h3 {
    @apply text-sm text-foreground mt-3 mb-1.5;
  }
  .tiptap-editor-content h4,
  .tiptap-viewer-content h4 {
    @apply text-sm text-foreground mt-2 mb-1;
  }

  /* Paragraphs */
  .tiptap-editor-content p,
  .tiptap-viewer-content p {
    @apply text-sm text-secondary-foreground leading-relaxed mb-2;
  }

  /* Lists */
  .tiptap-editor-content ul,
  .tiptap-viewer-content ul {
    @apply list-disc ml-4 mb-2;
  }
  .tiptap-editor-content ol,
  .tiptap-viewer-content ol {
    @apply list-decimal ml-4 mb-2;
  }
  .tiptap-editor-content li,
  .tiptap-viewer-content li {
    @apply text-sm text-secondary-foreground;
  }
  .tiptap-editor-content li p,
  .tiptap-viewer-content li p {
    @apply mb-0;
  }

  /* Inline formatting */
  .tiptap-editor-content strong,
  .tiptap-viewer-content strong {
    @apply font-subheading text-foreground;
  }
  .tiptap-editor-content em,
  .tiptap-viewer-content em {
    @apply italic;
  }

  /* Blockquote */
  .tiptap-editor-content blockquote,
  .tiptap-viewer-content blockquote {
    @apply border-l-2 border-primary pl-3 text-sm text-muted-foreground italic my-2;
  }

  /* Inline code */
  .tiptap-editor-content code,
  .tiptap-viewer-content code {
    @apply rounded bg-muted/50 px-1.5 py-0.5 text-xs font-mono text-foreground;
  }

  /* Code block */
  .tiptap-editor-content pre,
  .tiptap-viewer-content pre {
    @apply rounded-lg bg-muted/50 border border-border p-3 my-2 overflow-x-auto text-xs font-mono text-foreground;
  }
  .tiptap-editor-content pre code,
  .tiptap-viewer-content pre code {
    @apply bg-transparent p-0 rounded-none text-xs;
  }

  /* Tables */
  .tiptap-editor-content table,
  .tiptap-viewer-content table {
    @apply text-xs border-collapse w-full my-3;
  }
  .tiptap-editor-content table,
  .tiptap-viewer-content table {
    @apply rounded-lg border border-border overflow-hidden;
  }
  .tiptap-editor-content th,
  .tiptap-viewer-content th {
    @apply text-left px-3 py-2 font-subheading text-foreground border-b border-border bg-muted/50;
  }
  .tiptap-editor-content td,
  .tiptap-viewer-content td {
    @apply px-3 py-2 text-secondary-foreground border-b border-border/50;
  }
  .tiptap-editor-content tr:last-child td,
  .tiptap-viewer-content tr:last-child td {
    @apply border-b-0;
  }

  /* Horizontal rule */
  .tiptap-editor-content hr,
  .tiptap-viewer-content hr {
    @apply border-border my-4;
  }

  /* Links */
  .tiptap-link {
    @apply text-primary underline;
  }

  /* Google-Docs-style suggestion colors — must override Markdown component's
     hardcoded color classes so the tint cascades into <p>, <strong>, <td>, etc. */
  .diff-removed-text,
  .diff-removed-text * {
    color: hsl(var(--destructive)) !important;
    text-decoration: line-through;
    text-decoration-color: hsl(var(--destructive) / 0.5);
  }

  .diff-added-text,
  .diff-added-text * {
    color: hsl(var(--success)) !important;
  }

  .login-bg {
    background: #031A20;
  }

  /* Blurred gradient layer - Figma: 1640x972 at -169,-222 on ~1200px frame */
  .login-bg::after {
    content: '';
    position: absolute;
    top: -14vw;
    left: -18.5vw;
    width: 137vw;
    height: 81vw;
    border-radius: 8px;
    background: radial-gradient(88.57% 62.04% at 50% 100%, #D1B0FC 6.34%, #95ABF4 31.98%, #05231B 52.4%, #6D57D1 61.54%, #00120A 70.67%, #031A20 100%);
    filter: blur(50px);
    z-index: 0;
  }

  /* Duotone noise: #000 at 20% + #FFF at 20%, size 0.3, density 60% */
  .login-bg::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='3.3' numOctaves='1' stitchTiles='stitch' seed='1'/%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='0 1'/%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' fill='white' opacity='0.2'/%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' fill='black' opacity='0.2'/%3E%3C/svg%3E");
    background-size: 200px 200px;
    pointer-events: none;
    z-index: 1;
    opacity: 0.6;
  }
}
