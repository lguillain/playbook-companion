var GH=Object.defineProperty;var lN=t=>{throw TypeError(t)};var qH=(t,e,n)=>e in t?GH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var H=(t,e,n)=>qH(t,typeof e!="symbol"?e+"":e,n),Ok=(t,e,n)=>e.has(t)||lN("Cannot "+n);var u=(t,e,n)=>(Ok(t,e,"read from private field"),n?n.call(t):e.get(t)),A=(t,e,n)=>e.has(t)?lN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),S=(t,e,n,r)=>(Ok(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),T=(t,e,n)=>(Ok(t,e,"access private method"),n);var Lt=(t,e,n,r)=>({set _(i){S(t,e,i,n)},get _(){return u(t,e,r)}});function KH(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var X2={exports:{}},_S={},Y2={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw=Symbol.for("react.element"),XH=Symbol.for("react.portal"),YH=Symbol.for("react.fragment"),QH=Symbol.for("react.strict_mode"),JH=Symbol.for("react.profiler"),ZH=Symbol.for("react.provider"),e6=Symbol.for("react.context"),t6=Symbol.for("react.forward_ref"),n6=Symbol.for("react.suspense"),r6=Symbol.for("react.memo"),i6=Symbol.for("react.lazy"),cN=Symbol.iterator;function s6(t){return t===null||typeof t!="object"?null:(t=cN&&t[cN]||t["@@iterator"],typeof t=="function"?t:null)}var Q2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J2=Object.assign,Z2={};function tg(t,e,n){this.props=t,this.context=e,this.refs=Z2,this.updater=n||Q2}tg.prototype.isReactComponent={};tg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};tg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ej(){}ej.prototype=tg.prototype;function fP(t,e,n){this.props=t,this.context=e,this.refs=Z2,this.updater=n||Q2}var pP=fP.prototype=new ej;pP.constructor=fP;J2(pP,tg.prototype);pP.isPureReactComponent=!0;var uN=Array.isArray,tj=Object.prototype.hasOwnProperty,mP={current:null},nj={key:!0,ref:!0,__self:!0,__source:!0};function rj(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)tj.call(e,r)&&!nj.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:kw,type:t,key:s,ref:o,props:i,_owner:mP.current}}function o6(t,e){return{$$typeof:kw,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gP(t){return typeof t=="object"&&t!==null&&t.$$typeof===kw}function a6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dN=/\/+/g;function Lk(t,e){return typeof t=="object"&&t!==null&&t.key!=null?a6(""+t.key):e.toString(36)}function Gb(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case kw:case XH:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Lk(o,0):r,uN(i)?(n="",t!=null&&(n=t.replace(dN,"$&/")+"/"),Gb(i,e,n,"",function(c){return c})):i!=null&&(gP(i)&&(i=o6(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(dN,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",uN(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Lk(s,a);o+=Gb(s,e,n,l,i)}else if(l=s6(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Lk(s,a++),o+=Gb(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xw(t,e,n){if(t==null)return t;var r=[],i=0;return Gb(t,r,"","",function(s){return e.call(n,s,i++)}),r}function l6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Sr={current:null},qb={transition:null},c6={ReactCurrentDispatcher:Sr,ReactCurrentBatchConfig:qb,ReactCurrentOwner:mP};function ij(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Xw,forEach:function(t,e,n){Xw(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xw(t,function(){e++}),e},toArray:function(t){return Xw(t,function(e){return e})||[]},only:function(t){if(!gP(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=tg;Pe.Fragment=YH;Pe.Profiler=JH;Pe.PureComponent=fP;Pe.StrictMode=QH;Pe.Suspense=n6;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c6;Pe.act=ij;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=J2({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mP.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tj.call(e,l)&&!nj.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:kw,type:t.type,key:i,ref:s,props:r,_owner:o}};Pe.createContext=function(t){return t={$$typeof:e6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZH,_context:t},t.Consumer=t};Pe.createElement=rj;Pe.createFactory=function(t){var e=rj.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:t6,render:t}};Pe.isValidElement=gP;Pe.lazy=function(t){return{$$typeof:i6,_payload:{_status:-1,_result:t},_init:l6}};Pe.memo=function(t,e){return{$$typeof:r6,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=qb.transition;qb.transition={};try{t()}finally{qb.transition=e}};Pe.unstable_act=ij;Pe.useCallback=function(t,e){return Sr.current.useCallback(t,e)};Pe.useContext=function(t){return Sr.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return Sr.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return Sr.current.useEffect(t,e)};Pe.useId=function(){return Sr.current.useId()};Pe.useImperativeHandle=function(t,e,n){return Sr.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return Sr.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return Sr.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return Sr.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return Sr.current.useReducer(t,e,n)};Pe.useRef=function(t){return Sr.current.useRef(t)};Pe.useState=function(t){return Sr.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return Sr.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return Sr.current.useTransition()};Pe.version="18.3.1";Y2.exports=Pe;var E=Y2.exports;const Z=CS(E),yP=KH({__proto__:null,default:Z},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u6=E,d6=Symbol.for("react.element"),h6=Symbol.for("react.fragment"),f6=Object.prototype.hasOwnProperty,p6=u6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m6={key:!0,ref:!0,__self:!0,__source:!0};function sj(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)f6.call(e,r)&&!m6.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:d6,type:t,key:s,ref:o,props:i,_owner:p6.current}}_S.Fragment=h6;_S.jsx=sj;_S.jsxs=sj;X2.exports=_S;var x=X2.exports,oj={exports:{}},Ri={},aj={exports:{}},lj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,z){var N=O.length;O.push(z);e:for(;0<N;){var Y=N-1>>>1,$=O[Y];if(0<i($,z))O[Y]=z,O[N]=$,N=Y;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var z=O[0],N=O.pop();if(N!==z){O[0]=N;e:for(var Y=0,$=O.length,D=$>>>1;Y<D;){var K=2*(Y+1)-1,q=O[K],te=K+1,ee=O[te];if(0>i(q,N))te<$&&0>i(ee,q)?(O[Y]=ee,O[te]=N,Y=te):(O[Y]=q,O[K]=N,Y=K);else if(te<$&&0>i(ee,N))O[Y]=ee,O[te]=N,Y=te;else break e}}return z}function i(O,z){var N=O.sortIndex-z.sortIndex;return N!==0?N:O.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=O)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function k(O){if(g=!1,b(O),!m)if(n(l)!==null)m=!0,F(_);else{var z=n(c);z!==null&&L(k,z.startTime-O)}}function _(O,z){m=!1,g&&(g=!1,y(R),R=-1),p=!0;var N=f;try{for(b(z),h=n(l);h!==null&&(!(h.expirationTime>z)||O&&!j());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,f=h.priorityLevel;var $=Y(h.expirationTime<=z);z=t.unstable_now(),typeof $=="function"?h.callback=$:h===n(l)&&r(l),b(z)}else r(l);h=n(l)}if(h!==null)var D=!0;else{var K=n(c);K!==null&&L(k,K.startTime-z),D=!1}return D}finally{h=null,f=N,p=!1}}var C=!1,P=null,R=-1,M=5,I=-1;function j(){return!(t.unstable_now()-I<M)}function U(){if(P!==null){var O=t.unstable_now();I=O;var z=!0;try{z=P(!0,O)}finally{z?G():(C=!1,P=null)}}else C=!1}var G;if(typeof w=="function")G=function(){w(U)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,V=B.port2;B.port1.onmessage=U,G=function(){V.postMessage(null)}}else G=function(){v(U,0)};function F(O){P=O,C||(C=!0,G())}function L(O,z){R=v(function(){O(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,F(_))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var N=f;f=z;try{return O()}finally{f=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,z){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var N=f;f=O;try{return z()}finally{f=N}},t.unstable_scheduleCallback=function(O,z,N){var Y=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?Y+N:Y):N=Y,O){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=N+$,O={id:d++,callback:z,priorityLevel:O,startTime:N,expirationTime:$,sortIndex:-1},N>Y?(O.sortIndex=N,e(c,O),n(l)===null&&O===n(c)&&(g?(y(R),R=-1):g=!0,L(k,N-Y))):(O.sortIndex=$,e(l,O),m||p||(m=!0,F(_))),O},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(O){var z=f;return function(){var N=f;f=z;try{return O.apply(this,arguments)}finally{f=N}}}})(lj);aj.exports=lj;var g6=aj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y6=E,Pi=g6;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cj=new Set,My={};function Oh(t,e){$m(t,e),$m(t+"Capture",e)}function $m(t,e){for(My[t]=e,t=0;t<e.length;t++)cj.add(e[t])}var tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xA=Object.prototype.hasOwnProperty,v6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hN={},fN={};function w6(t){return xA.call(fN,t)?!0:xA.call(hN,t)?!1:v6.test(t)?fN[t]=!0:(hN[t]=!0,!1)}function b6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function x6(t,e,n,r){if(e===null||typeof e>"u"||b6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hn[t]=new kr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hn[e]=new kr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hn[t]=new kr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hn[t]=new kr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hn[t]=new kr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hn[t]=new kr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hn[t]=new kr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hn[t]=new kr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hn[t]=new kr(t,5,!1,t.toLowerCase(),null,!1,!1)});var vP=/[\-:]([a-z])/g;function wP(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vP,wP);Hn[e]=new kr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vP,wP);Hn[e]=new kr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vP,wP);Hn[e]=new kr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hn[t]=new kr(t,1,!1,t.toLowerCase(),null,!1,!1)});Hn.xlinkHref=new kr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hn[t]=new kr(t,1,!1,t.toLowerCase(),null,!0,!0)});function bP(t,e,n,r){var i=Hn.hasOwnProperty(e)?Hn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(x6(e,n,i,r)&&(n=null),r||i===null?w6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hl=y6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yw=Symbol.for("react.element"),wf=Symbol.for("react.portal"),bf=Symbol.for("react.fragment"),xP=Symbol.for("react.strict_mode"),SA=Symbol.for("react.profiler"),uj=Symbol.for("react.provider"),dj=Symbol.for("react.context"),SP=Symbol.for("react.forward_ref"),kA=Symbol.for("react.suspense"),EA=Symbol.for("react.suspense_list"),kP=Symbol.for("react.memo"),Il=Symbol.for("react.lazy"),hj=Symbol.for("react.offscreen"),pN=Symbol.iterator;function vg(t){return t===null||typeof t!="object"?null:(t=pN&&t[pN]||t["@@iterator"],typeof t=="function"?t:null)}var Ot=Object.assign,jk;function Bg(t){if(jk===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jk=e&&e[1]||""}return`
`+jk+t}var Fk=!1;function Bk(t,e){if(!t||Fk)return"";Fk=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Fk=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bg(t):""}function S6(t){switch(t.tag){case 5:return Bg(t.type);case 16:return Bg("Lazy");case 13:return Bg("Suspense");case 19:return Bg("SuspenseList");case 0:case 2:case 15:return t=Bk(t.type,!1),t;case 11:return t=Bk(t.type.render,!1),t;case 1:return t=Bk(t.type,!0),t;default:return""}}function AA(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bf:return"Fragment";case wf:return"Portal";case SA:return"Profiler";case xP:return"StrictMode";case kA:return"Suspense";case EA:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dj:return(t.displayName||"Context")+".Consumer";case uj:return(t._context.displayName||"Context")+".Provider";case SP:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kP:return e=t.displayName||null,e!==null?e:AA(t.type)||"Memo";case Il:e=t._payload,t=t._init;try{return AA(t(e))}catch{}}return null}function k6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return AA(e);case 8:return e===xP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ru(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fj(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function E6(t){var e=fj(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qw(t){t._valueTracker||(t._valueTracker=E6(t))}function pj(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fj(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function e1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function CA(t,e){var n=e.checked;return Ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function mN(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ru(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mj(t,e){e=e.checked,e!=null&&bP(t,"checked",e,!1)}function _A(t,e){mj(t,e);var n=ru(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?TA(t,e.type,n):e.hasOwnProperty("defaultValue")&&TA(t,e.type,ru(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function TA(t,e,n){(e!=="number"||e1(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $g=Array.isArray;function Vf(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ru(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function PA(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if($g(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ru(n)}}function gj(t,e){var n=ru(e.value),r=ru(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function vN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yj(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function RA(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yj(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jw,vj=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jw=Jw||document.createElement("div"),Jw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jw.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var my={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A6=["Webkit","ms","Moz","O"];Object.keys(my).forEach(function(t){A6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),my[e]=my[t]})});function wj(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||my.hasOwnProperty(t)&&my[t]?(""+e).trim():e+"px"}function bj(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wj(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var C6=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function IA(t,e){if(e){if(C6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function NA(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DA=null;function EP(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var MA=null,Hf=null,Wf=null;function wN(t){if(t=Cw(t)){if(typeof MA!="function")throw Error(X(280));var e=t.stateNode;e&&(e=NS(e),MA(t.stateNode,t.type,e))}}function xj(t){Hf?Wf?Wf.push(t):Wf=[t]:Hf=t}function Sj(){if(Hf){var t=Hf,e=Wf;if(Wf=Hf=null,wN(t),e)for(t=0;t<e.length;t++)wN(e[t])}}function kj(t,e){return t(e)}function Ej(){}var $k=!1;function Aj(t,e,n){if($k)return t(e,n);$k=!0;try{return kj(t,e,n)}finally{$k=!1,(Hf!==null||Wf!==null)&&(Ej(),Sj())}}function Ly(t,e){var n=t.stateNode;if(n===null)return null;var r=NS(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var OA=!1;if(tl)try{var wg={};Object.defineProperty(wg,"passive",{get:function(){OA=!0}}),window.addEventListener("test",wg,wg),window.removeEventListener("test",wg,wg)}catch{OA=!1}function _6(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var gy=!1,t1=null,n1=!1,LA=null,T6={onError:function(t){gy=!0,t1=t}};function P6(t,e,n,r,i,s,o,a,l){gy=!1,t1=null,_6.apply(T6,arguments)}function R6(t,e,n,r,i,s,o,a,l){if(P6.apply(this,arguments),gy){if(gy){var c=t1;gy=!1,t1=null}else throw Error(X(198));n1||(n1=!0,LA=c)}}function Lh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Cj(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bN(t){if(Lh(t)!==t)throw Error(X(188))}function I6(t){var e=t.alternate;if(!e){if(e=Lh(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return bN(i),t;if(s===r)return bN(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function _j(t){return t=I6(t),t!==null?Tj(t):null}function Tj(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Tj(t);if(e!==null)return e;t=t.sibling}return null}var Pj=Pi.unstable_scheduleCallback,xN=Pi.unstable_cancelCallback,N6=Pi.unstable_shouldYield,D6=Pi.unstable_requestPaint,Xt=Pi.unstable_now,M6=Pi.unstable_getCurrentPriorityLevel,AP=Pi.unstable_ImmediatePriority,Rj=Pi.unstable_UserBlockingPriority,r1=Pi.unstable_NormalPriority,O6=Pi.unstable_LowPriority,Ij=Pi.unstable_IdlePriority,TS=null,Oo=null;function L6(t){if(Oo&&typeof Oo.onCommitFiberRoot=="function")try{Oo.onCommitFiberRoot(TS,t,void 0,(t.current.flags&128)===128)}catch{}}var Vs=Math.clz32?Math.clz32:B6,j6=Math.log,F6=Math.LN2;function B6(t){return t>>>=0,t===0?32:31-(j6(t)/F6|0)|0}var Zw=64,eb=4194304;function Ug(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function i1(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ug(a):(s&=o,s!==0&&(r=Ug(s)))}else o=n&~i,o!==0?r=Ug(o):s!==0&&(r=Ug(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vs(e),i=1<<n,r|=t[n],e&=~i;return r}function $6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Vs(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=$6(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function jA(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nj(){var t=Zw;return Zw<<=1,!(Zw&4194240)&&(Zw=64),t}function Uk(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ew(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vs(e),t[e]=n}function z6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Vs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function CP(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Je=0;function Dj(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Mj,_P,Oj,Lj,jj,FA=!1,tb=[],Gc=null,qc=null,Kc=null,jy=new Map,Fy=new Map,Ml=[],V6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function SN(t,e){switch(t){case"focusin":case"focusout":Gc=null;break;case"dragenter":case"dragleave":qc=null;break;case"mouseover":case"mouseout":Kc=null;break;case"pointerover":case"pointerout":jy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fy.delete(e.pointerId)}}function bg(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Cw(e),e!==null&&_P(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function H6(t,e,n,r,i){switch(e){case"focusin":return Gc=bg(Gc,t,e,n,r,i),!0;case"dragenter":return qc=bg(qc,t,e,n,r,i),!0;case"mouseover":return Kc=bg(Kc,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return jy.set(s,bg(jy.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Fy.set(s,bg(Fy.get(s)||null,t,e,n,r,i)),!0}return!1}function Fj(t){var e=Vu(t.target);if(e!==null){var n=Lh(e);if(n!==null){if(e=n.tag,e===13){if(e=Cj(n),e!==null){t.blockedOn=e,jj(t.priority,function(){Oj(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kb(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=BA(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);DA=r,n.target.dispatchEvent(r),DA=null}else return e=Cw(n),e!==null&&_P(e),t.blockedOn=n,!1;e.shift()}return!0}function kN(t,e,n){Kb(t)&&n.delete(e)}function W6(){FA=!1,Gc!==null&&Kb(Gc)&&(Gc=null),qc!==null&&Kb(qc)&&(qc=null),Kc!==null&&Kb(Kc)&&(Kc=null),jy.forEach(kN),Fy.forEach(kN)}function xg(t,e){t.blockedOn===e&&(t.blockedOn=null,FA||(FA=!0,Pi.unstable_scheduleCallback(Pi.unstable_NormalPriority,W6)))}function By(t){function e(i){return xg(i,t)}if(0<tb.length){xg(tb[0],t);for(var n=1;n<tb.length;n++){var r=tb[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gc!==null&&xg(Gc,t),qc!==null&&xg(qc,t),Kc!==null&&xg(Kc,t),jy.forEach(e),Fy.forEach(e),n=0;n<Ml.length;n++)r=Ml[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ml.length&&(n=Ml[0],n.blockedOn===null);)Fj(n),n.blockedOn===null&&Ml.shift()}var Gf=hl.ReactCurrentBatchConfig,s1=!0;function G6(t,e,n,r){var i=Je,s=Gf.transition;Gf.transition=null;try{Je=1,TP(t,e,n,r)}finally{Je=i,Gf.transition=s}}function q6(t,e,n,r){var i=Je,s=Gf.transition;Gf.transition=null;try{Je=4,TP(t,e,n,r)}finally{Je=i,Gf.transition=s}}function TP(t,e,n,r){if(s1){var i=BA(t,e,n,r);if(i===null)Qk(t,e,r,o1,n),SN(t,r);else if(H6(i,t,e,n,r))r.stopPropagation();else if(SN(t,r),e&4&&-1<V6.indexOf(t)){for(;i!==null;){var s=Cw(i);if(s!==null&&Mj(s),s=BA(t,e,n,r),s===null&&Qk(t,e,r,o1,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Qk(t,e,r,null,n)}}var o1=null;function BA(t,e,n,r){if(o1=null,t=EP(r),t=Vu(t),t!==null)if(e=Lh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Cj(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return o1=t,null}function Bj(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M6()){case AP:return 1;case Rj:return 4;case r1:case O6:return 16;case Ij:return 536870912;default:return 16}default:return 16}}var zc=null,PP=null,Xb=null;function $j(){if(Xb)return Xb;var t,e=PP,n=e.length,r,i="value"in zc?zc.value:zc.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Xb=i.slice(t,1<r?1-r:void 0)}function Yb(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nb(){return!0}function EN(){return!1}function Ii(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nb:EN,this.isPropagationStopped=EN,this}return Ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nb)},persist:function(){},isPersistent:nb}),e}var ng={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},RP=Ii(ng),Aw=Ot({},ng,{view:0,detail:0}),K6=Ii(Aw),zk,Vk,Sg,PS=Ot({},Aw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IP,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sg&&(Sg&&t.type==="mousemove"?(zk=t.screenX-Sg.screenX,Vk=t.screenY-Sg.screenY):Vk=zk=0,Sg=t),zk)},movementY:function(t){return"movementY"in t?t.movementY:Vk}}),AN=Ii(PS),X6=Ot({},PS,{dataTransfer:0}),Y6=Ii(X6),Q6=Ot({},Aw,{relatedTarget:0}),Hk=Ii(Q6),J6=Ot({},ng,{animationName:0,elapsedTime:0,pseudoElement:0}),Z6=Ii(J6),eW=Ot({},ng,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tW=Ii(eW),nW=Ot({},ng,{data:0}),CN=Ii(nW),rW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sW[t])?!!e[t]:!1}function IP(){return oW}var aW=Ot({},Aw,{key:function(t){if(t.key){var e=rW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yb(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IP,charCode:function(t){return t.type==="keypress"?Yb(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yb(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lW=Ii(aW),cW=Ot({},PS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_N=Ii(cW),uW=Ot({},Aw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IP}),dW=Ii(uW),hW=Ot({},ng,{propertyName:0,elapsedTime:0,pseudoElement:0}),fW=Ii(hW),pW=Ot({},PS,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mW=Ii(pW),gW=[9,13,27,32],NP=tl&&"CompositionEvent"in window,yy=null;tl&&"documentMode"in document&&(yy=document.documentMode);var yW=tl&&"TextEvent"in window&&!yy,Uj=tl&&(!NP||yy&&8<yy&&11>=yy),TN=" ",PN=!1;function zj(t,e){switch(t){case"keyup":return gW.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vj(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xf=!1;function vW(t,e){switch(t){case"compositionend":return Vj(e);case"keypress":return e.which!==32?null:(PN=!0,TN);case"textInput":return t=e.data,t===TN&&PN?null:t;default:return null}}function wW(t,e){if(xf)return t==="compositionend"||!NP&&zj(t,e)?(t=$j(),Xb=PP=zc=null,xf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Uj&&e.locale!=="ko"?null:e.data;default:return null}}var bW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bW[t.type]:e==="textarea"}function Hj(t,e,n,r){xj(r),e=a1(e,"onChange"),0<e.length&&(n=new RP("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vy=null,$y=null;function xW(t){tF(t,0)}function RS(t){var e=Ef(t);if(pj(e))return t}function SW(t,e){if(t==="change")return e}var Wj=!1;if(tl){var Wk;if(tl){var Gk="oninput"in document;if(!Gk){var IN=document.createElement("div");IN.setAttribute("oninput","return;"),Gk=typeof IN.oninput=="function"}Wk=Gk}else Wk=!1;Wj=Wk&&(!document.documentMode||9<document.documentMode)}function NN(){vy&&(vy.detachEvent("onpropertychange",Gj),$y=vy=null)}function Gj(t){if(t.propertyName==="value"&&RS($y)){var e=[];Hj(e,$y,t,EP(t)),Aj(xW,e)}}function kW(t,e,n){t==="focusin"?(NN(),vy=e,$y=n,vy.attachEvent("onpropertychange",Gj)):t==="focusout"&&NN()}function EW(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return RS($y)}function AW(t,e){if(t==="click")return RS(e)}function CW(t,e){if(t==="input"||t==="change")return RS(e)}function _W(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gs=typeof Object.is=="function"?Object.is:_W;function Uy(t,e){if(Gs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xA.call(e,i)||!Gs(t[i],e[i]))return!1}return!0}function DN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function MN(t,e){var n=DN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=DN(n)}}function qj(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qj(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Kj(){for(var t=window,e=e1();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=e1(t.document)}return e}function DP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TW(t){var e=Kj(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qj(n.ownerDocument.documentElement,n)){if(r!==null&&DP(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=MN(n,s);var o=MN(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PW=tl&&"documentMode"in document&&11>=document.documentMode,Sf=null,$A=null,wy=null,UA=!1;function ON(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;UA||Sf==null||Sf!==e1(r)||(r=Sf,"selectionStart"in r&&DP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wy&&Uy(wy,r)||(wy=r,r=a1($A,"onSelect"),0<r.length&&(e=new RP("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Sf)))}function rb(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var kf={animationend:rb("Animation","AnimationEnd"),animationiteration:rb("Animation","AnimationIteration"),animationstart:rb("Animation","AnimationStart"),transitionend:rb("Transition","TransitionEnd")},qk={},Xj={};tl&&(Xj=document.createElement("div").style,"AnimationEvent"in window||(delete kf.animationend.animation,delete kf.animationiteration.animation,delete kf.animationstart.animation),"TransitionEvent"in window||delete kf.transitionend.transition);function IS(t){if(qk[t])return qk[t];if(!kf[t])return t;var e=kf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Xj)return qk[t]=e[n];return t}var Yj=IS("animationend"),Qj=IS("animationiteration"),Jj=IS("animationstart"),Zj=IS("transitionend"),eF=new Map,LN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fu(t,e){eF.set(t,e),Oh(e,[t])}for(var Kk=0;Kk<LN.length;Kk++){var Xk=LN[Kk],RW=Xk.toLowerCase(),IW=Xk[0].toUpperCase()+Xk.slice(1);fu(RW,"on"+IW)}fu(Yj,"onAnimationEnd");fu(Qj,"onAnimationIteration");fu(Jj,"onAnimationStart");fu("dblclick","onDoubleClick");fu("focusin","onFocus");fu("focusout","onBlur");fu(Zj,"onTransitionEnd");$m("onMouseEnter",["mouseout","mouseover"]);$m("onMouseLeave",["mouseout","mouseover"]);$m("onPointerEnter",["pointerout","pointerover"]);$m("onPointerLeave",["pointerout","pointerover"]);Oh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NW=new Set("cancel close invalid load scroll toggle".split(" ").concat(zg));function jN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,R6(r,e,void 0,t),t.currentTarget=null}function tF(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jN(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jN(i,a,c),s=l}}}if(n1)throw t=LA,n1=!1,LA=null,t}function vt(t,e){var n=e[GA];n===void 0&&(n=e[GA]=new Set);var r=t+"__bubble";n.has(r)||(nF(e,t,2,!1),n.add(r))}function Yk(t,e,n){var r=0;e&&(r|=4),nF(n,t,r,e)}var ib="_reactListening"+Math.random().toString(36).slice(2);function zy(t){if(!t[ib]){t[ib]=!0,cj.forEach(function(n){n!=="selectionchange"&&(NW.has(n)||Yk(n,!1,t),Yk(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ib]||(e[ib]=!0,Yk("selectionchange",!1,e))}}function nF(t,e,n,r){switch(Bj(e)){case 1:var i=G6;break;case 4:i=q6;break;default:i=TP}n=i.bind(null,e,n,t),i=void 0,!OA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Qk(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Vu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Aj(function(){var c=s,d=EP(n),h=[];e:{var f=eF.get(t);if(f!==void 0){var p=RP,m=t;switch(t){case"keypress":if(Yb(n)===0)break e;case"keydown":case"keyup":p=lW;break;case"focusin":m="focus",p=Hk;break;case"focusout":m="blur",p=Hk;break;case"beforeblur":case"afterblur":p=Hk;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=AN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Y6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=dW;break;case Yj:case Qj:case Jj:p=Z6;break;case Zj:p=fW;break;case"scroll":p=K6;break;case"wheel":p=mW;break;case"copy":case"cut":case"paste":p=tW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=_N}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var w=c,b;w!==null;){b=w;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,y!==null&&(k=Ly(w,y),k!=null&&g.push(Vy(w,k,b)))),v)break;w=w.return}0<g.length&&(f=new p(f,m,null,n,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==DA&&(m=n.relatedTarget||n.fromElement)&&(Vu(m)||m[nl]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Vu(m):null,m!==null&&(v=Lh(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=AN,k="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=_N,k="onPointerLeave",y="onPointerEnter",w="pointer"),v=p==null?f:Ef(p),b=m==null?f:Ef(m),f=new g(k,w+"leave",p,n,d),f.target=v,f.relatedTarget=b,k=null,Vu(d)===c&&(g=new g(y,w+"enter",m,n,d),g.target=b,g.relatedTarget=v,k=g),v=k,p&&m)t:{for(g=p,y=m,w=0,b=g;b;b=Wh(b))w++;for(b=0,k=y;k;k=Wh(k))b++;for(;0<w-b;)g=Wh(g),w--;for(;0<b-w;)y=Wh(y),b--;for(;w--;){if(g===y||y!==null&&g===y.alternate)break t;g=Wh(g),y=Wh(y)}g=null}else g=null;p!==null&&FN(h,f,p,g,!1),m!==null&&v!==null&&FN(h,v,m,g,!0)}}e:{if(f=c?Ef(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=SW;else if(RN(f))if(Wj)_=CW;else{_=EW;var C=kW}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=AW);if(_&&(_=_(t,c))){Hj(h,_,n,d);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&TA(f,"number",f.value)}switch(C=c?Ef(c):window,t){case"focusin":(RN(C)||C.contentEditable==="true")&&(Sf=C,$A=c,wy=null);break;case"focusout":wy=$A=Sf=null;break;case"mousedown":UA=!0;break;case"contextmenu":case"mouseup":case"dragend":UA=!1,ON(h,n,d);break;case"selectionchange":if(PW)break;case"keydown":case"keyup":ON(h,n,d)}var P;if(NP)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else xf?zj(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Uj&&n.locale!=="ko"&&(xf||R!=="onCompositionStart"?R==="onCompositionEnd"&&xf&&(P=$j()):(zc=d,PP="value"in zc?zc.value:zc.textContent,xf=!0)),C=a1(c,R),0<C.length&&(R=new CN(R,t,null,n,d),h.push({event:R,listeners:C}),P?R.data=P:(P=Vj(n),P!==null&&(R.data=P)))),(P=yW?vW(t,n):wW(t,n))&&(c=a1(c,"onBeforeInput"),0<c.length&&(d=new CN("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=P))}tF(h,e)})}function Vy(t,e,n){return{instance:t,listener:e,currentTarget:n}}function a1(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ly(t,n),s!=null&&r.unshift(Vy(t,s,i)),s=Ly(t,e),s!=null&&r.push(Vy(t,s,i))),t=t.return}return r}function Wh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function FN(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ly(n,s),l!=null&&o.unshift(Vy(n,l,a))):i||(l=Ly(n,s),l!=null&&o.push(Vy(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var DW=/\r\n?/g,MW=/\u0000|\uFFFD/g;function BN(t){return(typeof t=="string"?t:""+t).replace(DW,`
`).replace(MW,"")}function sb(t,e,n){if(e=BN(e),BN(t)!==e&&n)throw Error(X(425))}function l1(){}var zA=null,VA=null;function HA(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var WA=typeof setTimeout=="function"?setTimeout:void 0,OW=typeof clearTimeout=="function"?clearTimeout:void 0,$N=typeof Promise=="function"?Promise:void 0,LW=typeof queueMicrotask=="function"?queueMicrotask:typeof $N<"u"?function(t){return $N.resolve(null).then(t).catch(jW)}:WA;function jW(t){setTimeout(function(){throw t})}function Jk(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),By(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);By(e)}function Xc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function UN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var rg=Math.random().toString(36).slice(2),Io="__reactFiber$"+rg,Hy="__reactProps$"+rg,nl="__reactContainer$"+rg,GA="__reactEvents$"+rg,FW="__reactListeners$"+rg,BW="__reactHandles$"+rg;function Vu(t){var e=t[Io];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nl]||n[Io]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=UN(t);t!==null;){if(n=t[Io])return n;t=UN(t)}return e}t=n,n=t.parentNode}return null}function Cw(t){return t=t[Io]||t[nl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ef(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function NS(t){return t[Hy]||null}var qA=[],Af=-1;function pu(t){return{current:t}}function bt(t){0>Af||(t.current=qA[Af],qA[Af]=null,Af--)}function ft(t,e){Af++,qA[Af]=t.current,t.current=e}var iu={},ir=pu(iu),Ur=pu(!1),wh=iu;function Um(t,e){var n=t.type.contextTypes;if(!n)return iu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zr(t){return t=t.childContextTypes,t!=null}function c1(){bt(Ur),bt(ir)}function zN(t,e,n){if(ir.current!==iu)throw Error(X(168));ft(ir,e),ft(Ur,n)}function rF(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,k6(t)||"Unknown",i));return Ot({},n,r)}function u1(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||iu,wh=ir.current,ft(ir,t),ft(Ur,Ur.current),!0}function VN(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=rF(t,e,wh),r.__reactInternalMemoizedMergedChildContext=t,bt(Ur),bt(ir),ft(ir,t)):bt(Ur),ft(Ur,n)}var aa=null,DS=!1,Zk=!1;function iF(t){aa===null?aa=[t]:aa.push(t)}function $W(t){DS=!0,iF(t)}function mu(){if(!Zk&&aa!==null){Zk=!0;var t=0,e=Je;try{var n=aa;for(Je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}aa=null,DS=!1}catch(i){throw aa!==null&&(aa=aa.slice(t+1)),Pj(AP,mu),i}finally{Je=e,Zk=!1}}return null}var Cf=[],_f=0,d1=null,h1=0,Ji=[],Zi=0,bh=null,qa=1,Ka="";function Ru(t,e){Cf[_f++]=h1,Cf[_f++]=d1,d1=t,h1=e}function sF(t,e,n){Ji[Zi++]=qa,Ji[Zi++]=Ka,Ji[Zi++]=bh,bh=t;var r=qa;t=Ka;var i=32-Vs(r)-1;r&=~(1<<i),n+=1;var s=32-Vs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qa=1<<32-Vs(e)+i|n<<i|r,Ka=s+t}else qa=1<<s|n<<i|r,Ka=t}function MP(t){t.return!==null&&(Ru(t,1),sF(t,1,0))}function OP(t){for(;t===d1;)d1=Cf[--_f],Cf[_f]=null,h1=Cf[--_f],Cf[_f]=null;for(;t===bh;)bh=Ji[--Zi],Ji[Zi]=null,Ka=Ji[--Zi],Ji[Zi]=null,qa=Ji[--Zi],Ji[Zi]=null}var Ai=null,ki=null,Ct=!1,Us=null;function oF(t,e){var n=ns(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function HN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ai=t,ki=Xc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ai=t,ki=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bh!==null?{id:qa,overflow:Ka}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ns(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ai=t,ki=null,!0):!1;default:return!1}}function KA(t){return(t.mode&1)!==0&&(t.flags&128)===0}function XA(t){if(Ct){var e=ki;if(e){var n=e;if(!HN(t,e)){if(KA(t))throw Error(X(418));e=Xc(n.nextSibling);var r=Ai;e&&HN(t,e)?oF(r,n):(t.flags=t.flags&-4097|2,Ct=!1,Ai=t)}}else{if(KA(t))throw Error(X(418));t.flags=t.flags&-4097|2,Ct=!1,Ai=t}}}function WN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ai=t}function ob(t){if(t!==Ai)return!1;if(!Ct)return WN(t),Ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!HA(t.type,t.memoizedProps)),e&&(e=ki)){if(KA(t))throw aF(),Error(X(418));for(;e;)oF(t,e),e=Xc(e.nextSibling)}if(WN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ki=Xc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ki=null}}else ki=Ai?Xc(t.stateNode.nextSibling):null;return!0}function aF(){for(var t=ki;t;)t=Xc(t.nextSibling)}function zm(){ki=Ai=null,Ct=!1}function LP(t){Us===null?Us=[t]:Us.push(t)}var UW=hl.ReactCurrentBatchConfig;function kg(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function ab(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function GN(t){var e=t._init;return e(t._payload)}function lF(t){function e(y,w){if(t){var b=y.deletions;b===null?(y.deletions=[w],y.flags|=16):b.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=Zc(y,w),y.index=0,y.sibling=null,y}function s(y,w,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<w?(y.flags|=2,w):b):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,b,k){return w===null||w.tag!==6?(w=oE(b,y.mode,k),w.return=y,w):(w=i(w,b),w.return=y,w)}function l(y,w,b,k){var _=b.type;return _===bf?d(y,w,b.props.children,k,b.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Il&&GN(_)===w.type)?(k=i(w,b.props),k.ref=kg(y,w,b),k.return=y,k):(k=rx(b.type,b.key,b.props,null,y.mode,k),k.ref=kg(y,w,b),k.return=y,k)}function c(y,w,b,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=aE(b,y.mode,k),w.return=y,w):(w=i(w,b.children||[]),w.return=y,w)}function d(y,w,b,k,_){return w===null||w.tag!==7?(w=yh(b,y.mode,k,_),w.return=y,w):(w=i(w,b),w.return=y,w)}function h(y,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=oE(""+w,y.mode,b),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yw:return b=rx(w.type,w.key,w.props,null,y.mode,b),b.ref=kg(y,null,w),b.return=y,b;case wf:return w=aE(w,y.mode,b),w.return=y,w;case Il:var k=w._init;return h(y,k(w._payload),b)}if($g(w)||vg(w))return w=yh(w,y.mode,b,null),w.return=y,w;ab(y,w)}return null}function f(y,w,b,k){var _=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(y,w,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yw:return b.key===_?l(y,w,b,k):null;case wf:return b.key===_?c(y,w,b,k):null;case Il:return _=b._init,f(y,w,_(b._payload),k)}if($g(b)||vg(b))return _!==null?null:d(y,w,b,k,null);ab(y,b)}return null}function p(y,w,b,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(b)||null,a(w,y,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Yw:return y=y.get(k.key===null?b:k.key)||null,l(w,y,k,_);case wf:return y=y.get(k.key===null?b:k.key)||null,c(w,y,k,_);case Il:var C=k._init;return p(y,w,b,C(k._payload),_)}if($g(k)||vg(k))return y=y.get(b)||null,d(w,y,k,_,null);ab(w,k)}return null}function m(y,w,b,k){for(var _=null,C=null,P=w,R=w=0,M=null;P!==null&&R<b.length;R++){P.index>R?(M=P,P=null):M=P.sibling;var I=f(y,P,b[R],k);if(I===null){P===null&&(P=M);break}t&&P&&I.alternate===null&&e(y,P),w=s(I,w,R),C===null?_=I:C.sibling=I,C=I,P=M}if(R===b.length)return n(y,P),Ct&&Ru(y,R),_;if(P===null){for(;R<b.length;R++)P=h(y,b[R],k),P!==null&&(w=s(P,w,R),C===null?_=P:C.sibling=P,C=P);return Ct&&Ru(y,R),_}for(P=r(y,P);R<b.length;R++)M=p(P,y,R,b[R],k),M!==null&&(t&&M.alternate!==null&&P.delete(M.key===null?R:M.key),w=s(M,w,R),C===null?_=M:C.sibling=M,C=M);return t&&P.forEach(function(j){return e(y,j)}),Ct&&Ru(y,R),_}function g(y,w,b,k){var _=vg(b);if(typeof _!="function")throw Error(X(150));if(b=_.call(b),b==null)throw Error(X(151));for(var C=_=null,P=w,R=w=0,M=null,I=b.next();P!==null&&!I.done;R++,I=b.next()){P.index>R?(M=P,P=null):M=P.sibling;var j=f(y,P,I.value,k);if(j===null){P===null&&(P=M);break}t&&P&&j.alternate===null&&e(y,P),w=s(j,w,R),C===null?_=j:C.sibling=j,C=j,P=M}if(I.done)return n(y,P),Ct&&Ru(y,R),_;if(P===null){for(;!I.done;R++,I=b.next())I=h(y,I.value,k),I!==null&&(w=s(I,w,R),C===null?_=I:C.sibling=I,C=I);return Ct&&Ru(y,R),_}for(P=r(y,P);!I.done;R++,I=b.next())I=p(P,y,R,I.value,k),I!==null&&(t&&I.alternate!==null&&P.delete(I.key===null?R:I.key),w=s(I,w,R),C===null?_=I:C.sibling=I,C=I);return t&&P.forEach(function(U){return e(y,U)}),Ct&&Ru(y,R),_}function v(y,w,b,k){if(typeof b=="object"&&b!==null&&b.type===bf&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Yw:e:{for(var _=b.key,C=w;C!==null;){if(C.key===_){if(_=b.type,_===bf){if(C.tag===7){n(y,C.sibling),w=i(C,b.props.children),w.return=y,y=w;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Il&&GN(_)===C.type){n(y,C.sibling),w=i(C,b.props),w.ref=kg(y,C,b),w.return=y,y=w;break e}n(y,C);break}else e(y,C);C=C.sibling}b.type===bf?(w=yh(b.props.children,y.mode,k,b.key),w.return=y,y=w):(k=rx(b.type,b.key,b.props,null,y.mode,k),k.ref=kg(y,w,b),k.return=y,y=k)}return o(y);case wf:e:{for(C=b.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(y,w.sibling),w=i(w,b.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=aE(b,y.mode,k),w.return=y,y=w}return o(y);case Il:return C=b._init,v(y,w,C(b._payload),k)}if($g(b))return m(y,w,b,k);if(vg(b))return g(y,w,b,k);ab(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(y,w.sibling),w=i(w,b),w.return=y,y=w):(n(y,w),w=oE(b,y.mode,k),w.return=y,y=w),o(y)):n(y,w)}return v}var Vm=lF(!0),cF=lF(!1),f1=pu(null),p1=null,Tf=null,jP=null;function FP(){jP=Tf=p1=null}function BP(t){var e=f1.current;bt(f1),t._currentValue=e}function YA(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qf(t,e){p1=t,jP=Tf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($r=!0),t.firstContext=null)}function ls(t){var e=t._currentValue;if(jP!==t)if(t={context:t,memoizedValue:e,next:null},Tf===null){if(p1===null)throw Error(X(308));Tf=t,p1.dependencies={lanes:0,firstContext:t}}else Tf=Tf.next=t;return e}var Hu=null;function $P(t){Hu===null?Hu=[t]:Hu.push(t)}function uF(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$P(e)):(n.next=i.next,i.next=n),e.interleaved=n,rl(t,r)}function rl(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nl=!1;function UP(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dF(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ya(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,rl(t,n)}return i=r.interleaved,i===null?(e.next=e,$P(r)):(e.next=i.next,i.next=e),r.interleaved=e,rl(t,n)}function Qb(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,CP(t,n)}}function qN(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function m1(t,e,n,r){var i=t.updateQueue;Nl=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Ot({},h,f);break e;case 2:Nl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Sh|=o,t.lanes=o,t.memoizedState=h}}function KN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var _w={},Lo=pu(_w),Wy=pu(_w),Gy=pu(_w);function Wu(t){if(t===_w)throw Error(X(174));return t}function zP(t,e){switch(ft(Gy,e),ft(Wy,t),ft(Lo,_w),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:RA(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=RA(e,t)}bt(Lo),ft(Lo,e)}function Hm(){bt(Lo),bt(Wy),bt(Gy)}function hF(t){Wu(Gy.current);var e=Wu(Lo.current),n=RA(e,t.type);e!==n&&(ft(Wy,t),ft(Lo,n))}function VP(t){Wy.current===t&&(bt(Lo),bt(Wy))}var It=pu(0);function g1(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eE=[];function HP(){for(var t=0;t<eE.length;t++)eE[t]._workInProgressVersionPrimary=null;eE.length=0}var Jb=hl.ReactCurrentDispatcher,tE=hl.ReactCurrentBatchConfig,xh=0,Dt=null,fn=null,_n=null,y1=!1,by=!1,qy=0,zW=0;function Wn(){throw Error(X(321))}function WP(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gs(t[n],e[n]))return!1;return!0}function GP(t,e,n,r,i,s){if(xh=s,Dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jb.current=t===null||t.memoizedState===null?GW:qW,t=n(r,i),by){s=0;do{if(by=!1,qy=0,25<=s)throw Error(X(301));s+=1,_n=fn=null,e.updateQueue=null,Jb.current=KW,t=n(r,i)}while(by)}if(Jb.current=v1,e=fn!==null&&fn.next!==null,xh=0,_n=fn=Dt=null,y1=!1,e)throw Error(X(300));return t}function qP(){var t=qy!==0;return qy=0,t}function no(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Dt.memoizedState=_n=t:_n=_n.next=t,_n}function cs(){if(fn===null){var t=Dt.alternate;t=t!==null?t.memoizedState:null}else t=fn.next;var e=_n===null?Dt.memoizedState:_n.next;if(e!==null)_n=e,fn=t;else{if(t===null)throw Error(X(310));fn=t,t={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},_n===null?Dt.memoizedState=_n=t:_n=_n.next=t}return _n}function Ky(t,e){return typeof e=="function"?e(t):e}function nE(t){var e=cs(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=fn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((xh&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Dt.lanes|=d,Sh|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Gs(r,e.memoizedState)||($r=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Dt.lanes|=s,Sh|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rE(t){var e=cs(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Gs(s,e.memoizedState)||($r=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function fF(){}function pF(t,e){var n=Dt,r=cs(),i=e(),s=!Gs(r.memoizedState,i);if(s&&(r.memoizedState=i,$r=!0),r=r.queue,KP(yF.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||_n!==null&&_n.memoizedState.tag&1){if(n.flags|=2048,Xy(9,gF.bind(null,n,r,i,e),void 0,null),Tn===null)throw Error(X(349));xh&30||mF(n,e,i)}return i}function mF(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Dt.updateQueue,e===null?(e={lastEffect:null,stores:null},Dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gF(t,e,n,r){e.value=n,e.getSnapshot=r,vF(e)&&wF(t)}function yF(t,e,n){return n(function(){vF(e)&&wF(t)})}function vF(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gs(t,n)}catch{return!0}}function wF(t){var e=rl(t,1);e!==null&&Hs(e,t,1,-1)}function XN(t){var e=no();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ky,lastRenderedState:t},e.queue=t,t=t.dispatch=WW.bind(null,Dt,t),[e.memoizedState,t]}function Xy(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Dt.updateQueue,e===null?(e={lastEffect:null,stores:null},Dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bF(){return cs().memoizedState}function Zb(t,e,n,r){var i=no();Dt.flags|=t,i.memoizedState=Xy(1|e,n,void 0,r===void 0?null:r)}function MS(t,e,n,r){var i=cs();r=r===void 0?null:r;var s=void 0;if(fn!==null){var o=fn.memoizedState;if(s=o.destroy,r!==null&&WP(r,o.deps)){i.memoizedState=Xy(e,n,s,r);return}}Dt.flags|=t,i.memoizedState=Xy(1|e,n,s,r)}function YN(t,e){return Zb(8390656,8,t,e)}function KP(t,e){return MS(2048,8,t,e)}function xF(t,e){return MS(4,2,t,e)}function SF(t,e){return MS(4,4,t,e)}function kF(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function EF(t,e,n){return n=n!=null?n.concat([t]):null,MS(4,4,kF.bind(null,e,t),n)}function XP(){}function AF(t,e){var n=cs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&WP(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function CF(t,e){var n=cs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&WP(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function _F(t,e,n){return xh&21?(Gs(n,e)||(n=Nj(),Dt.lanes|=n,Sh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$r=!0),t.memoizedState=n)}function VW(t,e){var n=Je;Je=n!==0&&4>n?n:4,t(!0);var r=tE.transition;tE.transition={};try{t(!1),e()}finally{Je=n,tE.transition=r}}function TF(){return cs().memoizedState}function HW(t,e,n){var r=Jc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PF(t))RF(e,n);else if(n=uF(t,e,n,r),n!==null){var i=br();Hs(n,t,r,i),IF(n,e,r)}}function WW(t,e,n){var r=Jc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PF(t))RF(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Gs(a,o)){var l=e.interleaved;l===null?(i.next=i,$P(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=uF(t,e,i,r),n!==null&&(i=br(),Hs(n,t,r,i),IF(n,e,r))}}function PF(t){var e=t.alternate;return t===Dt||e!==null&&e===Dt}function RF(t,e){by=y1=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function IF(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,CP(t,n)}}var v1={readContext:ls,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},GW={readContext:ls,useCallback:function(t,e){return no().memoizedState=[t,e===void 0?null:e],t},useContext:ls,useEffect:YN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zb(4194308,4,kF.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zb(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zb(4,2,t,e)},useMemo:function(t,e){var n=no();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=no();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=HW.bind(null,Dt,t),[r.memoizedState,t]},useRef:function(t){var e=no();return t={current:t},e.memoizedState=t},useState:XN,useDebugValue:XP,useDeferredValue:function(t){return no().memoizedState=t},useTransition:function(){var t=XN(!1),e=t[0];return t=VW.bind(null,t[1]),no().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Dt,i=no();if(Ct){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Tn===null)throw Error(X(349));xh&30||mF(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,YN(yF.bind(null,r,s,t),[t]),r.flags|=2048,Xy(9,gF.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=no(),e=Tn.identifierPrefix;if(Ct){var n=Ka,r=qa;n=(r&~(1<<32-Vs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qy++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zW++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qW={readContext:ls,useCallback:AF,useContext:ls,useEffect:KP,useImperativeHandle:EF,useInsertionEffect:xF,useLayoutEffect:SF,useMemo:CF,useReducer:nE,useRef:bF,useState:function(){return nE(Ky)},useDebugValue:XP,useDeferredValue:function(t){var e=cs();return _F(e,fn.memoizedState,t)},useTransition:function(){var t=nE(Ky)[0],e=cs().memoizedState;return[t,e]},useMutableSource:fF,useSyncExternalStore:pF,useId:TF,unstable_isNewReconciler:!1},KW={readContext:ls,useCallback:AF,useContext:ls,useEffect:KP,useImperativeHandle:EF,useInsertionEffect:xF,useLayoutEffect:SF,useMemo:CF,useReducer:rE,useRef:bF,useState:function(){return rE(Ky)},useDebugValue:XP,useDeferredValue:function(t){var e=cs();return fn===null?e.memoizedState=t:_F(e,fn.memoizedState,t)},useTransition:function(){var t=rE(Ky)[0],e=cs().memoizedState;return[t,e]},useMutableSource:fF,useSyncExternalStore:pF,useId:TF,unstable_isNewReconciler:!1};function ks(t,e){if(t&&t.defaultProps){e=Ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function QA(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var OS={isMounted:function(t){return(t=t._reactInternals)?Lh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=br(),i=Jc(t),s=Ya(r,i);s.payload=e,n!=null&&(s.callback=n),e=Yc(t,s,i),e!==null&&(Hs(e,t,i,r),Qb(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=br(),i=Jc(t),s=Ya(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Yc(t,s,i),e!==null&&(Hs(e,t,i,r),Qb(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=br(),r=Jc(t),i=Ya(n,r);i.tag=2,e!=null&&(i.callback=e),e=Yc(t,i,r),e!==null&&(Hs(e,t,r,n),Qb(e,t,r))}};function QN(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Uy(n,r)||!Uy(i,s):!0}function NF(t,e,n){var r=!1,i=iu,s=e.contextType;return typeof s=="object"&&s!==null?s=ls(s):(i=zr(e)?wh:ir.current,r=e.contextTypes,s=(r=r!=null)?Um(t,i):iu),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=OS,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function JN(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&OS.enqueueReplaceState(e,e.state,null)}function JA(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},UP(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ls(s):(s=zr(e)?wh:ir.current,i.context=Um(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(QA(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&OS.enqueueReplaceState(i,i.state,null),m1(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Wm(t,e){try{var n="",r=e;do n+=S6(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function iE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ZA(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var XW=typeof WeakMap=="function"?WeakMap:Map;function DF(t,e,n){n=Ya(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){b1||(b1=!0,cC=r),ZA(t,e)},n}function MF(t,e,n){n=Ya(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ZA(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ZA(t,e),typeof r!="function"&&(Qc===null?Qc=new Set([this]):Qc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ZN(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new XW;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=c8.bind(null,t,e,n),e.then(t,t))}function eD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function tD(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ya(-1,1),e.tag=2,Yc(n,e,1))),n.lanes|=1),t)}var YW=hl.ReactCurrentOwner,$r=!1;function pr(t,e,n,r){e.child=t===null?cF(e,null,n,r):Vm(e,t.child,n,r)}function nD(t,e,n,r,i){n=n.render;var s=e.ref;return qf(e,i),r=GP(t,e,n,r,s,i),n=qP(),t!==null&&!$r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,il(t,e,i)):(Ct&&n&&MP(e),e.flags|=1,pr(t,e,r,i),e.child)}function rD(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!rR(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,OF(t,e,s,r,i)):(t=rx(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Uy,n(o,r)&&t.ref===e.ref)return il(t,e,i)}return e.flags|=1,t=Zc(s,r),t.ref=e.ref,t.return=e,e.child=t}function OF(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Uy(s,r)&&t.ref===e.ref)if($r=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&($r=!0);else return e.lanes=t.lanes,il(t,e,i)}return eC(t,e,n,r,i)}function LF(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(Rf,vi),vi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ft(Rf,vi),vi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ft(Rf,vi),vi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ft(Rf,vi),vi|=r;return pr(t,e,i,n),e.child}function jF(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function eC(t,e,n,r,i){var s=zr(n)?wh:ir.current;return s=Um(e,s),qf(e,i),n=GP(t,e,n,r,s,i),r=qP(),t!==null&&!$r?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,il(t,e,i)):(Ct&&r&&MP(e),e.flags|=1,pr(t,e,n,i),e.child)}function iD(t,e,n,r,i){if(zr(n)){var s=!0;u1(e)}else s=!1;if(qf(e,i),e.stateNode===null)ex(t,e),NF(e,n,r),JA(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ls(c):(c=zr(n)?wh:ir.current,c=Um(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&JN(e,o,r,c),Nl=!1;var f=e.memoizedState;o.state=f,m1(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Ur.current||Nl?(typeof d=="function"&&(QA(e,n,d,r),l=e.memoizedState),(a=Nl||QN(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dF(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ks(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ls(l):(l=zr(n)?wh:ir.current,l=Um(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&JN(e,o,r,l),Nl=!1,f=e.memoizedState,o.state=f,m1(e,r,o,i);var m=e.memoizedState;a!==h||f!==m||Ur.current||Nl?(typeof p=="function"&&(QA(e,n,p,r),m=e.memoizedState),(c=Nl||QN(e,n,c,r,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return tC(t,e,n,r,s,i)}function tC(t,e,n,r,i,s){jF(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&VN(e,n,!1),il(t,e,s);r=e.stateNode,YW.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Vm(e,t.child,null,s),e.child=Vm(e,null,a,s)):pr(t,e,a,s),e.memoizedState=r.state,i&&VN(e,n,!0),e.child}function FF(t){var e=t.stateNode;e.pendingContext?zN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zN(t,e.context,!1),zP(t,e.containerInfo)}function sD(t,e,n,r,i){return zm(),LP(i),e.flags|=256,pr(t,e,n,r),e.child}var nC={dehydrated:null,treeContext:null,retryLane:0};function rC(t){return{baseLanes:t,cachePool:null,transitions:null}}function BF(t,e,n){var r=e.pendingProps,i=It.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ft(It,i&1),t===null)return XA(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=FS(o,r,0,null),t=yh(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rC(n),e.memoizedState=nC,t):YP(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return QW(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Zc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Zc(a,s):(s=yh(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?rC(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=nC,r}return s=t.child,t=s.sibling,r=Zc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function YP(t,e){return e=FS({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lb(t,e,n,r){return r!==null&&LP(r),Vm(e,t.child,null,n),t=YP(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QW(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=iE(Error(X(422))),lb(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=FS({mode:"visible",children:r.children},i,0,null),s=yh(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Vm(e,t.child,null,o),e.child.memoizedState=rC(o),e.memoizedState=nC,s);if(!(e.mode&1))return lb(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(X(419)),r=iE(s,r,void 0),lb(t,e,o,r)}if(a=(o&t.childLanes)!==0,$r||a){if(r=Tn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,rl(t,i),Hs(r,t,i,-1))}return nR(),r=iE(Error(X(421))),lb(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=u8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ki=Xc(i.nextSibling),Ai=e,Ct=!0,Us=null,t!==null&&(Ji[Zi++]=qa,Ji[Zi++]=Ka,Ji[Zi++]=bh,qa=t.id,Ka=t.overflow,bh=e),e=YP(e,r.children),e.flags|=4096,e)}function oD(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),YA(t.return,e,n)}function sE(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $F(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(pr(t,e,r.children,n),r=It.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oD(t,n,e);else if(t.tag===19)oD(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ft(It,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&g1(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),sE(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&g1(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}sE(e,!0,n,null,s);break;case"together":sE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ex(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function il(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Sh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Zc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function JW(t,e,n){switch(e.tag){case 3:FF(e),zm();break;case 5:hF(e);break;case 1:zr(e.type)&&u1(e);break;case 4:zP(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ft(f1,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ft(It,It.current&1),e.flags|=128,null):n&e.child.childLanes?BF(t,e,n):(ft(It,It.current&1),t=il(t,e,n),t!==null?t.sibling:null);ft(It,It.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $F(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ft(It,It.current),r)break;return null;case 22:case 23:return e.lanes=0,LF(t,e,n)}return il(t,e,n)}var UF,iC,zF,VF;UF=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};iC=function(){};zF=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Wu(Lo.current);var s=null;switch(n){case"input":i=CA(t,i),r=CA(t,r),s=[];break;case"select":i=Ot({},i,{value:void 0}),r=Ot({},r,{value:void 0}),s=[];break;case"textarea":i=PA(t,i),r=PA(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=l1)}IA(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(My.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(My.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&vt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};VF=function(t,e,n,r){n!==r&&(e.flags|=4)};function Eg(t,e){if(!Ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ZW(t,e,n){var r=e.pendingProps;switch(OP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(e),null;case 1:return zr(e.type)&&c1(),Gn(e),null;case 3:return r=e.stateNode,Hm(),bt(Ur),bt(ir),HP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ob(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Us!==null&&(hC(Us),Us=null))),iC(t,e),Gn(e),null;case 5:VP(e);var i=Wu(Gy.current);if(n=e.type,t!==null&&e.stateNode!=null)zF(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Gn(e),null}if(t=Wu(Lo.current),ob(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Io]=e,r[Hy]=s,t=(e.mode&1)!==0,n){case"dialog":vt("cancel",r),vt("close",r);break;case"iframe":case"object":case"embed":vt("load",r);break;case"video":case"audio":for(i=0;i<zg.length;i++)vt(zg[i],r);break;case"source":vt("error",r);break;case"img":case"image":case"link":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"input":mN(r,s),vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},vt("invalid",r);break;case"textarea":yN(r,s),vt("invalid",r)}IA(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&sb(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&sb(r.textContent,a,t),i=["children",""+a]):My.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&vt("scroll",r)}switch(n){case"input":Qw(r),gN(r,s,!0);break;case"textarea":Qw(r),vN(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=l1)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yj(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Io]=e,t[Hy]=r,UF(t,e,!1,!1),e.stateNode=t;e:{switch(o=NA(n,r),n){case"dialog":vt("cancel",t),vt("close",t),i=r;break;case"iframe":case"object":case"embed":vt("load",t),i=r;break;case"video":case"audio":for(i=0;i<zg.length;i++)vt(zg[i],t);i=r;break;case"source":vt("error",t),i=r;break;case"img":case"image":case"link":vt("error",t),vt("load",t),i=r;break;case"details":vt("toggle",t),i=r;break;case"input":mN(t,r),i=CA(t,r),vt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ot({},r,{value:void 0}),vt("invalid",t);break;case"textarea":yN(t,r),i=PA(t,r),vt("invalid",t);break;default:i=r}IA(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?bj(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vj(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Oy(t,l):typeof l=="number"&&Oy(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(My.hasOwnProperty(s)?l!=null&&s==="onScroll"&&vt("scroll",t):l!=null&&bP(t,s,l,o))}switch(n){case"input":Qw(t),gN(t,r,!1);break;case"textarea":Qw(t),vN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ru(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Vf(t,!!r.multiple,s,!1):r.defaultValue!=null&&Vf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=l1)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gn(e),null;case 6:if(t&&e.stateNode!=null)VF(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=Wu(Gy.current),Wu(Lo.current),ob(e)){if(r=e.stateNode,n=e.memoizedProps,r[Io]=e,(s=r.nodeValue!==n)&&(t=Ai,t!==null))switch(t.tag){case 3:sb(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sb(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Io]=e,e.stateNode=r}return Gn(e),null;case 13:if(bt(It),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ct&&ki!==null&&e.mode&1&&!(e.flags&128))aF(),zm(),e.flags|=98560,s=!1;else if(s=ob(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[Io]=e}else zm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gn(e),s=!1}else Us!==null&&(hC(Us),Us=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||It.current&1?mn===0&&(mn=3):nR())),e.updateQueue!==null&&(e.flags|=4),Gn(e),null);case 4:return Hm(),iC(t,e),t===null&&zy(e.stateNode.containerInfo),Gn(e),null;case 10:return BP(e.type._context),Gn(e),null;case 17:return zr(e.type)&&c1(),Gn(e),null;case 19:if(bt(It),s=e.memoizedState,s===null)return Gn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Eg(s,!1);else{if(mn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=g1(t),o!==null){for(e.flags|=128,Eg(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ft(It,It.current&1|2),e.child}t=t.sibling}s.tail!==null&&Xt()>Gm&&(e.flags|=128,r=!0,Eg(s,!1),e.lanes=4194304)}else{if(!r)if(t=g1(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Eg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ct)return Gn(e),null}else 2*Xt()-s.renderingStartTime>Gm&&n!==1073741824&&(e.flags|=128,r=!0,Eg(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xt(),e.sibling=null,n=It.current,ft(It,r?n&1|2:n&1),e):(Gn(e),null);case 22:case 23:return tR(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vi&1073741824&&(Gn(e),e.subtreeFlags&6&&(e.flags|=8192)):Gn(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function e8(t,e){switch(OP(e),e.tag){case 1:return zr(e.type)&&c1(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hm(),bt(Ur),bt(ir),HP(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return VP(e),null;case 13:if(bt(It),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));zm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bt(It),null;case 4:return Hm(),null;case 10:return BP(e.type._context),null;case 22:case 23:return tR(),null;case 24:return null;default:return null}}var cb=!1,tr=!1,t8=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Pf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vt(t,e,r)}else n.current=null}function sC(t,e,n){try{n()}catch(r){Vt(t,e,r)}}var aD=!1;function n8(t,e){if(zA=s1,t=Kj(),DP(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(VA={focusedElem:t,selectionRange:n},s1=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:ks(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(k){Vt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return m=aD,aD=!1,m}function xy(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&sC(e,n,s)}i=i.next}while(i!==r)}}function LS(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function oC(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function HF(t){var e=t.alternate;e!==null&&(t.alternate=null,HF(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Io],delete e[Hy],delete e[GA],delete e[FW],delete e[BW])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function WF(t){return t.tag===5||t.tag===3||t.tag===4}function lD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||WF(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function aC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=l1));else if(r!==4&&(t=t.child,t!==null))for(aC(t,e,n),t=t.sibling;t!==null;)aC(t,e,n),t=t.sibling}function lC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lC(t,e,n),t=t.sibling;t!==null;)lC(t,e,n),t=t.sibling}var jn=null,Bs=!1;function Sl(t,e,n){for(n=n.child;n!==null;)GF(t,e,n),n=n.sibling}function GF(t,e,n){if(Oo&&typeof Oo.onCommitFiberUnmount=="function")try{Oo.onCommitFiberUnmount(TS,n)}catch{}switch(n.tag){case 5:tr||Pf(n,e);case 6:var r=jn,i=Bs;jn=null,Sl(t,e,n),jn=r,Bs=i,jn!==null&&(Bs?(t=jn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jn.removeChild(n.stateNode));break;case 18:jn!==null&&(Bs?(t=jn,n=n.stateNode,t.nodeType===8?Jk(t.parentNode,n):t.nodeType===1&&Jk(t,n),By(t)):Jk(jn,n.stateNode));break;case 4:r=jn,i=Bs,jn=n.stateNode.containerInfo,Bs=!0,Sl(t,e,n),jn=r,Bs=i;break;case 0:case 11:case 14:case 15:if(!tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&sC(n,e,o),i=i.next}while(i!==r)}Sl(t,e,n);break;case 1:if(!tr&&(Pf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Vt(n,e,a)}Sl(t,e,n);break;case 21:Sl(t,e,n);break;case 22:n.mode&1?(tr=(r=tr)||n.memoizedState!==null,Sl(t,e,n),tr=r):Sl(t,e,n);break;default:Sl(t,e,n)}}function cD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new t8),e.forEach(function(r){var i=d8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jn=a.stateNode,Bs=!1;break e;case 3:jn=a.stateNode.containerInfo,Bs=!0;break e;case 4:jn=a.stateNode.containerInfo,Bs=!0;break e}a=a.return}if(jn===null)throw Error(X(160));GF(s,o,i),jn=null,Bs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Vt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qF(e,t),e=e.sibling}function qF(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gs(e,t),Js(t),r&4){try{xy(3,t,t.return),LS(3,t)}catch(g){Vt(t,t.return,g)}try{xy(5,t,t.return)}catch(g){Vt(t,t.return,g)}}break;case 1:gs(e,t),Js(t),r&512&&n!==null&&Pf(n,n.return);break;case 5:if(gs(e,t),Js(t),r&512&&n!==null&&Pf(n,n.return),t.flags&32){var i=t.stateNode;try{Oy(i,"")}catch(g){Vt(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&mj(i,s),NA(a,o);var c=NA(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?bj(i,h):d==="dangerouslySetInnerHTML"?vj(i,h):d==="children"?Oy(i,h):bP(i,d,h,c)}switch(a){case"input":_A(i,s);break;case"textarea":gj(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Vf(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Vf(i,!!s.multiple,s.defaultValue,!0):Vf(i,!!s.multiple,s.multiple?[]:"",!1))}i[Hy]=s}catch(g){Vt(t,t.return,g)}}break;case 6:if(gs(e,t),Js(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Vt(t,t.return,g)}}break;case 3:if(gs(e,t),Js(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{By(e.containerInfo)}catch(g){Vt(t,t.return,g)}break;case 4:gs(e,t),Js(t);break;case 13:gs(e,t),Js(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ZP=Xt())),r&4&&cD(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(tr=(c=tr)||d,gs(e,t),tr=c):gs(e,t),Js(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(oe=t,d=t.child;d!==null;){for(h=oe=d;oe!==null;){switch(f=oe,p=f.child,f.tag){case 0:case 11:case 14:case 15:xy(4,f,f.return);break;case 1:Pf(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Vt(r,n,g)}}break;case 5:Pf(f,f.return);break;case 22:if(f.memoizedState!==null){dD(h);continue}}p!==null?(p.return=f,oe=p):dD(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wj("display",o))}catch(g){Vt(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Vt(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gs(e,t),Js(t),r&4&&cD(t);break;case 21:break;default:gs(e,t),Js(t)}}function Js(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(WF(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Oy(i,""),r.flags&=-33);var s=lD(t);lC(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=lD(t);aC(t,a,o);break;default:throw Error(X(161))}}catch(l){Vt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function r8(t,e,n){oe=t,KF(t)}function KF(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var i=oe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||cb;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||tr;a=cb;var c=tr;if(cb=o,(tr=l)&&!c)for(oe=i;oe!==null;)o=oe,l=o.child,o.tag===22&&o.memoizedState!==null?hD(i):l!==null?(l.return=o,oe=l):hD(i);for(;s!==null;)oe=s,KF(s),s=s.sibling;oe=i,cb=a,tr=c}uD(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,oe=s):uD(t)}}function uD(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tr||LS(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ks(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&KN(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}KN(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&By(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}tr||e.flags&512&&oC(e)}catch(f){Vt(e,e.return,f)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function dD(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function hD(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{LS(4,e)}catch(l){Vt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Vt(e,i,l)}}var s=e.return;try{oC(e)}catch(l){Vt(e,s,l)}break;case 5:var o=e.return;try{oC(e)}catch(l){Vt(e,o,l)}}}catch(l){Vt(e,e.return,l)}if(e===t){oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,oe=a;break}oe=e.return}}var i8=Math.ceil,w1=hl.ReactCurrentDispatcher,QP=hl.ReactCurrentOwner,is=hl.ReactCurrentBatchConfig,Fe=0,Tn=null,on=null,Vn=0,vi=0,Rf=pu(0),mn=0,Yy=null,Sh=0,jS=0,JP=0,Sy=null,Br=null,ZP=0,Gm=1/0,ra=null,b1=!1,cC=null,Qc=null,ub=!1,Vc=null,x1=0,ky=0,uC=null,tx=-1,nx=0;function br(){return Fe&6?Xt():tx!==-1?tx:tx=Xt()}function Jc(t){return t.mode&1?Fe&2&&Vn!==0?Vn&-Vn:UW.transition!==null?(nx===0&&(nx=Nj()),nx):(t=Je,t!==0||(t=window.event,t=t===void 0?16:Bj(t.type)),t):1}function Hs(t,e,n,r){if(50<ky)throw ky=0,uC=null,Error(X(185));Ew(t,n,r),(!(Fe&2)||t!==Tn)&&(t===Tn&&(!(Fe&2)&&(jS|=n),mn===4&&Ol(t,Vn)),Vr(t,r),n===1&&Fe===0&&!(e.mode&1)&&(Gm=Xt()+500,DS&&mu()))}function Vr(t,e){var n=t.callbackNode;U6(t,e);var r=i1(t,t===Tn?Vn:0);if(r===0)n!==null&&xN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xN(n),e===1)t.tag===0?$W(fD.bind(null,t)):iF(fD.bind(null,t)),LW(function(){!(Fe&6)&&mu()}),n=null;else{switch(Dj(r)){case 1:n=AP;break;case 4:n=Rj;break;case 16:n=r1;break;case 536870912:n=Ij;break;default:n=r1}n=nB(n,XF.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function XF(t,e){if(tx=-1,nx=0,Fe&6)throw Error(X(327));var n=t.callbackNode;if(Kf()&&t.callbackNode!==n)return null;var r=i1(t,t===Tn?Vn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=S1(t,r);else{e=r;var i=Fe;Fe|=2;var s=QF();(Tn!==t||Vn!==e)&&(ra=null,Gm=Xt()+500,gh(t,e));do try{a8();break}catch(a){YF(t,a)}while(!0);FP(),w1.current=s,Fe=i,on!==null?e=0:(Tn=null,Vn=0,e=mn)}if(e!==0){if(e===2&&(i=jA(t),i!==0&&(r=i,e=dC(t,i))),e===1)throw n=Yy,gh(t,0),Ol(t,r),Vr(t,Xt()),n;if(e===6)Ol(t,r);else{if(i=t.current.alternate,!(r&30)&&!s8(i)&&(e=S1(t,r),e===2&&(s=jA(t),s!==0&&(r=s,e=dC(t,s))),e===1))throw n=Yy,gh(t,0),Ol(t,r),Vr(t,Xt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Iu(t,Br,ra);break;case 3:if(Ol(t,r),(r&130023424)===r&&(e=ZP+500-Xt(),10<e)){if(i1(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){br(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=WA(Iu.bind(null,t,Br,ra),e);break}Iu(t,Br,ra);break;case 4:if(Ol(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Vs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*i8(r/1960))-r,10<r){t.timeoutHandle=WA(Iu.bind(null,t,Br,ra),r);break}Iu(t,Br,ra);break;case 5:Iu(t,Br,ra);break;default:throw Error(X(329))}}}return Vr(t,Xt()),t.callbackNode===n?XF.bind(null,t):null}function dC(t,e){var n=Sy;return t.current.memoizedState.isDehydrated&&(gh(t,e).flags|=256),t=S1(t,e),t!==2&&(e=Br,Br=n,e!==null&&hC(e)),t}function hC(t){Br===null?Br=t:Br.push.apply(Br,t)}function s8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Gs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ol(t,e){for(e&=~JP,e&=~jS,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vs(e),r=1<<n;t[n]=-1,e&=~r}}function fD(t){if(Fe&6)throw Error(X(327));Kf();var e=i1(t,0);if(!(e&1))return Vr(t,Xt()),null;var n=S1(t,e);if(t.tag!==0&&n===2){var r=jA(t);r!==0&&(e=r,n=dC(t,r))}if(n===1)throw n=Yy,gh(t,0),Ol(t,e),Vr(t,Xt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Iu(t,Br,ra),Vr(t,Xt()),null}function eR(t,e){var n=Fe;Fe|=1;try{return t(e)}finally{Fe=n,Fe===0&&(Gm=Xt()+500,DS&&mu())}}function kh(t){Vc!==null&&Vc.tag===0&&!(Fe&6)&&Kf();var e=Fe;Fe|=1;var n=is.transition,r=Je;try{if(is.transition=null,Je=1,t)return t()}finally{Je=r,is.transition=n,Fe=e,!(Fe&6)&&mu()}}function tR(){vi=Rf.current,bt(Rf)}function gh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OW(n)),on!==null)for(n=on.return;n!==null;){var r=n;switch(OP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&c1();break;case 3:Hm(),bt(Ur),bt(ir),HP();break;case 5:VP(r);break;case 4:Hm();break;case 13:bt(It);break;case 19:bt(It);break;case 10:BP(r.type._context);break;case 22:case 23:tR()}n=n.return}if(Tn=t,on=t=Zc(t.current,null),Vn=vi=e,mn=0,Yy=null,JP=jS=Sh=0,Br=Sy=null,Hu!==null){for(e=0;e<Hu.length;e++)if(n=Hu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Hu=null}return t}function YF(t,e){do{var n=on;try{if(FP(),Jb.current=v1,y1){for(var r=Dt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}y1=!1}if(xh=0,_n=fn=Dt=null,by=!1,qy=0,QP.current=null,n===null||n.return===null){mn=1,Yy=e,on=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Vn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=eD(o);if(p!==null){p.flags&=-257,tD(p,o,a,s,e),p.mode&1&&ZN(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){ZN(s,c,e),nR();break e}l=Error(X(426))}}else if(Ct&&a.mode&1){var v=eD(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),tD(v,o,a,s,e),LP(Wm(l,a));break e}}s=l=Wm(l,a),mn!==4&&(mn=2),Sy===null?Sy=[s]:Sy.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=DF(s,l,e);qN(s,y);break e;case 1:a=l;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Qc===null||!Qc.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=MF(s,a,e);qN(s,k);break e}}s=s.return}while(s!==null)}ZF(n)}catch(_){e=_,on===n&&n!==null&&(on=n=n.return);continue}break}while(!0)}function QF(){var t=w1.current;return w1.current=v1,t===null?v1:t}function nR(){(mn===0||mn===3||mn===2)&&(mn=4),Tn===null||!(Sh&268435455)&&!(jS&268435455)||Ol(Tn,Vn)}function S1(t,e){var n=Fe;Fe|=2;var r=QF();(Tn!==t||Vn!==e)&&(ra=null,gh(t,e));do try{o8();break}catch(i){YF(t,i)}while(!0);if(FP(),Fe=n,w1.current=r,on!==null)throw Error(X(261));return Tn=null,Vn=0,mn}function o8(){for(;on!==null;)JF(on)}function a8(){for(;on!==null&&!N6();)JF(on)}function JF(t){var e=tB(t.alternate,t,vi);t.memoizedProps=t.pendingProps,e===null?ZF(t):on=e,QP.current=null}function ZF(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=e8(n,e),n!==null){n.flags&=32767,on=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mn=6,on=null;return}}else if(n=ZW(n,e,vi),n!==null){on=n;return}if(e=e.sibling,e!==null){on=e;return}on=e=t}while(e!==null);mn===0&&(mn=5)}function Iu(t,e,n){var r=Je,i=is.transition;try{is.transition=null,Je=1,l8(t,e,n,r)}finally{is.transition=i,Je=r}return null}function l8(t,e,n,r){do Kf();while(Vc!==null);if(Fe&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(z6(t,s),t===Tn&&(on=Tn=null,Vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ub||(ub=!0,nB(r1,function(){return Kf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=is.transition,is.transition=null;var o=Je;Je=1;var a=Fe;Fe|=4,QP.current=null,n8(t,n),qF(n,t),TW(VA),s1=!!zA,VA=zA=null,t.current=n,r8(n),D6(),Fe=a,Je=o,is.transition=s}else t.current=n;if(ub&&(ub=!1,Vc=t,x1=i),s=t.pendingLanes,s===0&&(Qc=null),L6(n.stateNode),Vr(t,Xt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(b1)throw b1=!1,t=cC,cC=null,t;return x1&1&&t.tag!==0&&Kf(),s=t.pendingLanes,s&1?t===uC?ky++:(ky=0,uC=t):ky=0,mu(),null}function Kf(){if(Vc!==null){var t=Dj(x1),e=is.transition,n=Je;try{if(is.transition=null,Je=16>t?16:t,Vc===null)var r=!1;else{if(t=Vc,Vc=null,x1=0,Fe&6)throw Error(X(331));var i=Fe;for(Fe|=4,oe=t.current;oe!==null;){var s=oe,o=s.child;if(oe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(oe=c;oe!==null;){var d=oe;switch(d.tag){case 0:case 11:case 15:xy(8,d,s)}var h=d.child;if(h!==null)h.return=d,oe=h;else for(;oe!==null;){d=oe;var f=d.sibling,p=d.return;if(HF(d),d===c){oe=null;break}if(f!==null){f.return=p,oe=f;break}oe=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}oe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,oe=o;else e:for(;oe!==null;){if(s=oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xy(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,oe=y;break e}oe=s.return}}var w=t.current;for(oe=w;oe!==null;){o=oe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,oe=b;else e:for(o=w;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:LS(9,a)}}catch(_){Vt(a,a.return,_)}if(a===o){oe=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,oe=k;break e}oe=a.return}}if(Fe=i,mu(),Oo&&typeof Oo.onPostCommitFiberRoot=="function")try{Oo.onPostCommitFiberRoot(TS,t)}catch{}r=!0}return r}finally{Je=n,is.transition=e}}return!1}function pD(t,e,n){e=Wm(n,e),e=DF(t,e,1),t=Yc(t,e,1),e=br(),t!==null&&(Ew(t,1,e),Vr(t,e))}function Vt(t,e,n){if(t.tag===3)pD(t,t,n);else for(;e!==null;){if(e.tag===3){pD(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qc===null||!Qc.has(r))){t=Wm(n,t),t=MF(e,t,1),e=Yc(e,t,1),t=br(),e!==null&&(Ew(e,1,t),Vr(e,t));break}}e=e.return}}function c8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=br(),t.pingedLanes|=t.suspendedLanes&n,Tn===t&&(Vn&n)===n&&(mn===4||mn===3&&(Vn&130023424)===Vn&&500>Xt()-ZP?gh(t,0):JP|=n),Vr(t,e)}function eB(t,e){e===0&&(t.mode&1?(e=eb,eb<<=1,!(eb&130023424)&&(eb=4194304)):e=1);var n=br();t=rl(t,e),t!==null&&(Ew(t,e,n),Vr(t,n))}function u8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eB(t,n)}function d8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),eB(t,n)}var tB;tB=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ur.current)$r=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $r=!1,JW(t,e,n);$r=!!(t.flags&131072)}else $r=!1,Ct&&e.flags&1048576&&sF(e,h1,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ex(t,e),t=e.pendingProps;var i=Um(e,ir.current);qf(e,n),i=GP(null,e,r,t,i,n);var s=qP();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zr(r)?(s=!0,u1(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,UP(e),i.updater=OS,e.stateNode=i,i._reactInternals=e,JA(e,r,t,n),e=tC(null,e,r,!0,s,n)):(e.tag=0,Ct&&s&&MP(e),pr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ex(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=f8(r),t=ks(r,t),i){case 0:e=eC(null,e,r,t,n);break e;case 1:e=iD(null,e,r,t,n);break e;case 11:e=nD(null,e,r,t,n);break e;case 14:e=rD(null,e,r,ks(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ks(r,i),eC(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ks(r,i),iD(t,e,r,i,n);case 3:e:{if(FF(e),t===null)throw Error(X(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dF(t,e),m1(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Wm(Error(X(423)),e),e=sD(t,e,r,n,i);break e}else if(r!==i){i=Wm(Error(X(424)),e),e=sD(t,e,r,n,i);break e}else for(ki=Xc(e.stateNode.containerInfo.firstChild),Ai=e,Ct=!0,Us=null,n=cF(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zm(),r===i){e=il(t,e,n);break e}pr(t,e,r,n)}e=e.child}return e;case 5:return hF(e),t===null&&XA(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,HA(r,i)?o=null:s!==null&&HA(r,s)&&(e.flags|=32),jF(t,e),pr(t,e,o,n),e.child;case 6:return t===null&&XA(e),null;case 13:return BF(t,e,n);case 4:return zP(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vm(e,null,r,n):pr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ks(r,i),nD(t,e,r,i,n);case 7:return pr(t,e,e.pendingProps,n),e.child;case 8:return pr(t,e,e.pendingProps.children,n),e.child;case 12:return pr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ft(f1,r._currentValue),r._currentValue=o,s!==null)if(Gs(s.value,o)){if(s.children===i.children&&!Ur.current){e=il(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ya(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),YA(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(X(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),YA(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}pr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,qf(e,n),i=ls(i),r=r(i),e.flags|=1,pr(t,e,r,n),e.child;case 14:return r=e.type,i=ks(r,e.pendingProps),i=ks(r.type,i),rD(t,e,r,i,n);case 15:return OF(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ks(r,i),ex(t,e),e.tag=1,zr(r)?(t=!0,u1(e)):t=!1,qf(e,n),NF(e,r,i),JA(e,r,i,n),tC(null,e,r,!0,t,n);case 19:return $F(t,e,n);case 22:return LF(t,e,n)}throw Error(X(156,e.tag))};function nB(t,e){return Pj(t,e)}function h8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(t,e,n,r){return new h8(t,e,n,r)}function rR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function f8(t){if(typeof t=="function")return rR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===SP)return 11;if(t===kP)return 14}return 2}function Zc(t,e){var n=t.alternate;return n===null?(n=ns(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rx(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")rR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bf:return yh(n.children,i,s,e);case xP:o=8,i|=8;break;case SA:return t=ns(12,n,e,i|2),t.elementType=SA,t.lanes=s,t;case kA:return t=ns(13,n,e,i),t.elementType=kA,t.lanes=s,t;case EA:return t=ns(19,n,e,i),t.elementType=EA,t.lanes=s,t;case hj:return FS(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uj:o=10;break e;case dj:o=9;break e;case SP:o=11;break e;case kP:o=14;break e;case Il:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=ns(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function yh(t,e,n,r){return t=ns(7,t,r,e),t.lanes=n,t}function FS(t,e,n,r){return t=ns(22,t,r,e),t.elementType=hj,t.lanes=n,t.stateNode={isHidden:!1},t}function oE(t,e,n){return t=ns(6,t,null,e),t.lanes=n,t}function aE(t,e,n){return e=ns(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function p8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uk(0),this.expirationTimes=Uk(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uk(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function iR(t,e,n,r,i,s,o,a,l){return t=new p8(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ns(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},UP(s),t}function m8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rB(t){if(!t)return iu;t=t._reactInternals;e:{if(Lh(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(zr(n))return rF(t,n,e)}return e}function iB(t,e,n,r,i,s,o,a,l){return t=iR(n,r,!0,t,i,s,o,a,l),t.context=rB(null),n=t.current,r=br(),i=Jc(n),s=Ya(r,i),s.callback=e??null,Yc(n,s,i),t.current.lanes=i,Ew(t,i,r),Vr(t,r),t}function BS(t,e,n,r){var i=e.current,s=br(),o=Jc(i);return n=rB(n),e.context===null?e.context=n:e.pendingContext=n,e=Ya(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yc(i,e,o),t!==null&&(Hs(t,i,o,s),Qb(t,i,o)),o}function k1(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mD(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sR(t,e){mD(t,e),(t=t.alternate)&&mD(t,e)}function g8(){return null}var sB=typeof reportError=="function"?reportError:function(t){console.error(t)};function oR(t){this._internalRoot=t}$S.prototype.render=oR.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));BS(t,e,null,null)};$S.prototype.unmount=oR.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kh(function(){BS(null,t,null,null)}),e[nl]=null}};function $S(t){this._internalRoot=t}$S.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lj();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ml.length&&e!==0&&e<Ml[n].priority;n++);Ml.splice(n,0,t),n===0&&Fj(t)}};function aR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function US(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gD(){}function y8(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=k1(o);s.call(c)}}var o=iB(e,r,t,0,null,!1,!1,"",gD);return t._reactRootContainer=o,t[nl]=o.current,zy(t.nodeType===8?t.parentNode:t),kh(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=k1(l);a.call(c)}}var l=iR(t,0,!1,null,null,!1,!1,"",gD);return t._reactRootContainer=l,t[nl]=l.current,zy(t.nodeType===8?t.parentNode:t),kh(function(){BS(e,l,n,r)}),l}function zS(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=k1(o);a.call(l)}}BS(e,o,t,i)}else o=y8(n,e,t,i,r);return k1(o)}Mj=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ug(e.pendingLanes);n!==0&&(CP(e,n|1),Vr(e,Xt()),!(Fe&6)&&(Gm=Xt()+500,mu()))}break;case 13:kh(function(){var r=rl(t,1);if(r!==null){var i=br();Hs(r,t,1,i)}}),sR(t,1)}};_P=function(t){if(t.tag===13){var e=rl(t,134217728);if(e!==null){var n=br();Hs(e,t,134217728,n)}sR(t,134217728)}};Oj=function(t){if(t.tag===13){var e=Jc(t),n=rl(t,e);if(n!==null){var r=br();Hs(n,t,e,r)}sR(t,e)}};Lj=function(){return Je};jj=function(t,e){var n=Je;try{return Je=t,e()}finally{Je=n}};MA=function(t,e,n){switch(e){case"input":if(_A(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=NS(r);if(!i)throw Error(X(90));pj(r),_A(r,i)}}}break;case"textarea":gj(t,n);break;case"select":e=n.value,e!=null&&Vf(t,!!n.multiple,e,!1)}};kj=eR;Ej=kh;var v8={usingClientEntryPoint:!1,Events:[Cw,Ef,NS,xj,Sj,eR]},Ag={findFiberByHostInstance:Vu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w8={bundleType:Ag.bundleType,version:Ag.version,rendererPackageName:Ag.rendererPackageName,rendererConfig:Ag.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_j(t),t===null?null:t.stateNode},findFiberByHostInstance:Ag.findFiberByHostInstance||g8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var db=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!db.isDisabled&&db.supportsFiber)try{TS=db.inject(w8),Oo=db}catch{}}Ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v8;Ri.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aR(e))throw Error(X(200));return m8(t,e,null,n)};Ri.createRoot=function(t,e){if(!aR(t))throw Error(X(299));var n=!1,r="",i=sB;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=iR(t,1,!1,null,null,n,!1,r,i),t[nl]=e.current,zy(t.nodeType===8?t.parentNode:t),new oR(e)};Ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=_j(e),t=t===null?null:t.stateNode,t};Ri.flushSync=function(t){return kh(t)};Ri.hydrate=function(t,e,n){if(!US(e))throw Error(X(200));return zS(null,t,e,!0,n)};Ri.hydrateRoot=function(t,e,n){if(!aR(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=sB;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iB(e,null,t,1,n??null,i,!1,s,o),t[nl]=e.current,zy(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $S(e)};Ri.render=function(t,e,n){if(!US(e))throw Error(X(200));return zS(null,t,e,!1,n)};Ri.unmountComponentAtNode=function(t){if(!US(t))throw Error(X(40));return t._reactRootContainer?(kh(function(){zS(null,null,t,!1,function(){t._reactRootContainer=null,t[nl]=null})}),!0):!1};Ri.unstable_batchedUpdates=eR;Ri.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!US(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return zS(t,e,n,!1,r)};Ri.version="18.3.1-next-f1338f8080-20240426";function oB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oB)}catch(t){console.error(t)}}oB(),oj.exports=Ri;var ig=oj.exports;const aB=CS(ig);var lB,yD=ig;lB=yD.createRoot,yD.hydrateRoot;const b8=1,x8=1e6;let lE=0;function S8(){return lE=(lE+1)%Number.MAX_SAFE_INTEGER,lE.toString()}const cE=new Map,vD=t=>{if(cE.has(t))return;const e=setTimeout(()=>{cE.delete(t),Ey({type:"REMOVE_TOAST",toastId:t})},x8);cE.set(t,e)},k8=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,b8)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?vD(n):t.toasts.forEach(r=>{vD(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},ix=[];let sx={toasts:[]};function Ey(t){sx=k8(sx,t),ix.forEach(e=>{e(sx)})}function E8({...t}){const e=S8(),n=i=>Ey({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Ey({type:"DISMISS_TOAST",toastId:e});return Ey({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function A8(){const[t,e]=E.useState(sx);return E.useEffect(()=>(ix.push(e),()=>{const n=ix.indexOf(e);n>-1&&ix.splice(n,1)}),[t]),{...t,toast:E8,dismiss:n=>Ey({type:"DISMISS_TOAST",toastId:n})}}function We(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function wD(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Eh(...t){return e=>{let n=!1;const r=t.map(i=>{const s=wD(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():wD(t[i],null)}}}}function wn(...t){return E.useCallback(Eh(...t),t)}function C8(t,e){const n=E.createContext(e),r=s=>{const{children:o,...a}=s,l=E.useMemo(()=>a,Object.values(a));return x.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=E.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function jh(t,e=[]){let n=[];function r(s,o){const a=E.createContext(o),l=n.length;n=[...n,o];const c=h=>{var y;const{scope:f,children:p,...m}=h,g=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,v=E.useMemo(()=>m,Object.values(m));return x.jsx(g.Provider,{value:v,children:p})};c.displayName=s+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,m=E.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,d]}const i=()=>{const s=n.map(o=>E.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return E.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,_8(i,...e)]}function _8(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Qy(t){const e=T8(t),n=E.forwardRef((r,i)=>{const{children:s,...o}=r,a=E.Children.toArray(s),l=a.find(R8);if(l){const c=l.props.children,d=a.map(h=>h===l?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:h);return x.jsx(e,{...o,ref:i,children:E.isValidElement(c)?E.cloneElement(c,void 0,d):null})}return x.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function T8(t){const e=E.forwardRef((n,r)=>{const{children:i,...s}=n;if(E.isValidElement(i)){const o=N8(i),a=I8(s,i.props);return i.type!==E.Fragment&&(a.ref=r?Eh(r,o):o),E.cloneElement(i,a)}return E.Children.count(i)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var cB=Symbol("radix.slottable");function P8(t){const e=({children:n})=>x.jsx(x.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=cB,e}function R8(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===cB}function I8(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function N8(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function D8(t){const e=t+"CollectionProvider",[n,r]=jh(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:y}=g,w=Z.useRef(null),b=Z.useRef(new Map).current;return x.jsx(i,{scope:v,itemMap:b,collectionRef:w,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=Qy(a),c=Z.forwardRef((g,v)=>{const{scope:y,children:w}=g,b=s(a,y),k=wn(v,b.collectionRef);return x.jsx(l,{ref:k,children:w})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Qy(d),p=Z.forwardRef((g,v)=>{const{scope:y,children:w,...b}=g,k=Z.useRef(null),_=wn(v,k),C=s(d,y);return Z.useEffect(()=>(C.itemMap.set(k,{ref:k,...b}),()=>void C.itemMap.delete(k))),x.jsx(f,{[h]:"",ref:_,children:w})});p.displayName=d;function m(g){const v=s(t+"CollectionConsumer",g);return Z.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const b=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((C,P)=>b.indexOf(C.ref.current)-b.indexOf(P.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},m,r]}var M8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ue=M8.reduce((t,e)=>{const n=Qy(`Primitive.${e}`),r=E.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function uB(t,e){t&&ig.flushSync(()=>t.dispatchEvent(e))}function Uo(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function O8(t,e=globalThis==null?void 0:globalThis.document){const n=Uo(t);E.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var L8="DismissableLayer",fC="dismissableLayer.update",j8="dismissableLayer.pointerDownOutside",F8="dismissableLayer.focusOutside",bD,dB=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tw=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=E.useContext(dB),[d,h]=E.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=E.useState({}),m=wn(e,P=>h(P)),g=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(v),w=d?g.indexOf(d):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,k=w>=y,_=$8(P=>{const R=P.target,M=[...c.branches].some(I=>I.contains(R));!k||M||(i==null||i(P),o==null||o(P),P.defaultPrevented||a==null||a())},f),C=U8(P=>{const R=P.target;[...c.branches].some(I=>I.contains(R))||(s==null||s(P),o==null||o(P),P.defaultPrevented||a==null||a())},f);return O8(P=>{w===c.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},f),E.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(bD=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),xD(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=bD)}},[d,f,n,c]),E.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),xD())},[d,c]),E.useEffect(()=>{const P=()=>p({});return document.addEventListener(fC,P),()=>document.removeEventListener(fC,P)},[]),x.jsx(Ue.div,{...l,ref:m,style:{pointerEvents:b?k?"auto":"none":void 0,...t.style},onFocusCapture:We(t.onFocusCapture,C.onFocusCapture),onBlurCapture:We(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:We(t.onPointerDownCapture,_.onPointerDownCapture)})});Tw.displayName=L8;var B8="DismissableLayerBranch",hB=E.forwardRef((t,e)=>{const n=E.useContext(dB),r=E.useRef(null),i=wn(e,r);return E.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),x.jsx(Ue.div,{...t,ref:i})});hB.displayName=B8;function $8(t,e=globalThis==null?void 0:globalThis.document){const n=Uo(t),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){fB(j8,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function U8(t,e=globalThis==null?void 0:globalThis.document){const n=Uo(t),r=E.useRef(!1);return E.useEffect(()=>{const i=s=>{s.target&&!r.current&&fB(F8,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xD(){const t=new CustomEvent(fC);document.dispatchEvent(t)}function fB(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?uB(i,s):i.dispatchEvent(s)}var z8=Tw,V8=hB,sl=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},H8="Portal",VS=E.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=E.useState(!1);sl(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?aB.createPortal(x.jsx(Ue.div,{...r,ref:e}),o):null});VS.displayName=H8;function W8(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var fl=t=>{const{present:e,children:n}=t,r=G8(e),i=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),s=wn(r.ref,q8(i));return typeof n=="function"||r.isPresent?E.cloneElement(i,{ref:s}):null};fl.displayName="Presence";function G8(t){const[e,n]=E.useState(),r=E.useRef(null),i=E.useRef(t),s=E.useRef("none"),o=t?"mounted":"unmounted",[a,l]=W8(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const c=hb(r.current);s.current=a==="mounted"?c:"none"},[a]),sl(()=>{const c=r.current,d=i.current;if(d!==t){const f=s.current,p=hb(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),sl(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=p=>{const g=hb(r.current).includes(p.animationName);if(p.target===e&&g&&(l("ANIMATION_END"),!i.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(s.current=hb(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:E.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function hb(t){return(t==null?void 0:t.animationName)||"none"}function q8(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var K8=yP[" useInsertionEffect ".trim().toString()]||sl;function HS({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=X8({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const d=E.useRef(t!==void 0);E.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=E.useCallback(d=>{var h;if(a){const f=Y8(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else s(d)},[a,t,s,o]);return[l,c]}function X8({defaultProp:t,onChange:e}){const[n,r]=E.useState(t),i=E.useRef(n),s=E.useRef(e);return K8(()=>{s.current=e},[e]),E.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function Y8(t){return typeof t=="function"}var Q8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),J8="VisuallyHidden",WS=E.forwardRef((t,e)=>x.jsx(Ue.span,{...t,ref:e,style:{...Q8,...t.style}}));WS.displayName=J8;var Z8=WS,lR="ToastProvider",[cR,eG,tG]=D8("Toast"),[pB,hpe]=jh("Toast",[tG]),[nG,GS]=pB(lR),mB=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=E.useState(null),[c,d]=E.useState(0),h=E.useRef(!1),f=E.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${lR}\`. Expected non-empty \`string\`.`),x.jsx(cR.Provider,{scope:e,children:x.jsx(nG,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:E.useCallback(()=>d(p=>p+1),[]),onToastRemove:E.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};mB.displayName=lR;var gB="ToastViewport",rG=["F8"],pC="toast.viewportPause",mC="toast.viewportResume",yB=E.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=rG,label:i="Notifications ({hotkey})",...s}=t,o=GS(gB,n),a=eG(n),l=E.useRef(null),c=E.useRef(null),d=E.useRef(null),h=E.useRef(null),f=wn(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;E.useEffect(()=>{const v=y=>{var b;r.length!==0&&r.every(k=>y[k]||y.code===k)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),E.useEffect(()=>{const v=l.current,y=h.current;if(m&&v&&y){const w=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(pC);y.dispatchEvent(C),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(mC);y.dispatchEvent(C),o.isClosePausedRef.current=!1}},k=C=>{!v.contains(C.relatedTarget)&&b()},_=()=>{v.contains(document.activeElement)||b()};return v.addEventListener("focusin",w),v.addEventListener("focusout",k),v.addEventListener("pointermove",w),v.addEventListener("pointerleave",_),window.addEventListener("blur",w),window.addEventListener("focus",b),()=>{v.removeEventListener("focusin",w),v.removeEventListener("focusout",k),v.removeEventListener("pointermove",w),v.removeEventListener("pointerleave",_),window.removeEventListener("blur",w),window.removeEventListener("focus",b)}}},[m,o.isClosePausedRef]);const g=E.useCallback(({tabbingDirection:v})=>{const w=a().map(b=>{const k=b.ref.current,_=[k,...gG(k)];return v==="forwards"?_:_.reverse()});return(v==="forwards"?w.reverse():w).flat()},[a]);return E.useEffect(()=>{const v=h.current;if(v){const y=w=>{var _,C,P;const b=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!b){const R=document.activeElement,M=w.shiftKey;if(w.target===v&&M){(_=c.current)==null||_.focus();return}const U=g({tabbingDirection:M?"backwards":"forwards"}),G=U.findIndex(B=>B===R);uE(U.slice(G+1))?w.preventDefault():M?(C=c.current)==null||C.focus():(P=d.current)==null||P.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[a,g]),x.jsxs(V8,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&x.jsx(gC,{ref:c,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});uE(v)}}),x.jsx(cR.Slot,{scope:n,children:x.jsx(Ue.ol,{tabIndex:-1,...s,ref:f})}),m&&x.jsx(gC,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});uE(v)}})]})});yB.displayName=gB;var vB="ToastFocusProxy",gC=E.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=GS(vB,n);return x.jsx(WS,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});gC.displayName=vB;var Pw="Toast",iG="toast.swipeStart",sG="toast.swipeMove",oG="toast.swipeCancel",aG="toast.swipeEnd",wB=E.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,l]=HS({prop:r,defaultProp:i??!0,onChange:s,caller:Pw});return x.jsx(fl,{present:n||a,children:x.jsx(uG,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Uo(t.onPause),onResume:Uo(t.onResume),onSwipeStart:We(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:We(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:We(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:We(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});wB.displayName=Pw;var[lG,cG]=pB(Pw,{onClose(){}}),uG=E.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...m}=t,g=GS(Pw,n),[v,y]=E.useState(null),w=wn(e,B=>y(B)),b=E.useRef(null),k=E.useRef(null),_=i||g.duration,C=E.useRef(0),P=E.useRef(_),R=E.useRef(0),{onToastAdd:M,onToastRemove:I}=g,j=Uo(()=>{var V;(v==null?void 0:v.contains(document.activeElement))&&((V=g.viewport)==null||V.focus()),o()}),U=E.useCallback(B=>{!B||B===1/0||(window.clearTimeout(R.current),C.current=new Date().getTime(),R.current=window.setTimeout(j,B))},[j]);E.useEffect(()=>{const B=g.viewport;if(B){const V=()=>{U(P.current),c==null||c()},F=()=>{const L=new Date().getTime()-C.current;P.current=P.current-L,window.clearTimeout(R.current),l==null||l()};return B.addEventListener(pC,F),B.addEventListener(mC,V),()=>{B.removeEventListener(pC,F),B.removeEventListener(mC,V)}}},[g.viewport,_,l,c,U]),E.useEffect(()=>{s&&!g.isClosePausedRef.current&&U(_)},[s,_,g.isClosePausedRef,U]),E.useEffect(()=>(M(),()=>I()),[M,I]);const G=E.useMemo(()=>v?CB(v):null,[v]);return g.viewport?x.jsxs(x.Fragment,{children:[G&&x.jsx(dG,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),x.jsx(lG,{scope:n,onClose:j,children:ig.createPortal(x.jsx(cR.ItemSlot,{scope:n,children:x.jsx(z8,{asChild:!0,onEscapeKeyDown:We(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||j(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:x.jsx(Ue.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:We(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:We(t.onPointerDown,B=>{B.button===0&&(b.current={x:B.clientX,y:B.clientY})}),onPointerMove:We(t.onPointerMove,B=>{if(!b.current)return;const V=B.clientX-b.current.x,F=B.clientY-b.current.y,L=!!k.current,O=["left","right"].includes(g.swipeDirection),z=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,N=O?z(0,V):0,Y=O?0:z(0,F),$=B.pointerType==="touch"?10:2,D={x:N,y:Y},K={originalEvent:B,delta:D};L?(k.current=D,fb(sG,h,K,{discrete:!1})):SD(D,g.swipeDirection,$)?(k.current=D,fb(iG,d,K,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(V)>$||Math.abs(F)>$)&&(b.current=null)}),onPointerUp:We(t.onPointerUp,B=>{const V=k.current,F=B.target;if(F.hasPointerCapture(B.pointerId)&&F.releasePointerCapture(B.pointerId),k.current=null,b.current=null,V){const L=B.currentTarget,O={originalEvent:B,delta:V};SD(V,g.swipeDirection,g.swipeThreshold)?fb(aG,p,O,{discrete:!0}):fb(oG,f,O,{discrete:!0}),L.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),dG=t=>{const{__scopeToast:e,children:n,...r}=t,i=GS(Pw,e),[s,o]=E.useState(!1),[a,l]=E.useState(!1);return pG(()=>o(!0)),E.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:x.jsx(VS,{asChild:!0,children:x.jsx(WS,{...r,children:s&&x.jsxs(x.Fragment,{children:[i.label," ",n]})})})},hG="ToastTitle",bB=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(Ue.div,{...r,ref:e})});bB.displayName=hG;var fG="ToastDescription",xB=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return x.jsx(Ue.div,{...r,ref:e})});xB.displayName=fG;var SB="ToastAction",kB=E.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?x.jsx(AB,{altText:n,asChild:!0,children:x.jsx(uR,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${SB}\`. Expected non-empty \`string\`.`),null)});kB.displayName=SB;var EB="ToastClose",uR=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=cG(EB,n);return x.jsx(AB,{asChild:!0,children:x.jsx(Ue.button,{type:"button",...r,ref:e,onClick:We(t.onClick,i.onClose)})})});uR.displayName=EB;var AB=E.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return x.jsx(Ue.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function CB(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),mG(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...CB(r))}}),e}function fb(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?uB(i,s):i.dispatchEvent(s)}var SD=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function pG(t=()=>{}){const e=Uo(t);sl(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function mG(t){return t.nodeType===t.ELEMENT_NODE}function gG(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function uE(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var yG=mB,_B=yB,TB=wB,PB=bB,RB=xB,IB=kB,NB=uR;function DB(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=DB(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function MB(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=DB(t))&&(r&&(r+=" "),r+=e);return r}const kD=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ED=MB,vG=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return ED(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const d=n==null?void 0:n[c],h=s==null?void 0:s[c];if(d===null)return null;const f=kD(d)||kD(h);return i[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(m=>{let[g,v]=m;return Array.isArray(v)?v.includes({...s,...a}[g]):{...s,...a}[g]===v})?[...c,h,f]:c},[]);return ED(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wG=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OB=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xG=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>E.createElement("svg",{ref:l,...bG,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:OB("lucide",i),...a},[...o.map(([c,d])=>E.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(t,e)=>{const n=E.forwardRef(({className:r,...i},s)=>E.createElement(xG,{ref:s,iconNode:e,className:OB(`lucide-${wG(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=Ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SG=Ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=Ie("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=Ie("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kG=Ie("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=Ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=Ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EG=Ie("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AG=Ie("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=Ie("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _G=Ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TG=Ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=Ie("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=Ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PG=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RG=Ie("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IG=Ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NG=Ie("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DG=Ie("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MG=Ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OG=Ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LG=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jG=Ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FG=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=Ie("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BG=Ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=Ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $G=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),hR="-",UG=t=>{const e=VG(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(hR);return a[0]===""&&a.length!==1&&a.shift(),$B(a,e)||zG(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},$B=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?$B(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(hR);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},_D=/^\[(.+)\]$/,zG=t=>{if(_D.test(t)){const e=_D.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},VG=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return WG(Object.entries(t.classGroups),n).forEach(([s,o])=>{vC(o,r,s,e)}),r},vC=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:TD(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(HG(i)){vC(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{vC(o,TD(e,s),n,r)})})},TD=(t,e)=>{let n=t;return e.split(hR).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},HG=t=>t.isThemeGetter,WG=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,GG=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},UB="!",qG=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let v=0;v<a.length;v++){let y=a[v];if(c===0){if(y===i&&(r||a.slice(v,v+s)===e)){l.push(a.slice(d,v)),d=v+s;continue}if(y==="/"){h=v;continue}}y==="["?c++:y==="]"&&c--}const f=l.length===0?a:a.substring(d),p=f.startsWith(UB),m=p?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},KG=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},XG=t=>({cache:GG(t.cacheSize),parseClassName:qG(t),...UG(t)}),YG=/\s+/,QG=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(YG);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let m=!!p,g=r(m?f.substring(0,p):f);if(!g){if(!m){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}m=!1}const v=KG(d).join(":"),y=h?v+UB:v,w=y+g;if(s.includes(w))continue;s.push(w);const b=i(g,m);for(let k=0;k<b.length;++k){const _=b[k];s.push(y+_)}a=c+(a.length>0?" "+a:a)}return a};function JG(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=zB(e))&&(r&&(r+=" "),r+=n);return r}const zB=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=zB(t[r]))&&(n&&(n+=" "),n+=e);return n};function ZG(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=XG(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=QG(l,n);return i(l,d),d}return function(){return s(JG.apply(null,arguments))}}const yt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},VB=/^\[(?:([a-z-]+):)?(.+)\]$/i,eq=/^\d+\/\d+$/,tq=new Set(["px","full","screen"]),nq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oq=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Jo=t=>Xf(t)||tq.has(t)||eq.test(t),kl=t=>sg(t,"length",pq),Xf=t=>!!t&&!Number.isNaN(Number(t)),hE=t=>sg(t,"number",Xf),_g=t=>!!t&&Number.isInteger(Number(t)),aq=t=>t.endsWith("%")&&Xf(t.slice(0,-1)),xe=t=>VB.test(t),El=t=>nq.test(t),lq=new Set(["length","size","percentage"]),cq=t=>sg(t,lq,HB),uq=t=>sg(t,"position",HB),dq=new Set(["image","url"]),hq=t=>sg(t,dq,gq),fq=t=>sg(t,"",mq),Tg=()=>!0,sg=(t,e,n)=>{const r=VB.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},pq=t=>rq.test(t)&&!iq.test(t),HB=()=>!1,mq=t=>sq.test(t),gq=t=>oq.test(t),yq=()=>{const t=yt("colors"),e=yt("spacing"),n=yt("blur"),r=yt("brightness"),i=yt("borderColor"),s=yt("borderRadius"),o=yt("borderSpacing"),a=yt("borderWidth"),l=yt("contrast"),c=yt("grayscale"),d=yt("hueRotate"),h=yt("invert"),f=yt("gap"),p=yt("gradientColorStops"),m=yt("gradientColorStopPositions"),g=yt("inset"),v=yt("margin"),y=yt("opacity"),w=yt("padding"),b=yt("saturate"),k=yt("scale"),_=yt("sepia"),C=yt("skew"),P=yt("space"),R=yt("translate"),M=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",xe,e],U=()=>[xe,e],G=()=>["",Jo,kl],B=()=>["auto",Xf,xe],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",xe],N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>[Xf,xe];return{cacheSize:500,separator:":",theme:{colors:[Tg],spacing:[Jo,kl],blur:["none","",El,xe],brightness:Y(),borderColor:[t],borderRadius:["none","","full",El,xe],borderSpacing:U(),borderWidth:G(),contrast:Y(),grayscale:z(),hueRotate:Y(),invert:z(),gap:U(),gradientColorStops:[t],gradientColorStopPositions:[aq,kl],inset:j(),margin:j(),opacity:Y(),padding:U(),saturate:Y(),scale:Y(),sepia:z(),skew:Y(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",xe]}],container:["container"],columns:[{columns:[El]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),xe]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_g,xe]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xe]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",_g,xe]}],"grid-cols":[{"grid-cols":[Tg]}],"col-start-end":[{col:["auto",{span:["full",_g,xe]},xe]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Tg]}],"row-start-end":[{row:["auto",{span:[_g,xe]},xe]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xe,e]}],"min-w":[{"min-w":[xe,e,"min","max","fit"]}],"max-w":[{"max-w":[xe,e,"none","full","min","max","fit","prose",{screen:[El]},El]}],h:[{h:[xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",El,kl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",hE]}],"font-family":[{font:[Tg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xe]}],"line-clamp":[{"line-clamp":["none",Xf,hE]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Jo,xe]}],"list-image":[{"list-image":["none",xe]}],"list-style-type":[{list:["none","disc","decimal",xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Jo,kl]}],"underline-offset":[{"underline-offset":["auto",Jo,xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),uq]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cq]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},hq]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:F()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[Jo,xe]}],"outline-w":[{outline:[Jo,kl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Jo,kl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",El,fq]}],"shadow-color":[{shadow:[Tg]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",El,xe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xe]}],duration:[{duration:Y()}],ease:[{ease:["linear","in","out","in-out",xe]}],delay:[{delay:Y()}],animate:[{animate:["none","spin","ping","pulse","bounce",xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[_g,xe]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Jo,kl,hE]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},vq=ZG(yq);function Qt(...t){return vq(MB(t))}const wq=yG,WB=E.forwardRef(({className:t,...e},n)=>x.jsx(_B,{ref:n,className:Qt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));WB.displayName=_B.displayName;const bq=vG("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),GB=E.forwardRef(({className:t,variant:e,...n},r)=>x.jsx(TB,{ref:r,className:Qt(bq({variant:e}),t),...n}));GB.displayName=TB.displayName;const xq=E.forwardRef(({className:t,...e},n)=>x.jsx(IB,{ref:n,className:Qt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));xq.displayName=IB.displayName;const qB=E.forwardRef(({className:t,...e},n)=>x.jsx(NB,{ref:n,className:Qt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:x.jsx(Ah,{className:"h-4 w-4"})}));qB.displayName=NB.displayName;const KB=E.forwardRef(({className:t,...e},n)=>x.jsx(PB,{ref:n,className:Qt("text-sm font-semibold",t),...e}));KB.displayName=PB.displayName;const XB=E.forwardRef(({className:t,...e},n)=>x.jsx(RB,{ref:n,className:Qt("text-sm opacity-90",t),...e}));XB.displayName=RB.displayName;function Sq(){const{toasts:t}=A8();return x.jsxs(wq,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return x.jsxs(GB,{...s,children:[x.jsxs("div",{className:"grid gap-1",children:[n&&x.jsx(KB,{children:n}),r&&x.jsx(XB,{children:r})]}),i,x.jsx(qB,{})]},e)}),x.jsx(WB,{})]})}var PD=["light","dark"],kq="(prefers-color-scheme: dark)",Eq=E.createContext(void 0),Aq={setTheme:t=>{},themes:[]},Cq=()=>{var t;return(t=E.useContext(Eq))!=null?t:Aq};E.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let c=s==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=i?PD.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(m,g=!1,v=!0)=>{let y=o?o[m]:m,w=g?m+"|| ''":`'${y}'`,b="";return i&&v&&!g&&PD.includes(m)&&(b+=`d.style.colorScheme = '${m}';`),n==="class"?g||y?b+=`c.add(${w})`:b+="null":y&&(b+=`d[s](n,${w})`),b},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${kq}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(s,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${h}}catch(t){}}();`;return E.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});var _q=t=>{switch(t){case"success":return Rq;case"info":return Nq;case"warning":return Iq;case"error":return Dq;default:return null}},Tq=Array(12).fill(0),Pq=({visible:t,className:e})=>Z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Z.createElement("div",{className:"sonner-spinner"},Tq.map((n,r)=>Z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Rq=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Iq=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Nq=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Dq=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Mq=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Oq=()=>{let[t,e]=Z.useState(document.hidden);return Z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},wC=1,Lq=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:wC++,s=this.toasts.find(a=>a.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...t,id:i,title:n}),{...a,...t,id:i,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:i}),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),i=n!==void 0,s,o=r.then(async l=>{if(s=["resolve",l],Z.isValidElement(l))i=!1,this.create({id:n,type:"default",message:l});else if(Fq(l)&&!l.ok){i=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:c,description:d})}else if(e.success!==void 0){i=!1;let c=typeof e.success=="function"?await e.success(l):e.success,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:c,description:d})}}).catch(async l=>{if(s=["reject",l],e.error!==void 0){i=!1;let c=typeof e.error=="function"?await e.error(l):e.error,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:c,description:d})}}).finally(()=>{var l;i&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>s[0]==="reject"?c(s[1]):l(s[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||wC++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},jr=new Lq,jq=(t,e)=>{let n=(e==null?void 0:e.id)||wC++;return jr.addToast({title:t,...e,id:n}),n},Fq=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Bq=jq,$q=()=>jr.toasts,Uq=()=>jr.getActiveToasts(),Xa=Object.assign(Bq,{success:jr.success,info:jr.info,warning:jr.warning,error:jr.error,custom:jr.custom,message:jr.message,promise:jr.promise,dismiss:jr.dismiss,loading:jr.loading},{getHistory:$q,getToasts:Uq});function zq(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}zq(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function pb(t){return t.label!==void 0}var Vq=3,Hq="32px",Wq="16px",RD=4e3,Gq=356,qq=14,Kq=20,Xq=200;function ys(...t){return t.filter(Boolean).join(" ")}function Yq(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var Qq=t=>{var e,n,r,i,s,o,a,l,c,d,h;let{invert:f,toast:p,unstyled:m,interacting:g,setHeights:v,visibleToasts:y,heights:w,index:b,toasts:k,expanded:_,removeToast:C,defaultRichColors:P,closeButton:R,style:M,cancelButtonStyle:I,actionButtonStyle:j,className:U="",descriptionClassName:G="",duration:B,position:V,gap:F,loadingIcon:L,expandByDefault:O,classNames:z,icons:N,closeButtonAriaLabel:Y="Close toast",pauseWhenPageIsHidden:$}=t,[D,K]=Z.useState(null),[q,te]=Z.useState(null),[ee,je]=Z.useState(!1),[Ne,gt]=Z.useState(!1),[Wt,Ni]=Z.useState(!1),[Gr,gl]=Z.useState(!1),[Vh,Su]=Z.useState(!1),[Hh,ku]=Z.useState(0),[Yo,yg]=Z.useState(0),Eu=Z.useRef(p.duration||B||RD),Kw=Z.useRef(null),Qo=Z.useRef(null),Nk=b===0,Dk=b+1<=y,W=p.type,J=p.dismissible!==!1,pe=p.className||"",_e=p.descriptionClassName||"",ze=Z.useMemo(()=>w.findIndex(ye=>ye.toastId===p.id)||0,[w,p.id]),qr=Z.useMemo(()=>{var ye;return(ye=p.closeButton)!=null?ye:R},[p.closeButton,R]),Qs=Z.useMemo(()=>p.duration||B||RD,[p.duration,B]),Kr=Z.useRef(0),Di=Z.useRef(0),yl=Z.useRef(0),Jt=Z.useRef(null),[vl,hs]=V.split("-"),oN=Z.useMemo(()=>w.reduce((ye,Ze,xt)=>xt>=ze?ye:ye+Ze.height,0),[w,ze]),aN=Oq(),HH=p.invert||f,Mk=W==="loading";Di.current=Z.useMemo(()=>ze*F+oN,[ze,oN]),Z.useEffect(()=>{Eu.current=Qs},[Qs]),Z.useEffect(()=>{je(!0)},[]),Z.useEffect(()=>{let ye=Qo.current;if(ye){let Ze=ye.getBoundingClientRect().height;return yg(Ze),v(xt=>[{toastId:p.id,height:Ze,position:p.position},...xt]),()=>v(xt=>xt.filter(fs=>fs.toastId!==p.id))}},[v,p.id]),Z.useLayoutEffect(()=>{if(!ee)return;let ye=Qo.current,Ze=ye.style.height;ye.style.height="auto";let xt=ye.getBoundingClientRect().height;ye.style.height=Ze,yg(xt),v(fs=>fs.find(ps=>ps.toastId===p.id)?fs.map(ps=>ps.toastId===p.id?{...ps,height:xt}:ps):[{toastId:p.id,height:xt,position:p.position},...fs])},[ee,p.title,p.description,v,p.id]);let wl=Z.useCallback(()=>{gt(!0),ku(Di.current),v(ye=>ye.filter(Ze=>Ze.toastId!==p.id)),setTimeout(()=>{C(p)},Xq)},[p,C,v,Di]);Z.useEffect(()=>{if(p.promise&&W==="loading"||p.duration===1/0||p.type==="loading")return;let ye;return _||g||$&&aN?(()=>{if(yl.current<Kr.current){let Ze=new Date().getTime()-Kr.current;Eu.current=Eu.current-Ze}yl.current=new Date().getTime()})():Eu.current!==1/0&&(Kr.current=new Date().getTime(),ye=setTimeout(()=>{var Ze;(Ze=p.onAutoClose)==null||Ze.call(p,p),wl()},Eu.current)),()=>clearTimeout(ye)},[_,g,p,W,$,aN,wl]),Z.useEffect(()=>{p.delete&&wl()},[wl,p.delete]);function WH(){var ye,Ze,xt;return N!=null&&N.loading?Z.createElement("div",{className:ys(z==null?void 0:z.loader,(ye=p==null?void 0:p.classNames)==null?void 0:ye.loader,"sonner-loader"),"data-visible":W==="loading"},N.loading):L?Z.createElement("div",{className:ys(z==null?void 0:z.loader,(Ze=p==null?void 0:p.classNames)==null?void 0:Ze.loader,"sonner-loader"),"data-visible":W==="loading"},L):Z.createElement(Pq,{className:ys(z==null?void 0:z.loader,(xt=p==null?void 0:p.classNames)==null?void 0:xt.loader),visible:W==="loading"})}return Z.createElement("li",{tabIndex:0,ref:Qo,className:ys(U,pe,z==null?void 0:z.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,z==null?void 0:z.default,z==null?void 0:z[W],(n=p==null?void 0:p.classNames)==null?void 0:n[W]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:P,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":ee,"data-promise":!!p.promise,"data-swiped":Vh,"data-removed":Ne,"data-visible":Dk,"data-y-position":vl,"data-x-position":hs,"data-index":b,"data-front":Nk,"data-swiping":Wt,"data-dismissible":J,"data-type":W,"data-invert":HH,"data-swipe-out":Gr,"data-swipe-direction":q,"data-expanded":!!(_||O&&ee),style:{"--index":b,"--toasts-before":b,"--z-index":k.length-b,"--offset":`${Ne?Hh:Di.current}px`,"--initial-height":O?"auto":`${Yo}px`,...M,...p.style},onDragEnd:()=>{Ni(!1),K(null),Jt.current=null},onPointerDown:ye=>{Mk||!J||(Kw.current=new Date,ku(Di.current),ye.target.setPointerCapture(ye.pointerId),ye.target.tagName!=="BUTTON"&&(Ni(!0),Jt.current={x:ye.clientX,y:ye.clientY}))},onPointerUp:()=>{var ye,Ze,xt,fs;if(Gr||!J)return;Jt.current=null;let ps=Number(((ye=Qo.current)==null?void 0:ye.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),bl=Number(((Ze=Qo.current)==null?void 0:Ze.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Au=new Date().getTime()-((xt=Kw.current)==null?void 0:xt.getTime()),ms=D==="x"?ps:bl,xl=Math.abs(ms)/Au;if(Math.abs(ms)>=Kq||xl>.11){ku(Di.current),(fs=p.onDismiss)==null||fs.call(p,p),te(D==="x"?ps>0?"right":"left":bl>0?"down":"up"),wl(),gl(!0),Su(!1);return}Ni(!1),K(null)},onPointerMove:ye=>{var Ze,xt,fs,ps;if(!Jt.current||!J||((Ze=window.getSelection())==null?void 0:Ze.toString().length)>0)return;let bl=ye.clientY-Jt.current.y,Au=ye.clientX-Jt.current.x,ms=(xt=t.swipeDirections)!=null?xt:Yq(V);!D&&(Math.abs(Au)>1||Math.abs(bl)>1)&&K(Math.abs(Au)>Math.abs(bl)?"x":"y");let xl={x:0,y:0};D==="y"?(ms.includes("top")||ms.includes("bottom"))&&(ms.includes("top")&&bl<0||ms.includes("bottom")&&bl>0)&&(xl.y=bl):D==="x"&&(ms.includes("left")||ms.includes("right"))&&(ms.includes("left")&&Au<0||ms.includes("right")&&Au>0)&&(xl.x=Au),(Math.abs(xl.x)>0||Math.abs(xl.y)>0)&&Su(!0),(fs=Qo.current)==null||fs.style.setProperty("--swipe-amount-x",`${xl.x}px`),(ps=Qo.current)==null||ps.style.setProperty("--swipe-amount-y",`${xl.y}px`)}},qr&&!p.jsx?Z.createElement("button",{"aria-label":Y,"data-disabled":Mk,"data-close-button":!0,onClick:Mk||!J?()=>{}:()=>{var ye;wl(),(ye=p.onDismiss)==null||ye.call(p,p)},className:ys(z==null?void 0:z.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},(s=N==null?void 0:N.close)!=null?s:Mq):null,p.jsx||E.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:Z.createElement(Z.Fragment,null,W||p.icon||p.promise?Z.createElement("div",{"data-icon":"",className:ys(z==null?void 0:z.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||WH():null,p.type!=="loading"?p.icon||(N==null?void 0:N[W])||_q(W):null):null,Z.createElement("div",{"data-content":"",className:ys(z==null?void 0:z.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},Z.createElement("div",{"data-title":"",className:ys(z==null?void 0:z.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?Z.createElement("div",{"data-description":"",className:ys(G,_e,z==null?void 0:z.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),E.isValidElement(p.cancel)?p.cancel:p.cancel&&pb(p.cancel)?Z.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||I,onClick:ye=>{var Ze,xt;pb(p.cancel)&&J&&((xt=(Ze=p.cancel).onClick)==null||xt.call(Ze,ye),wl())},className:ys(z==null?void 0:z.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,E.isValidElement(p.action)?p.action:p.action&&pb(p.action)?Z.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||j,onClick:ye=>{var Ze,xt;pb(p.action)&&((xt=(Ze=p.action).onClick)==null||xt.call(Ze,ye),!ye.defaultPrevented&&wl())},className:ys(z==null?void 0:z.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function ID(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Jq(t,e){let n={};return[t,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?Wq:Hq;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var Zq=E.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:m=Vq,toastOptions:g,dir:v=ID(),gap:y=qq,loadingIcon:w,icons:b,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:_}=t,[C,P]=Z.useState([]),R=Z.useMemo(()=>Array.from(new Set([r].concat(C.filter($=>$.position).map($=>$.position)))),[C,r]),[M,I]=Z.useState([]),[j,U]=Z.useState(!1),[G,B]=Z.useState(!1),[V,F]=Z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=Z.useRef(null),O=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),z=Z.useRef(null),N=Z.useRef(!1),Y=Z.useCallback($=>{P(D=>{var K;return(K=D.find(q=>q.id===$.id))!=null&&K.delete||jr.dismiss($.id),D.filter(({id:q})=>q!==$.id)})},[]);return Z.useEffect(()=>jr.subscribe($=>{if($.dismiss){P(D=>D.map(K=>K.id===$.id?{...K,delete:!0}:K));return}setTimeout(()=>{aB.flushSync(()=>{P(D=>{let K=D.findIndex(q=>q.id===$.id);return K!==-1?[...D.slice(0,K),{...D[K],...$},...D.slice(K+1)]:[$,...D]})})})}),[]),Z.useEffect(()=>{if(d!=="system"){F(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;let $=window.matchMedia("(prefers-color-scheme: dark)");try{$.addEventListener("change",({matches:D})=>{F(D?"dark":"light")})}catch{$.addListener(({matches:K})=>{try{F(K?"dark":"light")}catch(q){console.error(q)}})}},[d]),Z.useEffect(()=>{C.length<=1&&U(!1)},[C]),Z.useEffect(()=>{let $=D=>{var K,q;i.every(te=>D[te]||D.code===te)&&(U(!0),(K=L.current)==null||K.focus()),D.code==="Escape"&&(document.activeElement===L.current||(q=L.current)!=null&&q.contains(document.activeElement))&&U(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[i]),Z.useEffect(()=>{if(L.current)return()=>{z.current&&(z.current.focus({preventScroll:!0}),z.current=null,N.current=!1)}},[L.current]),Z.createElement("section",{ref:e,"aria-label":`${k} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map(($,D)=>{var K;let[q,te]=$.split("-");return C.length?Z.createElement("ol",{key:$,dir:v==="auto"?ID():v,tabIndex:-1,ref:L,className:a,"data-sonner-toaster":!0,"data-theme":V,"data-y-position":q,"data-lifted":j&&C.length>1&&!s,"data-x-position":te,style:{"--front-toast-height":`${((K=M[0])==null?void 0:K.height)||0}px`,"--width":`${Gq}px`,"--gap":`${y}px`,...p,...Jq(l,c)},onBlur:ee=>{N.current&&!ee.currentTarget.contains(ee.relatedTarget)&&(N.current=!1,z.current&&(z.current.focus({preventScroll:!0}),z.current=null))},onFocus:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||N.current||(N.current=!0,z.current=ee.relatedTarget)},onMouseEnter:()=>U(!0),onMouseMove:()=>U(!0),onMouseLeave:()=>{G||U(!1)},onDragEnd:()=>U(!1),onPointerDown:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},C.filter(ee=>!ee.position&&D===0||ee.position===$).map((ee,je)=>{var Ne,gt;return Z.createElement(Qq,{key:ee.id,icons:b,index:je,toast:ee,defaultRichColors:h,duration:(Ne=g==null?void 0:g.duration)!=null?Ne:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:m,closeButton:(gt=g==null?void 0:g.closeButton)!=null?gt:o,interacting:G,position:$,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:Y,toasts:C.filter(Wt=>Wt.position==ee.position),heights:M.filter(Wt=>Wt.position==ee.position),setHeights:I,expandByDefault:s,gap:y,loadingIcon:w,expanded:j,pauseWhenPageIsHidden:_,swipeDirections:t.swipeDirections})})):null}))});const e9=({...t})=>{const{theme:e="system"}=Cq();return x.jsx(Zq,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var t9=yP[" useId ".trim().toString()]||(()=>{}),n9=0;function Fo(t){const[e,n]=E.useState(t9());return sl(()=>{n(r=>r??String(n9++))},[t]),e?`radix-${e}`:""}const r9=["top","right","bottom","left"],su=Math.min,bi=Math.max,E1=Math.round,mb=Math.floor,Bo=t=>({x:t,y:t}),i9={left:"right",right:"left",bottom:"top",top:"bottom"},s9={start:"end",end:"start"};function bC(t,e,n){return bi(t,su(e,n))}function ol(t,e){return typeof t=="function"?t(e):t}function al(t){return t.split("-")[0]}function og(t){return t.split("-")[1]}function fR(t){return t==="x"?"y":"x"}function pR(t){return t==="y"?"height":"width"}const o9=new Set(["top","bottom"]);function Mo(t){return o9.has(al(t))?"y":"x"}function mR(t){return fR(Mo(t))}function a9(t,e,n){n===void 0&&(n=!1);const r=og(t),i=mR(t),s=pR(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=A1(o)),[o,A1(o)]}function l9(t){const e=A1(t);return[xC(t),e,xC(e)]}function xC(t){return t.replace(/start|end/g,e=>s9[e])}const ND=["left","right"],DD=["right","left"],c9=["top","bottom"],u9=["bottom","top"];function d9(t,e,n){switch(t){case"top":case"bottom":return n?e?DD:ND:e?ND:DD;case"left":case"right":return e?c9:u9;default:return[]}}function h9(t,e,n,r){const i=og(t);let s=d9(al(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(xC)))),s}function A1(t){return t.replace(/left|right|bottom|top/g,e=>i9[e])}function f9(t){return{top:0,right:0,bottom:0,left:0,...t}}function YB(t){return typeof t!="number"?f9(t):{top:t,right:t,bottom:t,left:t}}function C1(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function MD(t,e,n){let{reference:r,floating:i}=t;const s=Mo(e),o=mR(e),a=pR(o),l=al(e),c=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(og(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const p9=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=MD(c,r,l),f=r,p={},m=0;for(let g=0;g<a.length;g++){const{name:v,fn:y}=a[g],{x:w,y:b,data:k,reset:_}=await y({x:d,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});d=w??d,h=b??h,p={...p,[v]:{...p[v],...k}},_&&m<=50&&(m++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):_.rects),{x:d,y:h}=MD(c,f,l)),g=-1)}return{x:d,y:h,placement:f,strategy:i,middlewareData:p}};async function Zy(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=ol(e,t),m=YB(p),v=a[f?h==="floating"?"reference":"floating":h],y=C1(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),w=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},_=C1(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:b,strategy:l}):w);return{top:(y.top-_.top+m.top)/k.y,bottom:(_.bottom-y.bottom+m.bottom)/k.y,left:(y.left-_.left+m.left)/k.x,right:(_.right-y.right+m.right)/k.x}}const m9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=ol(t,e)||{};if(c==null)return{};const h=YB(d),f={x:n,y:r},p=mR(i),m=pR(p),g=await o.getDimensions(c),v=p==="y",y=v?"top":"left",w=v?"bottom":"right",b=v?"clientHeight":"clientWidth",k=s.reference[m]+s.reference[p]-f[p]-s.floating[m],_=f[p]-s.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let P=C?C[b]:0;(!P||!await(o.isElement==null?void 0:o.isElement(C)))&&(P=a.floating[b]||s.floating[m]);const R=k/2-_/2,M=P/2-g[m]/2-1,I=su(h[y],M),j=su(h[w],M),U=I,G=P-g[m]-j,B=P/2-g[m]/2+R,V=bC(U,B,G),F=!l.arrow&&og(i)!=null&&B!==V&&s.reference[m]/2-(B<U?I:j)-g[m]/2<0,L=F?B<U?B-U:B-G:0;return{[p]:f[p]+L,data:{[p]:V,centerOffset:B-V-L,...F&&{alignmentOffset:L}},reset:F}}}),g9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...v}=ol(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=al(i),w=Mo(a),b=al(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(b||!g?[A1(a)]:l9(a)),C=m!=="none";!f&&C&&_.push(...h9(a,g,m,k));const P=[a,..._],R=await Zy(e,v),M=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&M.push(R[y]),h){const B=a9(i,o,k);M.push(R[B[0]],R[B[1]])}if(I=[...I,{placement:i,overflows:M}],!M.every(B=>B<=0)){var j,U;const B=(((j=s.flip)==null?void 0:j.index)||0)+1,V=P[B];if(V&&(!(h==="alignment"?w!==Mo(V):!1)||I.every(O=>O.overflows[0]>0&&Mo(O.placement)===w)))return{data:{index:B,overflows:I},reset:{placement:V}};let F=(U=I.filter(L=>L.overflows[0]<=0).sort((L,O)=>L.overflows[1]-O.overflows[1])[0])==null?void 0:U.placement;if(!F)switch(p){case"bestFit":{var G;const L=(G=I.filter(O=>{if(C){const z=Mo(O.placement);return z===w||z==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(z=>z>0).reduce((z,N)=>z+N,0)]).sort((O,z)=>O[1]-z[1])[0])==null?void 0:G[0];L&&(F=L);break}case"initialPlacement":F=a;break}if(i!==F)return{reset:{placement:F}}}return{}}}};function OD(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function LD(t){return r9.some(e=>t[e]>=0)}const y9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=ol(t,e);switch(r){case"referenceHidden":{const s=await Zy(e,{...i,elementContext:"reference"}),o=OD(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:LD(o)}}}case"escaped":{const s=await Zy(e,{...i,altBoundary:!0}),o=OD(s,n.floating);return{data:{escapedOffsets:o,escaped:LD(o)}}}default:return{}}}}},QB=new Set(["left","top"]);async function v9(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=al(n),a=og(n),l=Mo(n)==="y",c=QB.has(o)?-1:1,d=s&&l?-1:1,h=ol(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*d,y:f*c}:{x:f*c,y:p*d}}const w9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await v9(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},b9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:w}=v;return{x:y,y:w}}},...l}=ol(t,e),c={x:n,y:r},d=await Zy(e,l),h=Mo(al(i)),f=fR(h);let p=c[f],m=c[h];if(s){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=p+d[v],b=p-d[y];p=bC(w,p,b)}if(o){const v=h==="y"?"top":"left",y=h==="y"?"bottom":"right",w=m+d[v],b=m-d[y];m=bC(w,m,b)}const g=a.fn({...e,[f]:p,[h]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:s,[h]:o}}}}}},x9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ol(t,e),d={x:n,y:r},h=Mo(i),f=fR(h);let p=d[f],m=d[h];const g=ol(a,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const b=f==="y"?"height":"width",k=s.reference[f]-s.floating[b]+v.mainAxis,_=s.reference[f]+s.reference[b]-v.mainAxis;p<k?p=k:p>_&&(p=_)}if(c){var y,w;const b=f==="y"?"width":"height",k=QB.has(al(i)),_=s.reference[h]-s.floating[b]+(k&&((y=o.offset)==null?void 0:y[h])||0)+(k?0:v.crossAxis),C=s.reference[h]+s.reference[b]+(k?0:((w=o.offset)==null?void 0:w[h])||0)-(k?v.crossAxis:0);m<_?m=_:m>C&&(m=C)}return{[f]:p,[h]:m}}}},S9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ol(t,e),d=await Zy(e,c),h=al(i),f=og(i),p=Mo(i)==="y",{width:m,height:g}=s.floating;let v,y;h==="top"||h==="bottom"?(v=h,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=h,v=f==="end"?"top":"bottom");const w=g-d.top-d.bottom,b=m-d.left-d.right,k=su(g-d[v],w),_=su(m-d[y],b),C=!e.middlewareData.shift;let P=k,R=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(R=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=w),C&&!f){const I=bi(d.left,0),j=bi(d.right,0),U=bi(d.top,0),G=bi(d.bottom,0);p?R=m-2*(I!==0||j!==0?I+j:bi(d.left,d.right)):P=g-2*(U!==0||G!==0?U+G:bi(d.top,d.bottom))}await l({...e,availableWidth:R,availableHeight:P});const M=await o.getDimensions(a.floating);return m!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function qS(){return typeof window<"u"}function ag(t){return JB(t)?(t.nodeName||"").toLowerCase():"#document"}function Ci(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function qo(t){var e;return(e=(JB(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function JB(t){return qS()?t instanceof Node||t instanceof Ci(t).Node:!1}function qs(t){return qS()?t instanceof Element||t instanceof Ci(t).Element:!1}function zo(t){return qS()?t instanceof HTMLElement||t instanceof Ci(t).HTMLElement:!1}function jD(t){return!qS()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ci(t).ShadowRoot}const k9=new Set(["inline","contents"]);function Nw(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ks(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!k9.has(i)}const E9=new Set(["table","td","th"]);function A9(t){return E9.has(ag(t))}const C9=[":popover-open",":modal"];function KS(t){return C9.some(e=>{try{return t.matches(e)}catch{return!1}})}const _9=["transform","translate","scale","rotate","perspective"],T9=["transform","translate","scale","rotate","perspective","filter"],P9=["paint","layout","strict","content"];function gR(t){const e=yR(),n=qs(t)?Ks(t):t;return _9.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||T9.some(r=>(n.willChange||"").includes(r))||P9.some(r=>(n.contain||"").includes(r))}function R9(t){let e=ou(t);for(;zo(e)&&!qm(e);){if(gR(e))return e;if(KS(e))return null;e=ou(e)}return null}function yR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const I9=new Set(["html","body","#document"]);function qm(t){return I9.has(ag(t))}function Ks(t){return Ci(t).getComputedStyle(t)}function XS(t){return qs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ou(t){if(ag(t)==="html")return t;const e=t.assignedSlot||t.parentNode||jD(t)&&t.host||qo(t);return jD(e)?e.host:e}function ZB(t){const e=ou(t);return qm(e)?t.ownerDocument?t.ownerDocument.body:t.body:zo(e)&&Nw(e)?e:ZB(e)}function ev(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=ZB(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Ci(i);if(s){const a=SC(o);return e.concat(o,o.visualViewport||[],Nw(i)?i:[],a&&n?ev(a):[])}return e.concat(i,ev(i,[],n))}function SC(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function e$(t){const e=Ks(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=zo(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=E1(n)!==s||E1(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function vR(t){return qs(t)?t:t.contextElement}function Yf(t){const e=vR(t);if(!zo(e))return Bo(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=e$(e);let o=(s?E1(n.width):n.width)/r,a=(s?E1(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const N9=Bo(0);function t$(t){const e=Ci(t);return!yR()||!e.visualViewport?N9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function D9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ci(t)?!1:e}function Ch(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=vR(t);let o=Bo(1);e&&(r?qs(r)&&(o=Yf(r)):o=Yf(t));const a=D9(s,n,r)?t$(s):Bo(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const f=Ci(s),p=r&&qs(r)?Ci(r):r;let m=f,g=SC(m);for(;g&&r&&p!==m;){const v=Yf(g),y=g.getBoundingClientRect(),w=Ks(g),b=y.left+(g.clientLeft+parseFloat(w.paddingLeft))*v.x,k=y.top+(g.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=b,c+=k,m=Ci(g),g=SC(m)}}return C1({width:d,height:h,x:l,y:c})}function wR(t,e){const n=XS(t).scrollLeft;return e?e.left+n:Ch(qo(t)).left+n}function n$(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:wR(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function M9(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=qo(r),a=e?KS(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Bo(1);const d=Bo(0),h=zo(r);if((h||!h&&!s)&&((ag(r)!=="body"||Nw(o))&&(l=XS(r)),zo(r))){const p=Ch(r);c=Yf(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!s?n$(o,l,!0):Bo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function O9(t){return Array.from(t.getClientRects())}function L9(t){const e=qo(t),n=XS(t),r=t.ownerDocument.body,i=bi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=bi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+wR(t);const a=-n.scrollTop;return Ks(r).direction==="rtl"&&(o+=bi(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function j9(t,e){const n=Ci(t),r=qo(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=yR();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}const F9=new Set(["absolute","fixed"]);function B9(t,e){const n=Ch(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=zo(t)?Yf(t):Bo(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function FD(t,e,n){let r;if(e==="viewport")r=j9(t,n);else if(e==="document")r=L9(qo(t));else if(qs(e))r=B9(e,n);else{const i=t$(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return C1(r)}function r$(t,e){const n=ou(t);return n===e||!qs(n)||qm(n)?!1:Ks(n).position==="fixed"||r$(n,e)}function $9(t,e){const n=e.get(t);if(n)return n;let r=ev(t,[],!1).filter(a=>qs(a)&&ag(a)!=="body"),i=null;const s=Ks(t).position==="fixed";let o=s?ou(t):t;for(;qs(o)&&!qm(o);){const a=Ks(o),l=gR(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&F9.has(i.position)||Nw(o)&&!l&&r$(t,o))?r=r.filter(d=>d!==o):i=a,o=ou(o)}return e.set(t,r),r}function U9(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?KS(e)?[]:$9(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=FD(e,d,i);return c.top=bi(h.top,c.top),c.right=su(h.right,c.right),c.bottom=su(h.bottom,c.bottom),c.left=bi(h.left,c.left),c},FD(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function z9(t){const{width:e,height:n}=e$(t);return{width:e,height:n}}function V9(t,e,n){const r=zo(e),i=qo(e),s=n==="fixed",o=Ch(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Bo(0);function c(){l.x=wR(i)}if(r||!r&&!s)if((ag(e)!=="body"||Nw(i))&&(a=XS(e)),r){const p=Ch(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&c();s&&!r&&i&&c();const d=i&&!r&&!s?n$(i,a):Bo(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function fE(t){return Ks(t).position==="static"}function BD(t,e){if(!zo(t)||Ks(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return qo(t)===n&&(n=n.ownerDocument.body),n}function i$(t,e){const n=Ci(t);if(KS(t))return n;if(!zo(t)){let i=ou(t);for(;i&&!qm(i);){if(qs(i)&&!fE(i))return i;i=ou(i)}return n}let r=BD(t,e);for(;r&&A9(r)&&fE(r);)r=BD(r,e);return r&&qm(r)&&fE(r)&&!gR(r)?n:r||R9(t)||n}const H9=async function(t){const e=this.getOffsetParent||i$,n=this.getDimensions,r=await n(t.floating);return{reference:V9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function W9(t){return Ks(t).direction==="rtl"}const G9={convertOffsetParentRelativeRectToViewportRelativeRect:M9,getDocumentElement:qo,getClippingRect:U9,getOffsetParent:i$,getElementRects:H9,getClientRects:O9,getDimensions:z9,getScale:Yf,isElement:qs,isRTL:W9};function s$(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function q9(t,e){let n=null,r;const i=qo(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const m=mb(h),g=mb(i.clientWidth-(d+f)),v=mb(i.clientHeight-(h+p)),y=mb(d),b={rootMargin:-m+"px "+-g+"px "+-v+"px "+-y+"px",threshold:bi(0,su(1,l))||1};let k=!0;function _(C){const P=C[0].intersectionRatio;if(P!==l){if(!k)return o();P?o(!1,P):r=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!s$(c,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(_,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(_,b)}n.observe(t)}return o(!0),s}function K9(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=vR(t),d=i||s?[...c?ev(c):[],...ev(e)]:[];d.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const h=c&&a?q9(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[w]=y;w&&w.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let m,g=l?Ch(t):null;l&&v();function v(){const y=Ch(t);g&&!s$(g,y)&&n(),g=y,m=requestAnimationFrame(v)}return n(),()=>{var y;d.forEach(w=>{i&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),h==null||h(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const X9=w9,Y9=b9,Q9=g9,J9=S9,Z9=y9,$D=m9,eK=x9,tK=(t,e,n)=>{const r=new Map,i={platform:G9,...n},s={...i.platform,_c:r};return p9(t,e,{...i,platform:s})};var nK=typeof document<"u",rK=function(){},ox=nK?E.useLayoutEffect:rK;function _1(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!_1(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!_1(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function o$(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function UD(t,e){const n=o$(t);return Math.round(e*n)/n}function pE(t){const e=E.useRef(t);return ox(()=>{e.current=t}),e}function iK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=E.useState(r);_1(f,r)||p(r);const[m,g]=E.useState(null),[v,y]=E.useState(null),w=E.useCallback(O=>{O!==C.current&&(C.current=O,g(O))},[]),b=E.useCallback(O=>{O!==P.current&&(P.current=O,y(O))},[]),k=s||m,_=o||v,C=E.useRef(null),P=E.useRef(null),R=E.useRef(d),M=l!=null,I=pE(l),j=pE(i),U=pE(c),G=E.useCallback(()=>{if(!C.current||!P.current)return;const O={placement:e,strategy:n,middleware:f};j.current&&(O.platform=j.current),tK(C.current,P.current,O).then(z=>{const N={...z,isPositioned:U.current!==!1};B.current&&!_1(R.current,N)&&(R.current=N,ig.flushSync(()=>{h(N)}))})},[f,e,n,j,U]);ox(()=>{c===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,h(O=>({...O,isPositioned:!1})))},[c]);const B=E.useRef(!1);ox(()=>(B.current=!0,()=>{B.current=!1}),[]),ox(()=>{if(k&&(C.current=k),_&&(P.current=_),k&&_){if(I.current)return I.current(k,_,G);G()}},[k,_,G,I,M]);const V=E.useMemo(()=>({reference:C,floating:P,setReference:w,setFloating:b}),[w,b]),F=E.useMemo(()=>({reference:k,floating:_}),[k,_]),L=E.useMemo(()=>{const O={position:n,left:0,top:0};if(!F.floating)return O;const z=UD(F.floating,d.x),N=UD(F.floating,d.y);return a?{...O,transform:"translate("+z+"px, "+N+"px)",...o$(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:N}},[n,a,F.floating,d.x,d.y]);return E.useMemo(()=>({...d,update:G,refs:V,elements:F,floatingStyles:L}),[d,G,V,F,L])}const sK=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?$D({element:r.current,padding:i}).fn(n):{}:r?$D({element:r,padding:i}).fn(n):{}}}},oK=(t,e)=>({...X9(t),options:[t,e]}),aK=(t,e)=>({...Y9(t),options:[t,e]}),lK=(t,e)=>({...eK(t),options:[t,e]}),cK=(t,e)=>({...Q9(t),options:[t,e]}),uK=(t,e)=>({...J9(t),options:[t,e]}),dK=(t,e)=>({...Z9(t),options:[t,e]}),hK=(t,e)=>({...sK(t),options:[t,e]});var fK="Arrow",a$=E.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return x.jsx(Ue.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});a$.displayName=fK;var pK=a$;function l$(t){const[e,n]=E.useState(void 0);return sl(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var bR="Popper",[c$,YS]=jh(bR),[mK,u$]=c$(bR),d$=t=>{const{__scopePopper:e,children:n}=t,[r,i]=E.useState(null);return x.jsx(mK,{scope:e,anchor:r,onAnchorChange:i,children:n})};d$.displayName=bR;var h$="PopperAnchor",f$=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=u$(h$,n),o=E.useRef(null),a=wn(e,o);return E.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:x.jsx(Ue.div,{...i,ref:a})});f$.displayName=h$;var xR="PopperContent",[gK,yK]=c$(xR),p$=E.forwardRef((t,e)=>{var ee,je,Ne,gt,Wt,Ni;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=t,v=u$(xR,n),[y,w]=E.useState(null),b=wn(e,Gr=>w(Gr)),[k,_]=E.useState(null),C=l$(k),P=(C==null?void 0:C.width)??0,R=(C==null?void 0:C.height)??0,M=r+(s!=="center"?"-"+s:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},j=Array.isArray(c)?c:[c],U=j.length>0,G={padding:I,boundary:j.filter(wK),altBoundary:U},{refs:B,floatingStyles:V,placement:F,isPositioned:L,middlewareData:O}=iK({strategy:"fixed",placement:M,whileElementsMounted:(...Gr)=>K9(...Gr,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[oK({mainAxis:i+R,alignmentAxis:o}),l&&aK({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?lK():void 0,...G}),l&&cK({...G}),uK({...G,apply:({elements:Gr,rects:gl,availableWidth:Vh,availableHeight:Su})=>{const{width:Hh,height:ku}=gl.reference,Yo=Gr.floating.style;Yo.setProperty("--radix-popper-available-width",`${Vh}px`),Yo.setProperty("--radix-popper-available-height",`${Su}px`),Yo.setProperty("--radix-popper-anchor-width",`${Hh}px`),Yo.setProperty("--radix-popper-anchor-height",`${ku}px`)}}),k&&hK({element:k,padding:a}),bK({arrowWidth:P,arrowHeight:R}),f&&dK({strategy:"referenceHidden",...G})]}),[z,N]=y$(F),Y=Uo(m);sl(()=>{L&&(Y==null||Y())},[L,Y]);const $=(ee=O.arrow)==null?void 0:ee.x,D=(je=O.arrow)==null?void 0:je.y,K=((Ne=O.arrow)==null?void 0:Ne.centerOffset)!==0,[q,te]=E.useState();return sl(()=>{y&&te(window.getComputedStyle(y).zIndex)},[y]),x.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:L?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[(gt=O.transformOrigin)==null?void 0:gt.x,(Wt=O.transformOrigin)==null?void 0:Wt.y].join(" "),...((Ni=O.hide)==null?void 0:Ni.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(gK,{scope:n,placedSide:z,onArrowChange:_,arrowX:$,arrowY:D,shouldHideArrow:K,children:x.jsx(Ue.div,{"data-side":z,"data-align":N,...g,ref:b,style:{...g.style,animation:L?void 0:"none"}})})})});p$.displayName=xR;var m$="PopperArrow",vK={top:"bottom",right:"left",bottom:"top",left:"right"},g$=E.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=yK(m$,r),o=vK[s.placedSide];return x.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:x.jsx(pK,{...i,ref:n,style:{...i.style,display:"block"}})})});g$.displayName=m$;function wK(t){return t!==null}var bK=t=>({name:"transformOrigin",options:t,fn(e){var v,y,w;const{placement:n,rects:r,middlewareData:i}=e,o=((v=i.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=y$(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((y=i.arrow)==null?void 0:y.x)??0)+a/2,p=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let m="",g="";return c==="bottom"?(m=o?h:`${f}px`,g=`${-l}px`):c==="top"?(m=o?h:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=o?h:`${p}px`):c==="left"&&(m=`${r.floating.width+l}px`,g=o?h:`${p}px`),{data:{x:m,y:g}}}});function y$(t){const[e,n="center"]=t.split("-");return[e,n]}var xK=d$,SR=f$,v$=p$,w$=g$,[QS,fpe]=jh("Tooltip",[YS]),kR=YS(),b$="TooltipProvider",SK=700,zD="tooltip.open",[kK,x$]=QS(b$),S$=t=>{const{__scopeTooltip:e,delayDuration:n=SK,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=E.useRef(!0),a=E.useRef(!1),l=E.useRef(0);return E.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),x.jsx(kK,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:E.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:E.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:E.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};S$.displayName=b$;var k$="Tooltip",[ppe,JS]=QS(k$),kC="TooltipTrigger",EK=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=JS(kC,n),s=x$(kC,n),o=kR(n),a=E.useRef(null),l=wn(e,a,i.onTriggerChange),c=E.useRef(!1),d=E.useRef(!1),h=E.useCallback(()=>c.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),x.jsx(SR,{asChild:!0,...o,children:x.jsx(Ue.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:We(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:We(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:We(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:We(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:We(t.onBlur,i.onClose),onClick:We(t.onClick,i.onClose)})})});EK.displayName=kC;var AK="TooltipPortal",[mpe,CK]=QS(AK,{forceMount:void 0}),Km="TooltipContent",E$=E.forwardRef((t,e)=>{const n=CK(Km,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=JS(Km,t.__scopeTooltip);return x.jsx(fl,{present:r||o.open,children:o.disableHoverableContent?x.jsx(A$,{side:i,...s,ref:e}):x.jsx(_K,{side:i,...s,ref:e})})}),_K=E.forwardRef((t,e)=>{const n=JS(Km,t.__scopeTooltip),r=x$(Km,t.__scopeTooltip),i=E.useRef(null),s=wn(e,i),[o,a]=E.useState(null),{trigger:l,onClose:c}=n,d=i.current,{onPointerInTransitChange:h}=r,f=E.useCallback(()=>{a(null),h(!1)},[h]),p=E.useCallback((m,g)=>{const v=m.currentTarget,y={x:m.clientX,y:m.clientY},w=NK(y,v.getBoundingClientRect()),b=DK(y,w),k=MK(g.getBoundingClientRect()),_=LK([...b,...k]);a(_),h(!0)},[h]);return E.useEffect(()=>()=>f(),[f]),E.useEffect(()=>{if(l&&d){const m=v=>p(v,d),g=v=>p(v,l);return l.addEventListener("pointerleave",m),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",g)}}},[l,d,p,f]),E.useEffect(()=>{if(o){const m=g=>{const v=g.target,y={x:g.clientX,y:g.clientY},w=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),b=!OK(y,o);w?f():b&&(f(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,d,o,c,f]),x.jsx(A$,{...t,ref:s})}),[TK,PK]=QS(k$,{isInside:!1}),RK=P8("TooltipContent"),A$=E.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=JS(Km,n),c=kR(n),{onClose:d}=l;return E.useEffect(()=>(document.addEventListener(zD,d),()=>document.removeEventListener(zD,d)),[d]),E.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),x.jsx(Tw,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:x.jsxs(v$,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[x.jsx(RK,{children:r}),x.jsx(TK,{scope:n,isInside:!0,children:x.jsx(Z8,{id:l.contentId,role:"tooltip",children:i||r})})]})})});E$.displayName=Km;var C$="TooltipArrow",IK=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=kR(n);return PK(C$,n).isInside?null:x.jsx(w$,{...i,...r,ref:e})});IK.displayName=C$;function NK(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function DK(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function MK(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function OK(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,d=a.y,h=l.x,f=l.y;d>r!=f>r&&n<(h-c)*(r-d)/(f-d)+c&&(i=!i)}return i}function LK(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),jK(e)}function jK(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var FK=S$,_$=E$;const BK=FK,$K=E.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx(_$,{ref:r,sideOffset:e,className:Qt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));$K.displayName=_$.displayName;var lg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_h=typeof window>"u"||"Deno"in globalThis;function mr(){}function UK(t,e){return typeof t=="function"?t(e):t}function EC(t){return typeof t=="number"&&t>=0&&t!==1/0}function T$(t,e){return Math.max(t+(e||0)-Date.now(),0)}function eu(t,e){return typeof t=="function"?t(e):t}function Qi(t,e){return typeof t=="function"?t(e):t}function VD(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==ER(o,e.options))return!1}else if(!tv(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function HD(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Th(e.options.mutationKey)!==Th(s))return!1}else if(!tv(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function ER(t,e){return((e==null?void 0:e.queryKeyHashFn)||Th)(t)}function Th(t){return JSON.stringify(t,(e,n)=>AC(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function tv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>tv(t[n],e[n])):!1}function P$(t,e){if(t===e)return t;const n=WD(t)&&WD(e);if(n||AC(t)&&AC(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{},l=new Set(r);let c=0;for(let d=0;d<o;d++){const h=n?d:s[d];(!n&&l.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=P$(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&c++)}return i===o&&c===i?t:a}return e}function T1(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function WD(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function AC(t){if(!GD(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!GD(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function GD(t){return Object.prototype.toString.call(t)==="[object Object]"}function zK(t){return new Promise(e=>{setTimeout(e,t)})}function CC(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?P$(t,e):e}function VK(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function HK(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var AR=Symbol();function R$(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===AR?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function I$(t,e){return typeof t=="function"?t(...e):!!t}var Xu,Fl,np,F2,WK=(F2=class extends lg{constructor(){super();A(this,Xu);A(this,Fl);A(this,np);S(this,np,e=>{if(!_h&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){u(this,Fl)||this.setEventListener(u(this,np))}onUnsubscribe(){var e;this.hasListeners()||((e=u(this,Fl))==null||e.call(this),S(this,Fl,void 0))}setEventListener(e){var n;S(this,np,e),(n=u(this,Fl))==null||n.call(this),S(this,Fl,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){u(this,Xu)!==e&&(S(this,Xu,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof u(this,Xu)=="boolean"?u(this,Xu):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Xu=new WeakMap,Fl=new WeakMap,np=new WeakMap,F2),CR=new WK,rp,Bl,ip,B2,GK=(B2=class extends lg{constructor(){super();A(this,rp,!0);A(this,Bl);A(this,ip);S(this,ip,e=>{if(!_h&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){u(this,Bl)||this.setEventListener(u(this,ip))}onUnsubscribe(){var e;this.hasListeners()||((e=u(this,Bl))==null||e.call(this),S(this,Bl,void 0))}setEventListener(e){var n;S(this,ip,e),(n=u(this,Bl))==null||n.call(this),S(this,Bl,e(this.setOnline.bind(this)))}setOnline(e){u(this,rp)!==e&&(S(this,rp,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return u(this,rp)}},rp=new WeakMap,Bl=new WeakMap,ip=new WeakMap,B2),P1=new GK;function _C(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function qK(t){return Math.min(1e3*2**t,3e4)}function N$(t){return(t??"online")==="online"?P1.isOnline():!0}var D$=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function mE(t){return t instanceof D$}function M$(t){let e=!1,n=0,r=!1,i;const s=_C(),o=g=>{var v;r||(f(new D$(g)),(v=t.abort)==null||v.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>CR.isFocused()&&(t.networkMode==="always"||P1.isOnline())&&t.canRun(),d=()=>N$(t.networkMode)&&t.canRun(),h=g=>{var v;r||(r=!0,(v=t.onSuccess)==null||v.call(t,g),i==null||i(),s.resolve(g))},f=g=>{var v;r||(r=!0,(v=t.onError)==null||v.call(t,g),i==null||i(),s.reject(g))},p=()=>new Promise(g=>{var v;i=y=>{(r||c())&&g(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;i=void 0,r||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(r)return;let g;const v=n===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var C;if(r)return;const w=t.retry??(_h?0:3),b=t.retryDelay??qK,k=typeof b=="function"?b(n,y):b,_=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(e||!_){f(y);return}n++,(C=t.onFail)==null||C.call(t,n,y),zK(k).then(()=>c()?void 0:p()).then(()=>{e?f(y):m()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),s)}}var KK=t=>setTimeout(t,0);function XK(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=KK;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var pn=XK(),Yu,$2,O$=($2=class{constructor(){A(this,Yu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),EC(this.gcTime)&&S(this,Yu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(_h?1/0:5*60*1e3))}clearGcTimeout(){u(this,Yu)&&(clearTimeout(u(this,Yu)),S(this,Yu,void 0))}},Yu=new WeakMap,$2),sp,Qu,Li,Ju,Xn,Av,Zu,As,Zo,U2,YK=(U2=class extends O${constructor(e){super();A(this,As);A(this,sp);A(this,Qu);A(this,Li);A(this,Ju);A(this,Xn);A(this,Av);A(this,Zu);S(this,Zu,!1),S(this,Av,e.defaultOptions),this.setOptions(e.options),this.observers=[],S(this,Ju,e.client),S(this,Li,u(this,Ju).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,S(this,sp,QK(this.options)),this.state=e.state??u(this,sp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=u(this,Xn))==null?void 0:e.promise}setOptions(e){this.options={...u(this,Av),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&u(this,Li).remove(this)}setData(e,n){const r=CC(this.state.data,e,this.options);return T(this,As,Zo).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){T(this,As,Zo).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=u(this,Xn))==null?void 0:r.promise;return(i=u(this,Xn))==null||i.cancel(e),n?n.then(mr).catch(mr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(u(this,sp))}isActive(){return this.observers.some(e=>Qi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===AR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>eu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!T$(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=u(this,Xn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=u(this,Xn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),u(this,Li).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(u(this,Xn)&&(u(this,Zu)?u(this,Xn).cancel({revert:!0}):u(this,Xn).cancelRetry()),this.scheduleGc()),u(this,Li).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||T(this,As,Zo).call(this,{type:"invalidate"})}fetch(e,n){var c,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(u(this,Xn))return u(this,Xn).continueRetry(),u(this,Xn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(S(this,Zu,!0),r.signal)})},s=()=>{const f=R$(this.options,n),m=(()=>{const g={client:u(this,Ju),queryKey:this.queryKey,meta:this.meta};return i(g),g})();return S(this,Zu,!1),this.options.persister?this.options.persister(f,m,this):f(m)},a=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:u(this,Ju),state:this.state,fetchFn:s};return i(f),f})();(c=this.options.behavior)==null||c.onFetch(a,this),S(this,Qu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&T(this,As,Zo).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const l=f=>{var p,m,g,v;mE(f)&&f.silent||T(this,As,Zo).call(this,{type:"error",error:f}),mE(f)||((m=(p=u(this,Li).config).onError)==null||m.call(p,f,this),(v=(g=u(this,Li).config).onSettled)==null||v.call(g,this.state.data,f,this)),this.scheduleGc()};return S(this,Xn,M$({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var p,m,g,v;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(y){l(y);return}(m=(p=u(this,Li).config).onSuccess)==null||m.call(p,f,this),(v=(g=u(this,Li).config).onSettled)==null||v.call(g,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,p)=>{T(this,As,Zo).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{T(this,As,Zo).call(this,{type:"pause"})},onContinue:()=>{T(this,As,Zo).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),u(this,Xn).start()}},sp=new WeakMap,Qu=new WeakMap,Li=new WeakMap,Ju=new WeakMap,Xn=new WeakMap,Av=new WeakMap,Zu=new WeakMap,As=new WeakSet,Zo=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...L$(r.data,this.options),fetchMeta:e.meta??null};case"success":return S(this,Qu,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return mE(i)&&i.revert&&u(this,Qu)?{...u(this,Qu),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),pn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),u(this,Li).notify({query:this,type:"updated",action:e})})},U2);function L$(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:N$(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function QK(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var so,z2,JK=(z2=class extends lg{constructor(e={}){super();A(this,so);this.config=e,S(this,so,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??ER(i,n);let o=this.get(s);return o||(o=new YK({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){u(this,so).has(e.queryHash)||(u(this,so).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=u(this,so).get(e.queryHash);n&&(e.destroy(),n===e&&u(this,so).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){pn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return u(this,so).get(e)}getAll(){return[...u(this,so).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>VD(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>VD(e,r)):n}notify(e){pn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){pn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){pn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},so=new WeakMap,z2),oo,lr,ed,ao,Cl,V2,ZK=(V2=class extends O${constructor(e){super();A(this,ao);A(this,oo);A(this,lr);A(this,ed);this.mutationId=e.mutationId,S(this,lr,e.mutationCache),S(this,oo,[]),this.state=e.state||j$(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){u(this,oo).includes(e)||(u(this,oo).push(e),this.clearGcTimeout(),u(this,lr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){S(this,oo,u(this,oo).filter(n=>n!==e)),this.scheduleGc(),u(this,lr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){u(this,oo).length||(this.state.status==="pending"?this.scheduleGc():u(this,lr).remove(this))}continue(){var e;return((e=u(this,ed))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,a,l,c,d,h,f,p,m,g,v,y,w,b,k,_,C,P,R;const n=()=>{T(this,ao,Cl).call(this,{type:"continue"})};S(this,ed,M$({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,I)=>{T(this,ao,Cl).call(this,{type:"failed",failureCount:M,error:I})},onPause:()=>{T(this,ao,Cl).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>u(this,lr).canRun(this)}));const r=this.state.status==="pending",i=!u(this,ed).canStart();try{if(r)n();else{T(this,ao,Cl).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(s=u(this,lr).config).onMutate)==null?void 0:o.call(s,e,this));const I=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));I!==this.state.context&&T(this,ao,Cl).call(this,{type:"pending",context:I,variables:e,isPaused:i})}const M=await u(this,ed).start();return await((d=(c=u(this,lr).config).onSuccess)==null?void 0:d.call(c,M,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,M,e,this.state.context)),await((m=(p=u(this,lr).config).onSettled)==null?void 0:m.call(p,M,null,this.state.variables,this.state.context,this)),await((v=(g=this.options).onSettled)==null?void 0:v.call(g,M,null,e,this.state.context)),T(this,ao,Cl).call(this,{type:"success",data:M}),M}catch(M){try{throw await((w=(y=u(this,lr).config).onError)==null?void 0:w.call(y,M,e,this.state.context,this)),await((k=(b=this.options).onError)==null?void 0:k.call(b,M,e,this.state.context)),await((C=(_=u(this,lr).config).onSettled)==null?void 0:C.call(_,void 0,M,this.state.variables,this.state.context,this)),await((R=(P=this.options).onSettled)==null?void 0:R.call(P,void 0,M,e,this.state.context)),M}finally{T(this,ao,Cl).call(this,{type:"error",error:M})}}finally{u(this,lr).runNext(this)}}},oo=new WeakMap,lr=new WeakMap,ed=new WeakMap,ao=new WeakSet,Cl=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),pn.batch(()=>{u(this,oo).forEach(r=>{r.onMutationUpdate(e)}),u(this,lr).notify({mutation:this,type:"updated",action:e})})},V2);function j$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var la,Cs,Cv,H2,e7=(H2=class extends lg{constructor(e={}){super();A(this,la);A(this,Cs);A(this,Cv);this.config=e,S(this,la,new Set),S(this,Cs,new Map),S(this,Cv,0)}build(e,n,r){const i=new ZK({mutationCache:this,mutationId:++Lt(this,Cv)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){u(this,la).add(e);const n=gb(e);if(typeof n=="string"){const r=u(this,Cs).get(n);r?r.push(e):u(this,Cs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(u(this,la).delete(e)){const n=gb(e);if(typeof n=="string"){const r=u(this,Cs).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&u(this,Cs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=gb(e);if(typeof n=="string"){const r=u(this,Cs).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=gb(e);if(typeof n=="string"){const i=(r=u(this,Cs).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){pn.batch(()=>{u(this,la).forEach(e=>{this.notify({type:"removed",mutation:e})}),u(this,la).clear(),u(this,Cs).clear()})}getAll(){return Array.from(u(this,la))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>HD(n,r))}findAll(e={}){return this.getAll().filter(n=>HD(e,n))}notify(e){pn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return pn.batch(()=>Promise.all(e.map(n=>n.continue().catch(mr))))}},la=new WeakMap,Cs=new WeakMap,Cv=new WeakMap,H2);function gb(t){var e;return(e=t.options.scope)==null?void 0:e.id}function qD(t){return{onFetch:(e,n)=>{var d,h,f,p,m;const r=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const v=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=R$(e.options,e.fetchOptions),w=async(b,k,_)=>{if(g)return Promise.reject();if(k==null&&b.pages.length)return Promise.resolve(b);const P=(()=>{const j={client:e.client,queryKey:e.queryKey,pageParam:k,direction:_?"backward":"forward",meta:e.options.meta};return v(j),j})(),R=await y(P),{maxPages:M}=e.options,I=_?HK:VK;return{pages:I(b.pages,R,M),pageParams:I(b.pageParams,k,M)}};if(i&&s.length){const b=i==="backward",k=b?t7:KD,_={pages:s,pageParams:o},C=k(r,_);a=await w(_,C,b)}else{const b=t??s.length;do{const k=l===0?o[0]??r.initialPageParam:KD(r,a);if(l>0&&k==null)break;a=await w(a,k),l++}while(l<b)}return a};e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function KD(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function t7(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var jt,$l,Ul,op,ap,zl,lp,cp,W2,n7=(W2=class{constructor(t={}){A(this,jt);A(this,$l);A(this,Ul);A(this,op);A(this,ap);A(this,zl);A(this,lp);A(this,cp);S(this,jt,t.queryCache||new JK),S(this,$l,t.mutationCache||new e7),S(this,Ul,t.defaultOptions||{}),S(this,op,new Map),S(this,ap,new Map),S(this,zl,0)}mount(){Lt(this,zl)._++,u(this,zl)===1&&(S(this,lp,CR.subscribe(async t=>{t&&(await this.resumePausedMutations(),u(this,jt).onFocus())})),S(this,cp,P1.subscribe(async t=>{t&&(await this.resumePausedMutations(),u(this,jt).onOnline())})))}unmount(){var t,e;Lt(this,zl)._--,u(this,zl)===0&&((t=u(this,lp))==null||t.call(this),S(this,lp,void 0),(e=u(this,cp))==null||e.call(this),S(this,cp,void 0))}isFetching(t){return u(this,jt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return u(this,$l).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=u(this,jt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=u(this,jt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(eu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return u(this,jt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=u(this,jt).get(r.queryHash),s=i==null?void 0:i.state.data,o=UK(e,s);if(o!==void 0)return u(this,jt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return pn.batch(()=>u(this,jt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=u(this,jt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=u(this,jt);pn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=u(this,jt);return pn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=pn.batch(()=>u(this,jt).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(mr).catch(mr)}invalidateQueries(t,e={}){return pn.batch(()=>(u(this,jt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=pn.batch(()=>u(this,jt).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(mr)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(mr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=u(this,jt).build(this,e);return n.isStaleByTime(eu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(mr).catch(mr)}fetchInfiniteQuery(t){return t.behavior=qD(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(mr).catch(mr)}ensureInfiniteQueryData(t){return t.behavior=qD(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return P1.isOnline()?u(this,$l).resumePausedMutations():Promise.resolve()}getQueryCache(){return u(this,jt)}getMutationCache(){return u(this,$l)}getDefaultOptions(){return u(this,Ul)}setDefaultOptions(t){S(this,Ul,t)}setQueryDefaults(t,e){u(this,op).set(Th(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...u(this,op).values()],n={};return e.forEach(r=>{tv(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){u(this,ap).set(Th(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...u(this,ap).values()],n={};return e.forEach(r=>{tv(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...u(this,Ul).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ER(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===AR&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...u(this,Ul).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){u(this,jt).clear(),u(this,$l).clear()}},jt=new WeakMap,$l=new WeakMap,Ul=new WeakMap,op=new WeakMap,ap=new WeakMap,zl=new WeakMap,lp=new WeakMap,cp=new WeakMap,W2),_r,De,_v,cr,td,up,Vl,Hl,Tv,dp,hp,nd,rd,Wl,fp,qe,Hg,TC,PC,RC,IC,NC,DC,MC,F$,G2,r7=(G2=class extends lg{constructor(e,n){super();A(this,qe);A(this,_r);A(this,De);A(this,_v);A(this,cr);A(this,td);A(this,up);A(this,Vl);A(this,Hl);A(this,Tv);A(this,dp);A(this,hp);A(this,nd);A(this,rd);A(this,Wl);A(this,fp,new Set);this.options=n,S(this,_r,e),S(this,Hl,null),S(this,Vl,_C()),this.options.experimental_prefetchInRender||u(this,Vl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(u(this,De).addObserver(this),XD(u(this,De),this.options)?T(this,qe,Hg).call(this):this.updateResult(),T(this,qe,IC).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return OC(u(this,De),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return OC(u(this,De),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,T(this,qe,NC).call(this),T(this,qe,DC).call(this),u(this,De).removeObserver(this)}setOptions(e){const n=this.options,r=u(this,De);if(this.options=u(this,_r).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Qi(this.options.enabled,u(this,De))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");T(this,qe,MC).call(this),u(this,De).setOptions(this.options),n._defaulted&&!T1(this.options,n)&&u(this,_r).getQueryCache().notify({type:"observerOptionsUpdated",query:u(this,De),observer:this});const i=this.hasListeners();i&&YD(u(this,De),r,this.options,n)&&T(this,qe,Hg).call(this),this.updateResult(),i&&(u(this,De)!==r||Qi(this.options.enabled,u(this,De))!==Qi(n.enabled,u(this,De))||eu(this.options.staleTime,u(this,De))!==eu(n.staleTime,u(this,De)))&&T(this,qe,TC).call(this);const s=T(this,qe,PC).call(this);i&&(u(this,De)!==r||Qi(this.options.enabled,u(this,De))!==Qi(n.enabled,u(this,De))||s!==u(this,Wl))&&T(this,qe,RC).call(this,s)}getOptimisticResult(e){const n=u(this,_r).getQueryCache().build(u(this,_r),e),r=this.createResult(n,e);return s7(this,r)&&(S(this,cr,r),S(this,up,this.options),S(this,td,u(this,De).state)),r}getCurrentResult(){return u(this,cr)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),Reflect.get(r,i))})}trackProp(e){u(this,fp).add(e)}getCurrentQuery(){return u(this,De)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=u(this,_r).defaultQueryOptions(e),r=u(this,_r).getQueryCache().build(u(this,_r),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return T(this,qe,Hg).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),u(this,cr)))}createResult(e,n){var M;const r=u(this,De),i=this.options,s=u(this,cr),o=u(this,td),a=u(this,up),c=e!==r?e.state:u(this,_v),{state:d}=e;let h={...d},f=!1,p;if(n._optimisticResults){const I=this.hasListeners(),j=!I&&XD(e,n),U=I&&YD(e,r,n,i);(j||U)&&(h={...h,...L$(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:v}=h;p=h.data;let y=!1;if(n.placeholderData!==void 0&&p===void 0&&v==="pending"){let I;s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(I=s.data,y=!0):I=typeof n.placeholderData=="function"?n.placeholderData((M=u(this,hp))==null?void 0:M.state.data,u(this,hp)):n.placeholderData,I!==void 0&&(v="success",p=CC(s==null?void 0:s.data,I,n),f=!0)}if(n.select&&p!==void 0&&!y)if(s&&p===(o==null?void 0:o.data)&&n.select===u(this,Tv))p=u(this,dp);else try{S(this,Tv,n.select),p=n.select(p),p=CC(s==null?void 0:s.data,p,n),S(this,dp,p),S(this,Hl,null)}catch(I){S(this,Hl,I)}u(this,Hl)&&(m=u(this,Hl),p=u(this,dp),g=Date.now(),v="error");const w=h.fetchStatus==="fetching",b=v==="pending",k=v==="error",_=b&&w,C=p!==void 0,R={status:v,fetchStatus:h.fetchStatus,isPending:b,isSuccess:v==="success",isError:k,isInitialLoading:_,isLoading:_,data:p,dataUpdatedAt:h.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!b,isLoadingError:k&&!C,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:k&&C,isStale:_R(e,n),refetch:this.refetch,promise:u(this,Vl),isEnabled:Qi(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const I=G=>{R.status==="error"?G.reject(R.error):R.data!==void 0&&G.resolve(R.data)},j=()=>{const G=S(this,Vl,R.promise=_C());I(G)},U=u(this,Vl);switch(U.status){case"pending":e.queryHash===r.queryHash&&I(U);break;case"fulfilled":(R.status==="error"||R.data!==U.value)&&j();break;case"rejected":(R.status!=="error"||R.error!==U.reason)&&j();break}}return R}updateResult(){const e=u(this,cr),n=this.createResult(u(this,De),this.options);if(S(this,td,u(this,De).state),S(this,up,this.options),u(this,td).data!==void 0&&S(this,hp,u(this,De)),T1(n,e))return;S(this,cr,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!u(this,fp).size)return!0;const o=new Set(s??u(this,fp));return this.options.throwOnError&&o.add("error"),Object.keys(u(this,cr)).some(a=>{const l=a;return u(this,cr)[l]!==e[l]&&o.has(l)})};T(this,qe,F$).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&T(this,qe,IC).call(this)}},_r=new WeakMap,De=new WeakMap,_v=new WeakMap,cr=new WeakMap,td=new WeakMap,up=new WeakMap,Vl=new WeakMap,Hl=new WeakMap,Tv=new WeakMap,dp=new WeakMap,hp=new WeakMap,nd=new WeakMap,rd=new WeakMap,Wl=new WeakMap,fp=new WeakMap,qe=new WeakSet,Hg=function(e){T(this,qe,MC).call(this);let n=u(this,De).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(mr)),n},TC=function(){T(this,qe,NC).call(this);const e=eu(this.options.staleTime,u(this,De));if(_h||u(this,cr).isStale||!EC(e))return;const r=T$(u(this,cr).dataUpdatedAt,e)+1;S(this,nd,setTimeout(()=>{u(this,cr).isStale||this.updateResult()},r))},PC=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(u(this,De)):this.options.refetchInterval)??!1},RC=function(e){T(this,qe,DC).call(this),S(this,Wl,e),!(_h||Qi(this.options.enabled,u(this,De))===!1||!EC(u(this,Wl))||u(this,Wl)===0)&&S(this,rd,setInterval(()=>{(this.options.refetchIntervalInBackground||CR.isFocused())&&T(this,qe,Hg).call(this)},u(this,Wl)))},IC=function(){T(this,qe,TC).call(this),T(this,qe,RC).call(this,T(this,qe,PC).call(this))},NC=function(){u(this,nd)&&(clearTimeout(u(this,nd)),S(this,nd,void 0))},DC=function(){u(this,rd)&&(clearInterval(u(this,rd)),S(this,rd,void 0))},MC=function(){const e=u(this,_r).getQueryCache().build(u(this,_r),this.options);if(e===u(this,De))return;const n=u(this,De);S(this,De,e),S(this,_v,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},F$=function(e){pn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(u(this,cr))}),u(this,_r).getQueryCache().notify({query:u(this,De),type:"observerResultsUpdated"})})},G2);function i7(t,e){return Qi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function XD(t,e){return i7(t,e)||t.state.data!==void 0&&OC(t,e,e.refetchOnMount)}function OC(t,e,n){if(Qi(e.enabled,t)!==!1&&eu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&_R(t,e)}return!1}function YD(t,e,n,r){return(t!==e||Qi(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&_R(t,n)}function _R(t,e){return Qi(e.enabled,t)!==!1&&t.isStaleByTime(eu(e.staleTime,t))}function s7(t,e){return!T1(t.getCurrentResult(),e)}var Gl,ql,Tr,ca,Qa,ax,LC,q2,o7=(q2=class extends lg{constructor(n,r){super();A(this,Qa);A(this,Gl);A(this,ql);A(this,Tr);A(this,ca);S(this,Gl,n),this.setOptions(r),this.bindMethods(),T(this,Qa,ax).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=u(this,Gl).defaultMutationOptions(n),T1(this.options,r)||u(this,Gl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:u(this,Tr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Th(r.mutationKey)!==Th(this.options.mutationKey)?this.reset():((i=u(this,Tr))==null?void 0:i.state.status)==="pending"&&u(this,Tr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=u(this,Tr))==null||n.removeObserver(this)}onMutationUpdate(n){T(this,Qa,ax).call(this),T(this,Qa,LC).call(this,n)}getCurrentResult(){return u(this,ql)}reset(){var n;(n=u(this,Tr))==null||n.removeObserver(this),S(this,Tr,void 0),T(this,Qa,ax).call(this),T(this,Qa,LC).call(this)}mutate(n,r){var i;return S(this,ca,r),(i=u(this,Tr))==null||i.removeObserver(this),S(this,Tr,u(this,Gl).getMutationCache().build(u(this,Gl),this.options)),u(this,Tr).addObserver(this),u(this,Tr).execute(n)}},Gl=new WeakMap,ql=new WeakMap,Tr=new WeakMap,ca=new WeakMap,Qa=new WeakSet,ax=function(){var r;const n=((r=u(this,Tr))==null?void 0:r.state)??j$();S(this,ql,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},LC=function(n){pn.batch(()=>{var r,i,s,o,a,l,c,d;if(u(this,ca)&&this.hasListeners()){const h=u(this,ql).variables,f=u(this,ql).context;(n==null?void 0:n.type)==="success"?((i=(r=u(this,ca)).onSuccess)==null||i.call(r,n.data,h,f),(o=(s=u(this,ca)).onSettled)==null||o.call(s,n.data,null,h,f)):(n==null?void 0:n.type)==="error"&&((l=(a=u(this,ca)).onError)==null||l.call(a,n.error,h,f),(d=(c=u(this,ca)).onSettled)==null||d.call(c,void 0,n.error,h,f))}this.listeners.forEach(h=>{h(u(this,ql))})})},q2),B$=E.createContext(void 0),ds=t=>{const e=E.useContext(B$);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},a7=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(B$.Provider,{value:t,children:e})),$$=E.createContext(!1),l7=()=>E.useContext($$);$$.Provider;function c7(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var u7=E.createContext(c7()),d7=()=>E.useContext(u7),h7=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},f7=t=>{E.useEffect(()=>{t.clearReset()},[t])},p7=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||I$(n,[t.error,r])),m7=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},g7=(t,e)=>t.isLoading&&t.isFetching&&!e,y7=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,QD=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function v7(t,e,n){var h,f,p,m,g;const r=l7(),i=d7(),s=ds(),o=s.defaultQueryOptions(t);(f=(h=s.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",m7(o),h7(o,i),f7(i);const a=!s.getQueryCache().get(o.queryHash),[l]=E.useState(()=>new e(s,o)),c=l.getOptimisticResult(o),d=!r&&t.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(v=>{const y=d?l.subscribe(pn.batchCalls(v)):mr;return l.updateResult(),y},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),E.useEffect(()=>{l.setOptions(o)},[o,l]),y7(o,c))throw QD(o,l,i);if(p7({result:c,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((m=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||m.call(p,o,c),o.experimental_prefetchInRender&&!_h&&g7(c,r)){const v=a?QD(o,l,i):(g=s.getQueryCache().get(o.queryHash))==null?void 0:g.promise;v==null||v.catch(mr).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function gu(t,e){return v7(t,r7)}function Ko(t,e){const n=ds(),[r]=E.useState(()=>new o7(n,t));E.useEffect(()=>{r.setOptions(t)},[r,t]);const i=E.useSyncExternalStore(E.useCallback(o=>r.subscribe(pn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=E.useCallback((o,a)=>{r.mutate(o,a).catch(mr)},[r]);if(i.error&&I$(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nv(){return nv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nv.apply(this,arguments)}var Hc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Hc||(Hc={}));const JD="popstate";function w7(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Fh(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),jC("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:R1(s))}function r(i,s){TR(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return x7(e,n,r,t)}function Yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function TR(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function b7(){return Math.random().toString(36).substr(2,8)}function ZD(t,e){return{usr:t.state,key:t.key,idx:e}}function jC(t,e,n,r){return n===void 0&&(n=null),nv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fh(e):e,{state:n,key:e&&e.key||r||b7()})}function R1(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function x7(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Hc.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(nv({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Hc.Pop;let v=d(),y=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:y})}function f(v,y){a=Hc.Push;let w=jC(g.location,v,y);n&&n(w,v),c=d()+1;let b=ZD(w,c),k=g.createHref(w);try{o.pushState(b,"",k)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(k)}s&&l&&l({action:a,location:g.location,delta:1})}function p(v,y){a=Hc.Replace;let w=jC(g.location,v,y);n&&n(w,v),c=d();let b=ZD(w,c),k=g.createHref(w);o.replaceState(b,"",k),s&&l&&l({action:a,location:g.location,delta:0})}function m(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof v=="string"?v:R1(v);return w=w.replace(/ $/,"%20"),Yt(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let g={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(JD,h),l=v,()=>{i.removeEventListener(JD,h),l=null}},createHref(v){return e(i,v)},createURL:m,encodeLocation(v){let y=m(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var eM;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(eM||(eM={}));function S7(t,e,n){return n===void 0&&(n="/"),k7(t,e,n,!1)}function k7(t,e,n,r){let i=typeof e=="string"?Fh(e):e,s=PR(i.pathname||"/",n);if(s==null)return null;let o=U$(t);E7(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=O7(s);a=D7(o[l],c,r)}return a}function U$(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Yt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=tu([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Yt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),U$(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:I7(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of z$(s.path))i(s,o,l)}),e}function z$(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=z$(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function E7(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:N7(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const A7=/^:[\w-]+$/,C7=3,_7=2,T7=1,P7=10,R7=-2,tM=t=>t==="*";function I7(t,e){let n=t.split("/"),r=n.length;return n.some(tM)&&(r+=R7),e&&(r+=_7),n.filter(i=>!tM(i)).reduce((i,s)=>i+(A7.test(s)?C7:s===""?T7:P7),r)}function N7(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function D7(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=nM({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=nM({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:tu([s,h.pathname]),pathnameBase:B7(tu([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=tu([s,h.pathnameBase]))}return o}function nM(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=M7(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function M7(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),TR(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function O7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return TR(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function PR(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function L7(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Fh(t):t;return{pathname:n?n.startsWith("/")?n:j7(n,e):e,search:$7(r),hash:U7(i)}}function j7(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function gE(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function F7(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function RR(t,e){let n=F7(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function IR(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Fh(t):(i=nv({},t),Yt(!i.pathname||!i.pathname.includes("?"),gE("?","pathname","search",i)),Yt(!i.pathname||!i.pathname.includes("#"),gE("#","pathname","hash",i)),Yt(!i.search||!i.search.includes("#"),gE("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=L7(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const tu=t=>t.join("/").replace(/\/\/+/g,"/"),B7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,U7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function z7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const V$=["post","put","patch","delete"];new Set(V$);const V7=["get",...V$];new Set(V7);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rv(){return rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rv.apply(this,arguments)}const NR=E.createContext(null),H7=E.createContext(null),yu=E.createContext(null),ZS=E.createContext(null),vu=E.createContext({outlet:null,matches:[],isDataRoute:!1}),H$=E.createContext(null);function W7(t,e){let{relative:n}=e===void 0?{}:e;cg()||Yt(!1);let{basename:r,navigator:i}=E.useContext(yu),{hash:s,pathname:o,search:a}=G$(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:tu([r,o])),i.createHref({pathname:l,search:a,hash:s})}function cg(){return E.useContext(ZS)!=null}function Bh(){return cg()||Yt(!1),E.useContext(ZS).location}function W$(t){E.useContext(yu).static||E.useLayoutEffect(t)}function DR(){let{isDataRoute:t}=E.useContext(vu);return t?iX():G7()}function G7(){cg()||Yt(!1);let t=E.useContext(NR),{basename:e,future:n,navigator:r}=E.useContext(yu),{matches:i}=E.useContext(vu),{pathname:s}=Bh(),o=JSON.stringify(RR(i,n.v7_relativeSplatPath)),a=E.useRef(!1);return W$(()=>{a.current=!0}),E.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=IR(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:tu([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function G$(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=E.useContext(yu),{matches:i}=E.useContext(vu),{pathname:s}=Bh(),o=JSON.stringify(RR(i,r.v7_relativeSplatPath));return E.useMemo(()=>IR(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function q7(t,e){return K7(t,e)}function K7(t,e,n,r){cg()||Yt(!1);let{navigator:i}=E.useContext(yu),{matches:s}=E.useContext(vu),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Bh(),d;if(e){var h;let v=typeof e=="string"?Fh(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||Yt(!1),d=v}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=S7(t,{pathname:p}),g=Z7(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:tu([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:tu([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&g?E.createElement(ZS.Provider,{value:{location:rv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Hc.Pop}},g):g}function X7(){let t=rX(),e=z7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:i},n):null,null)}const Y7=E.createElement(X7,null);class Q7 extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(vu.Provider,{value:this.props.routeContext},E.createElement(H$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J7(t){let{routeContext:e,match:n,children:r}=t,i=E.useContext(NR);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(vu.Provider,{value:e},r)}function Z7(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Yt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=n,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,v=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||Y7,l&&(c<0&&f===0?(m=!0,v=null):c===f&&(m=!0,v=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),w=()=>{let b;return p?b=g:m?b=v:h.route.Component?b=E.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,E.createElement(J7,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?E.createElement(Q7,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var q$=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(q$||{}),I1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(I1||{});function eX(t){let e=E.useContext(NR);return e||Yt(!1),e}function tX(t){let e=E.useContext(H7);return e||Yt(!1),e}function nX(t){let e=E.useContext(vu);return e||Yt(!1),e}function K$(t){let e=nX(),n=e.matches[e.matches.length-1];return n.route.id||Yt(!1),n.route.id}function rX(){var t;let e=E.useContext(H$),n=tX(I1.UseRouteError),r=K$(I1.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function iX(){let{router:t}=eX(q$.UseNavigateStable),e=K$(I1.UseNavigateStable),n=E.useRef(!1);return W$(()=>{n.current=!0}),E.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,rv({fromRouteId:e},s)))},[t,e])}function sX(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function X$(t){let{to:e,replace:n,state:r,relative:i}=t;cg()||Yt(!1);let{future:s,static:o}=E.useContext(yu),{matches:a}=E.useContext(vu),{pathname:l}=Bh(),c=DR(),d=IR(e,RR(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return E.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function Wg(t){Yt(!1)}function oX(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Hc.Pop,navigator:s,static:o=!1,future:a}=t;cg()&&Yt(!1);let l=e.replace(/^\/*/,"/"),c=E.useMemo(()=>({basename:l,navigator:s,static:o,future:rv({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Fh(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=r,g=E.useMemo(()=>{let v=PR(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:m},navigationType:i}},[l,d,h,f,p,m,i]);return g==null?null:E.createElement(yu.Provider,{value:c},E.createElement(ZS.Provider,{children:n,value:g}))}function aX(t){let{children:e,location:n}=t;return q7(FC(e),n)}new Promise(()=>{});function FC(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(r,i)=>{if(!E.isValidElement(r))return;let s=[...e,i];if(r.type===E.Fragment){n.push.apply(n,FC(r.props.children,s));return}r.type!==Wg&&Yt(!1),!r.props.index||!r.props.children||Yt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=FC(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function BC(){return BC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BC.apply(this,arguments)}function lX(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function cX(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uX(t,e){return t.button===0&&(!e||e==="_self")&&!cX(t)}const dX=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hX="6";try{window.__reactRouterVersion=hX}catch{}const fX="startTransition",rM=yP[fX];function pX(t){let{basename:e,children:n,future:r,window:i}=t,s=E.useRef();s.current==null&&(s.current=w7({window:i,v5Compat:!0}));let o=s.current,[a,l]=E.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=E.useCallback(h=>{c&&rM?rM(()=>l(h)):l(h)},[l,c]);return E.useLayoutEffect(()=>o.listen(d),[o,d]),E.useEffect(()=>sX(r),[r]),E.createElement(oX,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const mX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yX=E.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=lX(e,dX),{basename:p}=E.useContext(yu),m,g=!1;if(typeof c=="string"&&gX.test(c)&&(m=c,mX))try{let b=new URL(window.location.href),k=c.startsWith("//")?new URL(b.protocol+c):new URL(c),_=PR(k.pathname,p);k.origin===b.origin&&_!=null?c=_+k.search+k.hash:g=!0}catch{}let v=W7(c,{relative:i}),y=vX(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function w(b){r&&r(b),b.defaultPrevented||y(b)}return E.createElement("a",BC({},f,{href:m||v,onClick:g||s?r:w,ref:n,target:l}))});var iM;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(iM||(iM={}));var sM;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sM||(sM={}));function vX(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=DR(),c=Bh(),d=G$(t,{relative:o});return E.useCallback(h=>{if(uX(h,n)){h.preventDefault();let f=r!==void 0?r:R1(c)===R1(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,r,i,n,t,s,o,a])}var No=function(){return No=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},No.apply(this,arguments)};function ug(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function wX(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function bX(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}const xX=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class MR extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class SX extends MR{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class oM extends MR{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class aM extends MR{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $C;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})($C||($C={}));class kX{constructor(e,{headers:n={},customFetch:r,region:i=$C.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=xX(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return wX(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:c,signal:d,timeout:h}=r;let f={},{region:p}=r;p||(p=this.region);const m=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let g;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=c):typeof c=="string"?(f["Content-Type"]="text/plain",g=c):typeof FormData<"u"&&c instanceof FormData?g=c:(f["Content-Type"]="application/json",g=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?g=JSON.stringify(c):g=c;let v=d;h&&(o=new AbortController,s=setTimeout(()=>o.abort(),h),d?(v=o.signal,d.addEventListener("abort",()=>o.abort())):v=o.signal);const y=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:g,signal:v}).catch(_=>{throw new SX(_)}),w=y.headers.get("x-relay-error");if(w&&w==="true")throw new oM(y);if(!y.ok)throw new aM(y);let b=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),k;return b==="application/json"?k=yield y.json():b==="application/octet-stream"||b==="application/pdf"?k=yield y.blob():b==="text/event-stream"?k=y:b==="multipart/form-data"?k=yield y.formData():k=yield y.text(),{data:k,error:null,response:y}}catch(a){return{data:null,error:a,response:a instanceof aM||a instanceof oM?a.context:void 0}}finally{s&&clearTimeout(s)}})}}var EX=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},AX=class{constructor(t){var e,n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,l=null,c=s.status,d=s.statusText;if(s.ok){var h,f;if(n.method!=="HEAD"){var p;const y=await s.text();y===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=y:a=JSON.parse(y))}const g=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),v=(f=s.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&v&&v.length>1&&(l=parseInt(v[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var m;const g=await s.text();try{o=JSON.parse(g),Array.isArray(o)&&s.status===404&&(a=[],o=null,c=200,d="OK")}catch{s.status===404&&g===""?(c=204,d="No Content"):o={message:g}}if(o&&n.isMaybeSingle&&(!(o==null||(m=o.details)===null||m===void 0)&&m.includes("0 rows"))&&(o=null,c=200,d="OK"),o&&n.shouldThrowOnError)throw new EX(o)}return{error:o,data:a,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="",l="",c="";const d=s==null?void 0:s.cause;if(d){var h,f,p,m;const y=(h=d==null?void 0:d.message)!==null&&h!==void 0?h:"",w=(f=d==null?void 0:d.code)!==null&&f!==void 0?f:"";a=`${(p=s==null?void 0:s.name)!==null&&p!==void 0?p:"FetchError"}: ${s==null?void 0:s.message}`,a+=`

Caused by: ${(m=d==null?void 0:d.name)!==null&&m!==void 0?m:"Error"}: ${y}`,w&&(a+=` (${w})`),d!=null&&d.stack&&(a+=`
${d.stack}`)}else{var g;a=(g=s==null?void 0:s.stack)!==null&&g!==void 0?g:""}const v=this.url.toString().length;return(s==null?void 0:s.name)==="AbortError"||(s==null?void 0:s.code)==="ABORT_ERR"?(c="",l="Request was aborted (timeout or manual cancellation)",v>this.urlLengthLimit&&(l+=`. Note: Your request URL is ${v} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((d==null?void 0:d.name)==="HeadersOverflowError"||(d==null?void 0:d.code)==="UND_ERR_HEADERS_OVERFLOW")&&(c="",l="HTTP headers exceeded server limits (typically 16KB)",v>this.urlLengthLimit&&(l+=`. Your request URL is ${v} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:a,hint:l,code:c},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},CX=class extends AX{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const lM=new RegExp("[,()]");var rf=class extends CX{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&lM.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&lM.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},_X=class{constructor(t,{headers:e={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new rf({method:i,url:a,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:s,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),n||o.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);s.searchParams.set("columns",l.join(","))}}return new rf({method:i,url:s,headers:o,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),i||l.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);a.searchParams.set("columns",d.join(","))}}return new rf({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new rf({method:r,url:i,headers:s,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new rf({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function iv(t){"@babel/helpers - typeof";return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iv(t)}function TX(t,e){if(iv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(iv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PX(t){var e=TX(t,"string");return iv(e)=="symbol"?e:e+""}function RX(t,e,n){return(e=PX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cM(Object(n),!0).forEach(function(r){RX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var IX=class Y${constructor(e,{headers:n={},schema:r,fetch:i,timeout:s,urlLengthLimit:o=8e3}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=o;const a=i??globalThis.fetch;s!==void 0&&s>0?this.fetch=(l,c)=>{const d=new AbortController,h=setTimeout(()=>d.abort(),s),f=c==null?void 0:c.signal;if(f){if(f.aborted)return clearTimeout(h),a(l,c);const p=()=>{clearTimeout(h),d.abort()};return f.addEventListener("abort",p,{once:!0}),a(l,yb(yb({},c),{},{signal:d.signal})).finally(()=>{clearTimeout(h),f.removeEventListener("abort",p)})}return a(l,yb(yb({},c),{},{signal:d.signal})).finally(()=>clearTimeout(h))}:this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _X(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new Y$(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;const d=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(d)),h=r&&Object.values(n).some(d);h?(a="POST",c=n):r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(a="POST",c=n);const f=new Headers(this.headers);return h?f.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&f.set("Prefer",`count=${s}`),new rf({method:a,url:l,headers:f,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class NX{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const DX="2.95.3",MX=`realtime-js/${DX}`,OX="1.0.0",Q$="2.0.0",uM=Q$,UC=1e4,LX=1e3,jX=100;var Dl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Dl||(Dl={}));var cn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(cn||(cn={}));var $s;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})($s||($s={}));var zC;(function(t){t.websocket="websocket"})(zC||(zC={}));var ju;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ju||(ju={}));class FX{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var i,s;const o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,l.length),m.setUint8(g++,a.length),m.setUint8(g++,o.length),m.setUint8(g++,c.length),m.setUint8(g++,h.length),m.setUint8(g++,n),Array.from(l,y=>m.setUint8(g++,y.charCodeAt(0))),Array.from(a,y=>m.setUint8(g++,y.charCodeAt(0))),Array.from(o,y=>m.setUint8(g++,y.charCodeAt(0))),Array.from(c,y=>m.setUint8(g++,y.charCodeAt(0))),Array.from(h,y=>m.setUint8(g++,y.charCodeAt(0)));var v=new Uint8Array(p.byteLength+r.byteLength);return v.set(new Uint8Array(p),0),v.set(new Uint8Array(r),p.byteLength),v.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+s));l=l+s;const h=r.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,m={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(m.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class J${constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ct;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ct||(ct={}));const dM=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=BX(o,t,e,i),s),{}):{}},BX=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?Z$(s,o):VC(o)},Z$=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return VX(e,n)}switch(t){case ct.bool:return $X(e);case ct.float4:case ct.float8:case ct.int2:case ct.int4:case ct.int8:case ct.numeric:case ct.oid:return UX(e);case ct.json:case ct.jsonb:return zX(e);case ct.timestamp:return HX(e);case ct.abstime:case ct.date:case ct.daterange:case ct.int4range:case ct.int8range:case ct.money:case ct.reltime:case ct.text:case ct.time:case ct.timestamptz:case ct.timetz:case ct.tsrange:case ct.tstzrange:return VC(e);default:return VC(e)}},VC=t=>t,$X=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},UX=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},zX=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},VX=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Z$(e,a))}return t},HX=t=>typeof t=="string"?t.replace(" ","T"):t,e3=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class yE{constructor(e,n,r={},i=UC){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hM;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(hM||(hM={}));class Ay{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ay.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Ay.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ay.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const h=s[c];if(h){const f=d.map(v=>v.presence_ref),p=h.map(v=>v.presence_ref),m=d.filter(v=>p.indexOf(v.presence_ref)<0),g=h.filter(v=>f.indexOf(v.presence_ref)<0);m.length>0&&(a[c]=m),g.length>0&&(l[c]=g)}else a[c]=d}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fM;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(fM||(fM={}));var Cy;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Cy||(Cy={}));var ia;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ia||(ia={}));class If{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=cn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new yE(this,$s.join,this.params,this.timeout),this.rejoinTimer=new J$(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=cn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=cn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this._on($s.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Ay(this),this.broadcastEndpointURL=e3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==cn.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Cy.PRESENCE]&&this.bindings[Cy.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(ia.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(ia.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(ia.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,y=[];for(let w=0;w<v;w++){const b=g[w],{filter:{event:k,schema:_,table:C,filter:P}}=b,R=p&&p[w];if(R&&R.event===k&&If.isFilterValueEqual(R.schema,_)&&If.isFilterValueEqual(R.table,C)&&If.isFilterValueEqual(R.filter,P))y.push(Object.assign(Object.assign({},b),{id:R.id}));else{this.unsubscribe(),this.state=cn.errored,e==null||e(ia.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(ia.SUBSCRIBED);return}}).receive("error",p=>{this.state=cn.errored,e==null||e(ia.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ia.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===cn.joined&&e===Cy.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=cn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($s.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new yE(this,$s.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=cn.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new yE(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>jX){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=$s;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,v;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(g=p.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var m,g,v,y,w,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const k=p.id,_=(m=p.filter)===null||m===void 0?void 0:m.event;return k&&((g=n.ids)===null||g===void 0?void 0:g.includes(k))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const k=(w=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return k==="*"||k===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:v,commit_timestamp:y,type:w,errors:b}=m;f=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:y,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===cn.closed}_isJoined(){return this.state===cn.joined}_isJoining(){return this.state===cn.joining}_isLeaving(){return this.state===cn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&If.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($s.close,{},e)}_onError(e){this._on($s.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=cn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=dM(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=dM(e.columns,e.old_record)),n}}const vE=()=>{},vb={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},WX=[1e3,2e3,5e3,1e4],GX=1e4,qX=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KX{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=UC,this.transport=null,this.heartbeatIntervalMs=vb.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vE,this.ref=0,this.reconnectTimer=null,this.vsn=uM,this.logger=vE,this.conn=null,this.sendBuffer=[],this.serializer=new FX,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${zC.websocket}`,this.httpEndpoint=e3(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=NX.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return n==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Dl.connecting:return ju.Connecting;case Dl.open:return ju.Open;case Dl.closing:return ju.Closing;default:return ju.Closed}}isConnected(){return this.connectionState()===ju.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new If(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(LX,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},vb.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",c)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Dl.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Dl.open||this.conn.readyState===Dl.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger($s.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([qX],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:MX};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push($s.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new J$(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vb.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,d,h,f,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:UC,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:vb.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:vE,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:uM,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:m=>WX[m-1]||GX,this.vsn){case OX:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(m,g)=>g(JSON.stringify(m)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(m,g)=>g(JSON.parse(m));break;case Q$:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var sv=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function XX(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function YX(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function QX(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){const a=XX(t.baseUrl,r,i),l=await YX(t.auth),c=await e(a,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...o},body:s?JSON.stringify(s):void 0}),d=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!c.ok){const p=h?f:void 0,m=p==null?void 0:p.error;throw new sv((m==null?void 0:m.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function wb(t){return t.join("")}var JX=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:wb(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${wb(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wb(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${wb(t.namespace)}`}),!0}catch(e){if(e instanceof sv&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof sv&&n.status===409)return;throw n}}};function Gh(t){return t.join("")}var ZX=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gh(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gh(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gh(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gh(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gh(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gh(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof sv&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof sv&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},eY=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=QX({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new JX(this.client,e),this.tableOps=new ZX(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},ek=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function tk(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var bb=class extends ek{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},t3=class extends ek{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const tY=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),nY=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},HC=t=>{if(Array.isArray(t))return t.map(n=>HC(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=HC(r)}),e},rY=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function ov(t){"@babel/helpers - typeof";return ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ov(t)}function iY(t,e){if(ov(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ov(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sY(t){var e=iY(t,"string");return ov(e)=="symbol"?e:e+""}function oY(t,e,n){return(e=sY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pM(Object(n),!0).forEach(function(r){oY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const mM=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},aY=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t,s=i.status||500;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";e(new bb(mM(o),s,a,r))}).catch(()=>{if(r==="vectors"){const o=s+"";e(new bb(i.statusText||`HTTP ${s} error`,s,o,r))}else{const o=s+"";e(new bb(i.statusText||`HTTP ${s} error`,s,o,r))}});else{const o=s+"";e(new bb(i.statusText||`HTTP ${s} error`,s,o,r))}}else e(new t3(mM(t),t,r))},lY=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?fe(fe({},i),n):(nY(r)?(i.headers=fe({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),fe(fe({},i),n))};async function Pg(t,e,n,r,i,s,o){return new Promise((a,l)=>{t(n,lY(e,r,i,s)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;if(o==="vectors"){const d=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!d||!d.includes("application/json"))return{}}return c.json()}).then(c=>a(c)).catch(c=>aY(c,l,r,o))})}function n3(t="storage"){return{get:async(e,n,r,i)=>Pg(e,"GET",n,r,i,void 0,t),post:async(e,n,r,i,s)=>Pg(e,"POST",n,i,s,r,t),put:async(e,n,r,i,s)=>Pg(e,"PUT",n,i,s,r,t),head:async(e,n,r,i)=>Pg(e,"HEAD",n,fe(fe({},r),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,n,r,i,s)=>Pg(e,"DELETE",n,i,s,r,t)}}const cY=n3("storage"),{get:av,post:Es,put:WC,head:uY,remove:OR}=cY,Si=n3("vectors");var dg=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=tY(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(tk(n))return{data:null,error:n};throw n}}},dY=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(tk(e))return{data:null,error:e};throw e}}};let r3;r3=Symbol.toStringTag;var hY=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[r3]="BlobDownloadBuilder",this.promise=null}asStream(){return new dY(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(tk(e))return{data:null,error:e};throw e}}};const fY={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gM={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var pY=class extends dg{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var i=this;return i.handleOperation(async()=>{let s;const o=fe(fe({},gM),r);let a=fe(fe({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=fe(fe({},a),r.headers));const c=i._removeEmptyFolders(e),d=i._getFinalPath(c),h=await(t=="PUT"?WC:Es)(i.fetch,`${i.url}/object/${d}`,s,fe({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:c,id:h.Id,fullPath:h.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",e),i.handleOperation(async()=>{let l;const c=fe({upsert:gM.upsert},r),d=fe(fe({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{path:s,fullPath:(await WC(i.fetch,a.toString(),l,{headers:d})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const i=fe({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await Es(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(n.url+s.url),a=o.searchParams.get("token");if(!a)throw new ek("No token returned by API");return{signedUrl:o.toString(),path:t,token:a}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await Es(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await Es(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t),s=await Es(r.fetch,`${r.url}/object/sign/${i}`,fe({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const i=await Es(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(o=>fe(fe({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null}))})}download(t,e,n){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=i?`?${i}`:"",o=this._getFinalPath(t),a=()=>av(this.fetch,`${this.url}/${r}/${o}${s}`,{headers:this.headers,noResolveJson:!0},n);return new hY(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>HC(await av(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await uY(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(tk(r)&&r instanceof t3){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${a}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await OR(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const i=fe(fe(fe({},fY),e),{},{prefix:t||""});return await Es(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=fe({},t);return await Es(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const mY="2.95.3",Dw={"X-Client-Info":`storage-js/${mY}`};var gY=class extends dg{constructor(t,e={},n,r){const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const s=i.href.replace(/\/$/,""),o=fe(fe({},Dw),e);super(s,o,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await av(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await av(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await Es(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await WC(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await Es(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await OR(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},yY=class extends dg{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=fe(fe({},Dw),e);super(r,i,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Es(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await av(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await OR(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!rY(t))throw new ek("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new eY({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}},vY=class extends dg{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=fe(fe({},Dw),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await Si.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await Si.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await Si.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await Si.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},wY=class extends dg{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=fe(fe({},Dw),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Si.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await Si.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await Si.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await Si.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Si.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},bY=class extends dg{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=fe(fe({},Dw),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Si.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Si.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await Si.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Si.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},xY=class extends bY{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new SY(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},SY=class extends vY{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new kY(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},kY=class extends wY{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},EY=class extends gY{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new pY(this.url,this.headers,t,this.fetch)}get vectors(){return new xY(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new yY(this.url+"/iceberg",this.headers,this.fetch)}};const i3="2.95.3",sf=30*1e3,GC=3,wE=GC*sf,AY="http://localhost:9999",CY="supabase.auth.token",_Y={"X-Client-Info":`gotrue-js/${i3}`},qC="X-Supabase-Api-Version",s3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},TY=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,PY=10*60*1e3;class lv extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ce(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class RY extends lv{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function IY(t){return ce(t)&&t.name==="AuthApiError"}class Fu extends lv{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class pl extends lv{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Xr extends pl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bE(t){return ce(t)&&t.name==="AuthSessionMissingError"}class qh extends pl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xb extends pl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Sb extends pl{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function NY(t){return ce(t)&&t.name==="AuthImplicitGrantRedirectError"}class yM extends pl{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class DY extends pl{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class KC extends pl{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function xE(t){return ce(t)&&t.name==="AuthRetryableFetchError"}class vM extends pl{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class XC extends pl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const N1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wM=` 	
\r=`.split(""),MY=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<wM.length;e+=1)t[wM[e].charCodeAt(0)]=-2;for(let e=0;e<N1.length;e+=1)t[N1[e].charCodeAt(0)]=e;return t})();function bM(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(N1[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(N1[r]),e.queuedBits-=6}}function o3(t,e,n){const r=MY[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function xM(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{jY(o,r,n)};for(let o=0;o<t.length;o+=1)o3(t.charCodeAt(o),i,s);return e.join("")}function OY(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function LY(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}OY(r,e)}}function jY(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Qf(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)o3(t.charCodeAt(i),n,r);return new Uint8Array(e)}function FY(t){const e=[];return LY(t,n=>e.push(n)),new Uint8Array(e)}function Gu(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>bM(i,n,r)),bM(null,n,r),e.join("")}function BY(t){return Math.round(Date.now()/1e3)+t}function $Y(){return Symbol("auth-callback")}const Rn=()=>typeof window<"u"&&typeof document<"u",Cu={tested:!1,writable:!1},a3=()=>{if(!Rn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Cu.tested)return Cu.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Cu.tested=!0,Cu.writable=!0}catch{Cu.tested=!0,Cu.writable=!1}return Cu.writable};function UY(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const l3=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),zY=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",of=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},_u=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Pn=async(t,e)=>{await t.removeItem(e)};class nk{constructor(){this.promise=new nk.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}nk.promiseConstructor=Promise;function kb(t){const e=t.split(".");if(e.length!==3)throw new XC("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!TY.test(e[r]))throw new XC("JWT not in base64url format");return{header:JSON.parse(xM(e[0])),payload:JSON.parse(xM(e[1])),signature:Qf(e[2]),raw:{header:e[0],payload:e[1]}}}async function VY(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function HY(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function WY(t){return("0"+t.toString(16)).substr(-2)}function GY(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,WY).join("")}async function qY(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function KY(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await qY(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kh(t,e,n=!1){const r=GY();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await of(t,`${e}-code-verifier`,i);const s=await KY(r);return[s,r===s?"plain":"s256"]}const XY=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function YY(t){const e=t.headers.get(qC);if(!e||!e.match(XY))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function QY(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function JY(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ZY=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xh(t){if(!ZY.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function SE(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function eQ(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function SM(t){return JSON.parse(JSON.stringify(t))}const Nu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),tQ=[502,503,504];async function kM(t){var e;if(!zY(t))throw new KC(Nu(t),0);if(tQ.includes(t.status))throw new KC(Nu(t),t.status);let n;try{n=await t.json()}catch(s){throw new Fu(Nu(s),s)}let r;const i=YY(t);if(i&&i.getTime()>=s3["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new vM(Nu(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Xr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new vM(Nu(n),t.status,n.weak_password.reasons);throw new RY(Nu(n),t.status||500,r)}const nQ=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function he(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[qC]||(s[qC]=s3["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await rQ(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function rQ(t,e,n,r,i,s){const o=nQ(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new KC(Nu(l),0)}if(a.ok||await kM(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await kM(l)}}function ws(t){var e;let n=null;oQ(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=BY(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function EM(t){const e=ws(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ll(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function iQ(t){return{data:t,error:null}}function sQ(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=ug(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function AM(t){return t}function oQ(t){return t.access_token&&t.refresh_token&&t.expires_in}const kE=["global","local","others"];class aQ{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=l3(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=kE[0]){if(kE.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kE.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ll})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=ug(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:sQ,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ce(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ll})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:AM});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);c[`${v}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(ce(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Xh(e);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ll})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Xh(e);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ll})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Xh(e);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ll})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Xh(e.userId);try{const{data:n,error:r}=await he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Xh(e.userId),Xh(e.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:AM});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);c[`${v}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(ce(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await he(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}}function CM(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Yh={debug:!!(globalThis&&a3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class c3 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class lQ extends c3{}async function cQ(t,e,n){Yh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Yh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Yh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Yh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Yh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new lQ(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Yh.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function uQ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function u3(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function dQ(t){return parseInt(t,16)}function hQ(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function fQ(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=u3(t.address),m=d?`${d}://${r}`:r,g=t.statement?`${t.statement}
`:"",v=`${m} wants you to sign in with your Ethereum account:
${p}

${g}`;let y=`URI: ${h}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let w=`
Resources:`;for(const b of c){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);w+=`
- ${b}`}y+=w}return`${v}
${y}`}class rn extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class D1 extends rn{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function pQ({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new rn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new rn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new rn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new rn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new rn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new rn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new rn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(d3(o)){if(s.rp.id!==o)return new rn({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new rn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new rn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new rn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new rn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function mQ({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new rn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(d3(r)){if(n.rpId!==r)return new rn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new rn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new rn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new rn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class gQ{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const yQ=new gQ;function vQ(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=ug(t,["challenge","user","excludeCredentials"]),s=Qf(e).buffer,o=Object.assign(Object.assign({},n),{id:Qf(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Qf(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function wQ(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=ug(t,["challenge","allowCredentials"]),i=Qf(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Qf(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function bQ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Gu(new Uint8Array(t.response.attestationObject)),clientDataJSON:Gu(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function xQ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Gu(new Uint8Array(i.authenticatorData)),clientDataJSON:Gu(new Uint8Array(i.clientDataJSON)),signature:Gu(new Uint8Array(i.signature)),userHandle:i.userHandle?Gu(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function d3(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function _M(){var t,e;return!!(Rn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function SQ(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new D1("Browser returned unexpected credential type",e)}:{data:null,error:new D1("Empty credential response",e)}}catch(e){return{data:null,error:pQ({error:e,options:t})}}}async function kQ(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new D1("Browser returned unexpected credential type",e)}:{data:null,error:new D1("Empty credential response",e)}}catch(e){return{data:null,error:mQ({error:e,options:t})}}}const EQ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},AQ={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function M1(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=M1(a,o):r[s]=M1(o)}else r[s]=o}return r}function CQ(t,e){return M1(EQ,t,e||{})}function _Q(t,e){return M1(AQ,t,e||{})}class TQ{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){var o;try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:l};const c=i??yQ.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;if(!d.name){const h=r;if(h)d.name=`${d.id}:${h}`;else{const p=(await this.client.getUser()).data.user,m=((o=p==null?void 0:p.user_metadata)===null||o===void 0?void 0:o.name)||(p==null?void 0:p.email)||(p==null?void 0:p.id)||"User";d.name=`${d.id}:${m}`}}d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=CQ(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:h,error:f}=await SQ({publicKey:d,signal:c});return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const d=_Q(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:h,error:f}=await kQ(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:c}));return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(a){return ce(a)?{data:null,error:a}:{data:null,error:new Fu("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new lv("rpId is required for WebAuthn authentication")};try{if(!_M())return{data:null,error:new Fu("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return ce(o)?{data:null,error:o}:{data:null,error:new Fu("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new lv("rpId is required for WebAuthn registration")};try{if(!_M())return{data:null,error:new Fu("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return ce(o)?{data:null,error:o}:{data:null,error:new Fu("Unexpected error in register",o)}}}}uQ();const PQ={url:AY,storageKey:CY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_Y,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function TM(t,e,n){return await n()}const Qh={};class cv{get jwks(){var e,n;return(n=(e=Qh[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Qh[this.storageKey]=Object.assign(Object.assign({},Qh[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Qh[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Qh[this.storageKey]=Object.assign(Object.assign({},Qh[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},PQ),e);if(this.storageKey=s.storageKey,this.instanceID=(n=cv.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,cv.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Rn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new aQ({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=l3(s.fetch),this.lock=s.lock||TM,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Rn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=cQ:this.lock=TM,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new TQ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:a3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=CM(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=CM(this.memoryStorage)),Rn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${i3}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Rn()&&(n=UY(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Rn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),NY(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ce(n)?this._returnResult({error:n}):this._returnResult({error:new Fu("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ws}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Kh(this.storage,this.storageKey)),s=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:ws})}else if("phone"in e){const{phone:d,password:h,options:f}=e;s=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ws})}else throw new xb("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return await Pn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await Pn(this.storage,`${this.storageKey}-code-verifier`),ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:EM})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:EM})}else throw new xb("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new qh;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,c,d,h,f;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:g,wallet:v,statement:y,options:w}=e;let b;if(Rn())if(typeof v=="object")b=v;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")b=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const k=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),_=await b.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=u3(_[0]);let P=(r=w==null?void 0:w.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const M=await b.request({method:"eth_chainId"});P=dQ(M)}const R={domain:k.host,address:C,statement:y,uri:k.href,version:"1",chainId:P,nonce:(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=fQ(R),m=await b.request({method:"personal_sign",params:[hQ(p),C]})}try{const{data:g,error:v}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ws});if(v)throw v;if(!g||!g.session||!g.user){const y=new qh;return this._returnResult({data:{user:null,session:null},error:y})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:v})}catch(g){if(ce(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var n,r,i,s,o,a,l,c,d,h,f,p;let m,g;if("message"in e)m=e.message,g=e.signature;else{const{chain:v,wallet:y,statement:w,options:b}=e;let k;if(Rn())if(typeof y=="object")k=y;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))k=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=y}const _=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const C=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),w?{statement:w}:null));let P;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")P=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)P=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)m=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),g=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${_.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(i=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const C=await k.signMessage(new TextEncoder().encode(m),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:v,error:y}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Gu(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ws});if(y)throw y;if(!v||!v.session||!v.user){const w=new qh;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:y})}catch(v){if(ce(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const n=await _u(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new DY;const{data:s,error:o}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ws});if(await Pn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new qh;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await Pn(this.storage,`${this.storageKey}-code-verifier`),ce(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ws}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new qh;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Kh(this.storage,this.storageKey));const{error:h}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new xb("You must provide either an email or phone number.")}catch(a){if(await Pn(this.storage,`${this.storageKey}-code-verifier`),ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ws});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(ce(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Kh(this.storage,this.storageKey));const c=await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:iQ});return!((s=c.data)===null||s===void 0)&&s.url&&Rn()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await Pn(this.storage,`${this.storageKey}-code-verifier`),ce(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Xr;const{error:i}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(ce(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await he(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await he(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new xb("You must provide either an email or phone number and a type")}catch(n){if(ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await _u(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<wE:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await _u(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=SE()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=eQ(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ll}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xr}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ll})})}catch(n){if(ce(n))return bE(n)&&(await this._removeSession(),await Pn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Xr;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Kh(this.storage,this.storageKey));const{data:c,error:d}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ll});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Pn(this.storage,`${this.storageKey}-code-verifier`),ce(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xr;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=kb(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(ce(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Xr;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Rn())throw new Sb("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Sb(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new yM("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sb("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yM("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new Sb("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=sf&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:g,error:v}=await this._getUser(s);if(v)throw v;const y={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(r){if(ce(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await _u(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s&&!bE(s))return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(IY(a)&&(a.status===404||a.status===401||a.status===403)||bE(a)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Pn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=$Y(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Kh(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Pn(this.storage,`${this.storageKey}-code-verifier`),ce(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,d;const{data:h,error:f}=s;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Rn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ce(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:d}=e,h=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ws}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new qh}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(i){if(await Pn(this.storage,`${this.storageKey}-code-verifier`),ce(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await HY(async i=>(i>0&&await VY(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ws})),(i,s)=>{const o=200*Math.pow(2,i);return s&&xE(s)&&Date.now()+o-r<sf})}catch(r){if(this._debug(n,"error",r),ce(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Rn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await _u(this.storage,this.storageKey);if(i&&this.userStorage){let o=await _u(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await of(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:SE()}else if(i&&!i.user&&!i.user){const o=await _u(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Pn(this.storage,this.storageKey+"-user"),await of(this.storage,this.storageKey,i)):i.user=SE()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<wE;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${wE}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),xE(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Xr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new nk;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Xr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),ce(s)){const o={data:null,error:s};return xE(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Pn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await of(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=SM(i);await of(this.storage,this.storageKey,s)}else{const i=SM(n);await of(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Pn(this.storage,this.storageKey),await Pn(this.storage,this.storageKey+"-code-verifier"),await Pn(this.storage,this.storageKey+"-user"),this.userStorage&&await Pn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),sf);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/sf);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${sf}ms, refresh threshold is ${GC} ticks`),i<=GC&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof c3)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Kh(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await he(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?bQ(e.webauthn.credential_response):xQ(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:vQ(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:wQ(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,i,s;if(e)try{const{payload:p}=kb(e);let m=null;p.aal&&(m=p.aal);let g=m;const{data:{user:v},error:y}=await this.getUser(e);if(y)return this._returnResult({data:null,error:y});((r=(n=v==null?void 0:v.factors)===null||n===void 0?void 0:n.filter(k=>k.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(g="aal2");const b=p.amr||[];return{data:{currentLevel:m,nextLevel:g,currentAuthenticationMethods:b},error:null}}catch(p){if(ce(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=kb(o.access_token);let c=null;l.aal&&(c=l.aal);let d=c;((s=(i=o.user.factors)===null||i===void 0?void 0:i.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await he(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Xr})})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Xr});const o=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Rn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Xr});const o=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Rn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await he(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Xr})})}catch(e){if(ce(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await he(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Xr})})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+PY>i)return r;const{data:s,error:o}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});r=p.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=kb(r);n!=null&&n.allowExpired||QY(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:s,header:i,signature:o},error:null}}const d=JY(i.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,FY(`${a}.${l}`)))throw new XC("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}}cv.nextInstanceID={};const RQ=cv,IQ="2.95.3";let Gg="";typeof Deno<"u"?Gg="deno":typeof document<"u"?Gg="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gg="react-native":Gg="node";const NQ={"X-Client-Info":`supabase-js-${Gg}/${IQ}`},DQ={headers:NQ},MQ={schema:"public"},OQ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},LQ={};function uv(t){"@babel/helpers - typeof";return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uv(t)}function jQ(t,e){if(uv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FQ(t){var e=jQ(t,"string");return uv(e)=="symbol"?e:e+""}function BQ(t,e,n){return(e=FQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ut(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PM(Object(n),!0).forEach(function(r){BQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const $Q=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),UQ=()=>Headers,zQ=(t,e,n)=>{const r=$Q(n),i=UQ();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Ut(Ut({},o),{},{headers:c}))}};function VQ(t){return t.endsWith("/")?t:t+"/"}function HQ(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:d,global:h}=e,f={db:Ut(Ut({},l),i),auth:Ut(Ut({},c),s),realtime:Ut(Ut({},d),o),storage:{},global:Ut(Ut(Ut({},h),a),{},{headers:Ut(Ut({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function WQ(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(VQ(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var GQ=class extends RQ{constructor(t){super(t)}},qQ=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=WQ(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:MQ,realtime:LQ,auth:Ut(Ut({},OQ),{},{storageKey:o}),global:DQ},l=HQ(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=zQ(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Ut({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new IX(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new EY(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new kX(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:l,throwOnError:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new GQ({url:this.authUrl.href,headers:Ut(Ut({},f),d),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new KX(this.realtimeUrl.href,Ut(Ut({},t),{},{params:Ut(Ut({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const KQ=(t,e,n)=>new qQ(t,e,n);function XQ(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}XQ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const YQ="",QQ="";throw new Error("Missing VITE_SUPABASE_URL or VITE_SUPABASE_ANON_KEY env vars");const Ce=KQ(YQ,QQ),h3=E.createContext(void 0);function JQ({children:t}){const[e,n]=E.useState(null),[r,i]=E.useState(null),[s,o]=E.useState(null),[a,l]=E.useState(!0);E.useEffect(()=>{Ce.auth.getSession().then(({data:{session:m}})=>{o(m),n((m==null?void 0:m.user)??null),m!=null&&m.user?c(m.user.id):l(!1)});const{data:{subscription:p}}=Ce.auth.onAuthStateChange((m,g)=>{o(g),n((g==null?void 0:g.user)??null),g!=null&&g.user?c(g.user.id):(i(null),l(!1))});return()=>p.unsubscribe()},[]);async function c(p){const{data:m}=await Ce.from("profiles").select("*").eq("id",p).single();i(m),l(!1)}async function d(p,m){const{error:g}=await Ce.auth.signInWithPassword({email:p,password:m});return{error:g}}async function h(p,m,g){const{error:v}=await Ce.auth.signUp({email:p,password:m,options:{data:{full_name:g}}});return{error:v}}async function f(){await Ce.auth.signOut()}return x.jsx(h3.Provider,{value:{user:e,profile:r,session:s,loading:a,signIn:d,signUp:h,signOut:f},children:t})}function rk(){const t=E.useContext(h3);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const LR=E.createContext({});function jR(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const f3=typeof window<"u",p3=f3?E.useLayoutEffect:E.useEffect,ik=E.createContext(null);function FR(t,e){t.indexOf(e)===-1&&t.push(e)}function O1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Vo=(t,e,n)=>n>e?e:n<t?t:n;let sk=()=>{},Xm=()=>{};const ll={},m3=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function g3(t){return typeof t=="object"&&t!==null}const y3=t=>/^0[^.\s]+$/u.test(t);function BR(t){let e;return()=>(e===void 0&&(e=t()),e)}const ss=t=>t,ZQ=(t,e)=>n=>e(t(n)),Mw=(...t)=>t.reduce(ZQ),dv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class $R{constructor(){this.subscriptions=[]}add(e){return FR(this.subscriptions,e),()=>O1(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const os=t=>t*1e3,rs=t=>t/1e3;function v3(t,e){return e?t*(1e3/e):0}const w3=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,eJ=1e-7,tJ=12;function nJ(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=w3(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>eJ&&++a<tJ);return o}function Ow(t,e,n,r){if(t===e&&n===r)return ss;const i=s=>nJ(s,0,1,t,n);return s=>s===0||s===1?s:w3(i(s),e,r)}const b3=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,x3=t=>e=>1-t(1-e),S3=Ow(.33,1.53,.69,.99),UR=x3(S3),k3=b3(UR),E3=t=>(t*=2)<1?.5*UR(t):.5*(2-Math.pow(2,-10*(t-1))),zR=t=>1-Math.sin(Math.acos(t)),A3=x3(zR),C3=b3(zR),rJ=Ow(.42,0,1,1),iJ=Ow(0,0,.58,1),_3=Ow(.42,0,.58,1),sJ=t=>Array.isArray(t)&&typeof t[0]!="number",T3=t=>Array.isArray(t)&&typeof t[0]=="number",RM={linear:ss,easeIn:rJ,easeInOut:_3,easeOut:iJ,circIn:zR,circInOut:C3,circOut:A3,backIn:UR,backInOut:k3,backOut:S3,anticipate:E3},oJ=t=>typeof t=="string",IM=t=>{if(T3(t)){Xm(t.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[e,n,r,i]=t;return Ow(e,n,r,i)}else if(oJ(t))return Xm(RM[t]!==void 0,`Invalid easing type '${t}'`,"invalid-easing-type"),RM[t];return t},Eb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],NM={value:null,addProjectionMetrics:null};function aJ(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(h){o.has(h)&&(d.schedule(h),t()),l++,h(a)}const d={schedule:(h,f=!1,p=!1)=>{const g=p&&i?n:r;return f&&o.add(h),g.has(h)||g.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(a=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),e&&NM.value&&NM.value.frameloop[e].push(l),l=0,n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const lJ=40;function P3(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Eb.reduce((b,k)=>(b[k]=aJ(s,e?k:void 0),b),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:h,preRender:f,render:p,postRender:m}=o,g=()=>{const b=ll.useManualTiming?i.timestamp:performance.now();n=!1,ll.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(b-i.timestamp,lJ),1)),i.timestamp=b,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),d.process(i),h.process(i),f.process(i),p.process(i),m.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(g))},v=()=>{n=!0,r=!0,i.isProcessing||t(g)};return{schedule:Eb.reduce((b,k)=>{const _=o[k];return b[k]=(C,P=!1,R=!1)=>(n||v(),_.schedule(C,P,R)),b},{}),cancel:b=>{for(let k=0;k<Eb.length;k++)o[Eb[k]].cancel(b)},state:i,steps:o}}const{schedule:mt,cancel:au,state:Fn,steps:EE}=P3(typeof requestAnimationFrame<"u"?requestAnimationFrame:ss,!0);let lx;function cJ(){lx=void 0}const yr={now:()=>(lx===void 0&&yr.set(Fn.isProcessing||ll.useManualTiming?Fn.timestamp:performance.now()),lx),set:t=>{lx=t,queueMicrotask(cJ)}},R3=t=>e=>typeof e=="string"&&e.startsWith(t),I3=R3("--"),uJ=R3("var(--"),VR=t=>uJ(t)?dJ.test(t.split("/*")[0].trim()):!1,dJ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function DM(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const hg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},hv={...hg,transform:t=>Vo(0,1,t)},Ab={...hg,default:1},_y=t=>Math.round(t*1e5)/1e5,HR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hJ(t){return t==null}const fJ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,WR=(t,e)=>n=>!!(typeof n=="string"&&fJ.test(n)&&n.startsWith(t)||e&&!hJ(n)&&Object.prototype.hasOwnProperty.call(n,e)),N3=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(HR);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},pJ=t=>Vo(0,255,t),AE={...hg,transform:t=>Math.round(pJ(t))},qu={test:WR("rgb","red"),parse:N3("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+AE.transform(t)+", "+AE.transform(e)+", "+AE.transform(n)+", "+_y(hv.transform(r))+")"};function mJ(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const YC={test:WR("#"),parse:mJ,transform:qu.transform},Lw=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_l=Lw("deg"),$o=Lw("%"),ae=Lw("px"),gJ=Lw("vh"),yJ=Lw("vw"),MM={...$o,parse:t=>$o.parse(t)/100,transform:t=>$o.transform(t*100)},Nf={test:WR("hsl","hue"),parse:N3("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+$o.transform(_y(e))+", "+$o.transform(_y(n))+", "+_y(hv.transform(r))+")"},sn={test:t=>qu.test(t)||YC.test(t)||Nf.test(t),parse:t=>qu.test(t)?qu.parse(t):Nf.test(t)?Nf.parse(t):YC.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?qu.transform(t):Nf.transform(t),getAnimatableNone:t=>{const e=sn.parse(t);return e.alpha=0,sn.transform(e)}},vJ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wJ(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(HR))==null?void 0:e.length)||0)+(((n=t.match(vJ))==null?void 0:n.length)||0)>0}const D3="number",M3="color",bJ="var",xJ="var(",OM="${}",SJ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(SJ,l=>(sn.test(l)?(r.color.push(s),i.push(M3),n.push(sn.parse(l))):l.startsWith(xJ)?(r.var.push(s),i.push(bJ),n.push(l)):(r.number.push(s),i.push(D3),n.push(parseFloat(l))),++s,OM)).split(OM);return{values:n,split:a,indexes:r,types:i}}function O3(t){return fv(t).values}function L3(t){const{split:e,types:n}=fv(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===D3?s+=_y(i[o]):a===M3?s+=sn.transform(i[o]):s+=i[o]}return s}}const kJ=t=>typeof t=="number"?0:sn.test(t)?sn.getAnimatableNone(t):t;function EJ(t){const e=O3(t);return L3(t)(e.map(kJ))}const lu={test:wJ,parse:O3,createTransformer:L3,getAnimatableNone:EJ};function CE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function AJ({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=CE(l,a,t+1/3),s=CE(l,a,t),o=CE(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function L1(t,e){return n=>n>0?e:t}const Nt=(t,e,n)=>t+(e-t)*n,_E=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},CJ=[YC,qu,Nf],_J=t=>CJ.find(e=>e.test(t));function LM(t){const e=_J(t);if(sk(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!e)return!1;let n=e.parse(t);return e===Nf&&(n=AJ(n)),n}const jM=(t,e)=>{const n=LM(t),r=LM(e);if(!n||!r)return L1(t,e);const i={...n};return s=>(i.red=_E(n.red,r.red,s),i.green=_E(n.green,r.green,s),i.blue=_E(n.blue,r.blue,s),i.alpha=Nt(n.alpha,r.alpha,s),qu.transform(i))},QC=new Set(["none","hidden"]);function TJ(t,e){return QC.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function PJ(t,e){return n=>Nt(t,e,n)}function GR(t){return typeof t=="number"?PJ:typeof t=="string"?VR(t)?L1:sn.test(t)?jM:NJ:Array.isArray(t)?j3:typeof t=="object"?sn.test(t)?jM:RJ:L1}function j3(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>GR(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function RJ(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=GR(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function IJ(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const NJ=(t,e)=>{const n=lu.createTransformer(e),r=fv(t),i=fv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?QC.has(t)&&!i.values.length||QC.has(e)&&!r.values.length?TJ(t,e):Mw(j3(IJ(r,i),i.values),n):(sk(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),L1(t,e))};function F3(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Nt(t,e,n):GR(t)(t,e)}const DJ=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>mt.update(e,n),stop:()=>au(e),now:()=>Fn.isProcessing?Fn.timestamp:yr.now()}},B3=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},j1=2e4;function qR(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<j1;)e+=n,r=t.next(e);return e>=j1?1/0:e}function MJ(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(qR(r),j1);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:rs(i)}}const OJ=5;function $3(t,e,n){const r=Math.max(e-OJ,0);return v3(n-t(r),e-r)}const Rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},TE=.001;function LJ({duration:t=Rt.duration,bounce:e=Rt.bounce,velocity:n=Rt.velocity,mass:r=Rt.mass}){let i,s;sk(t<=os(Rt.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-e;o=Vo(Rt.minDamping,Rt.maxDamping,o),t=Vo(Rt.minDuration,Rt.maxDuration,rs(t)),o<1?(i=c=>{const d=c*o,h=d*t,f=d-n,p=JC(c,o),m=Math.exp(-h);return TE-f/p*m},s=c=>{const h=c*o*t,f=h*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,m=Math.exp(-h),g=JC(Math.pow(c,2),o);return(-i(c)+TE>0?-1:1)*((f-p)*m)/g}):(i=c=>{const d=Math.exp(-c*t),h=(c-n)*t+1;return-TE+d*h},s=c=>{const d=Math.exp(-c*t),h=(n-c)*(t*t);return d*h});const a=5/t,l=FJ(i,s,a);if(t=os(t),isNaN(l))return{stiffness:Rt.stiffness,damping:Rt.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const jJ=12;function FJ(t,e,n){let r=n;for(let i=1;i<jJ;i++)r=r-t(r)/e(r);return r}function JC(t,e){return t*Math.sqrt(1-e*e)}const BJ=["duration","bounce"],$J=["stiffness","damping","mass"];function FM(t,e){return e.some(n=>t[n]!==void 0)}function UJ(t){let e={velocity:Rt.velocity,stiffness:Rt.stiffness,damping:Rt.damping,mass:Rt.mass,isResolvedFromDuration:!1,...t};if(!FM(t,$J)&&FM(t,BJ))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Vo(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Rt.mass,stiffness:i,damping:s}}else{const n=LJ(t);e={...e,...n,mass:Rt.mass},e.isResolvedFromDuration=!0}return e}function F1(t=Rt.visualDuration,e=Rt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=UJ({...n,velocity:-rs(n.velocity||0)}),m=f||0,g=c/(2*Math.sqrt(l*d)),v=o-s,y=rs(Math.sqrt(l/d)),w=Math.abs(v)<5;r||(r=w?Rt.restSpeed.granular:Rt.restSpeed.default),i||(i=w?Rt.restDelta.granular:Rt.restDelta.default);let b;if(g<1){const _=JC(y,g);b=C=>{const P=Math.exp(-g*y*C);return o-P*((m+g*y*v)/_*Math.sin(_*C)+v*Math.cos(_*C))}}else if(g===1)b=_=>o-Math.exp(-y*_)*(v+(m+y*v)*_);else{const _=y*Math.sqrt(g*g-1);b=C=>{const P=Math.exp(-g*y*C),R=Math.min(_*C,300);return o-P*((m+g*y*v)*Math.sinh(R)+_*v*Math.cosh(R))/_}}const k={calculatedDuration:p&&h||null,next:_=>{const C=b(_);if(p)a.done=_>=h;else{let P=_===0?m:0;g<1&&(P=_===0?os(m):$3(b,_,C));const R=Math.abs(P)<=r,M=Math.abs(o-C)<=i;a.done=R&&M}return a.value=a.done?o:C,a},toString:()=>{const _=Math.min(qR(k),j1),C=B3(P=>k.next(_*P).value,_,30);return _+"ms "+C},toTransition:()=>{}};return k}F1.applyToOptions=t=>{const e=MJ(t,100,F1);return t.ease=e.ease,t.duration=os(e.duration),t.type="keyframes",t};function ZC({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},p=R=>a!==void 0&&R<a||l!==void 0&&R>l,m=R=>a===void 0?l:l===void 0||Math.abs(a-R)<Math.abs(l-R)?a:l;let g=n*e;const v=h+g,y=o===void 0?v:o(v);y!==v&&(g=y-h);const w=R=>-g*Math.exp(-R/r),b=R=>y+w(R),k=R=>{const M=w(R),I=b(R);f.done=Math.abs(M)<=c,f.value=f.done?y:I};let _,C;const P=R=>{p(f.value)&&(_=R,C=F1({keyframes:[f.value,m(f.value)],velocity:$3(b,R,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:d}))};return P(0),{calculatedDuration:null,next:R=>{let M=!1;return!C&&_===void 0&&(M=!0,k(R),P(R)),_!==void 0&&R>=_?C.next(R-_):(!M&&k(R),f)}}}function zJ(t,e,n){const r=[],i=n||ll.mix||F3,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ss:e;a=Mw(l,a)}r.push(a)}return r}function VJ(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Xm(s===e.length,"Both input and output ranges must be the same length","range-length"),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=zJ(e,r,i),l=a.length,c=d=>{if(o&&d<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=dv(t[h],t[h+1],d);return a[h](f)};return n?d=>c(Vo(t[0],t[s-1],d)):c}function HJ(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=dv(0,e,r);t.push(Nt(n,1,i))}}function WJ(t){const e=[0];return HJ(e,t.length-1),e}function GJ(t,e){return t.map(n=>n*e)}function qJ(t,e){return t.map(()=>e||_3).splice(0,t.length-1)}function Ty({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=sJ(r)?r.map(IM):IM(r),s={done:!1,value:e[0]},o=GJ(n&&n.length===e.length?n:WJ(e),t),a=VJ(o,e,{ease:Array.isArray(i)?i:qJ(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const KJ=t=>t!==null;function KR(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(KJ),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const XJ={decay:ZC,inertia:ZC,tween:Ty,keyframes:Ty,spring:F1};function U3(t){typeof t.type=="string"&&(t.type=XJ[t.type])}class XR{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const YJ=t=>t/100;class YR extends XR{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==yr.now()&&this.tick(yr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;U3(e);const{type:n=Ty,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Ty;l!==Ty&&typeof a[0]!="number"&&(this.mixKeyframes=Mw(YJ,F3(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=qR(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:p,type:m,onUpdate:g,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const y=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?y<0:y>i;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let b=this.currentTime,k=r;if(h){const R=Math.min(this.currentTime,i)/a;let M=Math.floor(R),I=R%1;!I&&R>=1&&(I=1),I===1&&M--,M=Math.min(M,h+1),!!(M%2)&&(f==="reverse"?(I=1-I,p&&(I-=p/a)):f==="mirror"&&(k=o)),b=Vo(0,1,I)*a}const _=w?{done:!1,value:d[0]}:k.next(b);s&&(_.value=s(_.value));let{done:C}=_;!w&&l!==null&&(C=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return P&&m!==ZC&&(_.value=KR(d,this.options,v,this.speed)),g&&g(_.value),P&&this.finish(),_}then(e,n){return this.finished.then(e,n)}get duration(){return rs(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+rs(e)}get time(){return rs(this.currentTime)}set time(e){var n;e=os(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(yr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=rs(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=DJ,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(yr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function QJ(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ku=t=>t*180/Math.PI,e_=t=>{const e=Ku(Math.atan2(t[1],t[0]));return t_(e)},JJ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:e_,rotateZ:e_,skewX:t=>Ku(Math.atan(t[1])),skewY:t=>Ku(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},t_=t=>(t=t%360,t<0&&(t+=360),t),BM=e_,$M=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),UM=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),ZJ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$M,scaleY:UM,scale:t=>($M(t)+UM(t))/2,rotateX:t=>t_(Ku(Math.atan2(t[6],t[5]))),rotateY:t=>t_(Ku(Math.atan2(-t[2],t[0]))),rotateZ:BM,rotate:BM,skewX:t=>Ku(Math.atan(t[4])),skewY:t=>Ku(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function n_(t){return t.includes("scale")?1:0}function r_(t,e){if(!t||t==="none")return n_(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=ZJ,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=JJ,i=a}if(!i)return n_(e);const s=r[e],o=i[1].split(",").map(tZ);return typeof s=="function"?s(o):o[s]}const eZ=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return r_(n,e)};function tZ(t){return parseFloat(t.trim())}const fg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pg=new Set(fg),zM=t=>t===hg||t===ae,nZ=new Set(["x","y","z"]),rZ=fg.filter(t=>!nZ.has(t));function iZ(t){const e=[];return rZ.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Wc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>r_(e,"x"),y:(t,{transform:e})=>r_(e,"y")};Wc.translateX=Wc.x;Wc.translateY=Wc.y;const vh=new Set;let i_=!1,s_=!1,o_=!1;function z3(){if(s_){const t=Array.from(vh).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=iZ(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}s_=!1,i_=!1,vh.forEach(t=>t.complete(o_)),vh.clear()}function V3(){vh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(s_=!0)})}function sZ(){o_=!0,V3(),z3(),o_=!1}class QR{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(vh.add(this),i_||(i_=!0,mt.read(V3),mt.resolveKeyframes(z3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}QJ(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),vh.delete(this)}cancel(){this.state==="scheduled"&&(vh.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oZ=t=>t.startsWith("--");function aZ(t,e,n){oZ(e)?t.style.setProperty(e,n):t.style[e]=n}const lZ=BR(()=>window.ScrollTimeline!==void 0),cZ={};function uZ(t,e){const n=BR(t);return()=>cZ[e]??n()}const H3=uZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),qg=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,VM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qg([0,.65,.55,1]),circOut:qg([.55,0,1,.45]),backIn:qg([.31,.01,.66,-.59]),backOut:qg([.33,1.53,.69,.99])};function W3(t,e){if(t)return typeof t=="function"?H3()?B3(t,e):"ease-out":T3(t)?qg(t):Array.isArray(t)?t.map(n=>W3(n,e)||VM.easeOut):VM[t]}function dZ(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const d={[e]:n};l&&(d.offset=l);const h=W3(a,i);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),t.animate(d,f)}function G3(t){return typeof t=="function"&&"applyToOptions"in t}function hZ({type:t,...e}){return G3(t)&&H3()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class q3 extends XR{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Xm(typeof e.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const c=hZ(e);this.animation=dZ(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=KR(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):aZ(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,i;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((i=(r=this.animation).commitStyles)==null||i.call(r))}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return rs(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+rs(e)}get time(){return rs(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=os(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&lZ()?(this.animation.timeline=e,ss):n(this)}}const K3={anticipate:E3,backInOut:k3,circInOut:C3};function fZ(t){return t in K3}function pZ(t){typeof t.ease=="string"&&fZ(t.ease)&&(t.ease=K3[t.ease])}const PE=10;class mZ extends q3{constructor(e){pZ(e),U3(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new YR({...o,autoplay:!1}),l=Math.max(PE,yr.now()-this.startTime),c=Vo(0,PE,l-PE);n.setWithVelocity(a.sample(Math.max(0,l-c)).value,a.sample(l).value,c),a.stop()}}const HM=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(lu.test(t)||t==="0")&&!t.startsWith("url("));function gZ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function yZ(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=HM(i,e),a=HM(s,e);return sk(o===a,`You are trying to animate ${e} from "${i}" to "${s}". "${o?s:i}" is not an animatable value.`,"value-not-animatable"),!o||!a?!1:gZ(t)||(n==="spring"||G3(n))&&r}function a_(t){t.duration=0,t.type="keyframes"}const vZ=new Set(["opacity","clipPath","filter","transform"]),wZ=BR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function bZ(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return wZ()&&n&&vZ.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const xZ=40;class SZ extends XR{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:d,...h}){var m;super(),this.stop=()=>{var g,v;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=yr.now();const f={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:d,...h},p=(d==null?void 0:d.KeyframeResolver)||QR;this.keyframeResolver=new p(a,(g,v,y)=>this.onKeyframesResolved(g,v,f,!y),l,c,d),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(e,n,r,i){var v,y;this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=yr.now(),yZ(e,s,o,a)||((ll.instantAnimations||!l)&&(d==null||d(KR(e,r,n))),e[0]=e[e.length-1],a_(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>xZ?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!c&&bZ(f),m=(y=(v=f.motionValue)==null?void 0:v.owner)==null?void 0:y.current,g=p?new mZ({...f,element:m}):new YR(f);g.finished.then(()=>{this.notifyFinished()}).catch(ss),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),sZ()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function X3(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,d)=>c.sortNodePosition(d)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}const kZ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function EZ(t){const e=kZ.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}const AZ=4;function Y3(t,e,n=1){Xm(n<=AZ,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,i]=EZ(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return m3(o)?parseFloat(o):o}return VR(i)?Y3(i,e,n+1):i}const CZ={type:"spring",stiffness:500,damping:25,restSpeed:10},_Z=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),TZ={type:"keyframes",duration:.8},PZ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RZ=(t,{keyframes:e})=>e.length>2?TZ:pg.has(t)?t.startsWith("scale")?_Z(e[1]):CZ:PZ,IZ=t=>t!==null;function NZ(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(IZ),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}function Q3(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function JR(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?Q3(n,t):n}function DZ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const ZR=(t,e,n,r={},i,s)=>o=>{const a=JR(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-os(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};DZ(a)||Object.assign(d,RZ(t,d)),d.duration&&(d.duration=os(d.duration)),d.repeatDelay&&(d.repeatDelay=os(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(a_(d),d.delay===0&&(h=!0)),(ll.instantAnimations||ll.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(h=!0,a_(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,h&&!s&&e.get()!==void 0){const f=NZ(d.keyframes,a);if(f!==void 0){mt.update(()=>{d.onUpdate(f),d.onComplete()});return}}return a.isSync?new YR(d):new SZ(d)};function WM(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function eI(t,e,n,r){if(typeof e=="function"){const[i,s]=WM(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=WM(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Jf(t,e,n){const r=t.getProps();return eI(r,e,n!==void 0?n:r.custom,t)}const J3=new Set(["width","height","top","left","right","bottom",...fg]),GM=30,MZ=t=>!isNaN(parseFloat(t));class OZ{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=yr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=yr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=MZ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new $R);const r=this.events[e].add(n);return e==="change"?()=>{r(),mt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=yr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>GM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,GM);return v3(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ym(t,e){return new OZ(t,e)}const l_=t=>Array.isArray(t);function LZ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ym(n))}function jZ(t){return l_(t)?t[t.length-1]||0:t}function FZ(t,e){const n=Jf(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=jZ(s[o]);LZ(t,o,a)}}const nr=t=>!!(t&&t.getVelocity);function BZ(t){return!!(nr(t)&&t.add)}function c_(t,e){const n=t.getValue("willChange");if(BZ(n))return n.add(e);if(!n&&ll.WillChange){const r=new ll.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function tI(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const $Z="framerAppearId",Z3="data-"+tI($Z);function eU(t){return t.props[Z3]}function UZ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function tU(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s,transitionEnd:o,...a}=e;const l=t.getDefaultTransition();s=s?Q3(s,l):l;const c=s==null?void 0:s.reduceMotion;r&&(s=r);const d=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in a){const p=t.getValue(f,t.latestValues[f]??null),m=a[f];if(m===void 0||h&&UZ(h,f))continue;const g={delay:n,...JR(s||{},f)},v=p.get();if(v!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===v&&!g.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const k=eU(t);if(k){const _=window.MotionHandoffAnimation(k,f,mt);_!==null&&(g.startTime=_,y=!0)}}c_(t,f);const w=c??t.shouldReduceMotion;p.start(ZR(f,p,m,w&&J3.has(f)?{type:!1}:g,t,y));const b=p.animation;b&&d.push(b)}if(o){const f=()=>mt.update(()=>{o&&FZ(t,o)});d.length?Promise.all(d).then(f):f()}return d}function u_(t,e,n={}){var l;const r=Jf(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(tU(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return zZ(t,e,c,d,h,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,d]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function zZ(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(u_(l,e,{...o,delay:n+(typeof r=="function"?0:r)+X3(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function VZ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>u_(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=u_(t,e,n);else{const i=typeof e=="function"?Jf(t,e,n.custom):e;r=Promise.all(tU(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const HZ={test:t=>t==="auto",parse:t=>t},nU=t=>e=>e.test(t),rU=[hg,ae,$o,_l,yJ,gJ,HZ],qM=t=>rU.find(nU(t));function WZ(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||y3(t):!0}const GZ=new Set(["brightness","contrast","saturate","opacity"]);function qZ(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(HR)||[];if(!r)return t;const i=n.replace(r,"");let s=GZ.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const KZ=/\b([a-z-]*)\(.*?\)/gu,d_={...lu,getAnimatableNone:t=>{const e=t.match(KZ);return e?e.map(qZ).join(" "):t}},KM={...hg,transform:Math.round},XZ={rotate:_l,rotateX:_l,rotateY:_l,rotateZ:_l,scale:Ab,scaleX:Ab,scaleY:Ab,scaleZ:Ab,skew:_l,skewX:_l,skewY:_l,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:hv,originX:MM,originY:MM,originZ:ae},nI={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,top:ae,right:ae,bottom:ae,left:ae,inset:ae,insetBlock:ae,insetBlockStart:ae,insetBlockEnd:ae,insetInline:ae,insetInlineStart:ae,insetInlineEnd:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,paddingBlock:ae,paddingBlockStart:ae,paddingBlockEnd:ae,paddingInline:ae,paddingInlineStart:ae,paddingInlineEnd:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,marginBlock:ae,marginBlockStart:ae,marginBlockEnd:ae,marginInline:ae,marginInlineStart:ae,marginInlineEnd:ae,fontSize:ae,backgroundPositionX:ae,backgroundPositionY:ae,...XZ,zIndex:KM,fillOpacity:hv,strokeOpacity:hv,numOctaves:KM},YZ={...nI,color:sn,backgroundColor:sn,outlineColor:sn,fill:sn,stroke:sn,borderColor:sn,borderTopColor:sn,borderRightColor:sn,borderBottomColor:sn,borderLeftColor:sn,filter:d_,WebkitFilter:d_},iU=t=>YZ[t];function sU(t,e){let n=iU(t);return n!==d_&&(n=lu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const QZ=new Set(["auto","none","0"]);function JZ(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!QZ.has(s)&&fv(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=sU(n,i)}class ZZ extends QR{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),VR(h))){const f=Y3(h,n.current);f!==void 0&&(e[d]=f),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!J3.has(r)||e.length!==2)return;const[i,s]=e,o=qM(i),a=qM(s),l=DM(i),c=DM(s);if(l!==c&&Wc[r]){this.needsMeasurement=!0;return}if(o!==a)if(zM(o)&&zM(a))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else Wc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||WZ(e[i]))&&r.push(i);r.length&&JZ(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Wc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Wc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const eee=new Set(["opacity","clipPath","filter","transform"]);function oU(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){const i=document.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const aU=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function h_(t){return g3(t)&&"offsetHeight"in t}const{schedule:rI,cancel:ype}=P3(queueMicrotask,!1),xs={x:!1,y:!1};function lU(){return xs.x||xs.y}function tee(t){return t==="x"||t==="y"?xs[t]?null:(xs[t]=!0,()=>{xs[t]=!1}):xs.x||xs.y?null:(xs.x=xs.y=!0,()=>{xs.x=xs.y=!1})}function cU(t,e){const n=oU(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function nee(t){return!(t.pointerType==="touch"||lU())}function ree(t,e,n={}){const[r,i,s]=cU(t,n);return r.forEach(o=>{let a=!1,l=!1,c;const d=()=>{o.removeEventListener("pointerleave",m)},h=v=>{c&&(c(v),c=void 0),d()},f=v=>{a=!1,window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),l&&(l=!1,h(v))},p=()=>{a=!0,window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",f,i)},m=v=>{if(v.pointerType!=="touch"){if(a){l=!0;return}h(v)}},g=v=>{if(!nee(v))return;l=!1;const y=e(o,v);typeof y=="function"&&(c=y,o.addEventListener("pointerleave",m,i))};o.addEventListener("pointerenter",g,i),o.addEventListener("pointerdown",p,i)}),s}const uU=(t,e)=>e?t===e?!0:uU(t,e.parentElement):!1,iI=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,iee=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function see(t){return iee.has(t.tagName)||t.isContentEditable===!0}const oee=new Set(["INPUT","SELECT","TEXTAREA"]);function aee(t){return oee.has(t.tagName)||t.isContentEditable===!0}const cx=new WeakSet;function XM(t){return e=>{e.key==="Enter"&&t(e)}}function RE(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const lee=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=XM(()=>{if(cx.has(n))return;RE(n,"down");const i=XM(()=>{RE(n,"up")}),s=()=>RE(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function YM(t){return iI(t)&&!lU()}const QM=new WeakSet;function cee(t,e,n={}){const[r,i,s]=cU(t,n),o=a=>{const l=a.currentTarget;if(!YM(a)||QM.has(a))return;cx.add(l),n.stopPropagation&&QM.add(a);const c=e(l,a),d=(p,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),cx.has(l)&&cx.delete(l),YM(p)&&typeof c=="function"&&c(p,{success:m})},h=p=>{d(p,l===window||l===document||n.useGlobalTarget||uU(l,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),h_(a)&&(a.addEventListener("focus",c=>lee(c,i)),!see(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function sI(t){return g3(t)&&"ownerSVGElement"in t}const ux=new WeakMap;let Tl;const dU=(t,e,n)=>(r,i)=>i&&i[0]?i[0][t+"Size"]:sI(r)&&"getBBox"in r?r.getBBox()[e]:r[n],uee=dU("inline","width","offsetWidth"),dee=dU("block","height","offsetHeight");function hee({target:t,borderBoxSize:e}){var n;(n=ux.get(t))==null||n.forEach(r=>{r(t,{get width(){return uee(t,e)},get height(){return dee(t,e)}})})}function fee(t){t.forEach(hee)}function pee(){typeof ResizeObserver>"u"||(Tl=new ResizeObserver(fee))}function mee(t,e){Tl||pee();const n=oU(t);return n.forEach(r=>{let i=ux.get(r);i||(i=new Set,ux.set(r,i)),i.add(e),Tl==null||Tl.observe(r)}),()=>{n.forEach(r=>{const i=ux.get(r);i==null||i.delete(e),i!=null&&i.size||Tl==null||Tl.unobserve(r)})}}const dx=new Set;let Df;function gee(){Df=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};dx.forEach(e=>e(t))},window.addEventListener("resize",Df)}function yee(t){return dx.add(t),Df||gee(),()=>{dx.delete(t),!dx.size&&typeof Df=="function"&&(window.removeEventListener("resize",Df),Df=void 0)}}function JM(t,e){return typeof t=="function"?yee(t):mee(t,e)}function vee(t){return sI(t)&&t.tagName==="svg"}const wee=[...rU,sn,lu],bee=t=>wee.find(nU(t)),ZM=()=>({translate:0,scale:1,origin:0,originPoint:0}),Mf=()=>({x:ZM(),y:ZM()}),eO=()=>({min:0,max:0}),hn=()=>({x:eO(),y:eO()}),xee=new WeakMap;function ok(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function pv(t){return typeof t=="string"||Array.isArray(t)}const oI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],aI=["initial",...oI];function ak(t){return ok(t.animate)||aI.some(e=>pv(t[e]))}function hU(t){return!!(ak(t)||t.variants)}function See(t,e,n){for(const r in e){const i=e[r],s=n[r];if(nr(i))t.addValue(r,i);else if(nr(s))t.addValue(r,Ym(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Ym(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const f_={current:null},fU={current:!1},kee=typeof window<"u";function Eee(){if(fU.current=!0,!!kee)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>f_.current=t.matches;t.addEventListener("change",e),e()}else f_.current=!1}const tO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let B1={};function pU(t){B1=t}function Aee(){return B1}class Cee{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,skipAnimations:s,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=QR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=yr.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,mt.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=s,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=ak(n),this.isVariantNode=hU(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const m=f[p];c[p]!==void 0&&nr(m)&&m.set(c[p])}}mount(e){var n,r;if(this.hasBeenMounted)for(const i in this.initialValues)(n=this.values.get(i))==null||n.jump(this.initialValues[i]),this.latestValues[i]=this.initialValues[i];this.current=e,xee.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(fU.current||Eee(),this.shouldReduceMotion=f_.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),au(this.notifyUpdate),au(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&eee.has(e)&&this.current instanceof HTMLElement){const{factory:o,keyframes:a,times:l,ease:c,duration:d}=n.accelerate,h=new q3({element:this.current,name:e,keyframes:a,times:l,ease:c,duration:os(d)}),f=o(h);this.valueSubscriptions.set(e,()=>{f(),h.cancel()});return}const r=pg.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&mt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in B1){const n=B1[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<tO.length;r++){const i=tO[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=See(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ym(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(m3(r)||y3(r))?r=parseFloat(r):!bee(r)&&lu.test(n)&&(r=sU(e,n)),this.setBaseTarget(e,nr(r)?r.get():r)),nr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=eI(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!nr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new $R),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){rI.render(this.render)}}class mU extends Cee{constructor(){super(...arguments),this.KeyframeResolver=ZZ}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;nr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class wu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function gU({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function _ee({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Tee(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function IE(t){return t===void 0||t===1}function p_({scale:t,scaleX:e,scaleY:n}){return!IE(t)||!IE(e)||!IE(n)}function Du(t){return p_(t)||yU(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function yU(t){return nO(t.x)||nO(t.y)}function nO(t){return t&&t!=="0%"}function $1(t,e,n){const r=t-n,i=e*r;return n+i}function rO(t,e,n,r,i){return i!==void 0&&(t=$1(t,i,r)),$1(t,n,r)+e}function m_(t,e=0,n=1,r,i){t.min=rO(t.min,e,n,r,i),t.max=rO(t.max,e,n,r,i)}function vU(t,{x:e,y:n}){m_(t.x,e.translate,e.scale,e.originPoint),m_(t.y,n.translate,n.scale,n.originPoint)}const iO=.999999999999,sO=1.0000000000001;function Pee(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Lf(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,vU(t,o)),r&&Du(s.latestValues)&&Lf(t,s.latestValues))}e.x<sO&&e.x>iO&&(e.x=1),e.y<sO&&e.y>iO&&(e.y=1)}function Of(t,e){t.min=t.min+e,t.max=t.max+e}function oO(t,e,n,r,i=.5){const s=Nt(t.min,t.max,i);m_(t,e,n,s,r)}function Lf(t,e){oO(t.x,e.x,e.scaleX,e.scale,e.originX),oO(t.y,e.y,e.scaleY,e.scale,e.originY)}function wU(t,e){return gU(Tee(t.getBoundingClientRect(),e))}function Ree(t,e,n){const r=wU(t,n),{scroll:i}=e;return i&&(Of(r.x,i.offset.x),Of(r.y,i.offset.y)),r}const Iee={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Nee=fg.length;function Dee(t,e,n){let r="",i=!0;for(let s=0;s<Nee;s++){const o=fg[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number")l=a===(o.startsWith("scale")?1:0);else{const c=parseFloat(a);l=o.startsWith("scale")?c===1:c===0}if(!l||n){const c=aU(a,nI[o]);if(!l){i=!1;const d=Iee[o]||o;r+=`${d}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function lI(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(pg.has(l)){o=!0;continue}else if(I3(l)){i[l]=c;continue}else{const d=aU(c,nI[l]);l.startsWith("origin")?(a=!0,s[l]=d):r[l]=d}}if(e.transform||(o||n?r.transform=Dee(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${c} ${d}`}}function bU(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function aO(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Rg={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ae.test(t))t=parseFloat(t);else return t;const n=aO(t,e.target.x),r=aO(t,e.target.y);return`${n}% ${r}%`}},Mee={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=lu.parse(t);if(i.length>5)return r;const s=lu.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Nt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},g_={borderRadius:{...Rg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rg,borderTopRightRadius:Rg,borderBottomLeftRadius:Rg,borderBottomRightRadius:Rg,boxShadow:Mee};function xU(t,{layout:e,layoutId:n}){return pg.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!g_[t]||t==="opacity")}function cI(t,e,n){var o;const r=t.style,i=e==null?void 0:e.style,s={};if(!r)return s;for(const a in r)(nr(r[a])||i&&nr(i[a])||xU(a,t)||((o=n==null?void 0:n.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function Oee(t){return window.getComputedStyle(t)}class Lee extends mU{constructor(){super(...arguments),this.type="html",this.renderInstance=bU}readValueFromInstance(e,n){var r;if(pg.has(n))return(r=this.projection)!=null&&r.isProjecting?n_(n):eZ(e,n);{const i=Oee(e),s=(I3(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return wU(e,n)}build(e,n,r){lI(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return cI(e,n,r)}}const jee={offset:"stroke-dashoffset",array:"stroke-dasharray"},Fee={offset:"strokeDashoffset",array:"strokeDasharray"};function Bee(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?jee:Fee;t[s.offset]=`${-r}`,t[s.array]=`${e} ${n}`}const $ee=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function SU(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,d){if(lI(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox);for(const p of $ee)h[p]!==void 0&&(f[p]=h[p],delete h[p]);e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&Bee(h,i,s,o,!1)}const kU=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),EU=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Uee(t,e,n,r){bU(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(kU.has(i)?i:tI(i),e.attrs[i])}function AU(t,e,n){const r=cI(t,e,n);for(const i in t)if(nr(t[i])||nr(e[i])){const s=fg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}class zee extends mU{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(pg.has(n)){const r=iU(n);return r&&r.default||0}return n=kU.has(n)?n:tI(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return AU(e,n,r)}build(e,n,r){SU(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Uee(e,n,r,i)}mount(e){this.isSVGTag=EU(e.tagName),super.mount(e)}}const Vee=aI.length;function CU(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?CU(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Vee;n++){const r=aI[n],i=t.props[r];(pv(i)||i===!1)&&(e[r]=i)}return e}function _U(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Hee=[...oI].reverse(),Wee=oI.length;function Gee(t){return e=>Promise.all(e.map(({animation:n,options:r})=>VZ(t,n,r)))}function qee(t){let e=Gee(t),n=lO(),r=!0;const i=l=>(c,d)=>{var f;const h=Jf(t,d,l==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:m,...g}=h;c={...c,...g,...m}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,d=CU(t.parent)||{},h=[],f=new Set;let p={},m=1/0;for(let v=0;v<Wee;v++){const y=Hee[v],w=n[y],b=c[y]!==void 0?c[y]:d[y],k=pv(b),_=y===l?w.isActive:null;_===!1&&(m=v);let C=b===d[y]&&b!==c[y]&&k;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),w.protectedKeys={...p},!w.isActive&&_===null||!b&&!w.prevProp||ok(b)||typeof b=="boolean")continue;if(y==="exit"&&w.isActive&&_!==!0){w.prevResolvedValues&&(p={...p,...w.prevResolvedValues});continue}const P=Kee(w.prevProp,b);let R=P||y===l&&w.isActive&&!C&&k||v>m&&k,M=!1;const I=Array.isArray(b)?b:[b];let j=I.reduce(i(y),{});_===!1&&(j={});const{prevResolvedValues:U={}}=w,G={...U,...j},B=L=>{R=!0,f.has(L)&&(M=!0,f.delete(L)),w.needsAnimating[L]=!0;const O=t.getValue(L);O&&(O.liveStyle=!1)};for(const L in G){const O=j[L],z=U[L];if(p.hasOwnProperty(L))continue;let N=!1;l_(O)&&l_(z)?N=!_U(O,z):N=O!==z,N?O!=null?B(L):f.add(L):O!==void 0&&f.has(L)?B(L):w.protectedKeys[L]=!0}w.prevProp=b,w.prevResolvedValues=j,w.isActive&&(p={...p,...j}),r&&t.blockInitialAnimation&&(R=!1);const V=C&&P;R&&(!V||M)&&h.push(...I.map(L=>{const O={type:y};if(typeof L=="string"&&r&&!V&&t.manuallyAnimateOnMount&&t.parent){const{parent:z}=t,N=Jf(z,L);if(z.enteringChildren&&N){const{delayChildren:Y}=N.transition||{};O.delay=X3(z.enteringChildren,t,Y)}}return{animation:L,options:O}}))}if(f.size){const v={};if(typeof c.initial!="boolean"){const y=Jf(t,Array.isArray(c.initial)?c.initial[0]:c.initial);y&&y.transition&&(v.transition=y.transition)}f.forEach(y=>{const w=t.getBaseTarget(y),b=t.getValue(y);b&&(b.liveStyle=!0),v[y]=w??null}),h.push({animation:v})}let g=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=lO()}}}function Kee(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_U(e,t):!1}function Tu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lO(){return{animate:Tu(!0),whileInView:Tu(),whileHover:Tu(),whileTap:Tu(),whileDrag:Tu(),whileFocus:Tu(),exit:Tu()}}function cO(t,e){t.min=e.min,t.max=e.max}function vs(t,e){cO(t.x,e.x),cO(t.y,e.y)}function uO(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const TU=1e-4,Xee=1-TU,Yee=1+TU,PU=.01,Qee=0-PU,Jee=0+PU;function vr(t){return t.max-t.min}function Zee(t,e,n){return Math.abs(t-e)<=n}function dO(t,e,n,r=.5){t.origin=r,t.originPoint=Nt(e.min,e.max,t.origin),t.scale=vr(n)/vr(e),t.translate=Nt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Xee&&t.scale<=Yee||isNaN(t.scale))&&(t.scale=1),(t.translate>=Qee&&t.translate<=Jee||isNaN(t.translate))&&(t.translate=0)}function Py(t,e,n,r){dO(t.x,e.x,n.x,r?r.originX:void 0),dO(t.y,e.y,n.y,r?r.originY:void 0)}function hO(t,e,n){t.min=n.min+e.min,t.max=t.min+vr(e)}function ete(t,e,n){hO(t.x,e.x,n.x),hO(t.y,e.y,n.y)}function fO(t,e,n){t.min=e.min-n.min,t.max=t.min+vr(e)}function U1(t,e,n){fO(t.x,e.x,n.x),fO(t.y,e.y,n.y)}function pO(t,e,n,r,i){return t-=e,t=$1(t,1/n,r),i!==void 0&&(t=$1(t,1/i,r)),t}function tte(t,e=0,n=1,r=.5,i,s=t,o=t){if($o.test(e)&&(e=parseFloat(e),e=Nt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Nt(s.min,s.max,r);t===s&&(a-=e),t.min=pO(t.min,e,n,a,i),t.max=pO(t.max,e,n,a,i)}function mO(t,e,[n,r,i],s,o){tte(t,e[n],e[r],e[i],e.scale,s,o)}const nte=["x","scaleX","originX"],rte=["y","scaleY","originY"];function gO(t,e,n,r){mO(t.x,e,nte,n?n.x:void 0,r?r.x:void 0),mO(t.y,e,rte,n?n.y:void 0,r?r.y:void 0)}function yO(t){return t.translate===0&&t.scale===1}function RU(t){return yO(t.x)&&yO(t.y)}function vO(t,e){return t.min===e.min&&t.max===e.max}function ite(t,e){return vO(t.x,e.x)&&vO(t.y,e.y)}function wO(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function IU(t,e){return wO(t.x,e.x)&&wO(t.y,e.y)}function bO(t){return vr(t.x)/vr(t.y)}function xO(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function ro(t){return[t("x"),t("y")]}function ste(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:m}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),m&&(r+=`skewY(${m}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const NU=["TopLeft","TopRight","BottomLeft","BottomRight"],ote=NU.length,SO=t=>typeof t=="string"?parseFloat(t):t,kO=t=>typeof t=="number"||ae.test(t);function ate(t,e,n,r,i,s){i?(t.opacity=Nt(0,n.opacity??1,lte(r)),t.opacityExit=Nt(e.opacity??1,0,cte(r))):s&&(t.opacity=Nt(e.opacity??1,n.opacity??1,r));for(let o=0;o<ote;o++){const a=`border${NU[o]}Radius`;let l=EO(e,a),c=EO(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||kO(l)===kO(c)?(t[a]=Math.max(Nt(SO(l),SO(c),r),0),($o.test(c)||$o.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Nt(e.rotate||0,n.rotate||0,r))}function EO(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const lte=DU(0,.5,A3),cte=DU(.5,.95,ss);function DU(t,e,n){return r=>r<t?0:r>e?1:n(dv(t,e,r))}function ute(t,e,n){const r=nr(t)?t:Ym(t);return r.start(ZR("",r,e,n)),r.animation}function mv(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const dte=(t,e)=>t.depth-e.depth;class hte{constructor(){this.children=[],this.isDirty=!1}add(e){FR(this.children,e),this.isDirty=!0}remove(e){O1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dte),this.isDirty=!1,this.children.forEach(e)}}function fte(t,e){const n=yr.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(au(r),t(s-e))};return mt.setup(r,!0),()=>au(r)}function hx(t){return nr(t)?t.get():t}class pte{constructor(){this.members=[]}add(e){FR(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&O1(this.members,r)}e.scheduleRender()}remove(e){if(O1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i],o=s.instance;if(s.isPresent!==!1&&(!o||o.isConnected!==!1)){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,s=e.options.layoutDependency;if(!(i!==void 0&&s!==void 0&&i===s)){const l=r.instance;l&&l.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:a}=e.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const fx={hasAnimatedSinceResize:!0,hasEverUpdated:!1},NE=["","X","Y","Z"],mte=1e3;let gte=0;function DE(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function MU(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=eU(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",mt,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&MU(r)}function OU({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=gte++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(wte),this.nodes.forEach(kte),this.nodes.forEach(Ete),this.nodes.forEach(bte)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new hte)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new $R),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=sI(o)&&!vee(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;mt.read(()=>{h=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=fte(f,250),fx.hasAnimatedSinceResize&&(fx.hasAnimatedSinceResize=!1,this.nodes.forEach(_O)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||Pte,{onLayoutAnimationStart:g,onLayoutAnimationComplete:v}=c.getProps(),y=!this.targetLayout||!IU(this.targetLayout,p),w=!h&&f;if(this.options.layoutRoot||this.resumeFrom||w||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...JR(m,"layout"),onPlay:g,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,w)}else h||_O(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),au(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ate),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&MU(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(AO);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(CO);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Ste),this.nodes.forEach(yte),this.nodes.forEach(vte)):this.nodes.forEach(CO),this.clearAllSnapshots();const a=yr.now();Fn.delta=Vo(0,1e3/60,a-Fn.timestamp),Fn.timestamp=a,Fn.isProcessing=!0,EE.update.process(Fn),EE.preRender.process(Fn),EE.render.process(Fn),Fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rI.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(xte),this.sharedNodes.forEach(Cte)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,mt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){mt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vr(this.snapshot.measuredBox.x)&&!vr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=hn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!RU(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Du(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Rte(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return hn();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Ite))){const{scroll:d}=this.root;d&&(Of(a.x,d.offset.x),Of(a.y,d.offset.y))}return a}removeElementScroll(o){var l;const a=hn();if(vs(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&vs(a,o),Of(a.x,h.offset.x),Of(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=hn();vs(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Lf(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Du(d.latestValues)&&Lf(l,d.latestValues)}return Du(this.latestValues)&&Lf(l,this.latestValues),l}removeTransform(o){const a=hn();vs(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Du(c.latestValues))continue;p_(c.latestValues)&&c.updateSnapshot();const d=hn(),h=c.measurePageBox();vs(d,h),gO(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Du(this.latestValues)&&gO(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=Fn.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hn(),this.targetWithTransforms=hn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ete(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vs(this.target,this.layout.layoutBox),vU(this.target,this.targetDelta)):vs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||p_(this.parent.latestValues)||yU(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),U1(this.relativeTargetOrigin,a,l),vs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var m;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Fn.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;vs(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Pee(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=hn());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(uO(this.prevProjectionDelta.x,this.projectionDelta.x),uO(this.prevProjectionDelta.y,this.projectionDelta.y)),Py(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!xO(this.projectionDelta.x,this.prevProjectionDelta.x)||!xO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Mf(),this.projectionDelta=Mf(),this.projectionDeltaWithTransform=Mf()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=Mf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=hn(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=p!==m,v=this.getStack(),y=!v||v.members.length<=1,w=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(Tte));this.animationProgress=0;let b;this.mixTargetDelta=k=>{const _=k/1e3;TO(h.x,o.x,_),TO(h.y,o.y,_),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(U1(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_te(this.relativeTarget,this.relativeTargetOrigin,f,_),b&&ite(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=hn()),vs(b,this.relativeTarget)),g&&(this.animationValues=d,ate(d,c,this.latestValues,_,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(au(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=mt.update(()=>{fx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ym(0)),this.currentAnimation=ute(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mte),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&LU(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||hn();const h=vr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=vr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}vs(a,l),Lf(a,d),Py(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new pte),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&DE("z",o,c,this.animationValues);for(let d=0;d<NE.length;d++)DE(`rotate${NE[d]}`,o,c,this.animationValues),DE(`skew${NE[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=hx(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=hx(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Du(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let h=ste(this.projectionDeltaWithTransform,this.treeScale,d);l&&(h=l(d,h)),o.transform=h;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,c.animationValues?o.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in g_){if(d[m]===void 0)continue;const{correct:g,applyTo:v,isCSSVariable:y}=g_[m],w=h==="none"?d[m]:g(d[m],c);if(v){const b=v.length;for(let k=0;k<b;k++)o[v[k]]=w}else y?this.options.visualElement.renderState.vars[m]=w:o[m]=w}this.options.layoutId&&(o.pointerEvents=c===this?hx(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(AO),this.root.sharedNodes.clear()}}}function yte(t){t.updateLayout()}function vte(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?ro(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=vr(f);f.min=r[h].min,f.max=f.min+p}):LU(s,e.layoutBox,r)&&ro(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=vr(r[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=Mf();Py(a,r,e.layoutBox);const l=Mf();o?Py(l,t.applyTransform(i,!0),e.measuredBox):Py(l,r,e.layoutBox);const c=!RU(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const m=hn();U1(m,e.layoutBox,f.layoutBox);const g=hn();U1(g,r,p.layoutBox),IU(m,g)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=m,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function wte(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function bte(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function xte(t){t.clearSnapshot()}function AO(t){t.clearMeasurements()}function CO(t){t.isLayoutDirty=!1}function Ste(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function _O(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function kte(t){t.resolveTargetDelta()}function Ete(t){t.calcProjection()}function Ate(t){t.resetSkewAndRotation()}function Cte(t){t.removeLeadSnapshot()}function TO(t,e,n){t.translate=Nt(e.translate,0,n),t.scale=Nt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function PO(t,e,n,r){t.min=Nt(e.min,n.min,r),t.max=Nt(e.max,n.max,r)}function _te(t,e,n,r){PO(t.x,e.x,n.x,r),PO(t.y,e.y,n.y,r)}function Tte(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Pte={duration:.45,ease:[.4,0,.1,1]},RO=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),IO=RO("applewebkit/")&&!RO("chrome/")?Math.round:ss;function NO(t){t.min=IO(t.min),t.max=IO(t.max)}function Rte(t){NO(t.x),NO(t.y)}function LU(t,e,n){return t==="position"||t==="preserve-aspect"&&!Zee(bO(e),bO(n),.2)}function Ite(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Nte=OU({attachResizeListener:(t,e)=>mv(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),ME={current:void 0},jU=OU({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ME.current){const t=new Nte({});t.mount(window),t.setOptions({layoutScroll:!0}),ME.current=t}return ME.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uI=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function DO(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Dte(...t){return e=>{let n=!1;const r=t.map(i=>{const s=DO(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():DO(t[i],null)}}}}function Mte(...t){return E.useCallback(Dte(...t),t)}class Ote extends E.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,i=h_(r)&&r.offsetWidth||0,s=h_(r)&&r.offsetHeight||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left,o.bottom=s-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Lte({children:t,isPresent:e,anchorX:n,anchorY:r,root:i,pop:s}){var f;const o=E.useId(),a=E.useRef(null),l=E.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:c}=E.useContext(uI),d=((f=t.props)==null?void 0:f.ref)??(t==null?void 0:t.ref),h=Mte(a,d);return E.useInsertionEffect(()=>{const{width:p,height:m,top:g,left:v,right:y,bottom:w}=l.current;if(e||s===!1||!a.current||!p||!m)return;const b=n==="left"?`left: ${v}`:`right: ${y}`,k=r==="bottom"?`bottom: ${w}`:`top: ${g}`;a.current.dataset.motionPopId=o;const _=document.createElement("style");c&&(_.nonce=c);const C=i??document.head;return C.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${m}px !important;
            ${b}px !important;
            ${k}px !important;
          }
        `),()=>{C.contains(_)&&C.removeChild(_)}},[e]),x.jsx(Ote,{isPresent:e,childRef:a,sizeRef:l,pop:s,children:s===!1?t:E.cloneElement(t,{ref:h})})}const jte=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,anchorY:l,root:c})=>{const d=jR(Fte),h=E.useId();let f=!0,p=E.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:m=>{d.set(m,!0);for(const g of d.values())if(!g)return;r&&r()},register:m=>(d.set(m,!1),()=>d.delete(m))}),[n,d,r]);return s&&f&&(p={...p}),E.useMemo(()=>{d.forEach((m,g)=>d.set(g,!1))},[n]),E.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),t=x.jsx(Lte,{pop:o==="popLayout",isPresent:n,anchorX:a,anchorY:l,root:c,children:t}),x.jsx(ik.Provider,{value:p,children:t})};function Fte(){return new Map}function FU(t=!0){const e=E.useContext(ik);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=E.useId();E.useEffect(()=>{if(t)return i(s)},[t]);const o=E.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Cb=t=>t.key||"";function MO(t){const e=[];return E.Children.forEach(t,n=>{E.isValidElement(n)&&e.push(n)}),e}const lk=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",anchorY:l="top",root:c})=>{const[d,h]=FU(o),f=E.useMemo(()=>MO(t),[t]),p=o&&!d?[]:f.map(Cb),m=E.useRef(!0),g=E.useRef(f),v=jR(()=>new Map),y=E.useRef(new Set),[w,b]=E.useState(f),[k,_]=E.useState(f);p3(()=>{m.current=!1,g.current=f;for(let R=0;R<k.length;R++){const M=Cb(k[R]);p.includes(M)?(v.delete(M),y.current.delete(M)):v.get(M)!==!0&&v.set(M,!1)}},[k,p.length,p.join("-")]);const C=[];if(f!==w){let R=[...f];for(let M=0;M<k.length;M++){const I=k[M],j=Cb(I);p.includes(j)||(R.splice(M,0,I),C.push(I))}return s==="wait"&&C.length&&(R=C),_(MO(R)),b(f),null}const{forceRender:P}=E.useContext(LR);return x.jsx(x.Fragment,{children:k.map(R=>{const M=Cb(R),I=o&&!d?!1:f===k||p.includes(M),j=()=>{if(y.current.has(M))return;if(y.current.add(M),v.has(M))v.set(M,!0);else return;let U=!0;v.forEach(G=>{G||(U=!1)}),U&&(P==null||P(),_(g.current),o&&(h==null||h()),r&&r())};return x.jsx(jte,{isPresent:I,initial:!m.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:c,onExitComplete:I?void 0:j,anchorX:a,anchorY:l,children:R},M)})})},BU=E.createContext({strict:!1}),OO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let LO=!1;function Bte(){if(LO)return;const t={};for(const e in OO)t[e]={isEnabled:n=>OO[e].some(r=>!!n[r])};pU(t),LO=!0}function $U(){return Bte(),Aee()}function $te(t){const e=$U();for(const n in t)e[n]={...e[n],...t[n]};pU(e)}const Ute=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function z1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Ute.has(t)}let UU=t=>!z1(t);function zte(t){typeof t=="function"&&(UU=e=>e.startsWith("on")?!z1(e):t(e))}try{zte(require("@emotion/is-prop-valid").default)}catch{}function Vte(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(UU(i)||n===!0&&z1(i)||!e&&!z1(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const ck=E.createContext({});function Hte(t,e){if(ak(t)){const{initial:n,animate:r}=t;return{initial:n===!1||pv(n)?n:void 0,animate:pv(r)?r:void 0}}return t.inherit!==!1?e:{}}function Wte(t){const{initial:e,animate:n}=Hte(t,E.useContext(ck));return E.useMemo(()=>({initial:e,animate:n}),[jO(e),jO(n)])}function jO(t){return Array.isArray(t)?t.join(" "):t}const dI=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zU(t,e,n){for(const r in e)!nr(e[r])&&!xU(r,n)&&(t[r]=e[r])}function Gte({transformTemplate:t},e){return E.useMemo(()=>{const n=dI();return lI(n,e,t),Object.assign({},n.vars,n.style)},[e])}function qte(t,e){const n=t.style||{},r={};return zU(r,n,t),Object.assign(r,Gte(t,e)),r}function Kte(t,e){const n={},r=qte(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const VU=()=>({...dI(),attrs:{}});function Xte(t,e,n,r){const i=E.useMemo(()=>{const s=VU();return SU(s,e,EU(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};zU(s,t.style,t),i.style={...s,...i.style}}return i}const Yte=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hI(t){return typeof t!="string"||t.includes("-")?!1:!!(Yte.indexOf(t)>-1||/[A-Z]/u.test(t))}function Qte(t,e,n,{latestValues:r},i,s=!1,o){const l=(o??hI(t)?Xte:Kte)(e,r,i,t),c=Vte(e,typeof t=="string",s),d=t!==E.Fragment?{...c,...l,ref:n}:{},{children:h}=e,f=E.useMemo(()=>nr(h)?h.get():h,[h]);return E.createElement(t,{...d,children:f})}function Jte({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Zte(n,r,i,t),renderState:e()}}function Zte(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=hx(s[f]);let{initial:o,animate:a}=t;const l=ak(t),c=hU(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!ok(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const m=eI(t,f[p]);if(m){const{transitionEnd:g,transition:v,...y}=m;for(const w in y){let b=y[w];if(Array.isArray(b)){const k=d?b.length-1:0;b=b[k]}b!==null&&(i[w]=b)}for(const w in g)i[w]=g[w]}}}return i}const HU=t=>(e,n)=>{const r=E.useContext(ck),i=E.useContext(ik),s=()=>Jte(t,e,r,i);return n?s():jR(s)},ene=HU({scrapeMotionValuesFromProps:cI,createRenderState:dI}),tne=HU({scrapeMotionValuesFromProps:AU,createRenderState:VU}),nne=Symbol.for("motionComponentSymbol");function rne(t,e,n){const r=E.useRef(n);E.useInsertionEffect(()=>{r.current=n});const i=E.useRef(null);return E.useCallback(s=>{var a;s&&((a=t.onMount)==null||a.call(t,s)),e&&(s?e.mount(s):e.unmount());const o=r.current;if(typeof o=="function")if(s){const l=o(s);typeof l=="function"&&(i.current=l)}else i.current?(i.current(),i.current=null):o(s);else o&&(o.current=s)},[e])}const WU=E.createContext({});function af(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ine(t,e,n,r,i,s){var b,k;const{visualElement:o}=E.useContext(ck),a=E.useContext(BU),l=E.useContext(ik),c=E.useContext(uI),d=c.reducedMotion,h=c.skipAnimations,f=E.useRef(null),p=E.useRef(!1);r=r||a.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d,skipAnimations:h,isSVG:s}),p.current&&f.current&&(f.current.manuallyAnimateOnMount=!0));const m=f.current,g=E.useContext(WU);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&sne(f.current,n,i,g);const v=E.useRef(!1);E.useInsertionEffect(()=>{m&&v.current&&m.update(n,l)});const y=n[Z3],w=E.useRef(!!y&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,y))&&((k=window.MotionHasOptimisedAnimation)==null?void 0:k.call(window,y)));return p3(()=>{p.current=!0,m&&(v.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),w.current&&m.animationState&&m.animationState.animateChanges())}),E.useEffect(()=>{m&&(!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,y)}),w.current=!1),m.enteringChildren=void 0)}),m}function sne(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:GU(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&af(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function GU(t){if(t)return t.options.allowProjection!==!1?t.projection:GU(t.parent)}function OE(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&$te(r);const s=n?n==="svg":hI(t),o=s?tne:ene;function a(c,d){let h;const f={...E.useContext(uI),...c,layoutId:one(c)},{isStatic:p}=f,m=Wte(c),g=o(c,p);if(!p&&f3){ane();const v=lne(f);h=v.MeasureLayout,m.visualElement=ine(t,g,f,i,v.ProjectionNode,s)}return x.jsxs(ck.Provider,{value:m,children:[h&&m.visualElement?x.jsx(h,{visualElement:m.visualElement,...f}):null,Qte(t,c,rne(g,m.visualElement,d),g,p,e,s)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=E.forwardRef(a);return l[nne]=t,l}function one({layoutId:t}){const e=E.useContext(LR).id;return e&&t!==void 0?e+"-"+t:t}function ane(t,e){E.useContext(BU).strict}function lne(t){const e=$U(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function cne(t,e){if(typeof Proxy>"u")return OE;const n=new Map,r=(s,o)=>OE(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,OE(o,void 0,t,e)),n.get(o))})}const une=(t,e)=>e.isSVG??hI(t)?new zee(e):new Lee(e,{allowProjection:t!==E.Fragment});class dne extends wu{constructor(e){super(e),e.animationState||(e.animationState=qee(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ok(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let hne=0;class fne extends wu{constructor(){super(...arguments),this.id=hne++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const pne={animation:{Feature:dne},exit:{Feature:fne}};function jw(t){return{point:{x:t.pageX,y:t.pageY}}}const mne=t=>e=>iI(e)&&t(e,jw(e));function Ry(t,e,n,r){return mv(t,e,mne(n),r)}const qU=({current:t})=>t?t.ownerDocument.defaultView:null,FO=(t,e)=>Math.abs(t-e);function gne(t,e){const n=FO(t.x,e.x),r=FO(t.y,e.y);return Math.sqrt(n**2+r**2)}const BO=new Set(["auto","scroll"]);class KU{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=p=>{this.handleScroll(p.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=jE(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=gne(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!g)return;const{point:v}=p,{timestamp:y}=Fn;this.history.push({...v,timestamp:y});const{onStart:w,onMove:b}=this.handlers;m||(w&&w(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=LE(m,this.transformPagePoint),mt.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:y}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=jE(p.type==="pointercancel"?this.lastMoveEventInfo:LE(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,w),v&&v(p,w)},!iI(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=jw(e),c=LE(l,this.transformPagePoint),{point:d}=c,{timestamp:h}=Fn;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,jE(c,this.history)),this.removeListeners=Mw(Ry(this.contextWindow,"pointermove",this.handlePointerMove),Ry(this.contextWindow,"pointerup",this.handlePointerUp),Ry(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(BO.has(r.overflowX)||BO.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:i.x-n.x,y:i.y-n.y};s.x===0&&s.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,i),mt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),au(this.updatePoint)}}function LE(t,e){return e?{point:e(t.point)}:t}function $O(t,e){return{x:t.x-e.x,y:t.y-e.y}}function jE({point:t},e){return{point:t,delta:$O(t,XU(e)),offset:$O(t,yne(e)),velocity:vne(e,.1)}}function yne(t){return t[0]}function XU(t){return t[t.length-1]}function vne(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=XU(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>os(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&i.timestamp-r.timestamp>os(e)*2&&(r=t[1]);const s=rs(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function wne(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Nt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Nt(n,t,r.max):Math.min(t,n)),t}function UO(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function bne(t,{top:e,left:n,bottom:r,right:i}){return{x:UO(t.x,n,i),y:UO(t.y,e,r)}}function zO(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function xne(t,e){return{x:zO(t.x,e.x),y:zO(t.y,e.y)}}function Sne(t,e){let n=.5;const r=vr(t),i=vr(e);return i>r?n=dv(e.min,e.max-r,t.min):r>i&&(n=dv(t.min,t.max-i,e.min)),Vo(0,1,n)}function kne(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const y_=.35;function Ene(t=y_){return t===!1?t=0:t===!0&&(t=y_),{x:VO(t,"left","right"),y:VO(t,"top","bottom")}}function VO(t,e,n){return{min:HO(t,e),max:HO(t,n)}}function HO(t,e){return typeof t=="number"?t:t[e]||0}const Ane=new WeakMap;class Cne{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{n&&this.snapToCursor(jw(h).point),this.stopAnimation()},o=(h,f)=>{const{drag:p,dragPropagation:m,onDragStart:g}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tee(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ro(y=>{let w=this.getAxisMotionValue(y).get()||0;if($o.test(w)){const{projection:b}=this.visualElement;if(b&&b.layout){const k=b.layout.layoutBox[y];k&&(w=vr(k)*(parseFloat(w)/100))}}this.originPoint[y]=w}),g&&mt.update(()=>g(h,f),!1,!0),c_(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:g,onDrag:v}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:y}=f;if(m&&this.currentDirection===null){this.currentDirection=Tne(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),v&&mt.update(()=>v(h,f),!1,!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:d}=this.getProps();this.panSession=new KU(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:qU(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&mt.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!_b(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=wne(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&af(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=bne(r.layoutBox,e):this.constraints=!1,this.elastic=Ene(n),i!==this.constraints&&!af(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&ro(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=kne(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!af(e))return!1;const r=e.current;Xm(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Ree(r,i.root,this.visualElement.getTransformPagePoint());let o=xne(i.layout.layoutBox,s);if(n){const a=n(_ee(o));this.hasMutatedConstraints=!!a,a&&(o=gU(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ro(d=>{if(!_b(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,m={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,m)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return c_(this.visualElement,e),r.start(ZR(e,r,0,n,this.visualElement,!1))}stopAnimation(){ro(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ro(n=>{const{drag:r}=this.getProps();if(!_b(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n],l=s.get()||0;s.set(e[n]-Nt(o,a,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!af(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ro(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Sne({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),ro(o=>{if(!_b(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Nt(l,c,i[o]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;Ane.set(this.visualElement,this);const e=this.visualElement.current,n=Ry(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps(),f=c.target,p=f!==e&&aee(f);d&&h&&!p&&this.start(c)});let r;const i=()=>{const{dragConstraints:c}=this.getProps();af(c)&&c.current&&(this.constraints=this.resolveRefConstraints(),r||(r=_ne(e,c.current,()=>this.scalePositionWithinConstraints())))},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),mt.read(i);const a=mv(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ro(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),l&&l(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=y_,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function WO(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function _ne(t,e,n){const r=JM(t,WO(n)),i=JM(e,WO(n));return()=>{r(),i()}}function _b(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Tne(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Pne extends wu{constructor(e){super(e),this.removeGroupControls=ss,this.removeListeners=ss,this.controls=new Cne(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ss}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const FE=t=>(e,n)=>{t&&mt.update(()=>t(e,n),!1,!0)};class Rne extends wu{constructor(){super(...arguments),this.removePointerDownListener=ss}onPointerDown(e){this.session=new KU(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qU(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:FE(e),onStart:FE(n),onMove:FE(r),onEnd:(s,o)=>{delete this.session,i&&mt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Ry(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let BE=!1;class Ine extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),BE&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),fx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,e.layoutDependency!==n&&o.setOptions({...o.options,layoutDependency:n}),BE=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||mt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),rI.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;BE=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function YU(t){const[e,n]=FU(),r=E.useContext(LR);return x.jsx(Ine,{...t,layoutGroup:r,switchLayoutGroup:E.useContext(WU),isPresent:e,safeToRemove:n})}const Nne={pan:{Feature:Rne},drag:{Feature:Pne,ProjectionNode:jU,MeasureLayout:YU}};function GO(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&mt.postRender(()=>s(e,jw(e)))}class Dne extends wu{mount(){const{current:e}=this.node;e&&(this.unmount=ree(e,(n,r)=>(GO(this.node,r,"Start"),i=>GO(this.node,i,"End"))))}unmount(){}}class Mne extends wu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mw(mv(this.node.current,"focus",()=>this.onFocus()),mv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function qO(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&mt.postRender(()=>s(e,jw(e)))}class One extends wu{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=cee(e,(i,s)=>(qO(this.node,s,"Start"),(o,{success:a})=>qO(this.node,o,a?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const v_=new WeakMap,$E=new WeakMap,Lne=t=>{const e=v_.get(t.target);e&&e(t)},jne=t=>{t.forEach(Lne)};function Fne({root:t,...e}){const n=t||document;$E.has(n)||$E.set(n,{});const r=$E.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(jne,{root:t,...e})),r[i]}function Bne(t,e,n){const r=Fne(e);return v_.set(t,n),r.observe(t),()=>{v_.delete(t),r.unobserve(t)}}const $ne={some:0,all:1};class Une extends wu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:$ne[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=c?d:h;f&&f(l)};return Bne(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(zne(e,n))&&this.startObserver()}unmount(){}}function zne({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Vne={inView:{Feature:Une},tap:{Feature:One},focus:{Feature:Mne},hover:{Feature:Dne}},Hne={layout:{ProjectionNode:jU,MeasureLayout:YU}},Wne={...pne,...Vne,...Nne,...Hne},At=cne(Wne,une),Gne=({activeTab:t,setActiveTab:e})=>{const{profile:n,signOut:r}=rk(),i=[{id:"dashboard",label:"Dashboard"},{id:"playbook",label:"Playbook"},{id:"staging",label:"Review & Publish"},{id:"integrations",label:"Integrations"}],s=n!=null&&n.full_name?n.full_name.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2):"?";return x.jsx("header",{className:"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-40",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex items-center justify-between h-14",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-lg gradient-primary flex items-center justify-center",children:x.jsx(LB,{className:"w-4 h-4 text-primary-foreground"})}),x.jsx("span",{className:"text-sm font-bold text-foreground tracking-tight",children:"Playbook Manager"})]}),x.jsx("nav",{className:"flex items-center gap-1",children:i.map(o=>x.jsx("button",{onClick:()=>e(o.id),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${t===o.id?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:o.label},o.id))}),x.jsxs("div",{className:"flex items-center gap-2",children:[(n==null?void 0:n.full_name)&&x.jsx("span",{className:"text-xs text-muted-foreground hidden sm:inline",children:n.full_name}),x.jsx("div",{className:"w-7 h-7 rounded-full bg-primary/20 flex items-center justify-center text-[11px] font-bold text-primary",children:s}),x.jsx("button",{onClick:r,className:"w-7 h-7 rounded-full hover:bg-muted flex items-center justify-center transition-colors",title:"Sign out",children:x.jsx(PG,{className:"w-3.5 h-3.5 text-muted-foreground"})})]})]})})};function fI(){return gu({queryKey:["skills"],queryFn:async()=>{const[t,e,n]=await Promise.all([Ce.from("skill_categories").select("*").order("sort_order"),Ce.from("skills").select("*").order("sort_order"),Ce.from("user_skills").select("*")]);if(t.error)throw t.error;if(e.error)throw e.error;if(n.error)throw n.error;const r=new Map((n.data??[]).map(i=>[i.skill_id,i]));return(t.data??[]).map(i=>({id:i.id,name:i.name,skills:(e.data??[]).filter(s=>s.category_id===i.id).map(s=>{const o=r.get(s.id);return{id:s.id,name:s.name,status:(o==null?void 0:o.status)??"missing",lastUpdated:(o==null?void 0:o.last_updated)??void 0,section:(o==null?void 0:o.section_title)??void 0}})}))}})}function qne(t){const e=t.length;if(e===0)return{score:0,covered:0,total:0,partial:0,missing:0,outdated:0};const n=t.filter(l=>l.status==="covered").length,r=t.filter(l=>l.status==="partial").length,i=t.filter(l=>l.status==="missing").length,s=new Date,o=t.filter(l=>l.lastUpdated?s.getTime()-new Date(l.lastUpdated).getTime()>90*24*60*60*1e3:!1).length;return{score:Math.round((n+r*.5)/e*100),covered:n,total:e,partial:r,missing:i,outdated:o}}function QU(){const{data:t,isLoading:e}=fI();return{data:E.useMemo(()=>{if(!t)return;const r=t.flatMap(i=>i.skills);return qne(r)},[t]),isLoading:e}}const Kne=({activeFilter:t,onFilterChange:e})=>{const{data:n,isLoading:r}=QU();if(r||!n)return x.jsx("div",{className:"rounded-xl border border-border bg-card px-5 py-3 shadow-card flex items-center justify-center min-h-[52px]",children:x.jsx(yn,{className:"w-4 h-4 text-primary animate-spin"})});const i=n.score>=70?"text-success":n.score>=40?"text-warning":"text-destructive";return x.jsx(At.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-xl border border-border bg-card px-5 py-3 shadow-card",children:x.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Playbook Health"}),x.jsx("span",{className:`text-xl font-bold font-mono ${i}`,children:n.score}),x.jsx("span",{className:"text-xs text-muted-foreground",children:"/ 100"})]}),x.jsx("div",{className:"h-5 w-px bg-border"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Tb,{icon:jo,label:"Covered",value:n.covered,color:"text-success",active:t==="covered",onClick:()=>e("covered")}),x.jsx(Tb,{icon:Iw,label:"Partial",value:n.partial,color:"text-warning",active:t==="partial",onClick:()=>e("partial")}),x.jsx(Tb,{icon:Rw,label:"Missing",value:n.missing,color:"text-destructive",active:t==="missing",onClick:()=>e("missing")}),x.jsx(Tb,{icon:dR,label:"Outdated",value:n.outdated,color:"text-muted-foreground",active:t==="outdated",onClick:()=>e("outdated")})]})]})})};function Tb({icon:t,label:e,value:n,color:r,active:i,onClick:s}){return x.jsxs("button",{className:`flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-medium transition-all ${i?"bg-primary/10 ring-2 ring-primary/30":"bg-muted/50 hover:bg-muted/80"}`,onClick:s,children:[x.jsx(t,{className:`w-3.5 h-3.5 ${r}`}),x.jsx("span",{className:"text-muted-foreground",children:e}),x.jsx("span",{className:`font-bold font-mono ${r}`,children:n})]})}const Xne={covered:{icon:jo,label:"Covered",color:"text-success",bg:"bg-success/10",border:"border-success/20"},partial:{icon:Iw,label:"Partial",color:"text-warning",bg:"bg-warning/10",border:"border-warning/20"},missing:{icon:Rw,label:"Missing",color:"text-destructive",bg:"bg-destructive/10",border:"border-destructive/20"}},KO=t=>t?new Date().getTime()-new Date(t).getTime()>90*24*60*60*1e3:!1,Yne=({onFillGap:t,statusFilter:e})=>{const{data:n,isLoading:r}=fI();return r||!n?x.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-card flex items-center justify-center min-h-[300px]",children:x.jsx(yn,{className:"w-6 h-6 text-primary animate-spin"})}):x.jsxs(At.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"rounded-xl border border-border bg-card p-6 shadow-card",children:[x.jsx("div",{className:"flex items-center justify-between mb-5",children:x.jsxs("div",{children:[x.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Skills Framework"}),x.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Coverage across sales competencies"})]})}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:n.map((i,s)=>{const o=i.skills.filter(c=>c.status==="covered").length,a=Math.round(o/i.skills.length*100),l=e?i.skills.filter(c=>e==="outdated"?KO(c.lastUpdated):c.status===e):i.skills;return e&&l.length===0?null:x.jsxs(At.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15+s*.04},className:"rounded-lg border border-border/60 bg-muted/20 p-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("span",{className:"text-sm font-semibold text-foreground",children:i.name}),x.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:e?`${l.length} of ${i.skills.length}`:`${a}%`})]}),!e&&x.jsx("div",{className:"h-1.5 rounded-full bg-muted mb-3 overflow-hidden",children:x.jsx(At.div,{className:"h-full rounded-full gradient-primary",initial:{width:0},animate:{width:`${a}%`},transition:{duration:1,delay:.3+s*.08}})}),x.jsx("div",{className:`grid gap-1.5 ${e?"mt-1":""}`,children:l.map(c=>{const d=Xne[c.status],h=d.icon,f=KO(c.lastUpdated),p=c.status==="missing"||c.status==="partial"||f;return x.jsxs("div",{className:`flex items-center justify-between rounded-lg px-3 py-2 border ${d.bg} ${d.border} ${p?"cursor-pointer hover:brightness-110 transition-all":""}`,onClick:()=>p&&(t==null?void 0:t(c.id,c.name)),children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(h,{className:`w-3.5 h-3.5 ${d.color}`}),x.jsx("span",{className:"text-sm text-foreground font-medium",children:c.name})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[c.lastUpdated&&x.jsx("span",{className:`text-[10px] font-mono ${f?"text-destructive font-semibold":"text-muted-foreground"}`,children:c.lastUpdated}),p&&x.jsx("span",{className:"text-[10px] font-semibold text-primary",children:f&&c.status==="covered"?"Update ":"Fill "})]})]},c.id)})})]},i.id)})})]})};function Qne(t){return gu({queryKey:["chat-history",t],queryFn:async()=>{const{data:e,error:n}=await Ce.from("chat_messages").select("*").eq("conversation_id",t).order("created_at",{ascending:!0});if(n)throw n;return(e??[]).map(r=>({id:r.id,role:r.role,content:r.content,timestamp:r.created_at}))},enabled:!!t})}function Jne(){const[t,e]=E.useState(!1),[n,r]=E.useState(""),[i,s]=E.useState([]),[o,a]=E.useState(!1),l=E.useRef(null),c=ds(),d=E.useCallback(async(f,p)=>{e(!0),r(""),s([]),a(!1);const m=new AbortController;l.current=m;try{const{data:{session:g}}=await Ce.auth.getSession();if(!g)throw new Error("Not authenticated");const v=await fetch("/functions/v1/chat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g.access_token}`},body:JSON.stringify({message:f,conversationId:p.conversationId,sectionContext:p.sectionContext}),signal:m.signal});if(!v.ok){const _=await v.json();throw new Error(_.error||"Chat request failed")}const y=v.body.getReader(),w=new TextDecoder;let b="";const k=[];for(;;){const{done:_,value:C}=await y.read();if(_)break;const R=w.decode(C,{stream:!0}).split(`
`);for(const M of R)if(M.startsWith("data: ")){const I=M.slice(6);if(I==="[DONE]")continue;try{const j=JSON.parse(I);j.type==="text"?(b+=j.text,r(b)):j.type==="tool_start"?a(!0):j.type==="staged_edit"?(a(!1),k.push(j.edit),s(U=>[...U,j.edit])):j.type==="tool_error"&&(a(!1),b+=`

*Error: ${j.error}*`,r(b))}catch{}}}return c.invalidateQueries({queryKey:["chat-history",p.conversationId]}),k.length>0&&c.invalidateQueries({queryKey:["staged-edits"]}),{content:b,edits:k}}finally{e(!1),r(""),a(!1),l.current=null}},[c]),h=E.useCallback(()=>{var f;(f=l.current)==null||f.abort()},[]);return{sendMessage:d,isStreaming:t,streamingContent:n,stagedEdits:i,isToolRunning:o,abort:h}}function Zne(){return gu({queryKey:["staged-edits"],queryFn:async()=>{const{data:t,error:e}=await Ce.from("staged_edits").select("*, playbook_sections!inner(title)").order("created_at",{ascending:!1});if(e)throw e;return(t??[]).map(n=>({id:n.id,sectionId:n.section_id,section:n.playbook_sections.title,before:n.before_text,after:n.after_text,timestamp:n.created_at,status:n.status,source:n.source??void 0}))}})}function ere(){const t=ds();return Ko({mutationFn:async e=>{const{data:{user:n}}=await Ce.auth.getUser(),r={section_id:e.sectionId,before_text:e.before,after_text:e.after,source:e.source,created_by:(n==null?void 0:n.id)??null};e.autoApprove&&(r.status="approved",r.reviewed_by=(n==null?void 0:n.id)??null,r.reviewed_at=new Date().toISOString());const{error:i}=await Ce.from("staged_edits").insert(r);if(i)throw i},onSuccess:()=>{t.invalidateQueries({queryKey:["staged-edits"]})}})}function JU(){const t=ds();return Ko({mutationFn:async e=>{const{data:{user:n}}=await Ce.auth.getUser(),{error:r}=await Ce.rpc("approve_staged_edit",{edit_id:e,reviewer_id:(n==null?void 0:n.id)??null});if(r)throw r},onSuccess:()=>{t.invalidateQueries({queryKey:["staged-edits"]}),t.invalidateQueries({queryKey:["playbook-sections"]})}})}function ZU(){const t=ds();return Ko({mutationFn:async e=>{const{data:{user:n}}=await Ce.auth.getUser(),{error:r}=await Ce.from("staged_edits").update({status:"rejected",reviewed_by:(n==null?void 0:n.id)??null,reviewed_at:new Date().toISOString()}).eq("id",e);if(r)throw r},onSuccess:()=>{t.invalidateQueries({queryKey:["staged-edits"]})}})}function tre(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const nre=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,rre=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ire={};function XO(t,e){return(ire.jsx?rre:nre).test(t)}const sre=/[ \t\n\f\r]/g;function ore(t){return typeof t=="object"?t.type==="text"?YO(t.value):!1:YO(t)}function YO(t){return t.replace(sre,"")===""}class Fw{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Fw.prototype.normal={};Fw.prototype.property={};Fw.prototype.space=void 0;function e4(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Fw(n,r,e)}function w_(t){return t.toLowerCase()}class Hr{constructor(e,n){this.attribute=n,this.property=e}}Hr.prototype.attribute="";Hr.prototype.booleanish=!1;Hr.prototype.boolean=!1;Hr.prototype.commaOrSpaceSeparated=!1;Hr.prototype.commaSeparated=!1;Hr.prototype.defined=!1;Hr.prototype.mustUseProperty=!1;Hr.prototype.number=!1;Hr.prototype.overloadedBoolean=!1;Hr.prototype.property="";Hr.prototype.spaceSeparated=!1;Hr.prototype.space=void 0;let are=0;const Se=$h(),nn=$h(),b_=$h(),Q=$h(),ht=$h(),Zf=$h(),Yr=$h();function $h(){return 2**++are}const x_=Object.freeze(Object.defineProperty({__proto__:null,boolean:Se,booleanish:nn,commaOrSpaceSeparated:Yr,commaSeparated:Zf,number:Q,overloadedBoolean:b_,spaceSeparated:ht},Symbol.toStringTag,{value:"Module"})),UE=Object.keys(x_);class pI extends Hr{constructor(e,n,r,i){let s=-1;if(super(e,n),QO(this,"space",i),typeof r=="number")for(;++s<UE.length;){const o=UE[s];QO(this,UE[s],(r&x_[o])===x_[o])}}}pI.prototype.defined=!0;function QO(t,e,n){n&&(t[e]=n)}function mg(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new pI(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[w_(r)]=r,n[w_(s.attribute)]=r}return new Fw(e,n,t.space)}const t4=mg({properties:{ariaActiveDescendant:null,ariaAtomic:nn,ariaAutoComplete:null,ariaBusy:nn,ariaChecked:nn,ariaColCount:Q,ariaColIndex:Q,ariaColSpan:Q,ariaControls:ht,ariaCurrent:null,ariaDescribedBy:ht,ariaDetails:null,ariaDisabled:nn,ariaDropEffect:ht,ariaErrorMessage:null,ariaExpanded:nn,ariaFlowTo:ht,ariaGrabbed:nn,ariaHasPopup:null,ariaHidden:nn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ht,ariaLevel:Q,ariaLive:null,ariaModal:nn,ariaMultiLine:nn,ariaMultiSelectable:nn,ariaOrientation:null,ariaOwns:ht,ariaPlaceholder:null,ariaPosInSet:Q,ariaPressed:nn,ariaReadOnly:nn,ariaRelevant:null,ariaRequired:nn,ariaRoleDescription:ht,ariaRowCount:Q,ariaRowIndex:Q,ariaRowSpan:Q,ariaSelected:nn,ariaSetSize:Q,ariaSort:null,ariaValueMax:Q,ariaValueMin:Q,ariaValueNow:Q,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function n4(t,e){return e in t?t[e]:e}function r4(t,e){return n4(t,e.toLowerCase())}const lre=mg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Zf,acceptCharset:ht,accessKey:ht,action:null,allow:null,allowFullScreen:Se,allowPaymentRequest:Se,allowUserMedia:Se,alt:null,as:null,async:Se,autoCapitalize:null,autoComplete:ht,autoFocus:Se,autoPlay:Se,blocking:ht,capture:null,charSet:null,checked:Se,cite:null,className:ht,cols:Q,colSpan:null,content:null,contentEditable:nn,controls:Se,controlsList:ht,coords:Q|Zf,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Se,defer:Se,dir:null,dirName:null,disabled:Se,download:b_,draggable:nn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Se,formTarget:null,headers:ht,height:Q,hidden:b_,high:Q,href:null,hrefLang:null,htmlFor:ht,httpEquiv:ht,id:null,imageSizes:null,imageSrcSet:null,inert:Se,inputMode:null,integrity:null,is:null,isMap:Se,itemId:null,itemProp:ht,itemRef:ht,itemScope:Se,itemType:ht,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Se,low:Q,manifest:null,max:null,maxLength:Q,media:null,method:null,min:null,minLength:Q,multiple:Se,muted:Se,name:null,nonce:null,noModule:Se,noValidate:Se,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Se,optimum:Q,pattern:null,ping:ht,placeholder:null,playsInline:Se,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Se,referrerPolicy:null,rel:ht,required:Se,reversed:Se,rows:Q,rowSpan:Q,sandbox:ht,scope:null,scoped:Se,seamless:Se,selected:Se,shadowRootClonable:Se,shadowRootDelegatesFocus:Se,shadowRootMode:null,shape:null,size:Q,sizes:null,slot:null,span:Q,spellCheck:nn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Q,step:null,style:null,tabIndex:Q,target:null,title:null,translate:null,type:null,typeMustMatch:Se,useMap:null,value:nn,width:Q,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ht,axis:null,background:null,bgColor:null,border:Q,borderColor:null,bottomMargin:Q,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Se,declare:Se,event:null,face:null,frame:null,frameBorder:null,hSpace:Q,leftMargin:Q,link:null,longDesc:null,lowSrc:null,marginHeight:Q,marginWidth:Q,noResize:Se,noHref:Se,noShade:Se,noWrap:Se,object:null,profile:null,prompt:null,rev:null,rightMargin:Q,rules:null,scheme:null,scrolling:nn,standby:null,summary:null,text:null,topMargin:Q,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Q,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Se,disableRemotePlayback:Se,prefix:null,property:null,results:Q,security:null,unselectable:null},space:"html",transform:r4}),cre=mg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Yr,accentHeight:Q,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Q,amplitude:Q,arabicForm:null,ascent:Q,attributeName:null,attributeType:null,azimuth:Q,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Q,by:null,calcMode:null,capHeight:Q,className:ht,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Q,diffuseConstant:Q,direction:null,display:null,dur:null,divisor:Q,dominantBaseline:null,download:Se,dx:null,dy:null,edgeMode:null,editable:null,elevation:Q,enableBackground:null,end:null,event:null,exponent:Q,externalResourcesRequired:null,fill:null,fillOpacity:Q,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Zf,g2:Zf,glyphName:Zf,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Q,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Q,horizOriginX:Q,horizOriginY:Q,id:null,ideographic:Q,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Q,k:Q,k1:Q,k2:Q,k3:Q,k4:Q,kernelMatrix:Yr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Q,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Q,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Q,overlineThickness:Q,paintOrder:null,panose1:null,path:null,pathLength:Q,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ht,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Q,pointsAtY:Q,pointsAtZ:Q,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Yr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Yr,rev:Yr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Yr,requiredFeatures:Yr,requiredFonts:Yr,requiredFormats:Yr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Q,specularExponent:Q,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Q,strikethroughThickness:Q,string:null,stroke:null,strokeDashArray:Yr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Q,strokeOpacity:Q,strokeWidth:null,style:null,surfaceScale:Q,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Yr,tabIndex:Q,tableValues:null,target:null,targetX:Q,targetY:Q,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Yr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Q,underlineThickness:Q,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Q,values:null,vAlphabetic:Q,vMathematical:Q,vectorEffect:null,vHanging:Q,vIdeographic:Q,version:null,vertAdvY:Q,vertOriginX:Q,vertOriginY:Q,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Q,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:n4}),i4=mg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),s4=mg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:r4}),o4=mg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),ure={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},dre=/[A-Z]/g,JO=/-[a-z]/g,hre=/^data[-\w.:]+$/i;function fre(t,e){const n=w_(e);let r=e,i=Hr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&hre.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(JO,mre);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!JO.test(s)){let o=s.replace(dre,pre);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=pI}return new i(r,e)}function pre(t){return"-"+t.toLowerCase()}function mre(t){return t.charAt(1).toUpperCase()}const gre=e4([t4,lre,i4,s4,o4],"html"),mI=e4([t4,cre,i4,s4,o4],"svg");function yre(t){return t.join(" ").trim()}var gI={},ZO=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,vre=/\n/g,wre=/^\s*/,bre=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,xre=/^:\s*/,Sre=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,kre=/^[;\s]*/,Ere=/^\s+|\s+$/g,Are=`
`,eL="/",tL="*",Bu="",Cre="comment",_re="declaration";function Tre(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(m){var g=m.match(vre);g&&(n+=g.length);var v=m.lastIndexOf(Are);r=~v?m.length-v:r+m.length}function s(){var m={line:n,column:r};return function(g){return g.position=new o(m),c(),g}}function o(m){this.start=m,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(m){var g=new Error(e.source+":"+n+":"+r+": "+m);if(g.reason=m,g.filename=e.source,g.line=n,g.column=r,g.source=t,!e.silent)throw g}function l(m){var g=m.exec(t);if(g){var v=g[0];return i(v),t=t.slice(v.length),g}}function c(){l(wre)}function d(m){var g;for(m=m||[];g=h();)g!==!1&&m.push(g);return m}function h(){var m=s();if(!(eL!=t.charAt(0)||tL!=t.charAt(1))){for(var g=2;Bu!=t.charAt(g)&&(tL!=t.charAt(g)||eL!=t.charAt(g+1));)++g;if(g+=2,Bu===t.charAt(g-1))return a("End of comment missing");var v=t.slice(2,g-2);return r+=2,i(v),t=t.slice(g),r+=2,m({type:Cre,comment:v})}}function f(){var m=s(),g=l(bre);if(g){if(h(),!l(xre))return a("property missing ':'");var v=l(Sre),y=m({type:_re,property:nL(g[0].replace(ZO,Bu)),value:v?nL(v[0].replace(ZO,Bu)):Bu});return l(kre),y}}function p(){var m=[];d(m);for(var g;g=f();)g!==!1&&(m.push(g),d(m));return m}return c(),p()}function nL(t){return t?t.replace(Ere,Bu):Bu}var Pre=Tre,Rre=Zx&&Zx.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gI,"__esModule",{value:!0});gI.default=Nre;const Ire=Rre(Pre);function Nre(t,e){let n=null;if(!t||typeof t!="string")return n;const r=(0,Ire.default)(t),i=typeof e=="function";return r.forEach(s=>{if(s.type!=="declaration")return;const{property:o,value:a}=s;i?e(o,a,s):a&&(n=n||{},n[o]=a)}),n}var uk={};Object.defineProperty(uk,"__esModule",{value:!0});uk.camelCase=void 0;var Dre=/^--[a-zA-Z0-9_-]+$/,Mre=/-([a-z])/g,Ore=/^[^-]+$/,Lre=/^-(webkit|moz|ms|o|khtml)-/,jre=/^-(ms)-/,Fre=function(t){return!t||Ore.test(t)||Dre.test(t)},Bre=function(t,e){return e.toUpperCase()},rL=function(t,e){return"".concat(e,"-")},$re=function(t,e){return e===void 0&&(e={}),Fre(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(jre,rL):t=t.replace(Lre,rL),t.replace(Mre,Bre))};uk.camelCase=$re;var Ure=Zx&&Zx.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},zre=Ure(gI),Vre=uk;function S_(t,e){var n={};return!t||typeof t!="string"||(0,zre.default)(t,function(r,i){r&&i&&(n[(0,Vre.camelCase)(r,e)]=i)}),n}S_.default=S_;var Hre=S_;const Wre=CS(Hre),a4=l4("end"),yI=l4("start");function l4(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Gre(t){const e=yI(t),n=a4(t);if(e&&n)return{start:e,end:n}}function Iy(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?iL(t.position):"start"in t||"end"in t?iL(t):"line"in t||"column"in t?k_(t):""}function k_(t){return sL(t&&t.line)+":"+sL(t&&t.column)}function iL(t){return k_(t&&t.start)+"-"+k_(t&&t.end)}function sL(t){return t&&typeof t=="number"?t:1}class sr extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Iy(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}sr.prototype.file="";sr.prototype.name="";sr.prototype.reason="";sr.prototype.message="";sr.prototype.stack="";sr.prototype.column=void 0;sr.prototype.line=void 0;sr.prototype.ancestors=void 0;sr.prototype.cause=void 0;sr.prototype.fatal=void 0;sr.prototype.place=void 0;sr.prototype.ruleId=void 0;sr.prototype.source=void 0;const vI={}.hasOwnProperty,qre=new Map,Kre=/[A-Z]/g,Xre=new Set(["table","tbody","thead","tfoot","tr"]),Yre=new Set(["td","th"]),c4="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Qre(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=sie(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=iie(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?mI:gre,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=u4(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function u4(t,e,n){if(e.type==="element")return Jre(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Zre(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return tie(t,e,n);if(e.type==="mdxjsEsm")return eie(t,e);if(e.type==="root")return nie(t,e,n);if(e.type==="text")return rie(t,e)}function Jre(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=mI,t.schema=i),t.ancestors.push(e);const s=h4(t,e.tagName,!1),o=oie(t,e);let a=bI(t,e);return Xre.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!ore(l):!0})),d4(t,o,s,e),wI(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function Zre(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}gv(t,e.position)}function eie(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);gv(t,e.position)}function tie(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=mI,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:h4(t,e.name,!0),o=aie(t,e),a=bI(t,e);return d4(t,o,s,e),wI(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function nie(t,e,n){const r={};return wI(r,bI(t,e)),t.create(e,t.Fragment,r,n)}function rie(t,e){return e.value}function d4(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function wI(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function iie(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function sie(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=yI(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function oie(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&vI.call(e.properties,i)){const s=lie(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Yre.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function aie(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else gv(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else gv(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function bI(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:qre;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=u4(t,s,o);a!==void 0&&n.push(a)}return n}function lie(t,e,n){const r=fre(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?tre(n):yre(n)),r.property==="style"){let i=typeof n=="object"?n:cie(t,String(n));return t.stylePropertyNameCase==="css"&&(i=uie(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?ure[r.property]||r.property:r.attribute,n]}}function cie(t,e){try{return Wre(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new sr("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=c4+"#cannot-parse-style-attribute",i}}function h4(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=XO(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=XO(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return vI.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);gv(t)}function gv(t,e){const n=new sr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=c4+"#cannot-handle-mdx-estrees-without-createevaluater",n}function uie(t){const e={};let n;for(n in t)vI.call(t,n)&&(e[die(n)]=t[n]);return e}function die(t){let e=t.replace(Kre,hie);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function hie(t){return"-"+t.toLowerCase()}const zE={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},fie={};function xI(t,e){const n=fie,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return f4(t,r,i)}function f4(t,e,n){if(pie(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return oL(t.children,e,n)}return Array.isArray(t)?oL(t,e,n):""}function oL(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=f4(t[i],e,n);return r.join("")}function pie(t){return!!(t&&typeof t=="object")}const aL=document.createElement("i");function SI(t){const e="&"+t+";";aL.innerHTML=e;const n=aL.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function _i(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function es(t,e){return t.length>0?(_i(t,t.length,0,e),t):e}const lL={}.hasOwnProperty;function p4(t){const e={};let n=-1;for(;++n<t.length;)mie(e,t[n]);return e}function mie(t,e){let n;for(n in e){const i=(lL.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){lL.call(i,o)||(i[o]=[]);const a=s[o];gie(i[o],Array.isArray(a)?a:a?[a]:[])}}}function gie(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);_i(t,0,0,r)}function m4(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ws(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const gr=bu(/[A-Za-z]/),rr=bu(/[\dA-Za-z]/),yie=bu(/[#-'*+\--9=?A-Z^-~]/);function V1(t){return t!==null&&(t<32||t===127)}const E_=bu(/\d/),vie=bu(/[\dA-Fa-f]/),wie=bu(/[!-/:-@[-`{-~]/);function ue(t){return t!==null&&t<-2}function lt(t){return t!==null&&(t<0||t===32)}function Te(t){return t===-2||t===-1||t===32}const dk=bu(new RegExp("\\p{P}|\\p{S}","u")),Ph=bu(/\s/);function bu(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function gg(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&rr(t.charCodeAt(n+1))&&rr(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Le(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Te(l)?(t.enter(n),a(l)):e(l)}function a(l){return Te(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const bie={tokenize:xie};function xie(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Le(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return ue(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const Sie={tokenize:kie},cL={tokenize:Eie};function kie(t){const e=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const k=n[r];return e.containerState=k[1],t.attempt(k[0].continuation,l,c)(b)}return c(b)}function l(b){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&w();const k=e.events.length;let _=k,C;for(;_--;)if(e.events[_][0]==="exit"&&e.events[_][1].type==="chunkFlow"){C=e.events[_][1].end;break}y(r);let P=k;for(;P<e.events.length;)e.events[P][1].end={...C},P++;return _i(e.events,_+1,0,e.events.slice(k)),e.events.length=P,c(b)}return a(b)}function c(b){if(r===n.length){if(!i)return f(b);if(i.currentConstruct&&i.currentConstruct.concrete)return m(b);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(cL,d,h)(b)}function d(b){return i&&w(),y(r),f(b)}function h(b){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,m(b)}function f(b){return e.containerState={},t.attempt(cL,p,m)(b)}function p(b){return r++,n.push([e.currentConstruct,e.containerState]),f(b)}function m(b){if(b===null){i&&w(),y(0),t.consume(b);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),g(b)}function g(b){if(b===null){v(t.exit("chunkFlow"),!0),y(0),t.consume(b);return}return ue(b)?(t.consume(b),v(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(b),g)}function v(b,k){const _=e.sliceStream(b);if(k&&_.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(_),e.parser.lazy[b.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const P=e.events.length;let R=P,M,I;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){if(M){I=e.events[R][1].end;break}M=!0}for(y(r),C=P;C<e.events.length;)e.events[C][1].end={...I},C++;_i(e.events,R+1,0,e.events.slice(P)),e.events.length=C}}function y(b){let k=n.length;for(;k-- >b;){const _=n[k];e.containerState=_[1],_[0].exit.call(e,t)}n.length=b}function w(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function Eie(t,e,n){return Le(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Qm(t){if(t===null||lt(t)||Ph(t))return 1;if(dk(t))return 2}function hk(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const A_={name:"attention",resolveAll:Aie,tokenize:Cie};function Aie(t,e){let n=-1,r,i,s,o,a,l,c,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},f={...t[n][1].start};uL(h,-l),uL(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=es(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=es(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=es(c,hk(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=es(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,c=es(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,_i(t,r-1,n-r+3,c),n=r+c.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Cie(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Qm(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),d=Qm(l),h=!d||d===2&&i||n.includes(l),f=!i||i===2&&d||n.includes(r);return c._open=!!(s===42?h:h&&(i||!f)),c._close=!!(s===42?f:f&&(d||!h)),e(l)}}function uL(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const _ie={name:"autolink",tokenize:Tie};function Tie(t,e,n){let r=0;return i;function i(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(p){return gr(p)?(t.consume(p),o):p===64?n(p):c(p)}function o(p){return p===43||p===45||p===46||rr(p)?(r=1,a(p)):c(p)}function a(p){return p===58?(t.consume(p),r=0,l):(p===43||p===45||p===46||rr(p))&&r++<32?(t.consume(p),a):(r=0,c(p))}function l(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||V1(p)?n(p):(t.consume(p),l)}function c(p){return p===64?(t.consume(p),d):yie(p)?(t.consume(p),c):n(p)}function d(p){return rr(p)?h(p):n(p)}function h(p){return p===46?(t.consume(p),r=0,d):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):f(p)}function f(p){if((p===45||rr(p))&&r++<63){const m=p===45?f:h;return t.consume(p),m}return n(p)}}const Bw={partial:!0,tokenize:Pie};function Pie(t,e,n){return r;function r(s){return Te(s)?Le(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||ue(s)?e(s):n(s)}}const g4={continuation:{tokenize:Iie},exit:Nie,name:"blockQuote",tokenize:Rie};function Rie(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Te(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function Iie(t,e,n){const r=this;return i;function i(o){return Te(o)?Le(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(g4,e,n)(o)}}function Nie(t){t.exit("blockQuote")}const y4={name:"characterEscape",tokenize:Die};function Die(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return wie(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const v4={name:"characterReference",tokenize:Mie};function Mie(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=rr,d(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=vie,d):(t.enter("characterReferenceValue"),s=7,o=E_,d(h))}function d(h){if(h===59&&i){const f=t.exit("characterReferenceValue");return o===rr&&!SI(r.sliceSerialize(f))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),d):n(h)}}const dL={partial:!0,tokenize:Lie},hL={concrete:!0,name:"codeFenced",tokenize:Oie};function Oie(t,e,n){const r=this,i={partial:!0,tokenize:_};let s=0,o=0,a;return l;function l(C){return c(C)}function c(C){const P=r.events[r.events.length-1];return s=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,a=C,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(C)}function d(C){return C===a?(o++,t.consume(C),d):o<3?n(C):(t.exit("codeFencedFenceSequence"),Te(C)?Le(t,h,"whitespace")(C):h(C))}function h(C){return C===null||ue(C)?(t.exit("codeFencedFence"),r.interrupt?e(C):t.check(dL,g,k)(C)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(C))}function f(C){return C===null||ue(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(C)):Te(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Le(t,p,"whitespace")(C)):C===96&&C===a?n(C):(t.consume(C),f)}function p(C){return C===null||ue(C)?h(C):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),m(C))}function m(C){return C===null||ue(C)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(C)):C===96&&C===a?n(C):(t.consume(C),m)}function g(C){return t.attempt(i,k,v)(C)}function v(C){return t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),y}function y(C){return s>0&&Te(C)?Le(t,w,"linePrefix",s+1)(C):w(C)}function w(C){return C===null||ue(C)?t.check(dL,g,k)(C):(t.enter("codeFlowValue"),b(C))}function b(C){return C===null||ue(C)?(t.exit("codeFlowValue"),w(C)):(t.consume(C),b)}function k(C){return t.exit("codeFenced"),e(C)}function _(C,P,R){let M=0;return I;function I(V){return C.enter("lineEnding"),C.consume(V),C.exit("lineEnding"),j}function j(V){return C.enter("codeFencedFence"),Te(V)?Le(C,U,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):U(V)}function U(V){return V===a?(C.enter("codeFencedFenceSequence"),G(V)):R(V)}function G(V){return V===a?(M++,C.consume(V),G):M>=o?(C.exit("codeFencedFenceSequence"),Te(V)?Le(C,B,"whitespace")(V):B(V)):R(V)}function B(V){return V===null||ue(V)?(C.exit("codeFencedFence"),P(V)):R(V)}}}function Lie(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const VE={name:"codeIndented",tokenize:Fie},jie={partial:!0,tokenize:Bie};function Fie(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),Le(t,s,"linePrefix",5)(c)}function s(c){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):ue(c)?t.attempt(jie,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||ue(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function Bie(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):ue(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Le(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):ue(o)?i(o):n(o)}}const $ie={name:"codeText",previous:zie,resolve:Uie,tokenize:Vie};function Uie(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function zie(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Vie(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,d(h)):ue(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||ue(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function d(h){return h===96?(t.consume(h),i++,d):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class Hie{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Ig(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Ig(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Ig(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Ig(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Ig(this.left,n.reverse())}}}function Ig(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function w4(t){const e={};let n=-1,r,i,s,o,a,l,c;const d=new Hie(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Wie(d,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=d.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},a=d.slice(i,n),a.unshift(r),d.splice(i,n-i+1,a))}}return _i(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!c}function Wie(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let d,h,f=-1,p=n,m=0,g=0;const v=[g];for(;p;){for(;t.get(++i)[1]!==p;);s.push(i),p._tokenizer||(d=r.sliceStream(p),p.next||d.push(null),h&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(g=f+1,v.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):v.pop(),f=v.length;f--;){const y=a.slice(v[f],v[f+1]),w=s.pop();l.push([w,w+y.length-1]),t.splice(w,2,y)}for(l.reverse(),f=-1;++f<l.length;)c[m+l[f][0]]=m+l[f][1],m+=l[f][1]-l[f][0]-1;return c}const Gie={resolve:Kie,tokenize:Xie},qie={partial:!0,tokenize:Yie};function Kie(t){return w4(t),t}function Xie(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):ue(a)?t.check(qie,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Yie(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Le(t,s,"linePrefix")}function s(o){if(o===null||ue(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function b4(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return h;function h(y){return y===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(y),t.exit(s),f):y===null||y===32||y===41||V1(y)?n(y):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),g(y))}function f(y){return y===62?(t.enter(s),t.consume(y),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===62?(t.exit("chunkString"),t.exit(a),f(y)):y===null||y===60||ue(y)?n(y):(t.consume(y),y===92?m:p)}function m(y){return y===60||y===62||y===92?(t.consume(y),p):p(y)}function g(y){return!d&&(y===null||y===41||lt(y))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(y)):d<c&&y===40?(t.consume(y),d++,g):y===41?(t.consume(y),d--,g):y===null||y===32||y===40||V1(y)?n(y):(t.consume(y),y===92?v:g)}function v(y){return y===40||y===41||y===92?(t.consume(y),g):g(y)}}function x4(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(p){return t.enter(r),t.enter(i),t.consume(p),t.exit(i),t.enter(s),d}function d(p){return a>999||p===null||p===91||p===93&&!l||p===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(t.exit(s),t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):ue(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||ue(p)||a++>999?(t.exit("chunkString"),d(p)):(t.consume(p),l||(l=!Te(p)),p===92?f:h)}function f(p){return p===91||p===92||p===93?(t.consume(p),a++,h):h(p)}}function S4(t,e,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(t.enter(r),t.enter(i),t.consume(f),t.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):(t.enter(s),c(f))}function c(f){return f===o?(t.exit(s),l(o)):f===null?n(f):ue(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),Le(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===o||f===null||ue(f)?(t.exit("chunkString"),c(f)):(t.consume(f),f===92?h:d)}function h(f){return f===o||f===92?(t.consume(f),d):d(f)}}function Ny(t,e){let n;return r;function r(i){return ue(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Te(i)?Le(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const Qie={name:"definition",tokenize:Zie},Jie={partial:!0,tokenize:ese};function Zie(t,e,n){const r=this;let i;return s;function s(p){return t.enter("definition"),o(p)}function o(p){return x4.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function a(p){return i=Ws(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),l):n(p)}function l(p){return lt(p)?Ny(t,c)(p):c(p)}function c(p){return b4(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function d(p){return t.attempt(Jie,h,h)(p)}function h(p){return Te(p)?Le(t,f,"whitespace")(p):f(p)}function f(p){return p===null||ue(p)?(t.exit("definition"),r.parser.defined.push(i),e(p)):n(p)}}function ese(t,e,n){return r;function r(a){return lt(a)?Ny(t,i)(a):n(a)}function i(a){return S4(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Te(a)?Le(t,o,"whitespace")(a):o(a)}function o(a){return a===null||ue(a)?e(a):n(a)}}const tse={name:"hardBreakEscape",tokenize:nse};function nse(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return ue(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const rse={name:"headingAtx",resolve:ise,tokenize:sse};function ise(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},_i(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function sse(t,e,n){let r=0;return i;function i(d){return t.enter("atxHeading"),s(d)}function s(d){return t.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(t.consume(d),o):d===null||lt(d)?(t.exit("atxHeadingSequence"),a(d)):n(d)}function a(d){return d===35?(t.enter("atxHeadingSequence"),l(d)):d===null||ue(d)?(t.exit("atxHeading"),e(d)):Te(d)?Le(t,a,"whitespace")(d):(t.enter("atxHeadingText"),c(d))}function l(d){return d===35?(t.consume(d),l):(t.exit("atxHeadingSequence"),a(d))}function c(d){return d===null||d===35||lt(d)?(t.exit("atxHeadingText"),a(d)):(t.consume(d),c)}}const ose=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],fL=["pre","script","style","textarea"],ase={concrete:!0,name:"htmlFlow",resolveTo:use,tokenize:dse},lse={partial:!0,tokenize:fse},cse={partial:!0,tokenize:hse};function use(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function dse(t,e,n){const r=this;let i,s,o,a,l;return c;function c(D){return d(D)}function d(D){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(D),h}function h(D){return D===33?(t.consume(D),f):D===47?(t.consume(D),s=!0,g):D===63?(t.consume(D),i=3,r.interrupt?e:N):gr(D)?(t.consume(D),o=String.fromCharCode(D),v):n(D)}function f(D){return D===45?(t.consume(D),i=2,p):D===91?(t.consume(D),i=5,a=0,m):gr(D)?(t.consume(D),i=4,r.interrupt?e:N):n(D)}function p(D){return D===45?(t.consume(D),r.interrupt?e:N):n(D)}function m(D){const K="CDATA[";return D===K.charCodeAt(a++)?(t.consume(D),a===K.length?r.interrupt?e:U:m):n(D)}function g(D){return gr(D)?(t.consume(D),o=String.fromCharCode(D),v):n(D)}function v(D){if(D===null||D===47||D===62||lt(D)){const K=D===47,q=o.toLowerCase();return!K&&!s&&fL.includes(q)?(i=1,r.interrupt?e(D):U(D)):ose.includes(o.toLowerCase())?(i=6,K?(t.consume(D),y):r.interrupt?e(D):U(D)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(D):s?w(D):b(D))}return D===45||rr(D)?(t.consume(D),o+=String.fromCharCode(D),v):n(D)}function y(D){return D===62?(t.consume(D),r.interrupt?e:U):n(D)}function w(D){return Te(D)?(t.consume(D),w):I(D)}function b(D){return D===47?(t.consume(D),I):D===58||D===95||gr(D)?(t.consume(D),k):Te(D)?(t.consume(D),b):I(D)}function k(D){return D===45||D===46||D===58||D===95||rr(D)?(t.consume(D),k):_(D)}function _(D){return D===61?(t.consume(D),C):Te(D)?(t.consume(D),_):b(D)}function C(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(t.consume(D),l=D,P):Te(D)?(t.consume(D),C):R(D)}function P(D){return D===l?(t.consume(D),l=null,M):D===null||ue(D)?n(D):(t.consume(D),P)}function R(D){return D===null||D===34||D===39||D===47||D===60||D===61||D===62||D===96||lt(D)?_(D):(t.consume(D),R)}function M(D){return D===47||D===62||Te(D)?b(D):n(D)}function I(D){return D===62?(t.consume(D),j):n(D)}function j(D){return D===null||ue(D)?U(D):Te(D)?(t.consume(D),j):n(D)}function U(D){return D===45&&i===2?(t.consume(D),F):D===60&&i===1?(t.consume(D),L):D===62&&i===4?(t.consume(D),Y):D===63&&i===3?(t.consume(D),N):D===93&&i===5?(t.consume(D),z):ue(D)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(lse,$,G)(D)):D===null||ue(D)?(t.exit("htmlFlowData"),G(D)):(t.consume(D),U)}function G(D){return t.check(cse,B,$)(D)}function B(D){return t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),V}function V(D){return D===null||ue(D)?G(D):(t.enter("htmlFlowData"),U(D))}function F(D){return D===45?(t.consume(D),N):U(D)}function L(D){return D===47?(t.consume(D),o="",O):U(D)}function O(D){if(D===62){const K=o.toLowerCase();return fL.includes(K)?(t.consume(D),Y):U(D)}return gr(D)&&o.length<8?(t.consume(D),o+=String.fromCharCode(D),O):U(D)}function z(D){return D===93?(t.consume(D),N):U(D)}function N(D){return D===62?(t.consume(D),Y):D===45&&i===2?(t.consume(D),N):U(D)}function Y(D){return D===null||ue(D)?(t.exit("htmlFlowData"),$(D)):(t.consume(D),Y)}function $(D){return t.exit("htmlFlow"),e(D)}}function hse(t,e,n){const r=this;return i;function i(o){return ue(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function fse(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Bw,e,n)}}const pse={name:"htmlText",tokenize:mse};function mse(t,e,n){const r=this;let i,s,o;return a;function a(N){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(N),l}function l(N){return N===33?(t.consume(N),c):N===47?(t.consume(N),_):N===63?(t.consume(N),b):gr(N)?(t.consume(N),R):n(N)}function c(N){return N===45?(t.consume(N),d):N===91?(t.consume(N),s=0,m):gr(N)?(t.consume(N),w):n(N)}function d(N){return N===45?(t.consume(N),p):n(N)}function h(N){return N===null?n(N):N===45?(t.consume(N),f):ue(N)?(o=h,L(N)):(t.consume(N),h)}function f(N){return N===45?(t.consume(N),p):h(N)}function p(N){return N===62?F(N):N===45?f(N):h(N)}function m(N){const Y="CDATA[";return N===Y.charCodeAt(s++)?(t.consume(N),s===Y.length?g:m):n(N)}function g(N){return N===null?n(N):N===93?(t.consume(N),v):ue(N)?(o=g,L(N)):(t.consume(N),g)}function v(N){return N===93?(t.consume(N),y):g(N)}function y(N){return N===62?F(N):N===93?(t.consume(N),y):g(N)}function w(N){return N===null||N===62?F(N):ue(N)?(o=w,L(N)):(t.consume(N),w)}function b(N){return N===null?n(N):N===63?(t.consume(N),k):ue(N)?(o=b,L(N)):(t.consume(N),b)}function k(N){return N===62?F(N):b(N)}function _(N){return gr(N)?(t.consume(N),C):n(N)}function C(N){return N===45||rr(N)?(t.consume(N),C):P(N)}function P(N){return ue(N)?(o=P,L(N)):Te(N)?(t.consume(N),P):F(N)}function R(N){return N===45||rr(N)?(t.consume(N),R):N===47||N===62||lt(N)?M(N):n(N)}function M(N){return N===47?(t.consume(N),F):N===58||N===95||gr(N)?(t.consume(N),I):ue(N)?(o=M,L(N)):Te(N)?(t.consume(N),M):F(N)}function I(N){return N===45||N===46||N===58||N===95||rr(N)?(t.consume(N),I):j(N)}function j(N){return N===61?(t.consume(N),U):ue(N)?(o=j,L(N)):Te(N)?(t.consume(N),j):M(N)}function U(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),i=N,G):ue(N)?(o=U,L(N)):Te(N)?(t.consume(N),U):(t.consume(N),B)}function G(N){return N===i?(t.consume(N),i=void 0,V):N===null?n(N):ue(N)?(o=G,L(N)):(t.consume(N),G)}function B(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||lt(N)?M(N):(t.consume(N),B)}function V(N){return N===47||N===62||lt(N)?M(N):n(N)}function F(N){return N===62?(t.consume(N),t.exit("htmlTextData"),t.exit("htmlText"),e):n(N)}function L(N){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),O}function O(N){return Te(N)?Le(t,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):z(N)}function z(N){return t.enter("htmlTextData"),o(N)}}const kI={name:"labelEnd",resolveAll:wse,resolveTo:bse,tokenize:xse},gse={tokenize:Sse},yse={tokenize:kse},vse={tokenize:Ese};function wse(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&_i(t,0,t.length,n),t}function bse(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},d={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=es(a,t.slice(s+1,s+r+3)),a=es(a,[["enter",d,e]]),a=es(a,hk(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=es(a,[["exit",d,e],t[o-2],t[o-1],["exit",c,e]]),a=es(a,t.slice(o+1)),a=es(a,[["exit",l,e]]),_i(t,s,t.length,a),t}function xse(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?h(f):(o=r.parser.defined.includes(Ws(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):n(f)}function l(f){return f===40?t.attempt(gse,d,o?d:h)(f):f===91?t.attempt(yse,d,o?c:h)(f):o?d(f):h(f)}function c(f){return t.attempt(vse,d,h)(f)}function d(f){return e(f)}function h(f){return s._balanced=!0,n(f)}}function Sse(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return lt(h)?Ny(t,s)(h):s(h)}function s(h){return h===41?d(h):b4(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return lt(h)?Ny(t,l)(h):d(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?S4(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function c(h){return lt(h)?Ny(t,d)(h):d(h)}function d(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function kse(t,e,n){const r=this;return i;function i(a){return x4.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Ws(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function Ese(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const Ase={name:"labelStartImage",resolveAll:kI.resolveAll,tokenize:Cse};function Cse(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const _se={name:"labelStartLink",resolveAll:kI.resolveAll,tokenize:Tse};function Tse(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const HE={name:"lineEnding",tokenize:Pse};function Pse(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Le(t,e,"linePrefix")}}const px={name:"thematicBreak",tokenize:Rse};function Rse(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||ue(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Te(c)?Le(t,a,"whitespace")(c):a(c))}}const Er={continuation:{tokenize:Mse},exit:Lse,name:"list",tokenize:Dse},Ise={partial:!0,tokenize:jse},Nse={partial:!0,tokenize:Ose};function Dse(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(p){const m=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:E_(p)){if(r.containerState.type||(r.containerState.type=m,t.enter(m,{_container:!0})),m==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(px,n,c)(p):c(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(p)}return n(p)}function l(p){return E_(p)&&++o<10?(t.consume(p),l):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),c(p)):n(p)}function c(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(Bw,r.interrupt?n:d,t.attempt(Ise,f,h))}function d(p){return r.containerState.initialBlankLine=!0,s++,f(p)}function h(p){return Te(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),f):n(p)}function f(p){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}function Mse(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Bw,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Le(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Te(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(Nse,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Le(t,t.attempt(Er,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Ose(t,e,n){const r=this;return Le(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function Lse(t){t.exit(this.containerState.type)}function jse(t,e,n){const r=this;return Le(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Te(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const pL={name:"setextUnderline",resolveTo:Fse,tokenize:Bse};function Fse(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function Bse(t,e,n){const r=this;let i;return s;function s(c){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Te(c)?Le(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||ue(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const $se={tokenize:Use};function Use(t){const e=this,n=t.attempt(Bw,r,t.attempt(this.parser.constructs.flowInitial,i,Le(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Gie,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const zse={resolveAll:E4()},Vse=k4("string"),Hse=k4("text");function k4(t){return{resolveAll:E4(t==="text"?Wse:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(d){return c(d)?s(d):a(d)}function a(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),l}function l(d){return c(d)?(n.exit("data"),s(d)):(n.consume(d),l)}function c(d){if(d===null)return!0;const h=i[d];let f=-1;if(h)for(;++f<h.length;){const p=h[f];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function E4(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function Wse(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const Gse={42:Er,43:Er,45:Er,48:Er,49:Er,50:Er,51:Er,52:Er,53:Er,54:Er,55:Er,56:Er,57:Er,62:g4},qse={91:Qie},Kse={[-2]:VE,[-1]:VE,32:VE},Xse={35:rse,42:px,45:[pL,px],60:ase,61:pL,95:px,96:hL,126:hL},Yse={38:v4,92:y4},Qse={[-5]:HE,[-4]:HE,[-3]:HE,33:Ase,38:v4,42:A_,60:[_ie,pse],91:_se,92:[tse,y4],93:kI,95:A_,96:$ie},Jse={null:[A_,zse]},Zse={null:[42,95]},eoe={null:[]},toe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Zse,contentInitial:qse,disable:eoe,document:Gse,flow:Xse,flowInitial:Kse,insideSpan:Jse,string:Yse,text:Qse},Symbol.toStringTag,{value:"Module"}));function noe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:P(_),check:P(C),consume:w,enter:b,exit:k,interrupt:P(C,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:m,parser:t,previous:null,sliceSerialize:f,sliceStream:p,write:h};let d=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(j){return o=es(o,j),v(),o[o.length-1]!==null?[]:(R(e,0),c.events=hk(s,c.events,c),c.events)}function f(j,U){return ioe(p(j),U)}function p(j){return roe(o,j)}function m(){const{_bufferIndex:j,_index:U,line:G,column:B,offset:V}=r;return{_bufferIndex:j,_index:U,line:G,column:B,offset:V}}function g(j){i[j.line]=j.column,I()}function v(){let j;for(;r._index<o.length;){const U=o[r._index];if(typeof U=="string")for(j=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===j&&r._bufferIndex<U.length;)y(U.charCodeAt(r._bufferIndex));else y(U)}}function y(j){d=d(j)}function w(j){ue(j)?(r.line++,r.column=1,r.offset+=j===-3?2:1,I()):j!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=j}function b(j,U){const G=U||{};return G.type=j,G.start=m(),c.events.push(["enter",G,c]),a.push(G),G}function k(j){const U=a.pop();return U.end=m(),c.events.push(["exit",U,c]),U}function _(j,U){R(j,U.from)}function C(j,U){U.restore()}function P(j,U){return G;function G(B,V,F){let L,O,z,N;return Array.isArray(B)?$(B):"tokenize"in B?$([B]):Y(B);function Y(te){return ee;function ee(je){const Ne=je!==null&&te[je],gt=je!==null&&te.null,Wt=[...Array.isArray(Ne)?Ne:Ne?[Ne]:[],...Array.isArray(gt)?gt:gt?[gt]:[]];return $(Wt)(je)}}function $(te){return L=te,O=0,te.length===0?F:D(te[O])}function D(te){return ee;function ee(je){return N=M(),z=te,te.partial||(c.currentConstruct=te),te.name&&c.parser.constructs.disable.null.includes(te.name)?q():te.tokenize.call(U?Object.assign(Object.create(c),U):c,l,K,q)(je)}}function K(te){return j(z,N),V}function q(te){return N.restore(),++O<L.length?D(L[O]):F}}}function R(j,U){j.resolveAll&&!s.includes(j)&&s.push(j),j.resolve&&_i(c.events,U,c.events.length-U,j.resolve(c.events.slice(U),c)),j.resolveTo&&(c.events=j.resolveTo(c.events,c))}function M(){const j=m(),U=c.previous,G=c.currentConstruct,B=c.events.length,V=Array.from(a);return{from:B,restore:F};function F(){r=j,c.previous=U,c.currentConstruct=G,c.events.length=B,a=V,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function roe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function ioe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function soe(t){const r={constructs:p4([toe,...(t||{}).extensions||[]]),content:i(bie),defined:[],document:i(Sie),flow:i($se),lazy:{},string:i(Vse),text:i(Hse)};return r;function i(s){return o;function o(a){return noe(r,s,a)}}}function ooe(t){for(;!w4(t););return t}const mL=/[\0\t\n\r]/g;function aoe(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,d,h,f,p;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(mL.lastIndex=h,c=mL.exec(s),f=c&&c.index!==void 0?c.index:s.length,p=s.charCodeAt(f),!c){e=s.slice(h);break}if(p===10&&h===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<f&&(l.push(s.slice(h,f)),t+=f-h),p){case 0:{l.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,l.push(-2);t++<d;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=f+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const loe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function coe(t){return t.replace(loe,uoe)}function uoe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return m4(n.slice(s?2:1),s?16:10)}return SI(n)||t}const A4={}.hasOwnProperty;function doe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),hoe(n)(ooe(soe(n).document().write(aoe()(t,e,!0))))}function hoe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Yo),autolinkProtocol:M,autolinkEmail:M,atxHeading:s(Vh),blockQuote:s(gt),characterEscape:M,characterReference:M,codeFenced:s(Wt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Wt,o),codeText:s(Ni,o),codeTextData:M,data:M,codeFlowValue:M,definition:s(Gr),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(gl),hardBreakEscape:s(Su),hardBreakTrailing:s(Su),htmlFlow:s(Hh,o),htmlFlowData:M,htmlText:s(Hh,o),htmlTextData:M,image:s(ku),label:o,link:s(Yo),listItem:s(Eu),listItemValue:f,listOrdered:s(yg,h),listUnordered:s(yg),paragraph:s(Kw),reference:D,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Vh),strong:s(Qo),thematicBreak:s(Dk)},exit:{atxHeading:l(),atxHeadingSequence:_,autolink:l(),autolinkEmail:Ne,autolinkProtocol:je,blockQuote:l(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:q,characterReferenceMarkerNumeric:q,characterReferenceValue:te,characterReference:ee,codeFenced:l(v),codeFencedFence:g,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:I,codeIndented:l(y),codeText:l(V),codeTextData:I,data:I,definition:l(),definitionDestinationString:k,definitionLabelString:w,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(U),hardBreakTrailing:l(U),htmlFlow:l(G),htmlFlowData:I,htmlText:l(B),htmlTextData:I,image:l(L),label:z,labelText:O,lineEnding:j,link:l(F),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:K,resourceDestinationString:N,resourceTitleString:Y,resource:$,setextHeading:l(R),setextHeadingLineSequence:P,setextHeadingText:C,strong:l(),thematicBreak:l()}};C4(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(W){let J={type:"root",children:[]};const pe={stack:[J],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:d,data:n},_e=[];let ze=-1;for(;++ze<W.length;)if(W[ze][1].type==="listOrdered"||W[ze][1].type==="listUnordered")if(W[ze][0]==="enter")_e.push(ze);else{const qr=_e.pop();ze=i(W,qr,ze)}for(ze=-1;++ze<W.length;){const qr=e[W[ze][0]];A4.call(qr,W[ze][1].type)&&qr[W[ze][1].type].call(Object.assign({sliceSerialize:W[ze][2].sliceSerialize},pe),W[ze][1])}if(pe.tokenStack.length>0){const qr=pe.tokenStack[pe.tokenStack.length-1];(qr[1]||gL).call(pe,void 0,qr[0])}for(J.position={start:Al(W.length>0?W[0][1].start:{line:1,column:1,offset:0}),end:Al(W.length>0?W[W.length-2][1].end:{line:1,column:1,offset:0})},ze=-1;++ze<e.transforms.length;)J=e.transforms[ze](J)||J;return J}function i(W,J,pe){let _e=J-1,ze=-1,qr=!1,Qs,Kr,Di,yl;for(;++_e<=pe;){const Jt=W[_e];switch(Jt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Jt[0]==="enter"?ze++:ze--,yl=void 0;break}case"lineEndingBlank":{Jt[0]==="enter"&&(Qs&&!yl&&!ze&&!Di&&(Di=_e),yl=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:yl=void 0}if(!ze&&Jt[0]==="enter"&&Jt[1].type==="listItemPrefix"||ze===-1&&Jt[0]==="exit"&&(Jt[1].type==="listUnordered"||Jt[1].type==="listOrdered")){if(Qs){let vl=_e;for(Kr=void 0;vl--;){const hs=W[vl];if(hs[1].type==="lineEnding"||hs[1].type==="lineEndingBlank"){if(hs[0]==="exit")continue;Kr&&(W[Kr][1].type="lineEndingBlank",qr=!0),hs[1].type="lineEnding",Kr=vl}else if(!(hs[1].type==="linePrefix"||hs[1].type==="blockQuotePrefix"||hs[1].type==="blockQuotePrefixWhitespace"||hs[1].type==="blockQuoteMarker"||hs[1].type==="listItemIndent"))break}Di&&(!Kr||Di<Kr)&&(Qs._spread=!0),Qs.end=Object.assign({},Kr?W[Kr][1].start:Jt[1].end),W.splice(Kr||_e,0,["exit",Qs,Jt[2]]),_e++,pe++}if(Jt[1].type==="listItemPrefix"){const vl={type:"listItem",_spread:!1,start:Object.assign({},Jt[1].start),end:void 0};Qs=vl,W.splice(_e,0,["enter",vl,Jt[2]]),_e++,pe++,Di=void 0,yl=!0}}}return W[J][1]._spread=qr,pe}function s(W,J){return pe;function pe(_e){a.call(this,W(_e),_e),J&&J.call(this,_e)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(W,J,pe){this.stack[this.stack.length-1].children.push(W),this.stack.push(W),this.tokenStack.push([J,pe||void 0]),W.position={start:Al(J.start),end:void 0}}function l(W){return J;function J(pe){W&&W.call(this,pe),c.call(this,pe)}}function c(W,J){const pe=this.stack.pop(),_e=this.tokenStack.pop();if(_e)_e[0].type!==W.type&&(J?J.call(this,W,_e[0]):(_e[1]||gL).call(this,W,_e[0]));else throw new Error("Cannot close `"+W.type+"` ("+Iy({start:W.start,end:W.end})+"): its not open");pe.position.end=Al(W.end)}function d(){return xI(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(W){if(this.data.expectingFirstListItemValue){const J=this.stack[this.stack.length-2];J.start=Number.parseInt(this.sliceSerialize(W),10),this.data.expectingFirstListItemValue=void 0}}function p(){const W=this.resume(),J=this.stack[this.stack.length-1];J.lang=W}function m(){const W=this.resume(),J=this.stack[this.stack.length-1];J.meta=W}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function v(){const W=this.resume(),J=this.stack[this.stack.length-1];J.value=W.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const W=this.resume(),J=this.stack[this.stack.length-1];J.value=W.replace(/(\r?\n|\r)$/g,"")}function w(W){const J=this.resume(),pe=this.stack[this.stack.length-1];pe.label=J,pe.identifier=Ws(this.sliceSerialize(W)).toLowerCase()}function b(){const W=this.resume(),J=this.stack[this.stack.length-1];J.title=W}function k(){const W=this.resume(),J=this.stack[this.stack.length-1];J.url=W}function _(W){const J=this.stack[this.stack.length-1];if(!J.depth){const pe=this.sliceSerialize(W).length;J.depth=pe}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function P(W){const J=this.stack[this.stack.length-1];J.depth=this.sliceSerialize(W).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function M(W){const pe=this.stack[this.stack.length-1].children;let _e=pe[pe.length-1];(!_e||_e.type!=="text")&&(_e=Nk(),_e.position={start:Al(W.start),end:void 0},pe.push(_e)),this.stack.push(_e)}function I(W){const J=this.stack.pop();J.value+=this.sliceSerialize(W),J.position.end=Al(W.end)}function j(W){const J=this.stack[this.stack.length-1];if(this.data.atHardBreak){const pe=J.children[J.children.length-1];pe.position.end=Al(W.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(J.type)&&(M.call(this,W),I.call(this,W))}function U(){this.data.atHardBreak=!0}function G(){const W=this.resume(),J=this.stack[this.stack.length-1];J.value=W}function B(){const W=this.resume(),J=this.stack[this.stack.length-1];J.value=W}function V(){const W=this.resume(),J=this.stack[this.stack.length-1];J.value=W}function F(){const W=this.stack[this.stack.length-1];if(this.data.inReference){const J=this.data.referenceType||"shortcut";W.type+="Reference",W.referenceType=J,delete W.url,delete W.title}else delete W.identifier,delete W.label;this.data.referenceType=void 0}function L(){const W=this.stack[this.stack.length-1];if(this.data.inReference){const J=this.data.referenceType||"shortcut";W.type+="Reference",W.referenceType=J,delete W.url,delete W.title}else delete W.identifier,delete W.label;this.data.referenceType=void 0}function O(W){const J=this.sliceSerialize(W),pe=this.stack[this.stack.length-2];pe.label=coe(J),pe.identifier=Ws(J).toLowerCase()}function z(){const W=this.stack[this.stack.length-1],J=this.resume(),pe=this.stack[this.stack.length-1];if(this.data.inReference=!0,pe.type==="link"){const _e=W.children;pe.children=_e}else pe.alt=J}function N(){const W=this.resume(),J=this.stack[this.stack.length-1];J.url=W}function Y(){const W=this.resume(),J=this.stack[this.stack.length-1];J.title=W}function $(){this.data.inReference=void 0}function D(){this.data.referenceType="collapsed"}function K(W){const J=this.resume(),pe=this.stack[this.stack.length-1];pe.label=J,pe.identifier=Ws(this.sliceSerialize(W)).toLowerCase(),this.data.referenceType="full"}function q(W){this.data.characterReferenceType=W.type}function te(W){const J=this.sliceSerialize(W),pe=this.data.characterReferenceType;let _e;pe?(_e=m4(J,pe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):_e=SI(J);const ze=this.stack[this.stack.length-1];ze.value+=_e}function ee(W){const J=this.stack.pop();J.position.end=Al(W.end)}function je(W){I.call(this,W);const J=this.stack[this.stack.length-1];J.url=this.sliceSerialize(W)}function Ne(W){I.call(this,W);const J=this.stack[this.stack.length-1];J.url="mailto:"+this.sliceSerialize(W)}function gt(){return{type:"blockquote",children:[]}}function Wt(){return{type:"code",lang:null,meta:null,value:""}}function Ni(){return{type:"inlineCode",value:""}}function Gr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function gl(){return{type:"emphasis",children:[]}}function Vh(){return{type:"heading",depth:0,children:[]}}function Su(){return{type:"break"}}function Hh(){return{type:"html",value:""}}function ku(){return{type:"image",title:null,url:"",alt:null}}function Yo(){return{type:"link",title:null,url:"",children:[]}}function yg(W){return{type:"list",ordered:W.type==="listOrdered",start:null,spread:W._spread,children:[]}}function Eu(W){return{type:"listItem",spread:W._spread,checked:null,children:[]}}function Kw(){return{type:"paragraph",children:[]}}function Qo(){return{type:"strong",children:[]}}function Nk(){return{type:"text",value:""}}function Dk(){return{type:"thematicBreak"}}}function Al(t){return{line:t.line,column:t.column,offset:t.offset}}function C4(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?C4(t,r):foe(t,r)}}function foe(t,e){let n;for(n in e)if(A4.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function gL(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Iy({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Iy({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Iy({start:e.start,end:e.end})+") is still open")}function poe(t){const e=this;e.parser=n;function n(r){return doe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function moe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function goe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function yoe(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function voe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function woe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function boe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=gg(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function xoe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Soe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function _4(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function koe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return _4(t,e);const i={src:gg(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function Eoe(t,e){const n={src:gg(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function Aoe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function Coe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return _4(t,e);const i={href:gg(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function _oe(t,e){const n={href:gg(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Toe(t,e,n){const r=t.all(e),i=n?Poe(n):T4(e),s={},o=[];if(typeof e.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const d=r[a];(i||a!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?o.push(...d.children):o.push(d)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function Poe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=T4(n[r])}return e}function T4(t){const e=t.spread;return e??t.children.length>1}function Roe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function Ioe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Noe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Doe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Moe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=yI(e.children[1]),l=a4(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function Ooe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],f={},p=o?o[l]:void 0;p&&(f.align=p);let m={type:"element",tagName:s,properties:f,children:[]};h&&(m.children=t.all(h),t.patch(h,m),m=t.applyData(h,m)),c.push(m)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,d),t.applyData(e,d)}function Loe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const yL=9,vL=32;function joe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(wL(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(wL(e.slice(i),i>0,!1)),s.join("")}function wL(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===yL||s===vL;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===yL||s===vL;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function Foe(t,e){const n={type:"text",value:joe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Boe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const $oe={blockquote:moe,break:goe,code:yoe,delete:voe,emphasis:woe,footnoteReference:boe,heading:xoe,html:Soe,imageReference:koe,image:Eoe,inlineCode:Aoe,linkReference:Coe,link:_oe,listItem:Toe,list:Roe,paragraph:Ioe,root:Noe,strong:Doe,table:Moe,tableCell:Loe,tableRow:Ooe,text:Foe,thematicBreak:Boe,toml:Pb,yaml:Pb,definition:Pb,footnoteDefinition:Pb};function Pb(){}const P4=-1,fk=0,Dy=1,H1=2,EI=3,AI=4,CI=5,_I=6,R4=7,I4=8,bL=typeof self=="object"?self:globalThis,Uoe=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case fk:case P4:return n(o,i);case Dy:{const a=n([],i);for(const l of o)a.push(r(l));return a}case H1:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case EI:return n(new Date(o),i);case AI:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case CI:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case _I:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case R4:{const{name:a,message:l}=o;return n(new bL[a](l),i)}case I4:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new bL[s](o),i)};return r},xL=t=>Uoe(new Map,t)(0),Jh="",{toString:zoe}={},{keys:Voe}=Object,Ng=t=>{const e=typeof t;if(e!=="object"||!t)return[fk,e];const n=zoe.call(t).slice(8,-1);switch(n){case"Array":return[Dy,Jh];case"Object":return[H1,Jh];case"Date":return[EI,Jh];case"RegExp":return[AI,Jh];case"Map":return[CI,Jh];case"Set":return[_I,Jh];case"DataView":return[Dy,n]}return n.includes("Array")?[Dy,n]:n.includes("Error")?[R4,n]:[H1,n]},Rb=([t,e])=>t===fk&&(e==="function"||e==="symbol"),Hoe=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=Ng(o);switch(a){case fk:{let d=o;switch(l){case"bigint":a=I4,d=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return i([P4],o)}return i([a,d],o)}case Dy:{if(l){let f=o;return l==="DataView"?f=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(o)),i([l,[...f]],o)}const d=[],h=i([a,d],o);for(const f of o)d.push(s(f));return h}case H1:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const d=[],h=i([a,d],o);for(const f of Voe(o))(t||!Rb(Ng(o[f])))&&d.push([s(f),s(o[f])]);return h}case EI:return i([a,o.toISOString()],o);case AI:{const{source:d,flags:h}=o;return i([a,{source:d,flags:h}],o)}case CI:{const d=[],h=i([a,d],o);for(const[f,p]of o)(t||!(Rb(Ng(f))||Rb(Ng(p))))&&d.push([s(f),s(p)]);return h}case _I:{const d=[],h=i([a,d],o);for(const f of o)(t||!Rb(Ng(f)))&&d.push(s(f));return h}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},SL=(t,{json:e,lossy:n}={})=>{const r=[];return Hoe(!(e||n),!!e,new Map,r)(t),r},W1=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?xL(SL(t,e)):structuredClone(t):(t,e)=>xL(SL(t,e));function Woe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Goe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function qoe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Woe,r=t.options.footnoteBackLabel||Goe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const d=t.all(c),h=String(c.identifier).toUpperCase(),f=gg(h.toLowerCase());let p=0;const m=[],g=t.footnoteCounts.get(h);for(;g!==void 0&&++p<=g;){m.length>0&&m.push({type:"text",value:" "});let w=typeof n=="string"?n:n(l,p);typeof w=="string"&&(w={type:"text",value:w}),m.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,p),className:["data-footnote-backref"]},children:Array.isArray(w)?w:[w]})}const v=d[d.length-1];if(v&&v.type==="element"&&v.tagName==="p"){const w=v.children[v.children.length-1];w&&w.type==="text"?w.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...m)}else d.push(...m);const y={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(d,!0)};t.patch(c,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...W1(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const pk=function(t){if(t==null)return Qoe;if(typeof t=="function")return mk(t);if(typeof t=="object")return Array.isArray(t)?Koe(t):Xoe(t);if(typeof t=="string")return Yoe(t);throw new Error("Expected function, string, or object as test")};function Koe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=pk(t[n]);return mk(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Xoe(t){const e=t;return mk(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function Yoe(t){return mk(e);function e(n){return n&&n.type===t}}function mk(t){return e;function e(n,r,i){return!!(Joe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Qoe(){return!0}function Joe(t){return t!==null&&typeof t=="object"&&"type"in t}const N4=[],Zoe=!0,C_=!1,eae="skip";function D4(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=pk(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,d){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=N4,m,g,v;if((!e||s(l,c,d[d.length-1]||void 0))&&(p=tae(n(l,d)),p[0]===C_))return p;if("children"in l&&l.children){const y=l;if(y.children&&p[0]!==eae)for(g=(r?y.children.length:-1)+o,v=d.concat(y);g>-1&&g<y.children.length;){const w=y.children[g];if(m=a(w,g,v)(),m[0]===C_)return m;g=typeof m[1]=="number"?m[1]:g+o}}return p}}}function tae(t){return Array.isArray(t)?t:typeof t=="number"?[Zoe,t]:t==null?N4:[t]}function TI(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),D4(t,s,a,i);function a(l,c){const d=c[c.length-1],h=d?d.children.indexOf(l):void 0;return o(l,h,d)}}const __={}.hasOwnProperty,nae={};function rae(t,e){const n=e||nae,r=new Map,i=new Map,s=new Map,o={...$oe,...n.handlers},a={all:c,applyData:sae,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:iae,wrap:aae};return TI(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?r:i,f=String(d.identifier).toUpperCase();h.has(f)||h.set(f,d)}}),a;function l(d,h){const f=d.type,p=a.handlers[f];if(__.call(a.handlers,f)&&p)return p(a,d,h);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in d){const{children:g,...v}=d,y=W1(v);return y.children=a.all(d),y}return W1(d)}return(a.options.unknownHandler||oae)(a,d,h)}function c(d){const h=[];if("children"in d){const f=d.children;let p=-1;for(;++p<f.length;){const m=a.one(f[p],d);if(m){if(p&&f[p-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=kL(m.value)),!Array.isArray(m)&&m.type==="element")){const g=m.children[0];g&&g.type==="text"&&(g.value=kL(g.value))}Array.isArray(m)?h.push(...m):h.push(m)}}}return h}}function iae(t,e){t.position&&(e.position=Gre(t))}function sae(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,W1(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function oae(t,e){const n=e.data||{},r="value"in e&&!(__.call(n,"hProperties")||__.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function aae(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function kL(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function EL(t,e){const n=rae(t,e),r=n.one(t,void 0),i=qoe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function lae(t,e){return t&&"run"in t?async function(n,r){const i=EL(n,{file:r,...e});await t.run(i,r)}:function(n,r){return EL(n,{file:r,...t||e})}}function AL(t){if(t)throw t}var mx=Object.prototype.hasOwnProperty,M4=Object.prototype.toString,CL=Object.defineProperty,_L=Object.getOwnPropertyDescriptor,TL=function(e){return typeof Array.isArray=="function"?Array.isArray(e):M4.call(e)==="[object Array]"},PL=function(e){if(!e||M4.call(e)!=="[object Object]")return!1;var n=mx.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&mx.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||mx.call(e,i)},RL=function(e,n){CL&&n.name==="__proto__"?CL(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},IL=function(e,n){if(n==="__proto__")if(mx.call(e,n)){if(_L)return _L(e,n).value}else return;return e[n]},cae=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,c=arguments.length,d=!1;for(typeof a=="boolean"&&(d=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=IL(a,n),i=IL(e,n),a!==i&&(d&&i&&(PL(i)||(s=TL(i)))?(s?(s=!1,o=r&&TL(r)?r:[]):o=r&&PL(r)?r:{},RL(a,{name:n,newValue:t(d,o,i)})):typeof i<"u"&&RL(a,{name:n,newValue:i}));return a};const WE=CS(cae);function T_(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function uae(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const d=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,d?dae(d,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function dae(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const d=c;if(a&&n)throw d;return i(d)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const io={basename:hae,dirname:fae,extname:pae,join:mae,sep:"/"};function hae(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');$w(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function fae(t){if($w(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function pae(t){$w(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function mae(...t){let e=-1,n;for(;++e<t.length;)$w(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":gae(n)}function gae(t){$w(t);const e=t.codePointAt(0)===47;let n=yae(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function yae(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function $w(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const vae={cwd:wae};function wae(){return"/"}function P_(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function bae(t){if(typeof t=="string")t=new URL(t);else if(!P_(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return xae(t)}function xae(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const GE=["history","path","basename","stem","extname","dirname"];class O4{constructor(e){let n;e?P_(e)?n={path:e}:typeof e=="string"||Sae(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":vae.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<GE.length;){const s=GE[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)GE.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?io.basename(this.path):void 0}set basename(e){KE(e,"basename"),qE(e,"basename"),this.path=io.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?io.dirname(this.path):void 0}set dirname(e){NL(this.basename,"dirname"),this.path=io.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?io.extname(this.path):void 0}set extname(e){if(qE(e,"extname"),NL(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=io.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){P_(e)&&(e=bae(e)),KE(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?io.basename(this.path,this.extname):void 0}set stem(e){KE(e,"stem"),qE(e,"stem"),this.path=io.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new sr(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function qE(t,e){if(t&&t.includes(io.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+io.sep+"`")}function KE(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function NL(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Sae(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const kae=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Eae={}.hasOwnProperty;class PI extends kae{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=uae()}copy(){const e=new PI;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(WE(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(QE("data",this.frozen),this.namespace[e]=n,this):Eae.call(this.namespace,e)&&this.namespace[e]||void 0:e?(QE("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Ib(e),r=this.parser||this.Parser;return XE("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),XE("process",this.parser||this.Parser),YE("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=Ib(e),l=r.parse(a);r.run(l,a,function(d,h,f){if(d||!h||!f)return c(d);const p=h,m=r.stringify(p,f);_ae(m)?f.value=m:f.result=m,c(d,f)});function c(d,h){d||!h?o(d):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),XE("processSync",this.parser||this.Parser),YE("processSync",this.compiler||this.Compiler),this.process(e,i),ML("processSync","process",n),r;function i(s,o){n=!0,AL(s),r=o}}run(e,n,r){DL(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=Ib(n);i.run(e,l,c);function c(d,h,f){const p=h||e;d?a(d):o?o(p):r(void 0,p,f)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),ML("runSync","run",r),i;function s(o,a){AL(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=Ib(n),i=this.compiler||this.Compiler;return YE("stringify",i),DL(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(QE("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[d,...h]=c;l(d,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=WE(!0,i.settings,c.settings))}function a(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){const h=c[d];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,d){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===c){f=h;break}if(f===-1)r.push([c,...d]);else if(d.length>0){let[p,...m]=d;const g=r[f][1];T_(g)&&T_(p)&&(p=WE(!0,g,p)),r[f]=[c,p,...m]}}}}const Aae=new PI().freeze();function XE(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function YE(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function QE(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function DL(t){if(!T_(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function ML(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Ib(t){return Cae(t)?t:new O4(t)}function Cae(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function _ae(t){return typeof t=="string"||Tae(t)}function Tae(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Pae="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",OL=[],LL={allowDangerousHtml:!0},Rae=/^(https?|ircs?|mailto|xmpp)$/i,Iae=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Nae(t){const e=Dae(t),n=Mae(t);return Oae(e.runSync(e.parse(n),n),t)}function Dae(t){const e=t.rehypePlugins||OL,n=t.remarkPlugins||OL,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...LL}:LL;return Aae().use(poe).use(n).use(lae,r).use(e)}function Mae(t){const e=t.children||"",n=new O4;return typeof e=="string"&&(n.value=e),n}function Oae(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||Lae;for(const d of Iae)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+Pae+d.id,void 0);return TI(t,c),Qre(t,{Fragment:x.Fragment,components:i,ignoreInvalidStyle:!0,jsx:x.jsx,jsxs:x.jsxs,passKeys:!0,passNode:!0});function c(d,h,f){if(d.type==="raw"&&f&&typeof h=="number")return o?f.children.splice(h,1):f.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let p;for(p in zE)if(Object.hasOwn(zE,p)&&Object.hasOwn(d.properties,p)){const m=d.properties[p],g=zE[p];(g===null||g.includes(d.tagName))&&(d.properties[p]=l(String(m||""),p,d))}}if(d.type==="element"){let p=n?!n.includes(d.tagName):s?s.includes(d.tagName):!1;if(!p&&r&&typeof h=="number"&&(p=!r(d,h,f)),p&&f&&typeof h=="number")return a&&d.children?f.children.splice(h,1,...d.children):f.children.splice(h,1),h}}}function Lae(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||Rae.test(t.slice(0,e))?t:""}function jL(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function jae(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Fae(t,e,n){const i=pk((n||{}).ignore||[]),s=Bae(e);let o=-1;for(;++o<s.length;)D4(t,"text",a);function a(c,d){let h=-1,f;for(;++h<d.length;){const p=d[h],m=f?f.children:void 0;if(i(p,m?m.indexOf(p):void 0,f))return;f=p}if(f)return l(c,d)}function l(c,d){const h=d[d.length-1],f=s[o][0],p=s[o][1];let m=0;const v=h.children.indexOf(c);let y=!1,w=[];f.lastIndex=0;let b=f.exec(c.value);for(;b;){const k=b.index,_={index:b.index,input:b.input,stack:[...d,c]};let C=p(...b,_);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C===!1?f.lastIndex=k+1:(m!==k&&w.push({type:"text",value:c.value.slice(m,k)}),Array.isArray(C)?w.push(...C):C&&w.push(C),m=k+b[0].length,y=!0),!f.global)break;b=f.exec(c.value)}return y?(m<c.value.length&&w.push({type:"text",value:c.value.slice(m)}),h.children.splice(v,1,...w)):w=[c],v+w.length}}function Bae(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([$ae(i[0]),Uae(i[1])])}return e}function $ae(t){return typeof t=="string"?new RegExp(jae(t),"g"):t}function Uae(t){return typeof t=="function"?t:function(){return t}}const JE="phrasing",ZE=["autolink","link","image","label"];function zae(){return{transforms:[Xae],enter:{literalAutolink:Hae,literalAutolinkEmail:eA,literalAutolinkHttp:eA,literalAutolinkWww:eA},exit:{literalAutolink:Kae,literalAutolinkEmail:qae,literalAutolinkHttp:Wae,literalAutolinkWww:Gae}}}function Vae(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:JE,notInConstruct:ZE},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:JE,notInConstruct:ZE},{character:":",before:"[ps]",after:"\\/",inConstruct:JE,notInConstruct:ZE}]}}function Hae(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function eA(t){this.config.enter.autolinkProtocol.call(this,t)}function Wae(t){this.config.exit.autolinkProtocol.call(this,t)}function Gae(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function qae(t){this.config.exit.autolinkEmail.call(this,t)}function Kae(t){this.exit(t)}function Xae(t){Fae(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Yae],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Qae]],{ignore:["link","linkReference"]})}function Yae(t,e,n,r,i){let s="";if(!L4(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!Jae(n)))return!1;const o=Zae(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function Qae(t,e,n,r){return!L4(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Jae(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Zae(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=jL(t,"(");let s=jL(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function L4(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Ph(n)||dk(n))&&(!e||n!==47)}j4.peek=lle;function ele(){this.buffer()}function tle(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function nle(){this.buffer()}function rle(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function ile(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ws(this.sliceSerialize(t)).toLowerCase(),n.label=e}function sle(t){this.exit(t)}function ole(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ws(this.sliceSerialize(t)).toLowerCase(),n.label=e}function ale(t){this.exit(t)}function lle(){return"["}function j4(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function cle(){return{enter:{gfmFootnoteCallString:ele,gfmFootnoteCall:tle,gfmFootnoteDefinitionLabelString:nle,gfmFootnoteDefinition:rle},exit:{gfmFootnoteCallString:ile,gfmFootnoteCall:sle,gfmFootnoteDefinitionLabelString:ole,gfmFootnoteDefinition:ale}}}function ule(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:j4},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),d=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),d(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?F4:dle))),c(),l}}function dle(t,e,n){return e===0?t:F4(t,e,n)}function F4(t,e,n){return(n?"":"    ")+t}const hle=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];B4.peek=yle;function fle(){return{canContainEols:["delete"],enter:{strikethrough:mle},exit:{strikethrough:gle}}}function ple(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:hle}],handlers:{delete:B4}}}function mle(t){this.enter({type:"delete",children:[]},t)}function gle(t){this.exit(t)}function B4(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function yle(){return"~"}function vle(t){return t.length}function wle(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||vle,s=[],o=[],a=[],l=[];let c=0,d=-1;for(;++d<t.length;){const g=[],v=[];let y=-1;for(t[d].length>c&&(c=t[d].length);++y<t[d].length;){const w=ble(t[d][y]);if(n.alignDelimiters!==!1){const b=i(w);v[y]=b,(l[y]===void 0||b>l[y])&&(l[y]=b)}g.push(w)}o[d]=g,a[d]=v}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<c;)s[h]=FL(r[h]);else{const g=FL(r);for(;++h<c;)s[h]=g}h=-1;const f=[],p=[];for(;++h<c;){const g=s[h];let v="",y="";g===99?(v=":",y=":"):g===108?v=":":g===114&&(y=":");let w=n.alignDelimiters===!1?1:Math.max(1,l[h]-v.length-y.length);const b=v+"-".repeat(w)+y;n.alignDelimiters!==!1&&(w=v.length+w+y.length,w>l[h]&&(l[h]=w),p[h]=w),f[h]=b}o.splice(1,0,f),a.splice(1,0,p),d=-1;const m=[];for(;++d<o.length;){const g=o[d],v=a[d];h=-1;const y=[];for(;++h<c;){const w=g[h]||"";let b="",k="";if(n.alignDelimiters!==!1){const _=l[h]-(v[h]||0),C=s[h];C===114?b=" ".repeat(_):C===99?_%2?(b=" ".repeat(_/2+.5),k=" ".repeat(_/2-.5)):(b=" ".repeat(_/2),k=b):k=" ".repeat(_)}n.delimiterStart!==!1&&!h&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&w==="")&&(n.delimiterStart!==!1||h)&&y.push(" "),n.alignDelimiters!==!1&&y.push(b),y.push(w),n.alignDelimiters!==!1&&y.push(k),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||h!==c-1)&&y.push("|")}m.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return m.join(`
`)}function ble(t){return t==null?"":String(t)}function FL(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function xle(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),Sle);return i(),o}function Sle(t,e,n){return">"+(n?"":" ")+t}function kle(t,e){return BL(t,e.inConstruct,!0)&&!BL(t,e.notInConstruct,!1)}function BL(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function $L(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&kle(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Ele(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function Ale(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Cle(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function _le(t,e,n,r){const i=Cle(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(Ale(t,n)){const h=n.enter("codeIndented"),f=n.indentLines(s,Tle);return h(),f}const a=n.createTracker(r),l=i.repeat(Math.max(Ele(s,i)+1,3)),c=n.enter("codeFenced");let d=a.move(l);if(t.lang){const h=n.enter(`codeFencedLang${o}`);d+=a.move(n.safe(t.lang,{before:d,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);d+=a.move(" "),d+=a.move(n.safe(t.meta,{before:d,after:`
`,encode:["`"],...a.current()})),h()}return d+=a.move(`
`),s&&(d+=a.move(s+`
`)),d+=a.move(l),c(),d}function Tle(t,e,n){return(n?"":"    ")+t}function RI(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Ple(t,e,n,r){const i=RI(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function Rle(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function yv(t){return"&#x"+t.toString(16).toUpperCase()+";"}function G1(t,e,n){const r=Qm(t),i=Qm(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}$4.peek=Ile;function $4(t,e,n,r){const i=Rle(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),d=G1(r.before.charCodeAt(r.before.length-1),c,i);d.inside&&(l=yv(c)+l.slice(1));const h=l.charCodeAt(l.length-1),f=G1(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+yv(h));const p=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:d.outside},a+l+p}function Ile(t,e,n){return n.options.emphasis||"*"}function Nle(t,e){let n=!1;return TI(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,C_}),!!((!t.depth||t.depth<3)&&xI(t)&&(e.options.setext||n))}function Dle(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(Nle(t,n)){const d=n.enter("headingSetext"),h=n.enter("phrasing"),f=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),d(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=yv(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}U4.peek=Mle;function U4(t){return t.value||""}function Mle(){return"<"}z4.peek=Ole;function z4(t,e,n,r){const i=RI(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function Ole(){return"!"}V4.peek=Lle;function V4(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=d,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Lle(){return"!"}H4.peek=jle;function H4(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function jle(){return"`"}function W4(t,e){const n=xI(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}G4.peek=Fle;function G4(t,e,n,r){const i=RI(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(W4(t,n)){const d=n.stack;n.stack=[],a=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),n.stack=d,h}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function Fle(t,e,n){return W4(t,n)?"<":"["}q4.peek=Ble;function q4(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=d,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Ble(){return"["}function II(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function $le(t){const e=II(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Ule(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function K4(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function zle(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?Ule(n):II(n);const a=t.ordered?o==="."?")":".":$le(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const d=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),K4(n)===o&&d){let h=-1;for(;++h<t.children.length;){const f=t.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function Vle(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Hle(t,e,n,r){const i=Vle(n);let s=n.bulletCurrent||II(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),d);return l(),c;function d(h,f,p){return f?(p?"":" ".repeat(o))+h:(p?s:s+" ".repeat(o-s.length))+h}}function Wle(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const Gle=pk(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function qle(t,e,n,r){return(t.children.some(function(o){return Gle(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function Kle(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}X4.peek=Xle;function X4(t,e,n,r){const i=Kle(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),d=G1(r.before.charCodeAt(r.before.length-1),c,i);d.inside&&(l=yv(c)+l.slice(1));const h=l.charCodeAt(l.length-1),f=G1(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+yv(h));const p=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:d.outside},a+l+p}function Xle(t,e,n){return n.options.strong||"*"}function Yle(t,e,n,r){return n.safe(t.value,r)}function Qle(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Jle(t,e,n){const r=(K4(n)+(n.options.ruleSpaces?" ":"")).repeat(Qle(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Y4={blockquote:xle,break:$L,code:_le,definition:Ple,emphasis:$4,hardBreak:$L,heading:Dle,html:U4,image:z4,imageReference:V4,inlineCode:H4,link:G4,linkReference:q4,list:zle,listItem:Hle,paragraph:Wle,root:qle,strong:X4,text:Yle,thematicBreak:Jle};function Zle(){return{enter:{table:ece,tableData:UL,tableHeader:UL,tableRow:nce},exit:{codeText:rce,table:tce,tableData:tA,tableHeader:tA,tableRow:tA}}}function ece(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function tce(t){this.exit(t),this.data.inTable=void 0}function nce(t){this.enter({type:"tableRow",children:[]},t)}function tA(t){this.exit(t)}function UL(t){this.enter({type:"tableCell",children:[]},t)}function rce(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,ice));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function ice(t,e){return e==="|"?e:t}function sce(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:l,tableRow:a}};function o(p,m,g,v){return c(d(p,g,v),p.align)}function a(p,m,g,v){const y=h(p,g,v),w=c([y]);return w.slice(0,w.indexOf(`
`))}function l(p,m,g,v){const y=g.enter("tableCell"),w=g.enter("phrasing"),b=g.containerPhrasing(p,{...v,before:s,after:s});return w(),y(),b}function c(p,m){return wle(p,{align:m,alignDelimiters:r,padding:n,stringLength:i})}function d(p,m,g){const v=p.children;let y=-1;const w=[],b=m.enter("table");for(;++y<v.length;)w[y]=h(v[y],m,g);return b(),w}function h(p,m,g){const v=p.children;let y=-1;const w=[],b=m.enter("tableRow");for(;++y<v.length;)w[y]=l(v[y],p,m,g);return b(),w}function f(p,m,g){let v=Y4.inlineCode(p,m,g);return g.stack.includes("tableCell")&&(v=v.replace(/\|/g,"\\$&")),v}}function oce(){return{exit:{taskListCheckValueChecked:zL,taskListCheckValueUnchecked:zL,paragraph:lce}}}function ace(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:cce}}}function zL(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function lce(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function cce(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=Y4.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(d){return d+o}}function uce(){return[zae(),cle(),fle(),Zle(),oce()]}function dce(t){return{extensions:[Vae(),ule(t),ple(),sce(t),ace()]}}const hce={tokenize:vce,partial:!0},Q4={tokenize:wce,partial:!0},J4={tokenize:bce,partial:!0},Z4={tokenize:xce,partial:!0},fce={tokenize:Sce,partial:!0},ez={name:"wwwAutolink",tokenize:gce,previous:nz},tz={name:"protocolAutolink",tokenize:yce,previous:rz},ml={name:"emailAutolink",tokenize:mce,previous:iz},Xo={};function pce(){return{text:Xo}}let Pu=48;for(;Pu<123;)Xo[Pu]=ml,Pu++,Pu===58?Pu=65:Pu===91&&(Pu=97);Xo[43]=ml;Xo[45]=ml;Xo[46]=ml;Xo[95]=ml;Xo[72]=[ml,tz];Xo[104]=[ml,tz];Xo[87]=[ml,ez];Xo[119]=[ml,ez];function mce(t,e,n){const r=this;let i,s;return o;function o(h){return!R_(h)||!iz.call(r,r.previous)||NI(r.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(h))}function a(h){return R_(h)?(t.consume(h),a):h===64?(t.consume(h),l):n(h)}function l(h){return h===46?t.check(fce,d,c)(h):h===45||h===95||rr(h)?(s=!0,t.consume(h),l):d(h)}function c(h){return t.consume(h),i=!0,l}function d(h){return s&&i&&gr(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function gce(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!nz.call(r,r.previous)||NI(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(hce,t.attempt(Q4,t.attempt(J4,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function yce(t,e,n){const r=this;let i="",s=!1;return o;function o(h){return(h===72||h===104)&&rz.call(r,r.previous)&&!NI(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),t.consume(h),a):n(h)}function a(h){if(gr(h)&&i.length<5)return i+=String.fromCodePoint(h),t.consume(h),a;if(h===58){const f=i.toLowerCase();if(f==="http"||f==="https")return t.consume(h),l}return n(h)}function l(h){return h===47?(t.consume(h),s?c:(s=!0,l)):n(h)}function c(h){return h===null||V1(h)||lt(h)||Ph(h)||dk(h)?n(h):t.attempt(Q4,t.attempt(J4,d),n)(h)}function d(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function vce(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function wce(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(Z4,l,a)(c):c===null||lt(c)||Ph(c)||c!==45&&dk(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!s?n(c):e(c)}}function bce(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(Z4,e,s)(o):o===null||lt(o)||Ph(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function xce(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||lt(a)||Ph(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||lt(a)||Ph(a)?e(a):r(a)}function s(a){return gr(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):gr(a)?(t.consume(a),o):n(a)}}function Sce(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return rr(s)?n(s):e(s)}}function nz(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||lt(t)}function rz(t){return!gr(t)}function iz(t){return!(t===47||R_(t))}function R_(t){return t===43||t===45||t===46||t===95||rr(t)}function NI(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const kce={tokenize:Ice,partial:!0};function Ece(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Tce,continuation:{tokenize:Pce},exit:Rce}},text:{91:{name:"gfmFootnoteCall",tokenize:_ce},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Ace,resolveTo:Cce}}}}function Ace(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=Ws(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function Cce(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function _ce(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(h){if(s>999||h===93&&!o||h===null||h===91||lt(h))return n(h);if(h===93){t.exit("chunkString");const f=t.exit("gfmFootnoteCallString");return i.includes(Ws(r.sliceSerialize(f)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return lt(h)||(o=!0),s++,t.consume(h),h===92?d:c}function d(h){return h===91||h===92||h===93?(t.consume(h),s++,c):c(h)}}function Tce(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(m){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(m){return m===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",d):n(m)}function d(m){if(o>999||m===93&&!a||m===null||m===91||lt(m))return n(m);if(m===93){t.exit("chunkString");const g=t.exit("gfmFootnoteDefinitionLabelString");return s=Ws(r.sliceSerialize(g)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),f}return lt(m)||(a=!0),o++,t.consume(m),m===92?h:d}function h(m){return m===91||m===92||m===93?(t.consume(m),o++,d):d(m)}function f(m){return m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),i.includes(s)||i.push(s),Le(t,p,"gfmFootnoteDefinitionWhitespace")):n(m)}function p(m){return e(m)}}function Pce(t,e,n){return t.check(Bw,e,t.attempt(kce,e,n))}function Rce(t){t.exit("gfmFootnoteDefinition")}function Ice(t,e,n){const r=this;return Le(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function Nce(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",d,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",h,a]],p=a.parser.constructs.insideSpan.null;p&&_i(f,f.length,0,hk(p,o.slice(c+1,l),a)),_i(f,f.length,0,[["exit",h,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",d,a]]),_i(o,c-1,l-c+3,f),l=c+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,d=this.events;let h=0;return f;function f(m){return c===126&&d[d.length-1][1].type!=="characterEscape"?l(m):(o.enter("strikethroughSequenceTemporary"),p(m))}function p(m){const g=Qm(c);if(m===126)return h>1?l(m):(o.consume(m),h++,p);if(h<2&&!n)return l(m);const v=o.exit("strikethroughSequenceTemporary"),y=Qm(m);return v._open=!y||y===2&&!!g,v._close=!g||g===2&&!!y,a(m)}}}class Dce{constructor(){this.map=[]}add(e,n,r){Mce(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function Mce(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function Oce(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function Lce(){return{flow:{null:{name:"table",tokenize:jce,resolveAll:Fce}}}}function jce(t,e,n){const r=this;let i=0,s=0,o;return a;function a(I){let j=r.events.length-1;for(;j>-1;){const B=r.events[j][1].type;if(B==="lineEnding"||B==="linePrefix")j--;else break}const U=j>-1?r.events[j][1].type:null,G=U==="tableHead"||U==="tableRow"?C:l;return G===C&&r.parser.lazy[r.now().line]?n(I):G(I)}function l(I){return t.enter("tableHead"),t.enter("tableRow"),c(I)}function c(I){return I===124||(o=!0,s+=1),d(I)}function d(I){return I===null?n(I):ue(I)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),p):n(I):Te(I)?Le(t,d,"whitespace")(I):(s+=1,o&&(o=!1,i+=1),I===124?(t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),o=!0,d):(t.enter("data"),h(I)))}function h(I){return I===null||I===124||lt(I)?(t.exit("data"),d(I)):(t.consume(I),I===92?f:h)}function f(I){return I===92||I===124?(t.consume(I),h):h(I)}function p(I){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(I):(t.enter("tableDelimiterRow"),o=!1,Te(I)?Le(t,m,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):m(I))}function m(I){return I===45||I===58?v(I):I===124?(o=!0,t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),g):_(I)}function g(I){return Te(I)?Le(t,v,"whitespace")(I):v(I)}function v(I){return I===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(I),t.exit("tableDelimiterMarker"),y):I===45?(s+=1,y(I)):I===null||ue(I)?k(I):_(I)}function y(I){return I===45?(t.enter("tableDelimiterFiller"),w(I)):_(I)}function w(I){return I===45?(t.consume(I),w):I===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(I),t.exit("tableDelimiterMarker"),b):(t.exit("tableDelimiterFiller"),b(I))}function b(I){return Te(I)?Le(t,k,"whitespace")(I):k(I)}function k(I){return I===124?m(I):I===null||ue(I)?!o||i!==s?_(I):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(I)):_(I)}function _(I){return n(I)}function C(I){return t.enter("tableRow"),P(I)}function P(I){return I===124?(t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),P):I===null||ue(I)?(t.exit("tableRow"),e(I)):Te(I)?Le(t,P,"whitespace")(I):(t.enter("data"),R(I))}function R(I){return I===null||I===124||lt(I)?(t.exit("data"),P(I)):(t.consume(I),I===92?M:R)}function M(I){return I===92||I===124?(t.consume(I),R):R(I)}}function Fce(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,d,h;const f=new Dce;for(;++n<t.length;){const p=t[n],m=p[1];p[0]==="enter"?m.type==="tableHead"?(a=!1,l!==0&&(VL(f,e,l,c,d),d=void 0,l=0),c={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(n,0,[["enter",c,e]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,d={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(n,0,[["enter",d,e]])),i=m.type==="tableDelimiterRow"?2:d?3:1):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=Nb(f,e,s,i,void 0,h),s=[0,0,0,0]),o[2]=n)):m.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],h=Nb(f,e,s,i,void 0,h)),s=o,o=[s[1],n,0,0])):m.type==="tableHead"?(a=!0,l=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],h=Nb(f,e,s,i,n,h)):o[1]!==0&&(h=Nb(f,e,o,i,n,h)),i=0):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&VL(f,e,l,c,d),f.consume(e.events),n=-1;++n<e.events.length;){const p=e.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=Oce(e.events,n))}return t}function Nb(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},lf(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=lf(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=lf(e.events,n[2]),d=lf(e.events,n[3]),h={type:a,start:Object.assign({},c),end:Object.assign({},d)};if(t.add(n[2],0,[["enter",h,e]]),r!==2){const f=e.events[n[2]],p=e.events[n[3]];if(f[1].end=Object.assign({},p[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const m=n[2]+1,g=n[3]-n[2]-1;t.add(m,g,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return i!==void 0&&(s.end=Object.assign({},lf(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function VL(t,e,n,r,i){const s=[],o=lf(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function lf(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const Bce={name:"tasklistCheck",tokenize:Uce};function $ce(){return{text:{91:Bce}}}function Uce(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return lt(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return ue(l)?e(l):Te(l)?t.check({tokenize:zce},e,n)(l):n(l)}}function zce(t,e,n){return Le(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function Vce(t){return p4([pce(),Ece(),Nce(t),Lce(),$ce()])}const Hce={};function Wce(t){const e=this,n=t||Hce,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Vce(n)),s.push(uce()),o.push(dce(n))}const vv=({children:t,className:e=""})=>x.jsx("div",{className:`text-sm leading-relaxed ${e}`,children:x.jsx(Nae,{remarkPlugins:[Wce],components:{h1:({children:n})=>x.jsx("h1",{className:"text-lg font-bold text-foreground mt-5 mb-2",children:n}),h2:({children:n})=>x.jsx("h2",{className:"text-base font-bold text-foreground mt-4 mb-2",children:n}),h3:({children:n})=>x.jsx("h3",{className:"text-sm font-semibold text-foreground mt-3 mb-1.5",children:n}),h4:({children:n})=>x.jsx("h4",{className:"text-sm font-semibold text-foreground mt-2 mb-1",children:n}),p:({children:n})=>x.jsx("p",{className:"text-sm text-secondary-foreground leading-relaxed mb-2",children:n}),ul:({children:n})=>x.jsx("ul",{className:"list-disc ml-4 mb-2 space-y-0.5",children:n}),ol:({children:n})=>x.jsx("ol",{className:"list-decimal ml-4 mb-2 space-y-0.5",children:n}),li:({children:n})=>x.jsx("li",{className:"text-sm text-secondary-foreground",children:n}),strong:({children:n})=>x.jsx("strong",{className:"font-semibold text-foreground",children:n}),em:({children:n})=>x.jsx("em",{className:"italic",children:n}),blockquote:({children:n})=>x.jsx("blockquote",{className:"border-l-2 border-primary pl-3 text-sm text-muted-foreground italic my-2",children:n}),code:({children:n})=>x.jsx("code",{className:"rounded bg-muted/50 px-1.5 py-0.5 text-xs font-mono text-foreground",children:n}),pre:({children:n})=>x.jsx("pre",{className:"rounded-lg bg-muted/50 border border-border p-3 my-2 overflow-x-auto text-xs font-mono text-foreground",children:n}),table:({children:n})=>x.jsx("div",{className:"overflow-x-auto my-3 rounded-lg border border-border",children:x.jsx("table",{className:"text-xs border-collapse w-full",children:n})}),thead:({children:n})=>x.jsx("thead",{className:"bg-muted/50",children:n}),tbody:({children:n})=>x.jsx("tbody",{children:n}),tr:({children:n})=>x.jsx("tr",{className:"border-b border-border/50 last:border-b-0",children:n}),th:({children:n})=>x.jsx("th",{className:"text-left px-3 py-2 font-semibold text-foreground border-b border-border",children:n}),td:({children:n})=>x.jsx("td",{className:"px-3 py-2 text-secondary-foreground",children:n}),hr:()=>x.jsx("hr",{className:"border-border my-4"}),a:({href:n,children:r})=>x.jsx("a",{href:n,className:"text-primary underline",target:"_blank",rel:"noopener noreferrer",children:r})},children:t})}),nA=({edit:t,onAccept:e,onReject:n,status:r,isProcessing:i})=>{const s=r!=="pending",[o,a]=E.useState(!1),l=d=>x.jsxs("div",{className:d?"grid grid-cols-2 gap-4 text-sm":"grid grid-cols-2 gap-2 text-[11px]",children:[x.jsxs("div",{children:[x.jsx("span",{className:`${d?"text-xs":"text-[9px]"} font-semibold text-muted-foreground uppercase tracking-wider`,children:"Before"}),x.jsx("div",{className:`mt-1 rounded bg-destructive/5 border border-destructive/10 ${d?"p-3":"p-1.5"} text-muted-foreground leading-relaxed ${d?"max-h-[60vh] overflow-y-auto":"max-h-[150px] overflow-y-auto"}`,children:t.before||x.jsx("span",{className:"italic text-muted-foreground/50",children:"Empty  new content"})})]}),x.jsxs("div",{children:[x.jsx("span",{className:`${d?"text-xs":"text-[9px]"} font-semibold text-muted-foreground uppercase tracking-wider`,children:"After"}),x.jsx("div",{className:`mt-1 rounded bg-success/5 border border-success/10 ${d?"p-3":"p-1.5"} text-foreground leading-relaxed ${d?"max-h-[60vh] overflow-y-auto":"max-h-[150px] overflow-y-auto"}`,children:t.after})]})]}),c=d=>s?null:x.jsxs("div",{className:`flex gap-2 ${d?"pt-2":"pt-1"}`,children:[x.jsxs("button",{onClick:()=>{e(t.id),a(!1)},disabled:i,className:`flex-1 flex items-center justify-center gap-1 rounded-md bg-success/15 hover:bg-success/25 px-2 ${d?"py-2 text-sm":"py-1.5 text-[11px]"} font-semibold text-success transition-colors disabled:opacity-30`,children:[i?x.jsx(yn,{className:"w-3 h-3 animate-spin"}):x.jsx(Jy,{className:"w-3 h-3"}),"Accept"]}),x.jsxs("button",{onClick:()=>{n(t.id),a(!1)},disabled:i,className:`flex-1 flex items-center justify-center gap-1 rounded-md bg-destructive/15 hover:bg-destructive/25 px-2 ${d?"py-2 text-sm":"py-1.5 text-[11px]"} font-semibold text-destructive transition-colors disabled:opacity-30`,children:[i?x.jsx(yn,{className:"w-3 h-3 animate-spin"}):x.jsx(Ah,{className:"w-3 h-3"}),"Reject"]})]});return x.jsxs(x.Fragment,{children:[x.jsxs(At.div,{initial:{opacity:0,scale:.97},animate:{opacity:1,scale:1},className:`rounded-lg border p-3 space-y-2 ${s?r==="accepted"?"border-success/30 bg-success/5":"border-destructive/30 bg-destructive/5 opacity-60":"border-primary/30 bg-primary/5"}`,children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-1.5",children:[x.jsx(yC,{className:"w-3 h-3 text-primary"}),x.jsx("span",{className:"text-[11px] font-semibold text-foreground",children:t.sectionTitle}),s&&x.jsx("span",{className:`rounded px-1.5 py-0.5 text-[9px] font-mono font-semibold ${r==="accepted"?"bg-success/15 text-success":"bg-destructive/15 text-destructive"}`,children:r})]}),x.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-1 text-[9px] font-semibold text-muted-foreground hover:text-foreground transition-colors",children:[x.jsx(RG,{className:"w-3 h-3"}),"Expand"]})]}),t.rationale&&x.jsx("p",{className:"text-[11px] text-muted-foreground italic leading-snug",children:t.rationale}),l(!1),c(!1)]}),o&&ig.createPortal(x.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-8",onClick:()=>a(!1),children:[x.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm"}),x.jsxs(At.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},onClick:d=>d.stopPropagation(),className:"relative w-full max-w-4xl rounded-xl border border-border bg-card shadow-lg p-6 space-y-4 max-h-[90vh] overflow-y-auto",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(yC,{className:"w-4 h-4 text-primary"}),x.jsx("span",{className:"text-sm font-semibold text-foreground",children:t.sectionTitle}),s&&x.jsx("span",{className:`rounded px-1.5 py-0.5 text-[10px] font-mono font-semibold ${r==="accepted"?"bg-success/15 text-success":"bg-destructive/15 text-destructive"}`,children:r})]}),x.jsx("button",{onClick:()=>a(!1),className:"rounded-md p-1 hover:bg-muted transition-colors",children:x.jsx(Ah,{className:"w-4 h-4 text-muted-foreground"})})]}),t.rationale&&x.jsx("p",{className:"text-sm text-muted-foreground italic leading-snug",children:t.rationale}),l(!0),c(!0)]})]}),document.body)]})},sz=({currentSection:t,sectionId:e,isEmbedded:n=!1})=>{const r=E.useMemo(()=>e?`section-${e}`:"dashboard",[e]),{data:i}=Qne(r),{sendMessage:s,isStreaming:o,streamingContent:a,stagedEdits:l,isToolRunning:c}=Jne(),d=JU(),h=ZU(),[f,p]=E.useState([]),[m,g]=E.useState(""),[v,y]=E.useState({}),[w,b]=E.useState(null),k=E.useRef(null),_=E.useRef(null),[C,P]=E.useState(!1),R=E.useRef(null),M=typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window),I=()=>{var z;if(C){(z=R.current)==null||z.stop();return}const F=window.SpeechRecognition||window.webkitSpeechRecognition,L=new F;L.continuous=!0,L.interimResults=!0,L.lang="en-US";const O=m.trim()?m.trimEnd()+" ":"";L.onresult=N=>{let Y="";for(let $=0;$<N.results.length;$++)Y+=N.results[$][0].transcript;g(O+Y)},L.onend=()=>P(!1),L.onerror=()=>P(!1),R.current=L,L.start(),P(!0)},j=E.useMemo(()=>[{id:"initial",role:"assistant",content:n&&t?`You're viewing: **${t}**

Just tell me what you want to add or change  I'll figure out where it belongs in the playbook. It doesn't have to be about this section.

I can also help with gaps, questions, or drafting new content.`:`Hi! I'm your playbook assistant. Just tell me what you want to add or change  I'll figure out where it goes.

You can paste notes, describe a new technique, or ask me to fill a gap. I'll draft the content and place it in the right section for your review.`,timestamp:new Date().toISOString()},...i??[],...f],[i,f,n,t]);E.useEffect(()=>{p([]),y({})},[r]),E.useEffect(()=>{var F;(F=k.current)==null||F.scrollTo({top:k.current.scrollHeight,behavior:"smooth"})},[j,a,l]);const U=async F=>{b(F);try{await d.mutateAsync(F),y(L=>({...L,[F]:"accepted"})),Xa.success("Edit approved and applied!")}catch{Xa.error("Failed to approve edit")}finally{b(null)}},G=async F=>{b(F);try{await h.mutateAsync(F),y(L=>({...L,[F]:"rejected"})),Xa.success("Edit rejected")}catch{Xa.error("Failed to reject edit")}finally{b(null)}},B=async F=>{if(!F.trim()||o)return;const L={id:`local-${Date.now()}`,role:"user",content:F,timestamp:new Date().toISOString()};p(O=>[...O,L]),g(""),_.current&&(_.current.style.height="auto");try{const O=await s(F,{conversationId:r,sectionContext:e?{sectionId:e,sectionTitle:t??""}:void 0});O.edits.length>0?p(z=>[...z,{id:`edits-${Date.now()}`,role:"assistant",content:"",timestamp:new Date().toISOString(),edits:O.edits}]):p([])}catch{}},V=()=>B(m);return x.jsxs(At.div,{initial:{opacity:0,y:n?0:20},animate:{opacity:1,y:0},transition:{delay:n?0:.2},className:`flex flex-col ${n?"h-full bg-muted/30":"rounded-xl border border-border bg-card shadow-card h-[600px]"}`,children:[x.jsxs("div",{className:`flex items-center gap-2 px-5 py-4 ${n?"border-b border-border/50":"border-b border-border"}`,children:[x.jsx("div",{className:"w-7 h-7 rounded-lg gradient-primary flex items-center justify-center",children:x.jsx(BG,{className:"w-4 h-4 text-primary-foreground"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-sm font-semibold text-foreground",children:"AI Assistant"}),x.jsx("p",{className:"text-[11px] text-muted-foreground",children:n?"Context-aware help":"Draft and edit playbook content"})]})]}),x.jsxs("div",{ref:k,className:"flex-1 overflow-y-auto px-5 py-4 space-y-4",children:[x.jsx(lk,{children:j.map(F=>{var L;return x.jsxs(At.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:`flex gap-3 ${F.role==="user"?"flex-row-reverse":""}`,children:[x.jsx("div",{className:`w-7 h-7 rounded-lg flex items-center justify-center flex-shrink-0 ${F.role==="assistant"?"bg-primary/10 text-primary":"bg-secondary text-secondary-foreground"}`,children:F.role==="assistant"?x.jsx(Cg,{className:"w-4 h-4"}):x.jsx($G,{className:"w-4 h-4"})}),x.jsxs("div",{className:"max-w-[80%] space-y-2",children:[F.content&&x.jsx("div",{className:`rounded-xl px-4 py-3 text-sm leading-relaxed ${F.role==="assistant"?"bg-muted text-foreground":"bg-primary text-primary-foreground"}`,children:F.role==="assistant"?x.jsx(vv,{children:F.content}):x.jsx("div",{className:"whitespace-pre-wrap",children:F.content})}),(L=F.edits)==null?void 0:L.map(O=>x.jsx(nA,{edit:O,onAccept:U,onReject:G,status:v[O.id]??"pending",isProcessing:w===O.id},O.id))]})]},F.id)})}),o&&a&&x.jsxs(At.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"flex gap-3",children:[x.jsx("div",{className:"w-7 h-7 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:x.jsx(Cg,{className:"w-4 h-4 text-primary"})}),x.jsxs("div",{className:"max-w-[80%] space-y-2",children:[x.jsx("div",{className:"rounded-xl px-4 py-3 text-sm leading-relaxed bg-muted text-foreground",children:x.jsx(vv,{children:a})}),l.map(F=>x.jsx(nA,{edit:F,onAccept:U,onReject:G,status:v[F.id]??"pending",isProcessing:w===F.id},F.id))]})]}),o&&!a&&l.length>0&&x.jsxs(At.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"flex gap-3",children:[x.jsx("div",{className:"w-7 h-7 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:x.jsx(Cg,{className:"w-4 h-4 text-primary"})}),x.jsx("div",{className:"max-w-[80%] space-y-2",children:l.map(F=>x.jsx(nA,{edit:F,onAccept:U,onReject:G,status:v[F.id]??"pending",isProcessing:w===F.id},F.id))})]}),o&&c&&x.jsxs(At.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-3",children:[x.jsx("div",{className:"w-7 h-7 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:x.jsx(Cg,{className:"w-4 h-4 text-primary"})}),x.jsxs("div",{className:"bg-muted rounded-xl px-4 py-3 flex items-center gap-2",children:[x.jsx(yn,{className:"w-3.5 h-3.5 text-primary animate-spin"}),x.jsx("span",{className:"text-xs text-muted-foreground",children:"Staging edit..."})]})]}),o&&!a&&!c&&l.length===0&&x.jsxs(At.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-3",children:[x.jsx("div",{className:"w-7 h-7 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:x.jsx(Cg,{className:"w-4 h-4 text-primary"})}),x.jsx("div",{className:"bg-muted rounded-xl px-4 py-3",children:x.jsx("div",{className:"flex gap-1",children:[0,1,2].map(F=>x.jsx(At.div,{className:"w-1.5 h-1.5 rounded-full bg-muted-foreground",animate:{opacity:[.3,1,.3]},transition:{duration:1,repeat:1/0,delay:F*.2}},F))})})]})]}),x.jsx("div",{className:"px-4 py-3 border-t border-border",children:x.jsxs("div",{className:"flex items-end gap-2 bg-muted rounded-xl px-4 py-2",children:[x.jsx("textarea",{ref:_,value:m,onChange:F=>{g(F.target.value),F.target.style.height="auto",F.target.style.height=Math.min(F.target.scrollHeight,120)+"px"},onKeyDown:F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),V())},placeholder:"Ask me to draft content, fill gaps, or edit sections...",className:"flex-1 bg-transparent text-sm text-foreground placeholder:text-muted-foreground outline-none resize-none leading-relaxed py-1",rows:1,disabled:o}),M&&x.jsx("button",{onClick:I,disabled:o,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all disabled:opacity-30 ${C?"bg-red-500/15 text-red-500 animate-pulse":"text-muted-foreground hover:text-foreground"}`,title:C?"Stop listening":"Voice input",children:C?x.jsx(NG,{className:"w-4 h-4"}):x.jsx(DG,{className:"w-4 h-4"})}),x.jsx("button",{onClick:V,disabled:!m.trim()||o,className:"w-8 h-8 rounded-lg gradient-primary flex items-center justify-center disabled:opacity-30 transition-opacity",children:x.jsx(FB,{className:"w-4 h-4 text-primary-foreground"})})]})})]})};function Gce(){const t=ds();return Ko({mutationFn:async e=>{const{data:{session:n}}=await Ce.auth.getSession();if(!n)throw new Error("Not authenticated");const r=await fetch("/functions/v1/publish",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.access_token}`},body:JSON.stringify({provider:e})});if(!r.ok){const i=await r.json();throw new Error(i.error||"Publish failed")}return r.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["staged-edits"]})}})}function qce(){return Ko({mutationFn:async({type:t,message:e})=>{const{data:{session:n}}=await Ce.auth.getSession();if(!n)throw new Error("Not authenticated");const r=await fetch("/functions/v1/notify",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.access_token}`},body:JSON.stringify({type:t,message:e})});if(!r.ok){const i=await r.json();throw new Error(i.error||"Notification failed")}return r.json()}})}function oz(){return gu({queryKey:["connections"],queryFn:async()=>{const{data:t,error:e}=await Ce.from("connections").select("*").order("created_at",{ascending:!1});if(e)throw e;return t??[]}})}function az(){return async t=>{const{data:e,error:n}=await Ce.functions.invoke(`auth-${t}`,{body:{action:"connect"}});if(n)throw n;if(!(e!=null&&e.url))throw new Error("No OAuth URL returned");window.location.href=e.url}}const Kce={confluence:"Confluence",notion:"Notion"},Xce=()=>{var y;const{data:t,isLoading:e}=Zne(),{data:n}=oz(),r=JU(),i=ZU(),s=Gce(),o=qce(),[a,l]=E.useState(!1),c=((y=n==null?void 0:n.find(w=>w.provider==="confluence"||w.provider==="notion"))==null?void 0:y.provider)??null,d=c?Kce[c]??c:null;if(e||!t)return x.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-card flex items-center justify-center min-h-[300px]",children:x.jsx(yn,{className:"w-6 h-6 text-primary animate-spin"})});const h=t.filter(w=>w.status==="pending"),f=t.filter(w=>w.status==="rejected"),p=t.some(w=>w.status==="approved"),m=a?t:t.filter(w=>w.status!=="rejected"),g=async()=>{if(c)try{const w=await s.mutateAsync(c);Xa.success(`Published ${w.published} section(s) to ${d}`)}catch(w){Xa.error(w.message)}},v=async()=>{try{const w=await o.mutateAsync({type:"slack",message:"Your playbook has been updated! Check out the latest changes."});Xa.success(`Notified ${w.notified} team member(s)`)}catch(w){Xa.error(w.message)}};return x.jsxs(At.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"rounded-xl border border-border bg-card p-6 shadow-card",children:[x.jsxs("div",{className:"flex items-center justify-between mb-5",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(yC,{className:"w-4 h-4 text-primary"}),x.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Review & Publish"}),h.length>0&&x.jsxs("span",{className:"rounded-full bg-warning/15 text-warning text-[11px] font-mono font-semibold px-2 py-0.5",children:[h.length," pending"]}),f.length>0&&x.jsxs("button",{onClick:()=>l(w=>!w),className:"flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px] font-medium text-muted-foreground hover:text-foreground transition-colors",children:[a?x.jsx(AG,{className:"w-3 h-3"}):x.jsx(CG,{className:"w-3 h-3"}),f.length," rejected"]})]}),x.jsxs("div",{className:"flex gap-2",children:[d&&x.jsxs("button",{disabled:!p||s.isPending,onClick:g,className:"flex items-center gap-1.5 rounded-lg bg-primary px-3 py-1.5 text-xs font-semibold text-primary-foreground disabled:opacity-30 transition-opacity",children:[s.isPending?x.jsx(yn,{className:"w-3 h-3 animate-spin"}):x.jsx(FB,{className:"w-3 h-3"}),s.isSuccess?"Pushed!":`Push to ${d}`]}),x.jsxs("button",{onClick:v,disabled:o.isPending,className:"flex items-center gap-1.5 rounded-lg bg-secondary px-3 py-1.5 text-xs font-semibold text-secondary-foreground disabled:opacity-30",children:[o.isPending?x.jsx(yn,{className:"w-3 h-3 animate-spin"}):x.jsx(SG,{className:"w-3 h-3"}),"Nudge Reps"]})]})]}),x.jsxs("div",{className:"space-y-3",children:[m.map(w=>x.jsxs(At.div,{layout:!0,className:`rounded-lg border p-4 transition-colors ${w.status==="approved"?"border-success/30 bg-success/5":w.status==="rejected"?"border-destructive/30 bg-destructive/5 opacity-50":"border-border bg-muted/30"}`,children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-xs font-semibold text-foreground",children:w.section}),x.jsx("span",{className:`rounded px-1.5 py-0.5 text-[10px] font-mono font-semibold ${w.status==="approved"?"bg-success/15 text-success":w.status==="rejected"?"bg-destructive/15 text-destructive":"bg-warning/15 text-warning"}`,children:w.status}),w.source&&x.jsx("div",{className:`flex items-center gap-1 rounded px-1.5 py-0.5 text-[10px] font-medium ${w.source==="chat"?"bg-primary/10 text-primary":"bg-secondary/50 text-secondary-foreground"}`,children:w.source==="chat"?x.jsxs(x.Fragment,{children:[x.jsx(IG,{className:"w-2.5 h-2.5"}),x.jsx("span",{children:"AI Chat"})]}):x.jsxs(x.Fragment,{children:[x.jsx(MG,{className:"w-2.5 h-2.5"}),x.jsx("span",{children:"Manual"})]})})]}),w.status==="pending"&&x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>r.mutate(w.id),disabled:r.isPending,className:"w-6 h-6 rounded bg-success/15 flex items-center justify-center hover:bg-success/25 transition-colors",children:x.jsx(Jy,{className:"w-3 h-3 text-success"})}),x.jsx("button",{onClick:()=>i.mutate(w.id),disabled:i.isPending,className:"w-6 h-6 rounded bg-destructive/15 flex items-center justify-center hover:bg-destructive/25 transition-colors",children:x.jsx(Ah,{className:"w-3 h-3 text-destructive"})})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wider",children:"Before"}),x.jsx("div",{className:"mt-1 rounded bg-destructive/5 border border-destructive/10 p-2 text-muted-foreground leading-relaxed min-h-[40px]",children:w.before?x.jsx(vv,{children:w.before}):x.jsx("span",{className:"italic text-muted-foreground/50",children:"Empty  new content"})})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wider",children:"After"}),x.jsx("div",{className:"mt-1 rounded bg-success/5 border border-success/10 p-2 text-foreground leading-relaxed min-h-[40px]",children:x.jsx(vv,{children:w.after})})]})]})]},w.id)),m.length===0&&x.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:t.length===0?"No staged edits yet. Use the chat to make changes.":'All changes have been rejected. Click "rejected" above to review them.'})]})]})};function DI(){return gu({queryKey:["playbook-sections"],queryFn:async()=>{const{data:t,error:e}=await Ce.from("playbook_sections").select("*").order("sort_order");if(e)throw e;const{data:n,error:r}=await Ce.from("section_skills").select("*");if(r)throw r;return(t??[]).map(i=>({id:i.id,title:i.title,content:i.content,lastUpdated:i.last_updated,skillsCovered:(n??[]).filter(s=>s.section_id===i.id).map(s=>s.skill_id)}))}})}function Yce(){const t=ds();return Ko({mutationFn:async()=>{await Ce.from("section_skills").delete().neq("skill_id",""),await Ce.from("staged_edits").delete().neq("id","00000000-0000-0000-0000-000000000000"),await Ce.from("chat_messages").delete().neq("id","00000000-0000-0000-0000-000000000000"),await Ce.from("playbook_sections").delete().neq("id","00000000-0000-0000-0000-000000000000"),await Ce.from("imports").delete().neq("id","00000000-0000-0000-0000-000000000000"),await Ce.from("connections").delete().neq("id","00000000-0000-0000-0000-000000000000"),await Ce.from("user_skills").update({status:"missing",last_updated:null,section_title:null}).neq("skill_id","")},onSuccess:()=>{t.invalidateQueries({queryKey:["playbook-sections"]}),t.invalidateQueries({queryKey:["skills"]}),t.invalidateQueries({queryKey:["health-score"]}),t.invalidateQueries({queryKey:["staged-edits"]}),t.invalidateQueries({queryKey:["imports"]}),t.invalidateQueries({queryKey:["connections"]})}})}function Qce(){const t=ds();return Ko({mutationFn:async({id:e,content:n})=>{const{error:r}=await Ce.from("playbook_sections").update({content:n,last_updated:new Date().toISOString().split("T")[0]}).eq("id",e);if(r)throw r},onSuccess:()=>{t.invalidateQueries({queryKey:["playbook-sections"]})}})}var rA=0;function lz(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??HL()),document.body.insertAdjacentElement("beforeend",t[1]??HL()),rA++,()=>{rA===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),rA--}},[])}function HL(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var iA="focusScope.autoFocusOnMount",sA="focusScope.autoFocusOnUnmount",WL={bubbles:!1,cancelable:!0},Jce="FocusScope",MI=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=E.useState(null),c=Uo(i),d=Uo(s),h=E.useRef(null),f=wn(e,g=>l(g)),p=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let g=function(b){if(p.paused||!a)return;const k=b.target;a.contains(k)?h.current=k:Pl(h.current,{select:!0})},v=function(b){if(p.paused||!a)return;const k=b.relatedTarget;k!==null&&(a.contains(k)||Pl(h.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const _ of b)_.removedNodes.length>0&&Pl(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),w.disconnect()}}},[r,a,p.paused]),E.useEffect(()=>{if(a){qL.add(p);const g=document.activeElement;if(!a.contains(g)){const y=new CustomEvent(iA,WL);a.addEventListener(iA,c),a.dispatchEvent(y),y.defaultPrevented||(Zce(iue(cz(a)),{select:!0}),document.activeElement===g&&Pl(a))}return()=>{a.removeEventListener(iA,c),setTimeout(()=>{const y=new CustomEvent(sA,WL);a.addEventListener(sA,d),a.dispatchEvent(y),y.defaultPrevented||Pl(g??document.body,{select:!0}),a.removeEventListener(sA,d),qL.remove(p)},0)}}},[a,c,d,p]);const m=E.useCallback(g=>{if(!n&&!r||p.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(v&&y){const w=g.currentTarget,[b,k]=eue(w);b&&k?!g.shiftKey&&y===k?(g.preventDefault(),n&&Pl(b,{select:!0})):g.shiftKey&&y===b&&(g.preventDefault(),n&&Pl(k,{select:!0})):y===w&&g.preventDefault()}},[n,r,p.paused]);return x.jsx(Ue.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});MI.displayName=Jce;function Zce(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Pl(r,{select:e}),document.activeElement!==n)return}function eue(t){const e=cz(t),n=GL(e,t),r=GL(e.reverse(),t);return[n,r]}function cz(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function GL(t,e){for(const n of t)if(!tue(n,{upTo:e}))return n}function tue(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function nue(t){return t instanceof HTMLInputElement&&"select"in t}function Pl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&nue(t)&&e&&t.select()}}var qL=rue();function rue(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=KL(t,e),t.unshift(e)},remove(e){var n;t=KL(t,e),(n=t[0])==null||n.resume()}}}function KL(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function iue(t){return t.filter(e=>e.tagName!=="A")}var sue=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Zh=new WeakMap,Db=new WeakMap,Mb={},oA=0,uz=function(t){return t&&(t.host||uz(t.parentNode))},oue=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=uz(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},aue=function(t,e,n,r){var i=oue(e,Array.isArray(t)?t:[t]);Mb[n]||(Mb[n]=new WeakMap);var s=Mb[n],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),m=p!==null&&p!=="false",g=(Zh.get(f)||0)+1,v=(s.get(f)||0)+1;Zh.set(f,g),s.set(f,v),o.push(f),g===1&&m&&Db.set(f,!0),v===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return d(e),a.clear(),oA++,function(){o.forEach(function(h){var f=Zh.get(h)-1,p=s.get(h)-1;Zh.set(h,f),s.set(h,p),f||(Db.has(h)||h.removeAttribute(r),Db.delete(h)),p||h.removeAttribute(n)}),oA--,oA||(Zh=new WeakMap,Zh=new WeakMap,Db=new WeakMap,Mb={})}},dz=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=sue(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),aue(r,i,n,"aria-hidden")):function(){return null}},gx="right-scroll-bar-position",yx="width-before-scroll-bar",lue="with-scroll-bars-hidden",cue="--removed-body-scroll-bar-size";function aA(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function uue(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var due=typeof window<"u"?E.useLayoutEffect:E.useEffect,XL=new WeakMap;function hue(t,e){var n=uue(null,function(r){return t.forEach(function(i){return aA(i,r)})});return due(function(){var r=XL.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||aA(a,null)}),s.forEach(function(a){i.has(a)||aA(a,o)})}XL.set(n,t)},[t]),n}function fue(t){return t}function pue(t,e){e===void 0&&(e=fue);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var d=o;o=[],d.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return i}function mue(t){t===void 0&&(t={});var e=pue(null);return e.options=No({async:!0,ssr:!1},t),e}var hz=function(t){var e=t.sideCar,n=ug(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,No({},n))};hz.isSideCarExport=!0;function gue(t,e){return t.useMedium(e),hz}var fz=mue(),lA=function(){},gk=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:lA,onWheelCapture:lA,onTouchMoveCapture:lA}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,y=t.as,w=y===void 0?"div":y,b=t.gapMode,k=ug(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,C=hue([n,e]),P=No(No({},k),i);return E.createElement(E.Fragment,null,d&&E.createElement(_,{sideCar:fz,removeScrollBar:c,shards:h,noRelative:p,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:b}),o?E.cloneElement(E.Children.only(a),No(No({},P),{ref:C})):E.createElement(w,No({},P,{className:l,ref:C}),a))});gk.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gk.classNames={fullWidth:yx,zeroRight:gx};var yue=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function vue(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=yue();return e&&t.setAttribute("nonce",e),t}function wue(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function bue(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var xue=function(){var t=0,e=null;return{add:function(n){t==0&&(e=vue())&&(wue(e,n),bue(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Sue=function(){var t=xue();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},pz=function(){var t=Sue(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},kue={left:0,top:0,right:0,gap:0},cA=function(t){return parseInt(t||"",10)||0},Eue=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[cA(n),cA(r),cA(i)]},Aue=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return kue;var e=Eue(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Cue=pz(),ep="data-scroll-locked",_ue=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(lue,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ep,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gx,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(yx,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(gx," .").concat(gx,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(yx," .").concat(yx,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ep,`] {
    `).concat(cue,": ").concat(a,`px;
  }
`)},YL=function(){var t=parseInt(document.body.getAttribute(ep)||"0",10);return isFinite(t)?t:0},Tue=function(){E.useEffect(function(){return document.body.setAttribute(ep,(YL()+1).toString()),function(){var t=YL()-1;t<=0?document.body.removeAttribute(ep):document.body.setAttribute(ep,t.toString())}},[])},Pue=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;Tue();var s=E.useMemo(function(){return Aue(i)},[i]);return E.createElement(Cue,{styles:_ue(s,!e,i,n?"":"!important")})},I_=!1;if(typeof window<"u")try{var Ob=Object.defineProperty({},"passive",{get:function(){return I_=!0,!0}});window.addEventListener("test",Ob,Ob),window.removeEventListener("test",Ob,Ob)}catch{I_=!1}var ef=I_?{passive:!1}:!1,Rue=function(t){return t.tagName==="TEXTAREA"},mz=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Rue(t)&&n[e]==="visible")},Iue=function(t){return mz(t,"overflowY")},Nue=function(t){return mz(t,"overflowX")},QL=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=gz(t,r);if(i){var s=yz(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Due=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Mue=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},gz=function(t,e){return t==="v"?Iue(e):Nue(e)},yz=function(t,e){return t==="v"?Due(e):Mue(e)},Oue=function(t,e){return t==="h"&&e==="rtl"?-1:1},Lue=function(t,e,n,r,i){var s=Oue(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=yz(t,a),m=p[0],g=p[1],v=p[2],y=g-v-s*m;(m||y)&&gz(t,a)&&(h+=y,f+=m);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(h)<1||!i)||!d&&(Math.abs(f)<1||!i))&&(c=!0),c},Lb=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},JL=function(t){return[t.deltaX,t.deltaY]},ZL=function(t){return t&&"current"in t?t.current:t},jue=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Fue=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Bue=0,tf=[];function $ue(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),i=E.useState(Bue++)[0],s=E.useState(pz)[0],o=E.useRef(t);E.useEffect(function(){o.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=bX([t.lockRef.current],(t.shards||[]).map(ZL),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=E.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var y=Lb(g),w=n.current,b="deltaX"in g?g.deltaX:w[0]-y[0],k="deltaY"in g?g.deltaY:w[1]-y[1],_,C=g.target,P=Math.abs(b)>Math.abs(k)?"h":"v";if("touches"in g&&P==="h"&&C.type==="range")return!1;var R=QL(P,C);if(!R)return!0;if(R?_=P:(_=P==="v"?"h":"v",R=QL(P,C)),!R)return!1;if(!r.current&&"changedTouches"in g&&(b||k)&&(r.current=_),!_)return!0;var M=r.current||_;return Lue(M,v,g,M==="h"?b:k,!0)},[]),l=E.useCallback(function(g){var v=g;if(!(!tf.length||tf[tf.length-1]!==s)){var y="deltaY"in v?JL(v):Lb(v),w=e.current.filter(function(_){return _.name===v.type&&(_.target===v.target||v.target===_.shadowParent)&&jue(_.delta,y)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var b=(o.current.shards||[]).map(ZL).filter(Boolean).filter(function(_){return _.contains(v.target)}),k=b.length>0?a(v,b[0]):!o.current.noIsolation;k&&v.cancelable&&v.preventDefault()}}},[]),c=E.useCallback(function(g,v,y,w){var b={name:g,delta:v,target:y,should:w,shadowParent:Uue(y)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(k){return k!==b})},1)},[]),d=E.useCallback(function(g){n.current=Lb(g),r.current=void 0},[]),h=E.useCallback(function(g){c(g.type,JL(g),g.target,a(g,t.lockRef.current))},[]),f=E.useCallback(function(g){c(g.type,Lb(g),g.target,a(g,t.lockRef.current))},[]);E.useEffect(function(){return tf.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,ef),document.addEventListener("touchmove",l,ef),document.addEventListener("touchstart",d,ef),function(){tf=tf.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,ef),document.removeEventListener("touchmove",l,ef),document.removeEventListener("touchstart",d,ef)}},[]);var p=t.removeScrollBar,m=t.inert;return E.createElement(E.Fragment,null,m?E.createElement(s,{styles:Fue(i)}):null,p?E.createElement(Pue,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Uue(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const zue=gue(fz,$ue);var OI=E.forwardRef(function(t,e){return E.createElement(gk,No({},t,{ref:e,sideCar:zue}))});OI.classNames=gk.classNames;var yk="Popover",[vz,wpe]=jh(yk,[YS]),Uw=YS(),[Vue,xu]=vz(yk),wz=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=Uw(e),l=E.useRef(null),[c,d]=E.useState(!1),[h,f]=HS({prop:r,defaultProp:i??!1,onChange:s,caller:yk});return x.jsx(xK,{...a,children:x.jsx(Vue,{scope:e,contentId:Fo(),triggerRef:l,open:h,onOpenChange:f,onOpenToggle:E.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:E.useCallback(()=>d(!0),[]),onCustomAnchorRemove:E.useCallback(()=>d(!1),[]),modal:o,children:n})})};wz.displayName=yk;var bz="PopoverAnchor",Hue=E.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=xu(bz,n),s=Uw(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return E.useEffect(()=>(o(),()=>a()),[o,a]),x.jsx(SR,{...s,...r,ref:e})});Hue.displayName=bz;var xz="PopoverTrigger",Sz=E.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=xu(xz,n),s=Uw(n),o=wn(e,i.triggerRef),a=x.jsx(Ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":_z(i.open),...r,ref:o,onClick:We(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:x.jsx(SR,{asChild:!0,...s,children:a})});Sz.displayName=xz;var LI="PopoverPortal",[Wue,Gue]=vz(LI,{forceMount:void 0}),kz=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=xu(LI,e);return x.jsx(Wue,{scope:e,forceMount:n,children:x.jsx(fl,{present:n||s.open,children:x.jsx(VS,{asChild:!0,container:i,children:r})})})};kz.displayName=LI;var Jm="PopoverContent",Ez=E.forwardRef((t,e)=>{const n=Gue(Jm,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=xu(Jm,t.__scopePopover);return x.jsx(fl,{present:r||s.open,children:s.modal?x.jsx(Kue,{...i,ref:e}):x.jsx(Xue,{...i,ref:e})})});Ez.displayName=Jm;var que=Qy("PopoverContent.RemoveScroll"),Kue=E.forwardRef((t,e)=>{const n=xu(Jm,t.__scopePopover),r=E.useRef(null),i=wn(e,r),s=E.useRef(!1);return E.useEffect(()=>{const o=r.current;if(o)return dz(o)},[]),x.jsx(OI,{as:que,allowPinchZoom:!0,children:x.jsx(Az,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:We(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:We(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:We(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Xue=E.forwardRef((t,e)=>{const n=xu(Jm,t.__scopePopover),r=E.useRef(!1),i=E.useRef(!1);return x.jsx(Az,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Az=E.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...h}=t,f=xu(Jm,n),p=Uw(n);return lz(),x.jsx(MI,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:x.jsx(Tw,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:x.jsx(v$,{"data-state":_z(f.open),role:"dialog",id:f.contentId,...p,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Cz="PopoverClose",Yue=E.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=xu(Cz,n);return x.jsx(Ue.button,{type:"button",...r,ref:e,onClick:We(t.onClick,()=>i.onOpenChange(!1))})});Yue.displayName=Cz;var Que="PopoverArrow",Jue=E.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Uw(n);return x.jsx(w$,{...i,...r,ref:e})});Jue.displayName=Que;function _z(t){return t?"open":"closed"}var Zue=wz,ede=Sz,tde=kz,Tz=Ez;const nde=Zue,rde=ede,Pz=E.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>x.jsx(tde,{children:x.jsx(Tz,{ref:i,align:e,sideOffset:n,className:Qt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Pz.displayName=Tz.displayName;var e2=1,ide=.9,sde=.8,ode=.17,uA=.1,dA=.999,ade=.9999,lde=.99,cde=/[\\\/_+.#"@\[\(\{&]/,ude=/[\\\/_+.#"@\[\(\{&]/g,dde=/[\s-]/,Rz=/[\s-]/g;function N_(t,e,n,r,i,s,o){if(s===e.length)return i===t.length?e2:lde;var a=`${i},${s}`;if(o[a]!==void 0)return o[a];for(var l=r.charAt(s),c=n.indexOf(l,i),d=0,h,f,p,m;c>=0;)h=N_(t,e,n,r,c+1,s+1,o),h>d&&(c===i?h*=e2:cde.test(t.charAt(c-1))?(h*=sde,p=t.slice(i,c-1).match(ude),p&&i>0&&(h*=Math.pow(dA,p.length))):dde.test(t.charAt(c-1))?(h*=ide,m=t.slice(i,c-1).match(Rz),m&&i>0&&(h*=Math.pow(dA,m.length))):(h*=ode,i>0&&(h*=Math.pow(dA,c-i))),t.charAt(c)!==e.charAt(s)&&(h*=ade)),(h<uA&&n.charAt(c-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(c-1)!==r.charAt(s))&&(f=N_(t,e,n,r,c+1,s+2,o),f*uA>h&&(h=f*uA)),h>d&&(d=h),c=n.indexOf(l,c+1);return o[a]=d,d}function t2(t){return t.toLowerCase().replace(Rz," ")}function hde(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,N_(t,e,t2(t),t2(e),0,0,{})}var vk="Dialog",[Iz,bpe]=jh(vk),[fde,Ys]=Iz(vk),Nz=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=E.useRef(null),l=E.useRef(null),[c,d]=HS({prop:r,defaultProp:i??!1,onChange:s,caller:vk});return x.jsx(fde,{scope:e,triggerRef:a,contentRef:l,contentId:Fo(),titleId:Fo(),descriptionId:Fo(),open:c,onOpenChange:d,onOpenToggle:E.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};Nz.displayName=vk;var Dz="DialogTrigger",pde=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ys(Dz,n),s=wn(e,i.triggerRef);return x.jsx(Ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":BI(i.open),...r,ref:s,onClick:We(t.onClick,i.onOpenToggle)})});pde.displayName=Dz;var jI="DialogPortal",[mde,Mz]=Iz(jI,{forceMount:void 0}),Oz=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Ys(jI,e);return x.jsx(mde,{scope:e,forceMount:n,children:E.Children.map(r,o=>x.jsx(fl,{present:n||s.open,children:x.jsx(VS,{asChild:!0,container:i,children:o})}))})};Oz.displayName=jI;var q1="DialogOverlay",Lz=E.forwardRef((t,e)=>{const n=Mz(q1,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Ys(q1,t.__scopeDialog);return s.modal?x.jsx(fl,{present:r||s.open,children:x.jsx(yde,{...i,ref:e})}):null});Lz.displayName=q1;var gde=Qy("DialogOverlay.RemoveScroll"),yde=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ys(q1,n);return x.jsx(OI,{as:gde,allowPinchZoom:!0,shards:[i.contentRef],children:x.jsx(Ue.div,{"data-state":BI(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Rh="DialogContent",jz=E.forwardRef((t,e)=>{const n=Mz(Rh,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Ys(Rh,t.__scopeDialog);return x.jsx(fl,{present:r||s.open,children:s.modal?x.jsx(vde,{...i,ref:e}):x.jsx(wde,{...i,ref:e})})});jz.displayName=Rh;var vde=E.forwardRef((t,e)=>{const n=Ys(Rh,t.__scopeDialog),r=E.useRef(null),i=wn(e,n.contentRef,r);return E.useEffect(()=>{const s=r.current;if(s)return dz(s)},[]),x.jsx(Fz,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:We(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:We(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:We(t.onFocusOutside,s=>s.preventDefault())})}),wde=E.forwardRef((t,e)=>{const n=Ys(Rh,t.__scopeDialog),r=E.useRef(!1),i=E.useRef(!1);return x.jsx(Fz,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Fz=E.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Ys(Rh,n),l=E.useRef(null),c=wn(e,l);return lz(),x.jsxs(x.Fragment,{children:[x.jsx(MI,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:x.jsx(Tw,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":BI(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),x.jsxs(x.Fragment,{children:[x.jsx(bde,{titleId:a.titleId}),x.jsx(Sde,{contentRef:l,descriptionId:a.descriptionId})]})]})}),FI="DialogTitle",Bz=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ys(FI,n);return x.jsx(Ue.h2,{id:i.titleId,...r,ref:e})});Bz.displayName=FI;var $z="DialogDescription",Uz=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ys($z,n);return x.jsx(Ue.p,{id:i.descriptionId,...r,ref:e})});Uz.displayName=$z;var zz="DialogClose",Vz=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ys(zz,n);return x.jsx(Ue.button,{type:"button",...r,ref:e,onClick:We(t.onClick,()=>i.onOpenChange(!1))})});Vz.displayName=zz;function BI(t){return t?"open":"closed"}var Hz="DialogTitleWarning",[xpe,Wz]=C8(Hz,{contentName:Rh,titleName:FI,docsSlug:"dialog"}),bde=({titleId:t})=>{const e=Wz(Hz),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},xde="DialogDescriptionWarning",Sde=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Wz(xde).contentName}}.`;return E.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},kde=Nz,Gz=Oz,$I=Lz,UI=jz,qz=Bz,Kz=Uz,Ede=Vz,Dg='[cmdk-group=""]',hA='[cmdk-group-items=""]',Ade='[cmdk-group-heading=""]',Xz='[cmdk-item=""]',n2=`${Xz}:not([aria-disabled="true"])`,D_="cmdk-item-select",cf="data-value",Cde=(t,e,n)=>hde(t,e,n),Yz=E.createContext(void 0),zw=()=>E.useContext(Yz),Qz=E.createContext(void 0),zI=()=>E.useContext(Qz),Jz=E.createContext(void 0),Zz=E.forwardRef((t,e)=>{let n=uf(()=>{var $,D;return{search:"",value:(D=($=t.value)!=null?$:t.defaultValue)!=null?D:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=uf(()=>new Set),i=uf(()=>new Map),s=uf(()=>new Map),o=uf(()=>new Set),a=e5(t),{label:l,children:c,value:d,onValueChange:h,filter:f,shouldFilter:p,loop:m,disablePointerSelection:g=!1,vimBindings:v=!0,...y}=t,w=Fo(),b=Fo(),k=Fo(),_=E.useRef(null),C=jde();Ih(()=>{if(d!==void 0){let $=d.trim();n.current.value=$,P.emit()}},[d]),Ih(()=>{C(6,G)},[]);let P=E.useMemo(()=>({subscribe:$=>(o.current.add($),()=>o.current.delete($)),snapshot:()=>n.current,setState:($,D,K)=>{var q,te,ee,je;if(!Object.is(n.current[$],D)){if(n.current[$]=D,$==="search")U(),I(),C(1,j);else if($==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Ne=document.getElementById(k);Ne?Ne.focus():(q=document.getElementById(w))==null||q.focus()}if(C(7,()=>{var Ne;n.current.selectedItemId=(Ne=B())==null?void 0:Ne.id,P.emit()}),K||C(5,G),((te=a.current)==null?void 0:te.value)!==void 0){let Ne=D??"";(je=(ee=a.current).onValueChange)==null||je.call(ee,Ne);return}}P.emit()}},emit:()=>{o.current.forEach($=>$())}}),[]),R=E.useMemo(()=>({value:($,D,K)=>{var q;D!==((q=s.current.get($))==null?void 0:q.value)&&(s.current.set($,{value:D,keywords:K}),n.current.filtered.items.set($,M(D,K)),C(2,()=>{I(),P.emit()}))},item:($,D)=>(r.current.add($),D&&(i.current.has(D)?i.current.get(D).add($):i.current.set(D,new Set([$]))),C(3,()=>{U(),I(),n.current.value||j(),P.emit()}),()=>{s.current.delete($),r.current.delete($),n.current.filtered.items.delete($);let K=B();C(4,()=>{U(),(K==null?void 0:K.getAttribute("id"))===$&&j(),P.emit()})}),group:$=>(i.current.has($)||i.current.set($,new Set),()=>{s.current.delete($),i.current.delete($)}),filter:()=>a.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:w,inputId:k,labelId:b,listInnerRef:_}),[]);function M($,D){var K,q;let te=(q=(K=a.current)==null?void 0:K.filter)!=null?q:Cde;return $?te($,n.current.search,D):0}function I(){if(!n.current.search||a.current.shouldFilter===!1)return;let $=n.current.filtered.items,D=[];n.current.filtered.groups.forEach(q=>{let te=i.current.get(q),ee=0;te.forEach(je=>{let Ne=$.get(je);ee=Math.max(Ne,ee)}),D.push([q,ee])});let K=_.current;V().sort((q,te)=>{var ee,je;let Ne=q.getAttribute("id"),gt=te.getAttribute("id");return((ee=$.get(gt))!=null?ee:0)-((je=$.get(Ne))!=null?je:0)}).forEach(q=>{let te=q.closest(hA);te?te.appendChild(q.parentElement===te?q:q.closest(`${hA} > *`)):K.appendChild(q.parentElement===K?q:q.closest(`${hA} > *`))}),D.sort((q,te)=>te[1]-q[1]).forEach(q=>{var te;let ee=(te=_.current)==null?void 0:te.querySelector(`${Dg}[${cf}="${encodeURIComponent(q[0])}"]`);ee==null||ee.parentElement.appendChild(ee)})}function j(){let $=V().find(K=>K.getAttribute("aria-disabled")!=="true"),D=$==null?void 0:$.getAttribute(cf);P.setState("value",D||void 0)}function U(){var $,D,K,q;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let te=0;for(let ee of r.current){let je=(D=($=s.current.get(ee))==null?void 0:$.value)!=null?D:"",Ne=(q=(K=s.current.get(ee))==null?void 0:K.keywords)!=null?q:[],gt=M(je,Ne);n.current.filtered.items.set(ee,gt),gt>0&&te++}for(let[ee,je]of i.current)for(let Ne of je)if(n.current.filtered.items.get(Ne)>0){n.current.filtered.groups.add(ee);break}n.current.filtered.count=te}function G(){var $,D,K;let q=B();q&&((($=q.parentElement)==null?void 0:$.firstChild)===q&&((K=(D=q.closest(Dg))==null?void 0:D.querySelector(Ade))==null||K.scrollIntoView({block:"nearest"})),q.scrollIntoView({block:"nearest"}))}function B(){var $;return($=_.current)==null?void 0:$.querySelector(`${Xz}[aria-selected="true"]`)}function V(){var $;return Array.from((($=_.current)==null?void 0:$.querySelectorAll(n2))||[])}function F($){let D=V()[$];D&&P.setState("value",D.getAttribute(cf))}function L($){var D;let K=B(),q=V(),te=q.findIndex(je=>je===K),ee=q[te+$];(D=a.current)!=null&&D.loop&&(ee=te+$<0?q[q.length-1]:te+$===q.length?q[0]:q[te+$]),ee&&P.setState("value",ee.getAttribute(cf))}function O($){let D=B(),K=D==null?void 0:D.closest(Dg),q;for(;K&&!q;)K=$>0?Ode(K,Dg):Lde(K,Dg),q=K==null?void 0:K.querySelector(n2);q?P.setState("value",q.getAttribute(cf)):L($)}let z=()=>F(V().length-1),N=$=>{$.preventDefault(),$.metaKey?z():$.altKey?O(1):L(1)},Y=$=>{$.preventDefault(),$.metaKey?F(0):$.altKey?O(-1):L(-1)};return E.createElement(Ue.div,{ref:e,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:$=>{var D;(D=y.onKeyDown)==null||D.call(y,$);let K=$.nativeEvent.isComposing||$.keyCode===229;if(!($.defaultPrevented||K))switch($.key){case"n":case"j":{v&&$.ctrlKey&&N($);break}case"ArrowDown":{N($);break}case"p":case"k":{v&&$.ctrlKey&&Y($);break}case"ArrowUp":{Y($);break}case"Home":{$.preventDefault(),F(0);break}case"End":{$.preventDefault(),z();break}case"Enter":{$.preventDefault();let q=B();if(q){let te=new Event(D_);q.dispatchEvent(te)}}}}},E.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:Bde},l),wk(t,$=>E.createElement(Qz.Provider,{value:P},E.createElement(Yz.Provider,{value:R},$))))}),_de=E.forwardRef((t,e)=>{var n,r;let i=Fo(),s=E.useRef(null),o=E.useContext(Jz),a=zw(),l=e5(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;Ih(()=>{if(!c)return a.item(i,o==null?void 0:o.id)},[c]);let d=t5(i,s,[t.value,t.children,s],t.keywords),h=zI(),f=cu(C=>C.value&&C.value===d.current),p=cu(C=>c||a.filter()===!1?!0:C.search?C.filtered.items.get(i)>0:!0);E.useEffect(()=>{let C=s.current;if(!(!C||t.disabled))return C.addEventListener(D_,m),()=>C.removeEventListener(D_,m)},[p,t.onSelect,t.disabled]);function m(){var C,P;g(),(P=(C=l.current).onSelect)==null||P.call(C,d.current)}function g(){h.setState("value",d.current,!0)}if(!p)return null;let{disabled:v,value:y,onSelect:w,forceMount:b,keywords:k,..._}=t;return E.createElement(Ue.div,{ref:Eh(s,e),..._,id:i,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!f,"data-disabled":!!v,"data-selected":!!f,onPointerMove:v||a.getDisablePointerSelection()?void 0:g,onClick:v?void 0:m},t.children)}),Tde=E.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:i,...s}=t,o=Fo(),a=E.useRef(null),l=E.useRef(null),c=Fo(),d=zw(),h=cu(p=>i||d.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);Ih(()=>d.group(o),[]),t5(o,a,[t.value,t.heading,l]);let f=E.useMemo(()=>({id:o,forceMount:i}),[i]);return E.createElement(Ue.div,{ref:Eh(a,e),...s,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&E.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),wk(t,p=>E.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},E.createElement(Jz.Provider,{value:f},p))))}),Pde=E.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,i=E.useRef(null),s=cu(o=>!o.search);return!n&&!s?null:E.createElement(Ue.div,{ref:Eh(i,e),...r,"cmdk-separator":"",role:"separator"})}),Rde=E.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,i=t.value!=null,s=zI(),o=cu(c=>c.search),a=cu(c=>c.selectedItemId),l=zw();return E.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),E.createElement(Ue.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":a,id:l.inputId,type:"text",value:i?t.value:o,onChange:c=>{i||s.setState("search",c.target.value),n==null||n(c.target.value)}})}),Ide=E.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...i}=t,s=E.useRef(null),o=E.useRef(null),a=cu(c=>c.selectedItemId),l=zw();return E.useEffect(()=>{if(o.current&&s.current){let c=o.current,d=s.current,h,f=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let p=c.offsetHeight;d.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return f.observe(c),()=>{cancelAnimationFrame(h),f.unobserve(c)}}},[]),E.createElement(Ue.div,{ref:Eh(s,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:l.listId},wk(t,c=>E.createElement("div",{ref:Eh(o,l.listInnerRef),"cmdk-list-sizer":""},c)))}),Nde=E.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:s,container:o,...a}=t;return E.createElement(kde,{open:n,onOpenChange:r},E.createElement(Gz,{container:o},E.createElement($I,{"cmdk-overlay":"",className:i}),E.createElement(UI,{"aria-label":t.label,"cmdk-dialog":"",className:s},E.createElement(Zz,{ref:e,...a}))))}),Dde=E.forwardRef((t,e)=>cu(n=>n.filtered.count===0)?E.createElement(Ue.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),Mde=E.forwardRef((t,e)=>{let{progress:n,children:r,label:i="Loading...",...s}=t;return E.createElement(Ue.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},wk(t,o=>E.createElement("div",{"aria-hidden":!0},o)))}),Wr=Object.assign(Zz,{List:Ide,Item:_de,Input:Rde,Group:Tde,Separator:Pde,Dialog:Nde,Empty:Dde,Loading:Mde});function Ode(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function Lde(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function e5(t){let e=E.useRef(t);return Ih(()=>{e.current=t}),e}var Ih=typeof window>"u"?E.useEffect:E.useLayoutEffect;function uf(t){let e=E.useRef();return e.current===void 0&&(e.current=t()),e}function cu(t){let e=zI(),n=()=>t(e.snapshot());return E.useSyncExternalStore(e.subscribe,n,n)}function t5(t,e,n,r=[]){let i=E.useRef(),s=zw();return Ih(()=>{var o;let a=(()=>{var c;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(c=d.current.textContent)==null?void 0:c.trim():i.current}})(),l=r.map(c=>c.trim());s.value(t,a,l),(o=e.current)==null||o.setAttribute(cf,a),i.current=a}),i}var jde=()=>{let[t,e]=E.useState(),n=uf(()=>new Map);return Ih(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,i)=>{n.current.set(r,i),e({})}};function Fde(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function wk({asChild:t,children:e},n){return t&&E.isValidElement(e)?E.cloneElement(Fde(e),{ref:e.ref},n(e.props.children)):n(e)}var Bde={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const $de=Gz,n5=E.forwardRef(({className:t,...e},n)=>x.jsx($I,{ref:n,className:Qt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));n5.displayName=$I.displayName;const Ude=E.forwardRef(({className:t,children:e,...n},r)=>x.jsxs($de,{children:[x.jsx(n5,{}),x.jsxs(UI,{ref:r,className:Qt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,x.jsxs(Ede,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[x.jsx(Ah,{className:"h-4 w-4"}),x.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ude.displayName=UI.displayName;const zde=E.forwardRef(({className:t,...e},n)=>x.jsx(qz,{ref:n,className:Qt("text-lg font-semibold leading-none tracking-tight",t),...e}));zde.displayName=qz.displayName;const Vde=E.forwardRef(({className:t,...e},n)=>x.jsx(Kz,{ref:n,className:Qt("text-sm text-muted-foreground",t),...e}));Vde.displayName=Kz.displayName;const r5=E.forwardRef(({className:t,...e},n)=>x.jsx(Wr,{ref:n,className:Qt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));r5.displayName=Wr.displayName;const i5=E.forwardRef(({className:t,...e},n)=>x.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[x.jsx(FG,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),x.jsx(Wr.Input,{ref:n,className:Qt("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));i5.displayName=Wr.Input.displayName;const s5=E.forwardRef(({className:t,...e},n)=>x.jsx(Wr.List,{ref:n,className:Qt("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));s5.displayName=Wr.List.displayName;const o5=E.forwardRef((t,e)=>x.jsx(Wr.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));o5.displayName=Wr.Empty.displayName;const M_=E.forwardRef(({className:t,...e},n)=>x.jsx(Wr.Group,{ref:n,className:Qt("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));M_.displayName=Wr.Group.displayName;const Hde=E.forwardRef(({className:t,...e},n)=>x.jsx(Wr.Separator,{ref:n,className:Qt("-mx-1 h-px bg-border",t),...e}));Hde.displayName=Wr.Separator.displayName;const O_=E.forwardRef(({className:t,...e},n)=>x.jsx(Wr.Item,{ref:n,className:Qt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...e}));O_.displayName=Wr.Item.displayName;function Wde(t,e,n=2){const r=t.split(`
`),i=e.split(`
`);let s=0;for(;s<r.length&&s<i.length&&r[s]===i[s];)s++;let o=r.length-1,a=i.length-1;for(;o>s&&a>s&&r[o]===i[a];)o--,a--;const l=Math.max(0,s-n),c=Math.min(r.length-1,o+n),d=Math.min(i.length-1,a+n);return{before:r.slice(l,c+1).join(`
`),after:i.slice(l,d+1).join(`
`)}}const Gde={covered:{icon:jo,color:"text-success",bg:"bg-success/10"},partial:{icon:Iw,color:"text-warning",bg:"bg-warning/10"},missing:{icon:Rw,color:"text-destructive",bg:"bg-destructive/10"}},r2=t=>t?new Date().getTime()-new Date(t).getTime()>90*24*60*60*1e3:!1,qde=[{key:"covered",icon:jo,label:"Covered",color:"text-success"},{key:"partial",icon:Iw,label:"Partial",color:"text-warning"},{key:"missing",icon:Rw,label:"Missing",color:"text-destructive"},{key:"outdated",icon:dR,label:"Outdated",color:"text-muted-foreground"}],i2={covered:{Icon:jo,color:"text-success"},partial:{Icon:Iw,color:"text-warning"},missing:{Icon:Rw,color:"text-destructive"}};function Kde({skillFilter:t,skillsFramework:e,allSkills:n,onSkillFilterChange:r}){const[i,s]=E.useState(!1);return x.jsx("div",{className:"px-3 py-2 border-b border-border/50",children:x.jsxs(nde,{open:i,onOpenChange:s,children:[x.jsx(rde,{asChild:!0,children:x.jsxs("button",{role:"combobox","aria-expanded":i,className:"flex w-full items-center justify-between rounded-md border border-border bg-muted/30 px-2 py-1.5 text-[11px] text-foreground outline-none focus:ring-1 focus:ring-primary/30 hover:bg-muted/50 transition-colors",children:[t?x.jsx("span",{className:"flex items-center gap-1.5 truncate",children:(()=>{const o=n.find(c=>c.id===t.skillId);if(!o)return t.skillName;const{Icon:a,color:l}=i2[o.status];return x.jsxs(x.Fragment,{children:[x.jsx(a,{className:`w-3 h-3 flex-shrink-0 ${l}`}),x.jsx("span",{className:"truncate",children:o.name})]})})()}):x.jsx("span",{className:"text-muted-foreground",children:"All sections"}),x.jsx(kG,{className:"ml-1 h-3 w-3 shrink-0 opacity-50"})]})}),x.jsx(Pz,{className:"w-56 p-0",align:"start",children:x.jsxs(r5,{children:[x.jsx(i5,{placeholder:"Filter by skill...",className:"h-8 text-xs"}),x.jsxs(s5,{children:[x.jsx(o5,{children:"No skill found."}),x.jsx(M_,{children:x.jsxs(O_,{value:"__all__",onSelect:()=>{r(null),s(!1)},className:"text-xs",children:[x.jsx(Jy,{className:`mr-1.5 h-3 w-3 ${t?"opacity-0":"opacity-100"}`}),"All sections"]})}),e==null?void 0:e.map(o=>x.jsx(M_,{heading:o.name,children:o.skills.map(a=>{const{Icon:l,color:c}=i2[a.status],d=(t==null?void 0:t.skillId)===a.id;return x.jsxs(O_,{value:a.name,onSelect:()=>{r({skillId:a.id,skillName:a.name}),s(!1)},className:"text-xs",children:[x.jsx(Jy,{className:`mr-1.5 h-3 w-3 flex-shrink-0 ${d?"opacity-100":"opacity-0"}`}),x.jsx(l,{className:`mr-1.5 h-3 w-3 flex-shrink-0 ${c}`}),x.jsx("span",{className:"truncate",children:a.name})]},a.id)})},o.id))]})]})})]})})}const Xde=({skillFilter:t,onSkillFilterChange:e})=>{var G;const{data:n,isLoading:r}=DI(),{data:i,isLoading:s}=fI(),o=Qce(),a=ere(),[l,c]=E.useState(null),[d,h]=E.useState(!1),[f,p]=E.useState(""),[m,g]=E.useState(!1),[v,y]=E.useState(null),w=E.useMemo(()=>(i==null?void 0:i.flatMap(B=>B.skills))??[],[i]),b=E.useMemo(()=>B=>w.filter(V=>V.section===B),[w]),{displaySections:k,filterMode:_}=E.useMemo(()=>{if(!n)return{displaySections:[],filterMode:"none"};let B=n,V="none";if(t){const F=w.find(O=>O.id===t.skillId),L=n.filter(O=>!!(O.skillsCovered.includes(t.skillId)||F!=null&&F.section&&F.section===O.title));if(L.length>0)B=L,V="direct";else{const O=i==null?void 0:i.find(z=>z.skills.some(N=>N.id===t.skillId));if(O){const z=new Set(O.skills.map(Y=>Y.id)),N=n.filter(Y=>Y.skillsCovered.some($=>z.has($)));N.length>0?(B=N,V="category"):V="unlinked"}else V="unlinked"}}return v&&(B=B.filter(F=>{const L=b(F.title);return L.length===0?!1:v==="outdated"?L.some(O=>r2(O.lastUpdated)):L.some(O=>O.status===v)})),{displaySections:B,filterMode:V}},[t,v,n,w,i,b]),C=E.useMemo(()=>{if(!n)return{covered:0,partial:0,missing:0,outdated:0};let B=n;if(t){const F=w.find(O=>O.id===t.skillId),L=n.filter(O=>!!(O.skillsCovered.includes(t.skillId)||F!=null&&F.section&&F.section===O.title));if(L.length>0)B=L;else{const O=i==null?void 0:i.find(z=>z.skills.some(N=>N.id===t.skillId));if(O){const z=new Set(O.skills.map(Y=>Y.id)),N=n.filter(Y=>Y.skillsCovered.some($=>z.has($)));N.length>0&&(B=N)}}}const V={covered:0,partial:0,missing:0,outdated:0};for(const F of B){const L=b(F.title);L.some(O=>O.status==="covered")&&V.covered++,L.some(O=>O.status==="partial")&&V.partial++,L.some(O=>O.status==="missing")&&V.missing++,L.some(O=>r2(O.lastUpdated))&&V.outdated++}return V},[n,t,w,i,b]);if(E.useEffect(()=>{(t||v)&&k.length>0&&(c(k[0].id),h(!1))},[t==null?void 0:t.skillId,v,k]),r||s||!n||!i)return x.jsx("div",{className:"rounded-xl border border-border bg-card shadow-card flex items-center justify-center h-[calc(100vh-180px)]",children:x.jsx(yn,{className:"w-6 h-6 text-primary animate-spin"})});const P=l??((G=k[0])==null?void 0:G.id),R=k.find(B=>B.id===P)??k[0];if(!R)return null;const M=b(R.title),I=()=>{p(R.content),h(!0)},j=()=>{h(!1),p("")},U=async()=>{if(f===R.content){h(!1);return}const B=Wde(R.content,f);try{await o.mutateAsync({id:R.id,content:f}),await a.mutateAsync({sectionId:R.id,before:B.before,after:B.after,source:"manual",autoApprove:!0}),h(!1),p(""),g(!0),setTimeout(()=>g(!1),2e3)}catch{Xa.error("Failed to save edit")}};return x.jsxs(At.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"rounded-xl border border-border bg-card shadow-card flex flex-col h-[calc(100vh-180px)]",children:[x.jsx("div",{className:"px-5 py-3 border-b border-border",children:x.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(_G,{className:"w-4 h-4 text-primary"}),x.jsx("h2",{className:"text-sm font-semibold text-foreground",children:"Playbook Content"})]}),x.jsx("div",{className:"h-5 w-px bg-border"}),x.jsx("div",{className:"flex items-center gap-2",children:qde.map(({key:B,icon:V,label:F,color:L})=>{const O=C[B],z=v===B;return x.jsxs("button",{onClick:()=>y(z?null:B),className:`flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-medium transition-all ${z?"bg-primary/10 ring-2 ring-primary/30":"bg-muted/50 hover:bg-muted/80"}`,children:[x.jsx(V,{className:`w-3.5 h-3.5 ${L}`}),x.jsx("span",{className:"text-muted-foreground",children:F}),x.jsx("span",{className:`font-bold font-mono ${L}`,children:O})]},B)})}),t&&x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("div",{className:"flex items-center gap-1.5",children:[x.jsx(TG,{className:"w-3 h-3 text-primary"}),x.jsxs("span",{className:"text-[11px] text-muted-foreground",children:[_==="direct"&&`${k.length} section${k.length!==1?"s":""} for`,_==="category"&&`${k.length} related section${k.length!==1?"s":""} for`,_==="unlinked"&&"No linked sections for"]}),x.jsx("span",{className:"text-[11px] font-semibold text-primary",children:t.skillName}),_==="unlinked"&&x.jsx("span",{className:"text-[11px] text-muted-foreground",children:" consider adding a new section"})]}),x.jsxs("button",{onClick:()=>e(null),className:"flex items-center gap-1 rounded-lg bg-muted px-2 py-0.5 text-[10px] font-semibold text-muted-foreground hover:bg-muted/80 transition-colors",children:[x.jsx(Ah,{className:"w-2.5 h-2.5"}),"Clear"]})]}),x.jsx(lk,{mode:"wait",children:m&&x.jsxs(At.span,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex items-center gap-1 text-[10px] text-success font-semibold",children:[x.jsx(jo,{className:"w-3 h-3"}),"Saved  staged for review"]},"saved")})]})}),x.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[x.jsxs("div",{className:"flex flex-1 overflow-hidden border-r border-border",children:[x.jsxs("div",{className:"w-56 border-r border-border flex-shrink-0 flex flex-col",children:[x.jsx(Kde,{skillFilter:t,skillsFramework:i,allSkills:w,onSkillFilterChange:e}),x.jsx("div",{className:"flex-1 overflow-y-auto py-1",children:k.map(B=>{const V=b(B.title),F=V.filter(O=>O.status==="covered").length,L=V.length;return x.jsxs("button",{onClick:()=>{c(B.id),h(!1)},className:`w-full text-left px-4 py-2.5 flex items-start gap-2 text-xs transition-colors ${P===B.id?"bg-primary/10 text-primary border-r-2 border-primary":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:[x.jsx(jB,{className:`w-3 h-3 mt-0.5 flex-shrink-0 transition-transform ${P===B.id?"rotate-90":""}`}),x.jsxs("div",{children:[x.jsx("span",{className:"block",children:B.title}),L>0&&x.jsxs("span",{className:`text-[10px] font-mono ${F===L?"text-success":"text-muted-foreground"}`,children:[F,"/",L," skills"]})]})]},B.id)})})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[x.jsxs("div",{className:"mb-4",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[x.jsx("h3",{className:"text-lg font-bold text-foreground",children:R.title.replace(/^\u00A0+/,"")}),x.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground font-mono bg-muted rounded px-2 py-0.5",children:[x.jsx(dR,{className:"w-2.5 h-2.5"}),R.lastUpdated]}),d?x.jsxs("div",{className:"flex items-center gap-1.5 ml-auto",children:[x.jsxs("button",{onClick:j,className:"flex items-center gap-1 rounded-lg bg-muted px-2.5 py-1 text-[11px] font-semibold text-muted-foreground hover:bg-muted/80 transition-colors",children:[x.jsx(Ah,{className:"w-3 h-3"}),"Cancel"]}),x.jsxs("button",{onClick:U,disabled:o.isPending,className:"flex items-center gap-1 rounded-lg gradient-primary px-2.5 py-1 text-[11px] font-semibold text-primary-foreground transition-opacity disabled:opacity-50",children:[o.isPending?x.jsx(yn,{className:"w-3 h-3 animate-spin"}):x.jsx(jG,{className:"w-3 h-3"}),"Save"]})]}):x.jsxs("button",{onClick:I,className:"flex items-center gap-1 rounded-lg bg-secondary px-2.5 py-1 text-[11px] font-semibold text-secondary-foreground hover:bg-secondary/80 transition-colors ml-auto",children:[x.jsx(OG,{className:"w-3 h-3"}),"Edit"]})]}),M.length>0&&x.jsx("div",{className:"flex flex-wrap gap-1.5 mb-4",children:M.map(B=>{const V=Gde[B.status],F=V.icon;return x.jsxs("span",{className:`inline-flex items-center gap-1 rounded-md px-2 py-1 text-[11px] font-medium ${V.bg} border border-transparent`,children:[x.jsx(F,{className:`w-3 h-3 ${V.color}`}),B.name]},B.id)})})]}),d?x.jsx("textarea",{value:f,onChange:B=>p(B.target.value),className:"w-full h-[calc(100%-80px)] min-h-[300px] rounded-lg border border-border bg-muted/30 p-4 text-sm text-foreground font-mono leading-relaxed resize-none outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50 transition-all",autoFocus:!0}):x.jsx(vv,{children:R.content})]})]}),x.jsx("div",{className:"w-[400px] flex-shrink-0",children:x.jsx(sz,{currentSection:R.title,sectionId:R.id,isEmbedded:!0})})]})]})};function Yde(){return gu({queryKey:["imports"],queryFn:async()=>{const{data:t,error:e}=await Ce.from("imports").select("*").order("started_at",{ascending:!1});if(e)throw e;return t??[]}})}function a5(){const t=ds();return Ko({mutationFn:async({provider:e,content:n})=>{const{data:r,error:i}=await Ce.functions.invoke("import",{body:{provider:e,content:n}});if(i)throw i;return r},onSuccess:()=>{t.invalidateQueries({queryKey:["imports"]}),t.invalidateQueries({queryKey:["playbook-sections"]}),t.invalidateQueries({queryKey:["skills"]})}})}function l5(){const t=ds();return Ko({mutationFn:async()=>{const{data:e,error:n}=await Ce.functions.invoke("import-notion");if(n)throw n;return e},onSuccess:()=>{t.invalidateQueries({queryKey:["imports"]}),t.invalidateQueries({queryKey:["playbook-sections"]}),t.invalidateQueries({queryKey:["skills"]}),t.invalidateQueries({queryKey:["connections"]})}})}function c5(){const t=ds();return Ko({mutationFn:async e=>{const{data:n,error:r}=await Ce.functions.invoke("import-confluence",{body:e?{pageIds:e}:{}});if(r)throw r;return n},onSuccess:()=>{t.invalidateQueries({queryKey:["imports"]}),t.invalidateQueries({queryKey:["playbook-sections"]}),t.invalidateQueries({queryKey:["skills"]}),t.invalidateQueries({queryKey:["connections"]})}})}const fr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),L_=[.001,0,0,.001,0,0],fA=1.35,yi={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},jl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},wv="pdfjs_internal_editor_",we={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Me={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Qde={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},j_={TRIANGLES:1,LATTICE:2,PATCH:3},ln={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},vx={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},en={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},df={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},bk={ERRORS:0,WARNINGS:1,INFOS:5},bv={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Mg={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Jde={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let xk=bk.WARNINGS;function Zde(t){Number.isInteger(t)&&(xk=t)}function ehe(){return xk}function Sk(t){xk>=bk.INFOS&&console.info(`Info: ${t}`)}function me(t){xk>=bk.WARNINGS&&console.warn(`Warning: ${t}`)}function Ge(t){throw new Error(t)}function He(t,e){t||Ge(e)}function the(t){switch(t==null?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function u5(t,e=null,n=null){if(!t)return null;if(n&&typeof t=="string"){if(n.addDefaultProtocol&&t.startsWith("www.")){const i=t.match(/\./g);(i==null?void 0:i.length)>=2&&(t=`http://${t}`)}if(n.tryConvertEncoding)try{t=ahe(t)}catch{}}const r=e?URL.parse(t,e):URL.parse(t);return the(r)?r:null}function d5(t,e,n=!1){const r=URL.parse(t);return r?(r.hash=e,r.href):n&&u5(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function ge(t,e,n,r=!1){return Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const Uh=function(){function e(n,r){this.message=n,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class s2 extends Uh{constructor(e,n){super(e,"PasswordException"),this.code=n}}class pA extends Uh{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class F_ extends Uh{constructor(e){super(e,"InvalidPDFException")}}class K1 extends Uh{constructor(e,n,r){super(e,"ResponseException"),this.status=n,this.missing=r}}class nhe extends Uh{constructor(e){super(e,"FormatError")}}class uu extends Uh{constructor(e){super(e,"AbortException")}}function rhe(t){(typeof t!="object"||(t==null?void 0:t.length)===void 0)&&Ge("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const r=[];for(let i=0;i<e;i+=n){const s=Math.min(i+n,e),o=t.subarray(i,s);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function kk(t){typeof t!="string"&&Ge("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let r=0;r<e;++r)n[r]=t.charCodeAt(r)&255;return n}function ihe(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function she(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function ohe(){try{return new Function(""),!0}catch{return!1}}class vn{static get isLittleEndian(){return ge(this,"isLittleEndian",she())}static get isEvalSupported(){return ge(this,"isEvalSupported",ohe())}static get isOffscreenCanvasSupported(){return ge(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ge(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return ge(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return ge(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:n}=navigator;return ge(this,"platform",{isAndroid:n.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){var e,n;return ge(this,"isCSSRoundSupported",(n=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:n.call(e,"width: round(1.5px, 1px)"))}}const mA=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));var Ja,wx,B_;class re{static makeHexColor(e,n,r){return`#${mA[e]}${mA[n]}${mA[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,n){let r;e[0]?(e[0]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[3],n[3]*=e[3]):(r=n[0],n[0]=n[1],n[1]=r,r=n[2],n[2]=n[3],n[3]=r,e[1]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static multiplyByDOMMatrix(e,n){return[e[0]*n.a+e[2]*n.b,e[1]*n.a+e[3]*n.b,e[0]*n.c+e[2]*n.d,e[1]*n.c+e[3]*n.d,e[0]*n.e+e[2]*n.f+e[4],e[1]*n.e+e[3]*n.f+e[5]]}static applyTransform(e,n,r=0){const i=e[r],s=e[r+1];e[r]=i*n[0]+s*n[2]+n[4],e[r+1]=i*n[1]+s*n[3]+n[5]}static applyTransformToBezier(e,n,r=0){const i=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5];for(let d=0;d<6;d+=2){const h=e[r+d],f=e[r+d+1];e[r+d]=h*i+f*o+l,e[r+d+1]=h*s+f*a+c}}static applyInverseTransform(e,n){const r=e[0],i=e[1],s=n[0]*n[3]-n[1]*n[2];e[0]=(r*n[3]-i*n[2]+n[2]*n[5]-n[4]*n[3])/s,e[1]=(-r*n[1]+i*n[0]+n[4]*n[1]-n[5]*n[0])/s}static axialAlignedBoundingBox(e,n,r){const i=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],d=e[0],h=e[1],f=e[2],p=e[3];let m=i*d+l,g=m,v=i*f+l,y=v,w=a*h+c,b=w,k=a*p+c,_=k;if(s!==0||o!==0){const C=s*d,P=s*f,R=o*h,M=o*p;m+=R,y+=R,v+=M,g+=M,w+=C,_+=C,k+=P,b+=P}r[0]=Math.min(r[0],m,v,g,y),r[1]=Math.min(r[1],w,k,b,_),r[2]=Math.max(r[2],m,v,g,y),r[3]=Math.max(r[3],w,k,b,_)}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=r**2+i**2,l=r*s+i*o,c=s**2+o**2,d=(a+c)/2,h=Math.sqrt(d**2-(a*c-l**2));n[0]=Math.sqrt(d+h||1),n[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const r=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return s>o?null:[r,s,i,o]}static pointBoundingBox(e,n,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],n),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],n)}static rectBoundingBox(e,n,r,i,s){s[0]=Math.min(s[0],e,r),s[1]=Math.min(s[1],n,i),s[2]=Math.max(s[2],e,r),s[3]=Math.max(s[3],n,i)}static bezierBoundingBox(e,n,r,i,s,o,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],n,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],n,l),T(this,Ja,B_).call(this,e,r,s,a,n,i,o,l,3*(-e+3*(r-s)+a),6*(e-2*r+s),3*(r-e),c),T(this,Ja,B_).call(this,e,r,s,a,n,i,o,l,3*(-n+3*(i-o)+l),6*(n-2*i+o),3*(i-n),c)}}Ja=new WeakSet,wx=function(e,n,r,i,s,o,a,l,c,d){if(c<=0||c>=1)return;const h=1-c,f=c*c,p=f*c,m=h*(h*(h*e+3*c*n)+3*f*r)+p*i,g=h*(h*(h*s+3*c*o)+3*f*a)+p*l;d[0]=Math.min(d[0],m),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],m),d[3]=Math.max(d[3],g)},B_=function(e,n,r,i,s,o,a,l,c,d,h,f){if(Math.abs(c)<1e-12){Math.abs(d)>=1e-12&&T(this,Ja,wx).call(this,e,n,r,i,s,o,a,l,-h/d,f);return}const p=d**2-4*h*c;if(p<0)return;const m=Math.sqrt(p),g=2*c;T(this,Ja,wx).call(this,e,n,r,i,s,o,a,l,(-d+m)/g,f),T(this,Ja,wx).call(this,e,n,r,i,s,o,a,l,(-d-m)/g,f)},A(re,Ja);function ahe(t){return decodeURIComponent(escape(t))}let gA=null,o2=null;function lhe(t){return gA||(gA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,o2=new Map([["","t"]])),t.replaceAll(gA,(e,n,r)=>n?n.normalize("NFKC"):o2.get(r))}function h5(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),rhe(t)}const jf="pdfjs_internal_id_";function che(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[r,i,...s]=n;if(!t(r)&&!Number.isInteger(r)||!e(i))return!1;const o=s.length;let a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of s)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function Bn(t,e,n){return Math.min(Math.max(t,e),n)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,n)=>e+n,0)});class xv{static textContent(e){const n=[],r={items:n,styles:Object.create(null)};function i(s){var l;if(!s)return;let o=null;const a=s.name;if(a==="#text")o=s.value;else if(xv.shouldBuildText(a))(l=s==null?void 0:s.attributes)!=null&&l.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&n.push({str:o}),!!s.children)for(const c of s.children)i(c)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class f5{static setupStorage(e,n,r,i,s){const o=i.getValue(n,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(n,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{i.setValue(n,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(n,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(n,{value:c})});break}}static setAttributes({html:e,element:n,storage:r=null,intent:i,linkService:s}){const{attributes:o}=n,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&s.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,n,r)}static render(e){var h,f;const n=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:s,linkService:r});const a=s!=="richText",l=e.div;if(l.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=p}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),a&&xv.shouldBuildText(i.name)&&c.push(p)}return{textDivs:c}}const d=[[i,-1,o]];for(;d.length>0;){const[p,m,g]=d.at(-1);if(m+1===p.children.length){d.pop();continue}const v=p.children[++d.at(-1)[1]];if(v===null)continue;const{name:y}=v;if(y==="#text"){const b=document.createTextNode(v.value);c.push(b),g.append(b);continue}const w=(h=v==null?void 0:v.attributes)!=null&&h.xmlns?document.createElementNS(v.attributes.xmlns,y):document.createElement(y);if(g.append(w),v.attributes&&this.setAttributes({html:w,element:v,storage:n,intent:s,linkService:r}),((f=v.children)==null?void 0:f.length)>0)d.push([v,-1,w]);else if(v.value){const b=document.createTextNode(v.value);a&&xv.shouldBuildText(y)&&c.push(b),w.append(b)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const ea="http://www.w3.org/2000/svg",$u=class $u{};H($u,"CSS",96),H($u,"PDF",72),H($u,"PDF_TO_CSS_UNITS",$u.CSS/$u.PDF);let du=$u;async function Vw(t,e="text"){if(Kg(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,r)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(i.response);return}n(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class Hw{constructor({viewBox:e,userUnit:n,scale:r,rotation:i,offsetX:s=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=n,this.scale=r,this.rotation=i,this.offsetX=s,this.offsetY=o,r*=n;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let d,h,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:d=-1,h=0,f=0,p=1;break;case 90:d=0,h=1,f=1,p=0;break;case 270:d=0,h=-1,f=-1,p=0;break;case 0:d=1,h=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let m,g,v,y;d===0?(m=Math.abs(c-e[1])*r+s,g=Math.abs(l-e[0])*r+o,v=(e[3]-e[1])*r,y=(e[2]-e[0])*r):(m=Math.abs(l-e[0])*r+s,g=Math.abs(c-e[1])*r+o,v=(e[2]-e[0])*r,y=(e[3]-e[1])*r),this.transform=[d*r,h*r,f*r,p*r,m-d*r*l-f*r*c,g-h*r*l-p*r*c],this.width=v,this.height=y}get rawDims(){const e=this.viewBox;return ge(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new Hw({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,n){const r=[e,n];return re.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const n=[e[0],e[1]];re.applyTransform(n,this.transform);const r=[e[2],e[3]];return re.applyTransform(r,this.transform),[n[0],n[1],r[0],r[1]]}convertToPdfPoint(e,n){const r=[e,n];return re.applyInverseTransform(r,this.transform),r}}class VI extends Uh{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function Ek(t){const e=t.length;let n=0;for(;n<e&&t[n].trim()==="";)n++;return t.substring(n,n+5).toLowerCase()==="data:"}function HI(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function uhe(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function dhe(t,e="document.pdf"){if(typeof t!="string")return e;if(Ek(t))return me('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(t);if(!r)return e;const i=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},s=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(s.test(o))return i(o);if(r.searchParams.size>0){const a=Array.from(r.searchParams.values()).reverse();for(const c of a)if(s.test(c))return i(c);const l=Array.from(r.searchParams.keys()).reverse();for(const c of l)if(s.test(c))return i(c)}if(r.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return i(l[0])}return e}class a2{constructor(){H(this,"started",Object.create(null));H(this,"times",[])}time(e){e in this.started&&me(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||me(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:r}of this.times)n=Math.max(r.length,n);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(n)} ${s-i}ms
`);return e.join("")}}function Kg(t,e){const n=e?URL.parse(t,e):URL.parse(t);return(n==null?void 0:n.protocol)==="http:"||(n==null?void 0:n.protocol)==="https:"}function us(t){t.preventDefault()}function Ht(t){t.preventDefault(),t.stopPropagation()}function hhe(t){console.log("Deprecated API usage: "+t)}var Pv;class X1{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,Pv)||S(this,Pv,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const n=u(this,Pv).exec(e);if(!n)return null;const r=parseInt(n[1],10);let i=parseInt(n[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(n[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(n[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(n[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(n[6],10);l=l>=0&&l<=59?l:0;const c=n[7]||"Z";let d=parseInt(n[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(n[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(o+=d,a+=h):c==="+"&&(o-=d,a-=h),new Date(Date.UTC(r,i,s,o,a,l))}}Pv=new WeakMap,A(X1,Pv);function fhe(t,{scale:e=1,rotation:n=0}){const{width:r,height:i}=t.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new Hw({viewBox:s,userUnit:1,scale:e,rotation:n})}function Ww(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(me(`Not a valid color format: "${t}"`),[0,0,0])}function phe(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const r=window.getComputedStyle(e).color;t.set(n,Ww(r))}e.remove()}function Pt(t){const{a:e,b:n,c:r,d:i,e:s,f:o}=t.getTransform();return[e,n,r,i,s,o]}function Zs(t){const{a:e,b:n,c:r,d:i,e:s,f:o}=t.getTransform().invertSelf();return[e,n,r,i,s,o]}function Nh(t,e,n=!1,r=!0){if(e instanceof Hw){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:o}=t,a=vn.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${s}px`,d=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,h=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!n||e.rotation%180===0?(o.width=d,o.height=h):(o.width=h,o.height=d)}r&&t.setAttribute("data-main-rotation",e.rotation)}class Ho{constructor(){const{pixelRatio:e}=Ho;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,n,r,i,s=-1){let o=1/0,a=1/0,l=1/0;r=Ho.capPixels(r,s),r>0&&(o=Math.sqrt(r/(e*n))),i!==-1&&(a=i/e,l=i/n);const c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,n){if(n>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return e>0?Math.min(e,r):r}return e}}const $_=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class mhe{static get isDarkMode(){var e;return ge(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class ghe{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:n}=e;n.width=n.height="0",n.display="none",n.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),ge(this,"commentForegroundColor",Ww(r))}}function yhe(t,e,n,r){r=Math.min(Math.max(r??1,0),1);const i=255*(1-r);return t=Math.round(t*r+i),e=Math.round(e*r+i),n=Math.round(n*r+i),[t,e,n]}function l2(t,e){const n=t[0]/255,r=t[1]/255,i=t[2]/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;if(s===o)e[0]=e[1]=0;else{const l=s-o;switch(e[1]=a<.5?l/(s+o):l/(2-s-o),s){case n:e[0]=((r-i)/l+(r<i?6:0))*60;break;case r:e[0]=((i-n)/l+2)*60;break;case i:e[0]=((n-r)/l+4)*60;break}}e[2]=a}function U_(t,e){const n=t[0],r=t[1],i=t[2],s=(1-Math.abs(2*i-1))*r,o=s*(1-Math.abs(n/60%2-1)),a=i-s/2;switch(Math.floor(n/60)){case 0:e[0]=s+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=s+a,e[2]=a;break;case 2:e[0]=a,e[1]=s+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=s+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=s+a;break;case 5:case 6:e[0]=s+a,e[1]=a,e[2]=o+a;break}}function c2(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function u2(t,e,n){U_(t,n),n.map(c2);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];U_(e,n),n.map(c2);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}const d2=new Map;function vhe(t,e){const n=t[0]+t[1]*256+t[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=d2.get(n);if(r)return r;const i=new Float32Array(9),s=i.subarray(0,3),o=i.subarray(3,6);l2(t,o);const a=i.subarray(6,9);l2(e,a);const l=a[2]<.5,c=l?12:4.5;if(o[2]=l?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),u2(o,a,s)<c){let d,h;l?(d=o[2],h=1):(d=0,h=o[2]);const f=.005;for(;h-d>f;){const p=o[2]=(d+h)/2;l===u2(o,a,s)<c?d=p:h=p}o[2]=l?h:d}return U_(o,s),r=re.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),d2.set(n,r),r}function p5({html:t,dir:e,className:n},r){const i=document.createDocumentFragment();if(typeof t=="string"){const s=document.createElement("p");s.dir=e||"auto";const o=t.split(/(?:\r\n?|\n)/);for(let a=0,l=o.length;a<l;++a){const c=o[a];s.append(document.createTextNode(c)),a<l-1&&s.append(document.createElement("br"))}i.append(s)}else f5.render({xfaHtml:t,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",n),r.append(i)}function m5(t){const e=new Path2D;if(!t)return e;for(let n=0,r=t.length;n<r;)switch(t[n++]){case Mg.moveTo:e.moveTo(t[n++],t[n++]);break;case Mg.lineTo:e.lineTo(t[n++],t[n++]);break;case Mg.curveTo:e.bezierCurveTo(t[n++],t[n++],t[n++],t[n++],t[n++],t[n++]);break;case Mg.quadraticCurveTo:e.quadraticCurveTo(t[n++],t[n++],t[n++],t[n++]);break;case Mg.closePath:e.closePath();break;default:me(`Unrecognized drawing path operator: ${t[n-1]}`);break}return e}var ua,_s,pp,Kl,id,Zm,g5,y5;const Oe=class Oe{constructor(){A(this,Zm)}get pagesNumber(){return u(Oe,Kl)}set pagesNumber(e){u(Oe,Kl)!==e&&(S(Oe,Kl,e),e===0&&(S(Oe,_s,null),S(Oe,ua,null)))}addListener(e){u(Oe,id).push(e)}removeListener(e){const n=u(Oe,id).indexOf(e);n>=0&&u(Oe,id).splice(n,1)}movePages(e,n,r){T(this,Zm,y5).call(this,!0);const i=u(Oe,_s),s=u(Oe,ua);u(Oe,pp).set(s);const o=n.length,a=new Uint32Array(o);let l=0;for(let p=0;p<o;p++){const m=n[p]-1;a[p]=i[m],m<r&&(l+=1)}const c=u(Oe,Kl);let d=r-l;const h=c-o;d=Bn(d,0,h);for(let p=0,m=0;p<c;p++)e.has(p+1)||(i[m++]=i[p]);i.copyWithin(d+o,d,h),i.set(a,d);let f=!1;for(let p=0,m=c;p<m;p++){const g=i[p];f||(f=g!==p+1),s[g-1]=p+1}T(this,Zm,g5).call(this),f||(this.pagesNumber=0)}hasBeenAltered(){return u(Oe,_s)!==null}getPageMappingForSaving(){return{pageIndices:u(Oe,ua)?u(Oe,ua).map(e=>e-1):null}}getPrevPageNumber(e){return u(Oe,pp)[u(Oe,_s)[e-1]-1]}getPageNumber(e){var n;return((n=u(Oe,ua))==null?void 0:n[e-1])??e}getPageId(e){var n;return((n=u(Oe,_s))==null?void 0:n[e-1])??e}static get instance(){return ge(this,"instance",new Oe)}getMapping(){return u(Oe,_s).subarray(0,this.pagesNumber)}};ua=new WeakMap,_s=new WeakMap,pp=new WeakMap,Kl=new WeakMap,id=new WeakMap,Zm=new WeakSet,g5=function(){for(const e of u(Oe,id))e()},y5=function(e){if(u(Oe,_s))return;const n=u(Oe,Kl),r=new Uint32Array(3*n),i=S(Oe,_s,r.subarray(0,n)),s=S(Oe,ua,r.subarray(n,2*n));if(e)for(let o=0;o<n;o++)i[o]=s[o]=o+1;S(Oe,pp,r.subarray(2*n))},A(Oe,ua,null),A(Oe,_s,null),A(Oe,pp,null),A(Oe,Kl,0),A(Oe,id,[]);let Sv=Oe;var Xl,Yl,ji,Fi,Rv,Ql,mp,gp,Iv,aS,v5,zn,w5,b5,hf,Xg;const sa=class sa{constructor(e){A(this,zn);A(this,Xl,null);A(this,Yl,null);A(this,ji);A(this,Fi,null);A(this,Rv,null);A(this,Ql,null);A(this,mp,null);A(this,gp,null);S(this,ji,e),u(sa,Iv)||S(sa,Iv,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=S(this,Xl,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=u(this,ji)._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(e.addEventListener("contextmenu",us,{signal:n}),e.addEventListener("pointerdown",T(sa,aS,v5),{signal:n}));const r=S(this,Fi,document.createElement("div"));r.className="buttons",e.append(r);const i=u(this,ji).toolbarPosition;if(i){const{style:s}=e,o=u(this,ji)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,Xl)}hide(){var e;u(this,Xl).classList.add("hidden"),(e=u(this,Yl))==null||e.hideDropdown()}show(){var e,n;u(this,Xl).classList.remove("hidden"),(e=u(this,Rv))==null||e.shown(),(n=u(this,Ql))==null||n.shown()}addDeleteButton(){const{editorType:e,_uiManager:n}=u(this,ji),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",u(sa,Iv)[e]),T(this,zn,hf).call(this,r)&&r.addEventListener("click",i=>{n.delete()},{signal:n._signal}),u(this,Fi).append(r)}async addAltText(e){const n=await e.render();T(this,zn,hf).call(this,n),u(this,Fi).append(n,u(this,zn,Xg)),S(this,Rv,e)}addComment(e,n=null){if(u(this,Ql))return;const r=e.renderForToolbar();if(!r)return;T(this,zn,hf).call(this,r);const i=S(this,mp,u(this,zn,Xg));n?(u(this,Fi).insertBefore(r,n),u(this,Fi).insertBefore(i,n)):u(this,Fi).append(r,i),S(this,Ql,e),e.toolbar=this}addColorPicker(e){if(u(this,Yl))return;S(this,Yl,e);const n=e.renderButton();T(this,zn,hf).call(this,n),u(this,Fi).append(n,u(this,zn,Xg))}async addEditSignatureButton(e){const n=S(this,gp,await e.renderEditButton(u(this,ji)));T(this,zn,hf).call(this,n),u(this,Fi).append(n,u(this,zn,Xg))}removeButton(e){var n,r;switch(e){case"comment":(n=u(this,Ql))==null||n.removeToolbarCommentButton(),S(this,Ql,null),(r=u(this,mp))==null||r.remove(),S(this,mp,null);break}}async addButton(e,n){switch(e){case"colorPicker":n&&this.addColorPicker(n);break;case"altText":n&&await this.addAltText(n);break;case"editSignature":n&&await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break;case"comment":n&&this.addComment(n);break}}async addButtonBefore(e,n,r){if(!n&&e==="comment")return;const i=u(this,Fi).querySelector(r);i&&e==="comment"&&this.addComment(n,i)}updateEditSignatureButton(e){u(this,gp)&&(u(this,gp).title=e)}remove(){var e;u(this,Xl).remove(),(e=u(this,Yl))==null||e.destroy(),S(this,Yl,null)}};Xl=new WeakMap,Yl=new WeakMap,ji=new WeakMap,Fi=new WeakMap,Rv=new WeakMap,Ql=new WeakMap,mp=new WeakMap,gp=new WeakMap,Iv=new WeakMap,aS=new WeakSet,v5=function(e){e.stopPropagation()},zn=new WeakSet,w5=function(e){u(this,ji)._focusEventsAllowed=!1,Ht(e)},b5=function(e){u(this,ji)._focusEventsAllowed=!0,Ht(e)},hf=function(e){const n=u(this,ji)._uiManager._signal;return!(n instanceof AbortSignal)||n.aborted?!1:(e.addEventListener("focusin",T(this,zn,w5).bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",T(this,zn,b5).bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",us,{signal:n}),!0)},Xg=function(){const e=document.createElement("div");return e.className="divider",e},A(sa,aS),A(sa,Iv,null);let z_=sa;var Nv,sd,da,cl,x5,S5,V_;class whe{constructor(e){A(this,cl);A(this,Nv,null);A(this,sd,null);A(this,da);S(this,da,e)}show(e,n,r){const[i,s]=T(this,cl,S5).call(this,n,r),{style:o}=u(this,sd)||S(this,sd,T(this,cl,x5).call(this));e.append(u(this,sd)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,sd).remove()}}Nv=new WeakMap,sd=new WeakMap,da=new WeakMap,cl=new WeakSet,x5=function(){const e=S(this,sd,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const n=u(this,da)._signal;n instanceof AbortSignal&&!n.aborted&&e.addEventListener("contextmenu",us,{signal:n});const r=S(this,Nv,document.createElement("div"));return r.className="buttons",e.append(r),u(this,da).hasCommentManager()&&T(this,cl,V_).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{u(this,da).commentSelection("floating_button")}),T(this,cl,V_).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{u(this,da).highlightSelection("floating_button")}),e},S5=function(e,n){let r=0,i=0;for(const s of e){const o=s.y+s.height;if(o<r)continue;const a=s.x+(n?s.width:0);if(o>r){i=a,r=o;continue}n?a>i&&(i=a):a<i&&(i=a)}return[n?1-i:i,r]},V_=function(e,n,r,i){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",n);const o=document.createElement("span");s.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",r);const a=u(this,da)._signal;a instanceof AbortSignal&&!a.aborted&&(s.addEventListener("contextmenu",us,{signal:a}),s.addEventListener("click",i,{signal:a})),u(this,Nv).append(s)};function k5(t,e,n){for(const r of n)e.addEventListener(r,t[r].bind(t))}var od,ad,yp,ld;const et=class et{static initializeAndAddPointerId(e){(u(et,ad)||S(et,ad,new Set)).add(e)}static setPointer(e,n){u(et,od)||S(et,od,n),u(et,ld)??S(et,ld,e)}static setTimeStamp(e){S(et,yp,e)}static isSamePointerId(e){return u(et,od)===e}static isSamePointerIdOrRemove(e){var n;return u(et,od)===e?!0:((n=u(et,ad))==null||n.delete(e),!1)}static isSamePointerType(e){return u(et,ld)===e}static isInitializedAndDifferentPointerType(e){return u(et,ld)!==null&&!et.isSamePointerType(e)}static isSameTimeStamp(e){return u(et,yp)===e}static isUsingMultiplePointers(){var e;return((e=u(et,ad))==null?void 0:e.size)>=1}static clearPointerType(){S(et,ld,null)}static clearPointerIds(){S(et,od,NaN),S(et,ad,null)}static clearTimeStamp(){S(et,yp,NaN)}};od=new WeakMap,ad=new WeakMap,yp=new WeakMap,ld=new WeakMap,A(et,od,NaN),A(et,ad,null),A(et,yp,NaN),A(et,ld,null);let Kn=et;var lS;class bhe{constructor(){A(this,lS,0)}get id(){return`${wv}${Lt(this,lS)._++}`}}lS=new WeakMap;var vp,Dv,Yn,wp,bx;const eN=class eN{constructor(){A(this,wp);A(this,vp,h5());A(this,Dv,0);A(this,Yn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return ge(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:n,name:r,size:i,type:s}=e;return T(this,wp,bx).call(this,`${n}_${r}_${i}_${s}`,e)}async getFromUrl(e){return T(this,wp,bx).call(this,e,e)}async getFromBlob(e,n){const r=await n;return T(this,wp,bx).call(this,e,r)}async getFromId(e){u(this,Yn)||S(this,Yn,new Map);const n=u(this,Yn).get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:r}=n;return delete n.blobPromise,this.getFromBlob(n.id,r)}return this.getFromUrl(n.url)}getFromCanvas(e,n){u(this,Yn)||S(this,Yn,new Map);let r=u(this,Yn).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(n.width,n.height);return i.getContext("2d").drawImage(n,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${u(this,vp)}_${Lt(this,Dv)._++}`,refCounter:1,isSvg:!1},u(this,Yn).set(e,r),u(this,Yn).set(r.id,r),r}getSvgUrl(e){const n=u(this,Yn).get(e);return n!=null&&n.isSvg?n.svgUrl:null}deleteId(e){var i;u(this,Yn)||S(this,Yn,new Map);const n=u(this,Yn).get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:r}=n;if(!n.url&&!n.file){const s=new OffscreenCanvas(r.width,r.height);s.getContext("bitmaprenderer").transferFromImageBitmap(r),n.blobPromise=s.convertToBlob()}(i=r.close)==null||i.call(r),n.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,vp)}_`)}};vp=new WeakMap,Dv=new WeakMap,Yn=new WeakMap,wp=new WeakSet,bx=async function(e,n){u(this,Yn)||S(this,Yn,new Map);let r=u(this,Yn).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${u(this,vp)}_${Lt(this,Dv)._++}`,refCounter:0,isSvg:!1});let i;if(typeof n=="string"?(r.url=n,i=await Vw(n,"blob")):n instanceof File?i=r.file=n:n instanceof Blob&&(i=n),i.type==="image/svg+xml"){const s=eN._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,d)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,c()},o.onload=async()=>{const h=r.svgUrl=o.result;a.src=await s?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=o.onerror=d});o.readAsDataURL(i),await l}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){me(i),r=null}return u(this,Yn).set(e,r),r&&u(this,Yn).set(r.id,r),r};let H_=eN;var Gt,Jl,Mv,_t;class xhe{constructor(e=128){A(this,Gt,[]);A(this,Jl,!1);A(this,Mv);A(this,_t,-1);S(this,Mv,e)}add({cmd:e,undo:n,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),u(this,Jl))return;const l={cmd:e,undo:n,post:r,type:s};if(u(this,_t)===-1){u(this,Gt).length>0&&(u(this,Gt).length=0),S(this,_t,0),u(this,Gt).push(l);return}if(o&&u(this,Gt)[u(this,_t)].type===s){a&&(l.undo=u(this,Gt)[u(this,_t)].undo),u(this,Gt)[u(this,_t)]=l;return}const c=u(this,_t)+1;c===u(this,Mv)?u(this,Gt).splice(0,1):(S(this,_t,c),c<u(this,Gt).length&&u(this,Gt).splice(c)),u(this,Gt).push(l)}undo(){if(u(this,_t)===-1)return;S(this,Jl,!0);const{undo:e,post:n}=u(this,Gt)[u(this,_t)];e(),n==null||n(),S(this,Jl,!1),S(this,_t,u(this,_t)-1)}redo(){if(u(this,_t)<u(this,Gt).length-1){S(this,_t,u(this,_t)+1),S(this,Jl,!0);const{cmd:e,post:n}=u(this,Gt)[u(this,_t)];e(),n==null||n(),S(this,Jl,!1)}}hasSomethingToUndo(){return u(this,_t)!==-1}hasSomethingToRedo(){return u(this,_t)<u(this,Gt).length-1}cleanType(e){if(u(this,_t)!==-1){for(let n=u(this,_t);n>=0;n--)if(u(this,Gt)[n].type!==e){u(this,Gt).splice(n+1,u(this,_t)-n),S(this,_t,n);return}u(this,Gt).length=0,S(this,_t,-1)}}destroy(){S(this,Gt,null)}}Gt=new WeakMap,Jl=new WeakMap,Mv=new WeakMap,_t=new WeakMap;var cS,E5;class Gw{constructor(e){A(this,cS);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=vn.platform;for(const[r,i,s={}]of e)for(const o of r){const a=o.startsWith("mac+");n&&a?(this.callbacks.set(o.slice(4),{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1))):!n&&!a&&(this.callbacks.set(o,{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,n){if(!this.allKeys.has(n.key))return;const r=this.callbacks.get(T(this,cS,E5).call(this,n));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:o=[],checker:a=null}}=r;a&&!a(e,n)||(i.bind(e,...o,n)(),s||Ht(n))}}cS=new WeakSet,E5=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n};const uS=class uS{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return phe(e),ge(this,"_colors",e)}convert(e){const n=Ww(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[r,i]of this._colors)if(i.every((s,o)=>s===n[o]))return uS._colorsMapping.get(r);return n}getHexCode(e){const n=this._colors.get(e);return n?re.makeHexColor(...n):e}};H(uS,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let W_=uS;var bp,Jr,xp,Tt,qt,Sp,Bi,kp,$i,Qn,Zl,ec,Ep,tc,lo,Ui,cd,Ov,Lv,Ap,jv,co,nc,Cp,rc,uo,dS,ic,_p,Fv,sc,ud,Tp,oc,Bv,tn,Xe,ha,ac,lc,$v,Pp,Uv,cc,ho,fa,zv,Vv,zi,ne,xx,G_,A5,C5,Yg,_5,T5,P5,q_,R5,I5,N5,D5,or,ta,M5,O5,K_,L5,Qg,X_;const Bf=class Bf{constructor(e,n,r,i,s,o,a,l,c,d,h,f,p,m,g,v){A(this,ne);A(this,bp,new AbortController);A(this,Jr,null);A(this,xp,null);A(this,Tt,new Map);A(this,qt,new Map);A(this,Sp,null);A(this,Bi,null);A(this,kp,null);A(this,$i,new xhe);A(this,Qn,null);A(this,Zl,null);A(this,ec,null);A(this,Ep,0);A(this,tc,new Set);A(this,lo,null);A(this,Ui,null);A(this,cd,new Set);H(this,"_editorUndoBar",null);A(this,Ov,!1);A(this,Lv,!1);A(this,Ap,!1);A(this,jv,null);A(this,co,null);A(this,nc,null);A(this,Cp,null);A(this,rc,!1);A(this,uo,null);A(this,dS,new bhe);A(this,ic,!1);A(this,_p,!1);A(this,Fv,!1);A(this,sc,null);A(this,ud,null);A(this,Tp,null);A(this,oc,null);A(this,Bv,null);A(this,tn,we.NONE);A(this,Xe,new Set);A(this,ha,null);A(this,ac,null);A(this,lc,null);A(this,$v,null);A(this,Pp,null);A(this,Uv,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,cc,[0,0]);A(this,ho,null);A(this,fa,null);A(this,zv,null);A(this,Vv,null);A(this,zi,null);const y=this._signal=u(this,bp).signal;S(this,fa,e),S(this,zv,n),S(this,Vv,r),S(this,Sp,i),S(this,Qn,s),S(this,ac,o),S(this,Pp,l),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:y}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),a._on("setpreference",this.onSetPreference.bind(this),{signal:y}),a._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:y}),a._on("pagesedited",this.onPagesEdited.bind(this),{signal:y}),window.addEventListener("pointerdown",()=>{S(this,_p,!0)},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{S(this,_p,!1)},{capture:!0,signal:y}),T(this,ne,_5).call(this),T(this,ne,D5).call(this),T(this,ne,q_).call(this),S(this,Bi,l.annotationStorage),S(this,jv,l.filterFactory),S(this,lc,c),S(this,Cp,d||null),S(this,Ov,h),S(this,Lv,f),S(this,Ap,p),S(this,Bv,m||null),this.viewParameters={realScale:du.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=v!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const e=Bf.prototype,n=o=>u(o,fa).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return ge(this,"_keyboardManager",new Gw([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&u(o,fa).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&u(o,fa).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:n}]]))}destroy(){var e,n,r,i,s,o,a,l,c;(e=u(this,zi))==null||e.resolve(),S(this,zi,null),(n=u(this,bp))==null||n.abort(),S(this,bp,null),this._signal=null;for(const d of u(this,qt).values())d.destroy();u(this,qt).clear(),u(this,Tt).clear(),u(this,cd).clear(),(r=u(this,oc))==null||r.clear(),S(this,Jr,null),u(this,Xe).clear(),u(this,$i).destroy(),(i=u(this,Sp))==null||i.destroy(),(s=u(this,Qn))==null||s.destroy(),(o=u(this,ac))==null||o.destroy(),(a=u(this,uo))==null||a.hide(),S(this,uo,null),(l=u(this,Tp))==null||l.destroy(),S(this,Tp,null),S(this,xp,null),u(this,co)&&(clearTimeout(u(this,co)),S(this,co,null)),u(this,ho)&&(clearTimeout(u(this,ho)),S(this,ho,null)),(c=this._editorUndoBar)==null||c.destroy(),S(this,Pp,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Bv)}get useNewAltTextFlow(){return u(this,Lv)}get useNewAltTextWhenAddingImage(){return u(this,Ap)}get hcmFilter(){return ge(this,"hcmFilter",u(this,lc)?u(this,jv).addHCMFilter(u(this,lc).foreground,u(this,lc).background):"none")}get direction(){return ge(this,"direction",getComputedStyle(u(this,fa)).direction)}get _highlightColors(){return ge(this,"_highlightColors",u(this,Cp)?new Map(u(this,Cp).split(",").map(e=>(e=e.split("=").map(n=>n.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return ge(this,"highlightColors",null);const n=new Map,r=!!u(this,lc);for(const[i,s]of e){const o=i.endsWith("_HCM");if(r&&o){n.set(i.replace("_HCM",""),s);continue}!r&&!o&&n.set(i,s)}return ge(this,"highlightColors",n)}get highlightColorNames(){return ge(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const n=this.highlightColorNames.get(e);return this._highlightColors.get(n)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,ec,e)}setMainHighlightColorPicker(e){S(this,Tp,e)}editAltText(e,n=!1){var r;(r=u(this,Sp))==null||r.editAltText(this,e,n)}hasCommentManager(){return!!u(this,Qn)}editComment(e,n,r,i){var s;(s=u(this,Qn))==null||s.showDialog(this,e,n,r,i)}selectComment(e,n){const r=u(this,qt).get(e),i=r==null?void 0:r.getEditorByUID(n);i==null||i.toggleComment(!0,!0)}updateComment(e){var n;(n=u(this,Qn))==null||n.updateComment(e.getData())}updatePopupColor(e){var n;(n=u(this,Qn))==null||n.updatePopupColor(e)}removeComment(e){var n;(n=u(this,Qn))==null||n.removeComments([e.uid])}deleteComment(e,n){const r=()=>{e.comment=n},i=()=>{var s;(s=this._editorUndoBar)==null||s.show(r,"comment"),this.toggleComment(null),e.comment=null};this.addCommands({cmd:i,undo:r,mustExec:!0})}toggleComment(e,n,r=void 0){var i;(i=u(this,Qn))==null||i.toggleCommentPopup(e,n,r)}makeCommentColor(e,n){var r;return e&&((r=u(this,Qn))==null?void 0:r.makeCommentColor(e,n))||null}getCommentDialogElement(){var e;return((e=u(this,Qn))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(u(this,qt).has(e-1))return;const{resolve:n,promise:r}=Promise.withResolvers(),i=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",i),n())};this._eventBus.on("editorsrendered",i),await r}getSignature(e){var n;(n=u(this,ac))==null||n.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,ac)}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){switch(e){case"enableNewAltTextWhenAddingImage":S(this,Ap,n);break}}onPagesEdited({pagesMapper:e}){for(const i of u(this,Tt).values())i.updatePageIndex(e.getPrevPageNumber(i.pageIndex+1)-1);const n=u(this,qt),r=S(this,qt,new Map);for(const[i,s]of n){const o=e.getPrevPageNumber(i+1)-1;if(o===-1){s.destroy();continue}r.set(o,s),s.updatePageIndex(o)}}onPageChanging({pageNumber:e}){S(this,Ep,e-1)}focusMainContainer(){u(this,fa).focus()}findParent(e,n){for(const r of u(this,qt).values()){const{x:i,y:s,width:o,height:a}=r.div.getBoundingClientRect();if(e>=i&&e<=i+o&&n>=s&&n<=s+a)return r}return null}disableUserSelect(e=!1){u(this,zv).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,cd).add(e)}removeShouldRescale(e){u(this,cd).delete(e)}onScaleChanging({scale:e}){var n;this.commitOrRemove(),this.viewParameters.realScale=e*du.PDF_TO_CSS_UNITS;for(const r of u(this,cd))r.onScaleChanging();(n=u(this,ec))==null||n.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",n=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:a}=r,l=r.toString(),d=T(this,ne,xx).call(this,r).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;r.empty();const f=T(this,ne,G_).call(this,d),p=u(this,tn)===we.NONE,m=()=>{const g=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:a,text:l});p&&this.showAllEditors("highlight",!0,!0),n&&(g==null||g.editComment())};if(p){this.switchToMode(we.HIGHLIGHT,m);return}m()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!u(this,Bi))return null;const n=`${wv}${e}`,r=u(this,Bi).getRawValue(n);return r&&u(this,Bi).remove(n),r}addToAnnotationStorage(e){!e.isEmpty()&&u(this,Bi)&&!u(this,Bi).has(e.id)&&u(this,Bi).setValue(e.id,e)}a11yAlert(e,n=null){const r=u(this,Vv);r&&(r.setAttribute("data-l10n-id",e),n?r.setAttribute("data-l10n-args",JSON.stringify(n)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,rc)&&(S(this,rc,!1),T(this,ne,Yg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of u(this,Xe))if(n.div.contains(e)){S(this,ud,[n,e]),n._focusEventsAllowed=!1;break}}focus(){if(!u(this,ud))return;const[e,n]=u(this,ud);S(this,ud,null),n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}addEditListeners(){T(this,ne,q_).call(this),this.setEditingState(!0)}removeEditListeners(){T(this,ne,R5).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const r of u(this,Ui))if(r.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const r of u(this,Ui))if(r.isHandlingMimeForPasting(n.type)){r.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=u(this,Jr))==null||r.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of u(this,Xe)){const s=i.serialize(!0);s&&n.push(s)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const s of n.items)for(const o of u(this,Ui))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let r=n.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){me(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const l of r){const c=await i.deserialize(l);if(!c)return;s.push(c)}const o=()=>{for(const l of s)T(this,ne,K_).call(this,l);T(this,ne,X_).call(this,s)},a=()=>{for(const l of s)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(s){me(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,tn)!==we.NONE&&!this.isEditorHandlingKeyboard&&Bf._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,rc)&&(S(this,rc,!1),T(this,ne,Yg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(T(this,ne,T5).call(this),T(this,ne,I5).call(this),T(this,ne,or).call(this,{isEditing:u(this,tn)!==we.NONE,isEmpty:T(this,ne,Qg).call(this),hasSomethingToUndo:u(this,$i).hasSomethingToUndo(),hasSomethingToRedo:u(this,$i).hasSomethingToRedo(),hasSelectedEditor:!1})):(T(this,ne,P5).call(this),T(this,ne,N5).call(this),T(this,ne,or).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Ui)){S(this,Ui,e);for(const n of u(this,Ui))T(this,ne,ta).call(this,n.defaultPropertiesToUpdate)}}getId(){return u(this,dS).id}get currentLayer(){return u(this,qt).get(u(this,Ep))}getLayer(e){return u(this,qt).get(e)}get currentPageIndex(){return u(this,Ep)}addLayer(e){u(this,qt).set(e.pageIndex,e),u(this,ic)?e.enable():e.disable()}removeLayer(e){u(this,qt).delete(e.pageIndex)}async updateMode(e,n=null,r=!1,i=!1,s=!1,o=!1){var a,l,c,d,h,f;if(u(this,tn)!==e&&!(u(this,zi)&&(await u(this,zi).promise,!u(this,zi)))){if(S(this,zi,Promise.withResolvers()),(a=u(this,ec))==null||a.commitOrRemove(),u(this,tn)===we.POPUP&&((l=u(this,Qn))==null||l.hideSidebar()),(c=u(this,Qn))==null||c.destroyPopup(),S(this,tn,e),e===we.NONE){this.setEditingState(!1),T(this,ne,O5).call(this);for(const p of u(this,Tt).values())p.hideStandaloneCommentButton();(d=this._editorUndoBar)==null||d.hide(),this.toggleComment(null),u(this,zi).resolve();return}for(const p of u(this,Tt).values())p.addStandaloneCommentButton();e===we.SIGNATURE&&await((h=u(this,ac))==null?void 0:h.loadSignatures()),r&&Kn.clearPointerType(),this.setEditingState(!0),await T(this,ne,M5).call(this),this.unselectAll();for(const p of u(this,qt).values())p.updateMode(e);if(e===we.POPUP){u(this,xp)||S(this,xp,await u(this,Pp).getAnnotationsByType(new Set(u(this,Ui).map(g=>g._editorType))));const p=new Set,m=[];for(const g of u(this,Tt).values()){const{annotationElementId:v,hasComment:y,deleted:w}=g;v&&p.add(v),y&&!w&&m.push(g.getData())}for(const g of u(this,xp)){const{id:v,popupRef:y,contentsObj:w}=g;y&&(w!=null&&w.str)&&!p.has(v)&&!u(this,tc).has(v)&&m.push(g)}(f=u(this,Qn))==null||f.showSidebar(m)}if(!n){i&&this.addNewEditorFromKeyboard(),u(this,zi).resolve();return}for(const p of u(this,Tt).values())p.uid===n?(this.setSelected(p),o?p.editComment():s?p.enterInEditMode():p.focus()):p.unselect();u(this,zi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,tn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,n){if(u(this,Ui)){switch(e){case Me.CREATE:this.currentLayer.addNewEditor(n);return;case Me.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,$v)||S(this,$v,new Map)).set(e,n),this.showAllEditors("highlight",n);break}if(this.hasSelection)for(const r of u(this,Xe))r.updateParams(e,n);else for(const r of u(this,Ui))r.updateDefaultParams(e,n)}}showAllEditors(e,n,r=!1){var s;for(const o of u(this,Tt).values())o.editorType===e&&o.show(n);(((s=u(this,$v))==null?void 0:s.get(Me.HIGHLIGHT_SHOW_ALL))??!0)!==n&&T(this,ne,ta).call(this,[[Me.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(u(this,Fv)!==e){S(this,Fv,e);for(const n of u(this,qt).values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}*getEditors(e){for(const n of u(this,Tt).values())n.pageIndex===e&&(yield n)}getEditor(e){return u(this,Tt).get(e)}addEditor(e){u(this,Tt).set(e.id,e)}removeEditor(e){var n,r;e.div.contains(document.activeElement)&&(u(this,co)&&clearTimeout(u(this,co)),S(this,co,setTimeout(()=>{this.focusMainContainer(),S(this,co,null)},0))),u(this,Tt).delete(e.id),e.annotationElementId&&((n=u(this,oc))==null||n.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,tc).has(e.annotationElementId))&&((r=u(this,Bi))==null||r.remove(e.id))}addDeletedAnnotationElement(e){u(this,tc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,tc).has(e)}removeDeletedAnnotationElement(e){u(this,tc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,Jr)!==e&&(S(this,Jr,e),e&&T(this,ne,ta).call(this,e.propertiesToUpdate))}updateUI(e){u(this,ne,L5)===e&&T(this,ne,ta).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){T(this,ne,ta).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,Xe).has(e)){u(this,Xe).delete(e),e.unselect(),T(this,ne,or).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Xe).add(e),e.select(),T(this,ne,ta).call(this,e.propertiesToUpdate),T(this,ne,or).call(this,{hasSelectedEditor:!0})}setSelected(e){var n;this.updateToolbar({mode:e.mode,editId:e.uid}),(n=u(this,ec))==null||n.commitOrRemove();for(const r of u(this,Xe))r!==e&&r.unselect();u(this,Xe).clear(),u(this,Xe).add(e),e.select(),T(this,ne,ta).call(this,e.propertiesToUpdate),T(this,ne,or).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,Xe).has(e)}get firstSelectedEditor(){return u(this,Xe).values().next().value}unselect(e){e.unselect(),u(this,Xe).delete(e),T(this,ne,or).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Xe).size!==0}get isEnterHandled(){return u(this,Xe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,$i).undo(),T(this,ne,or).call(this,{hasSomethingToUndo:u(this,$i).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:T(this,ne,Qg).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,$i).redo(),T(this,ne,or).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,$i).hasSomethingToRedo(),isEmpty:T(this,ne,Qg).call(this)})}addCommands(e){u(this,$i).add(e),T(this,ne,or).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:T(this,ne,Qg).call(this)})}cleanUndoStack(e){u(this,$i).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...u(this,Xe)],r=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,n.length===1?n[0].editorType:n.length);for(const a of n)a.remove()},i=()=>{for(const o of n)T(this,ne,K_).call(this,o)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=u(this,Jr))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,Jr)||this.hasSelection}selectAll(){for(const e of u(this,Xe))e.commit();T(this,ne,X_).call(this,u(this,Tt).values())}unselectAll(){var e;if(!(u(this,Jr)&&(u(this,Jr).commitOrRemove(),u(this,tn)!==we.NONE))&&!((e=u(this,ec))!=null&&e.commitOrRemove())&&this.hasSelection){for(const n of u(this,Xe))n.unselect();u(this,Xe).clear(),T(this,ne,or).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,n,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;u(this,cc)[0]+=e,u(this,cc)[1]+=n;const[i,s]=u(this,cc),o=[...u(this,Xe)],a=1e3;u(this,ho)&&clearTimeout(u(this,ho)),S(this,ho,setTimeout(()=>{S(this,ho,null),u(this,cc)[0]=u(this,cc)[1]=0,this.addCommands({cmd:()=>{for(const l of o)u(this,Tt).has(l.id)&&(l.translateInPage(i,s),l.translationDone())},undo:()=>{for(const l of o)u(this,Tt).has(l.id)&&(l.translateInPage(-i,-s),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(e,n),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,lo,new Map);for(const e of u(this,Xe))u(this,lo).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,lo))return!1;this.disableUserSelect(!1);const e=u(this,lo);S(this,lo,null);let n=!1;for(const[{x:i,y:s,pageIndex:o},a]of e)a.newX=i,a.newY=s,a.newPageIndex=o,n||(n=i!==a.savedX||s!==a.savedY||o!==a.savedPageIndex);if(!n)return!1;const r=(i,s,o,a)=>{if(u(this,Tt).has(i.id)){const l=u(this,qt).get(a);l?i._setParentAndPosition(l,s,o):(i.pageIndex=a,i.x=s,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:o,newPageIndex:a}]of e)r(i,s,o,a)},undo:()=>{for(const[i,{savedX:s,savedY:o,savedPageIndex:a}]of e)r(i,s,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(u(this,lo))for(const r of u(this,lo).keys())r.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,Xe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,Jr)===e}getActive(){return u(this,Jr)}getMode(){return u(this,tn)}isEditingMode(){return u(this,tn)!==we.NONE}get imageManager(){return ge(this,"imageManager",new H_)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let c=0,d=n.rangeCount;c<d;c++)if(!e.contains(n.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,d,h,f)=>({x:(d-i)/o,y:1-(c+h-r)/s,width:f/o,height:h/s});break;case"180":a=(c,d,h,f)=>({x:1-(c+h-r)/s,y:1-(d+f-i)/o,width:h/s,height:f/o});break;case"270":a=(c,d,h,f)=>({x:1-(d+f-i)/o,y:(c-r)/s,width:f/o,height:h/s});break;default:a=(c,d,h,f)=>({x:(c-r)/s,y:(d-i)/o,width:h/s,height:f/o});break}const l=[];for(let c=0,d=n.rangeCount;c<d;c++){const h=n.getRangeAt(c);if(!h.collapsed)for(const{x:f,y:p,width:m,height:g}of h.getClientRects())m===0||g===0||l.push(a(f,p,m,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:n}){(u(this,kp)||S(this,kp,new Map)).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){var n;(n=u(this,kp))==null||n.delete(e)}renderAnnotationElement(e){var i;const n=(i=u(this,kp))==null?void 0:i.get(e.data.id);if(!n)return;const r=u(this,Bi).getRawValue(n);r&&(u(this,tn)===we.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,n,r){var s;const i=(s=u(this,oc))==null?void 0:s.get(e);i&&(i.setCanvas(n,r),u(this,oc).delete(e))}addMissingCanvas(e,n){(u(this,oc)||S(this,oc,new Map)).set(e,n)}};bp=new WeakMap,Jr=new WeakMap,xp=new WeakMap,Tt=new WeakMap,qt=new WeakMap,Sp=new WeakMap,Bi=new WeakMap,kp=new WeakMap,$i=new WeakMap,Qn=new WeakMap,Zl=new WeakMap,ec=new WeakMap,Ep=new WeakMap,tc=new WeakMap,lo=new WeakMap,Ui=new WeakMap,cd=new WeakMap,Ov=new WeakMap,Lv=new WeakMap,Ap=new WeakMap,jv=new WeakMap,co=new WeakMap,nc=new WeakMap,Cp=new WeakMap,rc=new WeakMap,uo=new WeakMap,dS=new WeakMap,ic=new WeakMap,_p=new WeakMap,Fv=new WeakMap,sc=new WeakMap,ud=new WeakMap,Tp=new WeakMap,oc=new WeakMap,Bv=new WeakMap,tn=new WeakMap,Xe=new WeakMap,ha=new WeakMap,ac=new WeakMap,lc=new WeakMap,$v=new WeakMap,Pp=new WeakMap,Uv=new WeakMap,cc=new WeakMap,ho=new WeakMap,fa=new WeakMap,zv=new WeakMap,Vv=new WeakMap,zi=new WeakMap,ne=new WeakSet,xx=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},G_=function(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const r of u(this,qt).values())if(r.hasTextLayer(e))return r;return null},A5=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=T(this,ne,xx).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(u(this,uo)||S(this,uo,new whe(this)),u(this,uo).show(r,i,this.direction==="ltr"))},C5=function(){var s,o,a;const e=document.getSelection();if(!e||e.isCollapsed){u(this,ha)&&((s=u(this,uo))==null||s.hide(),S(this,ha,null),T(this,ne,or).call(this,{hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===u(this,ha))return;const i=T(this,ne,xx).call(this,e).closest(".textLayer");if(!i){u(this,ha)&&((o=u(this,uo))==null||o.hide(),S(this,ha,null),T(this,ne,or).call(this,{hasSelectedText:!1}));return}if((a=u(this,uo))==null||a.hide(),S(this,ha,n),T(this,ne,or).call(this,{hasSelectedText:!0}),!(u(this,tn)!==we.HIGHLIGHT&&u(this,tn)!==we.NONE)&&(u(this,tn)===we.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,rc,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=u(this,tn)===we.HIGHLIGHT?T(this,ne,G_).call(this,i):null;if(l==null||l.toggleDrawing(),u(this,_p)){const c=new AbortController,d=this.combinedSignal(c),h=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&T(this,ne,Yg).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else l==null||l.toggleDrawing(!0),T(this,ne,Yg).call(this,"main_toolbar")}},Yg=function(e=""){u(this,tn)===we.HIGHLIGHT?this.highlightSelection(e):u(this,Ov)&&T(this,ne,A5).call(this)},_5=function(){document.addEventListener("selectionchange",T(this,ne,C5).bind(this),{signal:this._signal})},T5=function(){if(u(this,nc))return;S(this,nc,new AbortController);const e=this.combinedSignal(u(this,nc));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},P5=function(){var e;(e=u(this,nc))==null||e.abort(),S(this,nc,null)},q_=function(){if(u(this,sc))return;S(this,sc,new AbortController);const e=this.combinedSignal(u(this,sc));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},R5=function(){var e;(e=u(this,sc))==null||e.abort(),S(this,sc,null)},I5=function(){if(u(this,Zl))return;S(this,Zl,new AbortController);const e=this.combinedSignal(u(this,Zl));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},N5=function(){var e;(e=u(this,Zl))==null||e.abort(),S(this,Zl,null)},D5=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},or=function(e){Object.entries(e).some(([r,i])=>u(this,Uv)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Uv),e)}),u(this,tn)===we.HIGHLIGHT&&e.hasSelectedEditor===!1&&T(this,ne,ta).call(this,[[Me.HIGHLIGHT_FREE,!0]]))},ta=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},M5=async function(){if(!u(this,ic)){S(this,ic,!0);const e=[];for(const n of u(this,qt).values())e.push(n.enable());await Promise.all(e);for(const n of u(this,Tt).values())n.enable()}},O5=function(){if(this.unselectAll(),u(this,ic)){S(this,ic,!1);for(const e of u(this,qt).values())e.disable();for(const e of u(this,Tt).values())e.disable()}},K_=function(e){const n=u(this,qt).get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},L5=function(){let e=null;for(e of u(this,Xe));return e},Qg=function(){if(u(this,Tt).size===0)return!0;if(u(this,Tt).size===1)for(const e of u(this,Tt).values())return e.isEmpty();return!1},X_=function(e){for(const n of u(this,Xe))n.unselect();u(this,Xe).clear();for(const n of e)n.isEmpty()||(u(this,Xe).add(n),n.select());T(this,ne,or).call(this,{hasSelectedEditor:this.hasSelection})},H(Bf,"TRANSLATE_SMALL",1),H(Bf,"TRANSLATE_BIG",10);let Dh=Bf;var bn,fo,Ts,Rp,po,Zr,Ip,mo,Pr,pa,dd,go,uc,zs,Jg,Sx;const ar=class ar{constructor(e){A(this,zs);A(this,bn,null);A(this,fo,!1);A(this,Ts,null);A(this,Rp,null);A(this,po,null);A(this,Zr,null);A(this,Ip,!1);A(this,mo,null);A(this,Pr,null);A(this,pa,null);A(this,dd,null);A(this,go,!1);S(this,Pr,e),S(this,go,e._uiManager.useNewAltTextFlow),u(ar,uc)||S(ar,uc,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ar._l10n??(ar._l10n=e)}async render(){const e=S(this,Ts,document.createElement("button"));e.className="altText",e.tabIndex="0";const n=S(this,Rp,document.createElement("span"));e.append(n),u(this,go)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(ar,uc).missing),n.setAttribute("data-l10n-id",u(ar,uc)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=u(this,Pr)._uiManager._signal;e.addEventListener("contextmenu",us,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),u(this,Pr)._uiManager.editAltText(u(this,Pr)),u(this,go)&&u(this,Pr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,zs,Jg)}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(S(this,Ip,!0),i(s))},{signal:r}),await T(this,zs,Sx).call(this),e}finish(){u(this,Ts)&&(u(this,Ts).focus({focusVisible:u(this,Ip)}),S(this,Ip,!1))}isEmpty(){return u(this,go)?u(this,bn)===null:!u(this,bn)&&!u(this,fo)}hasData(){return u(this,go)?u(this,bn)!==null||!!u(this,pa):this.isEmpty()}get guessedText(){return u(this,pa)}async setGuessedText(e){u(this,bn)===null&&(S(this,pa,e),S(this,dd,await ar._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),T(this,zs,Sx).call(this))}toggleAltTextBadge(e=!1){var n;if(!u(this,go)||u(this,bn)){(n=u(this,mo))==null||n.remove(),S(this,mo,null);return}if(!u(this,mo)){const r=S(this,mo,document.createElement("div"));r.className="noAltTextBadge",u(this,Pr).div.append(r)}u(this,mo).classList.toggle("hidden",!e)}serialize(e){let n=u(this,bn);return!e&&u(this,pa)===n&&(n=u(this,dd)),{altText:n,decorative:u(this,fo),guessedText:u(this,pa),textWithDisclaimer:u(this,dd)}}get data(){return{altText:u(this,bn),decorative:u(this,fo)}}set data({altText:e,decorative:n,guessedText:r,textWithDisclaimer:i,cancel:s=!1}){r&&(S(this,pa,r),S(this,dd,i)),!(u(this,bn)===e&&u(this,fo)===n)&&(s||(S(this,bn,e),S(this,fo,n)),T(this,zs,Sx).call(this))}toggle(e=!1){u(this,Ts)&&(!e&&u(this,Zr)&&(clearTimeout(u(this,Zr)),S(this,Zr,null)),u(this,Ts).disabled=!e)}shown(){u(this,Pr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,zs,Jg)}})}destroy(){var e,n;(e=u(this,Ts))==null||e.remove(),S(this,Ts,null),S(this,Rp,null),S(this,po,null),(n=u(this,mo))==null||n.remove(),S(this,mo,null)}};bn=new WeakMap,fo=new WeakMap,Ts=new WeakMap,Rp=new WeakMap,po=new WeakMap,Zr=new WeakMap,Ip=new WeakMap,mo=new WeakMap,Pr=new WeakMap,pa=new WeakMap,dd=new WeakMap,go=new WeakMap,uc=new WeakMap,zs=new WeakSet,Jg=function(){return u(this,bn)&&"added"||u(this,bn)===null&&this.guessedText&&"review"||"missing"},Sx=async function(){var i,s,o;const e=u(this,Ts);if(!e)return;if(u(this,go)){if(e.classList.toggle("done",!!u(this,bn)),e.setAttribute("data-l10n-id",u(ar,uc)[u(this,zs,Jg)]),(i=u(this,Rp))==null||i.setAttribute("data-l10n-id",u(ar,uc)[`${u(this,zs,Jg)}-label`]),!u(this,bn)){(s=u(this,po))==null||s.remove();return}}else{if(!u(this,bn)&&!u(this,fo)){e.classList.remove("done"),(o=u(this,po))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=u(this,po);if(!n){S(this,po,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${u(this,Pr).id}`;const a=100,l=u(this,Pr)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(u(this,Zr)),S(this,Zr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{S(this,Zr,setTimeout(()=>{S(this,Zr,null),u(this,po).classList.add("show"),u(this,Pr)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;u(this,Zr)&&(clearTimeout(u(this,Zr)),S(this,Zr,null)),(c=u(this,po))==null||c.classList.remove("show")},{signal:l})}u(this,fo)?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=u(this,bn)),n.parentNode||e.append(n);const r=u(this,Pr).getElementForAltText();r==null||r.setAttribute("aria-describedby",n.id)},A(ar,uc,null),H(ar,"_l10n",null);let Y1=ar;var Nn,Vi,hd,dt,Hv,dc,Hi,hc,fc,fd,Wv,Y_;class jb{constructor(e){A(this,Wv);A(this,Nn,null);A(this,Vi,null);A(this,hd,!1);A(this,dt,null);A(this,Hv,null);A(this,dc,null);A(this,Hi,null);A(this,hc,null);A(this,fc,!1);A(this,fd,null);S(this,dt,e)}renderForToolbar(){const e=S(this,Vi,document.createElement("button"));return e.className="comment",T(this,Wv,Y_).call(this,e,!1)}renderForStandalone(){const e=S(this,Nn,document.createElement("button"));e.className="annotationCommentButton";const n=u(this,dt).commentButtonPosition;if(n){const{style:r}=e;r.insetInlineEnd=`calc(${100*(u(this,dt)._uiManager.direction==="ltr"?1-n[0]:n[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*n[1]}% - var(--comment-button-dim))`;const i=u(this,dt).commentButtonColor;i&&(r.backgroundColor=i)}return T(this,Wv,Y_).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=u(this,Nn)??u(this,Vi))==null||e.focus()},0)}onUpdatedColor(){if(!u(this,Nn))return;const e=u(this,dt).commentButtonColor;e&&(u(this,Nn).style.backgroundColor=e),u(this,dt)._uiManager.updatePopupColor(u(this,dt))}get commentButtonWidth(){var e;return(((e=u(this,Nn))==null?void 0:e.getBoundingClientRect().width)??0)/u(this,dt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(u(this,fd))return u(this,fd);if(!u(this,Nn))return null;const{x:e,y:n,height:r}=u(this,Nn).getBoundingClientRect(),{x:i,y:s,width:o,height:a}=u(this,dt).parent.boundingClientRect;return[(e-i)/o,(n+r-s)/a]}set commentPopupPositionInLayer(e){S(this,fd,e)}hasDefaultPopupPosition(){return u(this,fd)===null}removeStandaloneCommentButton(){var e;(e=u(this,Nn))==null||e.remove(),S(this,Nn,null)}removeToolbarCommentButton(){var e;(e=u(this,Vi))==null||e.remove(),S(this,Vi,null)}setCommentButtonStates({selected:e,hasPopup:n}){u(this,Nn)&&(u(this,Nn).classList.toggle("selected",e),u(this,Nn).ariaExpanded=n)}edit(e){const n=this.commentPopupPositionInLayer;let r,i;if(n)[r,i]=n;else{[r,i]=u(this,dt).commentButtonPosition;const{width:d,height:h,x:f,y:p}=u(this,dt);r=f+r*d,i=p+i*h}const s=u(this,dt).parent.boundingClientRect,{x:o,y:a,width:l,height:c}=s;u(this,dt)._uiManager.editComment(u(this,dt),o+r*l,a+i*c,{...e,parentDimensions:s})}finish(){u(this,Vi)&&(u(this,Vi).focus({focusVisible:u(this,hd)}),S(this,hd,!1))}isDeleted(){return u(this,fc)||u(this,Hi)===""}isEmpty(){return u(this,Hi)===null}hasBeenEdited(){return this.isDeleted()||u(this,Hi)!==u(this,Hv)}serialize(){return this.data}get data(){return{text:u(this,Hi),richText:u(this,dc),date:u(this,hc),deleted:this.isDeleted()}}set data(e){if(e!==u(this,Hi)&&S(this,dc,null),e===null){S(this,Hi,""),S(this,fc,!0);return}S(this,Hi,e),S(this,hc,new Date),S(this,fc,!1)}restoreData({text:e,richText:n,date:r}){S(this,Hi,e),S(this,dc,n),S(this,hc,r),S(this,fc,!1)}setInitialText(e,n=null){S(this,Hv,e),this.data=e,S(this,hc,null),S(this,dc,n)}shown(){}destroy(){var e,n;(e=u(this,Vi))==null||e.remove(),S(this,Vi,null),(n=u(this,Nn))==null||n.remove(),S(this,Nn,null),S(this,Hi,""),S(this,dc,null),S(this,hc,null),S(this,dt,null),S(this,hd,!1),S(this,fc,!1)}}Nn=new WeakMap,Vi=new WeakMap,hd=new WeakMap,dt=new WeakMap,Hv=new WeakMap,dc=new WeakMap,Hi=new WeakMap,hc=new WeakMap,fc=new WeakMap,fd=new WeakMap,Wv=new WeakSet,Y_=function(e,n){if(!u(this,dt)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",n?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[u(this,dt)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const r=u(this,dt)._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",us,{signal:r}),n&&(e.addEventListener("focusin",s=>{u(this,dt)._focusEventsAllowed=!1,Ht(s)},{capture:!0,signal:r}),e.addEventListener("focusout",s=>{u(this,dt)._focusEventsAllowed=!0,Ht(s)},{capture:!0,signal:r})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),e===u(this,Vi)?this.edit():u(this,dt).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(S(this,hd,!0),i(s))},{signal:r}),e.addEventListener("pointerenter",()=>{u(this,dt).toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{u(this,dt).toggleComment(!1,!1)},{signal:r}),e};var Np,pd,Gv,qv,Kv,Xv,Yv,ma,md,ga,gd,ya,hu,j5,F5,B5;const tN=class tN{constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:o=null,signal:a}){A(this,hu);A(this,Np);A(this,pd,!1);A(this,Gv,null);A(this,qv);A(this,Kv);A(this,Xv);A(this,Yv);A(this,ma,null);A(this,md);A(this,ga,null);A(this,gd);A(this,ya,null);S(this,Np,e),S(this,Gv,r),S(this,qv,n),S(this,Kv,i),S(this,Xv,s),S(this,Yv,o),S(this,gd,new AbortController),S(this,md,AbortSignal.any([a,u(this,gd).signal])),e.addEventListener("touchstart",T(this,hu,j5).bind(this),{passive:!1,signal:u(this,md)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ho.pixelRatio}destroy(){var e,n;(e=u(this,gd))==null||e.abort(),S(this,gd,null),(n=u(this,ma))==null||n.abort(),S(this,ma,null)}};Np=new WeakMap,pd=new WeakMap,Gv=new WeakMap,qv=new WeakMap,Kv=new WeakMap,Xv=new WeakMap,Yv=new WeakMap,ma=new WeakMap,md=new WeakMap,ga=new WeakMap,gd=new WeakMap,ya=new WeakMap,hu=new WeakSet,j5=function(e){var i,s,o;if((i=u(this,qv))!=null&&i.call(this))return;if(e.touches.length===1){if(u(this,ma))return;const a=S(this,ma,new AbortController),l=AbortSignal.any([u(this,md),a.signal]),c=u(this,Np),d={capture:!0,signal:l,passive:!1},h=f=>{var p;f.pointerType==="touch"&&((p=u(this,ma))==null||p.abort(),S(this,ma,null))};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Ht(f),h(f))},d),c.addEventListener("pointerup",h,d),c.addEventListener("pointercancel",h,d);return}if(!u(this,ya)){S(this,ya,new AbortController);const a=AbortSignal.any([u(this,md),u(this,ya).signal]),l=u(this,Np),c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",T(this,hu,F5).bind(this),c);const d=T(this,hu,B5).bind(this);l.addEventListener("touchend",d,c),l.addEventListener("touchcancel",d,c),c.capture=!0,l.addEventListener("pointerdown",Ht,c),l.addEventListener("pointermove",Ht,c),l.addEventListener("pointercancel",Ht,c),l.addEventListener("pointerup",Ht,c),(s=u(this,Kv))==null||s.call(this)}if(Ht(e),e.touches.length!==2||(o=u(this,Gv))!=null&&o.call(this)){S(this,ga,null);return}let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]),S(this,ga,{touch0X:n.screenX,touch0Y:n.screenY,touch1X:r.screenX,touch1Y:r.screenY})},F5=function(e){var k;if(!u(this,ga)||e.touches.length!==2)return;Ht(e);let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]);const{screenX:i,screenY:s}=n,{screenX:o,screenY:a}=r,l=u(this,ga),{touch0X:c,touch0Y:d,touch1X:h,touch1Y:f}=l,p=h-c,m=f-d,g=o-i,v=a-s,y=Math.hypot(g,v)||1,w=Math.hypot(p,m)||1;if(!u(this,pd)&&Math.abs(w-y)<=tN.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=o,l.touch1Y=a,!u(this,pd)){S(this,pd,!0);return}const b=[(i+o)/2,(s+a)/2];(k=u(this,Xv))==null||k.call(this,b,w,y)},B5=function(e){var n;e.touches.length>=2||(u(this,ya)&&(u(this,ya).abort(),S(this,ya,null),(n=u(this,Yv))==null||n.call(this)),u(this,ga)&&(Ht(e),S(this,ga,null),S(this,pd,!1)))};let Q1=tN;var yd,Ps,kt,Ye,va,Dp,pc,Qv,Dn,vd,wa,Wi,mc,Jv,wd,ei,Zv,bd,ba,yo,Mp,Op,Gi,xd,e0,hS,de,Q_,t0,J_,kx,$5,U5,Z_,Ex,eT,z5,V5,H5,tT,W5,nT,G5,q5,K5,rT,Zg;const ve=class ve{constructor(e){A(this,de);A(this,yd,null);A(this,Ps,null);A(this,kt,null);A(this,Ye,null);A(this,va,null);A(this,Dp,!1);A(this,pc,null);A(this,Qv,"");A(this,Dn,null);A(this,vd,null);A(this,wa,null);A(this,Wi,null);A(this,mc,null);A(this,Jv,"");A(this,wd,!1);A(this,ei,null);A(this,Zv,!1);A(this,bd,!1);A(this,ba,!1);A(this,yo,null);A(this,Mp,0);A(this,Op,0);A(this,Gi,null);A(this,xd,null);H(this,"isSelected",!1);H(this,"_isCopy",!1);H(this,"_editToolbar",null);H(this,"_initialOptions",Object.create(null));H(this,"_initialData",null);H(this,"_isVisible",!0);H(this,"_uiManager",null);H(this,"_focusEventsAllowed",!0);A(this,e0,!1);A(this,hS,ve._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:n,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ve.prototype._resizeWithKeyboard,n=Dh.TRANSLATE_SMALL,r=Dh.TRANSLATE_BIG;return ge(this,"_resizerKeyboardManager",new Gw([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],ve.prototype._stopResizingWithKeyboard]]))}updatePageIndex(e){this.pageIndex=e}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ge(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new She({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(ve._l10n??(ve._l10n=e),ve._l10nResizer||(ve._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ve._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);ve._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){Ge("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,e0)}set _isDraggable(e){var n;S(this,e0,e),(n=this.div)==null||n.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,hS)}setParent(e){var n;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(T(this,de,Zg).call(this),(n=u(this,Wi))==null||n.remove(),S(this,Wi,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,wd)?S(this,wd,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const n=e.relatedTarget;n!=null&&n.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,r,i){const[s,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(n+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,n){const[r,i]=this.parentDimensions;this.setAt(e*r,n*i,this.width*r,this.height*i),this._onTranslated()}translate(e,n){T(this,de,Q_).call(this,this.parentDimensions,e,n)}translateInPage(e,n){u(this,ei)||S(this,ei,[this.x,this.y,this.width,this.height]),T(this,de,Q_).call(this,this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,n){u(this,ei)||S(this,ei,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=n/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:d}=r;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),r.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!u(this,ei)&&(u(this,ei)[0]!==this.x||u(this,ei)[1]!==this.y)}get _hasBeenResized(){return!!u(this,ei)&&(u(this,ei)[2]!==this.width||u(this,ei)[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:r}=ve,i=r/e,s=r/n;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[r,i]}=this;let{x:s,y:o,width:a,height:l}=this;if(a*=r,l*=i,s*=r,o*=i,this._mustFixPosition)switch(e){case 0:s=Bn(s,0,r-a),o=Bn(o,0,i-l);break;case 90:s=Bn(s,0,r-l),o=Bn(o,a,i);break;case 180:s=Bn(s,a,r),o=Bn(o,l,i);break;case 270:s=Bn(s,l,r),o=Bn(o,0,i-a);break}this.x=s/=r,this.y=o/=i;const[c,d]=this.getBaseTranslation();s+=c,o+=d,n.left=`${(100*s).toFixed(2)}%`,n.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,n){var r;return T(r=ve,t0,J_).call(r,e,n,this.parentRotation)}pageTranslationToScreen(e,n){var r;return T(r=ve,t0,J_).call(r,e,n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,r]}=this;return[n*e,r*e]}setDims(){const{div:{style:e},width:n,height:r}=this;e.width=`${(100*n).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,kt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,bd))return this._editToolbar;this._editToolbar=new z_(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[n,r]of e)await this._editToolbar.addButton(n,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,n;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(n=u(this,kt))==null||n.destroy()}addContainer(e){var r;const n=(r=this._editToolbar)==null?void 0:r.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,kt)||(Y1.initialize(ve._l10n),S(this,kt,new Y1(this)),u(this,yd)&&(u(this,kt).data=u(this,yd),S(this,yd,null))),u(this,kt)}get altTextData(){var e;return(e=u(this,kt))==null?void 0:e.data}set altTextData(e){u(this,kt)&&(u(this,kt).data=e)}get guessedAltText(){var e;return(e=u(this,kt))==null?void 0:e.guessedText}async setGuessedAltText(e){var n;await((n=u(this,kt))==null?void 0:n.setGuessedText(e))}serializeAltText(e){var n;return(n=u(this,kt))==null?void 0:n.serialize(e)}hasAltText(){return!!u(this,kt)&&!u(this,kt).isEmpty()}hasAltTextData(){var e;return((e=u(this,kt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=u(this,Ye))==null||e.focusButton()}addCommentButton(){return this.canAddComment?u(this,Ye)||S(this,Ye,new jb(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(u(this,va)){this._uiManager.isEditingMode()&&u(this,va).classList.remove("hidden");return}this.hasComment&&(S(this,va,u(this,Ye).renderForStandalone()),this.div.append(u(this,va)))}}removeStandaloneCommentButton(){u(this,Ye).removeStandaloneCommentButton(),S(this,va,null)}hideStandaloneCommentButton(){var e;(e=u(this,va))==null||e.classList.add("hidden")}get comment(){if(!u(this,Ye))return null;const{data:{richText:e,text:n,date:r,deleted:i}}=u(this,Ye);return{text:n,richText:e,date:r,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){u(this,Ye)||S(this,Ye,new jb(this)),typeof e=="object"&&e!==null?u(this,Ye).restoreData(e):u(this,Ye).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:n,richText:r}){if(!n||(u(this,Ye)||S(this,Ye,new jb(this)),u(this,Ye).setInitialText(e,r),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=u(this,Ye))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=u(this,Ye))==null?void 0:e.isDeleted()}get hasComment(){return!!u(this,Ye)&&!u(this,Ye).isEmpty()&&!u(this,Ye).isDeleted()}async editComment(e){u(this,Ye)||S(this,Ye,new jb(this)),u(this,Ye).edit(e)}toggleComment(e,n=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,n)}setSelectedCommentButton(e){u(this,Ye).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[s]=this.pageDimensions,[o]=this.pageTranslation,a=o+s+1,l=i-100,c=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,l,c,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:n}}){u(this,Ye).data=n?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,Dp)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),T(this,de,nT).call(this);const[n,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/n).toFixed(2)}%`,e.style.maxHeight=`${(100*n/r).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),k5(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,xd)||S(this,xd,new Q1({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:T(this,de,z5).bind(this),onPinching:T(this,de,V5).bind(this),onPinchEnd:T(this,de,H5).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:n}=vn.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(S(this,wd,!0),this._isDraggable){T(this,de,W5).call(this,e);return}T(this,de,tT).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,yo)&&clearTimeout(u(this,yo)),S(this,yo,setTimeout(()=>{var e;S(this,yo,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,n,r){e.changeParent(this),this.x=n,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,r=this.rotation){const i=this.parentScale,[s,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/i,d=n/i,h=this.x*s,f=this.y*o,p=this.width*s,m=this.height*o;switch(r){case 0:return[h+c+a,o-f-d-m+l,h+c+p+a,o-f-d+l];case 90:return[h+d+a,o-f+c+l,h+d+m+a,o-f+c+p+l];case 180:return[h-c-p+a,o-f+d+l,h-c+a,o-f+d+m+l];case 270:return[h-d-m+a,o-f-c-p+l,h-d+a,o-f-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[r,i,s,o]=e,a=s-r,l=o-i;switch(this.rotation){case 0:return[r,n-o,a,l];case 90:return[r,n-i,l,a];case 180:return[s,n-i,a,l];case 270:return[s,n-o,l,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ve._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=u(this,Ye))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:n,date:r,opacity:i,deleted:s,richText:o},uid:a,pageIndex:l,creationDate:c,modificationDate:d}=this;return{id:a,pageIndex:l,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:c,modificationDate:r||d,popupRef:!s,color:n,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),S(this,bd,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),S(this,bd,!1),!0):!1}isInEditMode(){return u(this,bd)}shouldGetKeyboardEvents(){return u(this,ba)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return n<o&&i>0&&e<s&&r>0}rebuild(){T(this,de,nT).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,n=null){var r;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((r=this._initialData)==null?void 0:r.popupRef)||""}}static async deserialize(e,n,r){const i=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,S(i,yd,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,o]=i.pageDimensions,[a,l,c,d]=i.getRectInCurrentCoords(e.rect,o);return i.x=a/s,i.y=l/o,i.width=c/s,i.height=d/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,n,r;if((e=u(this,mc))==null||e.abort(),S(this,mc,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),u(this,yo)&&(clearTimeout(u(this,yo)),S(this,yo,null)),T(this,de,Zg).call(this),this.removeEditToolbar(),u(this,Gi)){for(const i of u(this,Gi).values())clearTimeout(i);S(this,Gi,null)}this.parent=null,(n=u(this,xd))==null||n.destroy(),S(this,xd,null),(r=u(this,Wi))==null||r.remove(),S(this,Wi,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(T(this,de,$5).call(this),u(this,Dn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,n]}=this,[r,i,s,o]=this.getPDFRect();return[ve._round(r+(s-r)*e),ve._round(i+(o-i)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return u(this,Ye).commentPopupPositionInLayer}set commentPopupPosition(e){u(this,Ye).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return u(this,Ye).hasDefaultPopupPosition()}get commentButtonWidth(){return u(this,Ye).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var n;(n=u(this,Ye))==null||n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),S(this,wa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const n=u(this,Dn).children;if(!u(this,Ps)){S(this,Ps,Array.from(n));const o=T(this,de,G5).bind(this),a=T(this,de,q5).bind(this),l=this._uiManager._signal;for(const c of u(this,Ps)){const d=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",T(this,de,K5).bind(this,d),{signal:l}),c.setAttribute("data-l10n-id",ve._l10nResizer[d])}}const r=u(this,Ps)[0];let i=0;for(const o of n){if(o===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(u(this,Ps).length/4);if(s!==i){if(s<i)for(let a=0;a<i-s;a++)u(this,Dn).append(u(this,Dn).firstElementChild);else if(s>i)for(let a=0;a<s-i;a++)u(this,Dn).firstElementChild.before(u(this,Dn).lastElementChild);let o=0;for(const a of n){const c=u(this,Ps)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",ve._l10nResizer[c])}}T(this,de,rT).call(this,0),S(this,ba,!0),u(this,Dn).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,n){u(this,ba)&&T(this,de,eT).call(this,u(this,Jv),{deltaX:e,deltaY:n,fromKeyboard:!0})}_stopResizingWithKeyboard(){T(this,de,Zg).call(this),this.div.focus()}select(){var e,n,r;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(n=this._editToolbar)==null||n.show(),(r=u(this,kt))==null||r.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,n,r,i,s;this.isSelected&&(this.isSelected=!1,(e=u(this,Dn))==null||e.classList.add("hidden"),(n=this.div)==null||n.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=u(this,kt))==null||s.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,Zv)}set isEditing(e){S(this,Zv,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){u(this,Gi)||S(this,Gi,new Map);const{action:r}=e;let i=u(this,Gi).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),u(this,Gi).delete(r),u(this,Gi).size===0&&S(this,Gi,null)},ve._telemetryTimeout),u(this,Gi).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),S(this,Dp,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,Dp,!0)}updateFakeAnnotationElement(e){if(!u(this,Wi)&&!this.deleted){S(this,Wi,e.addFakeAnnotation(this));return}if(this.deleted){u(this,Wi).remove(),S(this,Wi,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&u(this,Wi).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const r=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),r.before(n)}return n}resetAnnotationElement(e){const{firstElementChild:n}=e.container;(n==null?void 0:n.nodeName)==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}};yd=new WeakMap,Ps=new WeakMap,kt=new WeakMap,Ye=new WeakMap,va=new WeakMap,Dp=new WeakMap,pc=new WeakMap,Qv=new WeakMap,Dn=new WeakMap,vd=new WeakMap,wa=new WeakMap,Wi=new WeakMap,mc=new WeakMap,Jv=new WeakMap,wd=new WeakMap,ei=new WeakMap,Zv=new WeakMap,bd=new WeakMap,ba=new WeakMap,yo=new WeakMap,Mp=new WeakMap,Op=new WeakMap,Gi=new WeakMap,xd=new WeakMap,e0=new WeakMap,hS=new WeakMap,de=new WeakSet,Q_=function([e,n],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},t0=new WeakSet,J_=function(e,n,r){switch(r){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}},kx=function(e){switch(e){case 90:{const[n,r]=this.pageDimensions;return[0,-n/r,r/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,r]=this.pageDimensions;return[0,n/r,-r/n,0]}default:return[1,0,0,1]}},$5=function(){if(u(this,Dn))return;S(this,Dn,document.createElement("div")),u(this,Dn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const r of e){const i=document.createElement("div");u(this,Dn).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",T(this,de,U5).bind(this,r),{signal:n}),i.addEventListener("contextmenu",us,{signal:n}),i.tabIndex=-1}this.div.prepend(u(this,Dn))},U5=function(e,n){var d;n.preventDefault();const{isMac:r}=vn.platform;if(n.button!==0||n.ctrlKey&&r)return;(d=u(this,kt))==null||d.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,S(this,vd,[n.screenX,n.screenY]);const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",T(this,de,eT).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Ht,{passive:!1,signal:o}),window.addEventListener("contextmenu",us,{signal:o}),S(this,wa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const c=()=>{var h;s.abort(),this.parent.togglePointerEvents(!0),(h=u(this,kt))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,T(this,de,Ex).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},Z_=function(e,n,r,i){this.width=r,this.height=i,this.x=e,this.y=n,this.setDims(),this.fixAndSetPosition(),this._onResized()},Ex=function(){if(!u(this,wa))return;const{savedX:e,savedY:n,savedWidth:r,savedHeight:i}=u(this,wa);S(this,wa,null);const s=this.x,o=this.y,a=this.width,l=this.height;s===e&&o===n&&a===r&&l===i||this.addCommands({cmd:T(this,de,Z_).bind(this,s,o,a,l),undo:T(this,de,Z_).bind(this,e,n,r,i),mustExec:!0})},eT=function(e,n){const[r,i]=this.parentDimensions,s=this.x,o=this.y,a=this.width,l=this.height,c=ve.MIN_SIZE/r,d=ve.MIN_SIZE/i,h=T(this,de,kx).call(this,this.rotation),f=(F,L)=>[h[0]*F+h[2]*L,h[1]*F+h[3]*L],p=T(this,de,kx).call(this,360-this.rotation),m=(F,L)=>[p[0]*F+p[2]*L,p[1]*F+p[3]*L];let g,v,y=!1,w=!1;switch(e){case"topLeft":y=!0,g=(F,L)=>[0,0],v=(F,L)=>[F,L];break;case"topMiddle":g=(F,L)=>[F/2,0],v=(F,L)=>[F/2,L];break;case"topRight":y=!0,g=(F,L)=>[F,0],v=(F,L)=>[0,L];break;case"middleRight":w=!0,g=(F,L)=>[F,L/2],v=(F,L)=>[0,L/2];break;case"bottomRight":y=!0,g=(F,L)=>[F,L],v=(F,L)=>[0,0];break;case"bottomMiddle":g=(F,L)=>[F/2,L],v=(F,L)=>[F/2,0];break;case"bottomLeft":y=!0,g=(F,L)=>[0,L],v=(F,L)=>[F,0];break;case"middleLeft":w=!0,g=(F,L)=>[0,L/2],v=(F,L)=>[F,L/2];break}const b=g(a,l),k=v(a,l);let _=f(...k);const C=ve._round(s+_[0]),P=ve._round(o+_[1]);let R=1,M=1,I,j;if(n.fromKeyboard)({deltaX:I,deltaY:j}=n);else{const{screenX:F,screenY:L}=n,[O,z]=u(this,vd);[I,j]=this.screenToPageTranslation(F-O,L-z),u(this,vd)[0]=F,u(this,vd)[1]=L}if([I,j]=m(I/r,j/i),y){const F=Math.hypot(a,l);R=M=Math.max(Math.min(Math.hypot(k[0]-b[0]-I,k[1]-b[1]-j)/F,1/a,1/l),c/a,d/l)}else w?R=Bn(Math.abs(k[0]-b[0]-I),c,1)/a:M=Bn(Math.abs(k[1]-b[1]-j),d,1)/l;const U=ve._round(a*R),G=ve._round(l*M);_=f(...v(U,G));const B=C-_[0],V=P-_[1];u(this,ei)||S(this,ei,[this.x,this.y,this.width,this.height]),this.width=U,this.height=G,this.x=B,this.y=V,this.setDims(),this.fixAndSetPosition(),this._onResizing()},z5=function(){var e;S(this,wa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,kt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},V5=function(e,n,r){let s=.7*(r/n)+1-.7;if(s===1)return;const o=T(this,de,kx).call(this,this.rotation),a=(C,P)=>[o[0]*C+o[2]*P,o[1]*C+o[3]*P],[l,c]=this.parentDimensions,d=this.x,h=this.y,f=this.width,p=this.height,m=ve.MIN_SIZE/l,g=ve.MIN_SIZE/c;s=Math.max(Math.min(s,1/f,1/p),m/f,g/p);const v=ve._round(f*s),y=ve._round(p*s);if(v===f&&y===p)return;u(this,ei)||S(this,ei,[d,h,f,p]);const w=a(f/2,p/2),b=ve._round(d+w[0]),k=ve._round(h+w[1]),_=a(v/2,y/2);this.x=b-_[0],this.y=k-_[1],this.width=v,this.height=y,this.setDims(),this.fixAndSetPosition(),this._onResizing()},H5=function(){var e;(e=u(this,kt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),T(this,de,Ex).call(this)},tT=function(e){const{isMac:n}=vn.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)},W5=function(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:s},a=c=>{i.abort(),S(this,pc,null),S(this,wd,!1),this._uiManager.endDragSession()||T(this,de,tT).call(this,c),r&&this._onStopDragging()};n&&(S(this,Mp,e.clientX),S(this,Op,e.clientY),S(this,pc,e.pointerId),S(this,Qv,e.pointerType),window.addEventListener("pointermove",c=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=c;if(f!==u(this,pc)){Ht(c);return}const[p,m]=this.screenToPageTranslation(d-u(this,Mp),h-u(this,Op));S(this,Mp,d),S(this,Op,h),this._uiManager.dragSelectedEditors(p,m)},o),window.addEventListener("touchmove",Ht,o),window.addEventListener("pointerdown",c=>{c.pointerType===u(this,Qv)&&(u(this,xd)||c.isPrimary)&&a(c),Ht(c)},o));const l=c=>{if(!u(this,pc)||u(this,pc)===c.pointerId){a(c);return}Ht(c)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},nT=function(){if(u(this,mc)||!this.div)return;S(this,mc,new AbortController);const e=this._uiManager.combinedSignal(u(this,mc));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},G5=function(e){ve._resizerKeyboardManager.exec(this,e)},q5=function(e){var n;u(this,ba)&&((n=e.relatedTarget)==null?void 0:n.parentNode)!==u(this,Dn)&&T(this,de,Zg).call(this)},K5=function(e){S(this,Jv,u(this,ba)?e:"")},rT=function(e){if(u(this,Ps))for(const n of u(this,Ps))n.tabIndex=e},Zg=function(){S(this,ba,!1),T(this,de,rT).call(this,-1),T(this,de,Ex).call(this)},A(ve,t0),H(ve,"_l10n",null),H(ve,"_l10nResizer",null),H(ve,"_borderLineWidth",-1),H(ve,"_colorManager",new W_),H(ve,"_zIndex",1),H(ve,"_telemetryTimeout",1e3);let pt=ve;class She extends pt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const h2=3285377520,Mi=4294901760,eo=65535;class X5{constructor(e){this.h1=e?e&4294967295:h2,this.h2=e?e&4294967295:h2}update(e){let n,r;if(typeof e=="string"){n=new Uint8Array(e.length*2),r=0;for(let g=0,v=e.length;g<v;g++){const y=e.charCodeAt(g);y<=255?n[r++]=y:(n[r++]=y>>>8,n[r++]=y&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),r=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,o=new Uint32Array(n.buffer,0,i);let a=0,l=0,c=this.h1,d=this.h2;const h=3432918353,f=461845907,p=h&eo,m=f&eo;for(let g=0;g<i;g++)g&1?(a=o[g],a=a*h&Mi|a*p&eo,a=a<<15|a>>>17,a=a*f&Mi|a*m&eo,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[g],l=l*h&Mi|l*p&eo,l=l<<15|l>>>17,l=l*f&Mi|l*m&eo,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,s){case 3:a^=n[i*4+2]<<16;case 2:a^=n[i*4+1]<<8;case 1:a^=n[i*4],a=a*h&Mi|a*p&eo,a=a<<15|a>>>17,a=a*f&Mi|a*m&eo,i&1?c^=a:d^=a}this.h1=c,this.h2=d}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&Mi|e*36045&eo,n=n*4283543511&Mi|((n<<16|e>>>16)*2950163797&Mi)>>>16,e^=n>>>1,e=e*444984403&Mi|e*60499&eo,n=n*3301882366&Mi|((n<<16|e>>>16)*3120437893&Mi)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const iT=Object.freeze({map:null,hash:"",transfer:void 0});var Sd,kd,xa,Mn,fS,Y5;class WI{constructor(){A(this,fS);A(this,Sd,!1);A(this,kd,null);A(this,xa,null);A(this,Mn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const r=u(this,Mn).get(e);return r===void 0?n:Object.assign(n,r)}getRawValue(e){return u(this,Mn).get(e)}remove(e){const n=u(this,Mn).get(e);if(n!==void 0&&(n instanceof pt&&u(this,xa).delete(n.annotationElementId),u(this,Mn).delete(e),u(this,Mn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of u(this,Mn).values())if(r instanceof pt)return;this.onAnnotationEditor(null)}}setValue(e,n){const r=u(this,Mn).get(e);let i=!1;if(r!==void 0)for(const[s,o]of Object.entries(n))r[s]!==o&&(i=!0,r[s]=o);else i=!0,u(this,Mn).set(e,n);i&&T(this,fS,Y5).call(this),n instanceof pt&&((u(this,xa)||S(this,xa,new Map)).set(n.annotationElementId,n),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type))}has(e){return u(this,Mn).has(e)}get size(){return u(this,Mn).size}resetModified(){u(this,Sd)&&(S(this,Sd,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Q5(this)}get serializable(){if(u(this,Mn).size===0)return iT;const e=new Map,n=new X5,r=[],i=Object.create(null);let s=!1;for(const[o,a]of u(this,Mn)){const l=a instanceof pt?a.serialize(!1,i):a;a.page&&(a.pageIndex=a.page._pageIndex,delete a.page),l&&(e.set(o,l),n.update(`${o}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:r}:iT}get editorStats(){let e=null;const n=new Map;let r=0,i=0;for(const s of u(this,Mn).values()){if(!(s instanceof pt)){s.popup&&(s.popup.deleted?i+=1:r+=1);continue}s.isCommentDeleted?i+=1:s.hasEditedComment&&(r+=1);const o=s.telemetryFinalData;if(!o)continue;const{type:a}=o;n.has(a)||n.set(a,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const l=e[a]||(e[a]=new Map);for(const[c,d]of Object.entries(o)){if(c==="type")continue;let h=l.get(c);h||(h=new Map,l.set(c,h));const f=h.get(d)??0;h.set(d,f+1)}}if((i>0||r>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:r}),!e)return null;for(const[s,o]of n)e[s]=o.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){S(this,kd,null)}updateEditor(e,n){var i;const r=(i=u(this,xa))==null?void 0:i.get(e);return r?(r.updateFromAnnotationLayer(n),!0):!1}getEditor(e){var n;return((n=u(this,xa))==null?void 0:n.get(e))||null}get modifiedIds(){if(u(this,kd))return u(this,kd);const e=[];if(u(this,xa))for(const n of u(this,xa).values())n.serialize()&&e.push(n.annotationElementId);return S(this,kd,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,Mn).entries()}}Sd=new WeakMap,kd=new WeakMap,xa=new WeakMap,Mn=new WeakMap,fS=new WeakSet,Y5=function(){u(this,Sd)||(S(this,Sd,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var n0;class Q5 extends WI{constructor(n){super();A(this,n0);const{map:r,hash:i,transfer:s}=n.serializable,o=structuredClone(r,s?{transfer:s}:null);S(this,n0,{map:o,hash:i,transfer:s})}get print(){Ge("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,n0)}get modifiedIds(){return ge(this,"modifiedIds",{ids:new Set,hash:""})}}n0=new WeakMap;var Lp;class khe{constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){A(this,Lp,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,Lp).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:n,_inspectFont:r}){if(!(!e||u(this,Lp).has(e.loadedName))){if(He(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:o}=e,a=new FontFace(i,s,o);this.addNativeFontFace(a);try{await a.load(),u(this,Lp).add(i),r==null||r(e)}catch{me(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Ge("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw me(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var n;const e=!!((n=this._document)!=null&&n.fonts);return ge(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return ge(this,"isSyncFontLoadingSupported",fr||vn.platform.isFirefox)}_queueLoadingCallback(e){function n(){for(He(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:n,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ge(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function r(k,_){return k.charCodeAt(_)<<24|k.charCodeAt(_+1)<<16|k.charCodeAt(_+2)<<8|k.charCodeAt(_+3)&255}function i(k,_,C,P){const R=k.substring(0,_),M=k.substring(_+C);return R+P+M}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function d(k,_){if(++c>30){me("Load test font never loaded."),_();return}if(l.font="30px "+k,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(d.bind(null,k,_))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,h.length,h);const m=16,g=1482184792;let v=r(f,m);for(s=0,o=h.length-3;s<o;s+=4)v=v-g+r(h,s)|0;s<h.length&&(v=v-g+r(h+"XXX",s)|0),f=i(f,m,4,ihe(v));const y=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${h}";src:${y}}`;this.insertRule(w);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const k of[e.loadedName,h]){const _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=k,b.append(_)}this._document.body.append(b),d(h,()=>{b.remove(),n.complete()})}}Lp=new WeakMap;var tt;class Ehe{constructor(e,n=null,r,i){A(this,tt);this.compiledGlyphs=Object.create(null),S(this,tt,e),this._inspectFont=n,r&&Object.assign(this,r),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var n;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(n=this._inspectFont)==null||n.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const r=this.loadedName+"_path_"+n;let i;try{i=e.get(r)}catch(o){me(`getPathGenerator - ignoring character: "${o}".`)}const s=m5(i==null?void 0:i.path);return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[n]=s}get black(){return u(this,tt).black}get bold(){return u(this,tt).bold}get disableFontFace(){return u(this,tt).disableFontFace??!1}set disableFontFace(e){ge(this,"disableFontFace",!!e)}get fontExtraProperties(){return u(this,tt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return u(this,tt).isInvalidPDFjsFont}get isType3Font(){return u(this,tt).isType3Font}get italic(){return u(this,tt).italic}get missingFile(){return u(this,tt).missingFile}get remeasure(){return u(this,tt).remeasure}get vertical(){return u(this,tt).vertical}get ascent(){return u(this,tt).ascent}get defaultWidth(){return u(this,tt).defaultWidth}get descent(){return u(this,tt).descent}get bbox(){return u(this,tt).bbox}set bbox(e){ge(this,"bbox",e)}get fontMatrix(){return u(this,tt).fontMatrix}get fallbackName(){return u(this,tt).fallbackName}get loadedName(){return u(this,tt).loadedName}get mimetype(){return u(this,tt).mimetype}get name(){return u(this,tt).name}get data(){return u(this,tt).data}clearData(){u(this,tt).clearData()}get cssFontInfo(){return u(this,tt).cssFontInfo}get systemFontInfo(){return u(this,tt).systemFontInfo}get defaultVMetrics(){return u(this,tt).defaultVMetrics}}tt=new WeakMap;var jp,Fp,r0,Bp,Ax;const $f=class $f{constructor(e){A(this,Bp);A(this,jp);A(this,Fp);A(this,r0);S(this,jp,e),S(this,Fp,new DataView(u(this,jp))),S(this,r0,new TextDecoder)}static write(e){const n=new TextEncoder,r={};let i=0;for(const c of $f.strings){const d=n.encode(e[c]);r[c]=d,i+=4+d.length}const s=new ArrayBuffer(i),o=new Uint8Array(s),a=new DataView(s);let l=0;for(const c of $f.strings){const d=r[c],h=d.length;a.setUint32(l,h),o.set(d,l+4),l+=4+h}return He(l===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return T(this,Bp,Ax).call(this,0)}get fontWeight(){return T(this,Bp,Ax).call(this,1)}get italicAngle(){return T(this,Bp,Ax).call(this,2)}};jp=new WeakMap,Fp=new WeakMap,r0=new WeakMap,Bp=new WeakSet,Ax=function(e){He(e<$f.strings.length,"Invalid string index");let n=0;for(let i=0;i<e;i++)n+=u(this,Fp).getUint32(n)+4;const r=u(this,Fp).getUint32(n);return u(this,r0).decode(new Uint8Array(u(this,jp),n+4,r))},H($f,"strings",["fontFamily","fontWeight","italicAngle"]);let J1=$f;var gc,vo,Ed,Ad,ey;const Uf=class Uf{constructor(e){A(this,Ad);A(this,gc);A(this,vo);A(this,Ed);S(this,gc,e),S(this,vo,new DataView(u(this,gc))),S(this,Ed,new TextDecoder)}static write(e){const n=new TextEncoder,r={};let i=0;for(const f of Uf.strings){const p=n.encode(e[f]);r[f]=p,i+=4+p.length}i+=4;let s,o,a=1+i;e.style&&(s=n.encode(e.style.style),o=n.encode(e.style.weight),a+=4+s.length+4+o.length);const l=new ArrayBuffer(a),c=new Uint8Array(l),d=new DataView(l);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,i=0;for(const f of Uf.strings){const p=r[f],m=p.length;i+=4+m,d.setUint32(h,m),c.set(p,h+4),h+=4+m}return d.setUint32(h-i-4,i),e.style&&(d.setUint32(h,s.length),c.set(s,h+4),h+=4+s.length,d.setUint32(h,o.length),c.set(o,h+4),h+=4+o.length),He(h<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(h)}get guessFallback(){return u(this,vo).getUint8(0)!==0}get css(){return T(this,Ad,ey).call(this,0)}get loadedName(){return T(this,Ad,ey).call(this,1)}get baseFontName(){return T(this,Ad,ey).call(this,2)}get src(){return T(this,Ad,ey).call(this,3)}get style(){let e=1;e+=4+u(this,vo).getUint32(e);const n=u(this,vo).getUint32(e),r=u(this,Ed).decode(new Uint8Array(u(this,gc),e+4,n));e+=4+n;const i=u(this,vo).getUint32(e),s=u(this,Ed).decode(new Uint8Array(u(this,gc),e+4,i));return{style:r,weight:s}}};gc=new WeakMap,vo=new WeakMap,Ed=new WeakMap,Ad=new WeakSet,ey=function(e){He(e<Uf.strings.length,"Invalid string index");let n=5;for(let i=0;i<e;i++)n+=u(this,vo).getUint32(n)+4;const r=u(this,vo).getUint32(n);return u(this,Ed).decode(new Uint8Array(u(this,gc),n+4,r))},H(Uf,"strings",["css","loadedName","baseFontName","src"]);let Z1=Uf;var $p,Up,zp,Vp,ti,wo,i0,nt,zt,bs,Cx,ty;const be=class be{constructor({data:e,extra:n}){A(this,zt);A(this,wo);A(this,i0);A(this,nt);S(this,wo,e),S(this,i0,new TextDecoder),S(this,nt,new DataView(u(this,wo))),n&&Object.assign(this,n)}get black(){return T(this,zt,bs).call(this,0)}get bold(){return T(this,zt,bs).call(this,1)}get disableFontFace(){return T(this,zt,bs).call(this,2)}get fontExtraProperties(){return T(this,zt,bs).call(this,3)}get isInvalidPDFjsFont(){return T(this,zt,bs).call(this,4)}get isType3Font(){return T(this,zt,bs).call(this,5)}get italic(){return T(this,zt,bs).call(this,6)}get missingFile(){return T(this,zt,bs).call(this,7)}get remeasure(){return T(this,zt,bs).call(this,8)}get vertical(){return T(this,zt,bs).call(this,9)}get ascent(){return T(this,zt,Cx).call(this,0)}get defaultWidth(){return T(this,zt,Cx).call(this,1)}get descent(){return T(this,zt,Cx).call(this,2)}get bbox(){let e=u(be,Up);if(u(this,nt).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<4;i++)r.push(u(this,nt).getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=u(be,zp);if(u(this,nt).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<6;i++)r.push(u(this,nt).getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=u(be,Vp);if(u(this,nt).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<3;i++)r.push(u(this,nt).getInt16(e,!0)),e+=2;return r}get fallbackName(){return T(this,zt,ty).call(this,0)}get loadedName(){return T(this,zt,ty).call(this,1)}get mimetype(){return T(this,zt,ty).call(this,2)}get name(){return T(this,zt,ty).call(this,3)}get data(){let e=u(be,ti);const n=u(this,nt).getUint32(e);e+=4+n;const r=u(this,nt).getUint32(e);e+=4+r;const i=u(this,nt).getUint32(e);e+=4+i;const s=u(this,nt).getUint32(e);if(s!==0)return new Uint8Array(u(this,wo),e+4,s)}clearData(){let e=u(be,ti);const n=u(this,nt).getUint32(e);e+=4+n;const r=u(this,nt).getUint32(e);e+=4+r;const i=u(this,nt).getUint32(e);e+=4+i;const s=u(this,nt).getUint32(e);new Uint8Array(u(this,wo),e+4,s).fill(0),u(this,nt).setUint32(e,0)}get cssFontInfo(){let e=u(be,ti);const n=u(this,nt).getUint32(e);e+=4+n;const r=u(this,nt).getUint32(e);e+=4+r;const i=u(this,nt).getUint32(e);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(u(this,wo),e+4,i)),new J1(s.buffer)}get systemFontInfo(){let e=u(be,ti);const n=u(this,nt).getUint32(e);e+=4+n;const r=u(this,nt).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(u(this,wo),e+4,r)),new Z1(i.buffer)}static write(e){const n=e.systemFontInfo?Z1.write(e.systemFontInfo):null,r=e.cssFontInfo?J1.write(e.cssFontInfo):null,i=new TextEncoder,s={};let o=0;for(const g of be.strings)s[g]=i.encode(e[g]),o+=4+s[g].length;const a=u(be,ti)+4+o+4+(n?n.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(a),c=new Uint8Array(l),d=new DataView(l);let h=0;const f=be.bools.length;let p=0,m=0;for(let g=0;g<f;g++){const v=e[be.bools[g]];p|=(v===void 0?0:v?2:1)<<m,m+=2,(m===8||g===f-1)&&(d.setUint8(h++,p),p=0,m=0)}He(h===u(be,$p),"FontInfo.write: Boolean properties offset mismatch");for(const g of be.numbers)d.setFloat64(h,e[g]),h+=8;if(He(h===u(be,Up),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const g of e.bbox)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=2*4;if(He(h===u(be,zp),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const g of e.fontMatrix)d.setFloat64(h,g,!0),h+=8}else d.setUint8(h++,0),h+=8*6;if(He(h===u(be,Vp),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const g of e.defaultVMetrics)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=3*2;He(h===u(be,ti),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(u(be,ti),0),h+=4;for(const g of be.strings){const v=s[g],y=v.length;d.setUint32(h,y),c.set(v,h+4),h+=4+y}if(d.setUint32(u(be,ti),h-u(be,ti)-4),!n)d.setUint32(h,0),h+=4;else{const g=n.byteLength;d.setUint32(h,g),He(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(n),h+4),h+=4+g}if(!r)d.setUint32(h,0),h+=4;else{const g=r.byteLength;d.setUint32(h,g),He(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(r),h+4),h+=4+g}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),c.set(e.data,h+4),h+=4+e.data.length),He(h<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(h)}};$p=new WeakMap,Up=new WeakMap,zp=new WeakMap,Vp=new WeakMap,ti=new WeakMap,wo=new WeakMap,i0=new WeakMap,nt=new WeakMap,zt=new WeakSet,bs=function(e){He(e<be.bools.length,"Invalid boolean index");const n=Math.floor(e/4),r=e*2%8,i=u(this,nt).getUint8(n)>>r&3;return i===0?void 0:i===2},Cx=function(e){return He(e<be.numbers.length,"Invalid number index"),u(this,nt).getFloat64(u(be,$p)+e*8)},ty=function(e){He(e<be.strings.length,"Invalid string index");let n=u(be,ti)+4;for(let s=0;s<e;s++)n+=u(this,nt).getUint32(n)+4;const r=u(this,nt).getUint32(n),i=new Uint8Array(r);return i.set(new Uint8Array(u(this,wo),n+4,r)),u(this,i0).decode(i)},H(be,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),H(be,"numbers",["ascent","defaultWidth","descent"]),H(be,"strings",["fallbackName","loadedName","mimetype","name"]),A(be,$p,Math.ceil(be.bools.length*2/8)),A(be,Up,u(be,$p)+be.numbers.length*8),A(be,zp,u(be,Up)+1+2*4),A(be,Vp,u(be,zp)+1+8*6),A(be,ti,u(be,Vp)+1+2*3);let sT=be;var s0,o0,a0,l0,c0,u0,d0,h0;const ut=class ut{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let n,r=null,i=[],s=[],o=[],a=[],l=null,c=null;switch(e[0]){case"RadialAxial":n=e[1]==="axial"?1:2,r=e[2],o=e[3],n===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":n=3,l=e[1],i=e[2],s=e[3],a=e[4]||[],r=e[6],c=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const d=Math.floor(i.length/2),h=Math.floor(s.length/3),f=o.length,p=a.length;let m=0;for(const _ of a)m+=1,m=Math.ceil(m/4)*4,m+=4+_.coords.length*4,m+=4+_.colors.length*4,_.verticesPerRow!==void 0&&(m+=4);const g=20+d*8+h*3+f*8+(r?16:0)+(c?3:0)+m,v=new ArrayBuffer(g),y=new DataView(v),w=new Uint8Array(v);y.setUint8(u(ut,s0),n),y.setUint8(u(ut,o0),r?1:0),y.setUint8(u(ut,a0),c?1:0),y.setUint8(u(ut,l0),l),y.setUint32(u(ut,c0),d,!0),y.setUint32(u(ut,u0),h,!0),y.setUint32(u(ut,d0),f,!0),y.setUint32(u(ut,h0),p,!0);let b=20;new Float32Array(v,b,d*2).set(i),b+=d*8,w.set(s,b),b+=h*3;for(const[_,C]of o)y.setFloat32(b,_,!0),b+=4,y.setUint32(b,parseInt(C.slice(1),16),!0),b+=4;if(r)for(const _ of r)y.setFloat32(b,_,!0),b+=4;c&&(w.set(c,b),b+=3);for(let _=0;_<a.length;_++){const C=a[_];y.setUint8(b,C.type),b+=1,b=Math.ceil(b/4)*4,y.setUint32(b,C.coords.length,!0),b+=4,new Int32Array(v,b,C.coords.length).set(C.coords),b+=C.coords.length*4,y.setUint32(b,C.colors.length,!0),b+=4,new Int32Array(v,b,C.colors.length).set(C.colors),b+=C.colors.length*4,C.verticesPerRow!==void 0&&(y.setUint32(b,C.verticesPerRow,!0),b+=4)}return v}getIR(){const e=this.view,n=this.data[u(ut,s0)],r=!!this.data[u(ut,o0)],i=!!this.data[u(ut,a0)],s=e.getUint32(u(ut,c0),!0),o=e.getUint32(u(ut,u0),!0),a=e.getUint32(u(ut,d0),!0),l=e.getUint32(u(ut,h0),!0);let c=20;const d=new Float32Array(this.buffer,c,s*2);c+=s*8;const h=new Uint8Array(this.buffer,c,o*3);c+=o*3;const f=[];for(let v=0;v<a;++v){const y=e.getFloat32(c,!0);c+=4;const w=e.getUint32(c,!0);c+=4,f.push([y,`#${w.toString(16).padStart(6,"0")}`])}let p=null;if(r){p=[];for(let v=0;v<4;++v)p.push(e.getFloat32(c,!0)),c+=4}let m=null;i&&(m=new Uint8Array(this.buffer,c,3),c+=3);const g=[];for(let v=0;v<l;++v){const y=e.getUint8(c);c+=1,c=Math.ceil(c/4)*4;const w=e.getUint32(c,!0);c+=4;const b=new Int32Array(this.buffer,c,w);c+=w*4;const k=e.getUint32(c,!0);c+=4;const _=new Int32Array(this.buffer,c,k);c+=k*4;const C={type:y,coords:b,colors:_};y===j_.LATTICE&&(C.verticesPerRow=e.getUint32(c,!0),c+=4),g.push(C)}if(n===1)return["RadialAxial","axial",p,f,Array.from(d.slice(0,2)),Array.from(d.slice(2,4)),null,null];if(n===2)return["RadialAxial","radial",p,f,[d[0],d[1]],[d[3],d[4]],d[2],d[5]];if(n===3){const v=this.data[u(ut,l0)];let y=null;if(d.length>0){let w=d[0],b=d[0],k=d[1],_=d[1];for(let C=0;C<d.length;C+=2){const P=d[C],R=d[C+1];w=w>P?P:w,k=k>R?R:k,b=b<P?P:b,_=_<R?R:_}y=[w,k,b,_]}return["Mesh",v,d,h,g,y,p,m]}throw new Error(`Unsupported pattern kind: ${n}`)}};s0=new WeakMap,o0=new WeakMap,a0=new WeakMap,l0=new WeakMap,c0=new WeakMap,u0=new WeakMap,d0=new WeakMap,h0=new WeakMap,A(ut,s0,0),A(ut,o0,1),A(ut,a0,2),A(ut,l0,3),A(ut,c0,4),A(ut,u0,8),A(ut,d0,12),A(ut,h0,16);let oT=ut;var Hp;class Ahe{constructor(e){A(this,Hp);S(this,Hp,e)}static write(e){let n,r;return vn.isFloat16ArraySupported?(r=new ArrayBuffer(e.length*2),n=new Float16Array(r)):(r=new ArrayBuffer(e.length*4),n=new Float32Array(r)),n.set(e),r}get path(){return vn.isFloat16ArraySupported?new Float16Array(u(this,Hp)):new Float32Array(u(this,Hp))}}Hp=new WeakMap;function Che(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(fr)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function _he(t){if(fr&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return kk(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t==null?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Fb(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const aT=t=>typeof t=="object"&&Number.isInteger(t==null?void 0:t.num)&&t.num>=0&&Number.isInteger(t==null?void 0:t.gen)&&t.gen>=0,The=t=>typeof t=="object"&&typeof(t==null?void 0:t.name)=="string",Phe=che.bind(null,aT,The);var Sa,pS;class Rhe{constructor(){A(this,Sa,new Map);A(this,pS,Promise.resolve())}postMessage(e,n){const r={data:structuredClone(e,n?{transfer:n}:null)};u(this,pS).then(()=>{for(const[i]of u(this,Sa))i.call(this,r)})}addEventListener(e,n,r=null){let i=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:s}=r;if(s.aborted){me("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,n);i=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}u(this,Sa).set(n,i)}removeEventListener(e,n){const r=u(this,Sa).get(n);r==null||r(),u(this,Sa).delete(n)}terminate(){for(const[,e]of u(this,Sa))e==null||e();u(this,Sa).clear()}}Sa=new WeakMap,pS=new WeakMap;const Bb={DATA:1,ERROR:2},Zt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function f2(){}function Ar(t){if(t instanceof uu||t instanceof F_||t instanceof s2||t instanceof K1||t instanceof pA)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||Ge('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new uu(t.message);case"InvalidPDFException":return new F_(t.message);case"PasswordException":return new s2(t.message,t.code);case"ResponseException":return new K1(t.message,t.status,t.missing);case"UnknownErrorException":return new pA(t.message,t.details)}return new pA(t.message,t.toString())}var Wp,as,J5,Z5,eV,_x;class ny{constructor(e,n,r){A(this,as);A(this,Wp,new AbortController);this.sourceName=e,this.targetName=n,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",T(this,as,J5).bind(this),{signal:u(this,Wp).signal})}on(e,n){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=n}send(e,n,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},r)}sendWithPromise(e,n,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:n},r)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,n,r,i){const s=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const d=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:n,desiredSize:c.desiredSize},i),d.promise},pull:c=>{const d=Promise.withResolvers();return this.streamControllers[s].pullCall=d,l.postMessage({sourceName:o,targetName:a,stream:Zt.PULL,streamId:s,desiredSize:c.desiredSize}),d.promise},cancel:c=>{He(c instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[s].cancelCall=d,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:Zt.CANCEL,streamId:s,reason:Ar(c)}),d.promise}},r)}destroy(){var e;(e=u(this,Wp))==null||e.abort(),S(this,Wp,null)}}Wp=new WeakMap,as=new WeakSet,J5=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){T(this,as,eV).call(this,e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===Bb.DATA)i.resolve(e.data);else if(e.callback===Bb.ERROR)i.reject(Ar(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(n,e.data).then(function(o){s.postMessage({sourceName:r,targetName:i,callback:Bb.DATA,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:r,targetName:i,callback:Bb.ERROR,callbackId:e.callbackId,reason:Ar(o)})});return}if(e.streamId){T(this,as,Z5).call(this,e);return}n(e.data)},Z5=function(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:Zt.ENQUEUE,streamId:n,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Zt.CLOSE,streamId:n}),delete o.streamSinks[n])},error(c){He(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Zt.ERROR,streamId:n,reason:Ar(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[n]=l,Promise.try(a,e.data,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Zt.START_COMPLETE,streamId:n,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:Zt.START_COMPLETE,streamId:n,reason:Ar(c)})})},eV=function(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this.streamControllers[n],a=this.streamSinks[n];switch(e.stream){case Zt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Ar(e.reason));break;case Zt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Ar(e.reason));break;case Zt.PULL:if(!a){s.postMessage({sourceName:r,targetName:i,stream:Zt.PULL_COMPLETE,streamId:n,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||f2).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Zt.PULL_COMPLETE,streamId:n,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:Zt.PULL_COMPLETE,streamId:n,reason:Ar(c)})});break;case Zt.ENQUEUE:if(He(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Zt.CLOSE:if(He(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),T(this,as,_x).call(this,o,n);break;case Zt.ERROR:He(o,"error should have stream controller"),o.controller.error(Ar(e.reason)),T(this,as,_x).call(this,o,n);break;case Zt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Ar(e.reason)),T(this,as,_x).call(this,o,n);break;case Zt.CANCEL:if(!a)break;const l=Ar(e.reason);Promise.try(a.onCancel||f2,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Zt.CANCEL_COMPLETE,streamId:n,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:Zt.CANCEL_COMPLETE,streamId:n,reason:Ar(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}},_x=async function(e,n){var r,i,s;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[n]};var f0;class tV{constructor({enableHWA:e=!1}){A(this,f0,!1);S(this,f0,e)}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,n);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!u(this,f0)})}}reset(e,n,r){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){Ge("Abstract method `_createCanvas` called.")}}f0=new WeakMap;class Ihe extends tV{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const r=this._document.createElement("canvas");return r.width=e,r.height=n,r}}class nV{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){Ge("Abstract method `_fetch` called.")}}class p2 extends nV{async _fetch(e){const n=await Vw(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):kk(n)}}class rV{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,r,i,s){return"none"}destroy(e=!1){}}var Cd,Gp,ka,Ea,Jn,_d,Td,ie,qn,ry,ff,Tx,pf,iV,lT,mf,iy,sy,cT,oy;class Nhe extends rV{constructor({docId:n,ownerDocument:r=globalThis.document}){super();A(this,ie);A(this,Cd);A(this,Gp);A(this,ka);A(this,Ea);A(this,Jn);A(this,_d);A(this,Td,0);S(this,Ea,n),S(this,Jn,r)}addFilter(n){if(!n)return"none";let r=u(this,ie,qn).get(n);if(r)return r;const[i,s,o]=T(this,ie,Tx).call(this,n),a=n.length===1?i:`${i}${s}${o}`;if(r=u(this,ie,qn).get(a),r)return u(this,ie,qn).set(n,r),r;const l=`g_${u(this,Ea)}_transfer_map_${Lt(this,Td)._++}`,c=T(this,ie,pf).call(this,l);u(this,ie,qn).set(n,c),u(this,ie,qn).set(a,c);const d=T(this,ie,mf).call(this,l);return T(this,ie,sy).call(this,i,s,o,d),c}addHCMFilter(n,r){var m;const i=`${n}-${r}`,s="base";let o=u(this,ie,ry).get(s);if((o==null?void 0:o.key)===i||(o?((m=o.filter)==null||m.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},u(this,ie,ry).set(s,o)),!n||!r))return o.url;const a=T(this,ie,oy).call(this,n);n=re.makeHexColor(...a);const l=T(this,ie,oy).call(this,r);if(r=re.makeHexColor(...l),u(this,ie,ff).style.color="",n==="#000000"&&r==="#ffffff"||n===r)return o.url;const c=new Array(256);for(let g=0;g<=255;g++){const v=g/255;c[g]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const d=c.join(","),h=`g_${u(this,Ea)}_hcm_filter`,f=o.filter=T(this,ie,mf).call(this,h);T(this,ie,sy).call(this,d,d,d,f),T(this,ie,lT).call(this,f);const p=(g,v)=>{const y=a[g]/255,w=l[g]/255,b=new Array(v+1);for(let k=0;k<=v;k++)b[k]=y+k/v*(w-y);return b.join(",")};return T(this,ie,sy).call(this,p(0,5),p(1,5),p(2,5),f),o.url=T(this,ie,pf).call(this,h),o.url}addAlphaFilter(n){let r=u(this,ie,qn).get(n);if(r)return r;const[i]=T(this,ie,Tx).call(this,[n]),s=`alpha_${i}`;if(r=u(this,ie,qn).get(s),r)return u(this,ie,qn).set(n,r),r;const o=`g_${u(this,Ea)}_alpha_map_${Lt(this,Td)._++}`,a=T(this,ie,pf).call(this,o);u(this,ie,qn).set(n,a),u(this,ie,qn).set(s,a);const l=T(this,ie,mf).call(this,o);return T(this,ie,cT).call(this,i,l),a}addLuminosityFilter(n){let r=u(this,ie,qn).get(n||"luminosity");if(r)return r;let i,s;if(n?([i]=T(this,ie,Tx).call(this,[n]),s=`luminosity_${i}`):s="luminosity",r=u(this,ie,qn).get(s),r)return u(this,ie,qn).set(n,r),r;const o=`g_${u(this,Ea)}_luminosity_map_${Lt(this,Td)._++}`,a=T(this,ie,pf).call(this,o);u(this,ie,qn).set(n,a),u(this,ie,qn).set(s,a);const l=T(this,ie,mf).call(this,o);return T(this,ie,iV).call(this,l),n&&T(this,ie,cT).call(this,i,l),a}addHighlightHCMFilter(n,r,i,s,o){var w;const a=`${r}-${i}-${s}-${o}`;let l=u(this,ie,ry).get(n);if((l==null?void 0:l.key)===a||(l?((w=l.filter)==null||w.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},u(this,ie,ry).set(n,l)),!r||!i))return l.url;const[c,d]=[r,i].map(T(this,ie,oy).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,m]=[s,o].map(T(this,ie,oy).bind(this));f<h&&([h,f,p,m]=[f,h,m,p]),u(this,ie,ff).style.color="";const g=(b,k,_)=>{const C=new Array(256),P=(f-h)/_,R=b/255,M=(k-b)/(255*_);let I=0;for(let j=0;j<=_;j++){const U=Math.round(h+j*P),G=R+j*M;for(let B=I;B<=U;B++)C[B]=G;I=U+1}for(let j=I;j<256;j++)C[j]=C[I-1];return C.join(",")},v=`g_${u(this,Ea)}_hcm_${n}_filter`,y=l.filter=T(this,ie,mf).call(this,v);return T(this,ie,lT).call(this,y),T(this,ie,sy).call(this,g(p[0],m[0],5),g(p[1],m[1],5),g(p[2],m[2],5),y),l.url=T(this,ie,pf).call(this,v),l.url}destroy(n=!1){var r,i,s,o;n&&((r=u(this,_d))!=null&&r.size)||((i=u(this,ka))==null||i.parentNode.parentNode.remove(),S(this,ka,null),(s=u(this,Gp))==null||s.clear(),S(this,Gp,null),(o=u(this,_d))==null||o.clear(),S(this,_d,null),S(this,Td,0))}}Cd=new WeakMap,Gp=new WeakMap,ka=new WeakMap,Ea=new WeakMap,Jn=new WeakMap,_d=new WeakMap,Td=new WeakMap,ie=new WeakSet,qn=function(){return u(this,Gp)||S(this,Gp,new Map)},ry=function(){return u(this,_d)||S(this,_d,new Map)},ff=function(){if(!u(this,ka)){const n=u(this,Jn).createElement("div"),{style:r}=n;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=u(this,Jn).createElementNS(ea,"svg");i.setAttribute("width",0),i.setAttribute("height",0),S(this,ka,u(this,Jn).createElementNS(ea,"defs")),n.append(i),i.append(u(this,ka)),u(this,Jn).body.append(n)}return u(this,ka)},Tx=function(n){if(n.length===1){const c=n[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=c[f]/255;const h=d.join(",");return[h,h,h]}const[r,i,s]=n,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=r[c]/255,a[c]=i[c]/255,l[c]=s[c]/255;return[o.join(","),a.join(","),l.join(",")]},pf=function(n){if(u(this,Cd)===void 0){S(this,Cd,"");const r=u(this,Jn).URL;r!==u(this,Jn).baseURI&&(Ek(r)?me('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,Cd,d5(r,"")))}return`url(${u(this,Cd)}#${n})`},iV=function(n){const r=u(this,Jn).createElementNS(ea,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),n.append(r)},lT=function(n){const r=u(this,Jn).createElementNS(ea,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),n.append(r)},mf=function(n){const r=u(this,Jn).createElementNS(ea,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",n),u(this,ie,ff).append(r),r},iy=function(n,r,i){const s=u(this,Jn).createElementNS(ea,r);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),n.append(s)},sy=function(n,r,i,s){const o=u(this,Jn).createElementNS(ea,"feComponentTransfer");s.append(o),T(this,ie,iy).call(this,o,"feFuncR",n),T(this,ie,iy).call(this,o,"feFuncG",r),T(this,ie,iy).call(this,o,"feFuncB",i)},cT=function(n,r){const i=u(this,Jn).createElementNS(ea,"feComponentTransfer");r.append(i),T(this,ie,iy).call(this,i,"feFuncA",n)},oy=function(n){return u(this,ie,ff).style.color=n,Ww(getComputedStyle(u(this,ie,ff)).getPropertyValue("color"))};class sV{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){Ge("Abstract method `_fetch` called.")}}class m2 extends sV{async _fetch(e){const n=await Vw(e,"arraybuffer");return new Uint8Array(n)}}class oV{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(e){Ge("Abstract method `_fetch` called.")}}class g2 extends oV{async _fetch(e){const n=await Vw(e,"arraybuffer");return new Uint8Array(n)}}fr&&me("Please use the `legacy` build in Node.js environments.");async function GI(t){const n=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(n)}class Dhe extends rV{}class Mhe extends tV{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class Ohe extends nV{async _fetch(e){return GI(e)}}class Lhe extends sV{async _fetch(e){return GI(e)}}class jhe extends oV{async _fetch(e){return GI(e)}}const nf="__forcedDependency",{floor:y2,ceil:v2}=Math;function $b(t,e,n,r,i,s){t[e*4+0]=Math.min(t[e*4+0],n),t[e*4+1]=Math.min(t[e*4+1],r),t[e*4+2]=Math.max(t[e*4+2],i),t[e*4+3]=Math.max(t[e*4+3],s)}const uT=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var qp,yc;class Fhe{constructor(e,n){A(this,qp);A(this,yc);S(this,qp,e),S(this,yc,n)}get length(){return u(this,qp).length}isEmpty(e){return u(this,qp)[e]===uT}minX(e){return u(this,yc)[e*4+0]/256}minY(e){return u(this,yc)[e*4+1]/256}maxX(e){return(u(this,yc)[e*4+2]+1)/256}maxY(e){return(u(this,yc)[e*4+3]+1)/256}}qp=new WeakMap,yc=new WeakMap;const Ub=(t,e)=>{if(!t)return;let n=t.get(e);return n||(n={dependencies:new Set,isRenderingOperation:!1},t.set(e,n)),n};var Rr,Ir,Pd,Rs,Rd,Aa,Qe,rt,Ca,Nr,p0,Kp,Id,Nd,_a,Zn,bo,m0,dT;class Bhe{constructor(e,n,r=!1){A(this,m0);A(this,Rr,{__proto__:null});A(this,Ir,{__proto__:null,transform:[],moveText:[],sameLineText:[],[nf]:[]});A(this,Pd,new Map);A(this,Rs,[]);A(this,Rd,[]);A(this,Aa,[[1,0,0,1,0,0]]);A(this,Qe,[-1/0,-1/0,1/0,1/0]);A(this,rt,new Float64Array([1/0,1/0,-1/0,-1/0]));A(this,Ca,-1);A(this,Nr,new Set);A(this,p0,new Map);A(this,Kp,new Map);A(this,Id);A(this,Nd);A(this,_a);A(this,Zn);A(this,bo);S(this,Id,e.width),S(this,Nd,e.height),T(this,m0,dT).call(this,n),r&&S(this,bo,new Map)}growOperationsCount(e){e>=u(this,Zn).length&&T(this,m0,dT).call(this,e,u(this,Zn))}save(e){return S(this,Rr,{__proto__:u(this,Rr)}),S(this,Ir,{__proto__:u(this,Ir),transform:{__proto__:u(this,Ir).transform},moveText:{__proto__:u(this,Ir).moveText},sameLineText:{__proto__:u(this,Ir).sameLineText},[nf]:{__proto__:u(this,Ir)[nf]}}),S(this,Qe,{__proto__:u(this,Qe)}),u(this,Rs).push(e),this}restore(e){var i;const n=Object.getPrototypeOf(u(this,Rr));if(n===null)return this;S(this,Rr,n),S(this,Ir,Object.getPrototypeOf(u(this,Ir))),S(this,Qe,Object.getPrototypeOf(u(this,Qe)));const r=u(this,Rs).pop();return r!==void 0&&((i=Ub(u(this,bo),e))==null||i.dependencies.add(r),u(this,Zn)[e]=u(this,Zn)[r]),this}recordOpenMarker(e){return u(this,Rs).push(e),this}getOpenMarker(){return u(this,Rs).length===0?null:u(this,Rs).at(-1)}recordCloseMarker(e){var r;const n=u(this,Rs).pop();return n!==void 0&&((r=Ub(u(this,bo),e))==null||r.dependencies.add(n),u(this,Zn)[e]=u(this,Zn)[n]),this}beginMarkedContent(e){return u(this,Rd).push(e),this}endMarkedContent(e){var r;const n=u(this,Rd).pop();return n!==void 0&&((r=Ub(u(this,bo),e))==null||r.dependencies.add(n),u(this,Zn)[e]=u(this,Zn)[n]),this}pushBaseTransform(e){return u(this,Aa).push(re.multiplyByDOMMatrix(u(this,Aa).at(-1),e.getTransform())),this}popBaseTransform(){return u(this,Aa).length>1&&u(this,Aa).pop(),this}recordSimpleData(e,n){return u(this,Rr)[e]=n,this}recordIncrementalData(e,n){return u(this,Ir)[e].push(n),this}resetIncrementalData(e,n){return u(this,Ir)[e].length=0,this}recordNamedData(e,n){return u(this,Pd).set(e,n),this}recordSimpleDataFromNamed(e,n,r){u(this,Rr)[e]=u(this,Pd).get(n)??r}recordFutureForcedDependency(e,n){return this.recordIncrementalData(nf,n),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const n of e)n in u(this,Rr)&&this.recordFutureForcedDependency(n,u(this,Rr)[n]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of u(this,Nr))this.recordFutureForcedDependency(nf,e);return this}resetBBox(e){return u(this,Ca)!==e&&(S(this,Ca,e),u(this,rt)[0]=1/0,u(this,rt)[1]=1/0,u(this,rt)[2]=-1/0,u(this,rt)[3]=-1/0),this}recordClipBox(e,n,r,i,s,o){const a=re.multiplyByDOMMatrix(u(this,Aa).at(-1),n.getTransform()),l=[1/0,1/0,-1/0,-1/0];re.axialAlignedBoundingBox([r,s,i,o],a,l);const c=re.intersect(u(this,Qe),l);return c?(u(this,Qe)[0]=c[0],u(this,Qe)[1]=c[1],u(this,Qe)[2]=c[2],u(this,Qe)[3]=c[3]):(u(this,Qe)[0]=u(this,Qe)[1]=1/0,u(this,Qe)[2]=u(this,Qe)[3]=-1/0),this}recordBBox(e,n,r,i,s,o){const a=u(this,Qe);if(a[0]===1/0)return this;const l=re.multiplyByDOMMatrix(u(this,Aa).at(-1),n.getTransform());if(a[0]===-1/0)return re.axialAlignedBoundingBox([r,s,i,o],l,u(this,rt)),this;const c=[1/0,1/0,-1/0,-1/0];return re.axialAlignedBoundingBox([r,s,i,o],l,c),u(this,rt)[0]=Math.min(u(this,rt)[0],Math.max(c[0],a[0])),u(this,rt)[1]=Math.min(u(this,rt)[1],Math.max(c[1],a[1])),u(this,rt)[2]=Math.max(u(this,rt)[2],Math.min(c[2],a[2])),u(this,rt)[3]=Math.max(u(this,rt)[3],Math.min(c[3],a[3])),this}recordCharacterBBox(e,n,r,i=1,s=0,o=0,a){const l=r.bbox;let c,d;if(l&&(c=l[2]!==l[0]&&l[3]!==l[1]&&u(this,Kp).get(r),c!==!1&&(d=[0,0,0,0],re.axialAlignedBoundingBox(l,r.fontMatrix,d),(i!==1||s!==0||o!==0)&&re.scaleMinMax([i,0,0,-i,s,o],d),c)))return this.recordBBox(e,n,d[0],d[2],d[1],d[3]);if(!a)return this.recordFullPageBBox(e);const h=a();return l&&d&&c===void 0&&(c=d[0]<=s-h.actualBoundingBoxLeft&&d[2]>=s+h.actualBoundingBoxRight&&d[1]<=o-h.actualBoundingBoxAscent&&d[3]>=o+h.actualBoundingBoxDescent,u(this,Kp).set(r,c),c)?this.recordBBox(e,n,d[0],d[2],d[1],d[3]):this.recordBBox(e,n,s-h.actualBoundingBoxLeft,s+h.actualBoundingBoxRight,o-h.actualBoundingBoxAscent,o+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return u(this,rt)[0]=Math.max(0,u(this,Qe)[0]),u(this,rt)[1]=Math.max(0,u(this,Qe)[1]),u(this,rt)[2]=Math.min(u(this,Id),u(this,Qe)[2]),u(this,rt)[3]=Math.min(u(this,Nd),u(this,Qe)[3]),this}getSimpleIndex(e){return u(this,Rr)[e]}recordDependencies(e,n){const r=u(this,Nr),i=u(this,Rr),s=u(this,Ir);for(const o of n)o in u(this,Rr)?r.add(i[o]):o in s&&s[o].forEach(r.add,r);return this}recordNamedDependency(e,n){return u(this,Pd).has(n)&&u(this,Nr).add(u(this,Pd).get(n)),this}recordOperation(e,n=!1){if(this.recordDependencies(e,[nf]),u(this,bo)){const r=Ub(u(this,bo),e),{dependencies:i}=r;u(this,Nr).forEach(i.add,i),u(this,Rs).forEach(i.add,i),u(this,Rd).forEach(i.add,i),i.delete(e),r.isRenderingOperation=!0}if(u(this,Ca)===e){const r=y2(u(this,rt)[0]*256/u(this,Id)),i=y2(u(this,rt)[1]*256/u(this,Nd)),s=v2(u(this,rt)[2]*256/u(this,Id)),o=v2(u(this,rt)[3]*256/u(this,Nd));$b(u(this,_a),e,r,i,s,o);for(const a of u(this,Nr))a!==e&&$b(u(this,_a),a,r,i,s,o);for(const a of u(this,Rs))a!==e&&$b(u(this,_a),a,r,i,s,o);for(const a of u(this,Rd))a!==e&&$b(u(this,_a),a,r,i,s,o);n||(u(this,Nr).clear(),S(this,Ca,-1))}return this}recordShowTextOperation(e,n=!1){const r=Array.from(u(this,Nr));this.recordOperation(e,n),this.recordIncrementalData("sameLineText",e);for(const i of r)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,n=!1){return u(this,Ca)===e&&(S(this,Ca,-1),u(this,Qe)[0]=Math.max(u(this,Qe)[0],u(this,rt)[0]),u(this,Qe)[1]=Math.max(u(this,Qe)[1],u(this,rt)[1]),u(this,Qe)[2]=Math.min(u(this,Qe)[2],u(this,rt)[2]),u(this,Qe)[3]=Math.min(u(this,Qe)[3],u(this,rt)[3]),n||u(this,Nr).clear()),this}_takePendingDependencies(){const e=u(this,Nr);return S(this,Nr,new Set),e}_extractOperation(e){const n=u(this,p0).get(e);return u(this,p0).delete(e),n}_pushPendingDependencies(e){for(const n of e)u(this,Nr).add(n)}take(){return u(this,Kp).clear(),new Fhe(u(this,Zn),u(this,_a))}takeDebugMetadata(){return u(this,bo)}}Rr=new WeakMap,Ir=new WeakMap,Pd=new WeakMap,Rs=new WeakMap,Rd=new WeakMap,Aa=new WeakMap,Qe=new WeakMap,rt=new WeakMap,Ca=new WeakMap,Nr=new WeakMap,p0=new WeakMap,Kp=new WeakMap,Id=new WeakMap,Nd=new WeakMap,_a=new WeakMap,Zn=new WeakMap,bo=new WeakMap,m0=new WeakSet,dT=function(e,n){const r=new ArrayBuffer(e*4);S(this,_a,new Uint8ClampedArray(r)),S(this,Zn,new Uint32Array(r)),n&&n.length>0?(u(this,Zn).set(n),u(this,Zn).fill(uT,n.length)):u(this,Zn).fill(uT)};var ot,Ft,Is,Xp,Yp;const nN=class nN{constructor(e,n,r){A(this,ot);A(this,Ft);A(this,Is);A(this,Xp,0);A(this,Yp,0);if(e instanceof nN&&u(e,Is)===!!r)return e;S(this,ot,e),S(this,Ft,n),S(this,Is,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Lt(this,Yp)._++,u(this,ot).save(u(this,Ft)),this}restore(e){return u(this,Yp)>0&&(u(this,ot).restore(u(this,Ft)),Lt(this,Yp)._--),this}recordOpenMarker(e){return Lt(this,Xp)._++,this}getOpenMarker(){return u(this,Xp)>0?u(this,Ft):u(this,ot).getOpenMarker()}recordCloseMarker(e){return Lt(this,Xp)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return u(this,ot).pushBaseTransform(e),this}popBaseTransform(){return u(this,ot).popBaseTransform(),this}recordSimpleData(e,n){return u(this,ot).recordSimpleData(e,u(this,Ft)),this}recordIncrementalData(e,n){return u(this,ot).recordIncrementalData(e,u(this,Ft)),this}resetIncrementalData(e,n){return u(this,ot).resetIncrementalData(e,u(this,Ft)),this}recordNamedData(e,n){return this}recordSimpleDataFromNamed(e,n,r){return u(this,ot).recordSimpleDataFromNamed(e,n,u(this,Ft)),this}recordFutureForcedDependency(e,n){return u(this,ot).recordFutureForcedDependency(e,u(this,Ft)),this}inheritSimpleDataAsFutureForcedDependencies(e){return u(this,ot).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return u(this,ot).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return u(this,Is)||u(this,ot).resetBBox(u(this,Ft)),this}recordClipBox(e,n,r,i,s,o){return u(this,Is)||u(this,ot).recordClipBox(u(this,Ft),n,r,i,s,o),this}recordBBox(e,n,r,i,s,o){return u(this,Is)||u(this,ot).recordBBox(u(this,Ft),n,r,i,s,o),this}recordCharacterBBox(e,n,r,i,s,o,a){return u(this,Is)||u(this,ot).recordCharacterBBox(u(this,Ft),n,r,i,s,o,a),this}recordFullPageBBox(e){return u(this,Is)||u(this,ot).recordFullPageBBox(u(this,Ft)),this}getSimpleIndex(e){return u(this,ot).getSimpleIndex(e)}recordDependencies(e,n){return u(this,ot).recordDependencies(u(this,Ft),n),this}recordNamedDependency(e,n){return u(this,ot).recordNamedDependency(u(this,Ft),n),this}recordOperation(e){return u(this,ot).recordOperation(u(this,Ft),!0),this}recordShowTextOperation(e){return u(this,ot).recordShowTextOperation(u(this,Ft),!0),this}bboxToClipBoxDropOperation(e){return u(this,Is)||u(this,ot).bboxToClipBoxDropOperation(u(this,Ft),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};ot=new WeakMap,Ft=new WeakMap,Is=new WeakMap,Xp=new WeakMap,Yp=new WeakMap;let eS=nN;const Oi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},$n={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function hT(t,e){if(!e)return;const n=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],n,r),t.clip(i)}class qI{isModifyingCurrentTransform(){return!1}getPattern(){Ge("Abstract method `getPattern` called.")}}class $he extends qI{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,n=null){let r,i=this._p0,s=this._p1;if(n&&(i=i.slice(),s=s.slice(),re.applyTransform(i,n),re.applyTransform(s,n)),this._type==="axial")r=e.createLinearGradient(i[0],i[1],s[0],s[1]);else if(this._type==="radial"){let o=this._r0,a=this._r1;if(n){const l=new Float32Array(2);re.singularValueDecompose2dScale(n,l),o*=l[0],a*=l[0]}r=e.createRadialGradient(i[0],i[1],o,s[0],s[1],a)}for(const o of this._colorStops)r.addColorStop(o[0],o[1]);return r}getPattern(e,n,r,i){let s;if(i===$n.STROKE||i===$n.FILL){if(this.isOriginBased()){let f=re.transform(r,n.baseTransform);this.matrix&&(f=re.transform(f,this.matrix));const p=.001,m=Math.hypot(f[0],f[1]),g=Math.hypot(f[2],f[3]),v=(f[0]*f[2]+f[1]*f[3])/(m*g);if(Math.abs(v)<p)if(this.isRadial()){if(Math.abs(m-g)<p)return this._createGradient(e,f)}else return this._createGradient(e,f)}const o=n.current.getClippedPathBoundingBox(i,Pt(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=n.cachedCanvases.getCanvas("pattern",a,l),d=c.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),r=re.transform(r,[1,0,0,1,o[0],o[1]]),d.transform(...n.baseTransform),this.matrix&&d.transform(...this.matrix),hT(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),s=e.createPattern(c.canvas,"no-repeat");const h=new DOMMatrix(r);s.setTransform(h)}else hT(e,this._bbox),s=this._createGradient(e);return s}}function yA(t,e,n,r,i,s,o,a){const l=e.coords,c=e.colors,d=t.data,h=t.width*4;let f;l[n+1]>l[r+1]&&(f=n,n=r,r=f,f=s,s=o,o=f),l[r+1]>l[i+1]&&(f=r,r=i,i=f,f=o,o=a,a=f),l[n+1]>l[r+1]&&(f=n,n=r,r=f,f=s,s=o,o=f);const p=(l[n]+e.offsetX)*e.scaleX,m=(l[n+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,v=(l[r+1]+e.offsetY)*e.scaleY,y=(l[i]+e.offsetX)*e.scaleX,w=(l[i+1]+e.offsetY)*e.scaleY;if(m>=w)return;const b=c[s],k=c[s+1],_=c[s+2],C=c[o],P=c[o+1],R=c[o+2],M=c[a],I=c[a+1],j=c[a+2],U=Math.round(m),G=Math.round(w);let B,V,F,L,O,z,N,Y;for(let $=U;$<=G;$++){if($<v){const ee=$<m?0:(m-$)/(m-v);B=p-(p-g)*ee,V=b-(b-C)*ee,F=k-(k-P)*ee,L=_-(_-R)*ee}else{let ee;$>w?ee=1:v===w?ee=0:ee=(v-$)/(v-w),B=g-(g-y)*ee,V=C-(C-M)*ee,F=P-(P-I)*ee,L=R-(R-j)*ee}let D;$<m?D=0:$>w?D=1:D=(m-$)/(m-w),O=p-(p-y)*D,z=b-(b-M)*D,N=k-(k-I)*D,Y=_-(_-j)*D;const K=Math.round(Math.min(B,O)),q=Math.round(Math.max(B,O));let te=h*$+K*4;for(let ee=K;ee<=q;ee++)D=(B-ee)/(B-O),D<0?D=0:D>1&&(D=1),d[te++]=V-(V-z)*D|0,d[te++]=F-(F-N)*D|0,d[te++]=L-(L-Y)*D|0,d[te++]=255}}function Uhe(t,e,n){const r=e.coords,i=e.colors;let s,o;switch(e.type){case j_.LATTICE:const a=e.verticesPerRow,l=Math.floor(r.length/a)-1,c=a-1;for(s=0;s<l;s++){let d=s*a;for(let h=0;h<c;h++,d++)yA(t,n,r[d],r[d+1],r[d+a],i[d],i[d+1],i[d+a]),yA(t,n,r[d+a+1],r[d+1],r[d+a],i[d+a+1],i[d+1],i[d+a])}break;case j_.TRIANGLES:for(s=0,o=r.length;s<o;s+=3)yA(t,n,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class zhe extends qI{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,n,r){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),p=c/h,m=d/f,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/p,scaleY:1/m},v=h+2*2,y=f+2*2,w=r.getCanvas("mesh",v,y),b=w.context,k=b.createImageData(h,f);if(n){const C=k.data;for(let P=0,R=C.length;P<R;P+=4)C[P]=n[0],C[P+1]=n[1],C[P+2]=n[2],C[P+3]=255}for(const C of this._figures)Uhe(k,C,g);return b.putImageData(k,2,2),{canvas:w.canvas,offsetX:a-2*p,offsetY:l-2*m,scaleX:p,scaleY:m}}isModifyingCurrentTransform(){return!0}getPattern(e,n,r,i){hT(e,this._bbox);const s=new Float32Array(2);if(i===$n.SHADING)re.singularValueDecompose2dScale(Pt(e),s);else if(this.matrix){re.singularValueDecompose2dScale(this.matrix,s);const[a,l]=s;re.singularValueDecompose2dScale(n.baseTransform,s),s[0]*=a,s[1]*=l}else re.singularValueDecompose2dScale(n.baseTransform,s);const o=this._createMeshCanvas(s,i===$n.SHADING?null:this._background,n.cachedCanvases);return i!==$n.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class Vhe extends qI{getPattern(){return"hotpink"}}function Hhe(t){switch(t[0]){case"RadialAxial":return new $he(t);case"Mesh":return new zhe(t);case"Dummy":return new Vhe}throw new Error(`Unknown IR type: ${t[0]}`)}const w2={COLORED:1,UNCOLORED:2},mS=class mS{constructor(e,n,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e,n){var z,N;const{bbox:r,operatorList:i,paintType:s,tilingType:o,color:a,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:d}=this;c=Math.abs(c),d=Math.abs(d),Sk("TilingType: "+o);const h=r[0],f=r[1],p=r[2],m=r[3],g=p-h,v=m-f,y=new Float32Array(2);re.singularValueDecompose2dScale(this.matrix,y);const[w,b]=y;re.singularValueDecompose2dScale(this.baseTransform,y);const k=w*y[0],_=b*y[1];let C=g,P=v,R=!1,M=!1;const I=Math.ceil(c*k),j=Math.ceil(d*_),U=Math.ceil(g*k),G=Math.ceil(v*_);I>=U?C=c:R=!0,j>=G?P=d:M=!0;const B=this.getSizeAndScale(C,this.ctx.canvas.width,k),V=this.getSizeAndScale(P,this.ctx.canvas.height,_),F=e.cachedCanvases.getCanvas("pattern",B.size,V.size),L=F.context,O=l.createCanvasGraphics(L,n);if(O.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(O,s,a),L.translate(-B.scale*h,-V.scale*f),O.transform(0,B.scale,0,0,V.scale,0,0),L.save(),(z=O.dependencyTracker)==null||z.save(),this.clipBbox(O,h,f,p,m),O.baseTransform=Pt(O.ctx),O.executeOperatorList(i),O.endDrawing(),(N=O.dependencyTracker)==null||N.restore(),L.restore(),R||M){const Y=F.canvas;R&&(C=c),M&&(P=d);const $=this.getSizeAndScale(C,this.ctx.canvas.width,k),D=this.getSizeAndScale(P,this.ctx.canvas.height,_),K=$.size,q=D.size,te=e.cachedCanvases.getCanvas("pattern-workaround",K,q),ee=te.context,je=R?Math.floor(g/c):0,Ne=M?Math.floor(v/d):0;for(let gt=0;gt<=je;gt++)for(let Wt=0;Wt<=Ne;Wt++)ee.drawImage(Y,K*gt,q*Wt,K,q,0,0,K,q);return{canvas:te.canvas,scaleX:$.scale,scaleY:D.scale,offsetX:h,offsetY:f}}return{canvas:F.canvas,scaleX:B.scale,scaleY:V.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,n,r){const i=Math.max(mS.MAX_PATTERN_SIZE,n);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,n,r,i,s){const o=i-n,a=s-r;e.ctx.rect(n,r,o,a),re.axialAlignedBoundingBox([n,r,i,s],Pt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,r){const i=e.ctx,s=e.current;switch(n){case w2.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;i.fillStyle=s.fillColor=o,i.strokeStyle=s.strokeColor=a;break;case w2.UNCOLORED:i.fillStyle=i.strokeStyle=r,s.fillColor=s.strokeColor=r;break;default:throw new nhe(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,n,r,i,s){let o=r;i!==$n.SHADING&&(o=re.transform(o,n.baseTransform),this.matrix&&(o=re.transform(o,this.matrix)));const a=this.createPatternCanvas(n,s);let l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(l),c}};H(mS,"MAX_PATTERN_SIZE",3e3);let fT=mS;function Whe({src:t,srcPos:e=0,dest:n,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=vn.isLittleEndian?4278190080:255,[l,c]=o?[s,a]:[a,s],d=r>>3,h=r&7,f=t.length;n=new Uint32Array(n.buffer);let p=0;for(let m=0;m<i;m++){for(const v=e+d;e<v;e++){const y=e<f?t[e]:255;n[p++]=y&128?c:l,n[p++]=y&64?c:l,n[p++]=y&32?c:l,n[p++]=y&16?c:l,n[p++]=y&8?c:l,n[p++]=y&4?c:l,n[p++]=y&2?c:l,n[p++]=y&1?c:l}if(h===0)continue;const g=e<f?t[e++]:255;for(let v=0;v<h;v++)n[p++]=g&1<<7-v?c:l}return{srcPos:e,destPos:p}}const b2=16,x2=100,Ghe=15,S2=10,Fr=16,vA=new DOMMatrix,wi=new Float32Array(2),Ff=new Float32Array([1/0,1/0,-1/0,-1/0]);function qhe(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},t.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},t.transform=function(n,r,i,s,o,a){e.transform(n,r,i,s,o,a),this.__originalTransform(n,r,i,s,o,a)},t.setTransform=function(n,r,i,s,o,a){e.setTransform(n,r,i,s,o,a),this.__originalSetTransform(n,r,i,s,o,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(n){e.rotate(n),this.__originalRotate(n)},t.clip=function(n){e.clip(n),this.__originalClip(n)},t.moveTo=function(n,r){e.moveTo(n,r),this.__originalMoveTo(n,r)},t.lineTo=function(n,r){e.lineTo(n,r),this.__originalLineTo(n,r)},t.bezierCurveTo=function(n,r,i,s,o,a){e.bezierCurveTo(n,r,i,s,o,a),this.__originalBezierCurveTo(n,r,i,s,o,a)},t.rect=function(n,r,i,s){e.rect(n,r,i,s),this.__originalRect(n,r,i,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Khe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,n,r)):(i=this.canvasFactory.create(n,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function zb(t,e,n,r,i,s,o,a,l,c){const[d,h,f,p,m,g]=Pt(t);if(h===0&&f===0){const w=o*d+m,b=Math.round(w),k=a*p+g,_=Math.round(k),C=(o+l)*d+m,P=Math.abs(Math.round(C)-b)||1,R=(a+c)*p+g,M=Math.abs(Math.round(R)-_)||1;return t.setTransform(Math.sign(d),0,0,Math.sign(p),b,_),t.drawImage(e,n,r,i,s,0,0,P,M),t.setTransform(d,h,f,p,m,g),[P,M]}if(d===0&&p===0){const w=a*f+m,b=Math.round(w),k=o*h+g,_=Math.round(k),C=(a+c)*f+m,P=Math.abs(Math.round(C)-b)||1,R=(o+l)*h+g,M=Math.abs(Math.round(R)-_)||1;return t.setTransform(0,Math.sign(h),Math.sign(f),0,b,_),t.drawImage(e,n,r,i,s,0,0,M,P),t.setTransform(d,h,f,p,m,g),[M,P]}t.drawImage(e,n,r,i,s,o,a,l,c);const v=Math.hypot(d,h),y=Math.hypot(f,p);return[v*l,y*c]}class k2{constructor(e,n,r){H(this,"alphaIsShape",!1);H(this,"fontSize",0);H(this,"fontSizeScale",1);H(this,"textMatrix",null);H(this,"textMatrixScale",1);H(this,"fontMatrix",L_);H(this,"leading",0);H(this,"x",0);H(this,"y",0);H(this,"lineX",0);H(this,"lineY",0);H(this,"charSpacing",0);H(this,"wordSpacing",0);H(this,"textHScale",1);H(this,"textRenderingMode",ln.FILL);H(this,"textRise",0);H(this,"fillColor","#000000");H(this,"strokeColor","#000000");H(this,"patternFill",!1);H(this,"patternStroke",!1);H(this,"fillAlpha",1);H(this,"strokeAlpha",1);H(this,"lineWidth",1);H(this,"activeSMask",null);H(this,"transferMaps","none");r==null||r(this),this.clipBox=new Float32Array([0,0,e,n]),this.minMax=Ff.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=$n.FILL,n=null){const r=this.minMax.slice();if(e===$n.STROKE){n||Ge("Stroke bounding box must include transform."),re.singularValueDecompose2dScale(n,wi);const i=wi[0]*this.lineWidth/2,s=wi[1]*this.lineWidth/2;r[0]-=i,r[1]-=s,r[2]+=i,r[3]+=s}return r}updateClipFromPath(){const e=re.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Ff,0)}getClippedPathBoundingBox(e=$n.FILL,n=null){return re.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function E2(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,r=e.width,i=n%Fr,s=(n-i)/Fr,o=i===0?s:s+1,a=t.createImageData(r,Fr);let l=0,c;const d=e.data,h=a.data;let f,p,m,g;if(e.kind===vx.GRAYSCALE_1BPP){const v=d.byteLength,y=new Uint32Array(h.buffer,0,h.byteLength>>2),w=y.length,b=r+7>>3,k=4294967295,_=vn.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<s?Fr:i,c=0,p=0;p<m;p++){const C=v-l;let P=0;const R=C>b?r:C*8-7,M=R&-8;let I=0,j=0;for(;P<M;P+=8)j=d[l++],y[c++]=j&128?k:_,y[c++]=j&64?k:_,y[c++]=j&32?k:_,y[c++]=j&16?k:_,y[c++]=j&8?k:_,y[c++]=j&4?k:_,y[c++]=j&2?k:_,y[c++]=j&1?k:_;for(;P<R;P++)I===0&&(j=d[l++],I=128),y[c++]=j&I?k:_,I>>=1}for(;c<w;)y[c++]=0;t.putImageData(a,0,f*Fr)}}else if(e.kind===vx.RGBA_32BPP){for(p=0,g=r*Fr*4,f=0;f<s;f++)h.set(d.subarray(l,l+g)),l+=g,t.putImageData(a,0,p),p+=Fr;f<o&&(g=r*i*4,h.set(d.subarray(l,l+g)),t.putImageData(a,0,p))}else if(e.kind===vx.RGB_24BPP)for(m=Fr,g=r*m,f=0;f<o;f++){for(f>=s&&(m=i,g=r*m),c=0,p=g;p--;)h[c++]=d[l++],h[c++]=d[l++],h[c++]=d[l++],h[c++]=255;t.putImageData(a,0,f*Fr)}else throw new Error(`bad image kind: ${e.kind}`)}function A2(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const n=e.height,r=e.width,i=n%Fr,s=(n-i)/Fr,o=i===0?s:s+1,a=t.createImageData(r,Fr);let l=0;const c=e.data,d=a.data;for(let h=0;h<o;h++){const f=h<s?Fr:i;({srcPos:l}=Whe({src:c,srcPos:l,dest:d,width:r,height:f,nonBlackColor:0})),t.putImageData(a,0,h*Fr)}}function Og(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)t[r]!==void 0&&(e[r]=t[r]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function Vb(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function C2(t,e){if(e)return!0;re.singularValueDecompose2dScale(t,wi);const n=Math.fround(Ho.pixelRatio*du.PDF_TO_CSS_UNITS);return wi[0]<=n&&wi[1]<=n}const Xhe=["butt","round","square"],Yhe=["miter","round","bevel"],Qhe={},_2={};var Xs,pT,mT,gT;const rN=class rN{constructor(e,n,r,i,s,{optionalContentConfig:o,markedContentStack:a=null},l,c,d){A(this,Xs);this.ctx=e,this.current=new k2(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new Khe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,n,r=null){var i;return typeof n=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,n),n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n)):r}beginDrawing({transform:e,viewport:n,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,r){const l=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Pt(this.compositeCtx))}this.ctx.save(),Vb(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Pt(this.ctx)}executeOperatorList(e,n,r,i,s){var y;const o=e.argsArray,a=e.fnArray;let l=n||0;const c=o.length;if(c===l)return l;const d=c-l>S2&&typeof r=="function",h=d?Date.now()+Ghe:0;let f=0;const p=this.commonObjs,m=this.objs;let g,v;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,r),l;if(!s||s(l))if(g=a[l],v=o[l]??null,g!==bv.dependency)v===null?this[g](l):this[g](l,...v);else for(const w of v){(y=this.dependencyTracker)==null||y.recordNamedData(w,l);const b=w.startsWith("g_")?p:m;if(!b.has(w))return b.get(w,r),l}if(l++,l===c)return l;if(d&&++f>S2){if(Date.now()>h)return r(),l;f=0}}}endDrawing(){T(this,Xs,pT).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),T(this,Xs,mT).call(this)}_scaleImage(e,n){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(n[0],n[1]),1),o=Math.max(Math.hypot(n[2],n[3]),1),a=r,l=i,c="prescale1",d,h;for(;s>2&&a>1||o>2&&l>1;){let f=a,p=l;s>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/f),o>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/p),d=this.cachedCanvases.getCanvas(c,f,p),h=d.context,h.clearRect(0,0,f,p),h.drawImage(e,0,0,a,l,0,0,f,p),e=d.canvas,a=f,l=p,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e,n){var I,j;const r=this.ctx,{width:i,height:s}=n,o=this.current.fillColor,a=this.current.patternFill,l=Pt(r);let c,d,h,f;if((n.bitmap||n.data)&&n.count>1){const U=n.bitmap||n.data.buffer;d=JSON.stringify(a?l:[l.slice(0,4),o]),c=this._cachedBitmapsMap.get(U),c||(c=new Map,this._cachedBitmapsMap.set(U,c));const G=c.get(d);if(G&&!a){const B=Math.round(Math.min(l[0],l[2])+l[4]),V=Math.round(Math.min(l[1],l[3])+l[5]);return(I=this.dependencyTracker)==null||I.recordDependencies(e,Oi.transformAndFill),{canvas:G,offsetX:B,offsetY:V}}h=G}h||(f=this.cachedCanvases.getCanvas("maskCanvas",i,s),A2(f.context,n));let p=re.transform(l,[1/i,0,0,-1/s,0,0]);p=re.transform(p,[1,0,0,1,0,-s]);const m=Ff.slice();re.axialAlignedBoundingBox([0,0,i,s],p,m);const[g,v,y,w]=m,b=Math.round(y-g)||1,k=Math.round(w-v)||1,_=this.cachedCanvases.getCanvas("fillCanvas",b,k),C=_.context,P=g,R=v;C.translate(-P,-R),C.transform(...p),h||(h=this._scaleImage(f.canvas,Zs(C)),h=h.img,c&&a&&c.set(d,h)),C.imageSmoothingEnabled=C2(Pt(C),n.interpolate),zb(C,h,0,0,h.width,h.height,0,0,i,s),C.globalCompositeOperation="source-in";const M=re.transform(Zs(C),[1,0,0,1,-P,-R]);return C.fillStyle=a?o.getPattern(r,this,M,$n.FILL,e):o,C.fillRect(0,0,i,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,_.canvas)),(j=this.dependencyTracker)==null||j.recordDependencies(e,Oi.transformAndFill),{canvas:_.canvas,offsetX:Math.round(P),offsetY:Math.round(R)}}setLineWidth(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineWidth",e),n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineCap",e),this.ctx.lineCap=Xhe[n]}setLineJoin(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineJoin",e),this.ctx.lineJoin=Yhe[n]}setMiterLimit(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("miterLimit",e),this.ctx.miterLimit=n}setDash(e,n,r){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(n),i.lineDashOffset=r)}setRenderingIntent(e,n){}setFlatness(e,n){}setGState(e,n){var r,i,s,o,a;for(const[l,c]of n)switch(l){case"LW":this.setLineWidth(e,c);break;case"LC":this.setLineCap(e,c);break;case"LJ":this.setLineJoin(e,c);break;case"ML":this.setMiterLimit(e,c);break;case"D":this.setDash(e,c[0],c[1]);break;case"RI":this.setRenderingIntent(e,c);break;case"FL":this.setFlatness(e,c);break;case"Font":this.setFont(e,c[0],c[1]);break;case"CA":(r=this.dependencyTracker)==null||r.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=c;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=c;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=c;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=c?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(c);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,n,r);this.suspendedCtx=this.ctx;const o=this.ctx=s.context;o.setTransform(this.suspendedCtx.getTransform()),Og(this.suspendedCtx,o),qhe(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Og(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,r,i){const s=i[0],o=i[1],a=i[2]-s,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(n.context,r,a,l,n.subtype,n.backdrop,n.transferMap,s,o,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,n,r,i,s,o,a,l,c,d,h){let f=e.canvas,p=l-d,m=c-h;if(o)if(p<0||m<0||p+r>f.width||m+i>f.height){const v=this.cachedCanvases.getCanvas("maskExtension",r,i),y=v.context;y.drawImage(f,-p,-m),y.globalCompositeOperation="destination-atop",y.fillStyle=o,y.fillRect(0,0,r,i),y.globalCompositeOperation="source-over",f=v.canvas,p=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(p,m,r,i),e.clip(v),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(p,m,r,i),e.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?n.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(l,c,r,i),n.clip(g),n.globalCompositeOperation="destination-in",n.drawImage(f,p,m,r,i,l,c,r,i),n.restore()}save(e){var r;this.inSMaskMode&&Og(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),(r=this.dependencyTracker)==null||r.save(e)}restore(e){var n;if((n=this.dependencyTracker)==null||n.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Og(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,n,r,i,s,o,a){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(n,r,i,s,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,r,i){let[s]=r;if(!i){s||(s=r[0]=new Path2D),this[n](e,s);return}if(this.dependencyTracker!==null){const o=n===bv.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(e,["transform"])}s instanceof Path2D||(s=r[0]=m5(s)),re.axialAlignedBoundingBox(i,Pt(this.ctx),this.current.minMax),this[n](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,n,r=!0){var o;const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const a=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,Zs(i),$n.STROKE,e),a){const l=new Path2D;l.addPath(n,i.getTransform().invertSelf().multiplySelf(a)),n=l}this.rescaleAndStroke(n,!1),i.restore()}else this.rescaleAndStroke(n,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,Oi.stroke),r&&this.consumePath(e,n,this.current.getClippedPathBoundingBox($n.STROKE,Pt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,n){this.stroke(e,n)}fill(e,n,r=!0){var c,d,h;const i=this.ctx,s=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const f=s.isModifyingCurrentTransform()?i.getTransform():null;if((c=this.dependencyTracker)==null||c.save(e),i.save(),i.fillStyle=s.getPattern(i,this,Zs(i),$n.FILL,e),f){const p=new Path2D;p.addPath(n,i.getTransform().invertSelf().multiplySelf(f)),n=p}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(n,"evenodd"),this.pendingEOFill=!1):i.fill(n)),(d=this.dependencyTracker)==null||d.recordDependencies(e,Oi.fill),a&&(i.restore(),(h=this.dependencyTracker)==null||h.restore(e)),r&&this.consumePath(e,n,l)}eoFill(e,n){this.pendingEOFill=!0,this.fill(e,n)}fillStroke(e,n){this.fill(e,n,!1),this.stroke(e,n,!1),this.consumePath(e,n)}eoFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}closeFillStroke(e,n){this.fillStroke(e,n)}closeEOFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}endPath(e,n){this.consumePath(e,n)}rawFillPath(e,n){var r;this.ctx.fill(n),(r=this.dependencyTracker)==null||r.recordDependencies(e,Oi.rawFillPath).recordOperation(e)}clip(e){var n;(n=this.dependencyTracker)==null||n.recordFutureForcedDependency("clipMode",e),this.pendingClip=Qhe}eoClip(e){var n;(n=this.dependencyTracker)==null||n.recordFutureForcedDependency("clipMode",e),this.pendingClip=_2}beginText(e){var n;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(n=this.dependencyTracker)==null||n.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const n=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;n!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(n!==void 0){const i=new Path2D,s=r.getTransform().invertSelf();for(const{transform:o,x:a,y:l,fontSize:c,path:d}of n)d&&i.addPath(d,new DOMMatrix(o).preMultiplySelf(s).translate(a,l).scale(c,-c));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("charSpacing",e),this.current.charSpacing=n}setWordSpacing(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("wordSpacing",e),this.current.wordSpacing=n}setHScale(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("hScale",e),this.current.textHScale=n/100}setLeading(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("leading",e),this.current.leading=-n}setFont(e,n,r){var h,f;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",n,e);const i=this.commonObjs.get(n),s=this.current;if(!i)throw new Error(`Can't find font for ${n}`);if(s.fontMatrix=i.fontMatrix||L_,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&me("Invalid font matrix for font "+n),r<0?(r=-r,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;const o=i.loadedName||"sans-serif",a=((f=i.systemFontInfo)==null?void 0:f.css)||`"${o}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";let d=r;r<b2?d=b2:r>x2&&(d=x2),this.current.fontSizeScale=r/d,this.ctx.font=`${c} ${l} ${d}px ${a}`}setTextRenderingMode(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=n}setTextRise(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRise",e),this.current.textRise=n}moveText(e,n,r){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,n,r){this.setLeading(e,-r),this.moveText(e,n,r)}setTextMatrix(e,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=n,r.textMatrixScale=Math.hypot(n[0],n[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var n;this.moveText(e,0,this.current.leading),(n=this.dependencyTracker)==null||n.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,n,r,i,s,o){var y,w,b,k;const a=this.ctx,l=this.current,c=l.font,d=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,f=d&ln.FILL_STROKE_MASK,p=!!(d&ln.ADD_TO_PATH_FLAG),m=l.patternFill&&!c.missingFile,g=l.patternStroke&&!c.missingFile;let v;if((c.disableFontFace||p||m||g)&&!c.missingFile&&(v=c.getPathGenerator(this.commonObjs,n)),v&&(c.disableFontFace||m||g)){a.save(),a.translate(r,i),a.scale(h,-h),(y=this.dependencyTracker)==null||y.recordCharacterBBox(e,a,c);let _;if(f===ln.FILL||f===ln.FILL_STROKE)if(s){_=a.getTransform(),a.setTransform(...s);const C=T(this,Xs,gT).call(this,v,_,s);a.fill(C)}else a.fill(v);if(f===ln.STROKE||f===ln.FILL_STROKE)if(o){_||(_=a.getTransform()),a.setTransform(...o);const{a:C,b:P,c:R,d:M}=_,I=re.inverseTransform(o),j=re.transform([C,P,R,M,0,0],I);re.singularValueDecompose2dScale(j,wi),a.lineWidth*=Math.max(wi[0],wi[1])/h,a.stroke(T(this,Xs,gT).call(this,v,_,o))}else a.lineWidth/=h,a.stroke(v);a.restore()}else(f===ln.FILL||f===ln.FILL_STROKE)&&(a.fillText(n,r,i),(w=this.dependencyTracker)==null||w.recordCharacterBBox(e,a,c,h,r,i,()=>a.measureText(n))),(f===ln.STROKE||f===ln.FILL_STROKE)&&(this.dependencyTracker&&((b=this.dependencyTracker)==null||b.recordCharacterBBox(e,a,c,h,r,i,()=>a.measureText(n)).recordDependencies(e,Oi.stroke)),a.strokeText(n,r,i));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Pt(a),x:r,y:i,fontSize:h,path:v}),(k=this.dependencyTracker)==null||k.recordCharacterBBox(e,a,c,h,r,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<n.length;i+=4)if(n[i]>0&&n[i]<255){r=!0;break}return ge(this,"isFontSubpixelAAEnabled",r)}showText(e,n){var j,U,G,B;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Oi.showText).resetBBox(e),this.current.textRenderingMode&ln.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(e,n),(j=this.dependencyTracker)==null||j.recordShowTextOperation(e);return}const s=r.fontSize;if(s===0){(U=this.dependencyTracker)==null||U.recordOperation(e);return}const o=this.ctx,a=r.fontSizeScale,l=r.charSpacing,c=r.wordSpacing,d=r.fontDirection,h=r.textHScale*d,f=n.length,p=i.vertical,m=p?1:-1,g=i.defaultVMetrics,v=s*r.fontMatrix[0],y=r.textRenderingMode===ln.FILL&&!i.disableFontFace&&!r.patternFill;o.save(),r.textMatrix&&o.transform(...r.textMatrix),o.translate(r.x,r.y+r.textRise),d>0?o.scale(h,-1):o.scale(h,1);let w,b;const k=r.textRenderingMode&ln.FILL_STROKE_MASK,_=k===ln.FILL||k===ln.FILL_STROKE,C=k===ln.STROKE||k===ln.FILL_STROKE;if(_&&r.patternFill){o.save();const V=r.fillColor.getPattern(o,this,Zs(o),$n.FILL,e);w=Pt(o),o.restore(),o.fillStyle=V}if(C&&r.patternStroke){o.save();const V=r.strokeColor.getPattern(o,this,Zs(o),$n.STROKE,e);b=Pt(o),o.restore(),o.strokeStyle=V}let P=r.lineWidth;const R=r.textMatrixScale;if(R===0||P===0?C&&(P=this.getSinglePixelWidth()):P/=R,a!==1&&(o.scale(a,a),P/=a),o.lineWidth=P,i.isInvalidPDFjsFont){const V=[];let F=0;for(const O of n)V.push(O.unicode),F+=O.width;const L=V.join("");if(o.fillText(L,0,0),this.dependencyTracker!==null){const O=o.measureText(L);this.dependencyTracker.recordBBox(e,this.ctx,-O.actualBoundingBoxLeft,O.actualBoundingBoxRight,-O.actualBoundingBoxAscent,O.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=F*v*h,o.restore(),this.compose();return}let M=0,I;for(I=0;I<f;++I){const V=n[I];if(typeof V=="number"){M+=m*V*s/1e3;continue}let F=!1;const L=(V.isSpace?c:0)+l,O=V.fontChar,z=V.accent;let N,Y,$=V.width;if(p){const q=V.vmetric||g,te=-(V.vmetric?q[1]:$*.5)*v,ee=q[2]*v;$=q?-q[0]:$,N=te/a,Y=(M+ee)/a}else N=M/a,Y=0;let D;if(i.remeasure&&$>0){D=o.measureText(O);const q=D.width*1e3/s*a;if($<q&&this.isFontSubpixelAAEnabled){const te=$/q;F=!0,o.save(),o.scale(te,1),N/=te}else $!==q&&(N+=($-q)/2e3*s/a)}if(this.contentVisible&&(V.isInFont||i.missingFile)){if(y&&!z)o.fillText(O,N,Y),(G=this.dependencyTracker)==null||G.recordCharacterBBox(e,o,D?{bbox:null}:i,s/a,N,Y,()=>D??o.measureText(O));else if(this.paintChar(e,O,N,Y,w,b),z){const q=N+s*z.offset.x/a,te=Y-s*z.offset.y/a;this.paintChar(e,z.fontChar,q,te,w,b)}}const K=p?$*v-L*d:$*v+L*d;M+=K,F&&o.restore()}p?r.y-=M:r.x+=M*h,o.restore(),this.compose(),(B=this.dependencyTracker)==null||B.recordShowTextOperation(e)}showType3Text(e,n){const r=this.ctx,i=this.current,s=i.font,o=i.fontSize,a=i.fontDirection,l=s.vertical?1:-1,c=i.charSpacing,d=i.wordSpacing,h=i.textHScale*a,f=i.fontMatrix||L_,p=n.length,m=i.textRenderingMode===ln.INVISIBLE;let g,v,y,w;if(m||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(h,a);const b=this.dependencyTracker;for(this.dependencyTracker=b?new eS(b,e):null,g=0;g<p;++g){if(v=n[g],typeof v=="number"){w=l*v*o/1e3,this.ctx.translate(w,0),i.x+=w*h;continue}const k=(v.isSpace?d:0)+c,_=s.charProcOperatorList[v.operatorListId];_?this.contentVisible&&(this.save(),r.scale(o,o),r.transform(...f),this.executeOperatorList(_),this.restore()):me(`Type3 character "${v.operatorListId}" is not available.`);const C=[v.width,0];re.applyTransform(C,f),y=C[0]*o+k,r.translate(y,0),i.x+=y*h}r.restore(),b&&(this.dependencyTracker=b)}setCharWidth(e,n,r){}setCharWidthAndBounds(e,n,r,i,s,o,a){var c;const l=new Path2D;l.rect(i,s,o-i,a-s),this.ctx.clip(l),(c=this.dependencyTracker)==null||c.recordBBox(e,this.ctx,i,o,s,a).recordClipBox(e,this.ctx,i,o,s,a),this.endPath(e)}getColorN_Pattern(e,n){let r;if(n[0]==="TilingPattern"){const i=this.baseTransform||Pt(this.ctx),s={createCanvasGraphics:(o,a)=>new rN(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new eS(this.dependencyTracker,a,!0):null)};r=new fT(n,this.ctx,s,i)}else r=this._getPattern(e,n[1],n[2]);return r}setStrokeColorN(e,...n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,n),this.current.patternStroke=!0}setFillColorN(e,...n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,n),this.current.patternFill=!0}setStrokeRGBColor(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=n,this.current.patternStroke=!1}setStrokeTransparent(e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=n,this.current.patternFill=!1}setFillTransparent(e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n,r=null){let i;return this.cachedPatterns.has(n)?i=this.cachedPatterns.get(n):(i=Hhe(this.getObject(e,n)),this.cachedPatterns.set(n,i)),r&&(i.matrix=r),i}shadingFill(e,n){var o;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,n);r.fillStyle=i.getPattern(r,this,Zs(r),$n.SHADING,e);const s=Zs(r);if(s){const{width:a,height:l}=r.canvas,c=Ff.slice();re.axialAlignedBoundingBox([0,0,a,l],s,c);const[d,h,f,p]=c;this.ctx.fillRect(d,h,f-d,p-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Oi.transform).recordDependencies(e,Oi.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Ge("Should not call beginInlineImage")}beginImageData(){Ge("Should not call beginImageData")}paintFormXObjectBegin(e,n,r){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),n&&this.transform(e,...n),this.baseTransform=Pt(this.ctx),r)){re.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[s,o,a,l]=r,c=new Path2D;c.rect(s,o,a-s,l-o),this.ctx.clip(c),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,s,a,o,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,n){var b;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;n.isolated||Sk("TODO: Support non-isolated groups."),n.knockout&&me("Knockout groups not supported.");const i=Pt(r);if(n.matrix&&r.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let s=Ff.slice();re.axialAlignedBoundingBox(n.bbox,Pt(r),s);const o=[0,0,r.canvas.width,r.canvas.height];s=re.intersect(s,o)||[0,0,0,0];const a=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-a,1),d=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let h="groupAt"+this.groupLevel;n.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,c,d),p=f.context;p.translate(-a,-l),p.transform(...i);let m=new Path2D;const[g,v,y,w]=n.bbox;if(m.rect(g,v,y-g,w-v),n.matrix){const k=new Path2D;k.addPath(m,new DOMMatrix(n.matrix)),m=k}p.clip(m),n.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:a,offsetY:l,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}),(!n.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(a,l),r.save()),Og(r,p),this.ctx=p,(b=this.dependencyTracker)==null||b.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,n){var s;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),n.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Pt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const a=Ff.slice();re.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],o,a),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,n,r,i,s,o){if(T(this,Xs,pT).call(this),Vb(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const a=r[2]-r[0],l=r[3]-r[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=a,r[3]=l,re.singularValueDecompose2dScale(Pt(this.ctx),wi);const{viewportScale:c}=this,d=Math.ceil(a*this.outputScaleX*c),h=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(n,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(wi[0],0,0,-wi[1],0,l*wi[1]),Vb(this.ctx)}else{Vb(this.ctx),this.endPath(e);const c=new Path2D;c.rect(r[0],r[1],a,l),this.ctx.clip(c)}}this.current=new k2(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),T(this,Xs,mT).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,n){var a;if(!this.contentVisible)return;const r=n.count;n=this.getObject(e,n.data,n),n.count=r;const i=this.ctx,s=this._createMaskCanvas(e,n),o=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,s.offsetX,s.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+o.width,s.offsetY,s.offsetY+o.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,r,i=0,s=0,o,a){var h,f,p;if(!this.contentVisible)return;n=this.getObject(e,n.data,n);const l=this.ctx;l.save();const c=Pt(l);l.transform(r,i,s,o,0,0);const d=this._createMaskCanvas(e,n);l.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let m=0,g=a.length;m<g;m+=2){const v=re.transform(c,[r,i,s,o,a[m],a[m+1]]);l.drawImage(d.canvas,v[4],v[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,v[4],v[4]+d.canvas.width,v[5],v[5]+d.canvas.height)}l.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(e)}paintImageMaskXObjectGroup(e,n){var o,a,l;if(!this.contentVisible)return;const r=this.ctx,i=this.current.fillColor,s=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,Oi.transformAndFill);for(const c of n){const{data:d,width:h,height:f,transform:p}=c,m=this.cachedCanvases.getCanvas("maskCanvas",h,f),g=m.context;g.save();const v=this.getObject(e,d,c);A2(g,v),g.globalCompositeOperation="source-in",g.fillStyle=s?i.getPattern(g,this,Zs(r),$n.FILL,e):i,g.fillRect(0,0,h,f),g.restore(),r.save(),r.transform(...p),r.scale(1,-1),zb(r,m.canvas,0,0,h,f,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,r,0,h,0,f),r.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,n){if(!this.contentVisible)return;const r=this.getObject(e,n);if(!r){me("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,n,r,i,s){if(!this.contentVisible)return;const o=this.getObject(e,n);if(!o){me("Dependent image isn't ready yet");return}const a=o.width,l=o.height,c=[];for(let d=0,h=s.length;d<h;d+=2)c.push({transform:[r,0,0,i,s[d],s[d+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(e,o,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(n,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e,n){var c;if(!this.contentVisible)return;const r=n.width,i=n.height,s=this.ctx;this.save(e);const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none"),s.scale(1/r,-1/i);let a;if(n.bitmap)a=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)a=n;else{const h=this.cachedCanvases.getCanvas("inlineImage",r,i).context;E2(h,n),a=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(a,Zs(s));s.imageSmoothingEnabled=C2(Pt(s),n.interpolate),(c=this.dependencyTracker)==null||c.resetBBox(e).recordBBox(e,s,0,r,-i,0).recordDependencies(e,Oi.imageXObject).recordOperation(e),zb(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,n,r){var o,a,l;if(!this.contentVisible)return;const i=this.ctx;let s;if(n.bitmap)s=n.bitmap;else{const c=n.width,d=n.height,f=this.cachedCanvases.getCanvas("inlineImage",c,d).context;E2(f,n),s=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const c of r)i.save(),i.transform(...c.transform),i.scale(1,-1),zb(i,s,c.x,c.y,c.w,c.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,i,0,1,-1,0),i.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var n;this.contentVisible&&((n=this.dependencyTracker)==null||n.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Oi.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,n){}markPointProps(e,n,r){}beginMarkedContent(e,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n,r){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var n;(n=this.dependencyTracker)==null||n.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,n,r){var o,a;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===_2?s.clip(n,"evenodd"):s.clip(n)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(a=this.dependencyTracker)==null||a.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Pt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:r,c:i,d:s}=this.ctx.getTransform();let o,a;if(r===0&&i===0){const l=Math.abs(n),c=Math.abs(s);if(l===c)if(e===0)o=a=1/l;else{const d=l*e;o=a=d<1?1/d:1}else if(e===0)o=1/l,a=1/c;else{const d=l*e,h=c*e;o=d<1?1/d:1,a=h<1?1/h:1}}else{const l=Math.abs(n*s-r*i),c=Math.hypot(n,r),d=Math.hypot(i,s);if(e===0)o=d/l,a=c/l;else{const h=e*l;o=d>h?d/h:1,a=c>h?c/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,n){const{ctx:r,current:{lineWidth:i}}=this,[s,o]=this.getScaleForStroking();if(s===o){r.lineWidth=(i||1)*s,r.stroke(e);return}const a=r.getLineDash();n&&r.save(),r.scale(s,o),vA.a=1/s,vA.d=1/o;const l=new Path2D;if(l.addPath(e,vA),a.length>0){const c=Math.max(s,o);r.setLineDash(a.map(d=>d/c)),r.lineDashOffset/=c}r.lineWidth=i||1,r.stroke(l),n&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Xs=new WeakSet,pT=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},mT=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}},gT=function(e,n,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(n)),i};let tp=rN;for(const t in bv)tp.prototype[t]!==void 0&&(tp.prototype[bv[t]]=tp.prototype[t]);var g0,y0;class Do{static get workerPort(){return u(this,g0)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");S(this,g0,e)}static get workerSrc(){return u(this,y0)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");S(this,y0,e)}}g0=new WeakMap,y0=new WeakMap,A(Do,g0,null),A(Do,y0,"");var Qp,v0;class Jhe{constructor({parsedData:e,rawData:n}){A(this,Qp);A(this,v0);S(this,Qp,e),S(this,v0,n)}getRaw(){return u(this,v0)}get(e){return u(this,Qp).get(e)??null}[Symbol.iterator](){return u(this,Qp).entries()}}Qp=new WeakMap,v0=new WeakMap;const gf=Symbol("INTERNAL");var w0,b0,x0,Jp;class Zhe{constructor(e,{name:n,intent:r,usage:i,rbGroups:s}){A(this,w0,!1);A(this,b0,!1);A(this,x0,!1);A(this,Jp,!0);S(this,w0,!!(e&yi.DISPLAY)),S(this,b0,!!(e&yi.PRINT)),this.name=n,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(u(this,x0))return u(this,Jp);if(!u(this,Jp))return!1;const{print:e,view:n}=this.usage;return u(this,w0)?(n==null?void 0:n.viewState)!=="OFF":u(this,b0)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,n,r=!1){e!==gf&&Ge("Internal method `_setVisible` called."),S(this,x0,r),S(this,Jp,n)}}w0=new WeakMap,b0=new WeakMap,x0=new WeakMap,Jp=new WeakMap;var vc,it,Zp,em,S0,yT;class efe{constructor(e,n=yi.DISPLAY){A(this,S0);A(this,vc,null);A(this,it,new Map);A(this,Zp,null);A(this,em,null);if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,S(this,em,e.order);for(const r of e.groups)u(this,it).set(r.id,new Zhe(n,r));if(e.baseState==="OFF")for(const r of u(this,it).values())r._setVisible(gf,!1);for(const r of e.on)u(this,it).get(r)._setVisible(gf,!0);for(const r of e.off)u(this,it).get(r)._setVisible(gf,!1);S(this,Zp,this.getHash())}}isVisible(e){if(u(this,it).size===0)return!0;if(!e)return Sk("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,it).has(e.id)?u(this,it).get(e.id).visible:(me(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return T(this,S0,yT).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!u(this,it).has(n))return me(`Optional content group not found: ${n}`),!0;if(u(this,it).get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!u(this,it).has(n))return me(`Optional content group not found: ${n}`),!0;if(!u(this,it).get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!u(this,it).has(n))return me(`Optional content group not found: ${n}`),!0;if(!u(this,it).get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!u(this,it).has(n))return me(`Optional content group not found: ${n}`),!0;if(u(this,it).get(n).visible)return!1}return!0}return me(`Unknown optional content policy ${e.policy}.`),!0}return me(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,r=!0){var s;const i=u(this,it).get(e);if(!i){me(`Optional content group not found: ${e}`);return}if(r&&n&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==e&&((s=u(this,it).get(a))==null||s._setVisible(gf,!1,!0));i._setVisible(gf,!!n,!0),S(this,vc,null)}setOCGState({state:e,preserveRB:n}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=u(this,it).get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,n);break;case"OFF":this.setVisibility(i,!1,n);break;case"Toggle":this.setVisibility(i,!s.visible,n);break}}S(this,vc,null)}get hasInitialVisibility(){return u(this,Zp)===null||this.getHash()===u(this,Zp)}getOrder(){return u(this,it).size?u(this,em)?u(this,em).slice():[...u(this,it).keys()]:null}getGroup(e){return u(this,it).get(e)||null}getHash(){if(u(this,vc)!==null)return u(this,vc);const e=new X5;for(const[n,r]of u(this,it))e.update(`${n}:${r.visible}`);return S(this,vc,e.hexdigest())}[Symbol.iterator](){return u(this,it).entries()}}vc=new WeakMap,it=new WeakMap,Zp=new WeakMap,em=new WeakMap,S0=new WeakSet,yT=function(e){const n=e.length;if(n<2)return!0;const r=e[0];for(let i=1;i<n;i++){const s=e[i];let o;if(Array.isArray(s))o=T(this,S0,yT).call(this,s);else if(u(this,it).has(s))o=u(this,it).get(s).visible;else return me(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};var k0,E0;class Ak{constructor(e,n,r){A(this,k0,null);A(this,E0,null);H(this,"_fullReader",null);H(this,"_rangeReaders",new Set);H(this,"_source",null);this._source=e,S(this,k0,n),S(this,E0,r)}get _progressiveDataLength(){var e;return((e=this._fullReader)==null?void 0:e._loaded)??0}getFullReader(){return He(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new(u(this,k0))(this)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new(u(this,E0))(this,e,n);return this._rangeReaders.add(r),r}cancelAllRequests(e){var n;(n=this._fullReader)==null||n.cancel(e);for(const r of new Set(this._rangeReaders))r.cancel(e)}}k0=new WeakMap,E0=new WeakMap;class Ck{constructor(e){H(this,"onProgress",null);H(this,"_contentLength",0);H(this,"_filename",null);H(this,"_headersCapability",Promise.withResolvers());H(this,"_isRangeSupported",!1);H(this,"_isStreamingSupported",!1);H(this,"_loaded",0);H(this,"_stream",null);this._stream=e}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){Ge("Abstract method `read` called")}cancel(e){Ge("Abstract method `cancel` called")}}class _k{constructor(e,n,r){H(this,"_stream",null);this._stream=e}async read(){Ge("Abstract method `read` called")}cancel(e){Ge("Abstract method `cancel` called")}}function T2(t){return t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}var A0,vT;class tfe extends Ak{constructor(n){super(n,nfe,rfe);A(this,A0);H(this,"_progressiveDone",!1);H(this,"_queuedChunks",[]);const{pdfDataRangeTransport:r}=n,{initialData:i,progressiveDone:s}=r;if((i==null?void 0:i.length)>0){const o=T2(i);this._queuedChunks.push(o)}this._progressiveDone=s,r.addRangeListener((o,a)=>{T(this,A0,vT).call(this,o,a)}),r.addProgressListener((o,a)=>{var l,c;a!==void 0&&((c=(l=this._fullReader)==null?void 0:l.onProgress)==null||c.call(l,{loaded:o,total:a}))}),r.addProgressiveReadListener(o=>{T(this,A0,vT).call(this,void 0,o)}),r.addProgressiveDoneListener(()=>{var o;(o=this._fullReader)==null||o.progressiveDone(),this._progressiveDone=!0}),r.transportReady()}getFullReader(){const n=super.getFullReader();return this._queuedChunks=null,n}getRangeReader(n,r){const i=super.getRangeReader(n,r);return i&&(i.onDone=()=>this._rangeReaders.delete(i),this._source.pdfDataRangeTransport.requestDataRange(n,r)),i}cancelAllRequests(n){super.cancelAllRequests(n),this._source.pdfDataRangeTransport.abort()}}A0=new WeakSet,vT=function(n,r){const i=T2(r);if(n===void 0)this._fullReader?this._fullReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.keys().find(o=>o._begin===n);He(s,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),s._enqueue(i)}};class nfe extends Ck{constructor(n){super(n);H(this,"_done",!1);H(this,"_queuedChunks",null);H(this,"_requests",[]);const{pdfDataRangeTransport:r,disableRange:i,disableStream:s}=n._source,{length:o,contentDispositionFilename:a}=r;this._queuedChunks=n._queuedChunks||[];for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._done=n._progressiveDone,this._contentLength=o,this._isStreamingSupported=!s,this._isRangeSupported=!i,HI(a)&&(this._filename=a),this._headersCapability.resolve()}_enqueue(n){this._done||(this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunks.push(n),this._loaded+=n.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const n=Promise.withResolvers();return this._requests.push(n),n.promise}cancel(n){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class rfe extends _k{constructor(n,r,i){super(n,r,i);H(this,"onDone",null);H(this,"_begin",-1);H(this,"_done",!1);H(this,"_queuedChunk",null);H(this,"_requests",[]);this._begin=r}_enqueue(n){var r;if(!this._done){if(this._requests.length===0)this._queuedChunk=n;else{this._requests.shift().resolve({value:n,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,(r=this.onDone)==null||r.call(this)}}async read(){if(this._queuedChunk){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const n=Promise.withResolvers();return this._requests.push(n),n.promise}cancel(n){var r;this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,(r=this.onDone)==null||r.call(this)}}function ife(t){let e=!0,n=r("filename\\*","i").exec(t);if(n){n=n[1];let d=a(n);return d=unescape(d),d=l(d),d=c(d),s(d)}if(n=o(t),n){const d=c(n);return s(d)}if(n=r("filename","i").exec(t),n){n=n[1];let d=a(n);return d=c(d),s(d)}function r(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),p=kk(h);h=f.decode(p),e=!1}catch{}}return h}function s(d){return e&&/[\x80-\xff]/.test(d)&&(d=i("utf-8",d),e&&(d=i("iso-8859-1",d))),d}function o(d){const h=[];let f;const p=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(d))!==null;){let[,g,v,y]=f;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[v,y]}const m=[];for(let g=0;g<h.length&&g in h;++g){let[v,y]=h[g];y=a(y),v&&(y=unescape(y),g===0&&(y=l(y))),m.push(y)}return m.join("")}function a(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const p=h[f].indexOf('"');p!==-1&&(h[f]=h[f].slice(0,p),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function l(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),m=d.slice(h+1).replace(/^[^']*'/,"");return i(f,m)}function c(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,v){return String.fromCharCode(parseInt(v,16))}),i(f,m);try{m=atob(m)}catch{}return i(f,m)})}return""}function aV(t,e){const n=new Headers;if(!t||!e||typeof e!="object")return n;for(const r in e){const i=e[r];i!==void 0&&n.append(r,i)}return n}function Tk(t){var e;return((e=URL.parse(t))==null?void 0:e.origin)??null}function lV({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*n)||r||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function cV(t){const e=t.get("Content-Disposition");if(e){let n=ife(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(HI(n))return n}return null}function Pk(t,e){return new K1(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function uV(t,e){if(t!==e)throw new Error(`Expected range response-origin "${t}" to match "${e}".`)}function dV(t,e,n,r){return fetch(t,{method:"GET",headers:e,signal:r.signal,mode:"cors",credentials:n?"include":"same-origin",redirect:"follow"})}function hV(t,e){if(t!==200&&t!==206)throw Pk(t,e)}function fV(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(me(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class sfe extends Ak{constructor(n){super(n,ofe,afe);H(this,"_responseOrigin",null);this.isHttp=/^https?:/i.test(n.url),this.headers=aV(this.isHttp,n.httpHeaders)}}class ofe extends Ck{constructor(n){super(n);H(this,"_abortController",new AbortController);H(this,"_reader",null);const{disableRange:r,disableStream:i,length:s,rangeChunkSize:o,url:a,withCredentials:l}=n._source;this._contentLength=s,this._isStreamingSupported=!i,this._isRangeSupported=!r;const c=new Headers(n.headers);dV(a,c,l,this._abortController).then(d=>{n._responseOrigin=Tk(d.url),hV(d.status,a),this._reader=d.body.getReader();const h=d.headers,{allowRangeRequests:f,suggestedLength:p}=lV({responseHeaders:h,isHttp:n.isHttp,rangeChunkSize:o,disableRange:r});this._isRangeSupported=f,this._contentLength=p||this._contentLength,this._filename=cV(h),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new uu("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){var i;await this._headersCapability.promise;const{value:n,done:r}=await this._reader.read();return r?{value:n,done:r}:(this._loaded+=n.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:fV(n),done:!1})}cancel(n){var r;(r=this._reader)==null||r.cancel(n),this._abortController.abort()}}class afe extends _k{constructor(n,r,i){super(n,r,i);H(this,"_abortController",new AbortController);H(this,"_readCapability",Promise.withResolvers());H(this,"_reader",null);const{url:s,withCredentials:o}=n._source,a=new Headers(n.headers);a.append("Range",`bytes=${r}-${i-1}`),dV(s,a,o,this._abortController).then(l=>{const c=Tk(l.url);uV(c,n._responseOrigin),hV(l.status,s),this._reader=l.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:n,done:r}=await this._reader.read();return r?{value:n,done:r}:{value:fV(n),done:!1}}cancel(n){var r;(r=this._reader)==null||r.cancel(n),this._abortController.abort()}}const wA=200,P2=206;function lfe(t){return typeof t!="string"?t:kk(t).buffer}var xo,eg,pV,mV;class cfe extends Ak{constructor(n){super(n,ufe,dfe);A(this,eg);A(this,xo,new WeakMap);H(this,"_responseOrigin",null);this.url=n.url,this.isHttp=/^https?:/i.test(this.url),this.headers=aV(this.isHttp,n.httpHeaders)}_request(n){const r=new XMLHttpRequest,i={validateStatus:null,onHeadersReceived:n.onHeadersReceived,onDone:n.onDone,onError:n.onError,onProgress:n.onProgress};u(this,xo).set(r,i),r.open("GET",this.url),r.withCredentials=this._source.withCredentials;for(const[s,o]of this.headers)r.setRequestHeader(s,o);return this.isHttp&&"begin"in n&&"end"in n?(r.setRequestHeader("Range",`bytes=${n.begin}-${n.end-1}`),i.validateStatus=s=>s===P2||s===wA):i.validateStatus=s=>s===wA,r.responseType="arraybuffer",He(n.onError,"Expected `onError` callback to be provided."),r.onerror=()=>n.onError(r.status),r.onreadystatechange=T(this,eg,mV).bind(this,r),r.onprogress=T(this,eg,pV).bind(this,r),r.send(null),r}_abortRequest(n){u(this,xo).has(n)&&(u(this,xo).delete(n),n.abort())}getRangeReader(n,r){const i=super.getRangeReader(n,r);return i&&(i.onClosed=()=>this._rangeReaders.delete(i)),i}}xo=new WeakMap,eg=new WeakSet,pV=function(n,r){var s;const i=u(this,xo).get(n);(s=i==null?void 0:i.onProgress)==null||s.call(i,r)},mV=function(n,r){const i=u(this,xo).get(n);if(!i||(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),n.readyState!==4)||!u(this,xo).has(n))return;if(u(this,xo).delete(n),n.status===0&&this.isHttp){i.onError(n.status);return}const s=n.status||wA;if(!i.validateStatus(s)){i.onError(n.status);return}const o=lfe(n.response);if(s===P2){const a=n.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(a)?i.onDone(o):(me('Missing or invalid "Content-Range" header.'),i.onError(0))}else o?i.onDone(o):i.onError(n.status)};var Wo,gV,yV,vV,wV;class ufe extends Ck{constructor(n){super(n);A(this,Wo);H(this,"_cachedChunks",[]);H(this,"_done",!1);H(this,"_requests",[]);H(this,"_storedError",null);const{length:r}=n._source;this._contentLength=r,this._fullRequestXhr=n._request({onHeadersReceived:T(this,Wo,gV).bind(this),onDone:T(this,Wo,yV).bind(this),onError:T(this,Wo,vV).bind(this),onProgress:T(this,Wo,wV).bind(this)})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const n=Promise.withResolvers();return this._requests.push(n),n.promise}cancel(n){this._done=!0,this._headersCapability.reject(n);for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}Wo=new WeakSet,gV=function(){const n=this._stream,{disableRange:r,rangeChunkSize:i}=n._source,s=this._fullRequestXhr;n._responseOrigin=Tk(s.responseURL);const o=s.getAllResponseHeaders(),a=new Headers(o?o.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(d=>{const[h,...f]=d.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:c}=lV({responseHeaders:a,isHttp:n.isHttp,rangeChunkSize:i,disableRange:r});l&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=cV(a),this._isRangeSupported&&n._abortRequest(s),this._headersCapability.resolve()},yV=function(n){if(this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._cachedChunks.push(n),this._done=!0,!(this._cachedChunks.length>0)){for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}},vV=function(n){this._storedError=Pk(n,this._stream.url),this._headersCapability.reject(this._storedError);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0},wV=function(n){var r;(r=this.onProgress)==null||r.call(this,{loaded:n.loaded,total:n.lengthComputable?n.total:this._contentLength})};var ul,bV,xV,wT;class dfe extends _k{constructor(n,r,i){super(n,r,i);A(this,ul);H(this,"onClosed",null);H(this,"_done",!1);H(this,"_queuedChunk",null);H(this,"_requests",[]);H(this,"_storedError",null);this._requestXhr=n._request({begin:r,end:i,onHeadersReceived:T(this,ul,bV).bind(this),onDone:T(this,ul,xV).bind(this),onError:T(this,ul,wT).bind(this),onProgress:null})}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const n=Promise.withResolvers();return this._requests.push(n),n.promise}cancel(n){var r;this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),(r=this.onClosed)==null||r.call(this)}}ul=new WeakSet,bV=function(){var r;const n=Tk((r=this._requestXhr)==null?void 0:r.responseURL);try{uV(n,this._stream._responseOrigin)}catch(i){this._storedError=i,T(this,ul,wT).call(this,0)}},xV=function(n){var r;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,(r=this.onClosed)==null||r.call(this)},wT=function(n){this._storedError??(this._storedError=Pk(n,this._stream.url));for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._queuedChunk=null};const hfe=/^[a-z][a-z0-9\-+.]+:/i;function ffe(t){if(hfe.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}function SV(t){const{Readable:e}=process.getBuiltinModule("stream");return typeof e.toWeb=="function"?e.toWeb(t):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(t)}function kV(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(me(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class pfe extends Ak{constructor(e){super(e,mfe,gfe),this.url=ffe(e.url),He(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class mfe extends Ck{constructor(n){super(n);H(this,"_reader",null);const{disableRange:r,disableStream:i,length:s,rangeChunkSize:o}=n._source;this._contentLength=s,this._isStreamingSupported=!i,this._isRangeSupported=!r;const a=n.url,l=process.getBuiltinModule("fs");l.promises.lstat(a).then(c=>{const d=l.createReadStream(a),h=SV(d);this._reader=h.getReader();const{size:f}=c;f<=2*o&&(this._isRangeSupported=!1),this._contentLength=f,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new uu("Streaming is disabled.")),this._headersCapability.resolve()}).catch(c=>{c.code==="ENOENT"&&(c=Pk(0,a.href)),this._headersCapability.reject(c)})}async read(){var i;await this._headersCapability.promise;const{value:n,done:r}=await this._reader.read();return r?{value:n,done:r}:(this._loaded+=n.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:kV(n),done:!1})}cancel(n){var r;(r=this._reader)==null||r.cancel(n)}}class gfe extends _k{constructor(n,r,i){super(n,r,i);H(this,"_readCapability",Promise.withResolvers());H(this,"_reader",null);const s=n.url,o=process.getBuiltinModule("fs");try{const a=o.createReadStream(s,{start:r,end:i-1}),l=SV(a);this._reader=l.getReader(),this._readCapability.resolve()}catch(a){this._readCapability.reject(a)}}async read(){await this._readCapability.promise;const{value:n,done:r}=await this._reader.read();return r?{value:n,done:r}:{value:kV(n),done:!1}}cancel(n){var r;(r=this._reader)==null||r.cancel(n)}}const Lg=Symbol("INITIAL_DATA");var ni,C0,bT;class EV{constructor(){A(this,C0);A(this,ni,Object.create(null))}get(e,n=null){if(n){const i=T(this,C0,bT).call(this,e);return i.promise.then(()=>n(i.data)),null}const r=u(this,ni)[e];if(!r||r.data===Lg)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const n=u(this,ni)[e];return!!n&&n.data!==Lg}delete(e){const n=u(this,ni)[e];return!n||n.data===Lg?!1:(delete u(this,ni)[e],!0)}resolve(e,n=null){const r=T(this,C0,bT).call(this,e);r.data=n,r.resolve()}clear(){var e;for(const n in u(this,ni)){const{data:r}=u(this,ni)[n];(e=r==null?void 0:r.bitmap)==null||e.close()}S(this,ni,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,ni)){const{data:n}=u(this,ni)[e];n!==Lg&&(yield[e,n])}}}ni=new WeakMap,C0=new WeakSet,bT=function(e){var n;return(n=u(this,ni))[e]||(n[e]={...Promise.withResolvers(),data:Lg})};const yfe=1e5,R2=30;var K2,wc,Dr,_0,T0,Dd,Ta,P0,R0,Md,I0,tm,bc,nm,N0,rm,Od,D0,M0,im,Ld,O0,sm,om,dl,AV,CV,xT,Ti,Px,ST,_V,TV;const In=class In{constructor({textContentSource:e,container:n,viewport:r}){A(this,dl);A(this,wc,Promise.withResolvers());A(this,Dr,null);A(this,_0,!1);A(this,T0,!!((K2=globalThis.FontInspector)!=null&&K2.enabled));A(this,Dd,null);A(this,Ta,null);A(this,P0,0);A(this,R0,0);A(this,Md,null);A(this,I0,null);A(this,tm,0);A(this,bc,0);A(this,nm,Object.create(null));A(this,N0,[]);A(this,rm,null);A(this,Od,[]);A(this,D0,new WeakMap);A(this,M0,null);var l;if(e instanceof ReadableStream)S(this,rm,e);else if(typeof e=="object")S(this,rm,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,Dr,S(this,I0,n)),S(this,bc,r.scale*Ho.pixelRatio),S(this,tm,r.rotation),S(this,Ta,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:o,pageY:a}=r.rawDims;S(this,M0,[1,0,0,-1,-o,a+s]),S(this,R0,i),S(this,P0,s),T(l=In,Ti,_V).call(l),n.style.setProperty("--min-font-size",u(In,sm)),Nh(n,r),u(this,wc).promise.finally(()=>{u(In,om).delete(this),S(this,Ta,null),S(this,nm,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=vn.platform;return ge(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,Md).read().then(({value:n,done:r})=>{if(r){u(this,wc).resolve();return}u(this,Dd)??S(this,Dd,n.lang),Object.assign(u(this,nm),n.styles),T(this,dl,AV).call(this,n.items),e()},u(this,wc).reject)};return S(this,Md,u(this,rm).getReader()),u(In,om).add(this),e(),u(this,wc).promise}update({viewport:e,onBefore:n=null}){var s;const r=e.scale*Ho.pixelRatio,i=e.rotation;if(i!==u(this,tm)&&(n==null||n(),S(this,tm,i),Nh(u(this,I0),{rotation:i})),r!==u(this,bc)){n==null||n(),S(this,bc,r);const o={div:null,properties:null,ctx:T(s=In,Ti,Px).call(s,u(this,Dd))};for(const a of u(this,Od))o.properties=u(this,D0).get(a),o.div=a,T(this,dl,xT).call(this,o)}}cancel(){var n;const e=new uu("TextLayer task cancelled.");(n=u(this,Md))==null||n.cancel(e).catch(()=>{}),S(this,Md,null),u(this,wc).reject(e)}get textDivs(){return u(this,Od)}get textContentItemsStr(){return u(this,N0)}static cleanup(){if(!(u(this,om).size>0)){u(this,im).clear();for(const{canvas:e}of u(this,Ld).values())e.remove();u(this,Ld).clear()}}};wc=new WeakMap,Dr=new WeakMap,_0=new WeakMap,T0=new WeakMap,Dd=new WeakMap,Ta=new WeakMap,P0=new WeakMap,R0=new WeakMap,Md=new WeakMap,I0=new WeakMap,tm=new WeakMap,bc=new WeakMap,nm=new WeakMap,N0=new WeakMap,rm=new WeakMap,Od=new WeakMap,D0=new WeakMap,M0=new WeakMap,im=new WeakMap,Ld=new WeakMap,O0=new WeakMap,sm=new WeakMap,om=new WeakMap,dl=new WeakSet,AV=function(e){var i,s;if(u(this,_0))return;(s=u(this,Ta)).ctx??(s.ctx=T(i=In,Ti,Px).call(i,u(this,Dd)));const n=u(this,Od),r=u(this,N0);for(const o of e){if(n.length>yfe){me("Ignoring additional textDivs for performance reasons."),S(this,_0,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=u(this,Dr);S(this,Dr,document.createElement("span")),u(this,Dr).classList.add("markedContent"),o.id&&u(this,Dr).setAttribute("id",`${o.id}`),o.tag==="Artifact"&&(u(this,Dr).ariaHidden=!0),a.append(u(this,Dr))}else o.type==="endMarkedContent"&&S(this,Dr,u(this,Dr).parentNode);continue}r.push(o.str),T(this,dl,CV).call(this,o)}},CV=function(e){var m;const n=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,Od).push(n);const i=re.transform(u(this,M0),e.transform);let s=Math.atan2(i[1],i[0]);const o=u(this,nm)[e.fontName];o.vertical&&(s+=Math.PI/2);let a=u(this,T0)&&o.fontSubstitution||o.fontFamily;a=In.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),c=l*T(m=In,Ti,TV).call(m,a,o,u(this,Dd));let d,h;s===0?(d=i[4],h=i[5]-c):(d=i[4]+c*Math.sin(s),h=i[5]-c*Math.cos(s));const f=n.style;f.left=`${(100*d/u(this,R0)).toFixed(2)}%`,f.top=`${(100*h/u(this,P0)).toFixed(2)}%`,f.setProperty("--font-height",`${l.toFixed(2)}px`),f.fontFamily=a,r.fontSize=l,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,u(this,T0)&&(n.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const g=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);g!==v&&Math.max(g,v)/Math.min(g,v)>1.5&&(p=!0)}if(p&&(r.canvasWidth=o.vertical?e.height:e.width),u(this,D0).set(n,r),u(this,Ta).div=n,u(this,Ta).properties=r,T(this,dl,xT).call(this,u(this,Ta)),r.hasText&&u(this,Dr).append(n),r.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),u(this,Dr).append(g)}},xT=function(e){var o;const{div:n,properties:r,ctx:i}=e,{style:s}=n;if(r.canvasWidth!==0&&r.hasText){const{fontFamily:a}=s,{canvasWidth:l,fontSize:c}=r;T(o=In,Ti,ST).call(o,i,c*u(this,bc),a);const{width:d}=i.measureText(n.textContent);d>0&&s.setProperty("--scale-x",l*u(this,bc)/d)}r.angle!==0&&s.setProperty("--rotate",`${r.angle}deg`)},Ti=new WeakSet,Px=function(e=null){let n=u(this,Ld).get(e||(e=""));if(!n){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),n=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Ld).set(e,n),u(this,O0).set(n,{size:0,family:""})}return n},ST=function(e,n,r){const i=u(this,O0).get(e);n===i.size&&r===i.family||(e.font=`${n}px ${r}`,i.size=n,i.family=r)},_V=function(){if(u(this,sm)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),S(this,sm,e.getBoundingClientRect().height),e.remove()},TV=function(e,n,r){const i=u(this,im).get(e);if(i)return i;const s=T(this,Ti,Px).call(this,r);s.canvas.width=s.canvas.height=R2,T(this,Ti,ST).call(this,s,R2,e);const o=s.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let c=.8;return a?c=a/(a+l):(vn.platform.isFirefox&&me("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?c=n.ascent:n.descent&&(c=1+n.descent)),u(this,im).set(e,c),c},A(In,Ti),A(In,im,new Map),A(In,Ld,new Map),A(In,O0,new WeakMap),A(In,sm,null),A(In,om,new Set);let kv=In;const vfe=100;function PV(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new kT,{docId:n}=e,r=t.url?Che(t.url):null,i=t.data?_he(t.data):null,s=t.httpHeaders||null,o=t.withCredentials===!0,a=t.password??null,l=t.range instanceof RV?t.range:null,c=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let d=t.worker instanceof Ev?t.worker:null;const h=t.verbosity,f=typeof t.docBaseUrl=="string"&&!Ek(t.docBaseUrl)?t.docBaseUrl:null,p=Fb(t.cMapUrl),m=t.cMapPacked!==!1,g=t.CMapReaderFactory||(fr?Ohe:p2),v=Fb(t.iccUrl),y=Fb(t.standardFontDataUrl),w=t.StandardFontDataFactory||(fr?Lhe:m2),b=Fb(t.wasmUrl),k=t.WasmFactory||(fr?jhe:g2),_=t.stopAtErrors!==!0,C=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,P=t.isEvalSupported!==!1,R=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!fr,M=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!fr&&(vn.platform.isFirefox||!globalThis.chrome),I=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,j=typeof t.disableFontFace=="boolean"?t.disableFontFace:fr,U=t.fontExtraProperties===!0,G=t.enableXfa===!0,B=t.ownerDocument||globalThis.document,V=t.disableRange===!0,F=t.disableStream===!0,L=t.disableAutoFetch===!0,O=t.pdfBug===!0,z=t.CanvasFactory||(fr?Mhe:Ihe),N=t.FilterFactory||(fr?Dhe:Nhe),Y=t.enableHWA===!0,$=t.useWasm!==!1,D=l?l.length:t.length??NaN,K=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!fr&&!j,q=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(g===p2&&w===m2&&k===g2&&p&&y&&b&&Kg(p,document.baseURI)&&Kg(y,document.baseURI)&&Kg(b,document.baseURI)),te=null;Zde(h);const ee={canvasFactory:new z({ownerDocument:B,enableHWA:Y}),filterFactory:new N({docId:n,ownerDocument:B}),cMapReaderFactory:q?null:new g({baseUrl:p,isCompressed:m}),standardFontDataFactory:q?null:new w({baseUrl:y}),wasmFactory:q?null:new k({baseUrl:b})};d||(d=Ev.create({verbosity:h,port:Do.workerPort}),e._worker=d);const je={docId:n,apiVersion:"5.4.624",data:i,password:a,disableAutoFetch:L,rangeChunkSize:c,length:D,docBaseUrl:f,enableXfa:G,evaluatorOptions:{maxImageSize:C,disableFontFace:j,ignoreErrors:_,isEvalSupported:P,isOffscreenCanvasSupported:R,isImageDecoderSupported:M,canvasMaxAreaInBytes:I,fontExtraProperties:U,useSystemFonts:K,useWasm:$,useWorkerFetch:q,cMapUrl:p,iccUrl:v,standardFontDataUrl:y,wasmUrl:b}},Ne={ownerDocument:B,pdfBug:O,styleElement:te,enableHWA:Y,loadingParams:{disableAutoFetch:L,enableXfa:G}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const gt=d.messageHandler.sendWithPromise("GetDocRequest",je,i?[i.buffer]:null);let Wt;if(l)Wt=new tfe({pdfDataRangeTransport:l,disableRange:V,disableStream:F});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Ni=Kg(r)?sfe:fr?pfe:cfe;Wt=new Ni({url:r,length:D,httpHeaders:s,withCredentials:o,rangeChunkSize:c,disableRange:V,disableStream:F})}return gt.then(Ni=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Gr=new ny(n,Ni,d.port),gl=new xfe(Gr,e,Wt,Ne,ee);e._transport=gl,Gr.send("Ready",null)})}).catch(e._capability.reject),e}var gS;const yS=class yS{constructor(){H(this,"_capability",Promise.withResolvers());H(this,"_transport",null);H(this,"_worker",null);H(this,"docId",`d${Lt(yS,gS)._++}`);H(this,"destroyed",!1);H(this,"onPassword",null);H(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,n,r,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((n=this._transport)==null?void 0:n.destroy())}catch(s){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};gS=new WeakMap,A(yS,gS,0);let kT=yS;var jd,L0,j0,F0,B0;class RV{constructor(e,n,r=!1,i=null){A(this,jd,Promise.withResolvers());A(this,L0,[]);A(this,j0,[]);A(this,F0,[]);A(this,B0,[]);this.length=e,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){u(this,B0).push(e)}addProgressListener(e){u(this,F0).push(e)}addProgressiveReadListener(e){u(this,j0).push(e)}addProgressiveDoneListener(e){u(this,L0).push(e)}onDataRange(e,n){for(const r of u(this,B0))r(e,n)}onDataProgress(e,n){u(this,jd).promise.then(()=>{for(const r of u(this,F0))r(e,n)})}onDataProgressiveRead(e){u(this,jd).promise.then(()=>{for(const n of u(this,j0))n(e)})}onDataProgressiveDone(){u(this,jd).promise.then(()=>{for(const e of u(this,L0))e()})}transportReady(){u(this,jd).resolve()}requestDataRange(e,n){Ge("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}jd=new WeakMap,L0=new WeakMap,j0=new WeakMap,F0=new WeakMap,B0=new WeakMap;class wfe{constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ge(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,n){return this._transport.getAnnotationsByType(e,n)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Pa,$0,Fd,ay;class bfe{constructor(e,n,r,i=!1){A(this,Fd);A(this,Pa,!1);A(this,$0,Sv.instance);this._pageIndex=e,this._pageInfo=n,this._transport=r,this._stats=i?new a2:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new EV,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(e){this._pageIndex=e-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new Hw({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ge(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:n=e.canvas,viewport:r,intent:i="display",annotationMode:s=jl.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:m=null}){var M,I,j;(M=this._stats)==null||M.time("Overall");const g=this._transport.getRenderingIntent(i,s,h,f),{renderingIntent:v,cacheKey:y}=g;S(this,Pa,!1),l||(l=this._transport.getOptionalContentConfig(v));let w=this._intentStates.get(y);w||(w=Object.create(null),this._intentStates.set(y,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const b=!!(v&yi.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(g));const k=!!(this._pdfBug&&((j=globalThis.StepperManager)!=null&&j.enabled)),_=!this.recordedBBoxes&&(p||k),C=U=>{var G,B;if(w.renderTasks.delete(P),_){const V=(G=P.gfx)==null?void 0:G.dependencyTracker.take();V&&(P.stepper&&P.stepper.setOperatorBBoxes(V,P.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=V))}b&&S(this,Pa,!0),T(this,Fd,ay).call(this),U?(P.capability.reject(U),this._abortOperatorList({intentState:w,reason:U instanceof Error?U:new Error(U)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new ET({callback:C,params:{canvas:n,canvasContext:e,dependencyTracker:_?new Bhe(n,w.operatorList.length,k):null,viewport:r,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:m});(w.renderTasks||(w.renderTasks=new Set)).add(P);const R=P.task;return Promise.all([w.displayReadyCapability.promise,l]).then(([U,G])=>{var B;if(this.destroyed){C();return}if((B=this._stats)==null||B.time("Rendering"),!(G.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:U,optionalContentConfig:G}),P.operatorListChanged()}).catch(C),R}getOperatorList({intent:e="display",annotationMode:n=jl.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){var c;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,n,r,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:u(this,$0).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>xv.textContent(r));const n=this.streamTextContent(e);return new Promise(function(r,i){function s(){o.read().then(function({value:l,done:c}){if(c){r(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),s()},i)}const o=n.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const r of n.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),S(this,Pa,!1),Promise.all(e)}cleanup(e=!1){S(this,Pa,!0);const n=T(this,Fd,ay).call(this);return e&&n&&this._stats&&(this._stats=new a2),n}_startRenderPage(e,n){var i,s;const r=this._intentStates.get(n);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=r.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,n){for(let r=0,i=e.length;r<i;r++)n.operatorList.fnArray.push(e.fnArray[r]),n.operatorList.argsArray.push(e.argsArray[r]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const r of n.renderTasks)r.operatorListChanged();e.lastChunk&&T(this,Fd,ay).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:o}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:u(this,$0).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:s,modifiedIds:i},o).getReader(),c=this._intentStates.get(n);c.streamReader=l;const d=()=>{l.read().then(({value:h,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),d())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();T(this,Fd,ay).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:n,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(n instanceof VI){let i=vfe;n.extraDelay>0&&n.extraDelay<1e3&&(i+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},i);return}}if(e.streamReader.cancel(new uu(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Pa=new WeakMap,$0=new WeakMap,Fd=new WeakSet,ay=function(){if(!u(this,Pa)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,Pa,!1),!0};var xc,Ns,Ra,Bd,vS,$d,Ud,wr,Rx,IV,NV,ly,am,Ix;const St=class St{constructor({name:e=null,port:n=null,verbosity:r=ehe()}={}){A(this,wr);A(this,xc,Promise.withResolvers());A(this,Ns,null);A(this,Ra,null);A(this,Bd,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,n){if(u(St,Ud).has(n))throw new Error("Cannot use more than one PDFWorker per port.");u(St,Ud).set(n,this),T(this,wr,IV).call(this,n)}else T(this,wr,NV).call(this)}get promise(){return u(this,xc).promise}get port(){return u(this,Ra)}get messageHandler(){return u(this,Ns)}destroy(){var e,n;this.destroyed=!0,(e=u(this,Bd))==null||e.terminate(),S(this,Bd,null),u(St,Ud).delete(u(this,Ra)),S(this,Ra,null),(n=u(this,Ns))==null||n.destroy(),S(this,Ns,null)}static create(e){const n=u(this,Ud).get(e==null?void 0:e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new St(e)}static get workerSrc(){if(Do.workerSrc)return Do.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ge(this,"_setupFakeWorkerGlobal",(async()=>u(this,am,Ix)?u(this,am,Ix):(await import(this.workerSrc)).WorkerMessageHandler)())}};xc=new WeakMap,Ns=new WeakMap,Ra=new WeakMap,Bd=new WeakMap,vS=new WeakMap,$d=new WeakMap,Ud=new WeakMap,wr=new WeakSet,Rx=function(){u(this,xc).resolve(),u(this,Ns).send("configure",{verbosity:this.verbosity})},IV=function(e){S(this,Ra,e),S(this,Ns,new ny("main","worker",e)),u(this,Ns).on("ready",()=>{}),T(this,wr,Rx).call(this)},NV=function(){if(u(St,$d)||u(St,am,Ix)){T(this,wr,ly).call(this);return}let{workerSrc:e}=St;try{St._isSameOrigin(window.location,e)||(e=St._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),r=new ny("main","worker",n),i=()=>{s.abort(),r.destroy(),n.terminate(),this.destroyed?u(this,xc).reject(new Error("Worker was destroyed")):T(this,wr,ly).call(this)},s=new AbortController;n.addEventListener("error",()=>{u(this,Bd)||i()},{signal:s.signal}),r.on("test",a=>{if(s.abort(),this.destroyed||!a){i();return}S(this,Ns,r),S(this,Ra,n),S(this,Bd,n),T(this,wr,Rx).call(this)}),r.on("ready",a=>{if(s.abort(),this.destroyed){i();return}try{o()}catch{T(this,wr,ly).call(this)}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{Sk("The worker has been disabled.")}T(this,wr,ly).call(this)},ly=function(){u(St,$d)||(me("Setting up fake worker."),S(St,$d,!0)),St._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,xc).reject(new Error("Worker was destroyed"));return}const n=new Rhe;S(this,Ra,n);const r=`fake${Lt(St,vS)._++}`,i=new ny(r+"_worker",r,n);e.setup(i,n),S(this,Ns,new ny(r,r+"_worker",n)),T(this,wr,Rx).call(this)}).catch(e=>{u(this,xc).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},am=new WeakSet,Ix=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},A(St,am),A(St,vS,0),A(St,$d,!1),A(St,Ud,new WeakMap),fr&&(S(St,$d,!0),Do.workerSrc||(Do.workerSrc="./pdf.worker.mjs")),St._isSameOrigin=(e,n)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const i=new URL(n,r);return r.origin===i.origin},St._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},St.fromPort=e=>{if(hhe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return St.create(e)};let Ev=St;var ri,Ia,Na,qi,Sc,lm,Da,Mr,Ei,DV,cy,Nx;class xfe{constructor(e,n,r,i,s){A(this,Ei);H(this,"downloadInfoCapability",Promise.withResolvers());A(this,ri,null);A(this,Ia,new Map);A(this,Na,null);A(this,qi,new Map);A(this,Sc,new Map);A(this,lm,new Map);A(this,Da,null);A(this,Mr,Sv.instance);this.messageHandler=e,this.loadingTask=n,S(this,Na,r),this.commonObjs=new EV,this.fontLoader=new khe({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.enableHWA=i.enableHWA,this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),u(this,Mr).addListener(T(this,Ei,DV).bind(this))}get annotationStorage(){return ge(this,"annotationStorage",new WI)}getRenderingIntent(e,n=jl.ENABLE,r=null,i=!1,s=!1){let o=yi.DISPLAY,a=iT;switch(e){case"any":o=yi.ANY;break;case"display":break;case"print":o=yi.PRINT;break;default:me(`getRenderingIntent - invalid intent: ${e}`)}const l=o&yi.PRINT&&r instanceof Q5?r:this.annotationStorage;switch(n){case jl.DISABLE:o+=yi.ANNOTATIONS_DISABLE;break;case jl.ENABLE:break;case jl.ENABLE_FORMS:o+=yi.ANNOTATIONS_FORMS;break;case jl.ENABLE_STORAGE:o+=yi.ANNOTATIONS_STORAGE,a=l.serializable;break;default:me(`getRenderingIntent - invalid annotationMode: ${n}`)}i&&(o+=yi.IS_EDITING),s&&(o+=yi.OPLIST);const{ids:c,hash:d}=l.modifiedIds,h=[o,a.hash,d];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=u(this,Da))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of u(this,qi).values())e.push(i._destroy());u(this,qi).clear(),u(this,Sc).clear(),u(this,lm).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Ia).clear(),this.filterFactory.destroy(),kv.cleanup(),(i=u(this,Na))==null||i.cancelAllRequests(new uu("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(r,i)=>{He(u(this,Na),"GetReader - no `BasePDFStream` instance available."),S(this,ri,u(this,Na).getFullReader()),u(this,ri).onProgress=s=>T(this,Ei,Nx).call(this,s),i.onPull=()=>{u(this,ri).read().then(function({value:s,done:o}){if(o){i.close();return}He(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{u(this,ri).cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{await u(this,ri).headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:o}=u(this,ri);return i&&s&&(u(this,ri).onProgress=null),{isStreamingSupported:i,isRangeSupported:s,contentLength:o}}),e.on("GetRangeReader",(r,i)=>{He(u(this,Na),"GetRangeReader - no `BasePDFStream` instance available.");const s=u(this,Na).getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){i.close();return}He(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{u(this,Mr).pagesNumber=r.numPages,this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new wfe(r,this))}),e.on("DocException",r=>{n._capability.reject(Ar(r))}),e.on("PasswordRequest",r=>{S(this,Da,Promise.withResolvers());try{if(!n.onPassword)throw Ar(r);const i=s=>{s instanceof Error?u(this,Da).reject(s):u(this,Da).resolve({password:s})};n.onPassword(i,r.code)}catch(i){u(this,Da).reject(i)}return u(this,Da).promise}),e.on("DataLoaded",r=>{T(this,Ei,Nx).call(this,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;u(this,qi).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in s){const f=s.error;me(`Error during font loading: ${f}`),this.commonObjs.resolve(r,f);break}const a=new sT(s),l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,c=new Ehe(a,l,s.extra,s.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:d}=s;He(d,"The imageRef must be defined.");for(const f of u(this,qi).values())for(const[,p]of f.objs)if((p==null?void 0:p.ref)===d)return p.dataLen?(this.commonObjs.resolve(r,structuredClone(p)),p.dataLen):null;break;case"FontPath":this.commonObjs.resolve(r,new Ahe(s));break;case"Image":this.commonObjs.resolve(r,s);break;case"Pattern":const h=new oT(s);this.commonObjs.resolve(r,h.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,o])=>{var l;if(this.destroyed)return;const a=u(this,qi).get(i);if(!a.objs.has(r)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(s){case"Image":case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{this.destroyed||T(this,Ei,Nx).call(this,r)}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&me("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=u(this,ri))==null?void 0:r.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>u(this,Mr).pagesNumber)return Promise.reject(new Error("Invalid page request."));const n=e-1,r=u(this,Mr).getPageId(e)-1,i=u(this,Sc).get(n);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&u(this,lm).set(o.refStr,r);const a=new bfe(n,o,this,this._params.pdfBug);return u(this,qi).set(n,a),a});return u(this,Sc).set(n,s),s}async getPageIndex(e){if(!aT(e))throw new Error("Invalid pageIndex request.");const n=await this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen});return u(this,Mr).getPageNumber(n+1)-1}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:u(this,Mr).getPageId(e+1)-1,intent:n})}getFieldObjects(){return T(this,Ei,cy).call(this,"GetFieldObjects")}hasJSActions(){return T(this,Ei,cy).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,n){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:n})}getDocJSActions(){return T(this,Ei,cy).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:u(this,Mr).getPageId(e+1)-1})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:u(this,Mr).getPageId(e+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return T(this,Ei,cy).call(this,"GetOptionalContentConfig").then(n=>new efe(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=u(this,Ia).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,o;return{info:i[0],metadata:i[1]?new Jhe(i[1]):null,contentDispositionFilename:((s=u(this,ri))==null?void 0:s.filename)??null,contentLength:((o=u(this,ri))==null?void 0:o.contentLength)??null,hasStructTree:i[2]}});return u(this,Ia).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of u(this,qi).values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,Ia).clear(),this.filterFactory.destroy(!0),kv.cleanup()}}cachedPageNumber(e){if(!aT(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`,r=u(this,lm).get(n);return r>=0?u(this,Mr).getPageNumber(r+1):null}}ri=new WeakMap,Ia=new WeakMap,Na=new WeakMap,qi=new WeakMap,Sc=new WeakMap,lm=new WeakMap,Da=new WeakMap,Mr=new WeakMap,Ei=new WeakSet,DV=function(){const e=new Map,n=new Map;for(let r=0,i=u(this,Mr).pagesNumber;r<i;r++){const s=u(this,Mr).getPrevPageNumber(r+1)-1,o=u(this,qi).get(s);o&&e.set(r,o);const a=u(this,Sc).get(s);a&&n.set(r,a)}S(this,qi,e),S(this,Sc,n)},cy=function(e,n=null){const r=u(this,Ia).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,n);return u(this,Ia).set(e,i),i},Nx=function({loaded:e,total:n}){var r,i;(i=(r=this.loadingTask).onProgress)==null||i.call(r,{loaded:e,total:n,percent:Bn(Math.round(e/n*100),0,100)})};class Sfe{constructor(e){H(this,"_internalRenderTask",null);H(this,"onContinue",null);H(this,"onError",null);this._internalRenderTask=e}get promise(){return this._internalRenderTask.capability.promise}cancel(e=0){this._internalRenderTask.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this._internalRenderTask.operatorList;if(!e)return!1;const{annotationCanvasMap:n}=this._internalRenderTask;return e.form||e.canvas&&(n==null?void 0:n.size)>0}}var kc,zd;const Uu=class Uu{constructor({callback:e,params:n,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:m=null}){A(this,kc,null);this.callback=e,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Sfe(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=p,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=m}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){var l,c;if(this.cancelled)return;if(this._canvas){if(u(Uu,zd).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Uu,zd).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:s,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new tp(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,n=0){var r,i,s;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),u(this,kc)&&(window.cancelAnimationFrame(u(this,kc)),S(this,kc,null)),u(Uu,zd).delete(this._canvas),e||(e=new VI(`Rendering cancelled, page ${this._pageIndex+1}`,n)),this.callback(e),(s=(i=this.task).onError)==null||s.call(i,e)}operatorListChanged(){var e,n;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(n=this.stepper)==null||n.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,kc,window.requestAnimationFrame(()=>{S(this,kc,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Uu,zd).delete(this._canvas),this.callback())))}};kc=new WeakMap,zd=new WeakMap,A(Uu,zd,new WeakSet);let ET=Uu;const kfe="5.4.624",Efe="384c6208b";var ii,Vd,cm,dn,U0,um,Ma,z0,Ec,Ds,V0,st,AT,CT,_T,Mu,MV,Rl;const Cr=class Cr{constructor({editor:e=null,uiManager:n=null}){A(this,st);A(this,ii,null);A(this,Vd,null);A(this,cm);A(this,dn,null);A(this,U0,!1);A(this,um,!1);A(this,Ma,null);A(this,z0);A(this,Ec,null);A(this,Ds,null);var r,i;e?(S(this,um,!1),S(this,Ma,e)):S(this,um,!0),S(this,Ds,(e==null?void 0:e._uiManager)||n),S(this,z0,u(this,Ds)._eventBus),S(this,cm,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((i=u(this,Ds))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),u(Cr,V0)||S(Cr,V0,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ge(this,"_keyboardManager",new Gw([[["Escape","mac+Escape"],Cr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Cr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Cr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Cr.prototype._moveToPrevious],[["Home","mac+Home"],Cr.prototype._moveToBeginning],[["End","mac+End"],Cr.prototype._moveToEnd]]))}renderButton(){const e=S(this,ii,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,Ma)&&(e.ariaControls=`${u(this,Ma).id}_colorpicker_dropdown`);const n=u(this,Ds)._signal;e.addEventListener("click",T(this,st,Mu).bind(this),{signal:n}),e.addEventListener("keydown",T(this,st,_T).bind(this),{signal:n});const r=S(this,Vd,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=u(this,cm),e.append(r),e}renderMainDropdown(){const e=S(this,dn,T(this,st,AT).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,ii)){T(this,st,Mu).call(this,e);return}const n=e.target.getAttribute("data-color");n&&T(this,st,CT).call(this,n,e)}_moveToNext(e){var n,r;if(!u(this,st,Rl)){T(this,st,Mu).call(this,e);return}if(e.target===u(this,ii)){(n=u(this,dn).firstElementChild)==null||n.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var n,r;if(e.target===((n=u(this,dn))==null?void 0:n.firstElementChild)||e.target===u(this,ii)){u(this,st,Rl)&&this._hideDropdownFromKeyboard();return}u(this,st,Rl)||T(this,st,Mu).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var n;if(!u(this,st,Rl)){T(this,st,Mu).call(this,e);return}(n=u(this,dn).firstElementChild)==null||n.focus()}_moveToEnd(e){var n;if(!u(this,st,Rl)){T(this,st,Mu).call(this,e);return}(n=u(this,dn).lastElementChild)==null||n.focus()}hideDropdown(){var e,n;(e=u(this,dn))==null||e.classList.add("hidden"),u(this,ii).ariaExpanded="false",(n=u(this,Ec))==null||n.abort(),S(this,Ec,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,um)){if(!u(this,st,Rl)){(e=u(this,Ma))==null||e.unselect();return}this.hideDropdown(),u(this,ii).focus({preventScroll:!0,focusVisible:u(this,U0)})}}updateColor(e){if(u(this,Vd)&&(u(this,Vd).style.backgroundColor=e),!u(this,dn))return;const n=u(this,Ds).highlightColors.values();for(const r of u(this,dn).children)r.ariaSelected=n.next().value===e.toUpperCase()}destroy(){var e,n;(e=u(this,ii))==null||e.remove(),S(this,ii,null),S(this,Vd,null),(n=u(this,dn))==null||n.remove(),S(this,dn,null)}};ii=new WeakMap,Vd=new WeakMap,cm=new WeakMap,dn=new WeakMap,U0=new WeakMap,um=new WeakMap,Ma=new WeakMap,z0=new WeakMap,Ec=new WeakMap,Ds=new WeakMap,V0=new WeakMap,st=new WeakSet,AT=function(){const e=document.createElement("div"),n=u(this,Ds)._signal;e.addEventListener("contextmenu",us,{signal:n}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,Ma)&&(e.id=`${u(this,Ma).id}_colorpicker_dropdown`);for(const[r,i]of u(this,Ds).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",u(Cr,V0)[r]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=i,s.ariaSelected=i===u(this,cm),s.addEventListener("click",T(this,st,CT).bind(this,i),{signal:n}),e.append(s)}return e.addEventListener("keydown",T(this,st,_T).bind(this),{signal:n}),e},CT=function(e,n){n.stopPropagation(),u(this,z0).dispatch("switchannotationeditorparams",{source:this,type:Me.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},_T=function(e){Cr._keyboardManager.exec(this,e)},Mu=function(e){if(u(this,st,Rl)){this.hideDropdown();return}if(S(this,U0,e.detail===0),u(this,Ec)||(S(this,Ec,new AbortController),window.addEventListener("pointerdown",T(this,st,MV).bind(this),{signal:u(this,Ds).combinedSignal(u(this,Ec))})),u(this,ii).ariaExpanded="true",u(this,dn)){u(this,dn).classList.remove("hidden");return}const n=S(this,dn,T(this,st,AT).call(this));u(this,ii).append(n)},MV=function(e){var n;(n=u(this,dn))!=null&&n.contains(e.target)||this.hideDropdown()},Rl=function(){return u(this,dn)&&!u(this,dn).classList.contains("hidden")},A(Cr,V0,null);let tS=Cr;var So,H0,dm,W0;const zu=class zu{constructor(e){A(this,So,null);A(this,H0,null);A(this,dm,null);S(this,H0,e),S(this,dm,e._uiManager),u(zu,W0)||S(zu,W0,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,So))return u(this,So);const{editorType:e,colorType:n,color:r}=u(this,H0),i=S(this,So,document.createElement("input"));return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",u(zu,W0)[e]),i.addEventListener("input",()=>{u(this,dm).updateParams(n,i.value)},{signal:u(this,dm)._signal}),i}update(e){u(this,So)&&(u(this,So).value=e)}destroy(){var e;(e=u(this,So))==null||e.remove(),S(this,So,null)}hideDropdown(){}};So=new WeakMap,H0=new WeakMap,dm=new WeakMap,W0=new WeakMap,A(zu,W0,null);let nS=zu;function I2(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function jg(t){return Math.max(0,Math.min(255,255*t))}class N2{static CMYK_G([e,n,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*n+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=jg(e),[e,e,e]}static G_HTML([e]){const n=I2(e);return`#${n}${n}${n}`}static RGB_G([e,n,r]){return["G",.3*e+.59*n+.11*r]}static RGB_rgb(e){return e.map(jg)}static RGB_HTML(e){return`#${e.map(I2).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,n+i)]}static CMYK_rgb([e,n,r,i]){return[jg(1-Math.min(1,e+i)),jg(1-Math.min(1,r+i)),jg(1-Math.min(1,n+i))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,r]){const i=1-e,s=1-n,o=1-r,a=Math.min(i,s,o);return["CMYK",i,s,o,a]}}class Afe{create(e,n,r=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${n}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ge("Abstract method `_createSVG` called.")}}class rS extends Afe{_createSVG(e){return document.createElementNS(ea,e)}}const Cfe=9,Mh=new WeakSet,_fe=new Date().getTimezoneOffset()*60*1e3;class bA{static create(e){switch(e.data.annotationType){case en.LINK:return new KI(e);case en.TEXT:return new Pfe(e);case en.WIDGET:switch(e.data.fieldType){case"Tx":return new Rfe(e);case"Btn":return e.data.radioButton?new jV(e):e.data.checkBox?new Nfe(e):new Dfe(e);case"Ch":return new Mfe(e);case"Sig":return new Ife(e)}return new zh(e);case en.POPUP:return new PT(e);case en.FREETEXT:return new zV(e);case en.LINE:return new Lfe(e);case en.SQUARE:return new jfe(e);case en.CIRCLE:return new Ffe(e);case en.POLYLINE:return new VV(e);case en.CARET:return new $fe(e);case en.INK:return new XI(e);case en.POLYGON:return new Bfe(e);case en.HIGHLIGHT:return new HV(e);case en.UNDERLINE:return new Ufe(e);case en.SQUIGGLY:return new zfe(e);case en.STRIKEOUT:return new Vfe(e);case en.STAMP:return new WV(e);case en.FILEATTACHMENT:return new Hfe(e);default:return new Mt(e)}}}var Hd,hm,Ki,G0,TT;const iN=class iN{constructor(e,{isRenderable:n=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){A(this,G0);A(this,Hd,null);A(this,hm,!1);A(this,Ki,null);this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,n&&(this.contentElement=this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:n}){return!!(e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return iN._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var r;const{data:e}=this,n=(r=this.annotationStorage)==null?void 0:r.getEditor(e.id);return n?n.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var a;const e=(a=this.annotationStorage)==null?void 0:a.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:n,inkLists:r,rect:i}=this.data;let s=-1/0,o=-1/0;if((n==null?void 0:n.length)>=8){for(let l=0;l<n.length;l+=8)n[l+1]>o?(o=n[l+1],s=n[l+2]):n[l+1]===o&&(s=Math.max(s,n[l+2]));return[s,o]}if((r==null?void 0:r.length)>=1){for(const l of r)for(let c=0,d=l.length;c<d;c+=2)l[c+1]>o?(o=l[c+1],s=l[c]):l[c+1]===o&&(s=Math.max(s,l[c]));if(s!==1/0)return[s,o]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:n},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}}=this.parent;return e[1]=n[3]-e[1]+n[1],e[0]=100*(e[0]-s)/r,e[1]=100*(e[1]-o)/i,e}get commentText(){var n,r,i;const{data:e}=this;return((r=(n=this.annotationStorage.getRawValue(`${wv}${e.id}`))==null?void 0:n.popup)==null?void 0:r.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:n}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(n.id,{popup:r})||this.annotationStorage.setValue(`${wv}${n.id}`,{id:n.id,annotationType:n.annotationType,page:this.parent.page,popup:r,popupRef:n.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,n;(n=((e=u(this,Ki))==null?void 0:e.popup)||this.popup)==null||n.remove(),S(this,Ki,this.popup=null)}updateEdited(e){var s;if(!this.container)return;e.rect&&(u(this,Hd)||S(this,Hd,{rect:this.data.rect.slice(0)}));const{rect:n,popup:r}=e;n&&T(this,G0,TT).call(this,n);let i=((s=u(this,Ki))==null?void 0:s.popup)||this.popup;!i&&(r!=null&&r.text)&&(this._createPopup(r),i=u(this,Ki).popup),i&&(i.updateEdited(e),r!=null&&r.deleted&&(i.remove(),S(this,Ki,null),this.popup=null))}resetEdited(){var e;u(this,Hd)&&(T(this,G0,TT).call(this,u(this,Hd).rect),(e=u(this,Ki))==null||e.popup.resetEdited(),S(this,Hd,null))}_createContainer(e){const{data:n,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",n.id),!(this instanceof zh)&&!(this instanceof KI)&&(s.tabIndex=0);const{style:o}=s;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,n.alternativeText&&(s.title=n.alternativeText),n.noRotate&&s.classList.add("norotate"),!n.rect||this instanceof PT){const{rotation:g}=n;return!n.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}const{width:a,height:l}=this;if(!e&&n.borderStyle.width>0){o.borderWidth=`${n.borderStyle.width}px`;const g=n.borderStyle.horizontalCornerRadius,v=n.borderStyle.verticalCornerRadius;if(g>0||v>0){const w=`calc(${g}px * var(--total-scale-factor)) / calc(${v}px * var(--total-scale-factor))`;o.borderRadius=w}else if(this instanceof jV){const w=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=w}switch(n.borderStyle.style){case df.SOLID:o.borderStyle="solid";break;case df.DASHED:o.borderStyle="dashed";break;case df.BEVELED:me("Unimplemented border style: beveled");break;case df.INSET:me("Unimplemented border style: inset");break;case df.UNDERLINE:o.borderBottomStyle="solid";break}const y=n.borderColor||null;y?(S(this,hm,!0),o.borderColor=re.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):o.borderWidth=0}const c=re.normalizeRect([n.rect[0],r.view[3]-n.rect[1]+r.view[1],n.rect[2],r.view[3]-n.rect[3]+r.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:p}=i.rawDims;o.left=`${100*(c[0]-f)/d}%`,o.top=`${100*(c[1]-p)/h}%`;const{rotation:m}=n;return n.hasOwnCanvas||m===0?(o.width=`${100*a/d}%`,o.height=`${100*l/h}%`):this.setRotation(m,s),s}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:o}=this;e%180!==0&&([s,o]=[o,s]),n.style.width=`${100*s/r}%`,n.style.height=`${100*o/i}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,r,i)=>{const s=i.detail[n],o=s[0],a=s.slice(1);i.target.style[r]=N2[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:N2[`${o}_rgb`](a)})};return ge(this,"_commonActions",{display:n=>{const{display:r}=n.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:r}=n.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const r=n.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,n){const r=this._commonActions;for(const i of Object.keys(n.detail)){const s=e[i]||r[i];s==null||s(n)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const r=this._commonActions;for(const[i,s]of Object.entries(n)){const o=r[i];if(o){const a={detail:{[i]:s},target:e};o(a),delete n[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,r,i,s]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,v,y,w]=e.subarray(2,6);if(i===g&&s===v&&n===y&&r===w)return}const{style:o}=this.container;let a;if(u(this,hm)){const{borderColor:g,borderWidth:v}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=i-n,c=s-r,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const p=d.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let g=2,v=e.length;g<v;g+=8){const y=e[g],w=e[g+1],b=e[g+2],k=e[g+3],_=d.createElement("rect"),C=(b-n)/l,P=(s-w)/c,R=(y-b)/l,M=(w-k)/c;_.setAttribute("x",C),_.setAttribute("y",P),_.setAttribute("width",R),_.setAttribute("height",M),p.append(_),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${P}" width="${R}" height="${M}"/>`)}u(this,hm)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${m})`}_createPopup(e=null){const{data:n}=this;let r,i;e?(r={str:e.text},i=e.date):(r=n.contentsObj,i=n.modificationDate),S(this,Ki,new PT({data:{color:n.color,titleObj:n.titleObj,modificationDate:i,contentsObj:r,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(u(this,Ki)||this.popup||this.data.popupRef)}get extraPopupElement(){return u(this,Ki)}render(){Ge("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:o,exportValues:a}of i){if(s===-1||o===n)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Mh.has(c)){me(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:l,domElement:c})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,o=i.getAttribute("data-element-id");o!==n&&Mh.has(i)&&r.push({id:o,exportValue:s,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Hd=new WeakMap,hm=new WeakMap,Ki=new WeakMap,G0=new WeakSet,TT=function(e){const{container:{style:n},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}}}=this;r==null||r.splice(0,4,...e),n.left=`${100*(e[0]-a)/s}%`,n.top=`${100*(o-e[3]+l)/o}%`,i===0?(n.width=`${100*(e[2]-e[0])/s}%`,n.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)};let Mt=iN;class Tfe extends Mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var xi,Ou,OV,LV;class KI extends Mt{constructor(n,r=null){super(n,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});A(this,xi);this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",n.id);let s=!1;return n.url?(r.addLinkAttributes(i,n.url,n.newWindow),s=!0):n.action?(this._bindNamedAction(i,n.action,n.overlaidText),s=!0):n.attachment?(T(this,xi,OV).call(this,i,n.attachment,n.overlaidText,n.attachmentDest),s=!0):n.setOCGState?(T(this,xi,LV).call(this,i,n.setOCGState,n.overlaidText),s=!0):n.dest?(this._bindLink(i,n.dest,n.overlaidText),s=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,n),s=!0),n.resetForm?(this._bindResetFormAction(i,n.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(n,r,i=""){n.href=this.linkService.getDestinationHash(r),n.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&T(this,xi,Ou).call(this),i&&(n.title=i)}_bindNamedAction(n,r,i=""){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(r),!1),i&&(n.title=i),T(this,xi,Ou).call(this)}_bindJSAction(n,r){n.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(r.actions)){const o=i.get(s);o&&(n[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:s}}),!1})}r.overlaidText&&(n.title=r.overlaidText),n.onclick||(n.onclick=()=>!1),T(this,xi,Ou).call(this)}_bindResetFormAction(n,r){const i=n.onclick;if(i||(n.href=this.linkService.getAnchorUrl("")),T(this,xi,Ou).call(this),!this._fieldObjects){me('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(n.onclick=()=>!1);return}n.onclick=()=>{var h;i==null||i();const{fields:s,refs:o,include:a}=r,l=[];if(s.length!==0||o.length!==0){const f=new Set(o);for(const p of s){const m=this._fieldObjects[p]||[];for(const{id:g}of m)f.add(g)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===a&&l.push(m)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const c=this.annotationStorage,d=[];for(const f of l){const{id:p}=f;switch(d.push(p),f.type){case"text":{const g=f.defaultValue||"";c.setValue(p,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;c.setValue(p,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";c.setValue(p,{value:g});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Mh.has(m)){me(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}xi=new WeakSet,Ou=function(){this.container.setAttribute("data-internal-link","")},OV=function(n,r,i="",s=null){n.href=this.linkService.getAnchorUrl(""),r.description?n.title=r.description:i&&(n.title=i),n.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(r.content,r.filename,s),!1},T(this,xi,Ou).call(this)},LV=function(n,r,i=""){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(r),!1),i&&(n.title=i),T(this,xi,Ou).call(this)};class Pfe extends Mt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class zh extends Mt{render(){return this.container}showElementAndHideCanvas(e){var n;this.data.hasOwnCanvas&&(((n=e.previousSibling)==null?void 0:n.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return vn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,r,i,s){r.includes("mouse")?e.addEventListener(r,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var a;if(r==="blur"){if(!n.focused||!o.relatedTarget)return;n.focused=!1}else if(r==="focus"){if(n.focused)return;n.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o)}}))})}_setEventListeners(e,n,r,i){var s,o,a;for(const[l,c]of r)(c==="Action"||(s=this.data.actions)!=null&&s[c])&&((c==="Focus"||c==="Blur")&&(n||(n={focused:!1})),this._setEventListener(e,n,l,c,i),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,n,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":re.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Cfe,s=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(c/(fA*i))||1,h=c/d;o=Math.min(i,l(h/fA))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(c/fA))}s.fontSize=`calc(${o}px * var(--total-scale-factor))`,s.color=re.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class Rfe extends zh{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,r,i){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[n]=r),s.setValue(o.id,{[i]:r})}render(){var i,s;const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(n,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",c??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Mh.add(r),this.contentElement=r,r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:p}=this.data,m=!!f&&this.enableScripting;h&&(r.title=h),this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",v=>{e.setValue(n,{value:v.target.value}),this.setPropertyOnSiblings(r,"value",v.target.value,"value"),d.formattedValue=null}),r.addEventListener("resetform",v=>{const y=this.data.defaultFieldValue??"";r.value=d.userValue=y,d.formattedValue=null});let g=v=>{const{formattedValue:y}=d;y!=null&&(v.target.value=y),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",y=>{var b;if(d.focused)return;const{target:w}=y;if(m&&(w.type=f,p&&(w.step=p)),d.userValue){const k=d.userValue;if(m)if(f==="time"){const _=new Date(k),C=[_.getHours(),_.getMinutes(),_.getSeconds()];w.value=C.map(P=>P.toString().padStart(2,"0")).join(":")}else w.value=new Date(k-_fe).toISOString().split(f==="date"?"T":".",1)[0];else w.value=k}d.lastCommittedValue=w.value,d.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(d.focused=!0)}),r.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const w={value(b){d.userValue=b.detail.value??"",m||e.setValue(n,{value:d.userValue.toString()}),b.target.value=d.userValue},formattedValue(b){const{formattedValue:k}=b.detail;d.formattedValue=k,k!=null&&b.target!==document.activeElement&&(b.target.value=k);const _={formattedValue:k};m&&(_.value=k),e.setValue(n,_)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var P;const{charLimit:k}=b.detail,{target:_}=b;if(k===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",k);let C=d.userValue;!C||C.length<=k||(C=C.slice(0,k),_.value=d.userValue=C,e.setValue(n,{value:C}),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(w,y)}),r.addEventListener("keydown",y=>{var k;d.commitKey=1;let w=-1;if(y.key==="Escape"?w=0:y.key==="Enter"&&!this.data.multiLine?w=2:y.key==="Tab"&&(d.commitKey=3),w===-1)return;const{value:b}=y.target;d.lastCommittedValue!==b&&(d.lastCommittedValue=b,d.userValue=b,(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:b,willCommit:!0,commitKey:w,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const v=g;g=null,r.addEventListener("blur",y=>{var k,_;if(!d.focused||!y.relatedTarget)return;(k=this.data.actions)!=null&&k.Blur||(d.focused=!1);const{target:w}=y;let{value:b}=w;if(m){if(b&&f==="time"){const C=b.split(":").map(P=>parseInt(P,10));b=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),w.step=""}else b.includes("T")||(b=`${b}T00:00`),b=new Date(b).valueOf();w.type="text"}d.userValue=b,d.lastCommittedValue!==b&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:b,willCommit:!0,commitKey:d.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}})),v(y)}),(s=this.data.actions)!=null&&s.Keystroke&&r.addEventListener("beforeinput",y=>{var M;d.lastCommittedValue=null;const{data:w,target:b}=y,{value:k,selectionStart:_,selectionEnd:C}=b;let P=_,R=C;switch(y.inputType){case"deleteWordBackward":{const I=k.substring(0,_).match(/\w*[^\w]*$/);I&&(P-=I[0].length);break}case"deleteWordForward":{const I=k.substring(_).match(/^[^\w]*\w*/);I&&(R+=I[0].length);break}case"deleteContentBackward":_===C&&(P-=1);break;case"deleteContentForward":_===C&&(R+=1);break}y.preventDefault(),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:k,change:w||"",willCommit:!1,selStart:P,selEnd:R}})}),this._setEventListeners(r,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(g&&r.addEventListener("blur",g),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${y}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Ife extends zh{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Nfe extends zh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.exportValue===n.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Mh.add(s),s.setAttribute("data-element-id",r),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=n.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",n.exportValue),s.tabIndex=0,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r)){const d=l&&c.exportValue===n.exportValue;c.domElement&&(c.domElement.checked=d),e.setValue(c.id,{value:d})}e.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{const a=n.defaultFieldValue||"Off";o.target.checked=a===n.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class jV extends zh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.fieldValue===n.buttonValue}).value;if(typeof i=="string"&&(i=i!==n.buttonValue,e.setValue(r,{value:i})),i)for(const o of this._getElementsByName(n.fieldName,r))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(Mh.add(s),s.setAttribute("data-element-id",r),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=n.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{const a=n.defaultFieldValue;o.target.checked=a!=null&&a===n.buttonValue}),this.enableScripting&&this.hasJSActions){const o=n.buttonValue;s.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const d=o===c.detail.value;for(const h of this._getElementsByName(c.target.name)){const f=d&&h.id===r;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Dfe extends KI{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class Mfe extends zh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,r=e.getValue(n,{value:this.data.fieldValue}),i=document.createElement("select");Mh.add(i),i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,r.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),s=!1),i.append(h)}let o=null;if(s){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),i.prepend(d),o=()=>{d.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=d=>{const h=d?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let l=a(!1);const c=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",d=>{const h={value(f){o==null||o();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const g of i.options)g.selected=m.has(g.value);e.setValue(n,{value:a(!0)}),l=a(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,m=f.detail.remove;p[m].selected=!1,i.remove(m),p.length>0&&Array.prototype.findIndex.call(p,v=>v.selected)===-1&&(p[0].selected=!0),e.setValue(n,{value:a(!0),items:c(f)}),l=a(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(n,{value:null,items:[]}),l=a(!1)},insert(f){const{index:p,displayValue:m,exportValue:g}=f.detail.insert,v=i.children[p],y=document.createElement("option");y.textContent=m,y.value=g,v?v.before(y):i.append(y),e.setValue(n,{value:a(!0),items:c(f)}),l=a(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const m of p){const{displayValue:g,exportValue:v}=m,y=document.createElement("option");y.textContent=g,y.value=v,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(n,{value:a(!0),items:c(f)}),l=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);e.setValue(n,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),i.addEventListener("input",d=>{var p;const h=a(!0),f=a(!1);e.setValue(n,{value:h}),d.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:l,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):i.addEventListener("input",function(d){e.setValue(n,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var q0,RT;class PT extends Mt{constructor(n){const{data:r,elements:i,parent:s}=n,o=!!s._commentManager;super(n,{isRenderable:!o&&Mt._hasPopupData(r)});A(this,q0);if(this.elements=i,o&&Mt._hasPopupData(r)){const a=this.popup=T(this,q0,RT).call(this);for(const l of i)l.popup=a}else this.popup=null}render(){const{container:n}=this;n.classList.add("popupAnnotation"),n.role="comment";const r=this.popup=T(this,q0,RT).call(this),i=[];for(const s of this.elements)s.popup=r,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${jf}${s}`).join(",")),this.container}}q0=new WeakSet,RT=function(){return new Ofe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var si,Ac,wS,bS,fm,pm,Bt,ko,Cc,Wd,mm,gm,Eo,oi,Oa,La,$t,ja,_c,K0,Fa,ym,Gd,Tc,xn,Pc,Ee,Dx,IT,NT,DT,Mx,MT,FV,BV,$V,UV,Ox,Lx,OT;class Ofe{constructor({container:e,color:n,elements:r,titleObj:i,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:c,parentRect:d,open:h,commentManager:f=null}){A(this,Ee);A(this,si,null);A(this,Ac,T(this,Ee,$V).bind(this));A(this,wS,T(this,Ee,OT).bind(this));A(this,bS,T(this,Ee,Lx).bind(this));A(this,fm,T(this,Ee,Ox).bind(this));A(this,pm,null);A(this,Bt,null);A(this,ko,null);A(this,Cc,null);A(this,Wd,null);A(this,mm,null);A(this,gm,null);A(this,Eo,!1);A(this,oi,null);A(this,Oa,null);A(this,La,null);A(this,$t,null);A(this,ja,null);A(this,_c,null);A(this,K0,null);A(this,Fa,null);A(this,ym,null);A(this,Gd,null);A(this,Tc,!1);A(this,xn,null);A(this,Pc,null);S(this,Bt,e),S(this,ym,i),S(this,ko,o),S(this,Fa,a),S(this,mm,l),S(this,pm,n),S(this,K0,c),S(this,gm,d),S(this,Wd,r),S(this,si,f),S(this,xn,r[0]),S(this,Cc,X1.toDateObject(s)),this.trigger=r.flatMap(p=>p.getElementsToTriggerPopup()),f||(T(this,Ee,Dx).call(this),u(this,Bt).hidden=!0,h&&T(this,Ee,Ox).call(this))}renderCommentButton(){if(u(this,$t)){u(this,$t).parentNode||u(this,xn).container.after(u(this,$t));return}if(u(this,ja)||T(this,Ee,IT).call(this),!u(this,ja))return;const{signal:e}=S(this,Oa,new AbortController),n=u(this,xn).hasOwnCommentButton,r=()=>{u(this,si).toggleCommentPopup(this,!0,void 0,!n)},i=()=>{u(this,si).toggleCommentPopup(this,!1,!0,!n)},s=()=>{u(this,si).toggleCommentPopup(this,!1,!1)};if(n){S(this,$t,u(this,xn).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",u(this,Ac),{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",s,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=S(this,$t,document.createElement("button"));o.className="annotationCommentButton";const a=u(this,xn).container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),T(this,Ee,DT).call(this),T(this,Ee,NT).call(this),o.addEventListener("keydown",u(this,Ac),{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",s,{signal:e}),a.after(o)}}get commentButtonColor(){const{color:e,opacity:n}=u(this,xn).commentData;return e?u(this,mm)._commentManager.makeCommentColor(e,n):null}focusCommentButton(){setTimeout(()=>{var e;(e=u(this,$t))==null||e.focus()},0)}getData(){const{richText:e,color:n,opacity:r,creationDate:i,modificationDate:s}=u(this,xn).commentData;return{contentsObj:{str:this.comment},richText:e,color:n,opacity:r,creationDate:i,modificationDate:s}}get elementBeforePopup(){return u(this,$t)}get comment(){return u(this,Pc)||S(this,Pc,u(this,xn).commentText),u(this,Pc)}set comment(e){e!==this.comment&&(u(this,xn).commentText=S(this,Pc,e))}focus(){var e;(e=u(this,xn).container)==null||e.focus()}get parentBoundingClientRect(){return u(this,xn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:n}){u(this,$t)&&(u(this,$t).classList.toggle("selected",e),u(this,$t).ariaExpanded=n)}setSelectedCommentButton(e){u(this,$t).classList.toggle("selected",e)}get commentPopupPosition(){if(u(this,_c))return u(this,_c);const{x:e,y:n,height:r}=u(this,$t).getBoundingClientRect(),{x:i,y:s,width:o,height:a}=u(this,xn).layer.getBoundingClientRect();return[(e-i)/o,(n+r-s)/a]}set commentPopupPosition(e){S(this,_c,e)}hasDefaultPopupPosition(){return u(this,_c)===null}get commentButtonPosition(){return u(this,ja)}get commentButtonWidth(){return u(this,$t).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[n,r]=u(this,_c)||this.commentButtonPosition.map(c=>c/100),i=this.parentBoundingClientRect,{x:s,y:o,width:a,height:l}=i;u(this,si).showDialog(null,this,s+n*a,o+r*l,{...e,parentDimensions:i})}render(){var r,i;if(u(this,oi))return;const e=S(this,oi,document.createElement("div"));if(e.className="popup",u(this,pm)){const s=e.style.outlineColor=re.makeHexColor(...u(this,pm));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const n=document.createElement("span");if(n.className="header",(r=u(this,ym))!=null&&r.str){const s=document.createElement("span");s.className="title",n.append(s),{dir:s.dir,str:s.textContent}=u(this,ym)}if(e.append(n),u(this,Cc)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,Cc).valueOf()})),s.dateTime=u(this,Cc).toISOString(),n.append(s)}p5({html:u(this,Ee,Mx)||u(this,ko).str,dir:(i=u(this,ko))==null?void 0:i.dir,className:"popupContent"},e),u(this,Bt).append(e)}updateEdited({rect:e,popup:n,deleted:r}){var i;if(u(this,si)){r?(this.remove(),S(this,Pc,null)):n&&(n.deleted?this.remove():(T(this,Ee,DT).call(this),S(this,Pc,n.text))),e&&(S(this,ja,null),T(this,Ee,IT).call(this),T(this,Ee,NT).call(this));return}if(r||n!=null&&n.deleted){this.remove();return}T(this,Ee,Dx).call(this),u(this,Gd)||S(this,Gd,{contentsObj:u(this,ko),richText:u(this,Fa)}),e&&S(this,La,null),n&&n.text&&(S(this,Fa,T(this,Ee,BV).call(this,n.text)),S(this,Cc,X1.toDateObject(n.date)),S(this,ko,null)),(i=u(this,oi))==null||i.remove(),S(this,oi,null)}resetEdited(){var e;u(this,Gd)&&({contentsObj:Lt(this,ko)._,richText:Lt(this,Fa)._}=u(this,Gd),S(this,Gd,null),(e=u(this,oi))==null||e.remove(),S(this,oi,null),S(this,La,null))}remove(){var e,n,r;if((e=u(this,Oa))==null||e.abort(),S(this,Oa,null),(n=u(this,oi))==null||n.remove(),S(this,oi,null),S(this,Tc,!1),S(this,Eo,!1),(r=u(this,$t))==null||r.remove(),S(this,$t,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){S(this,Tc,this.isVisible),u(this,Tc)&&(u(this,Bt).hidden=!0)}maybeShow(){u(this,si)||(T(this,Ee,Dx).call(this),u(this,Tc)&&(u(this,oi)||T(this,Ee,Lx).call(this),S(this,Tc,!1),u(this,Bt).hidden=!1))}get isVisible(){return u(this,si)?!1:u(this,Bt).hidden===!1}}si=new WeakMap,Ac=new WeakMap,wS=new WeakMap,bS=new WeakMap,fm=new WeakMap,pm=new WeakMap,Bt=new WeakMap,ko=new WeakMap,Cc=new WeakMap,Wd=new WeakMap,mm=new WeakMap,gm=new WeakMap,Eo=new WeakMap,oi=new WeakMap,Oa=new WeakMap,La=new WeakMap,$t=new WeakMap,ja=new WeakMap,_c=new WeakMap,K0=new WeakMap,Fa=new WeakMap,ym=new WeakMap,Gd=new WeakMap,Tc=new WeakMap,xn=new WeakMap,Pc=new WeakMap,Ee=new WeakSet,Dx=function(){var n;if(u(this,Oa))return;S(this,Oa,new AbortController);const{signal:e}=u(this,Oa);for(const r of this.trigger)r.addEventListener("click",u(this,fm),{signal:e}),r.addEventListener("pointerenter",u(this,bS),{signal:e}),r.addEventListener("pointerleave",u(this,wS),{signal:e}),r.classList.add("popupTriggerArea");for(const r of u(this,Wd))(n=r.container)==null||n.addEventListener("keydown",u(this,Ac),{signal:e})},IT=function(){const e=u(this,Wd).find(n=>n.hasCommentButton);e&&S(this,ja,e._normalizePoint(e.commentButtonPosition))},NT=function(){if(u(this,xn).extraPopupElement&&!u(this,xn).editor)return;u(this,$t)||this.renderCommentButton();const[e,n]=u(this,ja),{style:r}=u(this,$t);r.left=`calc(${e}%)`,r.top=`calc(${n}% - var(--comment-button-dim))`},DT=function(){u(this,xn).extraPopupElement||(u(this,$t)||this.renderCommentButton(),u(this,$t).style.backgroundColor=this.commentButtonColor||"")},Mx=function(){const e=u(this,Fa),n=u(this,ko);return e!=null&&e.str&&(!(n!=null&&n.str)||n.str===e.str)&&u(this,Fa).html||null},MT=function(){var e,n,r;return((r=(n=(e=u(this,Ee,Mx))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:r.fontSize)||0},FV=function(){var e,n,r;return((r=(n=(e=u(this,Ee,Mx))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:r.color)||null},BV=function(e){const n=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},i={style:{color:u(this,Ee,FV),fontSize:u(this,Ee,MT)?`calc(${u(this,Ee,MT)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))n.push({name:"span",value:s,attributes:i});return r},$V=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Eo))&&T(this,Ee,Ox).call(this)},UV=function(){if(u(this,La)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:s}}}=u(this,mm);let o=!!u(this,gm),a=o?u(this,gm):u(this,K0);for(const m of u(this,Wd))if(!a||re.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const l=re.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),d=o?a[2]-a[0]+5:0,h=l[0]+d,f=l[1];S(this,La,[100*(h-i)/n,100*(f-s)/r]);const{style:p}=u(this,Bt);p.left=`${u(this,La)[0]}%`,p.top=`${u(this,La)[1]}%`},Ox=function(){if(u(this,si)){u(this,si).toggleCommentPopup(this,!1);return}S(this,Eo,!u(this,Eo)),u(this,Eo)?(T(this,Ee,Lx).call(this),u(this,Bt).addEventListener("click",u(this,fm)),u(this,Bt).addEventListener("keydown",u(this,Ac))):(T(this,Ee,OT).call(this),u(this,Bt).removeEventListener("click",u(this,fm)),u(this,Bt).removeEventListener("keydown",u(this,Ac)))},Lx=function(){u(this,oi)||this.render(),this.isVisible?u(this,Eo)&&u(this,Bt).classList.add("focused"):(T(this,Ee,UV).call(this),u(this,Bt).hidden=!1,u(this,Bt).style.zIndex=parseInt(u(this,Bt).style.zIndex)+1e3)},OT=function(){u(this,Bt).classList.remove("focused"),!(u(this,Eo)||!this.isVisible)&&(u(this,Bt).hidden=!0,u(this,Bt).style.zIndex=parseInt(u(this,Bt).style.zIndex)-1e3)};class zV extends Mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=we.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const r=document.createElement("span");r.textContent=n,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var X0;class Lfe extends Mt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});A(this,X0,null)}render(){this.container.classList.add("lineAnnotation");const{data:n,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),o=S(this,X0,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),o.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),o.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),o.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),o.setAttribute("stroke-width",n.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!n.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,X0)}addHighlightArea(){this.container.classList.add("highlightArea")}}X0=new WeakMap;var Y0;class jfe extends Mt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});A(this,Y0,null)}render(){this.container.classList.add("squareAnnotation");const{data:n,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),o=n.borderStyle.width,a=S(this,Y0,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",r-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!n.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Y0)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y0=new WeakMap;var Q0;class Ffe extends Mt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});A(this,Q0,null)}render(){this.container.classList.add("circleAnnotation");const{data:n,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),o=n.borderStyle.width,a=S(this,Q0,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",i/2),a.setAttribute("rx",r/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!n.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Q0)}addHighlightArea(){this.container.classList.add("highlightArea")}}Q0=new WeakMap;var J0;class VV extends Mt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});A(this,J0,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,vertices:r,borderStyle:i,popupRef:s},width:o,height:a}=this;if(!r)return this.container;const l=this.svgFactory.create(o,a,!0);let c=[];for(let h=0,f=r.length;h<f;h+=2){const p=r[h]-n[0],m=n[3]-r[h+1];c.push(`${p},${m}`)}c=c.join(" ");const d=S(this,J0,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",c),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,J0)}addHighlightArea(){this.container.classList.add("highlightArea")}}J0=new WeakMap;class Bfe extends VV{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $fe extends Mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Z0,qd,ew,LT;class XI extends Mt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});A(this,ew);A(this,Z0,null);A(this,qd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?we.HIGHLIGHT:we.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,rotation:r,inkLists:i,borderStyle:s,popupRef:o}}=this,{transform:a,width:l,height:c}=T(this,ew,LT).call(this,r,n),d=this.svgFactory.create(l,c,!0),h=S(this,Z0,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let f=0,p=i.length;f<p;f++){const m=this.svgFactory.createElement(this.svgElementName);u(this,qd).push(m),m.setAttribute("points",i[f].join(",")),h.append(m)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(n){super.updateEdited(n);const{thickness:r,points:i,rect:s}=n,o=u(this,Z0);if(r>=0&&o.setAttribute("stroke-width",r||1),i)for(let a=0,l=u(this,qd).length;a<l;a++)u(this,qd)[a].setAttribute("points",i[a].join(","));if(s){const{transform:a,width:l,height:c}=T(this,ew,LT).call(this,this.data.rotation,s);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return u(this,qd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Z0=new WeakMap,qd=new WeakMap,ew=new WeakSet,LT=function(n,r){switch(n){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class HV extends Mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=we.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Ufe extends Mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class zfe extends Mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Vfe extends Mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class WV extends Mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=we.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var tw,nw,jT;class Hfe extends Mt{constructor(n){var i;super(n,{isRenderable:!0});A(this,nw);A(this,tw,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:n,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",T(this,nw,jT).bind(this)),S(this,tw,i);const{isMac:s}=vn.platform;return n.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&T(this,nw,jT).call(this)}),!r.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),n.append(i),n}getElementsToTriggerPopup(){return u(this,tw)}addHighlightArea(){this.container.classList.add("highlightArea")}}tw=new WeakMap,nw=new WeakSet,jT=function(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.content,this.filename)};var Kd,Xd,vm,Rc,rw,Yd,ai,iw,Za,jx,BT;const sN=class sN{constructor({div:e,accessibilityManager:n,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:o,structTreeLayer:a,commentManager:l,linkService:c,annotationStorage:d}){A(this,Za);A(this,Kd,null);A(this,Xd,null);A(this,vm,null);A(this,Rc,new Map);A(this,rw,null);A(this,Yd,null);A(this,ai,[]);A(this,iw,!1);this.div=e,S(this,Kd,n),S(this,Xd,r),S(this,rw,a||null),S(this,Yd,c||null),S(this,vm,d||new WI),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return u(this,Rc).size>0}async render(e){var a;const{annotations:n}=e,r=this.div;Nh(r,this.viewport);const i=new Map,s=[],o={data:null,layer:r,linkService:u(this,Yd),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new rS,annotationStorage:u(this,vm),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of n){if(l.noHTML)continue;const c=l.annotationType===en.POPUP;if(c){const f=i.get(l.id);if(!f)continue;if(!this._commentManager){s.push(l);continue}o.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=bA.create(o);if(!d.isRenderable)continue;if(!c&&(u(this,ai).push(d),l.popupRef)){const f=i.get(l.popupRef);f?f.push(d):i.set(l.popupRef,[d])}const h=d.render();l.hidden&&(h.style.visibility="hidden"),d._isEditable&&(u(this,Rc).set(d.data.id,d),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(d))}await T(this,Za,jx).call(this);for(const l of s){const c=o.elements=i.get(l.id);o.data=l;const d=bA.create(o);if(!d.isRenderable)continue;const h=d.render();d.contentElement.id=`${jf}${l.id}`,l.hidden&&(h.style.visibility="hidden"),c.at(-1).container.after(h)}T(this,Za,BT).call(this)}async addLinkAnnotations(e){const n={data:null,layer:this.div,linkService:u(this,Yd),svgFactory:new rS,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=sN._defaultBorderStyle),n.data=r;const i=bA.create(n);i.isRenderable&&(i.render(),i.contentElement.id=`${jf}${r.id}`,u(this,ai).push(i))}await T(this,Za,jx).call(this)}update({viewport:e}){const n=this.div;this.viewport=e,Nh(n,{rotation:e.rotation}),T(this,Za,BT).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(u(this,Rc).values())}getEditableAnnotation(e){return u(this,Rc).get(e)}addFakeAnnotation(e){const{div:n}=this,{id:r,rotation:i}=e,s=new Tfe({data:{id:r,rect:e.getPDFRect(),rotation:i},editor:e,layer:n,parent:this,enableComment:!!this._commentManager,linkService:u(this,Yd),annotationStorage:u(this,vm)});return s.render(),s.contentElement.id=`${jf}${r}`,s.createOrUpdatePopup(),u(this,ai).push(s),s}removeAnnotation(e){var i;const n=u(this,ai).findIndex(s=>s.data.id===e);if(n<0)return;const[r]=u(this,ai).splice(n,1);(i=u(this,Kd))==null||i.removePointerInTextLayer(r.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const n of e)n.updateFakeAnnotationElement(this);T(this,Za,jx).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return ge(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:df.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Kd=new WeakMap,Xd=new WeakMap,vm=new WeakMap,Rc=new WeakMap,rw=new WeakMap,Yd=new WeakMap,ai=new WeakMap,iw=new WeakMap,Za=new WeakSet,jx=async function(){var r,i,s;if(u(this,ai).length===0)return;this.div.replaceChildren();const e=[];if(!u(this,iw)){S(this,iw,!0);for(const{contentElement:o,data:{id:a}}of u(this,ai)){const l=o.id=`${jf}${a}`;e.push((r=u(this,rw))==null?void 0:r.getAriaAttributes(l).then(c=>{if(c)for(const[d,h]of c)o.setAttribute(d,h)}))}}u(this,ai).sort(({data:{rect:[o,a,l,c]}},{data:{rect:[d,h,f,p]}})=>{if(o===l&&a===c)return 1;if(d===f&&h===p)return-1;const m=c,g=a,v=(a+c)/2,y=p,w=h,b=(h+p)/2;if(v>=y&&b<=g)return-1;if(b>=m&&v<=w)return 1;const k=(o+l)/2,_=(d+f)/2;return k-_});const n=document.createDocumentFragment();for(const o of u(this,ai))n.append(o.container),this._commentManager?(s=((i=o.extraPopupElement)==null?void 0:i.popup)||o.popup)==null||s.renderCommentButton():o.extraPopupElement&&n.append(o.extraPopupElement.render());if(this.div.append(n),await Promise.all(e),u(this,Kd))for(const o of u(this,ai))u(this,Kd).addPointerInTextLayer(o.contentElement,!1)},BT=function(){var n;if(!u(this,Xd))return;const e=this.div;for(const[r,i]of u(this,Xd)){const s=e.querySelector(`[data-annotation-id="${r}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:o}=s;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):s.append(i);const a=u(this,Rc).get(r);a&&(a._hasNoCanvas?((n=this._annotationEditorUIManager)==null||n.setMissingCanvas(r,s.id,i),a._hasNoCanvas=!1):a.canvas=i)}u(this,Xd).clear()};let FT=sN;const Hb=/\r\n?|\n/g;var li,sw,Qd,ci,an,GV,qV,KV,Fx,el,Bx,$x,XV,UT,YV;const wt=class wt extends pt{constructor(n){super({...n,name:"freeTextEditor"});A(this,an);A(this,li,"");A(this,sw,`${this.id}-editor`);A(this,Qd,null);A(this,ci);H(this,"_colorPicker",null);this.color=n.color||wt._defaultColor||pt._defaultLineColor,S(this,ci,n.fontSize||wt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const n=wt.prototype,r=o=>o.isEmpty(),i=Dh.TRANSLATE_SMALL,s=Dh.TRANSLATE_BIG;return ge(this,"_keyboardManager",new Gw([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],n.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],n._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n._translateEmpty,{args:[-s,0],checker:r}],[["ArrowRight","mac+ArrowRight"],n._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n._translateEmpty,{args:[s,0],checker:r}],[["ArrowUp","mac+ArrowUp"],n._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n._translateEmpty,{args:[0,-s],checker:r}],[["ArrowDown","mac+ArrowDown"],n._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n._translateEmpty,{args:[0,s],checker:r}]]))}static initialize(n,r){pt.initialize(n,r);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,r){switch(n){case Me.FREETEXT_SIZE:wt._defaultFontSize=r;break;case Me.FREETEXT_COLOR:wt._defaultColor=r;break}}updateParams(n,r){switch(n){case Me.FREETEXT_SIZE:T(this,an,GV).call(this,r);break;case Me.FREETEXT_COLOR:T(this,an,qV).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Me.FREETEXT_SIZE,wt._defaultFontSize],[Me.FREETEXT_COLOR,wt._defaultColor||pt._defaultLineColor]]}get propertiesToUpdate(){return[[Me.FREETEXT_SIZE,u(this,ci)],[Me.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new nS(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Me.FREETEXT_COLOR}onUpdatedColor(){var n;this.editorDiv.style.color=this.color,(n=this._colorPicker)==null||n.update(this.color),super.onUpdatedColor()}_translateEmpty(n,r){this._uiManager.translateSelectedEditors(n,r,!0)}getInitialTranslation(){const n=this.parentScale;return[-wt._internalPadding*n,-(wt._internalPadding+u(this,ci))*n]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,Qd,new AbortController);const n=this._uiManager.combinedSignal(u(this,Qd));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:n}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:n}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:n}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:n}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:n}),!0}disableEditMode(){var n;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,sw)),this._isDraggable=!0,(n=u(this,Qd))==null||n.abort(),S(this,Qd,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(n){this._focusEventsAllowed&&(super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(n){var r;this.width||(this.enableEditMode(),n&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const n=u(this,li),r=S(this,li,T(this,an,KV).call(this).trimEnd());if(n===r)return;const i=s=>{if(S(this,li,s),!s){this.remove();return}T(this,an,$x).call(this),this._uiManager.rebuild(this),T(this,an,Fx).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(n)},mustExec:!1}),T(this,an,Fx).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enterInEditMode(),n.preventDefault())}editorDivKeydown(n){wt._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let n,r;(this._isCopy||this.annotationElementId)&&(n=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,sw)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${u(this,ci)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[d,h]=this.pageDimensions,[f,p]=this.pageTranslation;let m,g;switch(this.rotation){case 0:m=n+(a[0]-f)/d,g=r+this.height-(a[1]-p)/h;break;case 90:m=n+(a[0]-f)/d,g=r-(a[1]-p)/h,[l,c]=[c,-l];break;case 180:m=n-this.width+(a[0]-f)/d,g=r-(a[1]-p)/h,[l,c]=[-l,-c];break;case 270:m=n+(a[0]-f-this.height*h)/d,g=r+(a[1]-p-this.width*d)/h,[l,c]=[-c,l];break}this.setAt(m*s,g*o,l,c)}else this._moveAfterPaste(n,r);T(this,an,$x).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(n){var m,g,v;const r=n.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;n.preventDefault();const s=T(m=wt,el,UT).call(m,r.getData("text")||"").replaceAll(Hb,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,d=[],h=[];if(l.nodeType===Node.TEXT_NODE){const y=l.parentElement;if(h.push(l.nodeValue.slice(c).replaceAll(Hb,"")),y!==this.editorDiv){let w=d;for(const b of this.editorDiv.childNodes){if(b===y){w=h;continue}w.push(T(g=wt,el,Bx).call(g,b))}}d.push(l.nodeValue.slice(0,c).replaceAll(Hb,""))}else if(l===this.editorDiv){let y=d,w=0;for(const b of this.editorDiv.childNodes)w++===c&&(y=h),y.push(T(v=wt,el,Bx).call(v,b))}S(this,li,`${d.join(`
`)}${s}${h.join(`
`)}`),T(this,an,$x).call(this);const f=new Range;let p=Math.sumPrecise(d.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const w=y.nodeValue.length;if(p<=w){f.setStart(y,p),f.setEnd(y,p);break}p-=w}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const n=wt._internalPadding*this.parentScale;return this.getRect(n,n)}static async deserialize(n,r,i){var a;let s=null;if(n instanceof zV){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:h,id:f,popupRef:p,richText:m,contentsObj:g,creationDate:v,modificationDate:y},textContent:w,textPosition:b,parent:{page:{pageNumber:k}}}=n;if(!w||w.length===0)return null;s=n={annotationType:we.FREETEXT,color:Array.from(c),fontSize:l,value:w.join(`
`),position:b,pageIndex:k-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(g==null?void 0:g.str)||null,richText:m,creationDate:v,modificationDate:y}}const o=await super.deserialize(n,r,i);return S(o,ci,n.fontSize),o.color=re.makeHexColor(...n.color),S(o,li,T(a=wt,el,UT).call(a,n.value)),o._initialData=s,n.comment&&o.setCommentData(n),o}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=pt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(n),{color:r,fontSize:u(this,ci),value:T(this,an,XV).call(this)});return this.addComment(i),n?(i.isCopy=!0,i):this.annotationElementId&&!T(this,an,YV).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(n){const r=super.renderAnnotationElement(n);if(!r)return null;const{style:i}=r;i.fontSize=`calc(${u(this,ci)}px * var(--total-scale-factor))`,i.color=this.color,r.replaceChildren();for(const s of u(this,li).split(`
`)){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),r.append(o)}return n.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:u(this,li)}}),r}resetAnnotationElement(n){super.resetAnnotationElement(n),n.resetEdited()}};li=new WeakMap,sw=new WeakMap,Qd=new WeakMap,ci=new WeakMap,an=new WeakSet,GV=function(n){const r=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-u(this,ci))*this.parentScale),S(this,ci,s),T(this,an,Fx).call(this)},i=u(this,ci);this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Me.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},qV=function(n){const r=s=>{this.color=s,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Me.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},KV=function(){var i;const n=[];this.editorDiv.normalize();let r=null;for(const s of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(n.push(T(i=wt,el,Bx).call(i,s)),r=s);return n.join(`
`)},Fx=function(){const[n,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/n,this.height=i.height/r):(this.width=i.height/n,this.height=i.width/r),this.fixAndSetPosition()},el=new WeakSet,Bx=function(n){return(n.nodeType===Node.TEXT_NODE?n.nodeValue:n.innerText).replaceAll(Hb,"")},$x=function(){if(this.editorDiv.replaceChildren(),!!u(this,li))for(const n of u(this,li).split(`
`)){const r=document.createElement("div");r.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(r)}},XV=function(){return u(this,li).replaceAll(""," ")},UT=function(n){return n.replaceAll(" ","")},YV=function(n){const{value:r,fontSize:i,color:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||n.value!==r||n.fontSize!==i||n.color.some((a,l)=>a!==s[l])||n.pageIndex!==o},A(wt,el),H(wt,"_freeTextDefaultContent",""),H(wt,"_internalPadding",0),H(wt,"_defaultColor",null),H(wt,"_defaultFontSize",10),H(wt,"_type","freetext"),H(wt,"_editorType",we.FREETEXT);let $T=wt;class se{toSVGPath(){Ge("Abstract method `toSVGPath` must be implemented.")}get box(){Ge("Abstract getter `box` must be implemented.")}serialize(e,n){Ge("Abstract method `serialize` must be implemented.")}static _rescale(e,n,r,i,s,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=n+e[a]*i,o[a+1]=r+e[a+1]*s;return o}static _rescaleAndSwap(e,n,r,i,s,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=n+e[a+1]*i,o[a+1]=r+e[a]*s;return o}static _translate(e,n,r,i){i||(i=new Float32Array(e.length));for(let s=0,o=e.length;s<o;s+=2)i[s]=n+e[s],i[s+1]=r+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,r,i,s){switch(s){case 90:return[1-n/r,e/i];case 180:return[1-e/r,1-n/i];case 270:return[n/r,1-e/i];default:return[e/r,n/i]}}static _normalizePagePoint(e,n,r){switch(r){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,r,i,s,o){return[(e+5*r)/6,(n+5*i)/6,(5*r+s)/6,(5*i+o)/6,(r+s)/2,(i+o)/2]}}H(se,"PRECISION",1e-4);var ui,Ms,wm,bm,Ao,Ae,Jd,Zd,ow,aw,xm,Sm,Ic,lw,xS,SS,gn,uy,QV,JV,ZV,eH,tH,nH;const oa=class oa{constructor({x:e,y:n},r,i,s,o,a=0){A(this,gn);A(this,ui);A(this,Ms,[]);A(this,wm);A(this,bm);A(this,Ao,[]);A(this,Ae,new Float32Array(18));A(this,Jd);A(this,Zd);A(this,ow);A(this,aw);A(this,xm);A(this,Sm);A(this,Ic,[]);S(this,ui,r),S(this,Sm,s*i),S(this,bm,o),u(this,Ae).set([NaN,NaN,NaN,NaN,e,n],6),S(this,wm,a),S(this,aw,u(oa,lw)*i),S(this,ow,u(oa,SS)*i),S(this,xm,i),u(this,Ic).push(e,n)}isEmpty(){return isNaN(u(this,Ae)[8])}add({x:e,y:n}){var M;S(this,Jd,e),S(this,Zd,n);const[r,i,s,o]=u(this,ui);let[a,l,c,d]=u(this,Ae).subarray(8,12);const h=e-c,f=n-d,p=Math.hypot(h,f);if(p<u(this,ow))return!1;const m=p-u(this,aw),g=m/p,v=g*h,y=g*f;let w=a,b=l;a=c,l=d,c+=v,d+=y,(M=u(this,Ic))==null||M.push(e,n);const k=-y/m,_=v/m,C=k*u(this,Sm),P=_*u(this,Sm);return u(this,Ae).set(u(this,Ae).subarray(2,8),0),u(this,Ae).set([c+C,d+P],4),u(this,Ae).set(u(this,Ae).subarray(14,18),12),u(this,Ae).set([c-C,d-P],16),isNaN(u(this,Ae)[6])?(u(this,Ao).length===0&&(u(this,Ae).set([a+C,l+P],2),u(this,Ao).push(NaN,NaN,NaN,NaN,(a+C-r)/s,(l+P-i)/o),u(this,Ae).set([a-C,l-P],14),u(this,Ms).push(NaN,NaN,NaN,NaN,(a-C-r)/s,(l-P-i)/o)),u(this,Ae).set([w,b,a,l,c,d],6),!this.isEmpty()):(u(this,Ae).set([w,b,a,l,c,d],6),Math.abs(Math.atan2(b-l,w-a)-Math.atan2(y,v))<Math.PI/2?([a,l,c,d]=u(this,Ae).subarray(2,6),u(this,Ao).push(NaN,NaN,NaN,NaN,((a+c)/2-r)/s,((l+d)/2-i)/o),[a,l,w,b]=u(this,Ae).subarray(14,18),u(this,Ms).push(NaN,NaN,NaN,NaN,((w+a)/2-r)/s,((b+l)/2-i)/o),!0):([w,b,a,l,c,d]=u(this,Ae).subarray(0,6),u(this,Ao).push(((w+5*a)/6-r)/s,((b+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+d)/6-i)/o,((a+c)/2-r)/s,((l+d)/2-i)/o),[c,d,a,l,w,b]=u(this,Ae).subarray(12,18),u(this,Ms).push(((w+5*a)/6-r)/s,((b+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+d)/6-i)/o,((a+c)/2-r)/s,((l+d)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Ao),n=u(this,Ms);if(isNaN(u(this,Ae)[6])&&!this.isEmpty())return T(this,gn,QV).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);T(this,gn,ZV).call(this,r);for(let i=n.length-6;i>=6;i-=6)isNaN(n[i])?r.push(`L${n[i+4]} ${n[i+5]}`):r.push(`C${n[i]} ${n[i+1]} ${n[i+2]} ${n[i+3]} ${n[i+4]} ${n[i+5]}`);return T(this,gn,JV).call(this,r),r.join(" ")}newFreeDrawOutline(e,n,r,i,s,o){return new rH(e,n,r,i,s,o)}getOutlines(){var h;const e=u(this,Ao),n=u(this,Ms),r=u(this,Ae),[i,s,o,a]=u(this,ui),l=new Float32Array((((h=u(this,Ic))==null?void 0:h.length)??0)+2);for(let f=0,p=l.length-2;f<p;f+=2)l[f]=(u(this,Ic)[f]-i)/o,l[f+1]=(u(this,Ic)[f+1]-s)/a;if(l[l.length-2]=(u(this,Jd)-i)/o,l[l.length-1]=(u(this,Zd)-s)/a,isNaN(r[6])&&!this.isEmpty())return T(this,gn,eH).call(this,l);const c=new Float32Array(u(this,Ao).length+24+u(this,Ms).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){c[f]=c[f+1]=NaN;continue}c[f]=e[f],c[f+1]=e[f+1]}d=T(this,gn,nH).call(this,c,d);for(let f=n.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(n[f+p])){c[d]=c[d+1]=NaN,d+=2;continue}c[d]=n[f+p],c[d+1]=n[f+p+1],d+=2}return T(this,gn,tH).call(this,c,d),this.newFreeDrawOutline(c,l,u(this,ui),u(this,xm),u(this,wm),u(this,bm))}};ui=new WeakMap,Ms=new WeakMap,wm=new WeakMap,bm=new WeakMap,Ao=new WeakMap,Ae=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,ow=new WeakMap,aw=new WeakMap,xm=new WeakMap,Sm=new WeakMap,Ic=new WeakMap,lw=new WeakMap,xS=new WeakMap,SS=new WeakMap,gn=new WeakSet,uy=function(){const e=u(this,Ae).subarray(4,6),n=u(this,Ae).subarray(16,18),[r,i,s,o]=u(this,ui);return[(u(this,Jd)+(e[0]-n[0])/2-r)/s,(u(this,Zd)+(e[1]-n[1])/2-i)/o,(u(this,Jd)+(n[0]-e[0])/2-r)/s,(u(this,Zd)+(n[1]-e[1])/2-i)/o]},QV=function(){const[e,n,r,i]=u(this,ui),[s,o,a,l]=T(this,gn,uy).call(this);return`M${(u(this,Ae)[2]-e)/r} ${(u(this,Ae)[3]-n)/i} L${(u(this,Ae)[4]-e)/r} ${(u(this,Ae)[5]-n)/i} L${s} ${o} L${a} ${l} L${(u(this,Ae)[16]-e)/r} ${(u(this,Ae)[17]-n)/i} L${(u(this,Ae)[14]-e)/r} ${(u(this,Ae)[15]-n)/i} Z`},JV=function(e){const n=u(this,Ms);e.push(`L${n[4]} ${n[5]} Z`)},ZV=function(e){const[n,r,i,s]=u(this,ui),o=u(this,Ae).subarray(4,6),a=u(this,Ae).subarray(16,18),[l,c,d,h]=T(this,gn,uy).call(this);e.push(`L${(o[0]-n)/i} ${(o[1]-r)/s} L${l} ${c} L${d} ${h} L${(a[0]-n)/i} ${(a[1]-r)/s}`)},eH=function(e){const n=u(this,Ae),[r,i,s,o]=u(this,ui),[a,l,c,d]=T(this,gn,uy).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(n[2]-r)/s,(n[3]-i)/o,NaN,NaN,NaN,NaN,(n[4]-r)/s,(n[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,(n[16]-r)/s,(n[17]-i)/o,NaN,NaN,NaN,NaN,(n[14]-r)/s,(n[15]-i)/o],0),this.newFreeDrawOutline(h,e,u(this,ui),u(this,xm),u(this,wm),u(this,bm))},tH=function(e,n){const r=u(this,Ms);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],n),n+=6},nH=function(e,n){const r=u(this,Ae).subarray(4,6),i=u(this,Ae).subarray(16,18),[s,o,a,l]=u(this,ui),[c,d,h,f]=T(this,gn,uy).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-o)/l],n),n+=24},A(oa,lw,8),A(oa,xS,2),A(oa,SS,u(oa,lw)+u(oa,xS));let iS=oa;var km,eh,Ba,cw,di,uw,Kt,kS,iH;class rH extends se{constructor(n,r,i,s,o,a){super();A(this,kS);A(this,km);A(this,eh,new Float32Array(4));A(this,Ba);A(this,cw);A(this,di);A(this,uw);A(this,Kt);S(this,Kt,n),S(this,di,r),S(this,km,i),S(this,uw,s),S(this,Ba,o),S(this,cw,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],T(this,kS,iH).call(this,a);const[l,c,d,h]=u(this,eh);for(let f=0,p=n.length;f<p;f+=2)n[f]=(n[f]-l)/d,n[f+1]=(n[f+1]-c)/h;for(let f=0,p=r.length;f<p;f+=2)r[f]=(r[f]-l)/d,r[f+1]=(r[f+1]-c)/h}toSVGPath(){const n=[`M${u(this,Kt)[4]} ${u(this,Kt)[5]}`];for(let r=6,i=u(this,Kt).length;r<i;r+=6){if(isNaN(u(this,Kt)[r])){n.push(`L${u(this,Kt)[r+4]} ${u(this,Kt)[r+5]}`);continue}n.push(`C${u(this,Kt)[r]} ${u(this,Kt)[r+1]} ${u(this,Kt)[r+2]} ${u(this,Kt)[r+3]} ${u(this,Kt)[r+4]} ${u(this,Kt)[r+5]}`)}return n.push("Z"),n.join(" ")}serialize([n,r,i,s],o){const a=i-n,l=s-r;let c,d;switch(o){case 0:c=se._rescale(u(this,Kt),n,s,a,-l),d=se._rescale(u(this,di),n,s,a,-l);break;case 90:c=se._rescaleAndSwap(u(this,Kt),n,r,a,l),d=se._rescaleAndSwap(u(this,di),n,r,a,l);break;case 180:c=se._rescale(u(this,Kt),i,r,-a,l),d=se._rescale(u(this,di),i,r,-a,l);break;case 270:c=se._rescaleAndSwap(u(this,Kt),i,s,-a,-l),d=se._rescaleAndSwap(u(this,di),i,s,-a,-l);break}return{outline:Array.from(c),points:[Array.from(d)]}}get box(){return u(this,eh)}newOutliner(n,r,i,s,o,a=0){return new iS(n,r,i,s,o,a)}getNewOutline(n,r){const[i,s,o,a]=u(this,eh),[l,c,d,h]=u(this,km),f=o*d,p=a*h,m=i*d+l,g=s*h+c,v=this.newOutliner({x:u(this,di)[0]*f+m,y:u(this,di)[1]*p+g},u(this,km),u(this,uw),n,u(this,cw),r??u(this,Ba));for(let y=2;y<u(this,di).length;y+=2)v.add({x:u(this,di)[y]*f+m,y:u(this,di)[y+1]*p+g});return v.getOutlines()}}km=new WeakMap,eh=new WeakMap,Ba=new WeakMap,cw=new WeakMap,di=new WeakMap,uw=new WeakMap,Kt=new WeakMap,kS=new WeakSet,iH=function(n){const r=u(this,Kt);let i=r[4],s=r[5];const o=[i,s,i,s];let a=i,l=s,c=i,d=s;const h=n?Math.max:Math.min,f=new Float32Array(4);for(let m=6,g=r.length;m<g;m+=6){const v=r[m+4],y=r[m+5];isNaN(r[m])?(re.pointBoundingBox(v,y,o),l>y?(a=v,l=y):l===y&&(a=h(a,v)),d<y?(c=v,d=y):d===y&&(c=h(c,v))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,re.bezierBoundingBox(i,s,...r.slice(m,m+6),f),re.rectBoundingBox(f[0],f[1],f[2],f[3],o),l>f[1]?(a=f[0],l=f[1]):l===f[1]&&(a=h(a,f[0])),d<f[3]?(c=f[2],d=f[3]):d===f[3]&&(c=h(c,f[2]))),i=v,s=y}const p=u(this,eh);p[0]=o[0]-u(this,Ba),p[1]=o[1]-u(this,Ba),p[2]=o[2]-o[0]+2*u(this,Ba),p[3]=o[3]-o[1]+2*u(this,Ba),this.firstPoint=[a,l],this.lastPoint=[c,d]};var dw,hw,fw,Nc,Os,xr,sH,Ux,oH,aH,VT;class zT{constructor(e,n=0,r=0,i=!0){A(this,xr);A(this,dw);A(this,hw);A(this,fw);A(this,Nc,[]);A(this,Os,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:v,y,width:w,height:b}of e){const k=Math.floor((v-n)/a)*a,_=Math.ceil((v+w+n)/a)*a,C=Math.floor((y-n)/a)*a,P=Math.ceil((y+b+n)/a)*a,R=[k,C,P,!0],M=[_,C,P,!1];u(this,Nc).push(R,M),re.rectBoundingBox(k,C,_,P,s)}const l=s[2]-s[0]+2*r,c=s[3]-s[1]+2*r,d=s[0]-r,h=s[1]-r;let f=i?-1/0:1/0,p=1/0;const m=u(this,Nc).at(i?-1:-2),g=[m[0],m[2]];for(const v of u(this,Nc)){const[y,w,b,k]=v;!k&&i?w<p?(p=w,f=y):w===p&&(f=Math.max(f,y)):k&&!i&&(w<p?(p=w,f=y):w===p&&(f=Math.min(f,y))),v[0]=(y-d)/l,v[1]=(w-h)/c,v[2]=(b-h)/c}S(this,dw,new Float32Array([d,h,l,c])),S(this,hw,[f,p]),S(this,fw,g)}getOutlines(){u(this,Nc).sort((n,r)=>n[0]-r[0]||n[1]-r[1]||n[2]-r[2]);const e=[];for(const n of u(this,Nc))n[3]?(e.push(...T(this,xr,VT).call(this,n)),T(this,xr,oH).call(this,n)):(T(this,xr,aH).call(this,n),e.push(...T(this,xr,VT).call(this,n)));return T(this,xr,sH).call(this,e)}}dw=new WeakMap,hw=new WeakMap,fw=new WeakMap,Nc=new WeakMap,Os=new WeakMap,xr=new WeakSet,sH=function(e){const n=[],r=new Set;for(const o of e){const[a,l,c]=o;n.push([a,l,o],[a,c,o])}n.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=n.length;o<a;o+=2){const l=n[o][2],c=n[o+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const i=[];let s;for(;r.size>0;){const o=r.values().next().value;let[a,l,c,d,h]=o;r.delete(o);let f=a,p=l;for(s=[a,c],i.push(s);;){let m;if(r.has(d))m=d;else if(r.has(h))m=h;else break;r.delete(m),[a,l,c,d,h]=m,f!==a&&(s.push(f,p,a,p===l?l:c),f=a),p=p===l?c:l}s.push(f,p)}return new Wfe(i,u(this,dw),u(this,hw),u(this,fw))},Ux=function(e){const n=u(this,Os);let r=0,i=n.length-1;for(;r<=i;){const s=r+i>>1,o=n[s][0];if(o===e)return s;o<e?r=s+1:i=s-1}return i+1},oH=function([,e,n]){const r=T(this,xr,Ux).call(this,e);u(this,Os).splice(r,0,[e,n])},aH=function([,e,n]){const r=T(this,xr,Ux).call(this,e);for(let i=r;i<u(this,Os).length;i++){const[s,o]=u(this,Os)[i];if(s!==e)break;if(s===e&&o===n){u(this,Os).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,o]=u(this,Os)[i];if(s!==e)break;if(s===e&&o===n){u(this,Os).splice(i,1);return}}},VT=function(e){const[n,r,i]=e,s=[[n,r,i]],o=T(this,xr,Ux).call(this,i);for(let a=0;a<o;a++){const[l,c]=u(this,Os)[a];for(let d=0,h=s.length;d<h;d++){const[,f,p]=s[d];if(!(c<=f||p<=l)){if(f>=l){if(p>c)s[d][1]=c;else{if(h===1)return[];s.splice(d,1),d--,h--}continue}s[d][2]=l,p>c&&s.push([n,c,p])}}}return s};var pw,Em;class Wfe extends se{constructor(n,r,i,s){super();A(this,pw);A(this,Em);S(this,Em,n),S(this,pw,r),this.firstPoint=i,this.lastPoint=s}toSVGPath(){const n=[];for(const r of u(this,Em)){let[i,s]=r;n.push(`M${i} ${s}`);for(let o=2;o<r.length;o+=2){const a=r[o],l=r[o+1];a===i?(n.push(`V${l}`),s=l):l===s&&(n.push(`H${a}`),i=a)}n.push("Z")}return n.join(" ")}serialize([n,r,i,s],o){const a=[],l=i-n,c=s-r;for(const d of u(this,Em)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=n+d[f]*l,h[f+1]=s-d[f+1]*c;a.push(h)}return a}get box(){return u(this,pw)}get classNamesForOutlining(){return["highlightOutline"]}}pw=new WeakMap,Em=new WeakMap;class HT extends iS{newFreeDrawOutline(e,n,r,i,s,o){return new Gfe(e,n,r,i,s,o)}}class Gfe extends rH{newOutliner(e,n,r,i,s,o=0){return new HT(e,n,r,i,s,o)}}var Am,mw,$a,th,gw,Or,yw,vw,nh,hi,fi,On,Cm,_m,er,Tm,Xi,ww,ke,WT,zx,lH,cH,uH,GT,Lu,ts,yf,dH,Vx,Hx,hH,fH,pH,mH,gH;const Ve=class Ve extends pt{constructor(n){super({...n,name:"highlightEditor"});A(this,ke);A(this,Am,null);A(this,mw,0);A(this,$a);A(this,th,null);A(this,gw,null);A(this,Or,null);A(this,yw,null);A(this,vw,0);A(this,nh,null);A(this,hi,null);A(this,fi,null);A(this,On,!1);A(this,Cm,null);A(this,_m,null);A(this,er,null);A(this,Tm,"");A(this,Xi);A(this,ww,"");this.color=n.color||Ve._defaultColor,S(this,Xi,n.thickness||Ve._defaultThickness),this.opacity=n.opacity||Ve._defaultOpacity,S(this,$a,n.boxes||null),S(this,ww,n.methodOfCreation||""),S(this,Tm,n.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",n.highlightId>-1?(S(this,On,!0),T(this,ke,zx).call(this,n),T(this,ke,Lu).call(this)):u(this,$a)&&(S(this,Am,n.anchorNode),S(this,mw,n.anchorOffset),S(this,yw,n.focusNode),S(this,vw,n.focusOffset),T(this,ke,WT).call(this),T(this,ke,Lu).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const n=Ve.prototype;return ge(this,"_keyboardManager",new Gw([[["ArrowLeft","mac+ArrowLeft"],n._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],n._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],n._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],n._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,On)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,Xi),methodOfCreation:u(this,ww)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(n){return{numberOfColors:n.get("color").size}}static initialize(n,r){var i;pt.initialize(n,r),Ve._defaultColor||(Ve._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(n,r){switch(n){case Me.HIGHLIGHT_COLOR:Ve._defaultColor=r;break;case Me.HIGHLIGHT_THICKNESS:Ve._defaultThickness=r;break}}translateInPage(n,r){}get toolbarPosition(){return u(this,_m)}get commentButtonPosition(){return u(this,Cm)}updateParams(n,r){switch(n){case Me.HIGHLIGHT_COLOR:T(this,ke,lH).call(this,r);break;case Me.HIGHLIGHT_THICKNESS:T(this,ke,cH).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Me.HIGHLIGHT_COLOR,Ve._defaultColor],[Me.HIGHLIGHT_THICKNESS,Ve._defaultThickness]]}get propertiesToUpdate(){return[[Me.HIGHLIGHT_COLOR,this.color||Ve._defaultColor],[Me.HIGHLIGHT_THICKNESS,u(this,Xi)||Ve._defaultThickness],[Me.HIGHLIGHT_FREE,u(this,On)]]}onUpdatedColor(){var n,r;(n=this.parent)==null||n.drawLayer.updateProperties(u(this,fi),{root:{fill:this.color,"fill-opacity":this.opacity}}),(r=u(this,gw))==null||r.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",S(this,gw,new tS({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(T(this,ke,Hx).call(this))}getBaseTranslation(){return[0,0]}getRect(n,r){return super.getRect(n,r,T(this,ke,Hx).call(this))}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),n&&this.div.focus()}remove(){T(this,ke,GT).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,ke,Lu).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var i;let r=!1;this.parent&&!n?T(this,ke,GT).call(this):n&&(T(this,ke,Lu).call(this,n),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(n),this.show(this._isVisible),r&&this.select()}rotate(n){var s,o,a;const{drawLayer:r}=this.parent;let i;u(this,On)?(n=(n-this.rotation+360)%360,i=T(s=Ve,ts,yf).call(s,u(this,hi).box,n)):i=T(o=Ve,ts,yf).call(o,[this.x,this.y,this.width,this.height],n),r.updateProperties(u(this,fi),{bbox:i,root:{"data-main-rotation":n}}),r.updateProperties(u(this,er),{bbox:T(a=Ve,ts,yf).call(a,u(this,Or).box,n),root:{"data-main-rotation":n}})}render(){if(this.div)return this.div;const n=super.render();u(this,Tm)&&(n.setAttribute("aria-label",u(this,Tm)),n.setAttribute("role","mark")),u(this,On)?n.classList.add("free"):this.div.addEventListener("keydown",T(this,ke,dH).bind(this),{signal:this._uiManager._signal});const r=S(this,nh,document.createElement("div"));return n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=u(this,th),this.setDims(),k5(this,u(this,nh),["pointerover","pointerleave"]),this.enableEditing(),n}pointerover(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(u(this,er),{rootClass:{hovered:!0}})}pointerleave(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(u(this,er),{rootClass:{hovered:!1}})}_moveCaret(n){switch(this.parent.unselect(this),n){case 0:case 2:T(this,ke,Vx).call(this,!0);break;case 1:case 3:T(this,ke,Vx).call(this,!1);break}}select(){var n;super.select(),u(this,er)&&((n=this.parent)==null||n.drawLayer.updateProperties(u(this,er),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var n;super.unselect(),u(this,er)&&((n=this.parent)==null||n.drawLayer.updateProperties(u(this,er),{rootClass:{selected:!1}}),u(this,On)||T(this,ke,Vx).call(this,!1))}get _mustFixPosition(){return!u(this,On)}show(n=this._isVisible){super.show(n),this.parent&&(this.parent.drawLayer.updateProperties(u(this,fi),{rootClass:{hidden:!n}}),this.parent.drawLayer.updateProperties(u(this,er),{rootClass:{hidden:!n}}))}static startHighlighting(n,r,{target:i,x:s,y:o}){const{x:a,y:l,width:c,height:d}=i.getBoundingClientRect(),h=new AbortController,f=n.combinedSignal(h),p=m=>{h.abort(),T(this,ts,mH).call(this,n,m)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",Ht,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",us,{signal:f}),i.addEventListener("pointermove",T(this,ts,pH).bind(this,n),{signal:f}),this._freeHighlight=new HT({x:s,y:o},[a,l,c,d],n.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(n,r,i){var g,v,y,w;let s=null;if(n instanceof HV){const{data:{quadPoints:b,rect:k,rotation:_,id:C,color:P,opacity:R,popupRef:M,richText:I,contentsObj:j,creationDate:U,modificationDate:G},parent:{page:{pageNumber:B}}}=n;s=n={annotationType:we.HIGHLIGHT,color:Array.from(P),opacity:R,quadPoints:b,boxes:null,pageIndex:B-1,rect:k.slice(0),rotation:_,annotationElementId:C,id:C,deleted:!1,popupRef:M,richText:I,comment:(j==null?void 0:j.str)||null,creationDate:U,modificationDate:G}}else if(n instanceof XI){const{data:{inkLists:b,rect:k,rotation:_,id:C,color:P,borderStyle:{rawWidth:R},popupRef:M,richText:I,contentsObj:j,creationDate:U,modificationDate:G},parent:{page:{pageNumber:B}}}=n;s=n={annotationType:we.HIGHLIGHT,color:Array.from(P),thickness:R,inkLists:b,boxes:null,pageIndex:B-1,rect:k.slice(0),rotation:_,annotationElementId:C,id:C,deleted:!1,popupRef:M,richText:I,comment:(j==null?void 0:j.str)||null,creationDate:U,modificationDate:G}}const{color:o,quadPoints:a,inkLists:l,opacity:c}=n,d=await super.deserialize(n,r,i);d.color=re.makeHexColor(...o),d.opacity=c||1,l&&S(d,Xi,n.thickness),d._initialData=s,n.comment&&d.setCommentData(n);const[h,f]=d.pageDimensions,[p,m]=d.pageTranslation;if(a){const b=S(d,$a,[]);for(let k=0;k<a.length;k+=8)b.push({x:(a[k]-p)/h,y:1-(a[k+1]-m)/f,width:(a[k+2]-a[k])/h,height:(a[k+1]-a[k+5])/f});T(g=d,ke,WT).call(g),T(v=d,ke,Lu).call(v),d.rotate(d.rotation)}else if(l){S(d,On,!0);const b=l[0],k={x:b[0]-p,y:f-(b[1]-m)},_=new HT(k,[0,0,h,f],1,u(d,Xi)/2,!0,.001);for(let R=0,M=b.length;R<M;R+=2)k.x=b[R]-p,k.y=f-(b[R+1]-m),_.add(k);const{id:C,clipPathId:P}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);T(y=d,ke,zx).call(y,{highlightOutlines:_.getOutlines(),highlightId:C,clipPathId:P}),T(w=d,ke,Lu).call(w),d.rotate(d.parentRotation)}return d}serialize(n=!1){if(this.isEmpty()||n)return null;if(this.deleted)return this.serializeDeleted();const r=pt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(n);return Object.assign(i,{color:r,opacity:this.opacity,thickness:u(this,Xi),quadPoints:T(this,ke,hH).call(this),outlines:T(this,ke,fH).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!T(this,ke,gH).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(n){return this.deleted?(n.hide(),null):(n.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Am=new WeakMap,mw=new WeakMap,$a=new WeakMap,th=new WeakMap,gw=new WeakMap,Or=new WeakMap,yw=new WeakMap,vw=new WeakMap,nh=new WeakMap,hi=new WeakMap,fi=new WeakMap,On=new WeakMap,Cm=new WeakMap,_m=new WeakMap,er=new WeakMap,Tm=new WeakMap,Xi=new WeakMap,ww=new WeakMap,ke=new WeakSet,WT=function(){const n=new zT(u(this,$a),.001);S(this,hi,n.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,hi).box;const r=new zT(u(this,$a),.0025,.001,this._uiManager.direction==="ltr");S(this,Or,r.getOutlines());const{firstPoint:i}=u(this,hi);S(this,Cm,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:s}=u(this,Or);S(this,_m,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},zx=function({highlightOutlines:n,highlightId:r,clipPathId:i}){var f,p;if(S(this,hi,n),S(this,Or,n.getNewOutline(u(this,Xi)/2+1.5,.0025)),r>=0)S(this,fi,r),S(this,th,i),this.parent.drawLayer.finalizeDraw(r,{bbox:n.box,path:{d:n.toSVGPath()}}),S(this,er,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,Or).box,path:{d:u(this,Or).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,fi),{bbox:T(f=Ve,ts,yf).call(f,u(this,hi).box,(m-this.rotation+360)%360),path:{d:n.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,er),{bbox:T(p=Ve,ts,yf).call(p,u(this,Or).box,m),path:{d:u(this,Or).toSVGPath()}})}const[o,a,l,c]=n.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[m,g]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*g/m,this.height=c*m/g;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[m,g]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*g/m,this.height=c*m/g;break}}const{firstPoint:d}=n;S(this,Cm,[(d[0]-o)/l,(d[1]-a)/c]);const{lastPoint:h}=u(this,Or);S(this,_m,[(h[0]-o)/l,(h[1]-a)/c])},lH=function(n){const r=(o,a)=>{this.color=o,this.opacity=a,this.onUpdatedColor()},i=this.color,s=this.opacity;this.addCommands({cmd:r.bind(this,n,Ve._defaultOpacity),undo:r.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Me.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(n)},!0)},cH=function(n){const r=u(this,Xi),i=s=>{S(this,Xi,s),T(this,ke,uH).call(this,s)};this.addCommands({cmd:i.bind(this,n),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Me.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:n},!0)},uH=function(n){u(this,On)&&(T(this,ke,zx).call(this,{highlightOutlines:u(this,hi).getNewOutline(n/2)}),this.fixAndSetPosition(),this.setDims())},GT=function(){u(this,fi)===null||!this.parent||(this.parent.drawLayer.remove(u(this,fi)),S(this,fi,null),this.parent.drawLayer.remove(u(this,er)),S(this,er,null))},Lu=function(n=this.parent){u(this,fi)===null&&({id:Lt(this,fi)._,clipPathId:Lt(this,th)._}=n.drawLayer.draw({bbox:u(this,hi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:u(this,On)},path:{d:u(this,hi).toSVGPath()}},!1,!0),S(this,er,n.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,On)},bbox:u(this,Or).box,path:{d:u(this,Or).toSVGPath()}},u(this,On))),u(this,nh)&&(u(this,nh).style.clipPath=u(this,th)))},ts=new WeakSet,yf=function([n,r,i,s],o){switch(o){case 90:return[1-r-s,n,s,i];case 180:return[1-n-i,1-r-s,i,s];case 270:return[r,1-n-i,s,i]}return[n,r,i,s]},dH=function(n){Ve._keyboardManager.exec(this,n)},Vx=function(n){if(!u(this,Am))return;const r=window.getSelection();n?r.setPosition(u(this,Am),u(this,mw)):r.setPosition(u(this,yw),u(this,vw))},Hx=function(){return u(this,On)?this.rotation:0},hH=function(){if(u(this,On))return null;const[n,r]=this.pageDimensions,[i,s]=this.pageTranslation,o=u(this,$a),a=new Float32Array(o.length*8);let l=0;for(const{x:c,y:d,width:h,height:f}of o){const p=c*n+i,m=(1-d)*r+s;a[l]=a[l+4]=p,a[l+1]=a[l+3]=m,a[l+2]=a[l+6]=p+h*n,a[l+5]=a[l+7]=m-f*r,l+=8}return a},fH=function(n){return u(this,hi).serialize(n,T(this,ke,Hx).call(this))},pH=function(n,r){this._freeHighlight.add(r)&&n.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},mH=function(n,r){this._freeHighlight.isEmpty()?n.drawLayer.remove(this._freeHighlightId):n.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},gH=function(n){const{color:r}=this._initialData;return this.hasEditedComment||n.color.some((i,s)=>i!==r[s])},A(Ve,ts),H(Ve,"_defaultColor",null),H(Ve,"_defaultOpacity",1),H(Ve,"_defaultThickness",12),H(Ve,"_type","highlight"),H(Ve,"_editorType",we.HIGHLIGHT),H(Ve,"_freeHighlightId",-1),H(Ve,"_freeHighlight",null),H(Ve,"_freeHighlightClipId","");let sS=Ve;var rh;class yH{constructor(){A(this,rh,Object.create(null))}updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,r]of Object.entries(e))n.startsWith("_")||this.updateProperty(n,r)}updateSVGProperty(e,n){u(this,rh)[e]=n}toSVGProperties(){const e=u(this,rh);return S(this,rh,Object.create(null)),{root:e}}reset(){S(this,rh,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Ge("Not implemented")}}rh=new WeakMap;var pi,Pm,Sn,ih,sh,Be,qT,KT,XT,dy,vH,Wx,hy,vf;const Re=class Re extends pt{constructor(n){super(n);A(this,Be);A(this,pi,null);A(this,Pm);H(this,"_colorPicker",null);H(this,"_drawId",null);S(this,Pm,n.mustBeCommitted||!1),this._addOutlines(n)}onUpdatedColor(){var n;(n=this._colorPicker)==null||n.update(this.color),super.onUpdatedColor()}_addOutlines(n){n.drawOutlines&&(T(this,Be,qT).call(this,n),T(this,Be,dy).call(this))}static _mergeSVGProperties(n,r){const i=new Set(Object.keys(n));for(const[s,o]of Object.entries(r))i.has(s)?Object.assign(n[s],o):n[s]=o;return n}static getDefaultDrawingOptions(n){Ge("Not implemented")}static get typesMap(){Ge("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(n,r){const i=this.typesMap.get(n);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(u(Re,Sn).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(n,r){const i=this.constructor.typesMap.get(n);i&&this._updateProperty(n,i,r)}static get defaultPropertiesToUpdate(){const n=[],r=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)n.push([i,r[s]]);return n}get propertiesToUpdate(){const n=[],{_drawingOptions:r}=this;for(const[i,s]of this.constructor.typesMap)n.push([i,r[s]]);return n}_updateProperty(n,r,i){const s=this._drawingOptions,o=s[r],a=l=>{var d;s.updateProperty(r,l);const c=u(this,pi).updateProperty(r,l);c&&T(this,Be,hy).call(this,c),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),n===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Re._mergeSVGProperties(u(this,pi).getPathResizingSVGProperties(T(this,Be,Wx).call(this)),{bbox:T(this,Be,vf).call(this)}))}_onResized(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Re._mergeSVGProperties(u(this,pi).getPathResizedSVGProperties(T(this,Be,Wx).call(this)),{bbox:T(this,Be,vf).call(this)}))}_onTranslating(n,r){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:T(this,Be,vf).call(this)})}_onTranslated(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Re._mergeSVGProperties(u(this,pi).getPathTranslatedSVGProperties(T(this,Be,Wx).call(this),this.parentDimensions),{bbox:T(this,Be,vf).call(this)}))}_onStartDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,Pm)&&(S(this,Pm,!1),this.commit(),this.parent.setSelected(this),n&&this.isOnScreen&&this.div.focus())}remove(){T(this,Be,XT).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,Be,dy).call(this),T(this,Be,hy).call(this,u(this,pi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var i;let r=!1;this.parent&&!n?(this._uiManager.removeShouldRescale(this),T(this,Be,XT).call(this)):n&&(this._uiManager.addShouldRescale(this),T(this,Be,dy).call(this,n),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(n),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Re._mergeSVGProperties({bbox:T(this,Be,vf).call(this)},u(this,pi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&T(this,Be,hy).call(this,u(this,pi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let n,r;this._isCopy&&(n=this.x,r=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(n,r),i}static createDrawerInstance(n,r,i,s,o){Ge("Not implemented")}static startDrawing(n,r,i,s){var v;const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:d}=s;if(Kn.isInitializedAndDifferentPointerType(d))return;const{viewport:{rotation:h}}=n,{width:f,height:p}=o.getBoundingClientRect(),m=S(Re,ih,new AbortController),g=n.combinedSignal(m);if(Kn.setPointer(d,c),window.addEventListener("pointerup",y=>{Kn.isSamePointerIdOrRemove(y.pointerId)&&this._endDraw(y)},{signal:g}),window.addEventListener("pointercancel",y=>{Kn.isSamePointerIdOrRemove(y.pointerId)&&this._currentParent.endDrawingSession()},{signal:g}),window.addEventListener("pointerdown",y=>{Kn.isSamePointerType(y.pointerType)&&(Kn.initializeAndAddPointerId(y.pointerId),u(Re,Sn).isCancellable()&&(u(Re,Sn).removeLastElement(),u(Re,Sn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",us,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",y=>{Kn.isSameTimeStamp(y.timeStamp)&&Ht(y)},{signal:g}),n.toggleDrawing(),(v=r._editorUndoBar)==null||v.hide(),u(Re,Sn)){n.drawLayer.updateProperties(this._currentDrawId,u(Re,Sn).startNew(a,l,f,p,h));return}r.updateUIForDefaultProperties(this),S(Re,Sn,this.createDrawerInstance(a,l,f,p,h)),S(Re,sh,this.getDefaultDrawingOptions()),this._currentParent=n,{id:this._currentDrawId}=n.drawLayer.draw(this._mergeSVGProperties(u(Re,sh).toSVGProperties(),u(Re,Sn).defaultSVGProperties),!0,!1)}static _drawMove(n){if(Kn.isSameTimeStamp(n.timeStamp),!u(Re,Sn))return;const{offsetX:r,offsetY:i,pointerId:s}=n;if(Kn.isSamePointerId(s)){if(Kn.isUsingMultiplePointers()){this._endDraw(n);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(Re,Sn).add(r,i)),Kn.setTimeStamp(n.timeStamp),Ht(n)}}static _cleanup(n){n&&(this._currentDrawId=-1,this._currentParent=null,S(Re,Sn,null),S(Re,sh,null),Kn.clearTimeStamp()),u(Re,ih)&&(u(Re,ih).abort(),S(Re,ih,null),Kn.clearPointerIds())}static _endDraw(n){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(n==null?void 0:n.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,u(Re,Sn).end(n.offsetX,n.offsetY)),this.supportMultipleDrawings){const i=u(Re,Sn),s=this._currentDrawId,o=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(s,i.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Me.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(n){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Me.DRAW_STEP),!u(Re,Sn).isEmpty()){const{pageDimensions:[i,s],scale:o}=r,a=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(Re,Sn).getOutlines(i*o,s*o,o,this._INNER_MARGIN),drawingOptions:u(Re,sh),mustBeCommitted:!n});return this._cleanup(!0),a}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(n){}static deserializeDraw(n,r,i,s,o,a){Ge("Not implemented")}static async deserialize(n,r,i){var h,f;const{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}=r.viewport,c=this.deserializeDraw(a,l,s,o,this._INNER_MARGIN,n),d=await super.deserialize(n,r,i);return d.createDrawingOptions(n),T(h=d,Be,qT).call(h,{drawOutlines:c}),T(f=d,Be,dy).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(n){const[r,i]=this.pageTranslation,[s,o]=this.pageDimensions;return u(this,pi).serialize([r,i,s,o],n)}renderAnnotationElement(n){return n.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};pi=new WeakMap,Pm=new WeakMap,Sn=new WeakMap,ih=new WeakMap,sh=new WeakMap,Be=new WeakSet,qT=function({drawOutlines:n,drawId:r,drawingOptions:i}){S(this,pi,n),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,n.defaultProperties)):this._drawId=T(this,Be,KT).call(this,n,this.parent),T(this,Be,hy).call(this,n.box)},KT=function(n,r){const{id:i}=r.drawLayer.draw(Re._mergeSVGProperties(this._drawingOptions.toSVGProperties(),n.defaultSVGProperties),!1,!1);return i},XT=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},dy=function(n=this.parent){if(!(this._drawId!==null&&this.parent===n)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,n.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=T(this,Be,KT).call(this,u(this,pi),n)}},vH=function([n,r,i,s]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[r,1-n,i*(a/o),s*(o/a)];case 180:return[1-n,1-r,i,s];case 270:return[1-r,n,i*(a/o),s*(o/a)];default:return[n,r,i,s]}},Wx=function(){const{x:n,y:r,width:i,height:s,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-r,n,i*(o/a),s*(a/o)];case 180:return[1-n,1-r,i,s];case 270:return[r,1-n,i*(o/a),s*(a/o)];default:return[n,r,i,s]}},hy=function(n){[this.x,this.y,this.width,this.height]=T(this,Be,vH).call(this,n),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},vf=function(){const{x:n,y:r,width:i,height:s,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-r-s,n,s,i];case 2:return[1-n-i,1-r-s,i,s];case 3:return[r,1-n-i,s,i];case 4:return[n,r-i*(l/c),s*(c/l),i*(l/c)];case 5:return[1-r,n,i*(l/c),s*(c/l)];case 6:return[1-n-s*(c/l),1-r,s*(c/l),i*(l/c)];case 7:return[r-i*(l/c),1-n-s*(c/l),i*(l/c),s*(c/l)];case 8:return[n-i,r-s,i,s];case 9:return[1-r,n-i,s,i];case 10:return[1-n,1-r,i,s];case 11:return[r-s,1-n,s,i];case 12:return[n-s*(c/l),r,s*(c/l),i*(l/c)];case 13:return[1-r-i*(l/c),n-s*(c/l),i*(l/c),s*(c/l)];case 14:return[1-n,1-r-i*(l/c),s*(c/l),i*(l/c)];case 15:return[r,1-n,i*(l/c),s*(c/l)];default:return[n,r,i,s]}},H(Re,"_currentDrawId",-1),H(Re,"_currentParent",null),A(Re,Sn,null),A(Re,ih,null),A(Re,sh,null),H(Re,"_INNER_MARGIN",3);let oS=Re;var Co,kn,En,oh,Rm,ur,Ln,Yi,ah,lh,ch,Im,Gx;class qfe{constructor(e,n,r,i,s,o){A(this,Im);A(this,Co,new Float64Array(6));A(this,kn);A(this,En);A(this,oh);A(this,Rm);A(this,ur);A(this,Ln,"");A(this,Yi,0);A(this,ah,new qw);A(this,lh);A(this,ch);S(this,lh,r),S(this,ch,i),S(this,oh,s),S(this,Rm,o),[e,n]=T(this,Im,Gx).call(this,e,n);const a=S(this,kn,[NaN,NaN,NaN,NaN,e,n]);S(this,ur,[e,n]),S(this,En,[{line:a,points:u(this,ur)}]),u(this,Co).set(a,0)}updateProperty(e,n){e==="stroke-width"&&S(this,Rm,n)}isEmpty(){return!u(this,En)||u(this,En).length===0}isCancellable(){return u(this,ur).length<=10}add(e,n){[e,n]=T(this,Im,Gx).call(this,e,n);const[r,i,s,o]=u(this,Co).subarray(2,6),a=e-s,l=n-o;return Math.hypot(u(this,lh)*a,u(this,ch)*l)<=2?null:(u(this,ur).push(e,n),isNaN(r)?(u(this,Co).set([s,o,e,n],2),u(this,kn).push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Co)[0])&&u(this,kn).splice(6,6),u(this,Co).set([r,i,s,o,e,n],0),u(this,kn).push(...se.createBezierPoints(r,i,s,o,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const r=this.add(e,n);return r||(u(this,ur).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,r,i,s){S(this,lh,r),S(this,ch,i),S(this,oh,s),[e,n]=T(this,Im,Gx).call(this,e,n);const o=S(this,kn,[NaN,NaN,NaN,NaN,e,n]);S(this,ur,[e,n]);const a=u(this,En).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),u(this,En).push({line:o,points:u(this,ur)}),u(this,Co).set(o,0),S(this,Yi,0),this.toSVGPath(),null}getLastElement(){return u(this,En).at(-1)}setLastElement(e){return u(this,En)?(u(this,En).push(e),S(this,kn,e.line),S(this,ur,e.points),S(this,Yi,0),{path:{d:this.toSVGPath()}}):u(this,ah).setLastElement(e)}removeLastElement(){if(!u(this,En))return u(this,ah).removeLastElement();u(this,En).pop(),S(this,Ln,"");for(let e=0,n=u(this,En).length;e<n;e++){const{line:r,points:i}=u(this,En)[e];S(this,kn,r),S(this,ur,i),S(this,Yi,0),this.toSVGPath()}return{path:{d:u(this,Ln)}}}toSVGPath(){const e=se.svgRound(u(this,kn)[4]),n=se.svgRound(u(this,kn)[5]);if(u(this,ur).length===2)return S(this,Ln,`${u(this,Ln)} M ${e} ${n} Z`),u(this,Ln);if(u(this,ur).length<=6){const i=u(this,Ln).lastIndexOf("M");S(this,Ln,`${u(this,Ln).slice(0,i)} M ${e} ${n}`),S(this,Yi,6)}if(u(this,ur).length===4){const i=se.svgRound(u(this,kn)[10]),s=se.svgRound(u(this,kn)[11]);return S(this,Ln,`${u(this,Ln)} L ${i} ${s}`),S(this,Yi,12),u(this,Ln)}const r=[];u(this,Yi)===0&&(r.push(`M ${e} ${n}`),S(this,Yi,6));for(let i=u(this,Yi),s=u(this,kn).length;i<s;i+=6){const[o,a,l,c,d,h]=u(this,kn).slice(i,i+6).map(se.svgRound);r.push(`C${o} ${a} ${l} ${c} ${d} ${h}`)}return S(this,Ln,u(this,Ln)+r.join(" ")),S(this,Yi,u(this,kn).length),u(this,Ln)}getOutlines(e,n,r,i){const s=u(this,En).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),u(this,ah).build(u(this,En),e,n,r,u(this,oh),u(this,Rm),i),S(this,Co,null),S(this,kn,null),S(this,En,null),S(this,Ln,null),u(this,ah)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Co=new WeakMap,kn=new WeakMap,En=new WeakMap,oh=new WeakMap,Rm=new WeakMap,ur=new WeakMap,Ln=new WeakMap,Yi=new WeakMap,ah=new WeakMap,lh=new WeakMap,ch=new WeakMap,Im=new WeakSet,Gx=function(e,n){return se._normalizePoint(e,n,u(this,lh),u(this,ch),u(this,oh))};var dr,bw,xw,mi,_o,To,Nm,Dm,uh,Un,na,wH,bH,xH;class qw extends se{constructor(){super(...arguments);A(this,Un);A(this,dr);A(this,bw,0);A(this,xw);A(this,mi);A(this,_o);A(this,To);A(this,Nm);A(this,Dm);A(this,uh)}build(n,r,i,s,o,a,l){S(this,_o,r),S(this,To,i),S(this,Nm,s),S(this,Dm,o),S(this,uh,a),S(this,xw,l??0),S(this,mi,n),T(this,Un,bH).call(this)}get thickness(){return u(this,uh)}setLastElement(n){return u(this,mi).push(n),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,mi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const n=[];for(const{line:r}of u(this,mi)){if(n.push(`M${se.svgRound(r[4])} ${se.svgRound(r[5])}`),r.length===6){n.push("Z");continue}if(r.length===12&&isNaN(r[6])){n.push(`L${se.svgRound(r[10])} ${se.svgRound(r[11])}`);continue}for(let i=6,s=r.length;i<s;i+=6){const[o,a,l,c,d,h]=r.subarray(i,i+6).map(se.svgRound);n.push(`C${o} ${a} ${l} ${c} ${d} ${h}`)}}return n.join("")}serialize([n,r,i,s],o){const a=[],l=[],[c,d,h,f]=T(this,Un,wH).call(this);let p,m,g,v,y,w,b,k,_;switch(u(this,Dm)){case 0:_=se._rescale,p=n,m=r+s,g=i,v=-s,y=n+c*i,w=r+(1-d-f)*s,b=n+(c+h)*i,k=r+(1-d)*s;break;case 90:_=se._rescaleAndSwap,p=n,m=r,g=i,v=s,y=n+d*i,w=r+c*s,b=n+(d+f)*i,k=r+(c+h)*s;break;case 180:_=se._rescale,p=n+i,m=r,g=-i,v=s,y=n+(1-c-h)*i,w=r+d*s,b=n+(1-c)*i,k=r+(d+f)*s;break;case 270:_=se._rescaleAndSwap,p=n+i,m=r+s,g=-i,v=-s,y=n+(1-d-f)*i,w=r+(1-c-h)*s,b=n+(1-d)*i,k=r+(1-c)*s;break}for(const{line:C,points:P}of u(this,mi))a.push(_(C,p,m,g,v,o?new Array(C.length):null)),l.push(_(P,p,m,g,v,o?new Array(P.length):null));return{lines:a,points:l,rect:[y,w,b,k]}}static deserialize(n,r,i,s,o,{paths:{lines:a,points:l},rotation:c,thickness:d}){const h=[];let f,p,m,g,v;switch(c){case 0:v=se._rescale,f=-n/i,p=r/s+1,m=1/i,g=-1/s;break;case 90:v=se._rescaleAndSwap,f=-r/s,p=-n/i,m=1/s,g=1/i;break;case 180:v=se._rescale,f=n/i+1,p=-r/s,m=-1/i,g=1/s;break;case 270:v=se._rescaleAndSwap,f=r/s+1,p=n/i+1,m=-1/s,g=-1/i;break}if(!a){a=[];for(const w of l){const b=w.length;if(b===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(b===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const k=new Float32Array(3*(b-2));a.push(k);let[_,C,P,R]=w.subarray(0,4);k.set([NaN,NaN,NaN,NaN,_,C],0);for(let M=4;M<b;M+=2){const I=w[M],j=w[M+1];k.set(se.createBezierPoints(_,C,P,R,I,j),(M-2)*3),[_,C,P,R]=[P,R,I,j]}}}for(let w=0,b=a.length;w<b;w++)h.push({line:v(a[w].map(k=>k??NaN),f,p,m,g),points:v(l[w].map(k=>k??NaN),f,p,m,g)});const y=new this.prototype.constructor;return y.build(h,i,s,1,c,d,o),y}get box(){return u(this,dr)}updateProperty(n,r){return n==="stroke-width"?T(this,Un,xH).call(this,r):null}updateParentDimensions([n,r],i){const[s,o]=T(this,Un,na).call(this);S(this,_o,n),S(this,To,r),S(this,Nm,i);const[a,l]=T(this,Un,na).call(this),c=a-s,d=l-o,h=u(this,dr);return h[0]-=c,h[1]-=d,h[2]+=2*c,h[3]+=2*d,h}updateRotation(n){return S(this,bw,n),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,dr).map(se.svgRound).join(" ")}get defaultProperties(){const[n,r]=u(this,dr);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${se.svgRound(n)} ${se.svgRound(r)}`}}}get rotationTransform(){const[,,n,r]=u(this,dr);let i=0,s=0,o=0,a=0,l=0,c=0;switch(u(this,bw)){case 90:s=r/n,o=-n/r,l=n;break;case 180:i=-1,a=-1,l=n,c=r;break;case 270:s=-r/n,o=n/r,c=r;break;default:return""}return`matrix(${i} ${s} ${o} ${a} ${se.svgRound(l)} ${se.svgRound(c)})`}getPathResizingSVGProperties([n,r,i,s]){const[o,a]=T(this,Un,na).call(this),[l,c,d,h]=u(this,dr);if(Math.abs(d-o)<=se.PRECISION||Math.abs(h-a)<=se.PRECISION){const v=n+i/2-(l+d/2),y=r+s/2-(c+h/2);return{path:{"transform-origin":`${se.svgRound(n)} ${se.svgRound(r)}`,transform:`${this.rotationTransform} translate(${v} ${y})`}}}const f=(i-2*o)/(d-2*o),p=(s-2*a)/(h-2*a),m=d/i,g=h/s;return{path:{"transform-origin":`${se.svgRound(l)} ${se.svgRound(c)}`,transform:`${this.rotationTransform} scale(${m} ${g}) translate(${se.svgRound(o)} ${se.svgRound(a)}) scale(${f} ${p}) translate(${se.svgRound(-o)} ${se.svgRound(-a)})`}}}getPathResizedSVGProperties([n,r,i,s]){const[o,a]=T(this,Un,na).call(this),l=u(this,dr),[c,d,h,f]=l;if(l[0]=n,l[1]=r,l[2]=i,l[3]=s,Math.abs(h-o)<=se.PRECISION||Math.abs(f-a)<=se.PRECISION){const y=n+i/2-(c+h/2),w=r+s/2-(d+f/2);for(const{line:b,points:k}of u(this,mi))se._translate(b,y,w,b),se._translate(k,y,w,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${se.svgRound(n)} ${se.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*o)/(h-2*o),m=(s-2*a)/(f-2*a),g=-p*(c+o)+n+o,v=-m*(d+a)+r+a;if(p!==1||m!==1||g!==0||v!==0)for(const{line:y,points:w}of u(this,mi))se._rescale(y,g,v,p,m,y),se._rescale(w,g,v,p,m,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${se.svgRound(n)} ${se.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([n,r],i){const[s,o]=i,a=u(this,dr),l=n-a[0],c=r-a[1];if(u(this,_o)===s&&u(this,To)===o)for(const{line:d,points:h}of u(this,mi))se._translate(d,l,c,d),se._translate(h,l,c,h);else{const d=u(this,_o)/s,h=u(this,To)/o;S(this,_o,s),S(this,To,o);for(const{line:f,points:p}of u(this,mi))se._rescale(f,l,c,d,h,f),se._rescale(p,l,c,d,h,p);a[2]*=d,a[3]*=h}return a[0]=n,a[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${se.svgRound(n)} ${se.svgRound(r)}`}}}get defaultSVGProperties(){const n=u(this,dr);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${se.svgRound(n[0])} ${se.svgRound(n[1])}`,transform:this.rotationTransform||null},bbox:n}}}dr=new WeakMap,bw=new WeakMap,xw=new WeakMap,mi=new WeakMap,_o=new WeakMap,To=new WeakMap,Nm=new WeakMap,Dm=new WeakMap,uh=new WeakMap,Un=new WeakSet,na=function(n=u(this,uh)){const r=u(this,xw)+n/2*u(this,Nm);return u(this,Dm)%180===0?[r/u(this,_o),r/u(this,To)]:[r/u(this,To),r/u(this,_o)]},wH=function(){const[n,r,i,s]=u(this,dr),[o,a]=T(this,Un,na).call(this,0);return[n+o,r+a,i-2*o,s-2*a]},bH=function(){const n=S(this,dr,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of u(this,mi)){if(s.length<=12){for(let l=4,c=s.length;l<c;l+=6)re.pointBoundingBox(s[l],s[l+1],n);continue}let o=s[4],a=s[5];for(let l=6,c=s.length;l<c;l+=6){const[d,h,f,p,m,g]=s.subarray(l,l+6);re.bezierBoundingBox(o,a,d,h,f,p,m,g,n),o=m,a=g}}const[r,i]=T(this,Un,na).call(this);n[0]=Bn(n[0]-r,0,1),n[1]=Bn(n[1]-i,0,1),n[2]=Bn(n[2]+r,0,1),n[3]=Bn(n[3]+i,0,1),n[2]-=n[0],n[3]-=n[1]},xH=function(n){const[r,i]=T(this,Un,na).call(this);S(this,uh,n);const[s,o]=T(this,Un,na).call(this),[a,l]=[s-r,o-i],c=u(this,dr);return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c};class Rk extends yH{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:pt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=this._viewParameters.realScale),super.updateSVGProperty(e,n)}clone(){const e=new Rk(this._viewParameters);return e.updateAll(this),e}}var ES,SH;const zf=class zf extends oS{constructor(n){super({...n,name:"inkEditor"});A(this,ES);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(n,r){pt.initialize(n,r),this._defaultDrawingOptions=new Rk(r.viewParameters)}static getDefaultDrawingOptions(n){const r=this._defaultDrawingOptions.clone();return r.updateProperties(n),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return ge(this,"typesMap",new Map([[Me.INK_THICKNESS,"stroke-width"],[Me.INK_COLOR,"stroke"],[Me.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(n,r,i,s,o){return new qfe(n,r,i,s,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(n,r,i,s,o,a){return qw.deserialize(n,r,i,s,o,a)}static async deserialize(n,r,i){let s=null;if(n instanceof XI){const{data:{inkLists:a,rect:l,rotation:c,id:d,color:h,opacity:f,borderStyle:{rawWidth:p},popupRef:m,richText:g,contentsObj:v,creationDate:y,modificationDate:w},parent:{page:{pageNumber:b}}}=n;s=n={annotationType:we.INK,color:Array.from(h),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:b-1,rect:l.slice(0),rotation:c,annotationElementId:d,id:d,deleted:!1,popupRef:m,richText:g,comment:(v==null?void 0:v.str)||null,creationDate:y,modificationDate:w}}const o=await super.deserialize(n,r,i);return o._initialData=s,n.comment&&o.setCommentData(n),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new nS(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Me.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:n,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(n,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const n=this._currentParent;n&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:n,thickness:r,opacity:i}){this._drawingOptions=zf.getDefaultDrawingOptions({stroke:re.makeHexColor(...n),"stroke-width":r,"stroke-opacity":i})}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:i}=this.serializeDraw(n),{_drawingOptions:{stroke:s,"stroke-opacity":o,"stroke-width":a}}=this,l=Object.assign(super.serialize(n),{color:pt._colorManager.convert(s),opacity:o,thickness:a,paths:{lines:r,points:i}});return this.addComment(l),n?(l.isCopy=!0,l):this.annotationElementId&&!T(this,ES,SH).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(n){if(this.deleted)return n.hide(),null;const{points:r,rect:i}=this.serializeDraw(!1);return n.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:r,popup:this.comment}),null}};ES=new WeakSet,SH=function(n){const{color:r,thickness:i,opacity:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||n.color.some((a,l)=>a!==r[l])||n.thickness!==i||n.opacity!==s||n.pageIndex!==o},H(zf,"_type","ink"),H(zf,"_editorType",we.INK),H(zf,"_defaultDrawingOptions",null);let YT=zf;class QT extends qw{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Wb=8,Fg=3;var dh,Ke,JT,Ls,kH,EH,ZT,qx,AH,CH,_H,eP,tP,TH;class Ga{static extractContoursFromText(e,{fontFamily:n,fontStyle:r,fontWeight:i},s,o,a,l){let c=new OffscreenCanvas(1,1),d=c.getContext("2d",{alpha:!1});const h=200,f=d.font=`${r} ${i} ${h}px ${n}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:m,actualBoundingBoxAscent:g,actualBoundingBoxDescent:v,fontBoundingBoxAscent:y,fontBoundingBoxDescent:w,width:b}=d.measureText(e),k=1.5,_=Math.ceil(Math.max(Math.abs(p)+Math.abs(m)||0,b)*k),C=Math.ceil(Math.max(Math.abs(g)+Math.abs(v)||h,Math.abs(y)+Math.abs(w)||h)*k);c=new OffscreenCanvas(_,C),d=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,_,C),d.fillStyle="black",d.fillText(e,_*(k-1)/2,C*(3-k)/2);const P=T(this,Ke,eP).call(this,d.getImageData(0,0,_,C).data),R=T(this,Ke,_H).call(this,P),M=T(this,Ke,tP).call(this,R),I=T(this,Ke,ZT).call(this,P,_,C,M);return this.processDrawnLines({lines:{curves:I,width:_,height:C},pageWidth:s,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,n,r,i,s){const[o,a,l]=T(this,Ke,TH).call(this,e),[c,d]=T(this,Ke,CH).call(this,o,a,l,Math.hypot(a,l)*u(this,dh).sigmaSFactor,u(this,dh).sigmaR,u(this,dh).kernelSize),h=T(this,Ke,tP).call(this,d),f=T(this,Ke,ZT).call(this,c,a,l,h);return this.processDrawnLines({lines:{curves:f,width:a,height:l},pageWidth:n,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:o,areContours:a}){i%180!==0&&([n,r]=[r,n]);const{curves:l,width:c,height:d}=e,h=e.thickness??0,f=[],p=Math.min(n/c,r/d),m=p/n,g=p/r,v=[];for(const{points:w}of l){const b=o?T(this,Ke,AH).call(this,w):w;if(!b)continue;v.push(b);const k=b.length,_=new Float32Array(k),C=new Float32Array(3*(k===2?2:k-2));if(f.push({line:C,points:_}),k===2){_[0]=b[0]*m,_[1]=b[1]*g,C.set([NaN,NaN,NaN,NaN,_[0],_[1]],0);continue}let[P,R,M,I]=b;P*=m,R*=g,M*=m,I*=g,_.set([P,R,M,I],0),C.set([NaN,NaN,NaN,NaN,P,R],0);for(let j=4;j<k;j+=2){const U=_[j]=b[j]*m,G=_[j+1]=b[j+1]*g;C.set(se.createBezierPoints(P,R,M,I,U,G),(j-2)*3),[P,R,M,I]=[M,I,U,G]}}if(f.length===0)return null;const y=a?new QT:new qw;return y.build(f,n,r,1,i,a?0:h,s),{outline:y,newCurves:v,areContours:a,thickness:h,width:c,height:d}}static async compressSignature({outlines:e,areContours:n,thickness:r,width:i,height:s}){let o=1/0,a=-1/0,l=0;for(const b of e){l+=b.length;for(let k=2,_=b.length;k<_;k++){const C=b[k]-b[k-2];o=Math.min(o,C),a=Math.max(a,C)}}let c;o>=-128&&a<=127?c=Int8Array:o>=-32768&&a<=32767?c=Int16Array:c=Int32Array;const d=e.length,h=Wb+Fg*d,f=new Uint32Array(h);let p=0;f[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(l-2*d)*c.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=i,f[p++]=s,f[p++]=n?0:1,f[p++]=Math.max(0,Math.floor(r??0)),f[p++]=d,f[p++]=c.BYTES_PER_ELEMENT;for(const b of e)f[p++]=b.length-2,f[p++]=b[0],f[p++]=b[1];const m=new CompressionStream("deflate-raw"),g=m.writable.getWriter();await g.ready,g.write(f);const v=c.prototype.constructor;for(const b of e){const k=new v(b.length-2);for(let _=2,C=b.length;_<C;_++)k[_-2]=b[_]-b[_-2];g.write(k)}g.close();const y=await new Response(m.readable).arrayBuffer();return new Uint8Array(y).toBase64()}static async decompressSignature(e){try{const n=Uint8Array.fromBase64(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(n).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let o=null,a=0;for await(const b of r)o||(o=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),o.set(b,a),a+=b.length;const l=new Uint32Array(o.buffer,0,o.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const d=l[2],h=l[3],f=l[4]===0,p=l[5],m=l[6],g=l[7],v=[],y=(Wb+Fg*m)*Uint32Array.BYTES_PER_ELEMENT;let w;switch(g){case Int8Array.BYTES_PER_ELEMENT:w=new Int8Array(o.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:w=new Int16Array(o.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:w=new Int32Array(o.buffer,y);break}a=0;for(let b=0;b<m;b++){const k=l[Fg*b+Wb],_=new Float32Array(k+2);v.push(_);for(let C=0;C<Fg-1;C++)_[C]=l[Fg*b+Wb+C+1];for(let C=0;C<k;C++)_[C+2]=_[C]+w[a++]}return{areContours:f,thickness:p,outlines:v,width:d,height:h}}catch(n){return me(`decompressSignature: ${n}`),null}}}dh=new WeakMap,Ke=new WeakSet,JT=function(e,n,r,i){return r-=e,i-=n,r===0?i>0?0:4:r===1?i+6:2-i},Ls=new WeakMap,kH=function(e,n,r,i,s,o,a){const l=T(this,Ke,JT).call(this,r,i,s,o);for(let c=0;c<8;c++){const d=(-c+l-a+16)%8,h=u(this,Ls)[2*d],f=u(this,Ls)[2*d+1];if(e[(r+h)*n+(i+f)]!==0)return d}return-1},EH=function(e,n,r,i,s,o,a){const l=T(this,Ke,JT).call(this,r,i,s,o);for(let c=0;c<8;c++){const d=(c+l+a+16)%8,h=u(this,Ls)[2*d],f=u(this,Ls)[2*d+1];if(e[(r+h)*n+(i+f)]!==0)return d}return-1},ZT=function(e,n,r,i){const s=e.length,o=new Int32Array(s);for(let d=0;d<s;d++)o[d]=e[d]<=i?1:0;for(let d=1;d<r-1;d++)o[d*n]=o[d*n+n-1]=0;for(let d=0;d<n;d++)o[d]=o[n*r-1-d]=0;let a=1,l;const c=[];for(let d=1;d<r-1;d++){l=1;for(let h=1;h<n-1;h++){const f=d*n+h,p=o[f];if(p===0)continue;let m=d,g=h;if(p===1&&o[f-1]===0)a+=1,g-=1;else if(p>=1&&o[f+1]===0)a+=1,g+=1,p>1&&(l=p);else{p!==1&&(l=Math.abs(p));continue}const v=[h,d],y=g===h+1,w={isHole:y,points:v,id:a,parent:0};c.push(w);let b;for(const j of c)if(j.id===l){b=j;break}b?b.isHole?w.parent=y?b.parent:l:w.parent=y?l:b.parent:w.parent=y?l:0;const k=T(this,Ke,kH).call(this,o,n,d,h,m,g,0);if(k===-1){o[f]=-a,o[f]!==1&&(l=Math.abs(o[f]));continue}let _=u(this,Ls)[2*k],C=u(this,Ls)[2*k+1];const P=d+_,R=h+C;m=P,g=R;let M=d,I=h;for(;;){const j=T(this,Ke,EH).call(this,o,n,M,I,m,g,1);_=u(this,Ls)[2*j],C=u(this,Ls)[2*j+1];const U=M+_,G=I+C;v.push(G,U);const B=M*n+I;if(o[B+1]===0?o[B]=-a:o[B]===1&&(o[B]=a),U===d&&G===h&&M===P&&I===R){o[f]!==1&&(l=Math.abs(o[f]));break}else m=M,g=I,M=U,I=G}}}return c},qx=function(e,n,r,i){if(r-n<=4){for(let P=n;P<r-2;P+=2)i.push(e[P],e[P+1]);return}const s=e[n],o=e[n+1],a=e[r-4]-s,l=e[r-3]-o,c=Math.hypot(a,l),d=a/c,h=l/c,f=d*o-h*s,p=l/a,m=1/c,g=Math.atan(p),v=Math.cos(g),y=Math.sin(g),w=m*(Math.abs(v)+Math.abs(y)),b=m*(1-w+w**2),k=Math.max(Math.atan(Math.abs(y+v)*b),Math.atan(Math.abs(y-v)*b));let _=0,C=n;for(let P=n+2;P<r-2;P+=2){const R=Math.abs(f-d*e[P+1]+h*e[P]);R>_&&(C=P,_=R)}_>(c*k)**2?(T(this,Ke,qx).call(this,e,n,C+2,i),T(this,Ke,qx).call(this,e,C,r,i)):i.push(s,o)},AH=function(e){const n=[],r=e.length;return T(this,Ke,qx).call(this,e,0,r,n),n.push(e[r-2],e[r-1]),n.length<=4?null:n},CH=function(e,n,r,i,s,o){const a=new Float32Array(o**2),l=-2*i**2,c=o>>1;for(let g=0;g<o;g++){const v=(g-c)**2;for(let y=0;y<o;y++)a[g*o+y]=Math.exp((v+(y-c)**2)/l)}const d=new Float32Array(256),h=-2*s**2;for(let g=0;g<256;g++)d[g]=Math.exp(g**2/h);const f=e.length,p=new Uint8Array(f),m=new Uint32Array(256);for(let g=0;g<r;g++)for(let v=0;v<n;v++){const y=g*n+v,w=e[y];let b=0,k=0;for(let C=0;C<o;C++){const P=g+C-c;if(!(P<0||P>=r))for(let R=0;R<o;R++){const M=v+R-c;if(M<0||M>=n)continue;const I=e[P*n+M],j=a[C*o+R]*d[Math.abs(I-w)];b+=I*j,k+=j}}const _=p[y]=Math.round(b/k);m[_]++}return[p,m]},_H=function(e){const n=new Uint32Array(256);for(const r of e)n[r]++;return n},eP=function(e){const n=e.length,r=new Uint8ClampedArray(n>>2);let i=-1/0,s=1/0;for(let a=0,l=r.length;a<l;a++){const c=r[a]=e[a<<2];i=Math.max(i,c),s=Math.min(s,c)}const o=255/(i-s);for(let a=0,l=r.length;a<l;a++)r[a]=(r[a]-s)*o;return r},tP=function(e){let n,r=-1/0,i=-1/0;const s=e.findIndex(l=>l!==0);let o=s,a=s;for(n=s;n<256;n++){const l=e[n];l>r&&(n-o>i&&(i=n-o,a=n-1),r=l,o=n)}for(n=a-1;n>=0&&!(e[n]>e[n+1]);n--);return n},TH=function(e){const n=e,{width:r,height:i}=e,{maxDim:s}=u(this,dh);let o=r,a=i;if(r>s||i>s){let f=r,p=i,m=Math.log2(Math.max(r,i)/s);const g=Math.floor(m);m=m===g?g-1:g;for(let y=0;y<m;y++){o=Math.ceil(f/2),a=Math.ceil(p/2);const w=new OffscreenCanvas(o,a);w.getContext("2d").drawImage(e,0,0,f,p,0,0,o,a),f=o,p=a,e!==n&&e.close(),e=w.transferToImageBitmap()}const v=Math.min(s/o,s/a);o=Math.round(o*v),a=Math.round(a*v)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,o,a),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,a);const d=c.getImageData(0,0,o,a).data;return[T(this,Ke,eP).call(this,d),o,a]},A(Ga,Ke),A(Ga,dh,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),A(Ga,Ls,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class YI extends yH{constructor(){super(),super.updateProperties({fill:pt._defaultLineColor,"stroke-width":0})}clone(){const e=new YI;return e.updateAll(this),e}}class QI extends Rk{constructor(e){super(e),super.updateProperties({stroke:pt._defaultLineColor,"stroke-width":1})}clone(){const e=new QI(this._viewParameters);return e.updateAll(this),e}}var Dc,Po,Mc,hh;const Qr=class Qr extends oS{constructor(n){super({...n,mustBeCommitted:!0,name:"signatureEditor"});A(this,Dc,!1);A(this,Po,null);A(this,Mc,null);A(this,hh,null);this._willKeepAspectRatio=!0,S(this,Mc,n.signatureData||null),S(this,Po,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(n,r){pt.initialize(n,r),this._defaultDrawingOptions=new YI,this._defaultDrawnSignatureOptions=new QI(r.viewParameters)}static getDefaultDrawingOptions(n){const r=this._defaultDrawingOptions.clone();return r.updateProperties(n),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return ge(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,Po)}}static computeTelemetryFinalData(n){const r=n.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let n,r;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,n=this.x,r=this.y),super.render(),this._drawId===null)if(u(this,Mc)){const{lines:s,mustSmooth:o,areContours:a,description:l,uuid:c,heightInPage:d}=u(this,Mc),{rawDims:{pageWidth:h,pageHeight:f},rotation:p}=this.parent.viewport,m=Ga.processDrawnLines({lines:s,pageWidth:h,pageHeight:f,rotation:p,innerMargin:Qr._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(m,d,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,Po)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(n,r)),this.div}setUuid(n){S(this,hh,n),this.addEditToolbar()}getUuid(){return u(this,hh)}get description(){return u(this,Po)}set description(n){S(this,Po,n),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:n})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(n)}))}getSignaturePreview(){const{newCurves:n,areContours:r,thickness:i,width:s,height:o}=u(this,Mc),a=Math.max(s,o),l=Ga.processDrawnLines({lines:{curves:n.map(c=>({points:c})),thickness:i,width:s,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(n,r,i,s){const{x:o,y:a}=this,{outline:l}=S(this,Mc,n);S(this,Dc,l instanceof QT),this.description=i;let c;u(this,Dc)?c=Qr.getDefaultDrawingOptions():(c=Qr._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[,d]=this.pageDimensions;let h=r/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return Ga.process(n,r,i,s,Qr._INNER_MARGIN)}getFromText(n,r){const{rawDims:{pageWidth:i,pageHeight:s},rotation:o}=this.parent.viewport;return Ga.extractContoursFromText(n,r,i,s,o,Qr._INNER_MARGIN)}getDrawnSignature(n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return Ga.processDrawnLines({lines:n,pageWidth:r,pageHeight:i,rotation:s,innerMargin:Qr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:n,thickness:r}){n?this._drawingOptions=Qr.getDefaultDrawingOptions():(this._drawingOptions=Qr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(n=!1){if(this.isEmpty())return null;const{lines:r,points:i}=this.serializeDraw(n),{_drawingOptions:{"stroke-width":s}}=this,o=Object.assign(super.serialize(n),{isSignature:!0,areContours:u(this,Dc),color:[0,0,0],thickness:u(this,Dc)?0:s});return this.addComment(o),n?(o.paths={lines:r,points:i},o.uuid=u(this,hh),o.isCopy=!0):o.lines=r,u(this,Po)&&(o.accessibilityData={type:"Figure",alt:u(this,Po)}),o}static deserializeDraw(n,r,i,s,o,a){return a.areContours?QT.deserialize(n,r,i,s,o,a):qw.deserialize(n,r,i,s,o,a)}static async deserialize(n,r,i){var o;const s=await super.deserialize(n,r,i);return S(s,Dc,n.areContours),s.description=((o=n.accessibilityData)==null?void 0:o.alt)||"",S(s,hh,n.uuid),s}};Dc=new WeakMap,Po=new WeakMap,Mc=new WeakMap,hh=new WeakMap,H(Qr,"_type","signature"),H(Qr,"_editorType",we.SIGNATURE),H(Qr,"_defaultDrawingOptions",null);let nP=Qr;var Et,An,Oc,Ua,Lc,Mm,za,fh,Ro,gi,Om,$e,fy,py,Kx,Xx,Yx,iP,Qx,PH;class rP extends pt{constructor(n){super({...n,name:"stampEditor"});A(this,$e);A(this,Et,null);A(this,An,null);A(this,Oc,null);A(this,Ua,null);A(this,Lc,null);A(this,Mm,"");A(this,za,null);A(this,fh,!1);A(this,Ro,null);A(this,gi,!1);A(this,Om,!1);S(this,Ua,n.bitmapUrl),S(this,Lc,n.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(n,r){pt.initialize(n,r)}static isHandlingMimeForPasting(n){return $_.includes(n)}static paste(n,r){r.pasteEditor({mode:we.STAMP},{bitmapFile:n.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var n;return{type:"stamp",hasAltText:!!((n=this.altTextData)!=null&&n.altText)}}static computeTelemetryFinalData(n){const r=n.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(n=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:a}=n||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:s,width:o,height:a,channels:s.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),r&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var n;u(this,An)&&(S(this,Et,null),this._uiManager.imageManager.deleteId(u(this,An)),(n=u(this,za))==null||n.remove(),S(this,za,null),u(this,Ro)&&(clearTimeout(u(this,Ro)),S(this,Ro,null))),super.remove()}rebuild(){if(!this.parent){u(this,An)&&T(this,$e,Kx).call(this);return}super.rebuild(),this.div!==null&&(u(this,An)&&u(this,za)===null&&T(this,$e,Kx).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(n){this._isDraggable=!0,n&&this.div.focus()}isEmpty(){return!(u(this,Oc)||u(this,Et)||u(this,Ua)||u(this,Lc)||u(this,An)||u(this,fh))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let n,r;return this._isCopy&&(n=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,fh)||(u(this,Et)?T(this,$e,Xx).call(this):T(this,$e,Kx).call(this)),this._isCopy&&this._moveAfterPaste(n,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(n,r){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(n,r);r.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(S(this,An,i),s&&S(this,Et,s),S(this,fh,!1),T(this,$e,Xx).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Ro)!==null&&clearTimeout(u(this,Ro)),S(this,Ro,setTimeout(()=>{S(this,Ro,null),T(this,$e,iP).call(this)},200))}copyCanvas(n,r,i=!1){n||(n=224);const{width:s,height:o}=u(this,Et),a=new Ho;let l=u(this,Et),c=s,d=o,h=null;if(r){if(s>r||o>r){const P=Math.min(r/s,r/o);c=Math.floor(s*P),d=Math.floor(o*P)}h=document.createElement("canvas");const p=h.width=Math.ceil(c*a.sx),m=h.height=Math.ceil(d*a.sy);u(this,gi)||(l=T(this,$e,Yx).call(this,p,m));const g=h.getContext("2d");g.filter=this._uiManager.hcmFilter;let v="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":mhe.isDarkMode&&(v="#8f8f9d",y="#42414d");const w=15,b=w*a.sx,k=w*a.sy,_=new OffscreenCanvas(b*2,k*2),C=_.getContext("2d");C.fillStyle=v,C.fillRect(0,0,b*2,k*2),C.fillStyle=y,C.fillRect(0,0,b,k),C.fillRect(b,k,b,k),g.fillStyle=g.createPattern(_,"repeat"),g.fillRect(0,0,p,m),g.drawImage(l,0,0,l.width,l.height,0,0,p,m)}let f=null;if(i){let p,m;if(a.symmetric&&l.width<n&&l.height<n)p=l.width,m=l.height;else if(l=u(this,Et),s>n||o>n){const y=Math.min(n/s,n/o);p=Math.floor(s*y),m=Math.floor(o*y),u(this,gi)||(l=T(this,$e,Yx).call(this,p,m))}const v=new OffscreenCanvas(p,m).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,p,m),f={width:p,height:m,data:v.getImageData(0,0,p,m).data}}return{canvas:h,width:c,height:d,imageData:f}}static async deserialize(n,r,i){var v;let s=null,o=!1;if(n instanceof WV){const{data:{rect:y,rotation:w,id:b,structParent:k,popupRef:_,richText:C,contentsObj:P,creationDate:R,modificationDate:M},container:I,parent:{page:{pageNumber:j}},canvas:U}=n;let G,B;U?(delete n.canvas,{id:G,bitmap:B}=i.imageManager.getFromCanvas(I.id,U),U.remove()):(o=!0,n._hasNoCanvas=!0);const V=((v=await r._structTree.getAriaAttributes(`${jf}${b}`))==null?void 0:v.get("aria-label"))||"";s=n={annotationType:we.STAMP,bitmapId:G,bitmap:B,pageIndex:j-1,rect:y.slice(0),rotation:w,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:V},isSvg:!1,structParent:k,popupRef:_,richText:C,comment:(P==null?void 0:P.str)||null,creationDate:R,modificationDate:M}}const a=await super.deserialize(n,r,i),{rect:l,bitmap:c,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:p}=n;o?(i.addMissingCanvas(n.id,a),S(a,fh,!0)):h&&i.imageManager.isValidId(h)?(S(a,An,h),c&&S(a,Et,c)):S(a,Ua,d),S(a,gi,f);const[m,g]=a.pageDimensions;return a.width=(l[2]-l[0])/m,a.height=(l[3]-l[1])/g,p&&(a.altTextData=p),a._initialData=s,n.comment&&a.setCommentData(n),S(a,Om,!!s),a}serialize(n=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(n),{bitmapId:u(this,An),isSvg:u(this,gi)});if(this.addComment(i),n)return i.bitmapUrl=T(this,$e,Qx).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:o}=this.serializeAltText(!1);if(!s&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=T(this,$e,PH).call(this,i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(r===null)return i;r.stamps||(r.stamps=new Map);const a=u(this,gi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(u(this,An)))r.stamps.set(u(this,An),{area:a,serialized:i}),i.bitmap=T(this,$e,Qx).call(this,!1);else if(u(this,gi)){const l=r.stamps.get(u(this,An));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=T(this,$e,Qx).call(this,!1))}return i}renderAnnotationElement(n){return this.deleted?(n.hide(),null):(n.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Et=new WeakMap,An=new WeakMap,Oc=new WeakMap,Ua=new WeakMap,Lc=new WeakMap,Mm=new WeakMap,za=new WeakMap,fh=new WeakMap,Ro=new WeakMap,gi=new WeakMap,Om=new WeakMap,$e=new WeakSet,fy=function(n,r=!1){if(!n){this.remove();return}S(this,Et,n.bitmap),r||(S(this,An,n.id),S(this,gi,n.isSvg)),n.file&&S(this,Mm,n.file.name),T(this,$e,Xx).call(this)},py=function(){if(S(this,Oc,null),this._uiManager.enableWaiting(!1),!!u(this,za)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Et)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Et)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Kx=function(){if(u(this,An)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,An)).then(i=>T(this,$e,fy).call(this,i,!0)).finally(()=>T(this,$e,py).call(this));return}if(u(this,Ua)){const i=u(this,Ua);S(this,Ua,null),this._uiManager.enableWaiting(!0),S(this,Oc,this._uiManager.imageManager.getFromUrl(i).then(s=>T(this,$e,fy).call(this,s)).finally(()=>T(this,$e,py).call(this)));return}if(u(this,Lc)){const i=u(this,Lc);S(this,Lc,null),this._uiManager.enableWaiting(!0),S(this,Oc,this._uiManager.imageManager.getFromFile(i).then(s=>T(this,$e,fy).call(this,s)).finally(()=>T(this,$e,py).call(this)));return}const n=document.createElement("input");n.type="file",n.accept=$_.join(",");const r=this._uiManager._signal;S(this,Oc,new Promise(i=>{n.addEventListener("change",async()=>{if(!n.files||n.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(n.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),T(this,$e,fy).call(this,s)}i()},{signal:r}),n.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>T(this,$e,py).call(this))),n.click()},Xx=function(){var c;const{div:n}=this;let{width:r,height:i}=u(this,Et);const[s,o]=this.pageDimensions,a=.75;if(this.width)r=this.width*s,i=this.height*o;else if(r>a*s||i>a*o){const d=Math.min(a*s/r,a*o/i);r*=d,i*=d}this._uiManager.enableWaiting(!1);const l=S(this,za,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=r/s,this.height=i/o,this.setDims(),(c=this._initialOptions)!=null&&c.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(n.hidden=!1),T(this,$e,iP).call(this),u(this,Om)||(this.parent.addUndoableEditor(this),S(this,Om,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Mm)&&this.div.setAttribute("aria-description",u(this,Mm)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Yx=function(n,r){const{width:i,height:s}=u(this,Et);let o=i,a=s,l=u(this,Et);for(;o>2*n||a>2*r;){const c=o,d=a;o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(o,a);h.getContext("2d").drawImage(l,0,0,c,d,0,0,o,a),l=h.transferToImageBitmap()}return l},iP=function(){const[n,r]=this.parentDimensions,{width:i,height:s}=this,o=new Ho,a=Math.ceil(i*n*o.sx),l=Math.ceil(s*r*o.sy),c=u(this,za);if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const d=u(this,gi)?u(this,Et):T(this,$e,Yx).call(this,a,l),h=c.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,a,l)},Qx=function(n){if(n){if(u(this,gi)){const s=this._uiManager.imageManager.getSvgUrl(u(this,An));if(s)return s}const r=document.createElement("canvas");return{width:r.width,height:r.height}=u(this,Et),r.getContext("2d").drawImage(u(this,Et),0,0),r.toDataURL()}if(u(this,gi)){const[r,i]=this.pageDimensions,s=Math.round(this.width*r*du.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*du.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,o);return a.getContext("2d").drawImage(u(this,Et),0,0,u(this,Et).width,u(this,Et).height,0,0,s,o),a.transferToImageBitmap()}return structuredClone(u(this,Et))},PH=function(n){var a;const{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,s=n.pageIndex===r,o=(((a=n.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&o,isSameAltText:o}},H(rP,"_type","stamp"),H(rP,"_editorType",we.STAMP);var ph,Lm,jc,Fc,Va,Lr,Bc,jm,Fm,js,Ha,Cn,Wa,$c,Bm,le,Uc,at,oP,RH,to,aP,lP,Jx;const Ss=class Ss{constructor({uiManager:e,pageIndex:n,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:d}){A(this,at);A(this,ph);A(this,Lm,!1);A(this,jc,null);A(this,Fc,null);A(this,Va,null);A(this,Lr,new Map);A(this,Bc,!1);A(this,jm,!1);A(this,Fm,!1);A(this,js,null);A(this,Ha,null);A(this,Cn,null);A(this,Wa,null);A(this,$c,null);A(this,Bm,-1);A(this,le);const h=[...u(Ss,Uc).values()];if(!Ss._initialized){Ss._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),S(this,le,e),this.pageIndex=n,this.div=r,S(this,ph,s),S(this,jc,o),this.viewport=c,S(this,Cn,l),this.drawLayer=a,this._structTree=i,u(this,le).addLayer(this)}updatePageIndex(e){this.pageIndex=e}get isEmpty(){return u(this,Lr).size===0}get isInvisible(){return this.isEmpty&&u(this,le).getMode()===we.NONE}updateToolbar(e){u(this,le).updateToolbar(e)}updateMode(e=u(this,le).getMode()){switch(T(this,at,Jx).call(this),e){case we.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case we.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case we.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),e===we.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const r of u(Ss,Uc).values())n.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){var n;return e===((n=u(this,Cn))==null?void 0:n.div)}setEditingState(e){u(this,le).setEditingState(e)}addCommands(e){u(this,le).addCommands(e)}cleanUndoStack(e){u(this,le).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var n;(n=u(this,jc))==null||n.togglePointerEvents(e)}async enable(){var r;S(this,Fm,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(r=u(this,$c))==null||r.abort(),S(this,$c,null);const e=new Set;for(const i of u(this,at,oP))i.enableEditing(),i.show(!0),i.annotationElementId&&(u(this,le).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const n=u(this,jc);if(n)for(const i of n.getEditableAnnotations()){if(i.hide(),u(this,le).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}S(this,Fm,!1),u(this,le)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(S(this,jm,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),u(this,Cn)&&!u(this,$c)){S(this,$c,new AbortController);const s=u(this,le).combinedSignal(u(this,$c));u(this,Cn).div.addEventListener("pointerdown",o=>{const{clientX:l,clientY:c,timeStamp:d}=o,h=u(this,Bm);if(d-h>500){S(this,Bm,d);return}S(this,Bm,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(l,c);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let m;const g=new RegExp(`^${wv}[0-9]+$`);for(const y of p)if(g.test(y.id)){m=y.id;break}if(!m)return;const v=u(this,Lr).get(m);(v==null?void 0:v.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),v.dblclick(o))},{signal:s,capture:!0})}const e=u(this,jc),n=[];if(e){const s=new Map,o=new Map;for(const l of u(this,at,oP)){if(l.disableEditing(),!l.annotationElementId){n.push(l);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else o.set(l.annotationElementId,l);(i=this.getEditableAnnotation(l.annotationElementId))==null||i.show(),l.remove()}const a=e.getEditableAnnotations();for(const l of a){const{id:c}=l.data;if(u(this,le).isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let d=o.get(c);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=s.get(c),d&&(u(this,le).addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}T(this,at,Jx).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of u(Ss,Uc).values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(n),S(this,jm,!1)}getEditableAnnotation(e){var n;return((n=u(this,jc))==null?void 0:n.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,le).getActive()!==e&&u(this,le).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,Cn))!=null&&e.div&&!u(this,Wa)){S(this,Wa,new AbortController);const n=u(this,le).combinedSignal(u(this,Wa));u(this,Cn).div.addEventListener("pointerdown",T(this,at,RH).bind(this),{signal:n}),u(this,Cn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,Cn))!=null&&e.div&&u(this,Wa)&&(u(this,Wa).abort(),S(this,Wa,null),u(this,Cn).div.classList.remove("highlighting"))}enableClick(){if(u(this,Fc))return;S(this,Fc,new AbortController);const e=u(this,le).combinedSignal(u(this,Fc));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){var e;(e=u(this,Fc))==null||e.abort(),S(this,Fc,null)}attach(e){u(this,Lr).set(e.id,e);const{annotationElementId:n}=e;n&&u(this,le).isDeletedAnnotationElement(n)&&u(this,le).removeDeletedAnnotationElement(e)}detach(e){var n;u(this,Lr).delete(e.id),(n=u(this,ph))==null||n.removePointerInTextLayer(e.contentDiv),!u(this,jm)&&e.annotationElementId&&u(this,le).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,le).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var n;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,le).addDeletedAnnotationElement(e),pt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(n=e.parent)==null||n.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,le).addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,Fm)),u(this,le).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!u(this,Va)&&(e._focusEventsAllowed=!1,S(this,Va,setTimeout(()=>{S(this,Va,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,le)._signal}),n.focus())},0))),e._structTreeParentId=(r=u(this,ph))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:n,undo:r,mustExec:!1})}getEditorByUID(e){for(const n of u(this,Lr).values())if(n.uid===e)return n;return null}getNextId(){return u(this,le).getId()}combinedSignal(e){return u(this,le).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,at,to))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,n){this.updateToolbar(e),await u(this,le).updateMode(e.mode);const{offsetX:r,offsetY:i}=T(this,at,lP).call(this),s=this.getNextId(),o=T(this,at,aP).call(this,{parent:this,id:s,x:r,y:i,uiManager:u(this,le),isCentered:!0,...n});o&&this.add(o)}async deserialize(e){var n;return await((n=u(Ss,Uc).get(e.annotationType??e.annotationEditorType))==null?void 0:n.deserialize(e,this,u(this,le)))||null}createAndAddNewEditor(e,n,r={}){const i=this.getNextId(),s=T(this,at,aP).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:u(this,le),isCentered:n,...r});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(T(this,at,lP).call(this),!0,e)}setSelected(e){u(this,le).setSelected(e)}toggleSelected(e){u(this,le).toggleSelected(e)}unselect(e){u(this,le).unselect(e)}pointerup(e){var i;const{isMac:n}=vn.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div||!u(this,Bc)||(S(this,Bc,!1),(i=u(this,at,to))!=null&&i.isDrawer&&u(this,at,to).supportMultipleDrawings))return;if(!u(this,Lm)){S(this,Lm,!0);return}const r=u(this,le).getMode();if(r===we.STAMP||r===we.SIGNATURE){u(this,le).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(u(this,le).getMode()===we.HIGHLIGHT&&this.enableTextSelection(),u(this,Bc)){S(this,Bc,!1);return}const{isMac:n}=vn.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(S(this,Bc,!0),(i=u(this,at,to))!=null&&i.isDrawer){this.startDrawingSession(e);return}const r=u(this,le).getActive();S(this,Lm,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,js)){u(this,at,to).startDrawing(this,u(this,le),!1,e);return}u(this,le).setCurrentDrawingSession(this),S(this,js,new AbortController);const n=u(this,le).combinedSignal(u(this,js));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(S(this,Ha,null),this.commitOrRemove())},{signal:n}),u(this,at,to).startDrawing(this,u(this,le),!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&S(this,Ha,n);return}u(this,Ha)&&setTimeout(()=>{var n;(n=u(this,Ha))==null||n.focus(),S(this,Ha,null)},0)}endDrawingSession(e=!1){return u(this,js)?(u(this,le).setCurrentDrawingSession(null),u(this,js).abort(),S(this,js,null),S(this,Ha,null),u(this,at,to).endDrawing(e)):null}findNewParent(e,n,r){const i=u(this,le).findParent(n,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return u(this,js)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,js)&&u(this,at,to).onScaleChangingWhenDrawing(this)}destroy(){var e,n;this.commitOrRemove(),((e=u(this,le).getActive())==null?void 0:e.parent)===this&&(u(this,le).commitOrRemove(),u(this,le).setActiveEditor(null)),u(this,Va)&&(clearTimeout(u(this,Va)),S(this,Va,null));for(const r of u(this,Lr).values())(n=u(this,ph))==null||n.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,u(this,Lr).clear(),u(this,le).removeLayer(this)}render({viewport:e}){this.viewport=e,Nh(this.div,e);for(const n of u(this,le).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){u(this,le).commitOrRemove(),T(this,at,Jx).call(this);const n=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Nh(this.div,{rotation:r}),n!==r)for(const i of u(this,Lr).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return u(this,le).viewParameters.realScale}};ph=new WeakMap,Lm=new WeakMap,jc=new WeakMap,Fc=new WeakMap,Va=new WeakMap,Lr=new WeakMap,Bc=new WeakMap,jm=new WeakMap,Fm=new WeakMap,js=new WeakMap,Ha=new WeakMap,Cn=new WeakMap,Wa=new WeakMap,$c=new WeakMap,Bm=new WeakMap,le=new WeakMap,Uc=new WeakMap,at=new WeakSet,oP=function(){return u(this,Lr).size!==0?u(this,Lr).values():u(this,le).getEditors(this.pageIndex)},RH=function(e){u(this,le).unselectAll();const{target:n}=e;if(n===u(this,Cn).div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&u(this,Cn).div.contains(n)){const{isMac:r}=vn.platform;if(e.button!==0||e.ctrlKey&&r)return;u(this,le).showAllEditors("highlight",!0,!0),u(this,Cn).div.classList.add("free"),this.toggleDrawing(),sS.startHighlighting(this,u(this,le).direction==="ltr",{target:u(this,Cn).div,x:e.x,y:e.y}),u(this,Cn).div.addEventListener("pointerup",()=>{u(this,Cn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,le)._signal}),e.preventDefault()}},to=function(){return u(Ss,Uc).get(u(this,le).getMode())},aP=function(e){const n=u(this,at,to);return n?new n.prototype.constructor(e):null},lP=function(){const{x:e,y:n,width:r,height:i}=this.boundingClientRect,s=Math.max(0,e),o=Math.max(0,n),a=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,n+i),c=(s+a)/2-e,d=(o+l)/2-n,[h,f]=this.viewport.rotation%180===0?[c,d]:[d,c];return{offsetX:h,offsetY:f}},Jx=function(){for(const e of u(this,Lr).values())e.isEmpty()&&e.remove()},H(Ss,"_initialized",!1),A(Ss,Uc,new Map([$T,YT,rP,sS,nP].map(e=>[e._editorType,e])));let sP=Ss;var Fs,hr,mh,Sw,AS,IH,Go,uP,NH,dP;const un=class un{constructor(){A(this,Go);A(this,Fs,null);A(this,hr,new Map);A(this,mh,new Map)}setParent(e){if(!u(this,Fs)){S(this,Fs,e);return}if(u(this,Fs)!==e){if(u(this,hr).size>0)for(const n of u(this,hr).values())n.remove(),e.append(n);S(this,Fs,e)}}static get _svgFactory(){return ge(this,"_svgFactory",new rS)}draw(e,n=!1,r=!1){const i=Lt(un,Sw)._++,s=T(this,Go,uP).call(this),o=un._svgFactory.createElement("defs");s.append(o);const a=un._svgFactory.createElement("path");o.append(a);const l=`path_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),n&&u(this,mh).set(i,a);const c=r?T(this,Go,NH).call(this,o,l):null,d=un._svgFactory.createElement("use");return s.append(d),d.setAttribute("href",`#${l}`),this.updateProperties(s,e),u(this,hr).set(i,s),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,n){const r=Lt(un,Sw)._++,i=T(this,Go,uP).call(this),s=un._svgFactory.createElement("defs");i.append(s);const o=un._svgFactory.createElement("path");s.append(o);const a=`path_${r}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(n){const h=un._svgFactory.createElement("mask");s.append(h),l=`mask_${r}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const f=un._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=un._svgFactory.createElement("use");h.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const c=un._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const d=c.cloneNode();return i.append(d),c.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(i,e),u(this,hr).set(r,i),r}finalizeDraw(e,n){u(this,mh).delete(e),this.updateProperties(e,n)}updateProperties(e,n){var l;if(!n)return;const{root:r,bbox:i,rootClass:s,path:o}=n,a=typeof e=="number"?u(this,hr).get(e):e;if(a){if(r&&T(this,Go,dP).call(this,a,r),i&&T(l=un,AS,IH).call(l,a,i),s){const{classList:c}=a;for(const[d,h]of Object.entries(s))c.toggle(d,h)}if(o){const d=a.firstElementChild.firstElementChild;T(this,Go,dP).call(this,d,o)}}}updateParent(e,n){if(n===this)return;const r=u(this,hr).get(e);r&&(u(n,Fs).append(r),u(this,hr).delete(e),u(n,hr).set(e,r))}remove(e){u(this,mh).delete(e),u(this,Fs)!==null&&(u(this,hr).get(e).remove(),u(this,hr).delete(e))}destroy(){S(this,Fs,null);for(const e of u(this,hr).values())e.remove();u(this,hr).clear(),u(this,mh).clear()}};Fs=new WeakMap,hr=new WeakMap,mh=new WeakMap,Sw=new WeakMap,AS=new WeakSet,IH=function(e,[n,r,i,s]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*n}%`,o.width=`${100*i}%`,o.height=`${100*s}%`},Go=new WeakSet,uP=function(){const e=un._svgFactory.create(1,1,!0);return u(this,Fs).append(e),e.setAttribute("aria-hidden",!0),e},NH=function(e,n){const r=un._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${n}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=un._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${n}`),s.classList.add("clip"),i},dP=function(e,n){for(const[r,i]of Object.entries(n))i===null?e.removeAttribute(r):e.setAttribute(r,i)},A(un,AS),A(un,Sw,0);let cP=un;globalThis._pdfjsTestingUtils={HighlightOutliner:zT};globalThis.pdfjsLib={AbortException:uu,AnnotationEditorLayer:sP,AnnotationEditorParamsType:Me,AnnotationEditorType:we,AnnotationEditorUIManager:Dh,AnnotationLayer:FT,AnnotationMode:jl,AnnotationType:en,applyOpacity:yhe,build:Efe,ColorPicker:tS,createValidAbsoluteUrl:u5,CSSConstants:ghe,DOMSVGFactory:rS,DrawLayer:cP,FeatureTest:vn,fetchData:Vw,findContrastColor:vhe,getDocument:PV,getFilenameFromUrl:uhe,getPdfFilenameFromUrl:dhe,getRGB:Ww,getUuid:h5,getXfaPageViewport:fhe,GlobalWorkerOptions:Do,ImageKind:vx,InvalidPDFException:F_,isDataScheme:Ek,isPdfFile:HI,isValidExplicitDest:Phe,MathClamp:Bn,noContextMenu:us,normalizeUnicode:lhe,OPS:bv,OutputScale:Ho,PagesMapper:Sv,PasswordResponses:Jde,PDFDataRangeTransport:RV,PDFDateString:X1,PDFWorker:Ev,PermissionFlag:Qde,PixelsPerInch:du,RenderingCancelledException:VI,renderRichText:p5,ResponseException:K1,setLayerDimensions:Nh,shadow:ge,SignatureExtractor:Ga,stopEvent:Ht,SupportedImageMimeTypes:$_,TextLayer:kv,TouchManager:Q1,updateUrlHash:d5,Util:re,VerbosityLevel:bk,version:kfe,XfaLayer:f5};const Kfe="/playbook-companion/assets/pdf.worker-BA9kU3Pw.mjs";Do.workerSrc=Kfe;async function DH(t){const e=await t.arrayBuffer(),n=await PV({data:e}).promise,r=[];for(let i=1;i<=n.numPages;i++){const a=(await(await n.getPage(i)).getTextContent()).items.map(l=>"str"in l?l.str:"").join(" ");r.push(a)}return r.join(`

`)}const MH={confluence:{name:"Confluence",icon:"C"},notion:{name:"Notion",icon:"N"},pdf:{name:"PDF Upload",icon:"P"}};function Xfe(t){const e=Date.now()-new Date(t).getTime(),n=Math.floor(e/6e4);if(n<1)return"just now";if(n<60)return`${n}m ago`;const r=Math.floor(n/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}const Yfe=()=>{const{data:t,isLoading:e}=oz(),{data:n,isLoading:r}=Yde(),{data:i}=DI(),s=az(),o=a5(),a=l5(),l=c5(),c=E.useRef(null),d=Yce(),[h,f]=E.useState(!1),[p,m]=E.useState(null),[g,v]=E.useState(!1),[y,w]=E.useState(null),b=(i==null?void 0:i.length)??0;n==null||n[0];const k=async R=>{var I;const M=(I=R.target.files)==null?void 0:I[0];if(M){w(null),f(!0);try{const j=M.name.endsWith(".pdf")?await DH(M):await M.text();await o.mutateAsync({provider:"pdf",content:j})}catch(j){w(j.message)}finally{f(!1),c.current&&(c.current.value="")}}},_=async R=>{w(null),m(R);try{R==="notion"?await a.mutateAsync():R==="confluence"&&await l.mutateAsync(void 0)}catch(M){w(M.message)}finally{m(null)}},C=async R=>{w(null);try{await s(R)}catch(M){w(M.message)}},P=new Set((t??[]).map(R=>R.provider));return x.jsxs("div",{className:"max-w-2xl space-y-6",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-lg font-bold text-foreground",children:"Integrations"}),x.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Connect a source or upload a file to import your playbook.",b>0&&x.jsxs("span",{className:"text-foreground font-medium",children:[" ",b," sections currently loaded."]})]})]}),y&&x.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-destructive/30 bg-destructive/5 p-3",children:[x.jsx(Vg,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),x.jsx("p",{className:"text-xs text-destructive",children:y})]}),x.jsx("input",{ref:c,type:"file",accept:".pdf,.txt,.md",className:"hidden",onChange:k}),x.jsxs("div",{className:"space-y-3",children:[x.jsx(D2,{provider:"confluence",connected:P.has("confluence"),loading:e,reimporting:p==="confluence",onConnect:()=>C("confluence"),onReimport:()=>_("confluence")}),x.jsx(D2,{provider:"notion",connected:P.has("notion"),loading:e,reimporting:p==="notion",onConnect:()=>C("notion"),onReimport:()=>_("notion")}),x.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-border bg-card p-4",children:[x.jsx("span",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-sm font-bold text-primary shrink-0",children:"P"}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"text-sm font-semibold text-foreground",children:"PDF / Text Upload"}),x.jsx("div",{className:"text-xs text-muted-foreground",children:"Upload a .pdf, .txt, or .md file"})]}),x.jsx("button",{onClick:()=>{var R;return(R=c.current)==null?void 0:R.click()},disabled:h,className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-medium transition-colors gradient-primary text-primary-foreground disabled:opacity-50",children:h?x.jsxs(x.Fragment,{children:[x.jsx(yn,{className:"w-3.5 h-3.5 animate-spin"})," Uploading..."]}):x.jsxs(x.Fragment,{children:[x.jsx(BB,{className:"w-3.5 h-3.5"})," Upload"]})})]})]}),!r&&n&&n.length>0&&x.jsxs("div",{children:[x.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Import history"}),x.jsx("div",{className:"space-y-2",children:n.slice(0,5).map(R=>{const M=MH[R.provider]??{name:R.provider,icon:"?"};return x.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-muted/30 px-4 py-2.5",children:[x.jsx("span",{className:"w-7 h-7 rounded-md bg-primary/10 flex items-center justify-center text-[11px] font-bold text-primary shrink-0",children:M.icon}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("span",{className:"text-xs font-medium text-foreground",children:M.name}),R.metadata&&R.metadata.sections_created!=null&&x.jsxs("span",{className:"text-xs text-muted-foreground ml-1.5",children:[" ",String(R.metadata.sections_created)," sections"]})]}),x.jsx("span",{className:`text-[11px] font-medium ${R.status==="completed"?"text-success":R.status==="failed"?"text-destructive":"text-muted-foreground"}`,children:R.status==="completed"?"Completed":R.status==="failed"?"Failed":R.status==="processing"?"Processing...":"Pending"}),x.jsx("span",{className:"text-[11px] text-muted-foreground shrink-0",children:Xfe(R.started_at)})]},R.id)})})]}),b>0&&x.jsx("div",{className:"rounded-xl border border-destructive/20 bg-destructive/5 p-4",children:x.jsxs("div",{className:"flex items-center justify-between gap-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Start over"}),x.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Wipe all playbook sections, staged edits, chat history, and connections."})]}),g?x.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[x.jsx("button",{onClick:()=>v(!1),className:"rounded-lg px-3 py-1.5 text-xs font-medium bg-muted hover:bg-muted/80 text-foreground transition-colors",children:"Cancel"}),x.jsx("button",{onClick:async()=>{w(null);try{await d.mutateAsync(),v(!1)}catch(R){w(R.message)}},disabled:d.isPending,className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-medium bg-destructive text-destructive-foreground hover:bg-destructive/90 transition-colors disabled:opacity-50",children:d.isPending?x.jsxs(x.Fragment,{children:[x.jsx(yn,{className:"w-3.5 h-3.5 animate-spin"})," Wiping..."]}):x.jsxs(x.Fragment,{children:[x.jsx(CD,{className:"w-3.5 h-3.5"})," Confirm wipe"]})})]}):x.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-medium bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors shrink-0",children:[x.jsx(CD,{className:"w-3.5 h-3.5"})," Restart"]})]})})]})};function D2({provider:t,connected:e,loading:n,reimporting:r,onConnect:i,onReimport:s}){const o=MH[t]??{name:t,icon:"?"};return x.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-border bg-card p-4",children:[x.jsx("span",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-sm font-bold text-primary shrink-0",children:o.icon}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-sm font-semibold text-foreground",children:o.name}),e&&x.jsxs("span",{className:"flex items-center gap-1 text-[11px] text-success font-medium",children:[x.jsx(jo,{className:"w-3 h-3"})," Connected"]})]}),x.jsx("div",{className:"text-xs text-muted-foreground",children:e?"Re-import to refresh your playbook content":`Connect your ${o.name} workspace`})]}),n?x.jsx(yn,{className:"w-4 h-4 text-muted-foreground animate-spin"}):e?x.jsx("button",{onClick:s,disabled:r,className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-medium transition-colors bg-muted hover:bg-muted/80 text-foreground disabled:opacity-50",children:r?x.jsxs(x.Fragment,{children:[x.jsx(yn,{className:"w-3.5 h-3.5 animate-spin"})," Importing..."]}):x.jsxs(x.Fragment,{children:[x.jsx(LG,{className:"w-3.5 h-3.5"})," Re-import"]})}):x.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-medium transition-colors gradient-primary text-primary-foreground",children:[x.jsx(EG,{className:"w-3.5 h-3.5"})," Connect"]})]})}function Qfe(t){return gu({queryKey:["confluence-spaces"],queryFn:async()=>{const{data:e,error:n}=await Ce.functions.invoke("confluence-browse",{body:{action:"list-spaces"}});if(n)throw n;return e.spaces},enabled:t})}function Jfe(t){return gu({queryKey:["confluence-pages",t],queryFn:async()=>{const{data:e,error:n}=await Ce.functions.invoke("confluence-browse",{body:{action:"list-pages",spaceId:t}});if(n)throw n;return e.pages},enabled:!!t})}function Zfe(t){const e=E.useRef({value:t,previous:t});return E.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Ik="Checkbox",[epe,Spe]=jh(Ik),[tpe,JI]=epe(Ik);function npe(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:i,disabled:s,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[f,p]=HS({prop:n,defaultProp:i??!1,onChange:l,caller:Ik}),[m,g]=E.useState(null),[v,y]=E.useState(null),w=E.useRef(!1),b=m?!!o||!!m.closest("form"):!0,k={checked:f,disabled:s,setChecked:p,control:m,setControl:g,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:w,required:c,defaultChecked:nu(i)?!1:i,isFormControl:b,bubbleInput:v,setBubbleInput:y};return x.jsx(tpe,{scope:e,...k,children:rpe(h)?h(k):r})}var OH="CheckboxTrigger",LH=E.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},i)=>{const{control:s,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:m}=JI(OH,t),g=wn(i,d),v=E.useRef(l);return E.useEffect(()=>{const y=s==null?void 0:s.form;if(y){const w=()=>h(v.current);return y.addEventListener("reset",w),()=>y.removeEventListener("reset",w)}},[s,h]),x.jsx(Ue.button,{type:"button",role:"checkbox","aria-checked":nu(l)?"mixed":l,"aria-required":c,"data-state":UH(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:g,onKeyDown:We(e,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:We(n,y=>{h(w=>nu(w)?!0:!w),m&&p&&(f.current=y.isPropagationStopped(),f.current||y.stopPropagation())})})});LH.displayName=OH;var ZI=E.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return x.jsx(npe,{__scopeCheckbox:n,checked:i,defaultChecked:s,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:f})=>x.jsxs(x.Fragment,{children:[x.jsx(LH,{...h,ref:e,__scopeCheckbox:n}),f&&x.jsx($H,{__scopeCheckbox:n})]})})});ZI.displayName=Ik;var jH="CheckboxIndicator",FH=E.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,s=JI(jH,n);return x.jsx(fl,{present:r||nu(s.checked)||s.checked===!0,children:x.jsx(Ue.span,{"data-state":UH(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});FH.displayName=jH;var BH="CheckboxBubbleInput",$H=E.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:f,setBubbleInput:p}=JI(BH,t),m=wn(n,p),g=Zfe(s),v=l$(r);E.useEffect(()=>{const w=f;if(!w)return;const b=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(b,"checked").set,C=!i.current;if(g!==s&&_){const P=new Event("click",{bubbles:C});w.indeterminate=nu(s),_.call(w,nu(s)?!1:s),w.dispatchEvent(P)}},[f,g,s,i]);const y=E.useRef(nu(s)?!1:s);return x.jsx(Ue.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:m,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});$H.displayName=BH;function rpe(t){return typeof t=="function"}function nu(t){return t==="indeterminate"}function UH(t){return nu(t)?"indeterminate":t?"checked":"unchecked"}const hP=E.forwardRef(({className:t,...e},n)=>x.jsx(ZI,{ref:n,className:Qt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:x.jsx(FH,{className:Qt("flex items-center justify-center text-current"),children:x.jsx(Jy,{className:"h-4 w-4"})})}));hP.displayName=ZI.displayName;function M2({className:t,...e}){return x.jsx("div",{className:Qt("animate-pulse rounded-md bg-muted",t),...e})}function ipe(t){const e=new Set(t.map(i=>i.id)),n=new Map;for(const i of t){const s=i.parentId&&e.has(i.parentId)?i.parentId:null,o=n.get(s)??[];o.push(i),n.set(s,o)}function r(i,s){return(n.get(i)??[]).map(o=>({...o,depth:s,children:r(o.id,s+1)}))}return r(null,0)}function zH(t){const e=[];for(const n of t)e.push(n),e.push(...zH(n.children));return e}function VH(t){const e=[];for(const n of t.children)e.push(n.id),e.push(...VH(n));return e}const O2=[{id:"notion",name:"Notion",icon:"N",desc:"Connect your Notion workspace",isOAuth:!0},{id:"confluence",name:"Confluence",icon:"C",desc:"Link your Confluence space",isOAuth:!0},{id:"pdf",name:"PDF Upload",icon:"P",desc:"Upload a playbook PDF",isOAuth:!1}],spe=({onComplete:t})=>{const{data:e}=QU(),n=e?e.missing+e.partial:0,r=az(),i=a5(),s=l5(),o=c5(),a=E.useRef(null),[l,c]=E.useState("source"),[d,h]=E.useState(null),[f,p]=E.useState(null),[m,g]=E.useState(null),[v,y]=E.useState(new Set),[w,b]=E.useState(new Set),k=Qfe(l==="pick-space"),_=Jfe(l==="pick-pages"?m:null),C=E.useMemo(()=>ipe(_.data??[]),[_.data]),P=E.useMemo(()=>zH(C),[C]),R=E.useMemo(()=>{const L=new Map;for(const O of P)L.set(O.id,O);return L},[P]);E.useEffect(()=>{const L=new URLSearchParams(window.location.search),O=L.get("connected"),z=L.get("error");if((O||z)&&window.history.replaceState({},"",window.location.pathname),z){p(`OAuth failed: ${z.replace(/_/g," ")}`);return}O==="notion"&&(c("analyzing"),s.mutate(void 0,{onSuccess:()=>c("done"),onError:N=>{p(N.message),c("source")}})),O==="confluence"&&c("pick-space")},[]);const M=async()=>{var O;if(!d)return;p(null);const L=O2.find(z=>z.id===d);if(L)if(L.isOAuth)try{await r(d)}catch{p(`Could not start ${L.name} OAuth. Make sure the edge functions are running (supabase functions serve).`)}else d==="pdf"&&((O=a.current)==null||O.click())},I=async L=>{var z;const O=(z=L.target.files)==null?void 0:z[0];if(O){c("analyzing");try{const N=O.name.endsWith(".pdf")?await DH(O):await O.text();await i.mutateAsync({provider:"pdf",content:N}),c("done")}catch(N){p(N.message),c("source")}}},j=L=>{g(L),y(new Set),b(new Set),c("pick-pages")},U=L=>{const O=R.get(L);if(!O)return;const z=VH(O);y(N=>{const Y=new Set(N);if(Y.has(L)){Y.delete(L);for(const $ of z)Y.delete($)}else{Y.add(L);for(const $ of z)Y.add($)}return Y})},G=L=>{b(O=>{const z=new Set(O);return z.has(L)?z.delete(L):z.add(L),z})},B=()=>{const L=_.data??[];v.size===L.length?y(new Set):y(new Set(L.map(O=>O.id)))},V=L=>L.map(O=>{const z=O.children.length>0,N=w.has(O.id);return x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center gap-2 rounded-lg py-2 hover:bg-muted/50 transition-colors",style:{paddingLeft:`${O.depth*20+12}px`,paddingRight:12},children:[z?x.jsx("button",{onClick:()=>G(O.id),className:"w-5 h-5 flex items-center justify-center shrink-0 text-muted-foreground hover:text-foreground",children:x.jsx(jB,{className:`w-3.5 h-3.5 transition-transform ${N?"rotate-90":""}`})}):x.jsx("span",{className:"w-5"}),x.jsxs("label",{className:"flex items-center gap-2.5 min-w-0 flex-1 cursor-pointer",children:[x.jsx(hP,{checked:v.has(O.id),onCheckedChange:()=>U(O.id)}),x.jsx("span",{className:"text-sm text-foreground truncate",children:O.title}),z&&x.jsx("span",{className:"text-[10px] text-muted-foreground shrink-0",children:O.children.length})]})]}),z&&N&&V(O.children)]},O.id)}),F=()=>{p(null),c("analyzing"),o.mutate([...v],{onSuccess:()=>c("done"),onError:L=>{p(L.message),c("pick-pages")}})};return x.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:x.jsxs(At.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-lg rounded-2xl border border-border bg-card p-8 shadow-card",children:[x.jsx("input",{ref:a,type:"file",accept:".pdf,.txt,.md",className:"hidden",onChange:I}),x.jsxs(lk,{mode:"wait",children:[l==="source"&&x.jsxs(At.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[x.jsx("h2",{className:"text-2xl font-bold text-foreground mb-1",children:"Connect your playbook"}),x.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Choose where your sales playbook lives"}),x.jsx("div",{className:"space-y-2 mb-6",children:O2.map(L=>x.jsxs("button",{onClick:()=>h(L.id),className:`w-full flex items-center gap-4 rounded-xl p-4 border transition-all ${d===L.id?"border-primary bg-primary/5 shadow-glow":"border-border bg-muted/30 hover:border-muted-foreground/30"}`,children:[x.jsx("span",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-sm font-bold text-primary",children:L.icon}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:"text-sm font-semibold text-foreground",children:L.name}),x.jsx("div",{className:"text-xs text-muted-foreground",children:L.desc})]}),d===L.id&&x.jsx(jo,{className:"w-5 h-5 text-primary ml-auto"})]},L.id))}),f&&x.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-destructive/30 bg-destructive/5 p-3 mb-3",children:[x.jsx(Vg,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),x.jsx("p",{className:"text-xs text-destructive",children:f})]}),x.jsx("button",{onClick:M,disabled:!d,className:"w-full flex items-center justify-center gap-2 rounded-xl gradient-primary py-3 text-sm font-semibold text-primary-foreground disabled:opacity-30 transition-opacity",children:d==="pdf"?x.jsxs(x.Fragment,{children:[x.jsx(BB,{className:"w-4 h-4"}),"Upload & Analyze"]}):x.jsxs(x.Fragment,{children:["Connect & Analyze",x.jsx(dE,{className:"w-4 h-4"})]})})]},"source"),l==="pick-space"&&x.jsxs(At.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[x.jsxs("button",{onClick:()=>c("source"),className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground mb-4 transition-colors",children:[x.jsx(AD,{className:"w-3 h-3"}),"Back"]}),x.jsx("h2",{className:"text-2xl font-bold text-foreground mb-1",children:"Select a space"}),x.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Choose the Confluence space that contains your playbook"}),k.isLoading&&x.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((L,O)=>x.jsx(M2,{className:"h-14 w-full rounded-xl"},O))}),k.error&&x.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-destructive/30 bg-destructive/5 p-3",children:[x.jsx(Vg,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),x.jsx("p",{className:"text-xs text-destructive",children:k.error.message})]}),k.data&&x.jsx("div",{className:"max-h-72 overflow-y-auto pr-1",children:x.jsx("div",{className:"space-y-2",children:k.data.map(L=>x.jsxs("button",{onClick:()=>j(L.id),className:"w-full flex items-center gap-4 rounded-xl p-4 border border-border bg-muted/30 hover:border-muted-foreground/30 transition-all text-left",children:[x.jsx("span",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-xs font-bold text-primary uppercase",children:L.key.slice(0,2)}),x.jsxs("div",{className:"min-w-0 flex-1",children:[x.jsx("div",{className:"text-sm font-semibold text-foreground truncate",children:L.name}),x.jsx("div",{className:"text-xs text-muted-foreground",children:L.key})]}),x.jsx(dE,{className:"w-4 h-4 text-muted-foreground shrink-0"})]},L.id))})})]},"pick-space"),l==="pick-pages"&&x.jsxs(At.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[x.jsxs("button",{onClick:()=>{c("pick-space"),g(null),y(new Set)},className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground mb-4 transition-colors",children:[x.jsx(AD,{className:"w-3 h-3"}),"Back"]}),x.jsx("h2",{className:"text-2xl font-bold text-foreground mb-1",children:"Select pages"}),x.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose which pages contain your sales playbook"}),_.isLoading&&x.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((L,O)=>x.jsx(M2,{className:"h-10 w-full rounded-lg"},O))}),_.error&&x.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-destructive/30 bg-destructive/5 p-3 mb-3",children:[x.jsx(Vg,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),x.jsx("p",{className:"text-xs text-destructive",children:_.error.message})]}),f&&x.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-destructive/30 bg-destructive/5 p-3 mb-3",children:[x.jsx(Vg,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),x.jsx("p",{className:"text-xs text-destructive",children:f})]}),_.data&&_.data.length>0&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[x.jsx(hP,{checked:v.size===_.data.length,onCheckedChange:B}),x.jsxs("span",{className:"text-xs text-muted-foreground",children:["Select all (",_.data.length," pages)"]})]}),x.jsx("div",{className:"max-h-60 overflow-y-auto pr-1 mb-4",children:x.jsx("div",{className:"space-y-0.5",children:V(C)})}),x.jsxs("button",{onClick:F,disabled:v.size===0,className:"w-full flex items-center justify-center gap-2 rounded-xl gradient-primary py-3 text-sm font-semibold text-primary-foreground disabled:opacity-30 transition-opacity",children:["Import ",v.size," ",v.size===1?"page":"pages",x.jsx(dE,{className:"w-4 h-4"})]})]}),_.data&&_.data.length===0&&x.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"No pages found in this space."})]},"pick-pages"),l==="analyzing"&&x.jsxs(At.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8",children:[x.jsx(yn,{className:"w-10 h-10 text-primary mx-auto mb-4 animate-spin"}),x.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:"Analyzing your playbook"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"Mapping content to skills framework"}),x.jsx("div",{className:"mt-6 space-y-2",children:["Importing content","Identifying skills coverage","Checking recency"].map((L,O)=>x.jsxs(At.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:O*.8},className:"flex items-center gap-2 justify-center text-xs text-muted-foreground",children:[x.jsx(jo,{className:"w-3 h-3 text-success"}),L]},L))})]},"analyzing"),l==="done"&&x.jsxs(At.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8",children:[x.jsx("div",{className:"w-14 h-14 rounded-2xl gradient-primary mx-auto mb-4 flex items-center justify-center",children:x.jsx(jo,{className:"w-7 h-7 text-primary-foreground"})}),x.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:"Playbook connected!"}),x.jsxs("p",{className:"text-sm text-muted-foreground mb-6",children:["We found ",n," gaps in your skills coverage. Let's fix them."]}),x.jsx("button",{onClick:t,className:"rounded-xl gradient-primary px-6 py-3 text-sm font-semibold text-primary-foreground",children:"View Dashboard"})]},"done")]})]})})},ope=()=>{const{data:t,isLoading:e}=DI(),n=((t==null?void 0:t.length)??0)>0,[r,i]=E.useState(!1),[s,o]=E.useState("dashboard"),[a,l]=E.useState(null),[c,d]=E.useState(null),h=(f,p)=>{d({skillId:f,skillName:p}),o("playbook")};return x.jsxs("div",{className:"min-h-screen bg-background",children:[x.jsx(lk,{children:!e&&!n&&!r&&x.jsx(spe,{onComplete:()=>i(!0)})}),x.jsx(Gne,{activeTab:s,setActiveTab:o}),x.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-8",children:[s==="dashboard"&&x.jsxs("div",{className:"space-y-5",children:[x.jsx(Kne,{activeFilter:a,onFilterChange:f=>l(f===a?null:f)}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_380px] gap-5 items-start",children:[x.jsx(Yne,{onFillGap:h,statusFilter:a}),x.jsx("div",{className:"lg:sticky lg:top-20",children:x.jsx(sz,{})})]})]}),s==="playbook"&&x.jsx(Xde,{skillFilter:c,onSkillFilterChange:d}),s==="staging"&&x.jsx(Xce,{}),s==="integrations"&&x.jsx(Yfe,{})]})]})};function L2(){const{signIn:t,signUp:e}=rk(),n=DR(),i=Bh().pathname==="/signup"?"signup":"login",[s,o]=E.useState(null),[a,l]=E.useState(!1),c=async h=>{h.preventDefault(),o(null),l(!0);const f=new FormData(h.currentTarget),p=await t(f.get("email"),f.get("password"));l(!1),p.error?o(p.error.message):n("/")},d=async h=>{h.preventDefault(),o(null),l(!0);const f=new FormData(h.currentTarget),p=await e(f.get("email"),f.get("password"),f.get("name"));l(!1),p.error?o(p.error.message):n("/")};return x.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:x.jsxs("div",{className:"w-full max-w-sm",children:[x.jsxs("div",{className:"flex items-center justify-center gap-3 mb-8",children:[x.jsx("div",{className:"w-10 h-10 rounded-xl gradient-primary flex items-center justify-center",children:x.jsx(LB,{className:"w-5 h-5 text-primary-foreground"})}),x.jsx("span",{className:"text-lg font-bold text-foreground tracking-tight",children:"Playbook Manager"})]}),x.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-card",children:[x.jsx("h2",{className:"text-lg font-semibold text-foreground mb-1",children:i==="login"?"Sign in":"Create account"}),x.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:i==="login"?"Enter your credentials to continue":"Set up your team account"}),i==="login"?x.jsxs("form",{onSubmit:c,className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"login-email",className:"block text-xs font-medium text-foreground mb-1.5",children:"Email"}),x.jsx("input",{type:"email",id:"login-email",name:"email",autoComplete:"email",required:!0,className:"w-full rounded-lg border border-border bg-muted/30 px-3 py-2 text-sm text-foreground outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",placeholder:"you@company.com"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"login-password",className:"block text-xs font-medium text-foreground mb-1.5",children:"Password"}),x.jsx("input",{type:"password",id:"login-password",name:"password",autoComplete:"current-password",required:!0,minLength:6,className:"w-full rounded-lg border border-border bg-muted/30 px-3 py-2 text-sm text-foreground outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",placeholder:""})]}),s&&x.jsx("p",{className:"text-xs text-destructive font-medium",children:s}),x.jsxs("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center gap-2 rounded-lg gradient-primary py-2.5 text-sm font-semibold text-primary-foreground disabled:opacity-50 transition-opacity",children:[a&&x.jsx(yn,{className:"w-4 h-4 animate-spin"}),"Sign in"]})]}):x.jsxs("form",{onSubmit:d,className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"signup-name",className:"block text-xs font-medium text-foreground mb-1.5",children:"Full name"}),x.jsx("input",{type:"text",id:"signup-name",name:"name",autoComplete:"name",required:!0,className:"w-full rounded-lg border border-border bg-muted/30 px-3 py-2 text-sm text-foreground outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",placeholder:"Jane Smith"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"signup-email",className:"block text-xs font-medium text-foreground mb-1.5",children:"Email"}),x.jsx("input",{type:"email",id:"signup-email",name:"email",autoComplete:"email",required:!0,className:"w-full rounded-lg border border-border bg-muted/30 px-3 py-2 text-sm text-foreground outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",placeholder:"you@company.com"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"signup-password",className:"block text-xs font-medium text-foreground mb-1.5",children:"Password"}),x.jsx("input",{type:"password",id:"signup-password",name:"password",autoComplete:"new-password",required:!0,minLength:6,className:"w-full rounded-lg border border-border bg-muted/30 px-3 py-2 text-sm text-foreground outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",placeholder:""})]}),s&&x.jsx("p",{className:"text-xs text-destructive font-medium",children:s}),x.jsxs("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center gap-2 rounded-lg gradient-primary py-2.5 text-sm font-semibold text-primary-foreground disabled:opacity-50 transition-opacity",children:[a&&x.jsx(yn,{className:"w-4 h-4 animate-spin"}),"Create account"]})]}),x.jsx("div",{className:"mt-4 text-center",children:x.jsx(yX,{to:i==="login"?"/signup":"/login",onClick:()=>o(null),className:"text-xs text-primary hover:underline",children:i==="login"?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})}const ape=()=>{const t=Bh();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),x.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:x.jsxs("div",{className:"text-center",children:[x.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),x.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),x.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},lpe=new n7;function cpe({children:t}){const{session:e,loading:n}=rk();return n?x.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:x.jsx(yn,{className:"w-6 h-6 text-primary animate-spin"})}):e?x.jsx(x.Fragment,{children:t}):x.jsx(X$,{to:"/login",replace:!0})}function j2({children:t}){const{session:e,loading:n}=rk();return n?x.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:x.jsx(yn,{className:"w-6 h-6 text-primary animate-spin"})}):e?x.jsx(X$,{to:"/",replace:!0}):x.jsx(x.Fragment,{children:t})}const upe=()=>x.jsx(a7,{client:lpe,children:x.jsx(JQ,{children:x.jsxs(BK,{children:[x.jsx(Sq,{}),x.jsx(e9,{}),x.jsx(pX,{children:x.jsxs(aX,{children:[x.jsx(Wg,{path:"/login",element:x.jsx(j2,{children:x.jsx(L2,{})})}),x.jsx(Wg,{path:"/signup",element:x.jsx(j2,{children:x.jsx(L2,{})})}),x.jsx(Wg,{path:"/",element:x.jsx(cpe,{children:x.jsx(ope,{})})}),x.jsx(Wg,{path:"*",element:x.jsx(ape,{})})]})})]})})});lB(document.getElementById("root")).render(x.jsx(upe,{}));
