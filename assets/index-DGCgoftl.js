var q2=e=>{throw TypeError(e)};var _y=(e,t,n)=>t.has(e)||q2("Cannot "+n);var N=(e,t,n)=>(_y(e,t,"read from private field"),n?n.call(e):t.get(e)),fe=(e,t,n)=>t.has(e)?q2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),re=(e,t,n,r)=>(_y(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Te=(e,t,n)=>(_y(e,t,"access private method"),n);var kh=(e,t,n,r)=>({set _(i){re(e,t,i,n)},get _(){return N(e,t,r)}});function t9(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var DN={exports:{}},s0={},MN={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf=Symbol.for("react.element"),n9=Symbol.for("react.portal"),r9=Symbol.for("react.fragment"),i9=Symbol.for("react.strict_mode"),s9=Symbol.for("react.profiler"),o9=Symbol.for("react.provider"),a9=Symbol.for("react.context"),l9=Symbol.for("react.forward_ref"),u9=Symbol.for("react.suspense"),c9=Symbol.for("react.memo"),d9=Symbol.for("react.lazy"),K2=Symbol.iterator;function f9(e){return e===null||typeof e!="object"?null:(e=K2&&e[K2]||e["@@iterator"],typeof e=="function"?e:null)}var ON={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IN=Object.assign,jN={};function lc(e,t,n){this.props=e,this.context=t,this.refs=jN,this.updater=n||ON}lc.prototype.isReactComponent={};lc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};lc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function LN(){}LN.prototype=lc.prototype;function Zw(e,t,n){this.props=e,this.context=t,this.refs=jN,this.updater=n||ON}var ek=Zw.prototype=new LN;ek.constructor=Zw;IN(ek,lc.prototype);ek.isPureReactComponent=!0;var G2=Array.isArray,FN=Object.prototype.hasOwnProperty,tk={current:null},$N={key:!0,ref:!0,__self:!0,__source:!0};function zN(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)FN.call(t,r)&&!$N.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Jf,type:e,key:s,ref:o,props:i,_owner:tk.current}}function h9(e,t){return{$$typeof:Jf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nk(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jf}function p9(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var J2=/\/+/g;function Ay(e,t){return typeof e=="object"&&e!==null&&e.key!=null?p9(""+e.key):t.toString(36)}function Np(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Jf:case n9:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Ay(o,0):r,G2(i)?(n="",e!=null&&(n=e.replace(J2,"$&/")+"/"),Np(i,t,n,"",function(u){return u})):i!=null&&(nk(i)&&(i=h9(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(J2,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",G2(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+Ay(s,a);o+=Np(s,t,n,l,i)}else if(l=f9(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+Ay(s,a++),o+=Np(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ch(e,t,n){if(e==null)return e;var r=[],i=0;return Np(e,r,"","",function(s){return t.call(n,s,i++)}),r}function m9(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pn={current:null},Dp={transition:null},g9={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:Dp,ReactCurrentOwner:tk};function BN(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Ch,forEach:function(e,t,n){Ch(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ch(e,function(){t++}),t},toArray:function(e){return Ch(e,function(t){return t})||[]},only:function(e){if(!nk(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=lc;Ne.Fragment=r9;Ne.Profiler=s9;Ne.PureComponent=Zw;Ne.StrictMode=i9;Ne.Suspense=u9;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g9;Ne.act=BN;Ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=IN({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=tk.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)FN.call(t,l)&&!$N.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Jf,type:e.type,key:i,ref:s,props:r,_owner:o}};Ne.createContext=function(e){return e={$$typeof:a9,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:o9,_context:e},e.Consumer=e};Ne.createElement=zN;Ne.createFactory=function(e){var t=zN.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:l9,render:e}};Ne.isValidElement=nk;Ne.lazy=function(e){return{$$typeof:d9,_payload:{_status:-1,_result:e},_init:m9}};Ne.memo=function(e,t){return{$$typeof:c9,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=Dp.transition;Dp.transition={};try{e()}finally{Dp.transition=t}};Ne.unstable_act=BN;Ne.useCallback=function(e,t){return Pn.current.useCallback(e,t)};Ne.useContext=function(e){return Pn.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return Pn.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return Pn.current.useEffect(e,t)};Ne.useId=function(){return Pn.current.useId()};Ne.useImperativeHandle=function(e,t,n){return Pn.current.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return Pn.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return Pn.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return Pn.current.useMemo(e,t)};Ne.useReducer=function(e,t,n){return Pn.current.useReducer(e,t,n)};Ne.useRef=function(e){return Pn.current.useRef(e)};Ne.useState=function(e){return Pn.current.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return Pn.current.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return Pn.current.useTransition()};Ne.version="18.3.1";MN.exports=Ne;var w=MN.exports;const Y=Gf(w),rk=t9({__proto__:null,default:Y},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y9=w,b9=Symbol.for("react.element"),v9=Symbol.for("react.fragment"),x9=Object.prototype.hasOwnProperty,w9=y9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k9={key:!0,ref:!0,__self:!0,__source:!0};function VN(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)x9.call(t,r)&&!k9.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:b9,type:e,key:s,ref:o,props:i,_owner:w9.current}}s0.Fragment=v9;s0.jsx=VN;s0.jsxs=VN;DN.exports=s0;var y=DN.exports,UN={exports:{}},lr={},HN={exports:{}},WN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,D){var T=M.length;M.push(D);e:for(;0<T;){var J=T-1>>>1,O=M[J];if(0<i(O,D))M[J]=D,M[T]=O,T=J;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var D=M[0],T=M.pop();if(T!==D){M[0]=T;e:for(var J=0,O=M.length,_=O>>>1;J<_;){var W=2*(J+1)-1,X=M[W],ne=W+1,$=M[ne];if(0>i(X,T))ne<O&&0>i($,X)?(M[J]=$,M[ne]=T,J=ne):(M[J]=X,M[W]=T,J=W);else if(ne<O&&0>i($,T))M[J]=$,M[ne]=T,J=ne;else break e}}return D}function i(M,D){var T=M.sortIndex-D.sortIndex;return T!==0?T:M.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(M){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=M)r(u),D.sortIndex=D.expirationTime,t(l,D);else break;D=n(u)}}function k(M){if(m=!1,x(M),!p)if(n(l)!==null)p=!0,q(S);else{var D=n(u);D!==null&&H(k,D.startTime-M)}}function S(M,D){p=!1,m&&(m=!1,b(P),P=-1),h=!0;var T=f;try{for(x(D),d=n(l);d!==null&&(!(d.expirationTime>D)||M&&!L());){var J=d.callback;if(typeof J=="function"){d.callback=null,f=d.priorityLevel;var O=J(d.expirationTime<=D);D=e.unstable_now(),typeof O=="function"?d.callback=O:d===n(l)&&r(l),x(D)}else r(l);d=n(l)}if(d!==null)var _=!0;else{var W=n(u);W!==null&&H(k,W.startTime-D),_=!1}return _}finally{d=null,f=T,h=!1}}var C=!1,E=null,P=-1,R=5,A=-1;function L(){return!(e.unstable_now()-A<R)}function I(){if(E!==null){var M=e.unstable_now();A=M;var D=!0;try{D=E(!0,M)}finally{D?U():(C=!1,E=null)}}else C=!1}var U;if(typeof v=="function")U=function(){v(I)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,B=F.port2;F.port1.onmessage=I,U=function(){B.postMessage(null)}}else U=function(){g(I,0)};function q(M){E=M,C||(C=!0,U())}function H(M,D){P=g(function(){M(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,q(S))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(M){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var T=f;f=D;try{return M()}finally{f=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,D){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var T=f;f=M;try{return D()}finally{f=T}},e.unstable_scheduleCallback=function(M,D,T){var J=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?J+T:J):T=J,M){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=T+O,M={id:c++,callback:D,priorityLevel:M,startTime:T,expirationTime:O,sortIndex:-1},T>J?(M.sortIndex=T,t(u,M),n(l)===null&&M===n(u)&&(m?(b(P),P=-1):m=!0,H(k,T-J))):(M.sortIndex=O,t(l,M),p||h||(p=!0,q(S))),M},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(M){var D=f;return function(){var T=f;f=D;try{return M.apply(this,arguments)}finally{f=T}}}})(WN);HN.exports=WN;var C9=HN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S9=w,or=C9;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qN=new Set,Bd={};function hl(e,t){$u(e,t),$u(e+"Capture",t)}function $u(e,t){for(Bd[e]=t,e=0;e<t.length;e++)qN.add(t[e])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wb=Object.prototype.hasOwnProperty,E9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q2={},Y2={};function T9(e){return Wb.call(Y2,e)?!0:Wb.call(Q2,e)?!1:E9.test(e)?Y2[e]=!0:(Q2[e]=!0,!1)}function _9(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A9(e,t,n,r){if(t===null||typeof t>"u"||_9(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Rn(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){sn[e]=new Rn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];sn[t]=new Rn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){sn[e]=new Rn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){sn[e]=new Rn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){sn[e]=new Rn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){sn[e]=new Rn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){sn[e]=new Rn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){sn[e]=new Rn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){sn[e]=new Rn(e,5,!1,e.toLowerCase(),null,!1,!1)});var ik=/[\-:]([a-z])/g;function sk(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ik,sk);sn[t]=new Rn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ik,sk);sn[t]=new Rn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ik,sk);sn[t]=new Rn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){sn[e]=new Rn(e,1,!1,e.toLowerCase(),null,!1,!1)});sn.xlinkHref=new Rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){sn[e]=new Rn(e,1,!1,e.toLowerCase(),null,!0,!0)});function ok(e,t,n,r){var i=sn.hasOwnProperty(t)?sn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A9(t,n,i,r)&&(n=null),r||i===null?T9(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var vs=S9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sh=Symbol.for("react.element"),ql=Symbol.for("react.portal"),Kl=Symbol.for("react.fragment"),ak=Symbol.for("react.strict_mode"),qb=Symbol.for("react.profiler"),KN=Symbol.for("react.provider"),GN=Symbol.for("react.context"),lk=Symbol.for("react.forward_ref"),Kb=Symbol.for("react.suspense"),Gb=Symbol.for("react.suspense_list"),uk=Symbol.for("react.memo"),Bs=Symbol.for("react.lazy"),JN=Symbol.for("react.offscreen"),X2=Symbol.iterator;function Ac(e){return e===null||typeof e!="object"?null:(e=X2&&e[X2]||e["@@iterator"],typeof e=="function"?e:null)}var pt=Object.assign,Py;function Yc(e){if(Py===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Py=t&&t[1]||""}return`
`+Py+e}var Ry=!1;function Ny(e,t){if(!e||Ry)return"";Ry=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ry=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Yc(e):""}function P9(e){switch(e.tag){case 5:return Yc(e.type);case 16:return Yc("Lazy");case 13:return Yc("Suspense");case 19:return Yc("SuspenseList");case 0:case 2:case 15:return e=Ny(e.type,!1),e;case 11:return e=Ny(e.type.render,!1),e;case 1:return e=Ny(e.type,!0),e;default:return""}}function Jb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Kl:return"Fragment";case ql:return"Portal";case qb:return"Profiler";case ak:return"StrictMode";case Kb:return"Suspense";case Gb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case GN:return(e.displayName||"Context")+".Consumer";case KN:return(e._context.displayName||"Context")+".Provider";case lk:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case uk:return t=e.displayName||null,t!==null?t:Jb(e.type)||"Memo";case Bs:t=e._payload,e=e._init;try{return Jb(e(t))}catch{}}return null}function R9(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jb(t);case 8:return t===ak?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Io(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function QN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function N9(e){var t=QN(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Eh(e){e._valueTracker||(e._valueTracker=N9(e))}function YN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=QN(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qb(e,t){var n=t.checked;return pt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Z2(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Io(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function XN(e,t){t=t.checked,t!=null&&ok(e,"checked",t,!1)}function Yb(e,t){XN(e,t);var n=Io(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xb(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xb(e,t.type,Io(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function eE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xb(e,t,n){(t!=="number"||fm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Xc=Array.isArray;function du(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Io(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Zb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return pt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(G(92));if(Xc(n)){if(1<n.length)throw Error(G(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Io(n)}}function ZN(e,t){var n=Io(t.value),r=Io(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function nE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function eD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ev(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?eD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Th,tD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Th=Th||document.createElement("div"),Th.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Th.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var dd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D9=["Webkit","ms","Moz","O"];Object.keys(dd).forEach(function(e){D9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dd[t]=dd[e]})});function nD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||dd.hasOwnProperty(e)&&dd[e]?(""+t).trim():t+"px"}function rD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=nD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var M9=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tv(e,t){if(t){if(M9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function nv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rv=null;function ck(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var iv=null,fu=null,hu=null;function rE(e){if(e=Xf(e)){if(typeof iv!="function")throw Error(G(280));var t=e.stateNode;t&&(t=c0(t),iv(e.stateNode,e.type,t))}}function iD(e){fu?hu?hu.push(e):hu=[e]:fu=e}function sD(){if(fu){var e=fu,t=hu;if(hu=fu=null,rE(e),t)for(e=0;e<t.length;e++)rE(t[e])}}function oD(e,t){return e(t)}function aD(){}var Dy=!1;function lD(e,t,n){if(Dy)return e(t,n);Dy=!0;try{return oD(e,t,n)}finally{Dy=!1,(fu!==null||hu!==null)&&(aD(),sD())}}function Ud(e,t){var n=e.stateNode;if(n===null)return null;var r=c0(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(G(231,t,typeof n));return n}var sv=!1;if(fs)try{var Pc={};Object.defineProperty(Pc,"passive",{get:function(){sv=!0}}),window.addEventListener("test",Pc,Pc),window.removeEventListener("test",Pc,Pc)}catch{sv=!1}function O9(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var fd=!1,hm=null,pm=!1,ov=null,I9={onError:function(e){fd=!0,hm=e}};function j9(e,t,n,r,i,s,o,a,l){fd=!1,hm=null,O9.apply(I9,arguments)}function L9(e,t,n,r,i,s,o,a,l){if(j9.apply(this,arguments),fd){if(fd){var u=hm;fd=!1,hm=null}else throw Error(G(198));pm||(pm=!0,ov=u)}}function pl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function uD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function iE(e){if(pl(e)!==e)throw Error(G(188))}function F9(e){var t=e.alternate;if(!t){if(t=pl(e),t===null)throw Error(G(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return iE(i),e;if(s===r)return iE(i),t;s=s.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?e:t}function cD(e){return e=F9(e),e!==null?dD(e):null}function dD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dD(e);if(t!==null)return t;e=e.sibling}return null}var fD=or.unstable_scheduleCallback,sE=or.unstable_cancelCallback,$9=or.unstable_shouldYield,z9=or.unstable_requestPaint,St=or.unstable_now,B9=or.unstable_getCurrentPriorityLevel,dk=or.unstable_ImmediatePriority,hD=or.unstable_UserBlockingPriority,mm=or.unstable_NormalPriority,V9=or.unstable_LowPriority,pD=or.unstable_IdlePriority,o0=null,Ti=null;function U9(e){if(Ti&&typeof Ti.onCommitFiberRoot=="function")try{Ti.onCommitFiberRoot(o0,e,void 0,(e.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:q9,H9=Math.log,W9=Math.LN2;function q9(e){return e>>>=0,e===0?32:31-(H9(e)/W9|0)|0}var _h=64,Ah=4194304;function Zc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gm(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Zc(a):(s&=o,s!==0&&(r=Zc(s)))}else o=n&~i,o!==0?r=Zc(o):s!==0&&(r=Zc(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Zr(t),i=1<<n,r|=e[n],t&=~i;return r}function K9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G9(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Zr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=K9(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function av(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mD(){var e=_h;return _h<<=1,!(_h&4194240)&&(_h=64),e}function My(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zr(t),e[t]=n}function J9(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Zr(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function fk(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Zr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var He=0;function gD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yD,hk,bD,vD,xD,lv=!1,Ph=[],xo=null,wo=null,ko=null,Hd=new Map,Wd=new Map,Gs=[],Q9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oE(e,t){switch(e){case"focusin":case"focusout":xo=null;break;case"dragenter":case"dragleave":wo=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":Hd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wd.delete(t.pointerId)}}function Rc(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Xf(t),t!==null&&hk(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Y9(e,t,n,r,i){switch(t){case"focusin":return xo=Rc(xo,e,t,n,r,i),!0;case"dragenter":return wo=Rc(wo,e,t,n,r,i),!0;case"mouseover":return ko=Rc(ko,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Hd.set(s,Rc(Hd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Wd.set(s,Rc(Wd.get(s)||null,e,t,n,r,i)),!0}return!1}function wD(e){var t=ga(e.target);if(t!==null){var n=pl(t);if(n!==null){if(t=n.tag,t===13){if(t=uD(n),t!==null){e.blockedOn=t,xD(e.priority,function(){bD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=uv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);rv=r,n.target.dispatchEvent(r),rv=null}else return t=Xf(n),t!==null&&hk(t),e.blockedOn=n,!1;t.shift()}return!0}function aE(e,t,n){Mp(e)&&n.delete(t)}function X9(){lv=!1,xo!==null&&Mp(xo)&&(xo=null),wo!==null&&Mp(wo)&&(wo=null),ko!==null&&Mp(ko)&&(ko=null),Hd.forEach(aE),Wd.forEach(aE)}function Nc(e,t){e.blockedOn===t&&(e.blockedOn=null,lv||(lv=!0,or.unstable_scheduleCallback(or.unstable_NormalPriority,X9)))}function qd(e){function t(i){return Nc(i,e)}if(0<Ph.length){Nc(Ph[0],e);for(var n=1;n<Ph.length;n++){var r=Ph[n];r.blockedOn===e&&(r.blockedOn=null)}}for(xo!==null&&Nc(xo,e),wo!==null&&Nc(wo,e),ko!==null&&Nc(ko,e),Hd.forEach(t),Wd.forEach(t),n=0;n<Gs.length;n++)r=Gs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Gs.length&&(n=Gs[0],n.blockedOn===null);)wD(n),n.blockedOn===null&&Gs.shift()}var pu=vs.ReactCurrentBatchConfig,ym=!0;function Z9(e,t,n,r){var i=He,s=pu.transition;pu.transition=null;try{He=1,pk(e,t,n,r)}finally{He=i,pu.transition=s}}function ez(e,t,n,r){var i=He,s=pu.transition;pu.transition=null;try{He=4,pk(e,t,n,r)}finally{He=i,pu.transition=s}}function pk(e,t,n,r){if(ym){var i=uv(e,t,n,r);if(i===null)Uy(e,t,r,bm,n),oE(e,r);else if(Y9(i,e,t,n,r))r.stopPropagation();else if(oE(e,r),t&4&&-1<Q9.indexOf(e)){for(;i!==null;){var s=Xf(i);if(s!==null&&yD(s),s=uv(e,t,n,r),s===null&&Uy(e,t,r,bm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Uy(e,t,r,null,n)}}var bm=null;function uv(e,t,n,r){if(bm=null,e=ck(r),e=ga(e),e!==null)if(t=pl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=uD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return bm=e,null}function kD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(B9()){case dk:return 1;case hD:return 4;case mm:case V9:return 16;case pD:return 536870912;default:return 16}default:return 16}}var fo=null,mk=null,Op=null;function CD(){if(Op)return Op;var e,t=mk,n=t.length,r,i="value"in fo?fo.value:fo.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Op=i.slice(e,1<r?1-r:void 0)}function Ip(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rh(){return!0}function lE(){return!1}function ur(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rh:lE,this.isPropagationStopped=lE,this}return pt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rh)},persist:function(){},isPersistent:Rh}),t}var uc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gk=ur(uc),Yf=pt({},uc,{view:0,detail:0}),tz=ur(Yf),Oy,Iy,Dc,a0=pt({},Yf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yk,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dc&&(Dc&&e.type==="mousemove"?(Oy=e.screenX-Dc.screenX,Iy=e.screenY-Dc.screenY):Iy=Oy=0,Dc=e),Oy)},movementY:function(e){return"movementY"in e?e.movementY:Iy}}),uE=ur(a0),nz=pt({},a0,{dataTransfer:0}),rz=ur(nz),iz=pt({},Yf,{relatedTarget:0}),jy=ur(iz),sz=pt({},uc,{animationName:0,elapsedTime:0,pseudoElement:0}),oz=ur(sz),az=pt({},uc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lz=ur(az),uz=pt({},uc,{data:0}),cE=ur(uz),cz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hz(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fz[e])?!!t[e]:!1}function yk(){return hz}var pz=pt({},Yf,{key:function(e){if(e.key){var t=cz[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ip(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dz[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yk,charCode:function(e){return e.type==="keypress"?Ip(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ip(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mz=ur(pz),gz=pt({},a0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dE=ur(gz),yz=pt({},Yf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yk}),bz=ur(yz),vz=pt({},uc,{propertyName:0,elapsedTime:0,pseudoElement:0}),xz=ur(vz),wz=pt({},a0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kz=ur(wz),Cz=[9,13,27,32],bk=fs&&"CompositionEvent"in window,hd=null;fs&&"documentMode"in document&&(hd=document.documentMode);var Sz=fs&&"TextEvent"in window&&!hd,SD=fs&&(!bk||hd&&8<hd&&11>=hd),fE=" ",hE=!1;function ED(e,t){switch(e){case"keyup":return Cz.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gl=!1;function Ez(e,t){switch(e){case"compositionend":return TD(t);case"keypress":return t.which!==32?null:(hE=!0,fE);case"textInput":return e=t.data,e===fE&&hE?null:e;default:return null}}function Tz(e,t){if(Gl)return e==="compositionend"||!bk&&ED(e,t)?(e=CD(),Op=mk=fo=null,Gl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return SD&&t.locale!=="ko"?null:t.data;default:return null}}var _z={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_z[e.type]:t==="textarea"}function _D(e,t,n,r){iD(r),t=vm(t,"onChange"),0<t.length&&(n=new gk("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var pd=null,Kd=null;function Az(e){FD(e,0)}function l0(e){var t=Yl(e);if(YN(t))return e}function Pz(e,t){if(e==="change")return t}var AD=!1;if(fs){var Ly;if(fs){var Fy="oninput"in document;if(!Fy){var mE=document.createElement("div");mE.setAttribute("oninput","return;"),Fy=typeof mE.oninput=="function"}Ly=Fy}else Ly=!1;AD=Ly&&(!document.documentMode||9<document.documentMode)}function gE(){pd&&(pd.detachEvent("onpropertychange",PD),Kd=pd=null)}function PD(e){if(e.propertyName==="value"&&l0(Kd)){var t=[];_D(t,Kd,e,ck(e)),lD(Az,t)}}function Rz(e,t,n){e==="focusin"?(gE(),pd=t,Kd=n,pd.attachEvent("onpropertychange",PD)):e==="focusout"&&gE()}function Nz(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return l0(Kd)}function Dz(e,t){if(e==="click")return l0(t)}function Mz(e,t){if(e==="input"||e==="change")return l0(t)}function Oz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ri=typeof Object.is=="function"?Object.is:Oz;function Gd(e,t){if(ri(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Wb.call(t,i)||!ri(e[i],t[i]))return!1}return!0}function yE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bE(e,t){var n=yE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yE(n)}}function RD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?RD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ND(){for(var e=window,t=fm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fm(e.document)}return t}function vk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Iz(e){var t=ND(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&RD(n.ownerDocument.documentElement,n)){if(r!==null&&vk(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=bE(n,s);var o=bE(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jz=fs&&"documentMode"in document&&11>=document.documentMode,Jl=null,cv=null,md=null,dv=!1;function vE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dv||Jl==null||Jl!==fm(r)||(r=Jl,"selectionStart"in r&&vk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),md&&Gd(md,r)||(md=r,r=vm(cv,"onSelect"),0<r.length&&(t=new gk("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jl)))}function Nh(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ql={animationend:Nh("Animation","AnimationEnd"),animationiteration:Nh("Animation","AnimationIteration"),animationstart:Nh("Animation","AnimationStart"),transitionend:Nh("Transition","TransitionEnd")},$y={},DD={};fs&&(DD=document.createElement("div").style,"AnimationEvent"in window||(delete Ql.animationend.animation,delete Ql.animationiteration.animation,delete Ql.animationstart.animation),"TransitionEvent"in window||delete Ql.transitionend.transition);function u0(e){if($y[e])return $y[e];if(!Ql[e])return e;var t=Ql[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in DD)return $y[e]=t[n];return e}var MD=u0("animationend"),OD=u0("animationiteration"),ID=u0("animationstart"),jD=u0("transitionend"),LD=new Map,xE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wo(e,t){LD.set(e,t),hl(t,[e])}for(var zy=0;zy<xE.length;zy++){var By=xE[zy],Lz=By.toLowerCase(),Fz=By[0].toUpperCase()+By.slice(1);Wo(Lz,"on"+Fz)}Wo(MD,"onAnimationEnd");Wo(OD,"onAnimationIteration");Wo(ID,"onAnimationStart");Wo("dblclick","onDoubleClick");Wo("focusin","onFocus");Wo("focusout","onBlur");Wo(jD,"onTransitionEnd");$u("onMouseEnter",["mouseout","mouseover"]);$u("onMouseLeave",["mouseout","mouseover"]);$u("onPointerEnter",["pointerout","pointerover"]);$u("onPointerLeave",["pointerout","pointerover"]);hl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hl("onBeforeInput",["compositionend","keypress","textInput","paste"]);hl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ed="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$z=new Set("cancel close invalid load scroll toggle".split(" ").concat(ed));function wE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,L9(r,t,void 0,e),e.currentTarget=null}function FD(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;wE(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;wE(i,a,u),s=l}}}if(pm)throw e=ov,pm=!1,ov=null,e}function rt(e,t){var n=t[gv];n===void 0&&(n=t[gv]=new Set);var r=e+"__bubble";n.has(r)||($D(t,e,2,!1),n.add(r))}function Vy(e,t,n){var r=0;t&&(r|=4),$D(n,e,r,t)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function Jd(e){if(!e[Dh]){e[Dh]=!0,qN.forEach(function(n){n!=="selectionchange"&&($z.has(n)||Vy(n,!1,e),Vy(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dh]||(t[Dh]=!0,Vy("selectionchange",!1,t))}}function $D(e,t,n,r){switch(kD(t)){case 1:var i=Z9;break;case 4:i=ez;break;default:i=pk}n=i.bind(null,t,n,e),i=void 0,!sv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Uy(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ga(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}lD(function(){var u=s,c=ck(n),d=[];e:{var f=LD.get(e);if(f!==void 0){var h=gk,p=e;switch(e){case"keypress":if(Ip(n)===0)break e;case"keydown":case"keyup":h=mz;break;case"focusin":p="focus",h=jy;break;case"focusout":p="blur",h=jy;break;case"beforeblur":case"afterblur":h=jy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=uE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=rz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=bz;break;case MD:case OD:case ID:h=oz;break;case jD:h=xz;break;case"scroll":h=tz;break;case"wheel":h=kz;break;case"copy":case"cut":case"paste":h=lz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=dE}var m=(t&4)!==0,g=!m&&e==="scroll",b=m?f!==null?f+"Capture":null:f;m=[];for(var v=u,x;v!==null;){x=v;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,b!==null&&(k=Ud(v,b),k!=null&&m.push(Qd(v,k,x)))),g)break;v=v.return}0<m.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==rv&&(p=n.relatedTarget||n.fromElement)&&(ga(p)||p[hs]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?ga(p):null,p!==null&&(g=pl(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=uE,k="onMouseLeave",b="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=dE,k="onPointerLeave",b="onPointerEnter",v="pointer"),g=h==null?f:Yl(h),x=p==null?f:Yl(p),f=new m(k,v+"leave",h,n,c),f.target=g,f.relatedTarget=x,k=null,ga(c)===u&&(m=new m(b,v+"enter",p,n,c),m.target=x,m.relatedTarget=g,k=m),g=k,h&&p)t:{for(m=h,b=p,v=0,x=m;x;x=kl(x))v++;for(x=0,k=b;k;k=kl(k))x++;for(;0<v-x;)m=kl(m),v--;for(;0<x-v;)b=kl(b),x--;for(;v--;){if(m===b||b!==null&&m===b.alternate)break t;m=kl(m),b=kl(b)}m=null}else m=null;h!==null&&kE(d,f,h,m,!1),p!==null&&g!==null&&kE(d,g,p,m,!0)}}e:{if(f=u?Yl(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var S=Pz;else if(pE(f))if(AD)S=Mz;else{S=Nz;var C=Rz}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Dz);if(S&&(S=S(e,u))){_D(d,S,n,c);break e}C&&C(e,f,u),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Xb(f,"number",f.value)}switch(C=u?Yl(u):window,e){case"focusin":(pE(C)||C.contentEditable==="true")&&(Jl=C,cv=u,md=null);break;case"focusout":md=cv=Jl=null;break;case"mousedown":dv=!0;break;case"contextmenu":case"mouseup":case"dragend":dv=!1,vE(d,n,c);break;case"selectionchange":if(jz)break;case"keydown":case"keyup":vE(d,n,c)}var E;if(bk)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Gl?ED(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(SD&&n.locale!=="ko"&&(Gl||P!=="onCompositionStart"?P==="onCompositionEnd"&&Gl&&(E=CD()):(fo=c,mk="value"in fo?fo.value:fo.textContent,Gl=!0)),C=vm(u,P),0<C.length&&(P=new cE(P,e,null,n,c),d.push({event:P,listeners:C}),E?P.data=E:(E=TD(n),E!==null&&(P.data=E)))),(E=Sz?Ez(e,n):Tz(e,n))&&(u=vm(u,"onBeforeInput"),0<u.length&&(c=new cE("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=E))}FD(d,t)})}function Qd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function vm(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ud(e,n),s!=null&&r.unshift(Qd(e,s,i)),s=Ud(e,t),s!=null&&r.push(Qd(e,s,i))),e=e.return}return r}function kl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function kE(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Ud(n,s),l!=null&&o.unshift(Qd(n,l,a))):i||(l=Ud(n,s),l!=null&&o.push(Qd(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var zz=/\r\n?/g,Bz=/\u0000|\uFFFD/g;function CE(e){return(typeof e=="string"?e:""+e).replace(zz,`
`).replace(Bz,"")}function Mh(e,t,n){if(t=CE(t),CE(e)!==t&&n)throw Error(G(425))}function xm(){}var fv=null,hv=null;function pv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mv=typeof setTimeout=="function"?setTimeout:void 0,Vz=typeof clearTimeout=="function"?clearTimeout:void 0,SE=typeof Promise=="function"?Promise:void 0,Uz=typeof queueMicrotask=="function"?queueMicrotask:typeof SE<"u"?function(e){return SE.resolve(null).then(e).catch(Hz)}:mv;function Hz(e){setTimeout(function(){throw e})}function Hy(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),qd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);qd(t)}function Co(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function EE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var cc=Math.random().toString(36).slice(2),wi="__reactFiber$"+cc,Yd="__reactProps$"+cc,hs="__reactContainer$"+cc,gv="__reactEvents$"+cc,Wz="__reactListeners$"+cc,qz="__reactHandles$"+cc;function ga(e){var t=e[wi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hs]||n[wi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=EE(e);e!==null;){if(n=e[wi])return n;e=EE(e)}return t}e=n,n=e.parentNode}return null}function Xf(e){return e=e[wi]||e[hs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function c0(e){return e[Yd]||null}var yv=[],Xl=-1;function qo(e){return{current:e}}function st(e){0>Xl||(e.current=yv[Xl],yv[Xl]=null,Xl--)}function Ye(e,t){Xl++,yv[Xl]=e.current,e.current=t}var jo={},pn=qo(jo),$n=qo(!1),qa=jo;function zu(e,t){var n=e.type.contextTypes;if(!n)return jo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function zn(e){return e=e.childContextTypes,e!=null}function wm(){st($n),st(pn)}function TE(e,t,n){if(pn.current!==jo)throw Error(G(168));Ye(pn,t),Ye($n,n)}function zD(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(G(108,R9(e)||"Unknown",i));return pt({},n,r)}function km(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jo,qa=pn.current,Ye(pn,e),Ye($n,$n.current),!0}function _E(e,t,n){var r=e.stateNode;if(!r)throw Error(G(169));n?(e=zD(e,t,qa),r.__reactInternalMemoizedMergedChildContext=e,st($n),st(pn),Ye(pn,e)):st($n),Ye($n,n)}var es=null,d0=!1,Wy=!1;function BD(e){es===null?es=[e]:es.push(e)}function Kz(e){d0=!0,BD(e)}function Ko(){if(!Wy&&es!==null){Wy=!0;var e=0,t=He;try{var n=es;for(He=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}es=null,d0=!1}catch(i){throw es!==null&&(es=es.slice(e+1)),fD(dk,Ko),i}finally{He=t,Wy=!1}}return null}var Zl=[],eu=0,Cm=null,Sm=0,br=[],vr=0,Ka=null,rs=1,is="";function la(e,t){Zl[eu++]=Sm,Zl[eu++]=Cm,Cm=e,Sm=t}function VD(e,t,n){br[vr++]=rs,br[vr++]=is,br[vr++]=Ka,Ka=e;var r=rs;e=is;var i=32-Zr(r)-1;r&=~(1<<i),n+=1;var s=32-Zr(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,rs=1<<32-Zr(t)+i|n<<i|r,is=s+e}else rs=1<<s|n<<i|r,is=e}function xk(e){e.return!==null&&(la(e,1),VD(e,1,0))}function wk(e){for(;e===Cm;)Cm=Zl[--eu],Zl[eu]=null,Sm=Zl[--eu],Zl[eu]=null;for(;e===Ka;)Ka=br[--vr],br[vr]=null,is=br[--vr],br[vr]=null,rs=br[--vr],br[vr]=null}var rr=null,nr=null,lt=!1,Jr=null;function UD(e,t){var n=kr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function AE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rr=e,nr=Co(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rr=e,nr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ka!==null?{id:rs,overflow:is}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=kr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,rr=e,nr=null,!0):!1;default:return!1}}function bv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vv(e){if(lt){var t=nr;if(t){var n=t;if(!AE(e,t)){if(bv(e))throw Error(G(418));t=Co(n.nextSibling);var r=rr;t&&AE(e,t)?UD(r,n):(e.flags=e.flags&-4097|2,lt=!1,rr=e)}}else{if(bv(e))throw Error(G(418));e.flags=e.flags&-4097|2,lt=!1,rr=e}}}function PE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rr=e}function Oh(e){if(e!==rr)return!1;if(!lt)return PE(e),lt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!pv(e.type,e.memoizedProps)),t&&(t=nr)){if(bv(e))throw HD(),Error(G(418));for(;t;)UD(e,t),t=Co(t.nextSibling)}if(PE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){nr=Co(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}nr=null}}else nr=rr?Co(e.stateNode.nextSibling):null;return!0}function HD(){for(var e=nr;e;)e=Co(e.nextSibling)}function Bu(){nr=rr=null,lt=!1}function kk(e){Jr===null?Jr=[e]:Jr.push(e)}var Gz=vs.ReactCurrentBatchConfig;function Mc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,e))}return e}function Ih(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function RE(e){var t=e._init;return t(e._payload)}function WD(e){function t(b,v){if(e){var x=b.deletions;x===null?(b.deletions=[v],b.flags|=16):x.push(v)}}function n(b,v){if(!e)return null;for(;v!==null;)t(b,v),v=v.sibling;return null}function r(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function i(b,v){return b=_o(b,v),b.index=0,b.sibling=null,b}function s(b,v,x){return b.index=x,e?(x=b.alternate,x!==null?(x=x.index,x<v?(b.flags|=2,v):x):(b.flags|=2,v)):(b.flags|=1048576,v)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function a(b,v,x,k){return v===null||v.tag!==6?(v=Xy(x,b.mode,k),v.return=b,v):(v=i(v,x),v.return=b,v)}function l(b,v,x,k){var S=x.type;return S===Kl?c(b,v,x.props.children,k,x.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Bs&&RE(S)===v.type)?(k=i(v,x.props),k.ref=Mc(b,v,x),k.return=b,k):(k=Vp(x.type,x.key,x.props,null,b.mode,k),k.ref=Mc(b,v,x),k.return=b,k)}function u(b,v,x,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Zy(x,b.mode,k),v.return=b,v):(v=i(v,x.children||[]),v.return=b,v)}function c(b,v,x,k,S){return v===null||v.tag!==7?(v=$a(x,b.mode,k,S),v.return=b,v):(v=i(v,x),v.return=b,v)}function d(b,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Xy(""+v,b.mode,x),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Sh:return x=Vp(v.type,v.key,v.props,null,b.mode,x),x.ref=Mc(b,null,v),x.return=b,x;case ql:return v=Zy(v,b.mode,x),v.return=b,v;case Bs:var k=v._init;return d(b,k(v._payload),x)}if(Xc(v)||Ac(v))return v=$a(v,b.mode,x,null),v.return=b,v;Ih(b,v)}return null}function f(b,v,x,k){var S=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:a(b,v,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Sh:return x.key===S?l(b,v,x,k):null;case ql:return x.key===S?u(b,v,x,k):null;case Bs:return S=x._init,f(b,v,S(x._payload),k)}if(Xc(x)||Ac(x))return S!==null?null:c(b,v,x,k,null);Ih(b,x)}return null}function h(b,v,x,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return b=b.get(x)||null,a(v,b,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Sh:return b=b.get(k.key===null?x:k.key)||null,l(v,b,k,S);case ql:return b=b.get(k.key===null?x:k.key)||null,u(v,b,k,S);case Bs:var C=k._init;return h(b,v,x,C(k._payload),S)}if(Xc(k)||Ac(k))return b=b.get(x)||null,c(v,b,k,S,null);Ih(v,k)}return null}function p(b,v,x,k){for(var S=null,C=null,E=v,P=v=0,R=null;E!==null&&P<x.length;P++){E.index>P?(R=E,E=null):R=E.sibling;var A=f(b,E,x[P],k);if(A===null){E===null&&(E=R);break}e&&E&&A.alternate===null&&t(b,E),v=s(A,v,P),C===null?S=A:C.sibling=A,C=A,E=R}if(P===x.length)return n(b,E),lt&&la(b,P),S;if(E===null){for(;P<x.length;P++)E=d(b,x[P],k),E!==null&&(v=s(E,v,P),C===null?S=E:C.sibling=E,C=E);return lt&&la(b,P),S}for(E=r(b,E);P<x.length;P++)R=h(E,b,P,x[P],k),R!==null&&(e&&R.alternate!==null&&E.delete(R.key===null?P:R.key),v=s(R,v,P),C===null?S=R:C.sibling=R,C=R);return e&&E.forEach(function(L){return t(b,L)}),lt&&la(b,P),S}function m(b,v,x,k){var S=Ac(x);if(typeof S!="function")throw Error(G(150));if(x=S.call(x),x==null)throw Error(G(151));for(var C=S=null,E=v,P=v=0,R=null,A=x.next();E!==null&&!A.done;P++,A=x.next()){E.index>P?(R=E,E=null):R=E.sibling;var L=f(b,E,A.value,k);if(L===null){E===null&&(E=R);break}e&&E&&L.alternate===null&&t(b,E),v=s(L,v,P),C===null?S=L:C.sibling=L,C=L,E=R}if(A.done)return n(b,E),lt&&la(b,P),S;if(E===null){for(;!A.done;P++,A=x.next())A=d(b,A.value,k),A!==null&&(v=s(A,v,P),C===null?S=A:C.sibling=A,C=A);return lt&&la(b,P),S}for(E=r(b,E);!A.done;P++,A=x.next())A=h(E,b,P,A.value,k),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?P:A.key),v=s(A,v,P),C===null?S=A:C.sibling=A,C=A);return e&&E.forEach(function(I){return t(b,I)}),lt&&la(b,P),S}function g(b,v,x,k){if(typeof x=="object"&&x!==null&&x.type===Kl&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Sh:e:{for(var S=x.key,C=v;C!==null;){if(C.key===S){if(S=x.type,S===Kl){if(C.tag===7){n(b,C.sibling),v=i(C,x.props.children),v.return=b,b=v;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Bs&&RE(S)===C.type){n(b,C.sibling),v=i(C,x.props),v.ref=Mc(b,C,x),v.return=b,b=v;break e}n(b,C);break}else t(b,C);C=C.sibling}x.type===Kl?(v=$a(x.props.children,b.mode,k,x.key),v.return=b,b=v):(k=Vp(x.type,x.key,x.props,null,b.mode,k),k.ref=Mc(b,v,x),k.return=b,b=k)}return o(b);case ql:e:{for(C=x.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(b,v.sibling),v=i(v,x.children||[]),v.return=b,b=v;break e}else{n(b,v);break}else t(b,v);v=v.sibling}v=Zy(x,b.mode,k),v.return=b,b=v}return o(b);case Bs:return C=x._init,g(b,v,C(x._payload),k)}if(Xc(x))return p(b,v,x,k);if(Ac(x))return m(b,v,x,k);Ih(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(b,v.sibling),v=i(v,x),v.return=b,b=v):(n(b,v),v=Xy(x,b.mode,k),v.return=b,b=v),o(b)):n(b,v)}return g}var Vu=WD(!0),qD=WD(!1),Em=qo(null),Tm=null,tu=null,Ck=null;function Sk(){Ck=tu=Tm=null}function Ek(e){var t=Em.current;st(Em),e._currentValue=t}function xv(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function mu(e,t){Tm=e,Ck=tu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fn=!0),e.firstContext=null)}function Nr(e){var t=e._currentValue;if(Ck!==e)if(e={context:e,memoizedValue:t,next:null},tu===null){if(Tm===null)throw Error(G(308));tu=e,Tm.dependencies={lanes:0,firstContext:e}}else tu=tu.next=e;return t}var ya=null;function Tk(e){ya===null?ya=[e]:ya.push(e)}function KD(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Tk(t)):(n.next=i.next,i.next=n),t.interleaved=n,ps(e,r)}function ps(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Vs=!1;function _k(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function So(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ps(e,n)}return i=r.interleaved,i===null?(t.next=t,Tk(r)):(t.next=i.next,i.next=t),r.interleaved=t,ps(e,n)}function jp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fk(e,n)}}function NE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _m(e,t,n,r){var i=e.updateQueue;Vs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(f=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=pt({},d,f);break e;case 2:Vs=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Ja|=o,e.lanes=o,e.memoizedState=d}}function DE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var Zf={},_i=qo(Zf),Xd=qo(Zf),Zd=qo(Zf);function ba(e){if(e===Zf)throw Error(G(174));return e}function Ak(e,t){switch(Ye(Zd,t),Ye(Xd,e),Ye(_i,Zf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ev(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ev(t,e)}st(_i),Ye(_i,t)}function Uu(){st(_i),st(Xd),st(Zd)}function JD(e){ba(Zd.current);var t=ba(_i.current),n=ev(t,e.type);t!==n&&(Ye(Xd,e),Ye(_i,n))}function Pk(e){Xd.current===e&&(st(_i),st(Xd))}var dt=qo(0);function Am(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qy=[];function Rk(){for(var e=0;e<qy.length;e++)qy[e]._workInProgressVersionPrimary=null;qy.length=0}var Lp=vs.ReactCurrentDispatcher,Ky=vs.ReactCurrentBatchConfig,Ga=0,ht=null,Lt=null,Bt=null,Pm=!1,gd=!1,ef=0,Jz=0;function an(){throw Error(G(321))}function Nk(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ri(e[n],t[n]))return!1;return!0}function Dk(e,t,n,r,i,s){if(Ga=s,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Lp.current=e===null||e.memoizedState===null?Zz:eB,e=n(r,i),gd){s=0;do{if(gd=!1,ef=0,25<=s)throw Error(G(301));s+=1,Bt=Lt=null,t.updateQueue=null,Lp.current=tB,e=n(r,i)}while(gd)}if(Lp.current=Rm,t=Lt!==null&&Lt.next!==null,Ga=0,Bt=Lt=ht=null,Pm=!1,t)throw Error(G(300));return e}function Mk(){var e=ef!==0;return ef=0,e}function fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ht.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function Dr(){if(Lt===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=Bt===null?ht.memoizedState:Bt.next;if(t!==null)Bt=t,Lt=e;else{if(e===null)throw Error(G(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Bt===null?ht.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function tf(e,t){return typeof t=="function"?t(e):t}function Gy(e){var t=Dr(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=Lt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Ga&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,ht.lanes|=c,Ja|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,ri(r,t.memoizedState)||(Fn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ht.lanes|=s,Ja|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Jy(e){var t=Dr(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);ri(s,t.memoizedState)||(Fn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function QD(){}function YD(e,t){var n=ht,r=Dr(),i=t(),s=!ri(r.memoizedState,i);if(s&&(r.memoizedState=i,Fn=!0),r=r.queue,Ok(eM.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,nf(9,ZD.bind(null,n,r,i,t),void 0,null),Wt===null)throw Error(G(349));Ga&30||XD(n,t,i)}return i}function XD(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ZD(e,t,n,r){t.value=n,t.getSnapshot=r,tM(t)&&nM(e)}function eM(e,t,n){return n(function(){tM(t)&&nM(e)})}function tM(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ri(e,n)}catch{return!0}}function nM(e){var t=ps(e,1);t!==null&&ei(t,e,1,-1)}function ME(e){var t=fi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tf,lastRenderedState:e},t.queue=e,e=e.dispatch=Xz.bind(null,ht,e),[t.memoizedState,e]}function nf(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function rM(){return Dr().memoizedState}function Fp(e,t,n,r){var i=fi();ht.flags|=e,i.memoizedState=nf(1|t,n,void 0,r===void 0?null:r)}function f0(e,t,n,r){var i=Dr();r=r===void 0?null:r;var s=void 0;if(Lt!==null){var o=Lt.memoizedState;if(s=o.destroy,r!==null&&Nk(r,o.deps)){i.memoizedState=nf(t,n,s,r);return}}ht.flags|=e,i.memoizedState=nf(1|t,n,s,r)}function OE(e,t){return Fp(8390656,8,e,t)}function Ok(e,t){return f0(2048,8,e,t)}function iM(e,t){return f0(4,2,e,t)}function sM(e,t){return f0(4,4,e,t)}function oM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function aM(e,t,n){return n=n!=null?n.concat([e]):null,f0(4,4,oM.bind(null,t,e),n)}function Ik(){}function lM(e,t){var n=Dr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nk(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function uM(e,t){var n=Dr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nk(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function cM(e,t,n){return Ga&21?(ri(n,t)||(n=mD(),ht.lanes|=n,Ja|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fn=!0),e.memoizedState=n)}function Qz(e,t){var n=He;He=n!==0&&4>n?n:4,e(!0);var r=Ky.transition;Ky.transition={};try{e(!1),t()}finally{He=n,Ky.transition=r}}function dM(){return Dr().memoizedState}function Yz(e,t,n){var r=To(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fM(e))hM(t,n);else if(n=KD(e,t,n,r),n!==null){var i=Tn();ei(n,e,r,i),pM(n,t,r)}}function Xz(e,t,n){var r=To(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fM(e))hM(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ri(a,o)){var l=t.interleaved;l===null?(i.next=i,Tk(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=KD(e,t,i,r),n!==null&&(i=Tn(),ei(n,e,r,i),pM(n,t,r))}}function fM(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function hM(e,t){gd=Pm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pM(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fk(e,n)}}var Rm={readContext:Nr,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},Zz={readContext:Nr,useCallback:function(e,t){return fi().memoizedState=[e,t===void 0?null:t],e},useContext:Nr,useEffect:OE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Fp(4194308,4,oM.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fp(4,2,e,t)},useMemo:function(e,t){var n=fi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yz.bind(null,ht,e),[r.memoizedState,e]},useRef:function(e){var t=fi();return e={current:e},t.memoizedState=e},useState:ME,useDebugValue:Ik,useDeferredValue:function(e){return fi().memoizedState=e},useTransition:function(){var e=ME(!1),t=e[0];return e=Qz.bind(null,e[1]),fi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ht,i=fi();if(lt){if(n===void 0)throw Error(G(407));n=n()}else{if(n=t(),Wt===null)throw Error(G(349));Ga&30||XD(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,OE(eM.bind(null,r,s,e),[e]),r.flags|=2048,nf(9,ZD.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=fi(),t=Wt.identifierPrefix;if(lt){var n=is,r=rs;n=(r&~(1<<32-Zr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ef++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Jz++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eB={readContext:Nr,useCallback:lM,useContext:Nr,useEffect:Ok,useImperativeHandle:aM,useInsertionEffect:iM,useLayoutEffect:sM,useMemo:uM,useReducer:Gy,useRef:rM,useState:function(){return Gy(tf)},useDebugValue:Ik,useDeferredValue:function(e){var t=Dr();return cM(t,Lt.memoizedState,e)},useTransition:function(){var e=Gy(tf)[0],t=Dr().memoizedState;return[e,t]},useMutableSource:QD,useSyncExternalStore:YD,useId:dM,unstable_isNewReconciler:!1},tB={readContext:Nr,useCallback:lM,useContext:Nr,useEffect:Ok,useImperativeHandle:aM,useInsertionEffect:iM,useLayoutEffect:sM,useMemo:uM,useReducer:Jy,useRef:rM,useState:function(){return Jy(tf)},useDebugValue:Ik,useDeferredValue:function(e){var t=Dr();return Lt===null?t.memoizedState=e:cM(t,Lt.memoizedState,e)},useTransition:function(){var e=Jy(tf)[0],t=Dr().memoizedState;return[e,t]},useMutableSource:QD,useSyncExternalStore:YD,useId:dM,unstable_isNewReconciler:!1};function Ur(e,t){if(e&&e.defaultProps){t=pt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function wv(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:pt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var h0={isMounted:function(e){return(e=e._reactInternals)?pl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Tn(),i=To(e),s=ls(r,i);s.payload=t,n!=null&&(s.callback=n),t=So(e,s,i),t!==null&&(ei(t,e,i,r),jp(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Tn(),i=To(e),s=ls(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=So(e,s,i),t!==null&&(ei(t,e,i,r),jp(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Tn(),r=To(e),i=ls(n,r);i.tag=2,t!=null&&(i.callback=t),t=So(e,i,r),t!==null&&(ei(t,e,r,n),jp(t,e,r))}};function IE(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Gd(n,r)||!Gd(i,s):!0}function mM(e,t,n){var r=!1,i=jo,s=t.contextType;return typeof s=="object"&&s!==null?s=Nr(s):(i=zn(t)?qa:pn.current,r=t.contextTypes,s=(r=r!=null)?zu(e,i):jo),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=h0,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function jE(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&h0.enqueueReplaceState(t,t.state,null)}function kv(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},_k(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Nr(s):(s=zn(t)?qa:pn.current,i.context=zu(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(wv(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&h0.enqueueReplaceState(i,i.state,null),_m(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Hu(e,t){try{var n="",r=t;do n+=P9(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Qy(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Cv(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var nB=typeof WeakMap=="function"?WeakMap:Map;function gM(e,t,n){n=ls(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Dm||(Dm=!0,Mv=r),Cv(e,t)},n}function yM(e,t,n){n=ls(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Cv(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Cv(e,t),typeof r!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function LE(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new nB;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=gB.bind(null,e,t,n),t.then(e,e))}function FE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $E(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ls(-1,1),t.tag=2,So(n,t,1))),n.lanes|=1),e)}var rB=vs.ReactCurrentOwner,Fn=!1;function wn(e,t,n,r){t.child=e===null?qD(t,null,n,r):Vu(t,e.child,n,r)}function zE(e,t,n,r,i){n=n.render;var s=t.ref;return mu(t,i),r=Dk(e,t,n,r,s,i),n=Mk(),e!==null&&!Fn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ms(e,t,i)):(lt&&n&&xk(t),t.flags|=1,wn(e,t,r,i),t.child)}function BE(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Uk(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,bM(e,t,s,r,i)):(e=Vp(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Gd,n(o,r)&&e.ref===t.ref)return ms(e,t,i)}return t.flags|=1,e=_o(s,r),e.ref=t.ref,e.return=t,t.child=e}function bM(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Gd(s,r)&&e.ref===t.ref)if(Fn=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Fn=!0);else return t.lanes=e.lanes,ms(e,t,i)}return Sv(e,t,n,r,i)}function vM(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(ru,Yn),Yn|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ye(ru,Yn),Yn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ye(ru,Yn),Yn|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ye(ru,Yn),Yn|=r;return wn(e,t,i,n),t.child}function xM(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sv(e,t,n,r,i){var s=zn(n)?qa:pn.current;return s=zu(t,s),mu(t,i),n=Dk(e,t,n,r,s,i),r=Mk(),e!==null&&!Fn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ms(e,t,i)):(lt&&r&&xk(t),t.flags|=1,wn(e,t,n,i),t.child)}function VE(e,t,n,r,i){if(zn(n)){var s=!0;km(t)}else s=!1;if(mu(t,i),t.stateNode===null)$p(e,t),mM(t,n,r),kv(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Nr(u):(u=zn(n)?qa:pn.current,u=zu(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&jE(t,o,r,u),Vs=!1;var f=t.memoizedState;o.state=f,_m(t,r,o,i),l=t.memoizedState,a!==r||f!==l||$n.current||Vs?(typeof c=="function"&&(wv(t,n,c,r),l=t.memoizedState),(a=Vs||IE(t,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,GD(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Ur(t.type,a),o.props=u,d=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Nr(l):(l=zn(n)?qa:pn.current,l=zu(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&jE(t,o,r,l),Vs=!1,f=t.memoizedState,o.state=f,_m(t,r,o,i);var p=t.memoizedState;a!==d||f!==p||$n.current||Vs?(typeof h=="function"&&(wv(t,n,h,r),p=t.memoizedState),(u=Vs||IE(t,n,u,r,f,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ev(e,t,n,r,s,i)}function Ev(e,t,n,r,i,s){xM(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&_E(t,n,!1),ms(e,t,s);r=t.stateNode,rB.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Vu(t,e.child,null,s),t.child=Vu(t,null,a,s)):wn(e,t,a,s),t.memoizedState=r.state,i&&_E(t,n,!0),t.child}function wM(e){var t=e.stateNode;t.pendingContext?TE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&TE(e,t.context,!1),Ak(e,t.containerInfo)}function UE(e,t,n,r,i){return Bu(),kk(i),t.flags|=256,wn(e,t,n,r),t.child}var Tv={dehydrated:null,treeContext:null,retryLane:0};function _v(e){return{baseLanes:e,cachePool:null,transitions:null}}function kM(e,t,n){var r=t.pendingProps,i=dt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ye(dt,i&1),e===null)return vv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=g0(o,r,0,null),e=$a(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=_v(n),t.memoizedState=Tv,e):jk(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return iB(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=_o(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=_o(a,s):(s=$a(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?_v(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Tv,r}return s=e.child,e=s.sibling,r=_o(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function jk(e,t){return t=g0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jh(e,t,n,r){return r!==null&&kk(r),Vu(t,e.child,null,n),e=jk(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function iB(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Qy(Error(G(422))),jh(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=g0({mode:"visible",children:r.children},i,0,null),s=$a(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Vu(t,e.child,null,o),t.child.memoizedState=_v(o),t.memoizedState=Tv,s);if(!(t.mode&1))return jh(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(G(419)),r=Qy(s,r,void 0),jh(e,t,o,r)}if(a=(o&e.childLanes)!==0,Fn||a){if(r=Wt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ps(e,i),ei(r,e,i,-1))}return Vk(),r=Qy(Error(G(421))),jh(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=yB.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,nr=Co(i.nextSibling),rr=t,lt=!0,Jr=null,e!==null&&(br[vr++]=rs,br[vr++]=is,br[vr++]=Ka,rs=e.id,is=e.overflow,Ka=t),t=jk(t,r.children),t.flags|=4096,t)}function HE(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),xv(e.return,t,n)}function Yy(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function CM(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wn(e,t,r.children,n),r=dt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&HE(e,n,t);else if(e.tag===19)HE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ye(dt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Am(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Yy(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Am(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Yy(t,!0,n,null,s);break;case"together":Yy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $p(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ms(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ja|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,n=_o(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=_o(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sB(e,t,n){switch(t.tag){case 3:wM(t),Bu();break;case 5:JD(t);break;case 1:zn(t.type)&&km(t);break;case 4:Ak(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ye(Em,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ye(dt,dt.current&1),t.flags|=128,null):n&t.child.childLanes?kM(e,t,n):(Ye(dt,dt.current&1),e=ms(e,t,n),e!==null?e.sibling:null);Ye(dt,dt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return CM(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ye(dt,dt.current),r)break;return null;case 22:case 23:return t.lanes=0,vM(e,t,n)}return ms(e,t,n)}var SM,Av,EM,TM;SM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Av=function(){};EM=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ba(_i.current);var s=null;switch(n){case"input":i=Qb(e,i),r=Qb(e,r),s=[];break;case"select":i=pt({},i,{value:void 0}),r=pt({},r,{value:void 0}),s=[];break;case"textarea":i=Zb(e,i),r=Zb(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=xm)}tv(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bd.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bd.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&rt("scroll",e),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};TM=function(e,t,n,r){n!==r&&(t.flags|=4)};function Oc(e,t){if(!lt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ln(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function oB(e,t,n){var r=t.pendingProps;switch(wk(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(t),null;case 1:return zn(t.type)&&wm(),ln(t),null;case 3:return r=t.stateNode,Uu(),st($n),st(pn),Rk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Oh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jr!==null&&(jv(Jr),Jr=null))),Av(e,t),ln(t),null;case 5:Pk(t);var i=ba(Zd.current);if(n=t.type,e!==null&&t.stateNode!=null)EM(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(G(166));return ln(t),null}if(e=ba(_i.current),Oh(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[wi]=t,r[Yd]=s,e=(t.mode&1)!==0,n){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(i=0;i<ed.length;i++)rt(ed[i],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":Z2(r,s),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},rt("invalid",r);break;case"textarea":tE(r,s),rt("invalid",r)}tv(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Mh(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Mh(r.textContent,a,e),i=["children",""+a]):Bd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&rt("scroll",r)}switch(n){case"input":Eh(r),eE(r,s,!0);break;case"textarea":Eh(r),nE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=xm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=eD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[wi]=t,e[Yd]=r,SM(e,t,!1,!1),t.stateNode=e;e:{switch(o=nv(n,r),n){case"dialog":rt("cancel",e),rt("close",e),i=r;break;case"iframe":case"object":case"embed":rt("load",e),i=r;break;case"video":case"audio":for(i=0;i<ed.length;i++)rt(ed[i],e);i=r;break;case"source":rt("error",e),i=r;break;case"img":case"image":case"link":rt("error",e),rt("load",e),i=r;break;case"details":rt("toggle",e),i=r;break;case"input":Z2(e,r),i=Qb(e,r),rt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=pt({},r,{value:void 0}),rt("invalid",e);break;case"textarea":tE(e,r),i=Zb(e,r),rt("invalid",e);break;default:i=r}tv(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?rD(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tD(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Vd(e,l):typeof l=="number"&&Vd(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&rt("scroll",e):l!=null&&ok(e,s,l,o))}switch(n){case"input":Eh(e),eE(e,r,!1);break;case"textarea":Eh(e),nE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Io(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?du(e,!!r.multiple,s,!1):r.defaultValue!=null&&du(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=xm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ln(t),null;case 6:if(e&&t.stateNode!=null)TM(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(G(166));if(n=ba(Zd.current),ba(_i.current),Oh(t)){if(r=t.stateNode,n=t.memoizedProps,r[wi]=t,(s=r.nodeValue!==n)&&(e=rr,e!==null))switch(e.tag){case 3:Mh(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Mh(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wi]=t,t.stateNode=r}return ln(t),null;case 13:if(st(dt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(lt&&nr!==null&&t.mode&1&&!(t.flags&128))HD(),Bu(),t.flags|=98560,s=!1;else if(s=Oh(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(G(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[wi]=t}else Bu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ln(t),s=!1}else Jr!==null&&(jv(Jr),Jr=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||dt.current&1?$t===0&&($t=3):Vk())),t.updateQueue!==null&&(t.flags|=4),ln(t),null);case 4:return Uu(),Av(e,t),e===null&&Jd(t.stateNode.containerInfo),ln(t),null;case 10:return Ek(t.type._context),ln(t),null;case 17:return zn(t.type)&&wm(),ln(t),null;case 19:if(st(dt),s=t.memoizedState,s===null)return ln(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Oc(s,!1);else{if($t!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Am(e),o!==null){for(t.flags|=128,Oc(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ye(dt,dt.current&1|2),t.child}e=e.sibling}s.tail!==null&&St()>Wu&&(t.flags|=128,r=!0,Oc(s,!1),t.lanes=4194304)}else{if(!r)if(e=Am(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Oc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!lt)return ln(t),null}else 2*St()-s.renderingStartTime>Wu&&n!==1073741824&&(t.flags|=128,r=!0,Oc(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=St(),t.sibling=null,n=dt.current,Ye(dt,r?n&1|2:n&1),t):(ln(t),null);case 22:case 23:return Bk(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Yn&1073741824&&(ln(t),t.subtreeFlags&6&&(t.flags|=8192)):ln(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function aB(e,t){switch(wk(t),t.tag){case 1:return zn(t.type)&&wm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Uu(),st($n),st(pn),Rk(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pk(t),null;case 13:if(st(dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));Bu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return st(dt),null;case 4:return Uu(),null;case 10:return Ek(t.type._context),null;case 22:case 23:return Bk(),null;case 24:return null;default:return null}}var Lh=!1,dn=!1,lB=typeof WeakSet=="function"?WeakSet:Set,se=null;function nu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xt(e,t,r)}else n.current=null}function Pv(e,t,n){try{n()}catch(r){xt(e,t,r)}}var WE=!1;function uB(e,t){if(fv=ym,e=ND(),vk(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(hv={focusedElem:e,selectionRange:n},ym=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ur(t.type,m),g);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(k){xt(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return p=WE,WE=!1,p}function yd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Pv(t,n,s)}i=i.next}while(i!==r)}}function p0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Rv(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function _M(e){var t=e.alternate;t!==null&&(e.alternate=null,_M(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wi],delete t[Yd],delete t[gv],delete t[Wz],delete t[qz])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function AM(e){return e.tag===5||e.tag===3||e.tag===4}function qE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||AM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=xm));else if(r!==4&&(e=e.child,e!==null))for(Nv(e,t,n),e=e.sibling;e!==null;)Nv(e,t,n),e=e.sibling}function Dv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Dv(e,t,n),e=e.sibling;e!==null;)Dv(e,t,n),e=e.sibling}var Yt=null,Kr=!1;function Rs(e,t,n){for(n=n.child;n!==null;)PM(e,t,n),n=n.sibling}function PM(e,t,n){if(Ti&&typeof Ti.onCommitFiberUnmount=="function")try{Ti.onCommitFiberUnmount(o0,n)}catch{}switch(n.tag){case 5:dn||nu(n,t);case 6:var r=Yt,i=Kr;Yt=null,Rs(e,t,n),Yt=r,Kr=i,Yt!==null&&(Kr?(e=Yt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Yt.removeChild(n.stateNode));break;case 18:Yt!==null&&(Kr?(e=Yt,n=n.stateNode,e.nodeType===8?Hy(e.parentNode,n):e.nodeType===1&&Hy(e,n),qd(e)):Hy(Yt,n.stateNode));break;case 4:r=Yt,i=Kr,Yt=n.stateNode.containerInfo,Kr=!0,Rs(e,t,n),Yt=r,Kr=i;break;case 0:case 11:case 14:case 15:if(!dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Pv(n,t,o),i=i.next}while(i!==r)}Rs(e,t,n);break;case 1:if(!dn&&(nu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xt(n,t,a)}Rs(e,t,n);break;case 21:Rs(e,t,n);break;case 22:n.mode&1?(dn=(r=dn)||n.memoizedState!==null,Rs(e,t,n),dn=r):Rs(e,t,n);break;default:Rs(e,t,n)}}function KE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new lB),t.forEach(function(r){var i=bB.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Fr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yt=a.stateNode,Kr=!1;break e;case 3:Yt=a.stateNode.containerInfo,Kr=!0;break e;case 4:Yt=a.stateNode.containerInfo,Kr=!0;break e}a=a.return}if(Yt===null)throw Error(G(160));PM(s,o,i),Yt=null,Kr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){xt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)RM(t,e),t=t.sibling}function RM(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Fr(t,e),di(e),r&4){try{yd(3,e,e.return),p0(3,e)}catch(m){xt(e,e.return,m)}try{yd(5,e,e.return)}catch(m){xt(e,e.return,m)}}break;case 1:Fr(t,e),di(e),r&512&&n!==null&&nu(n,n.return);break;case 5:if(Fr(t,e),di(e),r&512&&n!==null&&nu(n,n.return),e.flags&32){var i=e.stateNode;try{Vd(i,"")}catch(m){xt(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&XN(i,s),nv(a,o);var u=nv(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?rD(i,d):c==="dangerouslySetInnerHTML"?tD(i,d):c==="children"?Vd(i,d):ok(i,c,d,u)}switch(a){case"input":Yb(i,s);break;case"textarea":ZN(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?du(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?du(i,!!s.multiple,s.defaultValue,!0):du(i,!!s.multiple,s.multiple?[]:"",!1))}i[Yd]=s}catch(m){xt(e,e.return,m)}}break;case 6:if(Fr(t,e),di(e),r&4){if(e.stateNode===null)throw Error(G(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){xt(e,e.return,m)}}break;case 3:if(Fr(t,e),di(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qd(t.containerInfo)}catch(m){xt(e,e.return,m)}break;case 4:Fr(t,e),di(e);break;case 13:Fr(t,e),di(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($k=St())),r&4&&KE(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(dn=(u=dn)||c,Fr(t,e),dn=u):Fr(t,e),di(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(se=e,c=e.child;c!==null;){for(d=se=c;se!==null;){switch(f=se,h=f.child,f.tag){case 0:case 11:case 14:case 15:yd(4,f,f.return);break;case 1:nu(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){xt(r,n,m)}}break;case 5:nu(f,f.return);break;case 22:if(f.memoizedState!==null){JE(d);continue}}h!==null?(h.return=f,se=h):JE(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=nD("display",o))}catch(m){xt(e,e.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){xt(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Fr(t,e),di(e),r&4&&KE(e);break;case 21:break;default:Fr(t,e),di(e)}}function di(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(AM(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vd(i,""),r.flags&=-33);var s=qE(e);Dv(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qE(e);Nv(e,a,o);break;default:throw Error(G(161))}}catch(l){xt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cB(e,t,n){se=e,NM(e)}function NM(e,t,n){for(var r=(e.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Lh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||dn;a=Lh;var u=dn;if(Lh=o,(dn=l)&&!u)for(se=i;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?QE(i):l!==null?(l.return=o,se=l):QE(i);for(;s!==null;)se=s,NM(s),s=s.sibling;se=i,Lh=a,dn=u}GE(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):GE(e)}}function GE(e){for(;se!==null;){var t=se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dn||p0(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!dn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ur(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&DE(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}DE(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&qd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}dn||t.flags&512&&Rv(t)}catch(f){xt(t,t.return,f)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function JE(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function QE(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{p0(4,t)}catch(l){xt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){xt(t,i,l)}}var s=t.return;try{Rv(t)}catch(l){xt(t,s,l)}break;case 5:var o=t.return;try{Rv(t)}catch(l){xt(t,o,l)}}}catch(l){xt(t,t.return,l)}if(t===e){se=null;break}var a=t.sibling;if(a!==null){a.return=t.return,se=a;break}se=t.return}}var dB=Math.ceil,Nm=vs.ReactCurrentDispatcher,Lk=vs.ReactCurrentOwner,Sr=vs.ReactCurrentBatchConfig,je=0,Wt=null,Dt=null,rn=0,Yn=0,ru=qo(0),$t=0,rf=null,Ja=0,m0=0,Fk=0,bd=null,jn=null,$k=0,Wu=1/0,Yi=null,Dm=!1,Mv=null,Eo=null,Fh=!1,ho=null,Mm=0,vd=0,Ov=null,zp=-1,Bp=0;function Tn(){return je&6?St():zp!==-1?zp:zp=St()}function To(e){return e.mode&1?je&2&&rn!==0?rn&-rn:Gz.transition!==null?(Bp===0&&(Bp=mD()),Bp):(e=He,e!==0||(e=window.event,e=e===void 0?16:kD(e.type)),e):1}function ei(e,t,n,r){if(50<vd)throw vd=0,Ov=null,Error(G(185));Qf(e,n,r),(!(je&2)||e!==Wt)&&(e===Wt&&(!(je&2)&&(m0|=n),$t===4&&Js(e,rn)),Bn(e,r),n===1&&je===0&&!(t.mode&1)&&(Wu=St()+500,d0&&Ko()))}function Bn(e,t){var n=e.callbackNode;G9(e,t);var r=gm(e,e===Wt?rn:0);if(r===0)n!==null&&sE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&sE(n),t===1)e.tag===0?Kz(YE.bind(null,e)):BD(YE.bind(null,e)),Uz(function(){!(je&6)&&Ko()}),n=null;else{switch(gD(r)){case 1:n=dk;break;case 4:n=hD;break;case 16:n=mm;break;case 536870912:n=pD;break;default:n=mm}n=$M(n,DM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function DM(e,t){if(zp=-1,Bp=0,je&6)throw Error(G(327));var n=e.callbackNode;if(gu()&&e.callbackNode!==n)return null;var r=gm(e,e===Wt?rn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Om(e,r);else{t=r;var i=je;je|=2;var s=OM();(Wt!==e||rn!==t)&&(Yi=null,Wu=St()+500,Fa(e,t));do try{pB();break}catch(a){MM(e,a)}while(!0);Sk(),Nm.current=s,je=i,Dt!==null?t=0:(Wt=null,rn=0,t=$t)}if(t!==0){if(t===2&&(i=av(e),i!==0&&(r=i,t=Iv(e,i))),t===1)throw n=rf,Fa(e,0),Js(e,r),Bn(e,St()),n;if(t===6)Js(e,r);else{if(i=e.current.alternate,!(r&30)&&!fB(i)&&(t=Om(e,r),t===2&&(s=av(e),s!==0&&(r=s,t=Iv(e,s))),t===1))throw n=rf,Fa(e,0),Js(e,r),Bn(e,St()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(G(345));case 2:ua(e,jn,Yi);break;case 3:if(Js(e,r),(r&130023424)===r&&(t=$k+500-St(),10<t)){if(gm(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Tn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=mv(ua.bind(null,e,jn,Yi),t);break}ua(e,jn,Yi);break;case 4:if(Js(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Zr(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=St()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dB(r/1960))-r,10<r){e.timeoutHandle=mv(ua.bind(null,e,jn,Yi),r);break}ua(e,jn,Yi);break;case 5:ua(e,jn,Yi);break;default:throw Error(G(329))}}}return Bn(e,St()),e.callbackNode===n?DM.bind(null,e):null}function Iv(e,t){var n=bd;return e.current.memoizedState.isDehydrated&&(Fa(e,t).flags|=256),e=Om(e,t),e!==2&&(t=jn,jn=n,t!==null&&jv(t)),e}function jv(e){jn===null?jn=e:jn.push.apply(jn,e)}function fB(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ri(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Js(e,t){for(t&=~Fk,t&=~m0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Zr(t),r=1<<n;e[n]=-1,t&=~r}}function YE(e){if(je&6)throw Error(G(327));gu();var t=gm(e,0);if(!(t&1))return Bn(e,St()),null;var n=Om(e,t);if(e.tag!==0&&n===2){var r=av(e);r!==0&&(t=r,n=Iv(e,r))}if(n===1)throw n=rf,Fa(e,0),Js(e,t),Bn(e,St()),n;if(n===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ua(e,jn,Yi),Bn(e,St()),null}function zk(e,t){var n=je;je|=1;try{return e(t)}finally{je=n,je===0&&(Wu=St()+500,d0&&Ko())}}function Qa(e){ho!==null&&ho.tag===0&&!(je&6)&&gu();var t=je;je|=1;var n=Sr.transition,r=He;try{if(Sr.transition=null,He=1,e)return e()}finally{He=r,Sr.transition=n,je=t,!(je&6)&&Ko()}}function Bk(){Yn=ru.current,st(ru)}function Fa(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Vz(n)),Dt!==null)for(n=Dt.return;n!==null;){var r=n;switch(wk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wm();break;case 3:Uu(),st($n),st(pn),Rk();break;case 5:Pk(r);break;case 4:Uu();break;case 13:st(dt);break;case 19:st(dt);break;case 10:Ek(r.type._context);break;case 22:case 23:Bk()}n=n.return}if(Wt=e,Dt=e=_o(e.current,null),rn=Yn=t,$t=0,rf=null,Fk=m0=Ja=0,jn=bd=null,ya!==null){for(t=0;t<ya.length;t++)if(n=ya[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ya=null}return e}function MM(e,t){do{var n=Dt;try{if(Sk(),Lp.current=Rm,Pm){for(var r=ht.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Pm=!1}if(Ga=0,Bt=Lt=ht=null,gd=!1,ef=0,Lk.current=null,n===null||n.return===null){$t=1,rf=t,Dt=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=rn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=FE(o);if(h!==null){h.flags&=-257,$E(h,o,a,s,t),h.mode&1&&LE(s,u,t),t=h,l=u;var p=t.updateQueue;if(p===null){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}else{if(!(t&1)){LE(s,u,t),Vk();break e}l=Error(G(426))}}else if(lt&&a.mode&1){var g=FE(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),$E(g,o,a,s,t),kk(Hu(l,a));break e}}s=l=Hu(l,a),$t!==4&&($t=2),bd===null?bd=[s]:bd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var b=gM(s,l,t);NE(s,b);break e;case 1:a=l;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Eo===null||!Eo.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var k=yM(s,a,t);NE(s,k);break e}}s=s.return}while(s!==null)}jM(n)}catch(S){t=S,Dt===n&&n!==null&&(Dt=n=n.return);continue}break}while(!0)}function OM(){var e=Nm.current;return Nm.current=Rm,e===null?Rm:e}function Vk(){($t===0||$t===3||$t===2)&&($t=4),Wt===null||!(Ja&268435455)&&!(m0&268435455)||Js(Wt,rn)}function Om(e,t){var n=je;je|=2;var r=OM();(Wt!==e||rn!==t)&&(Yi=null,Fa(e,t));do try{hB();break}catch(i){MM(e,i)}while(!0);if(Sk(),je=n,Nm.current=r,Dt!==null)throw Error(G(261));return Wt=null,rn=0,$t}function hB(){for(;Dt!==null;)IM(Dt)}function pB(){for(;Dt!==null&&!$9();)IM(Dt)}function IM(e){var t=FM(e.alternate,e,Yn);e.memoizedProps=e.pendingProps,t===null?jM(e):Dt=t,Lk.current=null}function jM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=aB(n,t),n!==null){n.flags&=32767,Dt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$t=6,Dt=null;return}}else if(n=oB(n,t,Yn),n!==null){Dt=n;return}if(t=t.sibling,t!==null){Dt=t;return}Dt=t=e}while(t!==null);$t===0&&($t=5)}function ua(e,t,n){var r=He,i=Sr.transition;try{Sr.transition=null,He=1,mB(e,t,n,r)}finally{Sr.transition=i,He=r}return null}function mB(e,t,n,r){do gu();while(ho!==null);if(je&6)throw Error(G(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(J9(e,s),e===Wt&&(Dt=Wt=null,rn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fh||(Fh=!0,$M(mm,function(){return gu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Sr.transition,Sr.transition=null;var o=He;He=1;var a=je;je|=4,Lk.current=null,uB(e,n),RM(n,e),Iz(hv),ym=!!fv,hv=fv=null,e.current=n,cB(n),z9(),je=a,He=o,Sr.transition=s}else e.current=n;if(Fh&&(Fh=!1,ho=e,Mm=i),s=e.pendingLanes,s===0&&(Eo=null),U9(n.stateNode),Bn(e,St()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Dm)throw Dm=!1,e=Mv,Mv=null,e;return Mm&1&&e.tag!==0&&gu(),s=e.pendingLanes,s&1?e===Ov?vd++:(vd=0,Ov=e):vd=0,Ko(),null}function gu(){if(ho!==null){var e=gD(Mm),t=Sr.transition,n=He;try{if(Sr.transition=null,He=16>e?16:e,ho===null)var r=!1;else{if(e=ho,ho=null,Mm=0,je&6)throw Error(G(331));var i=je;for(je|=4,se=e.current;se!==null;){var s=se,o=s.child;if(se.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(se=u;se!==null;){var c=se;switch(c.tag){case 0:case 11:case 15:yd(8,c,s)}var d=c.child;if(d!==null)d.return=c,se=d;else for(;se!==null;){c=se;var f=c.sibling,h=c.return;if(_M(c),c===u){se=null;break}if(f!==null){f.return=h,se=f;break}se=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,se=o;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:yd(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,se=b;break e}se=s.return}}var v=e.current;for(se=v;se!==null;){o=se;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,se=x;else e:for(o=v;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:p0(9,a)}}catch(S){xt(a,a.return,S)}if(a===o){se=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,se=k;break e}se=a.return}}if(je=i,Ko(),Ti&&typeof Ti.onPostCommitFiberRoot=="function")try{Ti.onPostCommitFiberRoot(o0,e)}catch{}r=!0}return r}finally{He=n,Sr.transition=t}}return!1}function XE(e,t,n){t=Hu(n,t),t=gM(e,t,1),e=So(e,t,1),t=Tn(),e!==null&&(Qf(e,1,t),Bn(e,t))}function xt(e,t,n){if(e.tag===3)XE(e,e,n);else for(;t!==null;){if(t.tag===3){XE(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Eo===null||!Eo.has(r))){e=Hu(n,e),e=yM(t,e,1),t=So(t,e,1),e=Tn(),t!==null&&(Qf(t,1,e),Bn(t,e));break}}t=t.return}}function gB(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Tn(),e.pingedLanes|=e.suspendedLanes&n,Wt===e&&(rn&n)===n&&($t===4||$t===3&&(rn&130023424)===rn&&500>St()-$k?Fa(e,0):Fk|=n),Bn(e,t)}function LM(e,t){t===0&&(e.mode&1?(t=Ah,Ah<<=1,!(Ah&130023424)&&(Ah=4194304)):t=1);var n=Tn();e=ps(e,t),e!==null&&(Qf(e,t,n),Bn(e,n))}function yB(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),LM(e,n)}function bB(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(t),LM(e,n)}var FM;FM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$n.current)Fn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Fn=!1,sB(e,t,n);Fn=!!(e.flags&131072)}else Fn=!1,lt&&t.flags&1048576&&VD(t,Sm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$p(e,t),e=t.pendingProps;var i=zu(t,pn.current);mu(t,n),i=Dk(null,t,r,e,i,n);var s=Mk();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zn(r)?(s=!0,km(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_k(t),i.updater=h0,t.stateNode=i,i._reactInternals=t,kv(t,r,e,n),t=Ev(null,t,r,!0,s,n)):(t.tag=0,lt&&s&&xk(t),wn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($p(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=xB(r),e=Ur(r,e),i){case 0:t=Sv(null,t,r,e,n);break e;case 1:t=VE(null,t,r,e,n);break e;case 11:t=zE(null,t,r,e,n);break e;case 14:t=BE(null,t,r,Ur(r.type,e),n);break e}throw Error(G(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ur(r,i),Sv(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ur(r,i),VE(e,t,r,i,n);case 3:e:{if(wM(t),e===null)throw Error(G(387));r=t.pendingProps,s=t.memoizedState,i=s.element,GD(e,t),_m(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Hu(Error(G(423)),t),t=UE(e,t,r,n,i);break e}else if(r!==i){i=Hu(Error(G(424)),t),t=UE(e,t,r,n,i);break e}else for(nr=Co(t.stateNode.containerInfo.firstChild),rr=t,lt=!0,Jr=null,n=qD(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bu(),r===i){t=ms(e,t,n);break e}wn(e,t,r,n)}t=t.child}return t;case 5:return JD(t),e===null&&vv(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,pv(r,i)?o=null:s!==null&&pv(r,s)&&(t.flags|=32),xM(e,t),wn(e,t,o,n),t.child;case 6:return e===null&&vv(t),null;case 13:return kM(e,t,n);case 4:return Ak(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Vu(t,null,r,n):wn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ur(r,i),zE(e,t,r,i,n);case 7:return wn(e,t,t.pendingProps,n),t.child;case 8:return wn(e,t,t.pendingProps.children,n),t.child;case 12:return wn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ye(Em,r._currentValue),r._currentValue=o,s!==null)if(ri(s.value,o)){if(s.children===i.children&&!$n.current){t=ms(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ls(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),xv(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),xv(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,mu(t,n),i=Nr(i),r=r(i),t.flags|=1,wn(e,t,r,n),t.child;case 14:return r=t.type,i=Ur(r,t.pendingProps),i=Ur(r.type,i),BE(e,t,r,i,n);case 15:return bM(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ur(r,i),$p(e,t),t.tag=1,zn(r)?(e=!0,km(t)):e=!1,mu(t,n),mM(t,r,i),kv(t,r,i,n),Ev(null,t,r,!0,e,n);case 19:return CM(e,t,n);case 22:return vM(e,t,n)}throw Error(G(156,t.tag))};function $M(e,t){return fD(e,t)}function vB(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(e,t,n,r){return new vB(e,t,n,r)}function Uk(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xB(e){if(typeof e=="function")return Uk(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lk)return 11;if(e===uk)return 14}return 2}function _o(e,t){var n=e.alternate;return n===null?(n=kr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vp(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")Uk(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Kl:return $a(n.children,i,s,t);case ak:o=8,i|=8;break;case qb:return e=kr(12,n,t,i|2),e.elementType=qb,e.lanes=s,e;case Kb:return e=kr(13,n,t,i),e.elementType=Kb,e.lanes=s,e;case Gb:return e=kr(19,n,t,i),e.elementType=Gb,e.lanes=s,e;case JN:return g0(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case KN:o=10;break e;case GN:o=9;break e;case lk:o=11;break e;case uk:o=14;break e;case Bs:o=16,r=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=kr(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function $a(e,t,n,r){return e=kr(7,e,r,t),e.lanes=n,e}function g0(e,t,n,r){return e=kr(22,e,r,t),e.elementType=JN,e.lanes=n,e.stateNode={isHidden:!1},e}function Xy(e,t,n){return e=kr(6,e,null,t),e.lanes=n,e}function Zy(e,t,n){return t=kr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wB(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=My(0),this.expirationTimes=My(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=My(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hk(e,t,n,r,i,s,o,a,l){return e=new wB(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=kr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_k(s),e}function kB(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ql,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function zM(e){if(!e)return jo;e=e._reactInternals;e:{if(pl(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var n=e.type;if(zn(n))return zD(e,n,t)}return t}function BM(e,t,n,r,i,s,o,a,l){return e=Hk(n,r,!0,e,i,s,o,a,l),e.context=zM(null),n=e.current,r=Tn(),i=To(n),s=ls(r,i),s.callback=t??null,So(n,s,i),e.current.lanes=i,Qf(e,i,r),Bn(e,r),e}function y0(e,t,n,r){var i=t.current,s=Tn(),o=To(i);return n=zM(n),t.context===null?t.context=n:t.pendingContext=n,t=ls(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=So(i,t,o),e!==null&&(ei(e,i,o,s),jp(e,i,o)),o}function Im(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ZE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wk(e,t){ZE(e,t),(e=e.alternate)&&ZE(e,t)}function CB(){return null}var VM=typeof reportError=="function"?reportError:function(e){console.error(e)};function qk(e){this._internalRoot=e}b0.prototype.render=qk.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));y0(e,t,null,null)};b0.prototype.unmount=qk.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qa(function(){y0(null,e,null,null)}),t[hs]=null}};function b0(e){this._internalRoot=e}b0.prototype.unstable_scheduleHydration=function(e){if(e){var t=vD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Gs.length&&t!==0&&t<Gs[n].priority;n++);Gs.splice(n,0,e),n===0&&wD(e)}};function Kk(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function v0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eT(){}function SB(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Im(o);s.call(u)}}var o=BM(t,r,e,0,null,!1,!1,"",eT);return e._reactRootContainer=o,e[hs]=o.current,Jd(e.nodeType===8?e.parentNode:e),Qa(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Im(l);a.call(u)}}var l=Hk(e,0,!1,null,null,!1,!1,"",eT);return e._reactRootContainer=l,e[hs]=l.current,Jd(e.nodeType===8?e.parentNode:e),Qa(function(){y0(t,l,n,r)}),l}function x0(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Im(o);a.call(l)}}y0(t,o,e,i)}else o=SB(n,t,e,i,r);return Im(o)}yD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Zc(t.pendingLanes);n!==0&&(fk(t,n|1),Bn(t,St()),!(je&6)&&(Wu=St()+500,Ko()))}break;case 13:Qa(function(){var r=ps(e,1);if(r!==null){var i=Tn();ei(r,e,1,i)}}),Wk(e,1)}};hk=function(e){if(e.tag===13){var t=ps(e,134217728);if(t!==null){var n=Tn();ei(t,e,134217728,n)}Wk(e,134217728)}};bD=function(e){if(e.tag===13){var t=To(e),n=ps(e,t);if(n!==null){var r=Tn();ei(n,e,t,r)}Wk(e,t)}};vD=function(){return He};xD=function(e,t){var n=He;try{return He=e,t()}finally{He=n}};iv=function(e,t,n){switch(t){case"input":if(Yb(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=c0(r);if(!i)throw Error(G(90));YN(r),Yb(r,i)}}}break;case"textarea":ZN(e,n);break;case"select":t=n.value,t!=null&&du(e,!!n.multiple,t,!1)}};oD=zk;aD=Qa;var EB={usingClientEntryPoint:!1,Events:[Xf,Yl,c0,iD,sD,zk]},Ic={findFiberByHostInstance:ga,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TB={bundleType:Ic.bundleType,version:Ic.version,rendererPackageName:Ic.rendererPackageName,rendererConfig:Ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cD(e),e===null?null:e.stateNode},findFiberByHostInstance:Ic.findFiberByHostInstance||CB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{o0=$h.inject(TB),Ti=$h}catch{}}lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EB;lr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kk(t))throw Error(G(200));return kB(e,t,null,n)};lr.createRoot=function(e,t){if(!Kk(e))throw Error(G(299));var n=!1,r="",i=VM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Hk(e,1,!1,null,null,n,!1,r,i),e[hs]=t.current,Jd(e.nodeType===8?e.parentNode:e),new qk(t)};lr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=cD(t),e=e===null?null:e.stateNode,e};lr.flushSync=function(e){return Qa(e)};lr.hydrate=function(e,t,n){if(!v0(t))throw Error(G(200));return x0(null,e,t,!0,n)};lr.hydrateRoot=function(e,t,n){if(!Kk(e))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=VM;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=BM(t,null,e,1,n??null,i,!1,s,o),e[hs]=t.current,Jd(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new b0(t)};lr.render=function(e,t,n){if(!v0(t))throw Error(G(200));return x0(null,e,t,!1,n)};lr.unmountComponentAtNode=function(e){if(!v0(e))throw Error(G(40));return e._reactRootContainer?(Qa(function(){x0(null,null,e,!1,function(){e._reactRootContainer=null,e[hs]=null})}),!0):!1};lr.unstable_batchedUpdates=zk;lr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!v0(n))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return x0(e,t,n,!1,r)};lr.version="18.3.1-next-f1338f8080-20240426";function UM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UM)}catch(e){console.error(e)}}UM(),UN.exports=lr;var dc=UN.exports;const Gk=Gf(dc);var HM,tT=dc;HM=tT.createRoot,tT.hydrateRoot;const _B=1,AB=1e6;let e1=0;function PB(){return e1=(e1+1)%Number.MAX_SAFE_INTEGER,e1.toString()}const t1=new Map,nT=e=>{if(t1.has(e))return;const t=setTimeout(()=>{t1.delete(e),xd({type:"REMOVE_TOAST",toastId:e})},AB);t1.set(e,t)},RB=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,_B)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?nT(n):e.toasts.forEach(r=>{nT(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Up=[];let Hp={toasts:[]};function xd(e){Hp=RB(Hp,e),Up.forEach(t=>{t(Hp)})}function NB({...e}){const t=PB(),n=i=>xd({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>xd({type:"DISMISS_TOAST",toastId:t});return xd({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:n}}function DB(){const[e,t]=w.useState(Hp);return w.useEffect(()=>(Up.push(t),()=>{const n=Up.indexOf(t);n>-1&&Up.splice(n,1)}),[e]),{...e,toast:NB,dismiss:n=>xd({type:"DISMISS_TOAST",toastId:n})}}function Se(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function rT(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ya(...e){return t=>{let n=!1;const r=e.map(i=>{const s=rT(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():rT(e[i],null)}}}}function Tt(...e){return w.useCallback(Ya(...e),e)}function MB(e,t){const n=w.createContext(t),r=s=>{const{children:o,...a}=s,l=w.useMemo(()=>a,Object.values(a));return y.jsx(n.Provider,{value:l,children:o})};r.displayName=e+"Provider";function i(s){const o=w.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,i]}function xs(e,t=[]){let n=[];function r(s,o){const a=w.createContext(o),l=n.length;n=[...n,o];const u=d=>{var b;const{scope:f,children:h,...p}=d,m=((b=f==null?void 0:f[e])==null?void 0:b[l])||a,g=w.useMemo(()=>p,Object.values(p));return y.jsx(m.Provider,{value:g,children:h})};u.displayName=s+"Provider";function c(d,f){var m;const h=((m=f==null?void 0:f[e])==null?void 0:m[l])||a,p=w.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,c]}const i=()=>{const s=n.map(o=>w.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return w.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,OB(i,...t)]}function OB(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function sf(e){const t=IB(e),n=w.forwardRef((r,i)=>{const{children:s,...o}=r,a=w.Children.toArray(s),l=a.find(LB);if(l){const u=l.props.children,c=a.map(d=>d===l?w.Children.count(u)>1?w.Children.only(null):w.isValidElement(u)?u.props.children:null:d);return y.jsx(t,{...o,ref:i,children:w.isValidElement(u)?w.cloneElement(u,void 0,c):null})}return y.jsx(t,{...o,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}function IB(e){const t=w.forwardRef((n,r)=>{const{children:i,...s}=n;if(w.isValidElement(i)){const o=$B(i),a=FB(s,i.props);return i.type!==w.Fragment&&(a.ref=r?Ya(r,o):o),w.cloneElement(i,a)}return w.Children.count(i)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var WM=Symbol("radix.slottable");function jB(e){const t=({children:n})=>y.jsx(y.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=WM,t}function LB(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===WM}function FB(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function $B(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function zB(e){const t=e+"CollectionProvider",[n,r]=xs(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:g,children:b}=m,v=Y.useRef(null),x=Y.useRef(new Map).current;return y.jsx(i,{scope:g,itemMap:x,collectionRef:v,children:b})};o.displayName=t;const a=e+"CollectionSlot",l=sf(a),u=Y.forwardRef((m,g)=>{const{scope:b,children:v}=m,x=s(a,b),k=Tt(g,x.collectionRef);return y.jsx(l,{ref:k,children:v})});u.displayName=a;const c=e+"CollectionItemSlot",d="data-radix-collection-item",f=sf(c),h=Y.forwardRef((m,g)=>{const{scope:b,children:v,...x}=m,k=Y.useRef(null),S=Tt(g,k),C=s(c,b);return Y.useEffect(()=>(C.itemMap.set(k,{ref:k,...x}),()=>void C.itemMap.delete(k))),y.jsx(f,{[d]:"",ref:S,children:v})});h.displayName=c;function p(m){const g=s(e+"CollectionConsumer",m);return Y.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const x=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((C,E)=>x.indexOf(C.ref.current)-x.indexOf(E.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:u,ItemSlot:h},p,r]}var BB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],De=BB.reduce((e,t)=>{const n=sf(`Primitive.${t}`),r=w.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function qM(e,t){e&&dc.flushSync(()=>e.dispatchEvent(t))}function Ri(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function VB(e,t=globalThis==null?void 0:globalThis.document){const n=Ri(e);w.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var UB="DismissableLayer",Lv="dismissableLayer.update",HB="dismissableLayer.pointerDownOutside",WB="dismissableLayer.focusOutside",iT,KM=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fc=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,u=w.useContext(KM),[c,d]=w.useState(null),f=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=w.useState({}),p=Tt(t,E=>d(E)),m=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=m.indexOf(g),v=c?m.indexOf(c):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,k=v>=b,S=KB(E=>{const P=E.target,R=[...u.branches].some(A=>A.contains(P));!k||R||(i==null||i(E),o==null||o(E),E.defaultPrevented||a==null||a())},f),C=GB(E=>{const P=E.target;[...u.branches].some(A=>A.contains(P))||(s==null||s(E),o==null||o(E),E.defaultPrevented||a==null||a())},f);return VB(E=>{v===u.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},f),w.useEffect(()=>{if(c)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(iT=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),sT(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=iT)}},[c,f,n,u]),w.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),sT())},[c,u]),w.useEffect(()=>{const E=()=>h({});return document.addEventListener(Lv,E),()=>document.removeEventListener(Lv,E)},[]),y.jsx(De.div,{...l,ref:p,style:{pointerEvents:x?k?"auto":"none":void 0,...e.style},onFocusCapture:Se(e.onFocusCapture,C.onFocusCapture),onBlurCapture:Se(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Se(e.onPointerDownCapture,S.onPointerDownCapture)})});fc.displayName=UB;var qB="DismissableLayerBranch",GM=w.forwardRef((e,t)=>{const n=w.useContext(KM),r=w.useRef(null),i=Tt(t,r);return w.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),y.jsx(De.div,{...e,ref:i})});GM.displayName=qB;function KB(e,t=globalThis==null?void 0:globalThis.document){const n=Ri(e),r=w.useRef(!1),i=w.useRef(()=>{});return w.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){JM(HB,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function GB(e,t=globalThis==null?void 0:globalThis.document){const n=Ri(e),r=w.useRef(!1);return w.useEffect(()=>{const i=s=>{s.target&&!r.current&&JM(WB,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function sT(){const e=new CustomEvent(Lv);document.dispatchEvent(e)}function JM(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?qM(i,s):i.dispatchEvent(s)}var JB=fc,QB=GM,Ni=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},YB="Portal",w0=w.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[i,s]=w.useState(!1);Ni(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Gk.createPortal(y.jsx(De.div,{...r,ref:t}),o):null});w0.displayName=YB;function XB(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var oi=e=>{const{present:t,children:n}=e,r=ZB(t),i=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),s=Tt(r.ref,e7(i));return typeof n=="function"||r.isPresent?w.cloneElement(i,{ref:s}):null};oi.displayName="Presence";function ZB(e){const[t,n]=w.useState(),r=w.useRef(null),i=w.useRef(e),s=w.useRef("none"),o=e?"mounted":"unmounted",[a,l]=XB(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const u=zh(r.current);s.current=a==="mounted"?u:"none"},[a]),Ni(()=>{const u=r.current,c=i.current;if(c!==e){const f=s.current,h=zh(u);e?l("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),Ni(()=>{if(t){let u;const c=t.ownerDocument.defaultView??window,d=h=>{const m=zh(r.current).includes(h.animationName);if(h.target===t&&m&&(l("ANIMATION_END"),!i.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",u=c.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},f=h=>{h.target===t&&(s.current=zh(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{c.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:w.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function zh(e){return(e==null?void 0:e.animationName)||"none"}function e7(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var t7=rk[" useInsertionEffect ".trim().toString()]||Ni;function ml({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,s,o]=n7({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:i;{const c=w.useRef(e!==void 0);w.useEffect(()=>{const d=c.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),c.current=a},[a,r])}const u=w.useCallback(c=>{var d;if(a){const f=r7(c)?c(e):c;f!==e&&((d=o.current)==null||d.call(o,f))}else s(c)},[a,e,s,o]);return[l,u]}function n7({defaultProp:e,onChange:t}){const[n,r]=w.useState(e),i=w.useRef(n),s=w.useRef(t);return t7(()=>{s.current=t},[t]),w.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function r7(e){return typeof e=="function"}var i7=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),s7="VisuallyHidden",k0=w.forwardRef((e,t)=>y.jsx(De.span,{...e,ref:t,style:{...i7,...e.style}}));k0.displayName=s7;var o7=k0,Jk="ToastProvider",[Qk,a7,l7]=zB("Toast"),[QM,Pwe]=xs("Toast",[l7]),[u7,C0]=QM(Jk),YM=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=e,[a,l]=w.useState(null),[u,c]=w.useState(0),d=w.useRef(!1),f=w.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Jk}\`. Expected non-empty \`string\`.`),y.jsx(Qk.Provider,{scope:t,children:y.jsx(u7,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:w.useCallback(()=>c(h=>h+1),[]),onToastRemove:w.useCallback(()=>c(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};YM.displayName=Jk;var XM="ToastViewport",c7=["F8"],Fv="toast.viewportPause",$v="toast.viewportResume",ZM=w.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=c7,label:i="Notifications ({hotkey})",...s}=e,o=C0(XM,n),a=a7(n),l=w.useRef(null),u=w.useRef(null),c=w.useRef(null),d=w.useRef(null),f=Tt(t,d,o.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;w.useEffect(()=>{const g=b=>{var x;r.length!==0&&r.every(k=>b[k]||b.code===k)&&((x=d.current)==null||x.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[r]),w.useEffect(()=>{const g=l.current,b=d.current;if(p&&g&&b){const v=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(Fv);b.dispatchEvent(C),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent($v);b.dispatchEvent(C),o.isClosePausedRef.current=!1}},k=C=>{!g.contains(C.relatedTarget)&&x()},S=()=>{g.contains(document.activeElement)||x()};return g.addEventListener("focusin",v),g.addEventListener("focusout",k),g.addEventListener("pointermove",v),g.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",x),()=>{g.removeEventListener("focusin",v),g.removeEventListener("focusout",k),g.removeEventListener("pointermove",v),g.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",x)}}},[p,o.isClosePausedRef]);const m=w.useCallback(({tabbingDirection:g})=>{const v=a().map(x=>{const k=x.ref.current,S=[k,...C7(k)];return g==="forwards"?S:S.reverse()});return(g==="forwards"?v.reverse():v).flat()},[a]);return w.useEffect(()=>{const g=d.current;if(g){const b=v=>{var S,C,E;const x=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!x){const P=document.activeElement,R=v.shiftKey;if(v.target===g&&R){(S=u.current)==null||S.focus();return}const I=m({tabbingDirection:R?"backwards":"forwards"}),U=I.findIndex(F=>F===P);n1(I.slice(U+1))?v.preventDefault():R?(C=u.current)==null||C.focus():(E=c.current)==null||E.focus()}};return g.addEventListener("keydown",b),()=>g.removeEventListener("keydown",b)}},[a,m]),y.jsxs(QB,{ref:l,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&y.jsx(zv,{ref:u,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"forwards"});n1(g)}}),y.jsx(Qk.Slot,{scope:n,children:y.jsx(De.ol,{tabIndex:-1,...s,ref:f})}),p&&y.jsx(zv,{ref:c,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"backwards"});n1(g)}})]})});ZM.displayName=XM;var eO="ToastFocusProxy",zv=w.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,s=C0(eO,n);return y.jsx(k0,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&r()}})});zv.displayName=eO;var eh="Toast",d7="toast.swipeStart",f7="toast.swipeMove",h7="toast.swipeCancel",p7="toast.swipeEnd",tO=w.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=e,[a,l]=ml({prop:r,defaultProp:i??!0,onChange:s,caller:eh});return y.jsx(oi,{present:n||a,children:y.jsx(y7,{open:a,...o,ref:t,onClose:()=>l(!1),onPause:Ri(e.onPause),onResume:Ri(e.onResume),onSwipeStart:Se(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Se(e.onSwipeMove,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Se(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Se(e.onSwipeEnd,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});tO.displayName=eh;var[m7,g7]=QM(eh,{onClose(){}}),y7=w.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...p}=e,m=C0(eh,n),[g,b]=w.useState(null),v=Tt(t,F=>b(F)),x=w.useRef(null),k=w.useRef(null),S=i||m.duration,C=w.useRef(0),E=w.useRef(S),P=w.useRef(0),{onToastAdd:R,onToastRemove:A}=m,L=Ri(()=>{var B;(g==null?void 0:g.contains(document.activeElement))&&((B=m.viewport)==null||B.focus()),o()}),I=w.useCallback(F=>{!F||F===1/0||(window.clearTimeout(P.current),C.current=new Date().getTime(),P.current=window.setTimeout(L,F))},[L]);w.useEffect(()=>{const F=m.viewport;if(F){const B=()=>{I(E.current),u==null||u()},q=()=>{const H=new Date().getTime()-C.current;E.current=E.current-H,window.clearTimeout(P.current),l==null||l()};return F.addEventListener(Fv,q),F.addEventListener($v,B),()=>{F.removeEventListener(Fv,q),F.removeEventListener($v,B)}}},[m.viewport,S,l,u,I]),w.useEffect(()=>{s&&!m.isClosePausedRef.current&&I(S)},[s,S,m.isClosePausedRef,I]),w.useEffect(()=>(R(),()=>A()),[R,A]);const U=w.useMemo(()=>g?lO(g):null,[g]);return m.viewport?y.jsxs(y.Fragment,{children:[U&&y.jsx(b7,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:U}),y.jsx(m7,{scope:n,onClose:L,children:dc.createPortal(y.jsx(Qk.ItemSlot,{scope:n,children:y.jsx(JB,{asChild:!0,onEscapeKeyDown:Se(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||L(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(De.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Se(e.onKeyDown,F=>{F.key==="Escape"&&(a==null||a(F.nativeEvent),F.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:Se(e.onPointerDown,F=>{F.button===0&&(x.current={x:F.clientX,y:F.clientY})}),onPointerMove:Se(e.onPointerMove,F=>{if(!x.current)return;const B=F.clientX-x.current.x,q=F.clientY-x.current.y,H=!!k.current,M=["left","right"].includes(m.swipeDirection),D=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,T=M?D(0,B):0,J=M?0:D(0,q),O=F.pointerType==="touch"?10:2,_={x:T,y:J},W={originalEvent:F,delta:_};H?(k.current=_,Bh(f7,d,W,{discrete:!1})):oT(_,m.swipeDirection,O)?(k.current=_,Bh(d7,c,W,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(B)>O||Math.abs(q)>O)&&(x.current=null)}),onPointerUp:Se(e.onPointerUp,F=>{const B=k.current,q=F.target;if(q.hasPointerCapture(F.pointerId)&&q.releasePointerCapture(F.pointerId),k.current=null,x.current=null,B){const H=F.currentTarget,M={originalEvent:F,delta:B};oT(B,m.swipeDirection,m.swipeThreshold)?Bh(p7,h,M,{discrete:!0}):Bh(h7,f,M,{discrete:!0}),H.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),b7=e=>{const{__scopeToast:t,children:n,...r}=e,i=C0(eh,t),[s,o]=w.useState(!1),[a,l]=w.useState(!1);return w7(()=>o(!0)),w.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:y.jsx(w0,{asChild:!0,children:y.jsx(k0,{...r,children:s&&y.jsxs(y.Fragment,{children:[i.label," ",n]})})})},v7="ToastTitle",nO=w.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return y.jsx(De.div,{...r,ref:t})});nO.displayName=v7;var x7="ToastDescription",rO=w.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return y.jsx(De.div,{...r,ref:t})});rO.displayName=x7;var iO="ToastAction",sO=w.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?y.jsx(aO,{altText:n,asChild:!0,children:y.jsx(Yk,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${iO}\`. Expected non-empty \`string\`.`),null)});sO.displayName=iO;var oO="ToastClose",Yk=w.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=g7(oO,n);return y.jsx(aO,{asChild:!0,children:y.jsx(De.button,{type:"button",...r,ref:t,onClick:Se(e.onClick,i.onClose)})})});Yk.displayName=oO;var aO=w.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return y.jsx(De.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function lO(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),k7(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...lO(r))}}),t}function Bh(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?qM(i,s):i.dispatchEvent(s)}var oT=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),s=r>i;return t==="left"||t==="right"?s&&r>n:!s&&i>n};function w7(e=()=>{}){const t=Ri(e);Ni(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function k7(e){return e.nodeType===e.ELEMENT_NODE}function C7(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function n1(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var S7=YM,uO=ZM,cO=tO,dO=nO,fO=rO,hO=sO,pO=Yk;function mO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=mO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function gO(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=mO(e))&&(r&&(r+=" "),r+=t);return r}const aT=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,lT=gO,E7=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return lT(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=t,o=Object.keys(i).map(u=>{const c=n==null?void 0:n[u],d=s==null?void 0:s[u];if(c===null)return null;const f=aT(c)||aT(d);return i[u][f]}),a=n&&Object.entries(n).reduce((u,c)=>{let[d,f]=c;return f===void 0||(u[d]=f),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,c)=>{let{class:d,className:f,...h}=c;return Object.entries(h).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...s,...a}[m]):{...s,...a}[m]===g})?[...u,d,f]:u},[]);return lT(e,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yO=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>w.createElement("svg",{ref:l,..._7,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:yO("lucide",i),...a},[...o.map(([u,c])=>w.createElement(u,c)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=(e,t)=>{const n=w.forwardRef(({className:r,...i},s)=>w.createElement(A7,{ref:s,iconNode:t,className:yO(`lucide-${T7(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=Ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=Ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=Ae("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=Ae("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=Ae("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=Ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=Ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=Ae("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Ae("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=Ae("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Ae("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=Ae("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=Ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=Ae("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=Ae("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=Ae("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=Ae("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=Ae("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=Ae("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=Ae("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=Ae("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=Ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=Ae("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=Ae("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=Ae("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=Ae("PanelRightClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=Ae("PanelRightOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=Ae("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=Ae("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=Ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=Ae("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=Ae("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=Ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=Ae("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=Ae("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=Ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=Ae("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=Ae("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=Ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=Ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),nC="-",G7=e=>{const t=Q7(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const a=o.split(nC);return a[0]===""&&a.length!==1&&a.shift(),wO(a,t)||J7(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},wO=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?wO(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(nC);return(o=t.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},dT=/^\[(.+)\]$/,J7=e=>{if(dT.test(e)){const t=dT.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Q7=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return X7(Object.entries(e.classGroups),n).forEach(([s,o])=>{Vv(o,r,s,t)}),r},Vv=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:fT(t,i);s.classGroupId=n;return}if(typeof i=="function"){if(Y7(i)){Vv(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Vv(o,fT(t,s),n,r)})})},fT=(e,t)=>{let n=e;return t.split(nC).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Y7=e=>e.isThemeGetter,X7=(e,t)=>t?e.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[t+o,a])):s);return[n,i]}):e,Z7=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},kO="!",eV=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],s=t.length,o=a=>{const l=[];let u=0,c=0,d;for(let g=0;g<a.length;g++){let b=a[g];if(u===0){if(b===i&&(r||a.slice(g,g+s)===t)){l.push(a.slice(c,g)),c=g+s;continue}if(b==="/"){d=g;continue}}b==="["?u++:b==="]"&&u--}const f=l.length===0?a:a.substring(c),h=f.startsWith(kO),p=h?f.substring(1):f,m=d&&d>c?d-c:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:o}):o},tV=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},nV=e=>({cache:Z7(e.cacheSize),parseClassName:eV(e),...G7(e)}),rV=/\s+/,iV=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,s=[],o=e.trim().split(rV);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:c,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:h}=n(u);let p=!!h,m=r(p?f.substring(0,h):f);if(!m){if(!p){a=u+(a.length>0?" "+a:a);continue}if(m=r(f),!m){a=u+(a.length>0?" "+a:a);continue}p=!1}const g=tV(c).join(":"),b=d?g+kO:g,v=b+m;if(s.includes(v))continue;s.push(v);const x=i(m,p);for(let k=0;k<x.length;++k){const S=x[k];s.push(b+S)}a=u+(a.length>0?" "+a:a)}return a};function sV(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=CO(t))&&(r&&(r+=" "),r+=n);return r}const CO=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=CO(e[r]))&&(n&&(n+=" "),n+=t);return n};function oV(e,...t){let n,r,i,s=o;function o(l){const u=t.reduce((c,d)=>d(c),e());return n=nV(u),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const u=r(l);if(u)return u;const c=iV(l,n);return i(l,c),c}return function(){return s(sV.apply(null,arguments))}}const nt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},SO=/^\[(?:([a-z-]+):)?(.+)\]$/i,aV=/^\d+\/\d+$/,lV=new Set(["px","full","screen"]),uV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,fV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ui=e=>yu(e)||lV.has(e)||aV.test(e),Ns=e=>hc(e,"length",wV),yu=e=>!!e&&!Number.isNaN(Number(e)),r1=e=>hc(e,"number",yu),Lc=e=>!!e&&Number.isInteger(Number(e)),pV=e=>e.endsWith("%")&&yu(e.slice(0,-1)),ke=e=>SO.test(e),Ds=e=>uV.test(e),mV=new Set(["length","size","percentage"]),gV=e=>hc(e,mV,EO),yV=e=>hc(e,"position",EO),bV=new Set(["image","url"]),vV=e=>hc(e,bV,CV),xV=e=>hc(e,"",kV),Fc=()=>!0,hc=(e,t,n)=>{const r=SO.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},wV=e=>cV.test(e)&&!dV.test(e),EO=()=>!1,kV=e=>fV.test(e),CV=e=>hV.test(e),SV=()=>{const e=nt("colors"),t=nt("spacing"),n=nt("blur"),r=nt("brightness"),i=nt("borderColor"),s=nt("borderRadius"),o=nt("borderSpacing"),a=nt("borderWidth"),l=nt("contrast"),u=nt("grayscale"),c=nt("hueRotate"),d=nt("invert"),f=nt("gap"),h=nt("gradientColorStops"),p=nt("gradientColorStopPositions"),m=nt("inset"),g=nt("margin"),b=nt("opacity"),v=nt("padding"),x=nt("saturate"),k=nt("scale"),S=nt("sepia"),C=nt("skew"),E=nt("space"),P=nt("translate"),R=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",ke,t],I=()=>[ke,t],U=()=>["",Ui,Ns],F=()=>["auto",yu,ke],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",ke],T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[yu,ke];return{cacheSize:500,separator:":",theme:{colors:[Fc],spacing:[Ui,Ns],blur:["none","",Ds,ke],brightness:J(),borderColor:[e],borderRadius:["none","","full",Ds,ke],borderSpacing:I(),borderWidth:U(),contrast:J(),grayscale:D(),hueRotate:J(),invert:D(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[pV,Ns],inset:L(),margin:L(),opacity:J(),padding:I(),saturate:J(),scale:J(),sepia:D(),skew:J(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",ke]}],container:["container"],columns:[{columns:[Ds]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),ke]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Lc,ke]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ke]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Lc,ke]}],"grid-cols":[{"grid-cols":[Fc]}],"col-start-end":[{col:["auto",{span:["full",Lc,ke]},ke]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Fc]}],"row-start-end":[{row:["auto",{span:[Lc,ke]},ke]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ke]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ke,t]}],"min-w":[{"min-w":[ke,t,"min","max","fit"]}],"max-w":[{"max-w":[ke,t,"none","full","min","max","fit","prose",{screen:[Ds]},Ds]}],h:[{h:[ke,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ke,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ke,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ke,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ds,Ns]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",r1]}],"font-family":[{font:[Fc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ke]}],"line-clamp":[{"line-clamp":["none",yu,r1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ui,ke]}],"list-image":[{"list-image":["none",ke]}],"list-style-type":[{list:["none","disc","decimal",ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ui,Ns]}],"underline-offset":[{"underline-offset":["auto",Ui,ke]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),yV]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vV]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[Ui,ke]}],"outline-w":[{outline:[Ui,Ns]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Ui,Ns]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ds,xV]}],"shadow-color":[{shadow:[Fc]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ds,ke]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[x]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ke]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",ke]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Lc,ke]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ke]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ui,Ns,r1]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},EV=oV(SV);function Ct(...e){return EV(gO(e))}const TV=S7,TO=w.forwardRef(({className:e,...t},n)=>y.jsx(uO,{ref:n,className:Ct("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));TO.displayName=uO.displayName;const _V=E7("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_O=w.forwardRef(({className:e,variant:t,...n},r)=>y.jsx(cO,{ref:r,className:Ct(_V({variant:t}),e),...n}));_O.displayName=cO.displayName;const AV=w.forwardRef(({className:e,...t},n)=>y.jsx(hO,{ref:n,className:Ct("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));AV.displayName=hO.displayName;const AO=w.forwardRef(({className:e,...t},n)=>y.jsx(pO,{ref:n,className:Ct("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:y.jsx(Xa,{className:"h-4 w-4"})}));AO.displayName=pO.displayName;const PO=w.forwardRef(({className:e,...t},n)=>y.jsx(dO,{ref:n,className:Ct("text-sm font-semibold",e),...t}));PO.displayName=dO.displayName;const RO=w.forwardRef(({className:e,...t},n)=>y.jsx(fO,{ref:n,className:Ct("text-sm opacity-90",e),...t}));RO.displayName=fO.displayName;function PV(){const{toasts:e}=DB();return y.jsxs(TV,{children:[e.map(function({id:t,title:n,description:r,action:i,...s}){return y.jsxs(_O,{...s,children:[y.jsxs("div",{className:"grid gap-1",children:[n&&y.jsx(PO,{children:n}),r&&y.jsx(RO,{children:r})]}),i,y.jsx(AO,{})]},t)}),y.jsx(TO,{})]})}var hT=["light","dark"],RV="(prefers-color-scheme: dark)",NV=w.createContext(void 0),DV={setTheme:e=>{},themes:[]},MV=()=>{var e;return(e=w.useContext(NV))!=null?e:DV};w.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let u=s==="system",c=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(p=>`'${p}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=i?hT.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(p,m=!1,g=!0)=>{let b=o?o[p]:p,v=m?p+"|| ''":`'${b}'`,x="";return i&&g&&!m&&hT.includes(p)&&(x+=`d.style.colorScheme = '${p}';`),n==="class"?m||b?x+=`c.add(${v})`:x+="null":b&&(x+=`d[s](n,${v})`),x},h=e?`!function(){${c}${f(e)}}()`:r?`!function(){try{${c}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${RV}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${c}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${d}}catch(t){}}();`;return w.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:h}})});var OV=e=>{switch(e){case"success":return LV;case"info":return $V;case"warning":return FV;case"error":return zV;default:return null}},IV=Array(12).fill(0),jV=({visible:e,className:t})=>Y.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Y.createElement("div",{className:"sonner-spinner"},IV.map((n,r)=>Y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),LV=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),FV=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),$V=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zV=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),BV=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),VV=()=>{let[e,t]=Y.useState(document.hidden);return Y.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Uv=1,UV=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Uv++,s=this.toasts.find(a=>a.id===i),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...e,id:i,title:n}),{...a,...e,id:i,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),i=n!==void 0,s,o=r.then(async l=>{if(s=["resolve",l],Y.isValidElement(l))i=!1,this.create({id:n,type:"default",message:l});else if(WV(l)&&!l.ok){i=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${l.status}`):t.error,c=typeof t.description=="function"?await t.description(`HTTP error! status: ${l.status}`):t.description;this.create({id:n,type:"error",message:u,description:c})}else if(t.success!==void 0){i=!1;let u=typeof t.success=="function"?await t.success(l):t.success,c=typeof t.description=="function"?await t.description(l):t.description;this.create({id:n,type:"success",message:u,description:c})}}).catch(async l=>{if(s=["reject",l],t.error!==void 0){i=!1;let u=typeof t.error=="function"?await t.error(l):t.error,c=typeof t.description=="function"?await t.description(l):t.description;this.create({id:n,type:"error",message:u,description:c})}}).finally(()=>{var l;i&&(this.dismiss(n),n=void 0),(l=t.finally)==null||l.call(t)}),a=()=>new Promise((l,u)=>o.then(()=>s[0]==="reject"?u(s[1]):l(s[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Uv++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},In=new UV,HV=(e,t)=>{let n=(t==null?void 0:t.id)||Uv++;return In.addToast({title:e,...t,id:n}),n},WV=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",qV=HV,KV=()=>In.toasts,GV=()=>In.getActiveToasts(),wa=Object.assign(qV,{success:In.success,info:In.info,warning:In.warning,error:In.error,custom:In.custom,message:In.message,promise:In.promise,dismiss:In.dismiss,loading:In.loading},{getHistory:KV,getToasts:GV});function JV(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}JV(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Uh(e){return e.label!==void 0}var QV=3,YV="32px",XV="16px",pT=4e3,ZV=356,eU=14,tU=20,nU=200;function $r(...e){return e.filter(Boolean).join(" ")}function rU(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var iU=e=>{var t,n,r,i,s,o,a,l,u,c,d;let{invert:f,toast:h,unstyled:p,interacting:m,setHeights:g,visibleToasts:b,heights:v,index:x,toasts:k,expanded:S,removeToast:C,defaultRichColors:E,closeButton:P,style:R,cancelButtonStyle:A,actionButtonStyle:L,className:I="",descriptionClassName:U="",duration:F,position:B,gap:q,loadingIcon:H,expandByDefault:M,classNames:D,icons:T,closeButtonAriaLabel:J="Close toast",pauseWhenPageIsHidden:O}=e,[_,W]=Y.useState(null),[X,ne]=Y.useState(null),[$,ie]=Y.useState(!1),[be,Me]=Y.useState(!1),[gt,on]=Y.useState(!1),[_t,j]=Y.useState(!1),[ee,ae]=Y.useState(!1),[xe,Ee]=Y.useState(0),[Le,dr]=Y.useState(0),Mr=Y.useRef(h.duration||F||pT),wl=Y.useRef(null),Vi=Y.useRef(null),Sy=x===0,Ey=x+1<=b,z=h.type,Z=h.dismissible!==!1,ve=h.className||"",Pe=h.descriptionClassName||"",Fe=Y.useMemo(()=>v.findIndex(we=>we.toastId===h.id)||0,[v,h.id]),Kn=Y.useMemo(()=>{var we;return(we=h.closeButton)!=null?we:P},[h.closeButton,P]),ci=Y.useMemo(()=>h.duration||F||pT,[h.duration,F]),Gn=Y.useRef(0),fr=Y.useRef(0),Es=Y.useRef(0),At=Y.useRef(null),[Ts,Or]=B.split("-"),H2=Y.useMemo(()=>v.reduce((we,We,at)=>at>=Fe?we:we+We.height,0),[v,Fe]),W2=VV(),Z$=h.invert||f,Ty=z==="loading";fr.current=Y.useMemo(()=>Fe*q+H2,[Fe,H2]),Y.useEffect(()=>{Mr.current=ci},[ci]),Y.useEffect(()=>{ie(!0)},[]),Y.useEffect(()=>{let we=Vi.current;if(we){let We=we.getBoundingClientRect().height;return dr(We),g(at=>[{toastId:h.id,height:We,position:h.position},...at]),()=>g(at=>at.filter(Ir=>Ir.toastId!==h.id))}},[g,h.id]),Y.useLayoutEffect(()=>{if(!$)return;let we=Vi.current,We=we.style.height;we.style.height="auto";let at=we.getBoundingClientRect().height;we.style.height=We,dr(at),g(Ir=>Ir.find(jr=>jr.toastId===h.id)?Ir.map(jr=>jr.toastId===h.id?{...jr,height:at}:jr):[{toastId:h.id,height:at,position:h.position},...Ir])},[$,h.title,h.description,g,h.id]);let _s=Y.useCallback(()=>{Me(!0),Ee(fr.current),g(we=>we.filter(We=>We.toastId!==h.id)),setTimeout(()=>{C(h)},nU)},[h,C,g,fr]);Y.useEffect(()=>{if(h.promise&&z==="loading"||h.duration===1/0||h.type==="loading")return;let we;return S||m||O&&W2?(()=>{if(Es.current<Gn.current){let We=new Date().getTime()-Gn.current;Mr.current=Mr.current-We}Es.current=new Date().getTime()})():Mr.current!==1/0&&(Gn.current=new Date().getTime(),we=setTimeout(()=>{var We;(We=h.onAutoClose)==null||We.call(h,h),_s()},Mr.current)),()=>clearTimeout(we)},[S,m,h,z,O,W2,_s]),Y.useEffect(()=>{h.delete&&_s()},[_s,h.delete]);function e9(){var we,We,at;return T!=null&&T.loading?Y.createElement("div",{className:$r(D==null?void 0:D.loader,(we=h==null?void 0:h.classNames)==null?void 0:we.loader,"sonner-loader"),"data-visible":z==="loading"},T.loading):H?Y.createElement("div",{className:$r(D==null?void 0:D.loader,(We=h==null?void 0:h.classNames)==null?void 0:We.loader,"sonner-loader"),"data-visible":z==="loading"},H):Y.createElement(jV,{className:$r(D==null?void 0:D.loader,(at=h==null?void 0:h.classNames)==null?void 0:at.loader),visible:z==="loading"})}return Y.createElement("li",{tabIndex:0,ref:Vi,className:$r(I,ve,D==null?void 0:D.toast,(t=h==null?void 0:h.classNames)==null?void 0:t.toast,D==null?void 0:D.default,D==null?void 0:D[z],(n=h==null?void 0:h.classNames)==null?void 0:n[z]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:E,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":$,"data-promise":!!h.promise,"data-swiped":ee,"data-removed":be,"data-visible":Ey,"data-y-position":Ts,"data-x-position":Or,"data-index":x,"data-front":Sy,"data-swiping":gt,"data-dismissible":Z,"data-type":z,"data-invert":Z$,"data-swipe-out":_t,"data-swipe-direction":X,"data-expanded":!!(S||M&&$),style:{"--index":x,"--toasts-before":x,"--z-index":k.length-x,"--offset":`${be?xe:fr.current}px`,"--initial-height":M?"auto":`${Le}px`,...R,...h.style},onDragEnd:()=>{on(!1),W(null),At.current=null},onPointerDown:we=>{Ty||!Z||(wl.current=new Date,Ee(fr.current),we.target.setPointerCapture(we.pointerId),we.target.tagName!=="BUTTON"&&(on(!0),At.current={x:we.clientX,y:we.clientY}))},onPointerUp:()=>{var we,We,at,Ir;if(_t||!Z)return;At.current=null;let jr=Number(((we=Vi.current)==null?void 0:we.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),As=Number(((We=Vi.current)==null?void 0:We.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),na=new Date().getTime()-((at=wl.current)==null?void 0:at.getTime()),Lr=_==="x"?jr:As,Ps=Math.abs(Lr)/na;if(Math.abs(Lr)>=tU||Ps>.11){Ee(fr.current),(Ir=h.onDismiss)==null||Ir.call(h,h),ne(_==="x"?jr>0?"right":"left":As>0?"down":"up"),_s(),j(!0),ae(!1);return}on(!1),W(null)},onPointerMove:we=>{var We,at,Ir,jr;if(!At.current||!Z||((We=window.getSelection())==null?void 0:We.toString().length)>0)return;let As=we.clientY-At.current.y,na=we.clientX-At.current.x,Lr=(at=e.swipeDirections)!=null?at:rU(B);!_&&(Math.abs(na)>1||Math.abs(As)>1)&&W(Math.abs(na)>Math.abs(As)?"x":"y");let Ps={x:0,y:0};_==="y"?(Lr.includes("top")||Lr.includes("bottom"))&&(Lr.includes("top")&&As<0||Lr.includes("bottom")&&As>0)&&(Ps.y=As):_==="x"&&(Lr.includes("left")||Lr.includes("right"))&&(Lr.includes("left")&&na<0||Lr.includes("right")&&na>0)&&(Ps.x=na),(Math.abs(Ps.x)>0||Math.abs(Ps.y)>0)&&ae(!0),(Ir=Vi.current)==null||Ir.style.setProperty("--swipe-amount-x",`${Ps.x}px`),(jr=Vi.current)==null||jr.style.setProperty("--swipe-amount-y",`${Ps.y}px`)}},Kn&&!h.jsx?Y.createElement("button",{"aria-label":J,"data-disabled":Ty,"data-close-button":!0,onClick:Ty||!Z?()=>{}:()=>{var we;_s(),(we=h.onDismiss)==null||we.call(h,h)},className:$r(D==null?void 0:D.closeButton,(i=h==null?void 0:h.classNames)==null?void 0:i.closeButton)},(s=T==null?void 0:T.close)!=null?s:BV):null,h.jsx||w.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:Y.createElement(Y.Fragment,null,z||h.icon||h.promise?Y.createElement("div",{"data-icon":"",className:$r(D==null?void 0:D.icon,(o=h==null?void 0:h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||e9():null,h.type!=="loading"?h.icon||(T==null?void 0:T[z])||OV(z):null):null,Y.createElement("div",{"data-content":"",className:$r(D==null?void 0:D.content,(a=h==null?void 0:h.classNames)==null?void 0:a.content)},Y.createElement("div",{"data-title":"",className:$r(D==null?void 0:D.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},typeof h.title=="function"?h.title():h.title),h.description?Y.createElement("div",{"data-description":"",className:$r(U,Pe,D==null?void 0:D.description,(u=h==null?void 0:h.classNames)==null?void 0:u.description)},typeof h.description=="function"?h.description():h.description):null),w.isValidElement(h.cancel)?h.cancel:h.cancel&&Uh(h.cancel)?Y.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||A,onClick:we=>{var We,at;Uh(h.cancel)&&Z&&((at=(We=h.cancel).onClick)==null||at.call(We,we),_s())},className:$r(D==null?void 0:D.cancelButton,(c=h==null?void 0:h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,w.isValidElement(h.action)?h.action:h.action&&Uh(h.action)?Y.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||L,onClick:we=>{var We,at;Uh(h.action)&&((at=(We=h.action).onClick)==null||at.call(We,we),!we.defaultPrevented&&_s())},className:$r(D==null?void 0:D.actionButton,(d=h==null?void 0:h.classNames)==null?void 0:d.actionButton)},h.action.label):null))};function mT(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function sU(e,t){let n={};return[e,t].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?XV:YV;function l(u){["top","right","bottom","left"].forEach(c=>{n[`${o}-${c}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=a:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(a)}),n}var oU=w.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:u,theme:c="light",richColors:d,duration:f,style:h,visibleToasts:p=QV,toastOptions:m,dir:g=mT(),gap:b=eU,loadingIcon:v,icons:x,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:S}=e,[C,E]=Y.useState([]),P=Y.useMemo(()=>Array.from(new Set([r].concat(C.filter(O=>O.position).map(O=>O.position)))),[C,r]),[R,A]=Y.useState([]),[L,I]=Y.useState(!1),[U,F]=Y.useState(!1),[B,q]=Y.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=Y.useRef(null),M=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=Y.useRef(null),T=Y.useRef(!1),J=Y.useCallback(O=>{E(_=>{var W;return(W=_.find(X=>X.id===O.id))!=null&&W.delete||In.dismiss(O.id),_.filter(({id:X})=>X!==O.id)})},[]);return Y.useEffect(()=>In.subscribe(O=>{if(O.dismiss){E(_=>_.map(W=>W.id===O.id?{...W,delete:!0}:W));return}setTimeout(()=>{Gk.flushSync(()=>{E(_=>{let W=_.findIndex(X=>X.id===O.id);return W!==-1?[..._.slice(0,W),{..._[W],...O},..._.slice(W+1)]:[O,..._]})})})}),[]),Y.useEffect(()=>{if(c!=="system"){q(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?q("dark"):q("light")),typeof window>"u")return;let O=window.matchMedia("(prefers-color-scheme: dark)");try{O.addEventListener("change",({matches:_})=>{q(_?"dark":"light")})}catch{O.addListener(({matches:W})=>{try{q(W?"dark":"light")}catch(X){console.error(X)}})}},[c]),Y.useEffect(()=>{C.length<=1&&I(!1)},[C]),Y.useEffect(()=>{let O=_=>{var W,X;i.every(ne=>_[ne]||_.code===ne)&&(I(!0),(W=H.current)==null||W.focus()),_.code==="Escape"&&(document.activeElement===H.current||(X=H.current)!=null&&X.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[i]),Y.useEffect(()=>{if(H.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,T.current=!1)}},[H.current]),Y.createElement("section",{ref:t,"aria-label":`${k} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((O,_)=>{var W;let[X,ne]=O.split("-");return C.length?Y.createElement("ol",{key:O,dir:g==="auto"?mT():g,tabIndex:-1,ref:H,className:a,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":X,"data-lifted":L&&C.length>1&&!s,"data-x-position":ne,style:{"--front-toast-height":`${((W=R[0])==null?void 0:W.height)||0}px`,"--width":`${ZV}px`,"--gap":`${b}px`,...h,...sU(l,u)},onBlur:$=>{T.current&&!$.currentTarget.contains($.relatedTarget)&&(T.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:$=>{$.target instanceof HTMLElement&&$.target.dataset.dismissible==="false"||T.current||(T.current=!0,D.current=$.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{U||I(!1)},onDragEnd:()=>I(!1),onPointerDown:$=>{$.target instanceof HTMLElement&&$.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},C.filter($=>!$.position&&_===0||$.position===O).map(($,ie)=>{var be,Me;return Y.createElement(iU,{key:$.id,icons:x,index:ie,toast:$,defaultRichColors:d,duration:(be=m==null?void 0:m.duration)!=null?be:f,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:n,visibleToasts:p,closeButton:(Me=m==null?void 0:m.closeButton)!=null?Me:o,interacting:U,position:O,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:J,toasts:C.filter(gt=>gt.position==$.position),heights:R.filter(gt=>gt.position==$.position),setHeights:A,expandByDefault:s,gap:b,loadingIcon:v,expanded:L,pauseWhenPageIsHidden:S,swipeDirections:e.swipeDirections})})):null}))});const aU=({...e})=>{const{theme:t="system"}=MV();return y.jsx(oU,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var lU=rk[" useId ".trim().toString()]||(()=>{}),uU=0;function Er(e){const[t,n]=w.useState(lU());return Ni(()=>{n(r=>r??String(uU++))},[e]),t?`radix-${t}`:""}const cU=["top","right","bottom","left"],Lo=Math.min,Xn=Math.max,Lm=Math.round,Hh=Math.floor,Ai=e=>({x:e,y:e}),dU={left:"right",right:"left",bottom:"top",top:"bottom"},fU={start:"end",end:"start"};function Hv(e,t,n){return Xn(e,Lo(t,n))}function gs(e,t){return typeof e=="function"?e(t):e}function ys(e){return e.split("-")[0]}function pc(e){return e.split("-")[1]}function rC(e){return e==="x"?"y":"x"}function iC(e){return e==="y"?"height":"width"}const hU=new Set(["top","bottom"]);function Ci(e){return hU.has(ys(e))?"y":"x"}function sC(e){return rC(Ci(e))}function pU(e,t,n){n===void 0&&(n=!1);const r=pc(e),i=sC(e),s=iC(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Fm(o)),[o,Fm(o)]}function mU(e){const t=Fm(e);return[Wv(e),t,Wv(t)]}function Wv(e){return e.replace(/start|end/g,t=>fU[t])}const gT=["left","right"],yT=["right","left"],gU=["top","bottom"],yU=["bottom","top"];function bU(e,t,n){switch(e){case"top":case"bottom":return n?t?yT:gT:t?gT:yT;case"left":case"right":return t?gU:yU;default:return[]}}function vU(e,t,n,r){const i=pc(e);let s=bU(ys(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(Wv)))),s}function Fm(e){return e.replace(/left|right|bottom|top/g,t=>dU[t])}function xU(e){return{top:0,right:0,bottom:0,left:0,...e}}function NO(e){return typeof e!="number"?xU(e):{top:e,right:e,bottom:e,left:e}}function $m(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function bT(e,t,n){let{reference:r,floating:i}=e;const s=Ci(t),o=sC(t),a=iC(o),l=ys(t),u=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(pc(t)){case"start":h[o]-=f*(n&&u?-1:1);break;case"end":h[o]+=f*(n&&u?-1:1);break}return h}async function wU(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=gs(t,e),p=NO(h),g=a[f?d==="floating"?"reference":"floating":d],b=$m(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},S=$m(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:x,strategy:l}):v);return{top:(b.top-S.top+p.top)/k.y,bottom:(S.bottom-b.bottom+p.bottom)/k.y,left:(b.left-S.left+p.left)/k.x,right:(S.right-b.right+p.right)/k.x}}const kU=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=bT(u,r,l),f=r,h={},p=0;for(let g=0;g<a.length;g++){var m;const{name:b,fn:v}=a[g],{x,y:k,data:S,reset:C}=await v({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:u,platform:{...o,detectOverflow:(m=o.detectOverflow)!=null?m:wU},elements:{reference:e,floating:t}});c=x??c,d=k??d,h={...h,[b]:{...h[b],...S}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):C.rects),{x:c,y:d}=bT(u,f,l)),g=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}},CU=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=gs(e,t)||{};if(u==null)return{};const d=NO(c),f={x:n,y:r},h=sC(i),p=iC(h),m=await o.getDimensions(u),g=h==="y",b=g?"top":"left",v=g?"bottom":"right",x=g?"clientHeight":"clientWidth",k=s.reference[p]+s.reference[h]-f[h]-s.floating[p],S=f[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=C?C[x]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=a.floating[x]||s.floating[p]);const P=k/2-S/2,R=E/2-m[p]/2-1,A=Lo(d[b],R),L=Lo(d[v],R),I=A,U=E-m[p]-L,F=E/2-m[p]/2+P,B=Hv(I,F,U),q=!l.arrow&&pc(i)!=null&&F!==B&&s.reference[p]/2-(F<I?A:L)-m[p]/2<0,H=q?F<I?F-I:F-U:0;return{[h]:f[h]+H,data:{[h]:B,centerOffset:F-B-H,...q&&{alignmentOffset:H}},reset:q}}}),SU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=gs(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=ys(i),v=Ci(a),x=ys(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(u.floating)),S=f||(x||!m?[Fm(a)]:mU(a)),C=p!=="none";!f&&C&&S.push(...vU(a,m,p,k));const E=[a,...S],P=await l.detectOverflow(t,g),R=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&R.push(P[b]),d){const F=pU(i,o,k);R.push(P[F[0]],P[F[1]])}if(A=[...A,{placement:i,overflows:R}],!R.every(F=>F<=0)){var L,I;const F=(((L=s.flip)==null?void 0:L.index)||0)+1,B=E[F];if(B&&(!(d==="alignment"?v!==Ci(B):!1)||A.every(M=>Ci(M.placement)===v?M.overflows[0]>0:!0)))return{data:{index:F,overflows:A},reset:{placement:B}};let q=(I=A.filter(H=>H.overflows[0]<=0).sort((H,M)=>H.overflows[1]-M.overflows[1])[0])==null?void 0:I.placement;if(!q)switch(h){case"bestFit":{var U;const H=(U=A.filter(M=>{if(C){const D=Ci(M.placement);return D===v||D==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(D=>D>0).reduce((D,T)=>D+T,0)]).sort((M,D)=>M[1]-D[1])[0])==null?void 0:U[0];H&&(q=H);break}case"initialPlacement":q=a;break}if(i!==q)return{reset:{placement:q}}}return{}}}};function vT(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function xT(e){return cU.some(t=>e[t]>=0)}const EU=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,{strategy:i="referenceHidden",...s}=gs(e,t);switch(i){case"referenceHidden":{const o=await r.detectOverflow(t,{...s,elementContext:"reference"}),a=vT(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:xT(a)}}}case"escaped":{const o=await r.detectOverflow(t,{...s,altBoundary:!0}),a=vT(o,n.floating);return{data:{escapedOffsets:a,escaped:xT(a)}}}default:return{}}}}},DO=new Set(["left","top"]);async function TU(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ys(n),a=pc(n),l=Ci(n)==="y",u=DO.has(o)?-1:1,c=s&&l?-1:1,d=gs(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const _U=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await TU(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},AU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i,platform:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:v,y:x}=b;return{x:v,y:x}}},...u}=gs(e,t),c={x:n,y:r},d=await s.detectOverflow(t,u),f=Ci(ys(i)),h=rC(f);let p=c[h],m=c[f];if(o){const b=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=p+d[b],k=p-d[v];p=Hv(x,p,k)}if(a){const b=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=m+d[b],k=m-d[v];m=Hv(x,m,k)}const g=l.fn({...t,[h]:p,[f]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:o,[f]:a}}}}}},PU=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=gs(e,t),c={x:n,y:r},d=Ci(i),f=rC(d);let h=c[f],p=c[d];const m=gs(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",k=s.reference[f]-s.floating[x]+g.mainAxis,S=s.reference[f]+s.reference[x]-g.mainAxis;h<k?h=k:h>S&&(h=S)}if(u){var b,v;const x=f==="y"?"width":"height",k=DO.has(ys(i)),S=s.reference[d]-s.floating[x]+(k&&((b=o.offset)==null?void 0:b[d])||0)+(k?0:g.crossAxis),C=s.reference[d]+s.reference[x]+(k?0:((v=o.offset)==null?void 0:v[d])||0)-(k?g.crossAxis:0);p<S?p=S:p>C&&(p=C)}return{[f]:h,[d]:p}}}},RU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...u}=gs(e,t),c=await o.detectOverflow(t,u),d=ys(i),f=pc(i),h=Ci(i)==="y",{width:p,height:m}=s.floating;let g,b;d==="top"||d==="bottom"?(g=d,b=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(b=d,g=f==="end"?"top":"bottom");const v=m-c.top-c.bottom,x=p-c.left-c.right,k=Lo(m-c[g],v),S=Lo(p-c[b],x),C=!t.middlewareData.shift;let E=k,P=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=x),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=v),C&&!f){const A=Xn(c.left,0),L=Xn(c.right,0),I=Xn(c.top,0),U=Xn(c.bottom,0);h?P=p-2*(A!==0||L!==0?A+L:Xn(c.left,c.right)):E=m-2*(I!==0||U!==0?I+U:Xn(c.top,c.bottom))}await l({...t,availableWidth:P,availableHeight:E});const R=await o.getDimensions(a.floating);return p!==R.width||m!==R.height?{reset:{rects:!0}}:{}}}};function S0(){return typeof window<"u"}function mc(e){return MO(e)?(e.nodeName||"").toLowerCase():"#document"}function ir(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ji(e){var t;return(t=(MO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function MO(e){return S0()?e instanceof Node||e instanceof ir(e).Node:!1}function ii(e){return S0()?e instanceof Element||e instanceof ir(e).Element:!1}function Di(e){return S0()?e instanceof HTMLElement||e instanceof ir(e).HTMLElement:!1}function wT(e){return!S0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ir(e).ShadowRoot}const NU=new Set(["inline","contents"]);function rh(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=si(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!NU.has(i)}const DU=new Set(["table","td","th"]);function MU(e){return DU.has(mc(e))}const OU=[":popover-open",":modal"];function E0(e){return OU.some(t=>{try{return e.matches(t)}catch{return!1}})}const IU=["transform","translate","scale","rotate","perspective"],jU=["transform","translate","scale","rotate","perspective","filter"],LU=["paint","layout","strict","content"];function oC(e){const t=aC(),n=ii(e)?si(e):e;return IU.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||jU.some(r=>(n.willChange||"").includes(r))||LU.some(r=>(n.contain||"").includes(r))}function FU(e){let t=Fo(e);for(;Di(t)&&!qu(t);){if(oC(t))return t;if(E0(t))return null;t=Fo(t)}return null}function aC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $U=new Set(["html","body","#document"]);function qu(e){return $U.has(mc(e))}function si(e){return ir(e).getComputedStyle(e)}function T0(e){return ii(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Fo(e){if(mc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||wT(e)&&e.host||ji(e);return wT(t)?t.host:t}function OO(e){const t=Fo(e);return qu(t)?e.ownerDocument?e.ownerDocument.body:e.body:Di(t)&&rh(t)?t:OO(t)}function af(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=OO(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=ir(i);if(s){const a=qv(o);return t.concat(o,o.visualViewport||[],rh(i)?i:[],a&&n?af(a):[])}return t.concat(i,af(i,[],n))}function qv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function IO(e){const t=si(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Di(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=Lm(n)!==s||Lm(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function lC(e){return ii(e)?e:e.contextElement}function bu(e){const t=lC(e);if(!Di(t))return Ai(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=IO(t);let o=(s?Lm(n.width):n.width)/r,a=(s?Lm(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const zU=Ai(0);function jO(e){const t=ir(e);return!aC()||!t.visualViewport?zU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function BU(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ir(e)?!1:t}function Za(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=lC(e);let o=Ai(1);t&&(r?ii(r)&&(o=bu(r)):o=bu(e));const a=BU(s,n,r)?jO(s):Ai(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const f=ir(s),h=r&&ii(r)?ir(r):r;let p=f,m=qv(p);for(;m&&r&&h!==p;){const g=bu(m),b=m.getBoundingClientRect(),v=si(m),x=b.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,k=b.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=x,u+=k,p=ir(m),m=qv(p)}}return $m({width:c,height:d,x:l,y:u})}function _0(e,t){const n=T0(e).scrollLeft;return t?t.left+n:Za(ji(e)).left+n}function LO(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-_0(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function VU(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=ji(r),a=t?E0(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Ai(1);const c=Ai(0),d=Di(r);if((d||!d&&!s)&&((mc(r)!=="body"||rh(o))&&(l=T0(r)),Di(r))){const h=Za(r);u=bu(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const f=o&&!d&&!s?LO(o,l):Ai(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:n.y*u.y-l.scrollTop*u.y+c.y+f.y}}function UU(e){return Array.from(e.getClientRects())}function HU(e){const t=ji(e),n=T0(e),r=e.ownerDocument.body,i=Xn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Xn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+_0(e);const a=-n.scrollTop;return si(r).direction==="rtl"&&(o+=Xn(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const kT=25;function WU(e,t){const n=ir(e),r=ji(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=aC();(!c||c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const u=_0(r);if(u<=0){const c=r.ownerDocument,d=c.body,f=getComputedStyle(d),h=c.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,p=Math.abs(r.clientWidth-d.clientWidth-h);p<=kT&&(s-=p)}else u<=kT&&(s+=u);return{width:s,height:o,x:a,y:l}}const qU=new Set(["absolute","fixed"]);function KU(e,t){const n=Za(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Di(e)?bu(e):Ai(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function CT(e,t,n){let r;if(t==="viewport")r=WU(e,n);else if(t==="document")r=HU(ji(e));else if(ii(t))r=KU(t,n);else{const i=jO(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return $m(r)}function FO(e,t){const n=Fo(e);return n===t||!ii(n)||qu(n)?!1:si(n).position==="fixed"||FO(n,t)}function GU(e,t){const n=t.get(e);if(n)return n;let r=af(e,[],!1).filter(a=>ii(a)&&mc(a)!=="body"),i=null;const s=si(e).position==="fixed";let o=s?Fo(e):e;for(;ii(o)&&!qu(o);){const a=si(o),l=oC(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&qU.has(i.position)||rh(o)&&!l&&FO(e,o))?r=r.filter(c=>c!==o):i=a,o=Fo(o)}return t.set(e,r),r}function JU(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?E0(t)?[]:GU(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,c)=>{const d=CT(t,c,i);return u.top=Xn(d.top,u.top),u.right=Lo(d.right,u.right),u.bottom=Lo(d.bottom,u.bottom),u.left=Xn(d.left,u.left),u},CT(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function QU(e){const{width:t,height:n}=IO(e);return{width:t,height:n}}function YU(e,t,n){const r=Di(t),i=ji(t),s=n==="fixed",o=Za(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Ai(0);function u(){l.x=_0(i)}if(r||!r&&!s)if((mc(t)!=="body"||rh(i))&&(a=T0(t)),r){const h=Za(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&u();s&&!r&&i&&u();const c=i&&!r&&!s?LO(i,a):Ai(0),d=o.left+a.scrollLeft-l.x-c.x,f=o.top+a.scrollTop-l.y-c.y;return{x:d,y:f,width:o.width,height:o.height}}function i1(e){return si(e).position==="static"}function ST(e,t){if(!Di(e)||si(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ji(e)===n&&(n=n.ownerDocument.body),n}function $O(e,t){const n=ir(e);if(E0(e))return n;if(!Di(e)){let i=Fo(e);for(;i&&!qu(i);){if(ii(i)&&!i1(i))return i;i=Fo(i)}return n}let r=ST(e,t);for(;r&&MU(r)&&i1(r);)r=ST(r,t);return r&&qu(r)&&i1(r)&&!oC(r)?n:r||FU(e)||n}const XU=async function(e){const t=this.getOffsetParent||$O,n=this.getDimensions,r=await n(e.floating);return{reference:YU(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ZU(e){return si(e).direction==="rtl"}const eH={convertOffsetParentRelativeRectToViewportRelativeRect:VU,getDocumentElement:ji,getClippingRect:JU,getOffsetParent:$O,getElementRects:XU,getClientRects:UU,getDimensions:QU,getScale:bu,isElement:ii,isRTL:ZU};function zO(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function tH(e,t){let n=null,r;const i=ji(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=e.getBoundingClientRect(),{left:c,top:d,width:f,height:h}=u;if(a||t(),!f||!h)return;const p=Hh(d),m=Hh(i.clientWidth-(c+f)),g=Hh(i.clientHeight-(d+h)),b=Hh(c),x={rootMargin:-p+"px "+-m+"px "+-g+"px "+-b+"px",threshold:Xn(0,Lo(1,l))||1};let k=!0;function S(C){const E=C[0].intersectionRatio;if(E!==l){if(!k)return o();E?o(!1,E):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!zO(u,e.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(S,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,x)}n.observe(e)}return o(!0),s}function nH(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=lC(e),c=i||s?[...u?af(u):[],...af(t)]:[];c.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const d=u&&a?tH(u,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(b=>{let[v]=b;v&&v.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let p,m=l?Za(e):null;l&&g();function g(){const b=Za(e);m&&!zO(m,b)&&n(),m=b,p=requestAnimationFrame(g)}return n(),()=>{var b;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d==null||d(),(b=h)==null||b.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const rH=_U,iH=AU,sH=SU,oH=RU,aH=EU,ET=CU,lH=PU,uH=(e,t,n)=>{const r=new Map,i={platform:eH,...n},s={...i.platform,_c:r};return kU(e,t,{...i,platform:s})};var cH=typeof document<"u",dH=function(){},Wp=cH?w.useLayoutEffect:dH;function zm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!zm(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!zm(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function BO(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function TT(e,t){const n=BO(e);return Math.round(t*n)/n}function s1(e){const t=w.useRef(e);return Wp(()=>{t.current=e}),t}function fH(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[c,d]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=w.useState(r);zm(f,r)||h(r);const[p,m]=w.useState(null),[g,b]=w.useState(null),v=w.useCallback(M=>{M!==C.current&&(C.current=M,m(M))},[]),x=w.useCallback(M=>{M!==E.current&&(E.current=M,b(M))},[]),k=s||p,S=o||g,C=w.useRef(null),E=w.useRef(null),P=w.useRef(c),R=l!=null,A=s1(l),L=s1(i),I=s1(u),U=w.useCallback(()=>{if(!C.current||!E.current)return;const M={placement:t,strategy:n,middleware:f};L.current&&(M.platform=L.current),uH(C.current,E.current,M).then(D=>{const T={...D,isPositioned:I.current!==!1};F.current&&!zm(P.current,T)&&(P.current=T,dc.flushSync(()=>{d(T)}))})},[f,t,n,L,I]);Wp(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,d(M=>({...M,isPositioned:!1})))},[u]);const F=w.useRef(!1);Wp(()=>(F.current=!0,()=>{F.current=!1}),[]),Wp(()=>{if(k&&(C.current=k),S&&(E.current=S),k&&S){if(A.current)return A.current(k,S,U);U()}},[k,S,U,A,R]);const B=w.useMemo(()=>({reference:C,floating:E,setReference:v,setFloating:x}),[v,x]),q=w.useMemo(()=>({reference:k,floating:S}),[k,S]),H=w.useMemo(()=>{const M={position:n,left:0,top:0};if(!q.floating)return M;const D=TT(q.floating,c.x),T=TT(q.floating,c.y);return a?{...M,transform:"translate("+D+"px, "+T+"px)",...BO(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:T}},[n,a,q.floating,c.x,c.y]);return w.useMemo(()=>({...c,update:U,refs:B,elements:q,floatingStyles:H}),[c,U,B,q,H])}const hH=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ET({element:r.current,padding:i}).fn(n):{}:r?ET({element:r,padding:i}).fn(n):{}}}},pH=(e,t)=>({...rH(e),options:[e,t]}),mH=(e,t)=>({...iH(e),options:[e,t]}),gH=(e,t)=>({...lH(e),options:[e,t]}),yH=(e,t)=>({...sH(e),options:[e,t]}),bH=(e,t)=>({...oH(e),options:[e,t]}),vH=(e,t)=>({...aH(e),options:[e,t]}),xH=(e,t)=>({...hH(e),options:[e,t]});var wH="Arrow",VO=w.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return y.jsx(De.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});VO.displayName=wH;var kH=VO;function UO(e){const[t,n]=w.useState(void 0);return Ni(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var uC="Popper",[HO,gc]=xs(uC),[CH,WO]=HO(uC),qO=e=>{const{__scopePopper:t,children:n}=e,[r,i]=w.useState(null);return y.jsx(CH,{scope:t,anchor:r,onAnchorChange:i,children:n})};qO.displayName=uC;var KO="PopperAnchor",GO=w.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=WO(KO,n),o=w.useRef(null),a=Tt(t,o);return w.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(De.div,{...i,ref:a})});GO.displayName=KO;var cC="PopperContent",[SH,EH]=HO(cC),JO=w.forwardRef((e,t)=>{var $,ie,be,Me,gt,on;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:p,...m}=e,g=WO(cC,n),[b,v]=w.useState(null),x=Tt(t,_t=>v(_t)),[k,S]=w.useState(null),C=UO(k),E=(C==null?void 0:C.width)??0,P=(C==null?void 0:C.height)??0,R=r+(s!=="center"?"-"+s:""),A=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},L=Array.isArray(u)?u:[u],I=L.length>0,U={padding:A,boundary:L.filter(_H),altBoundary:I},{refs:F,floatingStyles:B,placement:q,isPositioned:H,middlewareData:M}=fH({strategy:"fixed",placement:R,whileElementsMounted:(..._t)=>nH(..._t,{animationFrame:h==="always"}),elements:{reference:g.anchor},middleware:[pH({mainAxis:i+P,alignmentAxis:o}),l&&mH({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?gH():void 0,...U}),l&&yH({...U}),bH({...U,apply:({elements:_t,rects:j,availableWidth:ee,availableHeight:ae})=>{const{width:xe,height:Ee}=j.reference,Le=_t.floating.style;Le.setProperty("--radix-popper-available-width",`${ee}px`),Le.setProperty("--radix-popper-available-height",`${ae}px`),Le.setProperty("--radix-popper-anchor-width",`${xe}px`),Le.setProperty("--radix-popper-anchor-height",`${Ee}px`)}}),k&&xH({element:k,padding:a}),AH({arrowWidth:E,arrowHeight:P}),f&&vH({strategy:"referenceHidden",...U})]}),[D,T]=XO(q),J=Ri(p);Ni(()=>{H&&(J==null||J())},[H,J]);const O=($=M.arrow)==null?void 0:$.x,_=(ie=M.arrow)==null?void 0:ie.y,W=((be=M.arrow)==null?void 0:be.centerOffset)!==0,[X,ne]=w.useState();return Ni(()=>{b&&ne(window.getComputedStyle(b).zIndex)},[b]),y.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:H?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(Me=M.transformOrigin)==null?void 0:Me.x,(gt=M.transformOrigin)==null?void 0:gt.y].join(" "),...((on=M.hide)==null?void 0:on.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:y.jsx(SH,{scope:n,placedSide:D,onArrowChange:S,arrowX:O,arrowY:_,shouldHideArrow:W,children:y.jsx(De.div,{"data-side":D,"data-align":T,...m,ref:x,style:{...m.style,animation:H?void 0:"none"}})})})});JO.displayName=cC;var QO="PopperArrow",TH={top:"bottom",right:"left",bottom:"top",left:"right"},YO=w.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=EH(QO,r),o=TH[s.placedSide];return y.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:y.jsx(kH,{...i,ref:n,style:{...i.style,display:"block"}})})});YO.displayName=QO;function _H(e){return e!==null}var AH=e=>({name:"transformOrigin",options:e,fn(t){var g,b,v;const{placement:n,rects:r,middlewareData:i}=t,o=((g=i.arrow)==null?void 0:g.centerOffset)!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[u,c]=XO(n),d={start:"0%",center:"50%",end:"100%"}[c],f=(((b=i.arrow)==null?void 0:b.x)??0)+a/2,h=(((v=i.arrow)==null?void 0:v.y)??0)+l/2;let p="",m="";return u==="bottom"?(p=o?d:`${f}px`,m=`${-l}px`):u==="top"?(p=o?d:`${f}px`,m=`${r.floating.height+l}px`):u==="right"?(p=`${-l}px`,m=o?d:`${h}px`):u==="left"&&(p=`${r.floating.width+l}px`,m=o?d:`${h}px`),{data:{x:p,y:m}}}});function XO(e){const[t,n="center"]=e.split("-");return[t,n]}var dC=qO,A0=GO,fC=JO,hC=YO,[P0,Rwe]=xs("Tooltip",[gc]),R0=gc(),ZO="TooltipProvider",PH=700,Kv="tooltip.open",[RH,pC]=P0(ZO),eI=e=>{const{__scopeTooltip:t,delayDuration:n=PH,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=e,o=w.useRef(!0),a=w.useRef(!1),l=w.useRef(0);return w.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),y.jsx(RH,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:w.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:w.useCallback(u=>{a.current=u},[]),disableHoverableContent:i,children:s})};eI.displayName=ZO;var lf="Tooltip",[NH,N0]=P0(lf),tI=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=e,l=pC(lf,e.__scopeTooltip),u=R0(t),[c,d]=w.useState(null),f=Er(),h=w.useRef(0),p=o??l.disableHoverableContent,m=a??l.delayDuration,g=w.useRef(!1),[b,v]=ml({prop:r,defaultProp:i??!1,onChange:E=>{E?(l.onOpen(),document.dispatchEvent(new CustomEvent(Kv))):l.onClose(),s==null||s(E)},caller:lf}),x=w.useMemo(()=>b?g.current?"delayed-open":"instant-open":"closed",[b]),k=w.useCallback(()=>{window.clearTimeout(h.current),h.current=0,g.current=!1,v(!0)},[v]),S=w.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v(!1)},[v]),C=w.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{g.current=!0,v(!0),h.current=0},m)},[m,v]);return w.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),y.jsx(dC,{...u,children:y.jsx(NH,{scope:t,contentId:f,open:b,stateAttribute:x,trigger:c,onTriggerChange:d,onTriggerEnter:w.useCallback(()=>{l.isOpenDelayedRef.current?C():k()},[l.isOpenDelayedRef,C,k]),onTriggerLeave:w.useCallback(()=>{p?S():(window.clearTimeout(h.current),h.current=0)},[S,p]),onOpen:k,onClose:S,disableHoverableContent:p,children:n})})};tI.displayName=lf;var Gv="TooltipTrigger",nI=w.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=N0(Gv,n),s=pC(Gv,n),o=R0(n),a=w.useRef(null),l=Tt(t,a,i.onTriggerChange),u=w.useRef(!1),c=w.useRef(!1),d=w.useCallback(()=>u.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),y.jsx(A0,{asChild:!0,...o,children:y.jsx(De.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:Se(e.onPointerMove,f=>{f.pointerType!=="touch"&&!c.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:Se(e.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:Se(e.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Se(e.onFocus,()=>{u.current||i.onOpen()}),onBlur:Se(e.onBlur,i.onClose),onClick:Se(e.onClick,i.onClose)})})});nI.displayName=Gv;var DH="TooltipPortal",[Nwe,MH]=P0(DH,{forceMount:void 0}),Ku="TooltipContent",rI=w.forwardRef((e,t)=>{const n=MH(Ku,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=e,o=N0(Ku,e.__scopeTooltip);return y.jsx(oi,{present:r||o.open,children:o.disableHoverableContent?y.jsx(iI,{side:i,...s,ref:t}):y.jsx(OH,{side:i,...s,ref:t})})}),OH=w.forwardRef((e,t)=>{const n=N0(Ku,e.__scopeTooltip),r=pC(Ku,e.__scopeTooltip),i=w.useRef(null),s=Tt(t,i),[o,a]=w.useState(null),{trigger:l,onClose:u}=n,c=i.current,{onPointerInTransitChange:d}=r,f=w.useCallback(()=>{a(null),d(!1)},[d]),h=w.useCallback((p,m)=>{const g=p.currentTarget,b={x:p.clientX,y:p.clientY},v=$H(b,g.getBoundingClientRect()),x=zH(b,v),k=BH(m.getBoundingClientRect()),S=UH([...x,...k]);a(S),d(!0)},[d]);return w.useEffect(()=>()=>f(),[f]),w.useEffect(()=>{if(l&&c){const p=g=>h(g,c),m=g=>h(g,l);return l.addEventListener("pointerleave",p),c.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",p),c.removeEventListener("pointerleave",m)}}},[l,c,h,f]),w.useEffect(()=>{if(o){const p=m=>{const g=m.target,b={x:m.clientX,y:m.clientY},v=(l==null?void 0:l.contains(g))||(c==null?void 0:c.contains(g)),x=!VH(b,o);v?f():x&&(f(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,c,o,u,f]),y.jsx(iI,{...e,ref:s})}),[IH,jH]=P0(lf,{isInside:!1}),LH=jB("TooltipContent"),iI=w.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=e,l=N0(Ku,n),u=R0(n),{onClose:c}=l;return w.useEffect(()=>(document.addEventListener(Kv,c),()=>document.removeEventListener(Kv,c)),[c]),w.useEffect(()=>{if(l.trigger){const d=f=>{const h=f.target;h!=null&&h.contains(l.trigger)&&c()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,c]),y.jsx(fc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:c,children:y.jsxs(fC,{"data-state":l.stateAttribute,...u,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(LH,{children:r}),y.jsx(IH,{scope:n,isInside:!0,children:y.jsx(o7,{id:l.contentId,role:"tooltip",children:i||r})})]})})});rI.displayName=Ku;var sI="TooltipArrow",FH=w.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=R0(n);return jH(sI,n).isInside?null:y.jsx(hC,{...i,...r,ref:t})});FH.displayName=sI;function $H(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function zH(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function BH(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function VH(e,t){const{x:n,y:r}=e;let i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const a=t[s],l=t[o],u=a.x,c=a.y,d=l.x,f=l.y;c>r!=f>r&&n<(d-u)*(r-c)/(f-c)+u&&(i=!i)}return i}function UH(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),HH(t)}function HH(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var WH=eI,qH=tI,KH=nI,oI=rI;const GH=WH,aI=qH,lI=KH,mC=w.forwardRef(({className:e,sideOffset:t=4,...n},r)=>y.jsx(oI,{ref:r,sideOffset:t,className:Ct("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));mC.displayName=oI.displayName;var yc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},el=typeof window>"u"||"Deno"in globalThis;function kn(){}function JH(e,t){return typeof e=="function"?e(t):e}function Jv(e){return typeof e=="number"&&e>=0&&e!==1/0}function uI(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ao(e,t){return typeof e=="function"?e(t):e}function gr(e,t){return typeof e=="function"?e(t):e}function _T(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==gC(o,t.options))return!1}else if(!uf(t.queryKey,o))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||s&&!s(t))}function AT(e,t){const{exact:n,status:r,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(tl(t.options.mutationKey)!==tl(s))return!1}else if(!uf(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function gC(e,t){return((t==null?void 0:t.queryKeyHashFn)||tl)(e)}function tl(e){return JSON.stringify(e,(t,n)=>Qv(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function uf(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>uf(e[n],t[n])):!1}function cI(e,t){if(e===t)return e;const n=PT(e)&&PT(t);if(n||Qv(e)&&Qv(t)){const r=n?e:Object.keys(e),i=r.length,s=n?t:Object.keys(t),o=s.length,a=n?[]:{},l=new Set(r);let u=0;for(let c=0;c<o;c++){const d=n?c:s[c];(!n&&l.has(d)||n)&&e[d]===void 0&&t[d]===void 0?(a[d]=void 0,u++):(a[d]=cI(e[d],t[d]),a[d]===e[d]&&e[d]!==void 0&&u++)}return i===o&&u===i?e:a}return t}function Bm(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function PT(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Qv(e){if(!RT(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!RT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function RT(e){return Object.prototype.toString.call(e)==="[object Object]"}function QH(e){return new Promise(t=>{setTimeout(t,e)})}function Yv(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?cI(e,t):t}function YH(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function XH(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var yC=Symbol();function dI(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===yC?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function fI(e,t){return typeof e=="function"?e(...t):!!e}var Pa,to,_u,kN,ZH=(kN=class extends yc{constructor(){super();fe(this,Pa);fe(this,to);fe(this,_u);re(this,_u,t=>{if(!el&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){N(this,to)||this.setEventListener(N(this,_u))}onUnsubscribe(){var t;this.hasListeners()||((t=N(this,to))==null||t.call(this),re(this,to,void 0))}setEventListener(t){var n;re(this,_u,t),(n=N(this,to))==null||n.call(this),re(this,to,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){N(this,Pa)!==t&&(re(this,Pa,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof N(this,Pa)=="boolean"?N(this,Pa):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Pa=new WeakMap,to=new WeakMap,_u=new WeakMap,kN),bC=new ZH,Au,no,Pu,CN,eW=(CN=class extends yc{constructor(){super();fe(this,Au,!0);fe(this,no);fe(this,Pu);re(this,Pu,t=>{if(!el&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){N(this,no)||this.setEventListener(N(this,Pu))}onUnsubscribe(){var t;this.hasListeners()||((t=N(this,no))==null||t.call(this),re(this,no,void 0))}setEventListener(t){var n;re(this,Pu,t),(n=N(this,no))==null||n.call(this),re(this,no,t(this.setOnline.bind(this)))}setOnline(t){N(this,Au)!==t&&(re(this,Au,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return N(this,Au)}},Au=new WeakMap,no=new WeakMap,Pu=new WeakMap,CN),Vm=new eW;function Xv(){let e,t;const n=new Promise((i,s)=>{e=i,t=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}function tW(e){return Math.min(1e3*2**e,3e4)}function hI(e){return(e??"online")==="online"?Vm.isOnline():!0}var pI=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function o1(e){return e instanceof pI}function mI(e){let t=!1,n=0,r=!1,i;const s=Xv(),o=m=>{var g;r||(f(new pI(m)),(g=e.abort)==null||g.call(e))},a=()=>{t=!0},l=()=>{t=!1},u=()=>bC.isFocused()&&(e.networkMode==="always"||Vm.isOnline())&&e.canRun(),c=()=>hI(e.networkMode)&&e.canRun(),d=m=>{var g;r||(r=!0,(g=e.onSuccess)==null||g.call(e,m),i==null||i(),s.resolve(m))},f=m=>{var g;r||(r=!0,(g=e.onError)==null||g.call(e,m),i==null||i(),s.reject(m))},h=()=>new Promise(m=>{var g;i=b=>{(r||u())&&m(b)},(g=e.onPause)==null||g.call(e)}).then(()=>{var m;i=void 0,r||(m=e.onContinue)==null||m.call(e)}),p=()=>{if(r)return;let m;const g=n===0?e.initialPromise:void 0;try{m=g??e.fn()}catch(b){m=Promise.reject(b)}Promise.resolve(m).then(d).catch(b=>{var C;if(r)return;const v=e.retry??(el?0:3),x=e.retryDelay??tW,k=typeof x=="function"?x(n,b):x,S=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,b);if(t||!S){f(b);return}n++,(C=e.onFail)==null||C.call(e,n,b),QH(k).then(()=>u()?void 0:h()).then(()=>{t?f(b):p()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?p():h().then(p),s)}}var nW=e=>setTimeout(e,0);function rW(){let e=[],t=0,n=a=>{a()},r=a=>{a()},i=nW;const s=a=>{t?e.push(a):i(()=>{n(a)})},o=()=>{const a=e;e=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Ft=rW(),Ra,SN,gI=(SN=class{constructor(){fe(this,Ra)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Jv(this.gcTime)&&re(this,Ra,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(el?1/0:5*60*1e3))}clearGcTimeout(){N(this,Ra)&&(clearTimeout(N(this,Ra)),re(this,Ra,void 0))}},Ra=new WeakMap,SN),Ru,Na,mr,Da,un,Hf,Ma,Wr,Gi,EN,iW=(EN=class extends gI{constructor(t){super();fe(this,Wr);fe(this,Ru);fe(this,Na);fe(this,mr);fe(this,Da);fe(this,un);fe(this,Hf);fe(this,Ma);re(this,Ma,!1),re(this,Hf,t.defaultOptions),this.setOptions(t.options),this.observers=[],re(this,Da,t.client),re(this,mr,N(this,Da).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,re(this,Ru,sW(this.options)),this.state=t.state??N(this,Ru),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=N(this,un))==null?void 0:t.promise}setOptions(t){this.options={...N(this,Hf),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&N(this,mr).remove(this)}setData(t,n){const r=Yv(this.state.data,t,this.options);return Te(this,Wr,Gi).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Te(this,Wr,Gi).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=N(this,un))==null?void 0:r.promise;return(i=N(this,un))==null||i.cancel(t),n?n.then(kn).catch(kn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(N(this,Ru))}isActive(){return this.observers.some(t=>gr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ao(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!uI(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=N(this,un))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=N(this,un))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),N(this,mr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(N(this,un)&&(N(this,Ma)?N(this,un).cancel({revert:!0}):N(this,un).cancelRetry()),this.scheduleGc()),N(this,mr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Te(this,Wr,Gi).call(this,{type:"invalidate"})}fetch(t,n){var u,c,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(N(this,un))return N(this,un).continueRetry(),N(this,un).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(re(this,Ma,!0),r.signal)})},s=()=>{const f=dI(this.options,n),p=(()=>{const m={client:N(this,Da),queryKey:this.queryKey,meta:this.meta};return i(m),m})();return re(this,Ma,!1),this.options.persister?this.options.persister(f,p,this):f(p)},a=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:N(this,Da),state:this.state,fetchFn:s};return i(f),f})();(u=this.options.behavior)==null||u.onFetch(a,this),re(this,Na,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&Te(this,Wr,Gi).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=f=>{var h,p,m,g;o1(f)&&f.silent||Te(this,Wr,Gi).call(this,{type:"error",error:f}),o1(f)||((p=(h=N(this,mr).config).onError)==null||p.call(h,f,this),(g=(m=N(this,mr).config).onSettled)==null||g.call(m,this.state.data,f,this)),this.scheduleGc()};return re(this,un,mI({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var h,p,m,g;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(b){l(b);return}(p=(h=N(this,mr).config).onSuccess)==null||p.call(h,f,this),(g=(m=N(this,mr).config).onSettled)==null||g.call(m,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,h)=>{Te(this,Wr,Gi).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{Te(this,Wr,Gi).call(this,{type:"pause"})},onContinue:()=>{Te(this,Wr,Gi).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),N(this,un).start()}},Ru=new WeakMap,Na=new WeakMap,mr=new WeakMap,Da=new WeakMap,un=new WeakMap,Hf=new WeakMap,Ma=new WeakMap,Wr=new WeakSet,Gi=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...yI(r.data,this.options),fetchMeta:t.meta??null};case"success":return re(this,Na,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return o1(i)&&i.revert&&N(this,Na)?{...N(this,Na),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Ft.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),N(this,mr).notify({query:this,type:"updated",action:t})})},EN);function yI(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:hI(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function sW(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var bi,TN,oW=(TN=class extends yc{constructor(t={}){super();fe(this,bi);this.config=t,re(this,bi,new Map)}build(t,n,r){const i=n.queryKey,s=n.queryHash??gC(i,n);let o=this.get(s);return o||(o=new iW({client:t,queryKey:i,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){N(this,bi).has(t.queryHash)||(N(this,bi).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=N(this,bi).get(t.queryHash);n&&(t.destroy(),n===t&&N(this,bi).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ft.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return N(this,bi).get(t)}getAll(){return[...N(this,bi).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>_T(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>_T(t,r)):n}notify(t){Ft.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ft.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ft.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},bi=new WeakMap,TN),vi,vn,Oa,xi,js,_N,aW=(_N=class extends gI{constructor(t){super();fe(this,xi);fe(this,vi);fe(this,vn);fe(this,Oa);this.mutationId=t.mutationId,re(this,vn,t.mutationCache),re(this,vi,[]),this.state=t.state||bI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){N(this,vi).includes(t)||(N(this,vi).push(t),this.clearGcTimeout(),N(this,vn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){re(this,vi,N(this,vi).filter(n=>n!==t)),this.scheduleGc(),N(this,vn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){N(this,vi).length||(this.state.status==="pending"?this.scheduleGc():N(this,vn).remove(this))}continue(){var t;return((t=N(this,Oa))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,a,l,u,c,d,f,h,p,m,g,b,v,x,k,S,C,E,P;const n=()=>{Te(this,xi,js).call(this,{type:"continue"})};re(this,Oa,mI({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(R,A)=>{Te(this,xi,js).call(this,{type:"failed",failureCount:R,error:A})},onPause:()=>{Te(this,xi,js).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>N(this,vn).canRun(this)}));const r=this.state.status==="pending",i=!N(this,Oa).canStart();try{if(r)n();else{Te(this,xi,js).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(s=N(this,vn).config).onMutate)==null?void 0:o.call(s,t,this));const A=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));A!==this.state.context&&Te(this,xi,js).call(this,{type:"pending",context:A,variables:t,isPaused:i})}const R=await N(this,Oa).start();return await((c=(u=N(this,vn).config).onSuccess)==null?void 0:c.call(u,R,t,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,R,t,this.state.context)),await((p=(h=N(this,vn).config).onSettled)==null?void 0:p.call(h,R,null,this.state.variables,this.state.context,this)),await((g=(m=this.options).onSettled)==null?void 0:g.call(m,R,null,t,this.state.context)),Te(this,xi,js).call(this,{type:"success",data:R}),R}catch(R){try{throw await((v=(b=N(this,vn).config).onError)==null?void 0:v.call(b,R,t,this.state.context,this)),await((k=(x=this.options).onError)==null?void 0:k.call(x,R,t,this.state.context)),await((C=(S=N(this,vn).config).onSettled)==null?void 0:C.call(S,void 0,R,this.state.variables,this.state.context,this)),await((P=(E=this.options).onSettled)==null?void 0:P.call(E,void 0,R,t,this.state.context)),R}finally{Te(this,xi,js).call(this,{type:"error",error:R})}}finally{N(this,vn).runNext(this)}}},vi=new WeakMap,vn=new WeakMap,Oa=new WeakMap,xi=new WeakSet,js=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ft.batch(()=>{N(this,vi).forEach(r=>{r.onMutationUpdate(t)}),N(this,vn).notify({mutation:this,type:"updated",action:t})})},_N);function bI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ts,qr,Wf,AN,lW=(AN=class extends yc{constructor(t={}){super();fe(this,ts);fe(this,qr);fe(this,Wf);this.config=t,re(this,ts,new Set),re(this,qr,new Map),re(this,Wf,0)}build(t,n,r){const i=new aW({mutationCache:this,mutationId:++kh(this,Wf)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){N(this,ts).add(t);const n=Wh(t);if(typeof n=="string"){const r=N(this,qr).get(n);r?r.push(t):N(this,qr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(N(this,ts).delete(t)){const n=Wh(t);if(typeof n=="string"){const r=N(this,qr).get(n);if(r)if(r.length>1){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}else r[0]===t&&N(this,qr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Wh(t);if(typeof n=="string"){const r=N(this,qr).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===t}else return!0}runNext(t){var r;const n=Wh(t);if(typeof n=="string"){const i=(r=N(this,qr).get(n))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ft.batch(()=>{N(this,ts).forEach(t=>{this.notify({type:"removed",mutation:t})}),N(this,ts).clear(),N(this,qr).clear()})}getAll(){return Array.from(N(this,ts))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>AT(n,r))}findAll(t={}){return this.getAll().filter(n=>AT(t,n))}notify(t){Ft.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ft.batch(()=>Promise.all(t.map(n=>n.continue().catch(kn))))}},ts=new WeakMap,qr=new WeakMap,Wf=new WeakMap,AN);function Wh(e){var t;return(t=e.options.scope)==null?void 0:t.id}function NT(e){return{onFetch:(t,n)=>{var c,d,f,h,p;const r=t.options,i=(f=(d=(c=t.fetchOptions)==null?void 0:c.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,s=((h=t.state.data)==null?void 0:h.pages)||[],o=((p=t.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let m=!1;const g=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},b=dI(t.options,t.fetchOptions),v=async(x,k,S)=>{if(m)return Promise.reject();if(k==null&&x.pages.length)return Promise.resolve(x);const E=(()=>{const L={client:t.client,queryKey:t.queryKey,pageParam:k,direction:S?"backward":"forward",meta:t.options.meta};return g(L),L})(),P=await b(E),{maxPages:R}=t.options,A=S?XH:YH;return{pages:A(x.pages,P,R),pageParams:A(x.pageParams,k,R)}};if(i&&s.length){const x=i==="backward",k=x?uW:DT,S={pages:s,pageParams:o},C=k(r,S);a=await v(S,C,x)}else{const x=e??s.length;do{const k=l===0?o[0]??r.initialPageParam:DT(r,a);if(l>0&&k==null)break;a=await v(a,k),l++}while(l<x)}return a};t.options.persister?t.fetchFn=()=>{var m,g;return(g=(m=t.options).persister)==null?void 0:g.call(m,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function DT(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function uW(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var bt,ro,io,Nu,Du,so,Mu,Ou,PN,cW=(PN=class{constructor(e={}){fe(this,bt);fe(this,ro);fe(this,io);fe(this,Nu);fe(this,Du);fe(this,so);fe(this,Mu);fe(this,Ou);re(this,bt,e.queryCache||new oW),re(this,ro,e.mutationCache||new lW),re(this,io,e.defaultOptions||{}),re(this,Nu,new Map),re(this,Du,new Map),re(this,so,0)}mount(){kh(this,so)._++,N(this,so)===1&&(re(this,Mu,bC.subscribe(async e=>{e&&(await this.resumePausedMutations(),N(this,bt).onFocus())})),re(this,Ou,Vm.subscribe(async e=>{e&&(await this.resumePausedMutations(),N(this,bt).onOnline())})))}unmount(){var e,t;kh(this,so)._--,N(this,so)===0&&((e=N(this,Mu))==null||e.call(this),re(this,Mu,void 0),(t=N(this,Ou))==null||t.call(this),re(this,Ou,void 0))}isFetching(e){return N(this,bt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return N(this,ro).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=N(this,bt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=N(this,bt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Ao(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return N(this,bt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=N(this,bt).get(r.queryHash),s=i==null?void 0:i.state.data,o=JH(t,s);if(o!==void 0)return N(this,bt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Ft.batch(()=>N(this,bt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=N(this,bt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=N(this,bt);Ft.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=N(this,bt);return Ft.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Ft.batch(()=>N(this,bt).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(kn).catch(kn)}invalidateQueries(e,t={}){return Ft.batch(()=>(N(this,bt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Ft.batch(()=>N(this,bt).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(kn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(kn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=N(this,bt).build(this,t);return n.isStaleByTime(Ao(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(kn).catch(kn)}fetchInfiniteQuery(e){return e.behavior=NT(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(kn).catch(kn)}ensureInfiniteQueryData(e){return e.behavior=NT(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Vm.isOnline()?N(this,ro).resumePausedMutations():Promise.resolve()}getQueryCache(){return N(this,bt)}getMutationCache(){return N(this,ro)}getDefaultOptions(){return N(this,io)}setDefaultOptions(e){re(this,io,e)}setQueryDefaults(e,t){N(this,Nu).set(tl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...N(this,Nu).values()],n={};return t.forEach(r=>{uf(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){N(this,Du).set(tl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...N(this,Du).values()],n={};return t.forEach(r=>{uf(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...N(this,io).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=gC(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===yC&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...N(this,io).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){N(this,bt).clear(),N(this,ro).clear()}},bt=new WeakMap,ro=new WeakMap,io=new WeakMap,Nu=new WeakMap,Du=new WeakMap,so=new WeakMap,Mu=new WeakMap,Ou=new WeakMap,PN),Mn,Oe,qf,xn,Ia,Iu,oo,ao,Kf,ju,Lu,ja,La,lo,Fu,Ue,td,Zv,ex,tx,nx,rx,ix,sx,vI,RN,dW=(RN=class extends yc{constructor(t,n){super();fe(this,Ue);fe(this,Mn);fe(this,Oe);fe(this,qf);fe(this,xn);fe(this,Ia);fe(this,Iu);fe(this,oo);fe(this,ao);fe(this,Kf);fe(this,ju);fe(this,Lu);fe(this,ja);fe(this,La);fe(this,lo);fe(this,Fu,new Set);this.options=n,re(this,Mn,t),re(this,ao,null),re(this,oo,Xv()),this.options.experimental_prefetchInRender||N(this,oo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(N(this,Oe).addObserver(this),MT(N(this,Oe),this.options)?Te(this,Ue,td).call(this):this.updateResult(),Te(this,Ue,nx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ox(N(this,Oe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ox(N(this,Oe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Te(this,Ue,rx).call(this),Te(this,Ue,ix).call(this),N(this,Oe).removeObserver(this)}setOptions(t){const n=this.options,r=N(this,Oe);if(this.options=N(this,Mn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gr(this.options.enabled,N(this,Oe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Te(this,Ue,sx).call(this),N(this,Oe).setOptions(this.options),n._defaulted&&!Bm(this.options,n)&&N(this,Mn).getQueryCache().notify({type:"observerOptionsUpdated",query:N(this,Oe),observer:this});const i=this.hasListeners();i&&OT(N(this,Oe),r,this.options,n)&&Te(this,Ue,td).call(this),this.updateResult(),i&&(N(this,Oe)!==r||gr(this.options.enabled,N(this,Oe))!==gr(n.enabled,N(this,Oe))||Ao(this.options.staleTime,N(this,Oe))!==Ao(n.staleTime,N(this,Oe)))&&Te(this,Ue,Zv).call(this);const s=Te(this,Ue,ex).call(this);i&&(N(this,Oe)!==r||gr(this.options.enabled,N(this,Oe))!==gr(n.enabled,N(this,Oe))||s!==N(this,lo))&&Te(this,Ue,tx).call(this,s)}getOptimisticResult(t){const n=N(this,Mn).getQueryCache().build(N(this,Mn),t),r=this.createResult(n,t);return hW(this,r)&&(re(this,xn,r),re(this,Iu,this.options),re(this,Ia,N(this,Oe).state)),r}getCurrentResult(){return N(this,xn)}trackResult(t,n){return new Proxy(t,{get:(r,i)=>(this.trackProp(i),n==null||n(i),Reflect.get(r,i))})}trackProp(t){N(this,Fu).add(t)}getCurrentQuery(){return N(this,Oe)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=N(this,Mn).defaultQueryOptions(t),r=N(this,Mn).getQueryCache().build(N(this,Mn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return Te(this,Ue,td).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),N(this,xn)))}createResult(t,n){var R;const r=N(this,Oe),i=this.options,s=N(this,xn),o=N(this,Ia),a=N(this,Iu),u=t!==r?t.state:N(this,qf),{state:c}=t;let d={...c},f=!1,h;if(n._optimisticResults){const A=this.hasListeners(),L=!A&&MT(t,n),I=A&&OT(t,r,n,i);(L||I)&&(d={...d,...yI(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:g}=d;h=d.data;let b=!1;if(n.placeholderData!==void 0&&h===void 0&&g==="pending"){let A;s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(A=s.data,b=!0):A=typeof n.placeholderData=="function"?n.placeholderData((R=N(this,Lu))==null?void 0:R.state.data,N(this,Lu)):n.placeholderData,A!==void 0&&(g="success",h=Yv(s==null?void 0:s.data,A,n),f=!0)}if(n.select&&h!==void 0&&!b)if(s&&h===(o==null?void 0:o.data)&&n.select===N(this,Kf))h=N(this,ju);else try{re(this,Kf,n.select),h=n.select(h),h=Yv(s==null?void 0:s.data,h,n),re(this,ju,h),re(this,ao,null)}catch(A){re(this,ao,A)}N(this,ao)&&(p=N(this,ao),h=N(this,ju),m=Date.now(),g="error");const v=d.fetchStatus==="fetching",x=g==="pending",k=g==="error",S=x&&v,C=h!==void 0,P={status:g,fetchStatus:d.fetchStatus,isPending:x,isSuccess:g==="success",isError:k,isInitialLoading:S,isLoading:S,data:h,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>u.dataUpdateCount||d.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!x,isLoadingError:k&&!C,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:k&&C,isStale:vC(t,n),refetch:this.refetch,promise:N(this,oo),isEnabled:gr(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const A=U=>{P.status==="error"?U.reject(P.error):P.data!==void 0&&U.resolve(P.data)},L=()=>{const U=re(this,oo,P.promise=Xv());A(U)},I=N(this,oo);switch(I.status){case"pending":t.queryHash===r.queryHash&&A(I);break;case"fulfilled":(P.status==="error"||P.data!==I.value)&&L();break;case"rejected":(P.status!=="error"||P.error!==I.reason)&&L();break}}return P}updateResult(){const t=N(this,xn),n=this.createResult(N(this,Oe),this.options);if(re(this,Ia,N(this,Oe).state),re(this,Iu,this.options),N(this,Ia).data!==void 0&&re(this,Lu,N(this,Oe)),Bm(n,t))return;re(this,xn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!N(this,Fu).size)return!0;const o=new Set(s??N(this,Fu));return this.options.throwOnError&&o.add("error"),Object.keys(N(this,xn)).some(a=>{const l=a;return N(this,xn)[l]!==t[l]&&o.has(l)})};Te(this,Ue,vI).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Te(this,Ue,nx).call(this)}},Mn=new WeakMap,Oe=new WeakMap,qf=new WeakMap,xn=new WeakMap,Ia=new WeakMap,Iu=new WeakMap,oo=new WeakMap,ao=new WeakMap,Kf=new WeakMap,ju=new WeakMap,Lu=new WeakMap,ja=new WeakMap,La=new WeakMap,lo=new WeakMap,Fu=new WeakMap,Ue=new WeakSet,td=function(t){Te(this,Ue,sx).call(this);let n=N(this,Oe).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(kn)),n},Zv=function(){Te(this,Ue,rx).call(this);const t=Ao(this.options.staleTime,N(this,Oe));if(el||N(this,xn).isStale||!Jv(t))return;const r=uI(N(this,xn).dataUpdatedAt,t)+1;re(this,ja,setTimeout(()=>{N(this,xn).isStale||this.updateResult()},r))},ex=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(N(this,Oe)):this.options.refetchInterval)??!1},tx=function(t){Te(this,Ue,ix).call(this),re(this,lo,t),!(el||gr(this.options.enabled,N(this,Oe))===!1||!Jv(N(this,lo))||N(this,lo)===0)&&re(this,La,setInterval(()=>{(this.options.refetchIntervalInBackground||bC.isFocused())&&Te(this,Ue,td).call(this)},N(this,lo)))},nx=function(){Te(this,Ue,Zv).call(this),Te(this,Ue,tx).call(this,Te(this,Ue,ex).call(this))},rx=function(){N(this,ja)&&(clearTimeout(N(this,ja)),re(this,ja,void 0))},ix=function(){N(this,La)&&(clearInterval(N(this,La)),re(this,La,void 0))},sx=function(){const t=N(this,Mn).getQueryCache().build(N(this,Mn),this.options);if(t===N(this,Oe))return;const n=N(this,Oe);re(this,Oe,t),re(this,qf,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},vI=function(t){Ft.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(N(this,xn))}),N(this,Mn).getQueryCache().notify({query:N(this,Oe),type:"observerResultsUpdated"})})},RN);function fW(e,t){return gr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function MT(e,t){return fW(e,t)||e.state.data!==void 0&&ox(e,t,t.refetchOnMount)}function ox(e,t,n){if(gr(t.enabled,e)!==!1&&Ao(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&vC(e,t)}return!1}function OT(e,t,n,r){return(e!==t||gr(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&vC(e,n)}function vC(e,t){return gr(t.enabled,e)!==!1&&e.isStaleByTime(Ao(t.staleTime,e))}function hW(e,t){return!Bm(e.getCurrentResult(),t)}var uo,co,On,ns,ds,qp,ax,NN,pW=(NN=class extends yc{constructor(n,r){super();fe(this,ds);fe(this,uo);fe(this,co);fe(this,On);fe(this,ns);re(this,uo,n),this.setOptions(r),this.bindMethods(),Te(this,ds,qp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=N(this,uo).defaultMutationOptions(n),Bm(this.options,r)||N(this,uo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:N(this,On),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&tl(r.mutationKey)!==tl(this.options.mutationKey)?this.reset():((i=N(this,On))==null?void 0:i.state.status)==="pending"&&N(this,On).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=N(this,On))==null||n.removeObserver(this)}onMutationUpdate(n){Te(this,ds,qp).call(this),Te(this,ds,ax).call(this,n)}getCurrentResult(){return N(this,co)}reset(){var n;(n=N(this,On))==null||n.removeObserver(this),re(this,On,void 0),Te(this,ds,qp).call(this),Te(this,ds,ax).call(this)}mutate(n,r){var i;return re(this,ns,r),(i=N(this,On))==null||i.removeObserver(this),re(this,On,N(this,uo).getMutationCache().build(N(this,uo),this.options)),N(this,On).addObserver(this),N(this,On).execute(n)}},uo=new WeakMap,co=new WeakMap,On=new WeakMap,ns=new WeakMap,ds=new WeakSet,qp=function(){var r;const n=((r=N(this,On))==null?void 0:r.state)??bI();re(this,co,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},ax=function(n){Ft.batch(()=>{var r,i,s,o,a,l,u,c;if(N(this,ns)&&this.hasListeners()){const d=N(this,co).variables,f=N(this,co).context;(n==null?void 0:n.type)==="success"?((i=(r=N(this,ns)).onSuccess)==null||i.call(r,n.data,d,f),(o=(s=N(this,ns)).onSettled)==null||o.call(s,n.data,null,d,f)):(n==null?void 0:n.type)==="error"&&((l=(a=N(this,ns)).onError)==null||l.call(a,n.error,d,f),(c=(u=N(this,ns)).onSettled)==null||c.call(u,void 0,n.error,d,f))}this.listeners.forEach(d=>{d(N(this,co))})})},NN),xI=w.createContext(void 0),Gt=e=>{const t=w.useContext(xI);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},mW=({client:e,children:t})=>(w.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),y.jsx(xI.Provider,{value:e,children:t})),wI=w.createContext(!1),gW=()=>w.useContext(wI);wI.Provider;function yW(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var bW=w.createContext(yW()),vW=()=>w.useContext(bW),xW=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},wW=e=>{w.useEffect(()=>{e.clearReset()},[e])},kW=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&e.data===void 0||fI(n,[e.error,r])),CW=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...r)=>t(n(...r)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},SW=(e,t)=>e.isLoading&&e.isFetching&&!t,EW=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,IT=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function TW(e,t,n){var d,f,h,p,m;const r=gW(),i=vW(),s=Gt(),o=s.defaultQueryOptions(e);(f=(d=s.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",CW(o),xW(o,i),wW(i);const a=!s.getQueryCache().get(o.queryHash),[l]=w.useState(()=>new t(s,o)),u=l.getOptimisticResult(o),c=!r&&e.subscribed!==!1;if(w.useSyncExternalStore(w.useCallback(g=>{const b=c?l.subscribe(Ft.batchCalls(g)):kn;return l.updateResult(),b},[l,c]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),w.useEffect(()=>{l.setOptions(o)},[o,l]),EW(o,u))throw IT(o,l,i);if(kW({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((p=(h=s.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||p.call(h,o,u),o.experimental_prefetchInRender&&!el&&SW(u,r)){const g=a?IT(o,l,i):(m=s.getQueryCache().get(o.queryHash))==null?void 0:m.promise;g==null||g.catch(kn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function ws(e,t){return TW(e,dW)}function Nn(e,t){const n=Gt(),[r]=w.useState(()=>new pW(n,e));w.useEffect(()=>{r.setOptions(e)},[r,e]);const i=w.useSyncExternalStore(w.useCallback(o=>r.subscribe(Ft.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=w.useCallback((o,a)=>{r.mutate(o,a).catch(kn)},[r]);if(i.error&&fI(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cf(){return cf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cf.apply(this,arguments)}var po;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(po||(po={}));const jT="popstate";function _W(e){e===void 0&&(e={});function t(i,s){let{pathname:o="/",search:a="",hash:l=""}=gl(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),lx("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:Um(s))}function r(i,s){xC(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return PW(t,n,r,e)}function Et(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function AW(){return Math.random().toString(36).substr(2,8)}function LT(e,t){return{usr:e.state,key:e.key,idx:t}}function lx(e,t,n,r){return n===void 0&&(n=null),cf({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?gl(t):t,{state:n,key:t&&t.key||r||AW()})}function Um(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function gl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function PW(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=po.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(cf({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=po.Pop;let g=c(),b=g==null?null:g-u;u=g,l&&l({action:a,location:m.location,delta:b})}function f(g,b){a=po.Push;let v=lx(m.location,g,b);n&&n(v,g),u=c()+1;let x=LT(v,u),k=m.createHref(v);try{o.pushState(x,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(k)}s&&l&&l({action:a,location:m.location,delta:1})}function h(g,b){a=po.Replace;let v=lx(m.location,g,b);n&&n(v,g),u=c();let x=LT(v,u),k=m.createHref(v);o.replaceState(x,"",k),s&&l&&l({action:a,location:m.location,delta:0})}function p(g){let b=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:Um(g);return v=v.replace(/ $/,"%20"),Et(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(jT,d),l=g,()=>{i.removeEventListener(jT,d),l=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let b=p(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:h,go(g){return o.go(g)}};return m}var FT;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(FT||(FT={}));function RW(e,t,n){return n===void 0&&(n="/"),NW(e,t,n,!1)}function NW(e,t,n,r){let i=typeof t=="string"?gl(t):t,s=wC(i.pathname||"/",n);if(s==null)return null;let o=kI(e);DW(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=UW(s);a=BW(o[l],u,r)}return a}function kI(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Et(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Po([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Et(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),kI(s.children,t,c,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:$W(u,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of CI(s.path))i(s,o,l)}),t}function CI(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=CI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function DW(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:zW(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const MW=/^:[\w-]+$/,OW=3,IW=2,jW=1,LW=10,FW=-2,$T=e=>e==="*";function $W(e,t){let n=e.split("/"),r=n.length;return n.some($T)&&(r+=FW),t&&(r+=IW),n.filter(i=>!$T(i)).reduce((i,s)=>i+(MW.test(s)?OW:s===""?jW:LW),r)}function zW(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function BW(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",d=zT({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=zT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Po([s,d.pathname]),pathnameBase:KW(Po([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Po([s,d.pathnameBase]))}return o}function zT(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=VW(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function VW(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),xC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function UW(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function wC(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function HW(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?gl(e):e;return{pathname:n?n.startsWith("/")?n:WW(n,t):t,search:GW(r),hash:JW(i)}}function WW(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function a1(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qW(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function kC(e,t){let n=qW(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function CC(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=gl(e):(i=cf({},e),Et(!i.pathname||!i.pathname.includes("?"),a1("?","pathname","search",i)),Et(!i.pathname||!i.pathname.includes("#"),a1("#","pathname","hash",i)),Et(!i.search||!i.search.includes("#"),a1("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?t[d]:"/"}let l=HW(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Po=e=>e.join("/").replace(/\/\/+/g,"/"),KW=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),GW=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,JW=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function QW(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const SI=["post","put","patch","delete"];new Set(SI);const YW=["get",...SI];new Set(YW);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function df(){return df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},df.apply(this,arguments)}const SC=w.createContext(null),XW=w.createContext(null),Go=w.createContext(null),D0=w.createContext(null),Jo=w.createContext({outlet:null,matches:[],isDataRoute:!1}),EI=w.createContext(null);function ZW(e,t){let{relative:n}=t===void 0?{}:t;bc()||Et(!1);let{basename:r,navigator:i}=w.useContext(Go),{hash:s,pathname:o,search:a}=_I(e,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Po([r,o])),i.createHref({pathname:l,search:a,hash:s})}function bc(){return w.useContext(D0)!=null}function yl(){return bc()||Et(!1),w.useContext(D0).location}function TI(e){w.useContext(Go).static||w.useLayoutEffect(e)}function EC(){let{isDataRoute:e}=w.useContext(Jo);return e?fq():eq()}function eq(){bc()||Et(!1);let e=w.useContext(SC),{basename:t,future:n,navigator:r}=w.useContext(Go),{matches:i}=w.useContext(Jo),{pathname:s}=yl(),o=JSON.stringify(kC(i,n.v7_relativeSplatPath)),a=w.useRef(!1);return TI(()=>{a.current=!0}),w.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=CC(u,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Po([t,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[t,r,o,s,e])}function _I(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=w.useContext(Go),{matches:i}=w.useContext(Jo),{pathname:s}=yl(),o=JSON.stringify(kC(i,r.v7_relativeSplatPath));return w.useMemo(()=>CC(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function tq(e,t){return nq(e,t)}function nq(e,t,n,r){bc()||Et(!1);let{navigator:i}=w.useContext(Go),{matches:s}=w.useContext(Jo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=yl(),c;if(t){var d;let g=typeof t=="string"?gl(t):t;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||Et(!1),c=g}else c=u;let f=c.pathname||"/",h=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=RW(e,{pathname:h}),m=aq(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Po([l,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Po([l,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?w.createElement(D0.Provider,{value:{location:df({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:po.Pop}},m):m}function rq(){let e=dq(),t=QW(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:i},n):null,null)}const iq=w.createElement(rq,null);class sq extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(Jo.Provider,{value:this.props.routeContext},w.createElement(EI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oq(e){let{routeContext:t,match:n,children:r}=e,i=w.useContext(SC);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Jo.Provider,{value:t},r)}function aq(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||Et(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let h,p=!1,m=null,g=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||iq,l&&(u<0&&f===0?(p=!0,g=null):u===f&&(p=!0,g=d.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,f+1)),v=()=>{let x;return h?x=m:p?x=g:d.route.Component?x=w.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,w.createElement(oq,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?w.createElement(sq,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var AI=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(AI||{}),Hm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Hm||{});function lq(e){let t=w.useContext(SC);return t||Et(!1),t}function uq(e){let t=w.useContext(XW);return t||Et(!1),t}function cq(e){let t=w.useContext(Jo);return t||Et(!1),t}function PI(e){let t=cq(),n=t.matches[t.matches.length-1];return n.route.id||Et(!1),n.route.id}function dq(){var e;let t=w.useContext(EI),n=uq(Hm.UseRouteError),r=PI(Hm.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function fq(){let{router:e}=lq(AI.UseNavigateStable),t=PI(Hm.UseNavigateStable),n=w.useRef(!1);return TI(()=>{n.current=!0}),w.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,df({fromRouteId:t},s)))},[e,t])}function hq(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function RI(e){let{to:t,replace:n,state:r,relative:i}=e;bc()||Et(!1);let{future:s,static:o}=w.useContext(Go),{matches:a}=w.useContext(Jo),{pathname:l}=yl(),u=EC(),c=CC(t,kC(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(c);return w.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:i}),[u,d,i,n,r]),null}function nd(e){Et(!1)}function pq(e){let{basename:t="/",children:n=null,location:r,navigationType:i=po.Pop,navigator:s,static:o=!1,future:a}=e;bc()&&Et(!1);let l=t.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:l,navigator:s,static:o,future:df({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=gl(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=w.useMemo(()=>{let g=wC(c,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:p},navigationType:i}},[l,c,d,f,h,p,i]);return m==null?null:w.createElement(Go.Provider,{value:u},w.createElement(D0.Provider,{children:n,value:m}))}function mq(e){let{children:t,location:n}=e;return tq(ux(t),n)}new Promise(()=>{});function ux(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(r,i)=>{if(!w.isValidElement(r))return;let s=[...t,i];if(r.type===w.Fragment){n.push.apply(n,ux(r.props.children,s));return}r.type!==nd&&Et(!1),!r.props.index||!r.props.children||Et(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ux(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cx(){return cx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cx.apply(this,arguments)}function gq(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function yq(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function bq(e,t){return e.button===0&&(!t||t==="_self")&&!yq(e)}const vq=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xq="6";try{window.__reactRouterVersion=xq}catch{}const wq="startTransition",BT=rk[wq];function kq(e){let{basename:t,children:n,future:r,window:i}=e,s=w.useRef();s.current==null&&(s.current=_W({window:i,v5Compat:!0}));let o=s.current,[a,l]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=w.useCallback(d=>{u&&BT?BT(()=>l(d)):l(d)},[l,u]);return w.useLayoutEffect(()=>o.listen(c),[o,c]),w.useEffect(()=>hq(r),[r]),w.createElement(pq,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Cq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VT=w.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d}=t,f=gq(t,vq),{basename:h}=w.useContext(Go),p,m=!1;if(typeof u=="string"&&Sq.test(u)&&(p=u,Cq))try{let x=new URL(window.location.href),k=u.startsWith("//")?new URL(x.protocol+u):new URL(u),S=wC(k.pathname,h);k.origin===x.origin&&S!=null?u=S+k.search+k.hash:m=!0}catch{}let g=ZW(u,{relative:i}),b=Eq(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d});function v(x){r&&r(x),x.defaultPrevented||b(x)}return w.createElement("a",cx({},f,{href:p||g,onClick:m||s?r:v,ref:n,target:l}))});var UT;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(UT||(UT={}));var HT;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(HT||(HT={}));function Eq(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=t===void 0?{}:t,l=EC(),u=yl(),c=_I(e,{relative:o});return w.useCallback(d=>{if(bq(d,n)){d.preventDefault();let f=r!==void 0?r:Um(u)===Um(c);l(e,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,r,i,n,e,s,o,a])}var ki=function(){return ki=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ki.apply(this,arguments)};function vc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Tq(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}function _q(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}const Aq=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class TC extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Pq extends TC{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class WT extends TC{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class qT extends TC{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var dx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(dx||(dx={}));class Rq{constructor(t,{headers:n={},customFetch:r,region:i=dx.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=Aq(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Tq(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:u,signal:c,timeout:d}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${n}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let m;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(f["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(f["Content-Type"]="application/json",m=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?m=JSON.stringify(u):m=u;let g=c;d&&(o=new AbortController,s=setTimeout(()=>o.abort(),d),c?(g=o.signal,c.addEventListener("abort",()=>o.abort())):g=o.signal);const b=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:m,signal:g}).catch(S=>{throw new Pq(S)}),v=b.headers.get("x-relay-error");if(v&&v==="true")throw new WT(b);if(!b.ok)throw new qT(b);let x=((i=b.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),k;return x==="application/json"?k=yield b.json():x==="application/octet-stream"||x==="application/pdf"?k=yield b.blob():x==="text/event-stream"?k=b:x==="multipart/form-data"?k=yield b.formData():k=yield b.text(),{data:k,error:null,response:b}}catch(a){return{data:null,error:a,response:a instanceof qT||a instanceof WT?a.context:void 0}}finally{s&&clearTimeout(s)}})}}var Nq=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Dq=class{constructor(e){var t,n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=e.urlLengthLimit)!==null&&r!==void 0?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,l=null,u=s.status,c=s.statusText;if(s.ok){var d,f;if(n.method!=="HEAD"){var h;const b=await s.text();b===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((h=n.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?a=b:a=JSON.parse(b))}const m=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),g=(f=s.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");m&&g&&g.length>1&&(l=parseInt(g[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,c="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var p;const m=await s.text();try{o=JSON.parse(m),Array.isArray(o)&&s.status===404&&(a=[],o=null,u=200,c="OK")}catch{s.status===404&&m===""?(u=204,c="No Content"):o={message:m}}if(o&&n.isMaybeSingle&&(!(o==null||(p=o.details)===null||p===void 0)&&p.includes("0 rows"))&&(o=null,u=200,c="OK"),o&&n.shouldThrowOnError)throw new Nq(o)}return{error:o,data:a,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="",l="",u="";const c=s==null?void 0:s.cause;if(c){var d,f,h,p;const b=(d=c==null?void 0:c.message)!==null&&d!==void 0?d:"",v=(f=c==null?void 0:c.code)!==null&&f!==void 0?f:"";a=`${(h=s==null?void 0:s.name)!==null&&h!==void 0?h:"FetchError"}: ${s==null?void 0:s.message}`,a+=`

Caused by: ${(p=c==null?void 0:c.name)!==null&&p!==void 0?p:"Error"}: ${b}`,v&&(a+=` (${v})`),c!=null&&c.stack&&(a+=`
${c.stack}`)}else{var m;a=(m=s==null?void 0:s.stack)!==null&&m!==void 0?m:""}const g=this.url.toString().length;return(s==null?void 0:s.name)==="AbortError"||(s==null?void 0:s.code)==="ABORT_ERR"?(u="",l="Request was aborted (timeout or manual cancellation)",g>this.urlLengthLimit&&(l+=`. Note: Your request URL is ${g} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((c==null?void 0:c.name)==="HeadersOverflowError"||(c==null?void 0:c.code)==="UND_ERR_HEADERS_OVERFLOW")&&(u="",l="HTTP headers exceeded server limits (typically 16KB)",g>this.urlLengthLimit&&(l+=`. Your request URL is ${g} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:a,hint:l,code:u},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},Mq=class extends Dq{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const KT=new RegExp("[,()]");var jl=class extends Mq{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&KT.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&KT.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},Oq=class{constructor(e,{headers:t={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!s?"":(u==='"'&&(s=!s),u)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new jl({method:i,url:a,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const i="POST",{url:s,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),n||o.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);s.searchParams.set("columns",l.join(","))}}return new jl({method:i,url:s,headers:o,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),r&&l.append("Prefer",`count=${r}`),i||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);a.searchParams.set("columns",c.join(","))}}return new jl({method:o,url:a,headers:l,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;const r="PATCH",{url:i,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new jl({method:r,url:i,headers:s,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new jl({method:n,url:r,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function ff(e){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ff(e)}function Iq(e,t){if(ff(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jq(e){var t=Iq(e,"string");return ff(t)=="symbol"?t:t+""}function Lq(e,t,n){return(t=jq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GT(Object(n),!0).forEach(function(r){Lq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Fq=class NI{constructor(t,{headers:n={},schema:r,fetch:i,timeout:s,urlLengthLimit:o=8e3}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=o;const a=i??globalThis.fetch;s!==void 0&&s>0?this.fetch=(l,u)=>{const c=new AbortController,d=setTimeout(()=>c.abort(),s),f=u==null?void 0:u.signal;if(f){if(f.aborted)return clearTimeout(d),a(l,u);const h=()=>{clearTimeout(d),c.abort()};return f.addEventListener("abort",h,{once:!0}),a(l,qh(qh({},u),{},{signal:c.signal})).finally(()=>{clearTimeout(d),f.removeEventListener("abort",h)})}return a(l,qh(qh({},u),{},{signal:c.signal})).finally(()=>clearTimeout(d))}:this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Oq(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new NI(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;const c=h=>h!==null&&typeof h=="object"&&(!Array.isArray(h)||h.some(c)),d=r&&Object.values(n).some(c);d?(a="POST",u=n):r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{l.searchParams.append(h,p)})):(a="POST",u=n);const f=new Headers(this.headers);return d?f.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&f.set("Prefer",`count=${s}`),new jl({method:a,url:l,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class $q{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const zq="2.95.3",Bq=`realtime-js/${zq}`,Vq="1.0.0",DI="2.0.0",JT=DI,fx=1e4,Uq=1e3,Hq=100;var Us;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Us||(Us={}));var It;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(It||(It={}));var Gr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Gr||(Gr={}));var hx;(function(e){e.websocket="websocket"})(hx||(hx={}));var fa;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fa||(fa={}));class Wq{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,n,r){var i,s;const o=t.topic,a=(i=t.ref)!==null&&i!==void 0?i:"",l=(s=t.join_ref)!==null&&s!==void 0?s:"",u=t.payload.event,c=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+d.length,h=new ArrayBuffer(this.HEADER_LENGTH+f);let p=new DataView(h),m=0;p.setUint8(m++,this.KINDS.userBroadcastPush),p.setUint8(m++,l.length),p.setUint8(m++,a.length),p.setUint8(m++,o.length),p.setUint8(m++,u.length),p.setUint8(m++,d.length),p.setUint8(m++,n),Array.from(l,b=>p.setUint8(m++,b.charCodeAt(0))),Array.from(a,b=>p.setUint8(m++,b.charCodeAt(0))),Array.from(o,b=>p.setUint8(m++,b.charCodeAt(0))),Array.from(u,b=>p.setUint8(m++,b.charCodeAt(0))),Array.from(d,b=>p.setUint8(m++,b.charCodeAt(0)));var g=new Uint8Array(h.byteLength+r.byteLength);return g.set(new Uint8Array(h),0),g.set(new Uint8Array(r),h.byteLength),g.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(t.slice(l,l+i));l=l+i;const c=r.decode(t.slice(l,l+s));l=l+s;const d=r.decode(t.slice(l,l+o));l=l+o;const f=t.slice(l,t.byteLength),h=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,p={type:this.BROADCAST_EVENT,event:c,payload:h};return o>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class MI{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ge;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ge||(Ge={}));const QT=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((s,o)=>(s[o]=qq(o,e,t,i),s),{}):{}},qq=(e,t,n,r)=>{const i=t.find(a=>a.name===e),s=i==null?void 0:i.type,o=n[e];return s&&!r.includes(s)?OI(s,o):px(o)},OI=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Qq(t,n)}switch(e){case Ge.bool:return Kq(t);case Ge.float4:case Ge.float8:case Ge.int2:case Ge.int4:case Ge.int8:case Ge.numeric:case Ge.oid:return Gq(t);case Ge.json:case Ge.jsonb:return Jq(t);case Ge.timestamp:return Yq(t);case Ge.abstime:case Ge.date:case Ge.daterange:case Ge.int4range:case Ge.int8range:case Ge.money:case Ge.reltime:case Ge.text:case Ge.time:case Ge.timestamptz:case Ge.timetz:case Ge.tsrange:case Ge.tstzrange:return px(t);default:return px(t)}},px=e=>e,Kq=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Gq=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Jq=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Qq=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>OI(t,a))}return e},Yq=e=>typeof e=="string"?e.replace(" ","T"):e,II=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class l1{constructor(t,n,r={},i=fx){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var YT;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(YT||(YT={}));class wd{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wd.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=wd.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=wd.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=s[u];if(d){const f=c.map(g=>g.presence_ref),h=d.map(g=>g.presence_ref),p=c.filter(g=>h.indexOf(g.presence_ref)<0),m=d.filter(g=>f.indexOf(g.presence_ref)<0);p.length>0&&(a[u]=p),m.length>0&&(l[u]=m)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const d=t[a].map(h=>h.presence_ref),f=c.filter(h=>d.indexOf(h.presence_ref)<0);t[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),t[a]=u,i(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var XT;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(XT||(XT={}));var kd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(kd||(kd={}));var Xi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Xi||(Xi={}));class iu{constructor(t,n={config:{}},r){var i,s;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=It.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new l1(this,Gr.join,this.params,this.timeout),this.rejoinTimer=new MI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=It.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=It.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=It.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=It.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=It.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new wd(this),this.broadcastEndpointURL=II(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==It.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[kd.PRESENCE]&&this.bindings[kd.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(Xi.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(Xi.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){t==null||t(Xi.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,b=[];for(let v=0;v<g;v++){const x=m[v],{filter:{event:k,schema:S,table:C,filter:E}}=x,P=h&&h[v];if(P&&P.event===k&&iu.isFilterValueEqual(P.schema,S)&&iu.isFilterValueEqual(P.table,C)&&iu.isFilterValueEqual(P.filter,E))b.push(Object.assign(Object.assign({},x),{id:P.id}));else{this.unsubscribe(),this.state=It.errored,t==null||t(Xi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Xi.SUBSCRIBED);return}}).receive("error",h=>{this.state=It.errored,t==null||t(Xi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Xi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===It.joined&&t===kd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=It.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new l1(this,Gr.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=It.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new l1(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Hq){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Gr;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var p,m,g;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(m=h.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(h=>h.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(h=>{var p,m,g,b,v,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const k=h.id,S=(p=h.filter)===null||p===void 0?void 0:p.event;return k&&((m=n.ids)===null||m===void 0?void 0:m.includes(k))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((g=n.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const k=(v=(b=h==null?void 0:h.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return k==="*"||k===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:m,table:g,commit_timestamp:b,type:v,errors:x}=p;f=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:b,eventType:v,new:{},old:{},errors:x}),this._getPayloadRecords(p))}h.callback(f,r)})}_isClosed(){return this.state===It.closed}_isJoined(){return this.state===It.joined}_isJoining(){return this.state===It.joining}_isLeaving(){return this.state===It.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&iu.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Gr.close,{},t)}_onError(t){this._on(Gr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=It.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=QT(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=QT(t.columns,t.old_record)),n}}const u1=()=>{},Kh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Xq=[1e3,2e3,5e3,1e4],Zq=1e4,eK=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class tK{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fx,this.transport=null,this.heartbeatIntervalMs=Kh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=u1,this.ref=0,this.reconnectTimer=null,this.vsn=JT,this.logger=u1,this.conn=null,this.sendBuffer=[],this.serializer=new Wq,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${hx.websocket}`,this.httpEndpoint=II(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$q.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return n==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Us.connecting:return fa.Connecting;case Us.open:return fa.Open;case Us.closing:return fa.Closing;default:return fa.Closed}}isConnected(){return this.connectionState()===fa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new iu(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Uq,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Kh.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Us.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Us.open||this.conn.readyState===Us.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Gr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([eK],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:Bq};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(Gr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new MI(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Kh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,o,a,l,u,c,d,f,h;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:fx,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Kh.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:u1,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:JT,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:p=>Xq[p-1]||Zq,this.vsn){case Vq:this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(p,m)=>m(JSON.stringify(p)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(p,m)=>m(JSON.parse(p));break;case DI:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var hf=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function nK(e,t,n){const r=new URL(t,e);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function rK(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function iK(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){const a=nK(e.baseUrl,r,i),l=await rK(e.auth),u=await t(a,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...o},body:s?JSON.stringify(s):void 0}),c=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),f=d&&c?JSON.parse(c):c;if(!u.ok){const h=d?f:void 0,p=h==null?void 0:h.error;throw new hf((p==null?void 0:p.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:p==null?void 0:p.type,icebergCode:p==null?void 0:p.code,details:h})}return{status:u.status,headers:u.headers,data:f}}}}function Gh(e){return e.join("")}var sK=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Gh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gh(e.namespace)}`}),!0}catch(t){if(t instanceof hf&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof hf&&n.status===409)return;throw n}}};function Cl(e){return e.join("")}var oK=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cl(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Cl(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Cl(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Cl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cl(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Cl(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof hf&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof hf&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},aK=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=iK({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new sK(this.client,t),this.tableOps=new oK(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},M0=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function O0(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Jh=class extends M0{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},jI=class extends M0{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const lK=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),uK=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},mx=e=>{if(Array.isArray(e))return e.map(n=>mx(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=mx(r)}),t},cK=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function pf(e){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pf(e)}function dK(e,t){if(pf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fK(e){var t=dK(e,"string");return pf(t)=="symbol"?t:t+""}function hK(e,t,n){return(t=fK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZT(Object(n),!0).forEach(function(r){hK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const e_=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},pK=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e,s=i.status||500;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new Jh(e_(o),s,a,r))}).catch(()=>{if(r==="vectors"){const o=s+"";t(new Jh(i.statusText||`HTTP ${s} error`,s,o,r))}else{const o=s+"";t(new Jh(i.statusText||`HTTP ${s} error`,s,o,r))}});else{const o=s+"";t(new Jh(i.statusText||`HTTP ${s} error`,s,o,r))}}else t(new jI(e_(e),e,r))},mK=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!r?ge(ge({},i),n):(uK(r)?(i.headers=ge({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),ge(ge({},i),n))};async function $c(e,t,n,r,i,s,o){return new Promise((a,l)=>{e(n,mK(t,r,i,s)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;if(o==="vectors"){const c=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!c||!c.includes("application/json"))return{}}return u.json()}).then(u=>a(u)).catch(u=>pK(u,l,r,o))})}function LI(e="storage"){return{get:async(t,n,r,i)=>$c(t,"GET",n,r,i,void 0,e),post:async(t,n,r,i,s)=>$c(t,"POST",n,i,s,r,e),put:async(t,n,r,i,s)=>$c(t,"PUT",n,i,s,r,e),head:async(t,n,r,i)=>$c(t,"HEAD",n,ge(ge({},r),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,n,r,i,s)=>$c(t,"DELETE",n,i,s,r,e)}}const gK=LI("storage"),{get:mf,post:Hr,put:gx,head:yK,remove:_C}=gK,Zn=LI("vectors");var xc=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=lK(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(O0(n))return{data:null,error:n};throw n}}},bK=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(O0(t))return{data:null,error:t};throw t}}};let FI;FI=Symbol.toStringTag;var vK=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[FI]="BlobDownloadBuilder",this.promise=null}asStream(){return new bK(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(O0(t))return{data:null,error:t};throw t}}};const xK={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},t_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var wK=class extends xc{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var i=this;return i.handleOperation(async()=>{let s;const o=ge(ge({},t_),r);let a=ge(ge({},i.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=ge(ge({},a),r.headers));const u=i._removeEmptyFolders(t),c=i._getFinalPath(u),d=await(e=="PUT"?gx:Hr)(i.fetch,`${i.url}/object/${c}`,s,ge({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:d.Id,fullPath:d.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var i=this;const s=i._removeEmptyFolders(e),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",t),i.handleOperation(async()=>{let l;const u=ge({upsert:t_.upsert},r),c=ge(ge({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{path:s,fullPath:(await gx(i.fetch,a.toString(),l,{headers:c})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const i=ge({},n.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=await Hr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(n.url+s.url),a=o.searchParams.get("token");if(!a)throw new M0("No token returned by API");return{signedUrl:o.toString(),path:e,token:a}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await Hr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await Hr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(e),s=await Hr(r.fetch,`${r.url}/object/sign/${i}`,ge({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const i=await Hr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(o=>ge(ge({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null}))})}download(e,t,n){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=i?`?${i}`:"",o=this._getFinalPath(e),a=()=>mf(this.fetch,`${this.url}/${r}/${o}${s}`,{headers:this.headers,noResolveJson:!0},n);return new vK(a,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>mx(await mf(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await yK(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(O0(r)&&r instanceof jI){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const s=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${a}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await _C(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const i=ge(ge(ge({},xK),t),{},{prefix:e||""});return await Hr(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=ge({},e);return await Hr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const kK="2.95.3",ih={"X-Client-Info":`storage-js/${kK}`};var CK=class extends xc{constructor(e,t={},n,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const s=i.href.replace(/\/$/,""),o=ge(ge({},ih),t);super(s,o,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await mf(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await mf(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await Hr(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await gx(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Hr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await _C(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},SK=class extends xc{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=ge(ge({},ih),t);super(r,i,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Hr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await mf(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await _C(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!cK(e))throw new M0("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new aK({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}},EK=class extends xc{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=ge(ge({},ih),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Zn.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await Zn.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Zn.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await Zn.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},TK=class extends xc{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=ge(ge({},ih),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Zn.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Zn.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Zn.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Zn.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Zn.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},_K=class extends xc{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=ge(ge({},ih),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Zn.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Zn.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Zn.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Zn.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},AK=class extends _K{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new PK(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},PK=class extends EK{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,ge(ge({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,ge(ge({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new RK(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},RK=class extends TK{constructor(e,t,n,r,i){super(e,t,i),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,ge(ge({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,ge(ge({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,ge(ge({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,ge(ge({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,ge(ge({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},NK=class extends CK{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new wK(this.url,this.headers,e,this.fetch)}get vectors(){return new AK(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new SK(this.url+"/iceberg",this.headers,this.fetch)}};const $I="2.95.3",Ll=30*1e3,yx=3,c1=yx*Ll,DK="http://localhost:9999",MK="supabase.auth.token",OK={"X-Client-Info":`gotrue-js/${$I}`},bx="X-Supabase-Api-Version",zI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},IK=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jK=10*60*1e3;class gf extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function le(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class LK extends gf{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function FK(e){return le(e)&&e.name==="AuthApiError"}class ha extends gf{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ks extends gf{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Jn extends ks{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function d1(e){return le(e)&&e.name==="AuthSessionMissingError"}class Sl extends ks{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Qh extends ks{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Yh extends ks{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $K(e){return le(e)&&e.name==="AuthImplicitGrantRedirectError"}class n_ extends ks{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zK extends ks{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class vx extends ks{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function f1(e){return le(e)&&e.name==="AuthRetryableFetchError"}class r_ extends ks{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class xx extends ks{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),i_=` 	
\r=`.split(""),BK=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<i_.length;t+=1)e[i_[t].charCodeAt(0)]=-2;for(let t=0;t<Wm.length;t+=1)e[Wm[t].charCodeAt(0)]=t;return e})();function s_(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Wm[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Wm[r]),t.queuedBits-=6}}function BI(e,t,n){const r=BK[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function o_(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{HK(o,r,n)};for(let o=0;o<e.length;o+=1)BI(e.charCodeAt(o),i,s);return t.join("")}function VK(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function UK(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}VK(r,t)}}function HK(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function vu(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)BI(e.charCodeAt(i),n,r);return new Uint8Array(t)}function WK(e){const t=[];return UK(e,n=>t.push(n)),new Uint8Array(t)}function ka(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>s_(i,n,r)),s_(null,n,r),t.join("")}function qK(e){return Math.round(Date.now()/1e3)+e}function KK(){return Symbol("auth-callback")}const Qt=()=>typeof window<"u"&&typeof document<"u",ra={tested:!1,writable:!1},VI=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ra.tested)return ra.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ra.tested=!0,ra.writable=!0}catch{ra.tested=!0,ra.writable=!1}return ra.writable};function GK(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const UI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),JK=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fl=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ia=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Jt=async(e,t)=>{await e.removeItem(t)};class I0{constructor(){this.promise=new I0.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}I0.promiseConstructor=Promise;function Xh(e){const t=e.split(".");if(t.length!==3)throw new xx("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!IK.test(t[r]))throw new xx("JWT not in base64url format");return{header:JSON.parse(o_(t[0])),payload:JSON.parse(o_(t[1])),signature:vu(t[2]),raw:{header:t[0],payload:t[1]}}}async function QK(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function YK(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){i(o);return}}})()})}function XK(e){return("0"+e.toString(16)).substr(-2)}function ZK(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,XK).join("")}async function eG(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function tG(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await eG(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function El(e,t,n=!1){const r=ZK();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Fl(e,`${t}-code-verifier`,i);const s=await tG(r);return[s,r===s?"plain":"s256"]}const nG=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rG(e){const t=e.headers.get(bx);if(!t||!t.match(nG))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function iG(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function sG(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const oG=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Tl(e){if(!oG.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function h1(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function aG(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function a_(e){return JSON.parse(JSON.stringify(e))}const ca=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lG=[502,503,504];async function l_(e){var t;if(!JK(e))throw new vx(ca(e),0);if(lG.includes(e.status))throw new vx(ca(e),e.status);let n;try{n=await e.json()}catch(s){throw new ha(ca(s),s)}let r;const i=rG(e);if(i&&i.getTime()>=zI["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new r_(ca(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Jn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new r_(ca(n),e.status,n.weak_password.reasons);throw new LK(ca(n),e.status||500,r)}const uG=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function me(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[bx]||(s[bx]=zI["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await cG(e,t,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function cG(e,t,n,r,i,s){const o=uG(t,r,i,s);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new vx(ca(l),0)}if(a.ok||await l_(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await l_(l)}}function Br(e){var t;let n=null;hG(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=qK(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function u_(e){const t=Br(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Qs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function dG(e){return{data:e,error:null}}function fG(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,o=vc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function c_(e){return e}function hG(e){return e.access_token&&e.refresh_token&&e.expires_in}const p1=["global","local","others"];class pG{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=UI(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=p1[0]){if(p1.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${p1.join(", ")}`);try{return await me(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await me(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Qs})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=vc(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:fG,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await me(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Qs})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:c_});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);u[`${g}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(le(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Tl(t);try{return await me(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Qs})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Tl(t);try{return await me(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Qs})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Tl(t);try{return await me(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Qs})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Tl(t.userId);try{const{data:n,error:r}=await me(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Tl(t.userId),Tl(t.id);try{return{data:await me(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:c_});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);u[`${g}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(le(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await me(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}}function d_(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const _l={debug:!!(globalThis&&VI()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class HI extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class mG extends HI{}async function gG(e,t,n){_l.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),_l.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){_l.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{_l.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw _l.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new mG(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(_l.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function yG(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function WI(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function bG(e){return parseInt(e,16)}function vG(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function xG(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:d,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const h=WI(e.address),p=c?`${c}://${r}`:r,m=e.statement?`${e.statement}
`:"",g=`${p} wants you to sign in with your Ethereum account:
${h}

${m}`;let b=`URI: ${d}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(b+=`
Expiration Time: ${i.toISOString()}`),a&&(b+=`
Not Before: ${a.toISOString()}`),l&&(b+=`
Request ID: ${l}`),u){let v=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);v+=`
- ${x}`}b+=v}return`${g}
${b}`}class Rt extends Error{constructor({message:t,code:n,cause:r,name:i}){var s;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class qm extends Rt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function wG({error:e,options:t}){var n,r,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Rt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(qI(o)){if(s.rp.id!==o)return new Rt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function kG({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Rt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(qI(r)){if(n.rpId!==r)return new Rt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class CG{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const SG=new CG;function EG(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=vc(e,["challenge","user","excludeCredentials"]),s=vu(t).buffer,o=Object.assign(Object.assign({},n),{id:vu(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:vu(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function TG(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=vc(e,["challenge","allowCredentials"]),i=vu(t).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:vu(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function _G(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:ka(new Uint8Array(e.response.attestationObject)),clientDataJSON:ka(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function AG(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ka(new Uint8Array(i.authenticatorData)),clientDataJSON:ka(new Uint8Array(i.clientDataJSON)),signature:ka(new Uint8Array(i.signature)),userHandle:i.userHandle?ka(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function qI(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function f_(){var e,t;return!!(Qt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function PG(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new qm("Browser returned unexpected credential type",t)}:{data:null,error:new qm("Empty credential response",t)}}catch(t){return{data:null,error:wG({error:t,options:e})}}}async function RG(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new qm("Browser returned unexpected credential type",t)}:{data:null,error:new qm("Empty credential response",t)}}catch(t){return{data:null,error:kG({error:t,options:e})}}}const NG={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},DG={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Km(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(t(o)){const a=r[s];t(a)?r[s]=Km(a,o):r[s]=Km(o)}else r[s]=o}return r}function MG(e,t){return Km(NG,e,t||{})}function OG(e,t){return Km(DG,e,t||{})}class IG{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},s){var o;try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:l};const u=i??SG.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;if(!c.name){const d=r;if(d)c.name=`${c.id}:${d}`;else{const h=(await this.client.getUser()).data.user,p=((o=h==null?void 0:h.user_metadata)===null||o===void 0?void 0:o.name)||(h==null?void 0:h.email)||(h==null?void 0:h.id)||"User";c.name=`${c.id}:${p}`}}c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=MG(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:f}=await PG({publicKey:c,signal:u});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const c=OG(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:f}=await RG(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:u}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(a){return le(a)?{data:null,error:a}:{data:null,error:new ha("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new gf("rpId is required for WebAuthn authentication")};try{if(!f_())return{data:null,error:new ha("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new ha("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new gf("rpId is required for WebAuthn registration")};try{if(!f_())return{data:null,error:new ha("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new ha("Unexpected error in register",o)}}}}yG();const jG={url:DK,storageKey:MK,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:OK,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function h_(e,t,n){return await n()}const Al={};class yf{get jwks(){var t,n;return(n=(t=Al[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Al[this.storageKey]=Object.assign(Object.assign({},Al[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Al[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Al[this.storageKey]=Object.assign(Object.assign({},Al[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},jG),t);if(this.storageKey=s.storageKey,this.instanceID=(n=yf.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,yf.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Qt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new pG({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=UI(s.fetch),this.lock=s.lock||h_,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Qt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=gG:this.lock=h_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new IG(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:VI()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=d_(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=d_(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${$I}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Qt()&&(n=GK(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Qt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),$K(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return le(n)?this._returnResult({error:n}):this._returnResult({error:new ha("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Br}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:c,password:d,options:f}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await El(this.storage,this.storageKey)),s=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},xform:Br})}else if("phone"in t){const{phone:c,password:d,options:f}=t;s=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Br})}else throw new Qh("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return await Jt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:o,options:a}=t;n=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:u_})}else if("phone"in t){const{phone:s,password:o,options:a}=t;n=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:u_})}else throw new Qh("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Sl;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,s,o,a,l,u,c,d,f;let h,p;if("message"in t)h=t.message,p=t.signature;else{const{chain:m,wallet:g,statement:b,options:v}=t;let x;if(Qt())if(typeof g=="object")x=g;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")x=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=g}const k=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href),S=await x.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=WI(S[0]);let E=(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const R=await x.request({method:"eth_chainId"});E=bG(R)}const P={domain:k.host,address:C,statement:b,uri:k.href,version:"1",chainId:E,nonce:(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.resources};h=xG(P),p=await x.request({method:"personal_sign",params:[vG(h),C]})}try{const{data:m,error:g}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:p},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Br});if(g)throw g;if(!m||!m.session||!m.user){const b=new Sl;return this._returnResult({data:{user:null,session:null},error:b})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:g})}catch(m){if(le(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(t){var n,r,i,s,o,a,l,u,c,d,f,h;let p,m;if("message"in t)p=t.message,m=t.signature;else{const{chain:g,wallet:b,statement:v,options:x}=t;let k;if(Qt())if(typeof b=="object")k=b;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))k=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=b}const S=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const C=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),m=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${S.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=x==null?void 0:x.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(c=x==null?void 0:x.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await k.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=C}}try{const{data:g,error:b}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:ka(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Br});if(b)throw b;if(!g||!g.session||!g.user){const v=new Sl;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:b})}catch(g){if(le(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(t){const n=await ia(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new zK;const{data:s,error:o}=await me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Br});if(await Jt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new Sl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),le(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=t,a=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Br}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new Sl;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,s,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await El(this.storage,this.storageKey));const{error:d}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new Qh("You must provide either an email or phone number.")}catch(a){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),le(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Br});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await El(this.storage,this.storageKey));const u=await me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:dG});return!((s=u.data)===null||s===void 0)&&s.url&&Qt()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),le(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Jn;const{error:i}=await me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(le(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:o}=await me(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:o,error:a}=await me(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Qh("You must provide either an email or phone number and a type")}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ia(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<c1:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await ia(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=h1()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=aG(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Qs}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Jn}:await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Qs})})}catch(n){if(le(n))return d1(n)&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Jn;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await El(this.storage,this.storageKey));const{data:u,error:c}=await me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Qs});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),le(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Jn;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=Xh(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});s={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(le(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Jn;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Qt())throw new Yh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Yh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new n_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new n_("No code detected.");const{data:v,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!s||!a||!o||!u)throw new Yh("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const h=f-c;h*1e3<=Ll&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=f-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,c);const{data:m,error:g}=await this._getUser(s);if(g)throw g;const b={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:t.type},error:null})}catch(r){if(le(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ia(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s&&!d1(s))return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(FK(a)&&(a.status===404||a.status===401||a.status===403)||d1(a)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=KK(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await El(this.storage,this.storageKey,!0));try{return await me(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),le(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:d,error:f}=s;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",h,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Qt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(le(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:u,nonce:c}=t,d=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Br}),{data:f,error:h}=d;return h?this._returnResult({data:{user:null,session:null},error:h}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Sl}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:h}))}catch(i){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await me(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await YK(async i=>(i>0&&await QK(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Br})),(i,s)=>{const o=200*Math.pow(2,i);return s&&f1(s)&&Date.now()+o-r<Ll})}catch(r){if(this._debug(n,"error",r),le(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Qt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ia(this.storage,this.storageKey);if(i&&this.userStorage){let o=await ia(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Fl(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:h1()}else if(i&&!i.user&&!i.user){const o=await ia(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Jt(this.storage,this.storageKey+"-user"),await Fl(this.storage,this.storageKey,i)):i.user=h1()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<c1;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${c1}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),f1(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Jn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new I0;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new Jn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),le(s)){const o={data:null,error:s};return f1(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Jt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Fl(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=a_(i);await Fl(this.storage,this.storageKey,s)}else{const i=a_(n);await Fl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Jt(this.storage,this.storageKey),await Jt(this.storage,this.storageKey+"-code-verifier"),await Jt(this.storage,this.storageKey+"-user"),this.userStorage&&await Jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ll);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Ll);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ll}ms, refresh threshold is ${yx} ticks`),i<=yx&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof HI)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await El(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await me(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await me(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?_G(t.webauthn.credential_response):AG(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:EG(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:TG(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,r,i,s;if(t)try{const{payload:h}=Xh(t);let p=null;h.aal&&(p=h.aal);let m=p;const{data:{user:g},error:b}=await this.getUser(t);if(b)return this._returnResult({data:null,error:b});((r=(n=g==null?void 0:g.factors)===null||n===void 0?void 0:n.filter(k=>k.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(m="aal2");const x=h.amr||[];return{data:{currentLevel:p,nextLevel:m,currentAuthenticationMethods:x},error:null}}catch(h){if(le(h))return this._returnResult({data:null,error:h});throw h}const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Xh(o.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((s=(i=o.user.factors)===null||i===void 0?void 0:i.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await me(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Jn})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Jn});const o=await me(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Qt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Jn});const o=await me(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Qt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await me(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Jn})})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await me(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Jn})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+jK>i)return r;const{data:s,error:o}=await me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:h,error:p}=await this.getSession();if(p||!h.session)return this._returnResult({data:null,error:p});r=h.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=Xh(r);n!=null&&n.allowExpired||iG(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:s,header:i,signature:o},error:null}}const c=sG(i.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,WK(`${a}.${l}`)))throw new xx("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}}yf.nextInstanceID={};const LG=yf,FG="2.95.3";let rd="";typeof Deno<"u"?rd="deno":typeof document<"u"?rd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rd="react-native":rd="node";const $G={"X-Client-Info":`supabase-js-${rd}/${FG}`},zG={headers:$G},BG={schema:"public"},VG={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},UG={};function bf(e){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bf(e)}function HG(e,t){if(bf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WG(e){var t=HG(e,"string");return bf(t)=="symbol"?t:t+""}function qG(e,t,n){return(t=WG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p_(Object(n),!0).forEach(function(r){qG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const KG=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),GG=()=>Headers,JG=(e,t,n)=>{const r=KG(n),i=GG();return async(s,o)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,vt(vt({},o),{},{headers:u}))}};function QG(e){return e.endsWith("/")?e:e+"/"}function YG(e,t){var n,r;const{db:i,auth:s,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:d}=t,f={db:vt(vt({},l),i),auth:vt(vt({},u),s),realtime:vt(vt({},c),o),storage:{},global:vt(vt(vt({},d),a),{},{headers:vt(vt({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function XG(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(QG(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var ZG=class extends LG{constructor(e){super(e)}},eJ=class{constructor(e,t,n){var r,i;this.supabaseUrl=e,this.supabaseKey=t;const s=XG(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:BG,realtime:UG,auth:vt(vt({},VG),{},{storageKey:o}),global:zG},l=YG(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=JG(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(vt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new Fq(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new NK(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Rq(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:l,throwOnError:u},c,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ZG({url:this.authUrl.href,headers:vt(vt({},f),c),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new tK(this.realtimeUrl.href,vt(vt({},e),{},{params:vt(vt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const tJ=(e,t,n)=>new eJ(e,t,n);function nJ(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}nJ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const rJ="https://orflcgfllgepvemxusbx.supabase.co",iJ=`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9yZmxjZ2ZsbGdlcHZlbXh1c2J4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzMTMzMDksImV4cCI6MjA4Njg4OTMwOX0.CJC4UEPS0ZhO7iChb1j3HgXUTV5qdmCt-s1jm1TMYz0\r
`,ce=tJ(rJ,iJ),KI=w.createContext(void 0);function sJ({children:e}){const[t,n]=w.useState(null),[r,i]=w.useState(null),[s,o]=w.useState(null),[a,l]=w.useState(!0);w.useEffect(()=>{let m=!1;ce.auth.getSession().then(({data:{session:b}})=>{m=!0,o(b),n((b==null?void 0:b.user)??null),b!=null&&b.user?u(b.user.id):l(!1)});const{data:{subscription:g}}=ce.auth.onAuthStateChange((b,v)=>{m&&(o(v),n((v==null?void 0:v.user)??null),v!=null&&v.user?u(v.user.id):(i(null),l(!1)))});return()=>g.unsubscribe()},[]);async function u(m){const{data:g}=await ce.from("profiles").select("*").eq("id",m).single();i(g),l(!1)}async function c(m,g){const{error:b}=await ce.auth.signInWithPassword({email:m,password:g});return{error:b}}async function d(m,g,b){const{error:v}=await ce.auth.signUp({email:m,password:g,options:{data:{full_name:b}}});return{error:v}}async function f(){await ce.auth.signOut()}async function h(m){const{error:g}=await ce.auth.resetPasswordForEmail(m,{redirectTo:`${window.location.origin}/reset-password`});return{error:g}}async function p(m){const{error:g}=await ce.auth.updateUser({password:m});return{error:g}}return y.jsx(KI.Provider,{value:{user:t,profile:r,session:s,loading:a,signIn:c,signUp:d,signOut:f,resetPassword:h,updatePassword:p},children:e})}function j0(){const e=w.useContext(KI);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const AC=w.createContext({});function PC(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const GI=typeof window<"u",JI=GI?w.useLayoutEffect:w.useEffect,L0=w.createContext(null);function RC(e,t){e.indexOf(t)===-1&&e.push(t)}function Gm(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Mi=(e,t,n)=>n>t?t:n<e?e:n;let F0=()=>{},Gu=()=>{};const bs={},QI=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function YI(e){return typeof e=="object"&&e!==null}const XI=e=>/^0[^.\s]+$/u.test(e);function NC(e){let t;return()=>(t===void 0&&(t=e()),t)}const Tr=e=>e,oJ=(e,t)=>n=>t(e(n)),sh=(...e)=>e.reduce(oJ),vf=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class DC{constructor(){this.subscriptions=[]}add(t){return RC(this.subscriptions,t),()=>Gm(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _r=e=>e*1e3,Cr=e=>e/1e3;function ZI(e,t){return t?e*(1e3/t):0}const e4=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,aJ=1e-7,lJ=12;function uJ(e,t,n,r,i){let s,o,a=0;do o=t+(n-t)/2,s=e4(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>aJ&&++a<lJ);return o}function oh(e,t,n,r){if(e===t&&n===r)return Tr;const i=s=>uJ(s,0,1,e,n);return s=>s===0||s===1?s:e4(i(s),t,r)}const t4=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,n4=e=>t=>1-e(1-t),r4=oh(.33,1.53,.69,.99),MC=n4(r4),i4=t4(MC),s4=e=>(e*=2)<1?.5*MC(e):.5*(2-Math.pow(2,-10*(e-1))),OC=e=>1-Math.sin(Math.acos(e)),o4=n4(OC),a4=t4(OC),cJ=oh(.42,0,1,1),dJ=oh(0,0,.58,1),l4=oh(.42,0,.58,1),fJ=e=>Array.isArray(e)&&typeof e[0]!="number",u4=e=>Array.isArray(e)&&typeof e[0]=="number",m_={linear:Tr,easeIn:cJ,easeInOut:l4,easeOut:dJ,circIn:OC,circInOut:a4,circOut:o4,backIn:MC,backInOut:i4,backOut:r4,anticipate:s4},hJ=e=>typeof e=="string",g_=e=>{if(u4(e)){Gu(e.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[t,n,r,i]=e;return oh(t,n,r,i)}else if(hJ(e))return Gu(m_[e]!==void 0,`Invalid easing type '${e}'`,"invalid-easing-type"),m_[e];return e},Zh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],y_={value:null,addProjectionMetrics:null};function pJ(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function u(d){o.has(d)&&(c.schedule(d),e()),l++,d(a)}const c={schedule:(d,f=!1,h=!1)=>{const m=h&&i?n:r;return f&&o.add(d),m.has(d)||m.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(a=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),t&&y_.value&&y_.value.frameloop[t].push(l),l=0,n.clear(),i=!1,s&&(s=!1,c.process(d))}};return c}const mJ=40;function c4(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Zh.reduce((x,k)=>(x[k]=pJ(s,t?k:void 0),x),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:f,render:h,postRender:p}=o,m=()=>{const x=bs.useManualTiming?i.timestamp:performance.now();n=!1,bs.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(x-i.timestamp,mJ),1)),i.timestamp=x,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),h.process(i),p.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},g=()=>{n=!0,r=!0,i.isProcessing||e(m)};return{schedule:Zh.reduce((x,k)=>{const S=o[k];return x[k]=(C,E=!1,P=!1)=>(n||g(),S.schedule(C,E,P)),x},{}),cancel:x=>{for(let k=0;k<Zh.length;k++)o[Zh[k]].cancel(x)},state:i,steps:o}}const{schedule:Xe,cancel:$o,state:Zt,steps:m1}=c4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Tr,!0);let Kp;function gJ(){Kp=void 0}const Sn={now:()=>(Kp===void 0&&Sn.set(Zt.isProcessing||bs.useManualTiming?Zt.timestamp:performance.now()),Kp),set:e=>{Kp=e,queueMicrotask(gJ)}},d4=e=>t=>typeof t=="string"&&t.startsWith(e),f4=d4("--"),yJ=d4("var(--"),IC=e=>yJ(e)?bJ.test(e.split("/*")[0].trim()):!1,bJ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function b_(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const wc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},xf={...wc,transform:e=>Mi(0,1,e)},ep={...wc,default:1},Cd=e=>Math.round(e*1e5)/1e5,jC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function vJ(e){return e==null}const xJ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,LC=(e,t)=>n=>!!(typeof n=="string"&&xJ.test(n)&&n.startsWith(e)||t&&!vJ(n)&&Object.prototype.hasOwnProperty.call(n,t)),h4=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(jC);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},wJ=e=>Mi(0,255,e),g1={...wc,transform:e=>Math.round(wJ(e))},Ca={test:LC("rgb","red"),parse:h4("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+g1.transform(e)+", "+g1.transform(t)+", "+g1.transform(n)+", "+Cd(xf.transform(r))+")"};function kJ(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const wx={test:LC("#"),parse:kJ,transform:Ca.transform},ah=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ls=ah("deg"),Pi=ah("%"),oe=ah("px"),CJ=ah("vh"),SJ=ah("vw"),v_={...Pi,parse:e=>Pi.parse(e)/100,transform:e=>Pi.transform(e*100)},su={test:LC("hsl","hue"),parse:h4("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Pi.transform(Cd(t))+", "+Pi.transform(Cd(n))+", "+Cd(xf.transform(r))+")"},Nt={test:e=>Ca.test(e)||wx.test(e)||su.test(e),parse:e=>Ca.test(e)?Ca.parse(e):su.test(e)?su.parse(e):wx.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ca.transform(e):su.transform(e),getAnimatableNone:e=>{const t=Nt.parse(e);return t.alpha=0,Nt.transform(t)}},EJ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function TJ(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(jC))==null?void 0:t.length)||0)+(((n=e.match(EJ))==null?void 0:n.length)||0)>0}const p4="number",m4="color",_J="var",AJ="var(",x_="${}",PJ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wf(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=t.replace(PJ,l=>(Nt.test(l)?(r.color.push(s),i.push(m4),n.push(Nt.parse(l))):l.startsWith(AJ)?(r.var.push(s),i.push(_J),n.push(l)):(r.number.push(s),i.push(p4),n.push(parseFloat(l))),++s,x_)).split(x_);return{values:n,split:a,indexes:r,types:i}}function g4(e){return wf(e).values}function y4(e){const{split:t,types:n}=wf(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const a=n[o];a===p4?s+=Cd(i[o]):a===m4?s+=Nt.transform(i[o]):s+=i[o]}return s}}const RJ=e=>typeof e=="number"?0:Nt.test(e)?Nt.getAnimatableNone(e):e;function NJ(e){const t=g4(e);return y4(e)(t.map(RJ))}const zo={test:TJ,parse:g4,createTransformer:y4,getAnimatableNone:NJ};function y1(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function DJ({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=y1(l,a,e+1/3),s=y1(l,a,e),o=y1(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Jm(e,t){return n=>n>0?t:e}const ft=(e,t,n)=>e+(t-e)*n,b1=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},MJ=[wx,Ca,su],OJ=e=>MJ.find(t=>t.test(e));function w_(e){const t=OJ(e);if(F0(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let n=t.parse(e);return t===su&&(n=DJ(n)),n}const k_=(e,t)=>{const n=w_(e),r=w_(t);if(!n||!r)return Jm(e,t);const i={...n};return s=>(i.red=b1(n.red,r.red,s),i.green=b1(n.green,r.green,s),i.blue=b1(n.blue,r.blue,s),i.alpha=ft(n.alpha,r.alpha,s),Ca.transform(i))},kx=new Set(["none","hidden"]);function IJ(e,t){return kx.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function jJ(e,t){return n=>ft(e,t,n)}function FC(e){return typeof e=="number"?jJ:typeof e=="string"?IC(e)?Jm:Nt.test(e)?k_:$J:Array.isArray(e)?b4:typeof e=="object"?Nt.test(e)?k_:LJ:Jm}function b4(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>FC(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function LJ(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=FC(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function FJ(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],a=e.values[o]??0;n[i]=a,r[s]++}return n}const $J=(e,t)=>{const n=zo.createTransformer(t),r=wf(e),i=wf(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?kx.has(e)&&!i.values.length||kx.has(t)&&!r.values.length?IJ(e,t):sh(b4(FJ(r,i),i.values),n):(F0(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),Jm(e,t))};function v4(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ft(e,t,n):FC(e)(e,t)}const zJ=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Xe.update(t,n),stop:()=>$o(t),now:()=>Zt.isProcessing?Zt.timestamp:Sn.now()}},x4=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Qm=2e4;function $C(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Qm;)t+=n,r=e.next(t);return t>=Qm?1/0:t}function BJ(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min($C(r),Qm);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:Cr(i)}}const VJ=5;function w4(e,t,n){const r=Math.max(t-VJ,0);return ZI(n-e(r),t-r)}const ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},v1=.001;function UJ({duration:e=ct.duration,bounce:t=ct.bounce,velocity:n=ct.velocity,mass:r=ct.mass}){let i,s;F0(e<=_r(ct.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-t;o=Mi(ct.minDamping,ct.maxDamping,o),e=Mi(ct.minDuration,ct.maxDuration,Cr(e)),o<1?(i=u=>{const c=u*o,d=c*e,f=c-n,h=Cx(u,o),p=Math.exp(-d);return v1-f/h*p},s=u=>{const d=u*o*e,f=d*n+n,h=Math.pow(o,2)*Math.pow(u,2)*e,p=Math.exp(-d),m=Cx(Math.pow(u,2),o);return(-i(u)+v1>0?-1:1)*((f-h)*p)/m}):(i=u=>{const c=Math.exp(-u*e),d=(u-n)*e+1;return-v1+c*d},s=u=>{const c=Math.exp(-u*e),d=(n-u)*(e*e);return c*d});const a=5/e,l=WJ(i,s,a);if(e=_r(e),isNaN(l))return{stiffness:ct.stiffness,damping:ct.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const HJ=12;function WJ(e,t,n){let r=n;for(let i=1;i<HJ;i++)r=r-e(r)/t(r);return r}function Cx(e,t){return e*Math.sqrt(1-t*t)}const qJ=["duration","bounce"],KJ=["stiffness","damping","mass"];function C_(e,t){return t.some(n=>e[n]!==void 0)}function GJ(e){let t={velocity:ct.velocity,stiffness:ct.stiffness,damping:ct.damping,mass:ct.mass,isResolvedFromDuration:!1,...e};if(!C_(e,KJ)&&C_(e,qJ))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Mi(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:ct.mass,stiffness:i,damping:s}}else{const n=UJ(e);t={...t,...n,mass:ct.mass},t.isResolvedFromDuration=!0}return t}function Ym(e=ct.visualDuration,t=ct.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:h}=GJ({...n,velocity:-Cr(n.velocity||0)}),p=f||0,m=u/(2*Math.sqrt(l*c)),g=o-s,b=Cr(Math.sqrt(l/c)),v=Math.abs(g)<5;r||(r=v?ct.restSpeed.granular:ct.restSpeed.default),i||(i=v?ct.restDelta.granular:ct.restDelta.default);let x;if(m<1){const S=Cx(b,m);x=C=>{const E=Math.exp(-m*b*C);return o-E*((p+m*b*g)/S*Math.sin(S*C)+g*Math.cos(S*C))}}else if(m===1)x=S=>o-Math.exp(-b*S)*(g+(p+b*g)*S);else{const S=b*Math.sqrt(m*m-1);x=C=>{const E=Math.exp(-m*b*C),P=Math.min(S*C,300);return o-E*((p+m*b*g)*Math.sinh(P)+S*g*Math.cosh(P))/S}}const k={calculatedDuration:h&&d||null,next:S=>{const C=x(S);if(h)a.done=S>=d;else{let E=S===0?p:0;m<1&&(E=S===0?_r(p):w4(x,S,C));const P=Math.abs(E)<=r,R=Math.abs(o-C)<=i;a.done=P&&R}return a.value=a.done?o:C,a},toString:()=>{const S=Math.min($C(k),Qm),C=x4(E=>k.next(S*E).value,S,30);return S+"ms "+C},toTransition:()=>{}};return k}Ym.applyToOptions=e=>{const t=BJ(e,100,Ym);return e.ease=t.ease,e.duration=_r(t.duration),e.type="keyframes",e};function Sx({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],f={done:!1,value:d},h=P=>a!==void 0&&P<a||l!==void 0&&P>l,p=P=>a===void 0?l:l===void 0||Math.abs(a-P)<Math.abs(l-P)?a:l;let m=n*t;const g=d+m,b=o===void 0?g:o(g);b!==g&&(m=b-d);const v=P=>-m*Math.exp(-P/r),x=P=>b+v(P),k=P=>{const R=v(P),A=x(P);f.done=Math.abs(R)<=u,f.value=f.done?b:A};let S,C;const E=P=>{h(f.value)&&(S=P,C=Ym({keyframes:[f.value,p(f.value)],velocity:w4(x,P,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return E(0),{calculatedDuration:null,next:P=>{let R=!1;return!C&&S===void 0&&(R=!0,k(P),E(P)),S!==void 0&&P>=S?C.next(P-S):(!R&&k(P),f)}}}function JJ(e,t,n){const r=[],i=n||bs.mix||v4,s=e.length-1;for(let o=0;o<s;o++){let a=i(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||Tr:t;a=sh(l,a)}r.push(a)}return r}function QJ(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(Gu(s===t.length,"Both input and output ranges must be the same length","range-length"),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=JJ(t,r,i),l=a.length,u=c=>{if(o&&c<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const f=vf(e[d],e[d+1],c);return a[d](f)};return n?c=>u(Mi(e[0],e[s-1],c)):u}function YJ(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=vf(0,t,r);e.push(ft(n,1,i))}}function XJ(e){const t=[0];return YJ(t,e.length-1),t}function ZJ(e,t){return e.map(n=>n*t)}function eQ(e,t){return e.map(()=>t||l4).splice(0,e.length-1)}function Sd({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=fJ(r)?r.map(g_):g_(r),s={done:!1,value:t[0]},o=ZJ(n&&n.length===t.length?n:XJ(t),e),a=QJ(o,t,{ease:Array.isArray(i)?i:eQ(t,i)});return{calculatedDuration:e,next:l=>(s.value=a(l),s.done=l>=e,s)}}const tQ=e=>e!==null;function zC(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(tQ),a=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const nQ={decay:Sx,inertia:Sx,tween:Sd,keyframes:Sd,spring:Ym};function k4(e){typeof e.type=="string"&&(e.type=nQ[e.type])}class BC{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const rQ=e=>e/100;class VC extends BC{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Sn.now()&&this.tick(Sn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;k4(t);const{type:n=Sd,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:a}=t;const l=n||Sd;l!==Sd&&typeof a[0]!="number"&&(this.mixKeyframes=sh(rQ,v4(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=$C(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:d,repeatType:f,repeatDelay:h,type:p,onUpdate:m,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const b=this.currentTime-u*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let x=this.currentTime,k=r;if(d){const P=Math.min(this.currentTime,i)/a;let R=Math.floor(P),A=P%1;!A&&P>=1&&(A=1),A===1&&R--,R=Math.min(R,d+1),!!(R%2)&&(f==="reverse"?(A=1-A,h&&(A-=h/a)):f==="mirror"&&(k=o)),x=Mi(0,1,A)*a}const S=v?{done:!1,value:c[0]}:k.next(x);s&&(S.value=s(S.value));let{done:C}=S;!v&&l!==null&&(C=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return E&&p!==Sx&&(S.value=zC(c,this.options,g,this.speed)),m&&m(S.value),E&&this.finish(),S}then(t,n){return this.finished.then(t,n)}get duration(){return Cr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Cr(t)}get time(){return Cr(this.currentTime)}set time(t){var n;t=_r(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Sn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Cr(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:t=zJ,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Sn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function iQ(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Sa=e=>e*180/Math.PI,Ex=e=>{const t=Sa(Math.atan2(e[1],e[0]));return Tx(t)},sQ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ex,rotateZ:Ex,skewX:e=>Sa(Math.atan(e[1])),skewY:e=>Sa(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Tx=e=>(e=e%360,e<0&&(e+=360),e),S_=Ex,E_=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),T_=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),oQ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:E_,scaleY:T_,scale:e=>(E_(e)+T_(e))/2,rotateX:e=>Tx(Sa(Math.atan2(e[6],e[5]))),rotateY:e=>Tx(Sa(Math.atan2(-e[2],e[0]))),rotateZ:S_,rotate:S_,skewX:e=>Sa(Math.atan(e[4])),skewY:e=>Sa(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function _x(e){return e.includes("scale")?1:0}function Ax(e,t){if(!e||e==="none")return _x(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=oQ,i=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=sQ,i=a}if(!i)return _x(t);const s=r[t],o=i[1].split(",").map(lQ);return typeof s=="function"?s(o):o[s]}const aQ=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Ax(n,t)};function lQ(e){return parseFloat(e.trim())}const kc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Cc=new Set(kc),__=e=>e===wc||e===oe,uQ=new Set(["x","y","z"]),cQ=kc.filter(e=>!uQ.has(e));function dQ(e){const t=[];return cQ.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const mo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Ax(t,"x"),y:(e,{transform:t})=>Ax(t,"y")};mo.translateX=mo.x;mo.translateY=mo.y;const za=new Set;let Px=!1,Rx=!1,Nx=!1;function C4(){if(Rx){const e=Array.from(za).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=dQ(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Rx=!1,Px=!1,za.forEach(e=>e.complete(Nx)),za.clear()}function S4(){za.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Rx=!0)})}function fQ(){Nx=!0,S4(),C4(),Nx=!1}class UC{constructor(t,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(za.add(this),Px||(Px=!0,Xe.read(S4),Xe.resolveKeyframes(C4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i==null?void 0:i.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}iQ(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),za.delete(this)}cancel(){this.state==="scheduled"&&(za.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const hQ=e=>e.startsWith("--");function pQ(e,t,n){hQ(t)?e.style.setProperty(t,n):e.style[t]=n}const mQ=NC(()=>window.ScrollTimeline!==void 0),gQ={};function yQ(e,t){const n=NC(e);return()=>gQ[t]??n()}const E4=yQ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),id=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,A_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:id([0,.65,.55,1]),circOut:id([.55,0,1,.45]),backIn:id([.31,.01,.66,-.59]),backOut:id([.33,1.53,.69,.99])};function T4(e,t){if(e)return typeof e=="function"?E4()?x4(e,t):"ease-out":u4(e)?id(e):Array.isArray(e)?e.map(n=>T4(n,t)||A_.easeOut):A_[e]}function bQ(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[t]:n};l&&(c.offset=l);const d=T4(a,i);Array.isArray(d)&&(c.easing=d);const f={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),e.animate(c,f)}function _4(e){return typeof e=="function"&&"applyToOptions"in e}function vQ({type:e,...t}){return _4(e)&&E4()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class A4 extends BC{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,Gu(typeof t.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const u=vQ(t);this.animation=bQ(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=zC(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):pQ(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,i;const t=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(t!=null&&t.isConnected)&&((i=(r=this.animation).commitStyles)==null||i.call(r))}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Cr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Cr(t)}get time(){return Cr(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=_r(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&mQ()?(this.animation.timeline=t,Tr):n(this)}}const P4={anticipate:s4,backInOut:i4,circInOut:a4};function xQ(e){return e in P4}function wQ(e){typeof e.ease=="string"&&xQ(e.ease)&&(e.ease=P4[e.ease])}const x1=10;class kQ extends A4{constructor(t){wQ(t),k4(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new VC({...o,autoplay:!1}),l=Math.max(x1,Sn.now()-this.startTime),u=Mi(0,x1,l-x1);n.setWithVelocity(a.sample(Math.max(0,l-u)).value,a.sample(l).value,u),a.stop()}}const P_=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(zo.test(e)||e==="0")&&!e.startsWith("url("));function CQ(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function SQ(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=P_(i,t),a=P_(s,t);return F0(o===a,`You are trying to animate ${t} from "${i}" to "${s}". "${o?s:i}" is not an animatable value.`,"value-not-animatable"),!o||!a?!1:CQ(e)||(n==="spring"||_4(n))&&r}function Dx(e){e.duration=0,e.type="keyframes"}const EQ=new Set(["opacity","clipPath","filter","transform"]),TQ=NC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _Q(e){var c;const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!(((c=t==null?void 0:t.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return TQ()&&n&&EQ.has(n)&&(n!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const AQ=40;class PQ extends BC{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...d}){var p;super(),this.stop=()=>{var m,g;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(g=this.keyframeResolver)==null||g.cancel()},this.createdAt=Sn.now();const f={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:c,...d},h=(c==null?void 0:c.KeyframeResolver)||UC;this.keyframeResolver=new h(a,(m,g,b)=>this.onKeyframesResolved(m,g,f,!b),l,u,c),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(t,n,r,i){var g,b;this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=Sn.now(),SQ(t,s,o,a)||((bs.instantAnimations||!l)&&(c==null||c(zC(t,r,n))),t[0]=t[t.length-1],Dx(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>AQ?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},h=!u&&_Q(f),p=(b=(g=f.motionValue)==null?void 0:g.owner)==null?void 0:b.current,m=h?new kQ({...f,element:p}):new VC(f);m.finished.then(()=>{this.notifyFinished()}).catch(Tr),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),fQ()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function R4(e,t,n,r=0,i=1){const s=Array.from(e).sort((u,c)=>u.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}const RQ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function NQ(e){const t=RQ.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}const DQ=4;function N4(e,t,n=1){Gu(n<=DQ,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,i]=NQ(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return QI(o)?parseFloat(o):o}return IC(i)?N4(i,t,n+1):i}const MQ={type:"spring",stiffness:500,damping:25,restSpeed:10},OQ=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),IQ={type:"keyframes",duration:.8},jQ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},LQ=(e,{keyframes:t})=>t.length>2?IQ:Cc.has(e)?e.startsWith("scale")?OQ(t[1]):MQ:jQ,FQ=e=>e!==null;function $Q(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(FQ),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}function D4(e,t){if(e!=null&&e.inherit&&t){const{inherit:n,...r}=e;return{...t,...r}}return e}function HC(e,t){const n=(e==null?void 0:e[t])??(e==null?void 0:e.default)??e;return n!==e?D4(n,e):n}function zQ({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const WC=(e,t,n,r={},i,s)=>o=>{const a=HC(r,e)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-_r(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:i};zQ(a)||Object.assign(c,LQ(e,c)),c.duration&&(c.duration=_r(c.duration)),c.repeatDelay&&(c.repeatDelay=_r(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(Dx(c),c.delay===0&&(d=!0)),(bs.instantAnimations||bs.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(d=!0,Dx(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,d&&!s&&t.get()!==void 0){const f=$Q(c.keyframes,a);if(f!==void 0){Xe.update(()=>{c.onUpdate(f),c.onComplete()});return}}return a.isSync?new VC(c):new PQ(c)};function R_(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function qC(e,t,n,r){if(typeof t=="function"){const[i,s]=R_(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=R_(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function xu(e,t,n){const r=e.getProps();return qC(r,t,n!==void 0?n:r.custom,e)}const M4=new Set(["width","height","top","left","right","bottom",...kc]),N_=30,BQ=e=>!isNaN(parseFloat(e));class VQ{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Sn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Sn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=BQ(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new DC);const r=this.events[t].add(n);return t==="change"?()=>{r(),Xe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Sn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>N_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,N_);return ZI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ju(e,t){return new VQ(e,t)}const Mx=e=>Array.isArray(e);function UQ(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ju(n))}function HQ(e){return Mx(e)?e[e.length-1]||0:e}function WQ(e,t){const n=xu(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=HQ(s[o]);UQ(e,o,a)}}const fn=e=>!!(e&&e.getVelocity);function qQ(e){return!!(fn(e)&&e.add)}function Ox(e,t){const n=e.getValue("willChange");if(qQ(n))return n.add(t);if(!n&&bs.WillChange){const r=new bs.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function KC(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const KQ="framerAppearId",O4="data-"+KC(KQ);function I4(e){return e.props[O4]}function GQ({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function j4(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s,transitionEnd:o,...a}=t;const l=e.getDefaultTransition();s=s?D4(s,l):l;const u=s==null?void 0:s.reduceMotion;r&&(s=r);const c=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const f in a){const h=e.getValue(f,e.latestValues[f]??null),p=a[f];if(p===void 0||d&&GQ(d,f))continue;const m={delay:n,...HC(s||{},f)},g=h.get();if(g!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===g&&!m.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const k=I4(e);if(k){const S=window.MotionHandoffAnimation(k,f,Xe);S!==null&&(m.startTime=S,b=!0)}}Ox(e,f);const v=u??e.shouldReduceMotion;h.start(WC(f,h,p,v&&M4.has(f)?{type:!1}:m,e,b));const x=h.animation;x&&c.push(x)}if(o){const f=()=>Xe.update(()=>{o&&WQ(e,o)});c.length?Promise.all(c).then(f):f()}return c}function Ix(e,t,n={}){var l;const r=xu(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(j4(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=i;return JQ(e,t,u,c,d,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,c]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function JQ(e,t,n=0,r=0,i=0,s=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(Ix(l,t,{...o,delay:n+(typeof r=="function"?0:r)+R4(e.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function QQ(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>Ix(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=Ix(e,t,n);else{const i=typeof t=="function"?xu(e,t,n.custom):t;r=Promise.all(j4(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const YQ={test:e=>e==="auto",parse:e=>e},L4=e=>t=>t.test(e),F4=[wc,oe,Pi,Ls,SJ,CJ,YQ],D_=e=>F4.find(L4(e));function XQ(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||XI(e):!0}const ZQ=new Set(["brightness","contrast","saturate","opacity"]);function eY(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(jC)||[];if(!r)return e;const i=n.replace(r,"");let s=ZQ.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const tY=/\b([a-z-]*)\(.*?\)/gu,jx={...zo,getAnimatableNone:e=>{const t=e.match(tY);return t?t.map(eY).join(" "):e}},M_={...wc,transform:Math.round},nY={rotate:Ls,rotateX:Ls,rotateY:Ls,rotateZ:Ls,scale:ep,scaleX:ep,scaleY:ep,scaleZ:ep,skew:Ls,skewX:Ls,skewY:Ls,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:xf,originX:v_,originY:v_,originZ:oe},GC={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,top:oe,right:oe,bottom:oe,left:oe,inset:oe,insetBlock:oe,insetBlockStart:oe,insetBlockEnd:oe,insetInline:oe,insetInlineStart:oe,insetInlineEnd:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,paddingBlock:oe,paddingBlockStart:oe,paddingBlockEnd:oe,paddingInline:oe,paddingInlineStart:oe,paddingInlineEnd:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,marginBlock:oe,marginBlockStart:oe,marginBlockEnd:oe,marginInline:oe,marginInlineStart:oe,marginInlineEnd:oe,fontSize:oe,backgroundPositionX:oe,backgroundPositionY:oe,...nY,zIndex:M_,fillOpacity:xf,strokeOpacity:xf,numOctaves:M_},rY={...GC,color:Nt,backgroundColor:Nt,outlineColor:Nt,fill:Nt,stroke:Nt,borderColor:Nt,borderTopColor:Nt,borderRightColor:Nt,borderBottomColor:Nt,borderLeftColor:Nt,filter:jx,WebkitFilter:jx},$4=e=>rY[e];function z4(e,t){let n=$4(e);return n!==jx&&(n=zo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const iY=new Set(["auto","none","0"]);function sY(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!iY.has(s)&&wf(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=z4(n,i)}class oY extends UC{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),IC(d))){const f=N4(d,n.current);f!==void 0&&(t[c]=f),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!M4.has(r)||t.length!==2)return;const[i,s]=t,o=D_(i),a=D_(s),l=b_(i),u=b_(s);if(l!==u&&mo[r]){this.needsMeasurement=!0;return}if(o!==a)if(__(o)&&__(a))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else mo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||XQ(t[i]))&&r.push(i);r.length&&sY(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=mo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const aY=new Set(["opacity","clipPath","filter","transform"]);function B4(e,t,n){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){const i=document.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e).filter(r=>r!=null)}const V4=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Lx(e){return YI(e)&&"offsetHeight"in e}const{schedule:JC,cancel:Mwe}=c4(queueMicrotask,!1),Vr={x:!1,y:!1};function U4(){return Vr.x||Vr.y}function lY(e){return e==="x"||e==="y"?Vr[e]?null:(Vr[e]=!0,()=>{Vr[e]=!1}):Vr.x||Vr.y?null:(Vr.x=Vr.y=!0,()=>{Vr.x=Vr.y=!1})}function H4(e,t){const n=B4(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function uY(e){return!(e.pointerType==="touch"||U4())}function cY(e,t,n={}){const[r,i,s]=H4(e,n);return r.forEach(o=>{let a=!1,l=!1,u;const c=()=>{o.removeEventListener("pointerleave",p)},d=g=>{u&&(u(g),u=void 0),c()},f=g=>{a=!1,window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),l&&(l=!1,d(g))},h=()=>{a=!0,window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",f,i)},p=g=>{if(g.pointerType!=="touch"){if(a){l=!0;return}d(g)}},m=g=>{if(!uY(g))return;l=!1;const b=t(o,g);typeof b=="function"&&(u=b,o.addEventListener("pointerleave",p,i))};o.addEventListener("pointerenter",m,i),o.addEventListener("pointerdown",h,i)}),s}const W4=(e,t)=>t?e===t?!0:W4(e,t.parentElement):!1,QC=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,dY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function fY(e){return dY.has(e.tagName)||e.isContentEditable===!0}const hY=new Set(["INPUT","SELECT","TEXTAREA"]);function pY(e){return hY.has(e.tagName)||e.isContentEditable===!0}const Gp=new WeakSet;function O_(e){return t=>{t.key==="Enter"&&e(t)}}function w1(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const mY=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=O_(()=>{if(Gp.has(n))return;w1(n,"down");const i=O_(()=>{w1(n,"up")}),s=()=>w1(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function I_(e){return QC(e)&&!U4()}const j_=new WeakSet;function gY(e,t,n={}){const[r,i,s]=H4(e,n),o=a=>{const l=a.currentTarget;if(!I_(a)||j_.has(a))return;Gp.add(l),n.stopPropagation&&j_.add(a);const u=t(l,a),c=(h,p)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),Gp.has(l)&&Gp.delete(l),I_(h)&&typeof u=="function"&&u(h,{success:p})},d=h=>{c(h,l===window||l===document||n.useGlobalTarget||W4(l,h.target))},f=h=>{c(h,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),Lx(a)&&(a.addEventListener("focus",u=>mY(u,i)),!fY(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function YC(e){return YI(e)&&"ownerSVGElement"in e}const Jp=new WeakMap;let Fs;const q4=(e,t,n)=>(r,i)=>i&&i[0]?i[0][e+"Size"]:YC(r)&&"getBBox"in r?r.getBBox()[t]:r[n],yY=q4("inline","width","offsetWidth"),bY=q4("block","height","offsetHeight");function vY({target:e,borderBoxSize:t}){var n;(n=Jp.get(e))==null||n.forEach(r=>{r(e,{get width(){return yY(e,t)},get height(){return bY(e,t)}})})}function xY(e){e.forEach(vY)}function wY(){typeof ResizeObserver>"u"||(Fs=new ResizeObserver(xY))}function kY(e,t){Fs||wY();const n=B4(e);return n.forEach(r=>{let i=Jp.get(r);i||(i=new Set,Jp.set(r,i)),i.add(t),Fs==null||Fs.observe(r)}),()=>{n.forEach(r=>{const i=Jp.get(r);i==null||i.delete(t),i!=null&&i.size||Fs==null||Fs.unobserve(r)})}}const Qp=new Set;let ou;function CY(){ou=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};Qp.forEach(t=>t(e))},window.addEventListener("resize",ou)}function SY(e){return Qp.add(e),ou||CY(),()=>{Qp.delete(e),!Qp.size&&typeof ou=="function"&&(window.removeEventListener("resize",ou),ou=void 0)}}function L_(e,t){return typeof e=="function"?SY(e):kY(e,t)}function EY(e){return YC(e)&&e.tagName==="svg"}const TY=[...F4,Nt,zo],_Y=e=>TY.find(L4(e)),F_=()=>({translate:0,scale:1,origin:0,originPoint:0}),au=()=>({x:F_(),y:F_()}),$_=()=>({min:0,max:0}),jt=()=>({x:$_(),y:$_()}),AY=new WeakMap;function $0(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function kf(e){return typeof e=="string"||Array.isArray(e)}const XC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ZC=["initial",...XC];function z0(e){return $0(e.animate)||ZC.some(t=>kf(e[t]))}function K4(e){return!!(z0(e)||e.variants)}function PY(e,t,n){for(const r in t){const i=t[r],s=n[r];if(fn(i))e.addValue(r,i);else if(fn(s))e.addValue(r,Ju(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,Ju(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Fx={current:null},G4={current:!1},RY=typeof window<"u";function NY(){if(G4.current=!0,!!RY)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Fx.current=e.matches;e.addEventListener("change",t),t()}else Fx.current=!1}const z_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Xm={};function J4(e){Xm=e}function DY(){return Xm}class MY{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,skipAnimations:s,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=UC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Sn.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Xe.render(this.render,!1,!0))};const{latestValues:u,renderState:c}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=s,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=z0(n),this.isVariantNode=K4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const p=f[h];u[h]!==void 0&&fn(p)&&p.set(u[h])}}mount(t){var n,r;if(this.hasBeenMounted)for(const i in this.initialValues)(n=this.values.get(i))==null||n.jump(this.initialValues[i]),this.latestValues[i]=this.initialValues[i];this.current=t,AY.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(G4.current||NY(),this.shouldReduceMotion=Fx.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var t;this.projection&&this.projection.unmount(),$o(this.notifyUpdate),$o(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){if(this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)(),n.accelerate&&aY.has(t)&&this.current instanceof HTMLElement){const{factory:o,keyframes:a,times:l,ease:u,duration:c}=n.accelerate,d=new A4({element:this.current,name:t,keyframes:a,times:l,ease:u,duration:_r(c)}),f=o(d);this.valueSubscriptions.set(t,()=>{f(),d.cancel()});return}const r=Cc.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Xe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Xm){const n=Xm[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<z_.length;r++){const i=z_[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=PY(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ju(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(QI(r)||XI(r))?r=parseFloat(r):!_Y(r)&&zo.test(n)&&(r=z4(t,n)),this.setBaseTarget(t,fn(r)?r.get():r)),fn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=qC(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!fn(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new DC),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){JC.render(this.render)}}class Q4 extends MY{constructor(){super(...arguments),this.KeyframeResolver=oY}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){const r=t.style;return r?r[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;fn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Qo{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Y4({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function OY({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function IY(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function k1(e){return e===void 0||e===1}function $x({scale:e,scaleX:t,scaleY:n}){return!k1(e)||!k1(t)||!k1(n)}function da(e){return $x(e)||X4(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function X4(e){return B_(e.x)||B_(e.y)}function B_(e){return e&&e!=="0%"}function Zm(e,t,n){const r=e-n,i=t*r;return n+i}function V_(e,t,n,r,i){return i!==void 0&&(e=Zm(e,i,r)),Zm(e,n,r)+t}function zx(e,t=0,n=1,r,i){e.min=V_(e.min,t,n,r,i),e.max=V_(e.max,t,n,r,i)}function Z4(e,{x:t,y:n}){zx(e.x,t.translate,t.scale,t.originPoint),zx(e.y,n.translate,n.scale,n.originPoint)}const U_=.999999999999,H_=1.0000000000001;function jY(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&uu(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Z4(e,o)),r&&da(s.latestValues)&&uu(e,s.latestValues))}t.x<H_&&t.x>U_&&(t.x=1),t.y<H_&&t.y>U_&&(t.y=1)}function lu(e,t){e.min=e.min+t,e.max=e.max+t}function W_(e,t,n,r,i=.5){const s=ft(e.min,e.max,i);zx(e,t,n,s,r)}function uu(e,t){W_(e.x,t.x,t.scaleX,t.scale,t.originX),W_(e.y,t.y,t.scaleY,t.scale,t.originY)}function e6(e,t){return Y4(IY(e.getBoundingClientRect(),t))}function LY(e,t,n){const r=e6(e,n),{scroll:i}=t;return i&&(lu(r.x,i.offset.x),lu(r.y,i.offset.y)),r}const FY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$Y=kc.length;function zY(e,t,n){let r="",i=!0;for(let s=0;s<$Y;s++){const o=kc[s],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number")l=a===(o.startsWith("scale")?1:0);else{const u=parseFloat(a);l=o.startsWith("scale")?u===1:u===0}if(!l||n){const u=V4(a,GC[o]);if(!l){i=!1;const c=FY[o]||o;r+=`${c}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function eS(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(Cc.has(l)){o=!0;continue}else if(f4(l)){i[l]=u;continue}else{const c=V4(u,GC[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(t.transform||(o||n?r.transform=zY(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}function t6(e,{style:t,vars:n},r,i){const s=e.style;let o;for(o in t)s[o]=t[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function q_(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const zc={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(oe.test(e))e=parseFloat(e);else return e;const n=q_(e,t.target.x),r=q_(e,t.target.y);return`${n}% ${r}%`}},BY={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=zo.parse(e);if(i.length>5)return r;const s=zo.createTransformer(e),o=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+o]/=a,i[1+o]/=l;const u=ft(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}},Bx={borderRadius:{...zc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zc,borderTopRightRadius:zc,borderBottomLeftRadius:zc,borderBottomRightRadius:zc,boxShadow:BY};function n6(e,{layout:t,layoutId:n}){return Cc.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Bx[e]||e==="opacity")}function tS(e,t,n){var o;const r=e.style,i=t==null?void 0:t.style,s={};if(!r)return s;for(const a in r)(fn(r[a])||i&&fn(i[a])||n6(a,e)||((o=n==null?void 0:n.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function VY(e){return window.getComputedStyle(e)}class UY extends Q4{constructor(){super(...arguments),this.type="html",this.renderInstance=t6}readValueFromInstance(t,n){var r;if(Cc.has(n))return(r=this.projection)!=null&&r.isProjecting?_x(n):aQ(t,n);{const i=VY(t),s=(f4(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return e6(t,n)}build(t,n,r){eS(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return tS(t,n,r)}}const HY={offset:"stroke-dashoffset",array:"stroke-dasharray"},WY={offset:"strokeDashoffset",array:"strokeDasharray"};function qY(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?HY:WY;e[s.offset]=`${-r}`,e[s.array]=`${t} ${n}`}const KY=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function r6(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,c){if(eS(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:f}=e;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete d.transformBox);for(const h of KY)d[h]!==void 0&&(f[h]=d[h],delete d[h]);t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&qY(d,i,s,o,!1)}const i6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),s6=e=>typeof e=="string"&&e.toLowerCase()==="svg";function GY(e,t,n,r){t6(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(i6.has(i)?i:KC(i),t.attrs[i])}function o6(e,t,n){const r=tS(e,t,n);for(const i in e)if(fn(e[i])||fn(t[i])){const s=kc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}class JY extends Q4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Cc.has(n)){const r=$4(n);return r&&r.default||0}return n=i6.has(n)?n:KC(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return o6(t,n,r)}build(t,n,r){r6(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){GY(t,n,r,i)}mount(t){this.isSVGTag=s6(t.tagName),super.mount(t)}}const QY=ZC.length;function a6(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?a6(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<QY;n++){const r=ZC[n],i=e.props[r];(kf(i)||i===!1)&&(t[r]=i)}return t}function l6(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const YY=[...XC].reverse(),XY=XC.length;function ZY(e){return t=>Promise.all(t.map(({animation:n,options:r})=>QQ(e,n,r)))}function eX(e){let t=ZY(e),n=K_(),r=!0;const i=l=>(u,c)=>{var f;const d=xu(e,c,l==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:h,transitionEnd:p,...m}=d;u={...u,...m,...p}}return u};function s(l){t=l(e)}function o(l){const{props:u}=e,c=a6(e.parent)||{},d=[],f=new Set;let h={},p=1/0;for(let g=0;g<XY;g++){const b=YY[g],v=n[b],x=u[b]!==void 0?u[b]:c[b],k=kf(x),S=b===l?v.isActive:null;S===!1&&(p=g);let C=x===c[b]&&x!==u[b]&&k;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),v.protectedKeys={...h},!v.isActive&&S===null||!x&&!v.prevProp||$0(x)||typeof x=="boolean")continue;if(b==="exit"&&v.isActive&&S!==!0){v.prevResolvedValues&&(h={...h,...v.prevResolvedValues});continue}const E=tX(v.prevProp,x);let P=E||b===l&&v.isActive&&!C&&k||g>p&&k,R=!1;const A=Array.isArray(x)?x:[x];let L=A.reduce(i(b),{});S===!1&&(L={});const{prevResolvedValues:I={}}=v,U={...I,...L},F=H=>{P=!0,f.has(H)&&(R=!0,f.delete(H)),v.needsAnimating[H]=!0;const M=e.getValue(H);M&&(M.liveStyle=!1)};for(const H in U){const M=L[H],D=I[H];if(h.hasOwnProperty(H))continue;let T=!1;Mx(M)&&Mx(D)?T=!l6(M,D):T=M!==D,T?M!=null?F(H):f.add(H):M!==void 0&&f.has(H)?F(H):v.protectedKeys[H]=!0}v.prevProp=x,v.prevResolvedValues=L,v.isActive&&(h={...h,...L}),r&&e.blockInitialAnimation&&(P=!1);const B=C&&E;P&&(!B||R)&&d.push(...A.map(H=>{const M={type:b};if(typeof H=="string"&&r&&!B&&e.manuallyAnimateOnMount&&e.parent){const{parent:D}=e,T=xu(D,H);if(D.enteringChildren&&T){const{delayChildren:J}=T.transition||{};M.delay=R4(D.enteringChildren,e,J)}}return{animation:H,options:M}}))}if(f.size){const g={};if(typeof u.initial!="boolean"){const b=xu(e,Array.isArray(u.initial)?u.initial[0]:u.initial);b&&b.transition&&(g.transition=b.transition)}f.forEach(b=>{const v=e.getBaseTarget(b),x=e.getValue(b);x&&(x.liveStyle=!0),g[b]=v??null}),d.push({animation:g})}let m=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(m=!1),r=!1,m?t(d):Promise.resolve()}function a(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=e.variantChildren)==null||d.forEach(f=>{var h;return(h=f.animationState)==null?void 0:h.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const f in n)n[f].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=K_()}}}function tX(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!l6(t,e):!1}function sa(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function K_(){return{animate:sa(!0),whileInView:sa(),whileHover:sa(),whileTap:sa(),whileDrag:sa(),whileFocus:sa(),exit:sa()}}function G_(e,t){e.min=t.min,e.max=t.max}function zr(e,t){G_(e.x,t.x),G_(e.y,t.y)}function J_(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const u6=1e-4,nX=1-u6,rX=1+u6,c6=.01,iX=0-c6,sX=0+c6;function En(e){return e.max-e.min}function oX(e,t,n){return Math.abs(e-t)<=n}function Q_(e,t,n,r=.5){e.origin=r,e.originPoint=ft(t.min,t.max,e.origin),e.scale=En(n)/En(t),e.translate=ft(n.min,n.max,e.origin)-e.originPoint,(e.scale>=nX&&e.scale<=rX||isNaN(e.scale))&&(e.scale=1),(e.translate>=iX&&e.translate<=sX||isNaN(e.translate))&&(e.translate=0)}function Ed(e,t,n,r){Q_(e.x,t.x,n.x,r?r.originX:void 0),Q_(e.y,t.y,n.y,r?r.originY:void 0)}function Y_(e,t,n){e.min=n.min+t.min,e.max=e.min+En(t)}function aX(e,t,n){Y_(e.x,t.x,n.x),Y_(e.y,t.y,n.y)}function X_(e,t,n){e.min=t.min-n.min,e.max=e.min+En(t)}function eg(e,t,n){X_(e.x,t.x,n.x),X_(e.y,t.y,n.y)}function Z_(e,t,n,r,i){return e-=t,e=Zm(e,1/n,r),i!==void 0&&(e=Zm(e,1/i,r)),e}function lX(e,t=0,n=1,r=.5,i,s=e,o=e){if(Pi.test(t)&&(t=parseFloat(t),t=ft(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=ft(s.min,s.max,r);e===s&&(a-=t),e.min=Z_(e.min,t,n,a,i),e.max=Z_(e.max,t,n,a,i)}function eA(e,t,[n,r,i],s,o){lX(e,t[n],t[r],t[i],t.scale,s,o)}const uX=["x","scaleX","originX"],cX=["y","scaleY","originY"];function tA(e,t,n,r){eA(e.x,t,uX,n?n.x:void 0,r?r.x:void 0),eA(e.y,t,cX,n?n.y:void 0,r?r.y:void 0)}function nA(e){return e.translate===0&&e.scale===1}function d6(e){return nA(e.x)&&nA(e.y)}function rA(e,t){return e.min===t.min&&e.max===t.max}function dX(e,t){return rA(e.x,t.x)&&rA(e.y,t.y)}function iA(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function f6(e,t){return iA(e.x,t.x)&&iA(e.y,t.y)}function sA(e){return En(e.x)/En(e.y)}function oA(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function hi(e){return[e("x"),e("y")]}function fX(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:h,skewY:p}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),h&&(r+=`skewX(${h}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const h6=["TopLeft","TopRight","BottomLeft","BottomRight"],hX=h6.length,aA=e=>typeof e=="string"?parseFloat(e):e,lA=e=>typeof e=="number"||oe.test(e);function pX(e,t,n,r,i,s){i?(e.opacity=ft(0,n.opacity??1,mX(r)),e.opacityExit=ft(t.opacity??1,0,gX(r))):s&&(e.opacity=ft(t.opacity??1,n.opacity??1,r));for(let o=0;o<hX;o++){const a=`border${h6[o]}Radius`;let l=uA(t,a),u=uA(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||lA(l)===lA(u)?(e[a]=Math.max(ft(aA(l),aA(u),r),0),(Pi.test(u)||Pi.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=ft(t.rotate||0,n.rotate||0,r))}function uA(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const mX=p6(0,.5,o4),gX=p6(.5,.95,Tr);function p6(e,t,n){return r=>r<e?0:r>t?1:n(vf(e,t,r))}function yX(e,t,n){const r=fn(e)?e:Ju(e);return r.start(WC("",r,t,n)),r.animation}function Cf(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const bX=(e,t)=>e.depth-t.depth;class vX{constructor(){this.children=[],this.isDirty=!1}add(t){RC(this.children,t),this.isDirty=!0}remove(t){Gm(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(bX),this.isDirty=!1,this.children.forEach(t)}}function xX(e,t){const n=Sn.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&($o(r),e(s-t))};return Xe.setup(r,!0),()=>$o(r)}function Yp(e){return fn(e)?e.get():e}class wX{constructor(){this.members=[]}add(t){RC(this.members,t);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===t||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&Gm(this.members,r)}t.scheduleRender()}remove(t){if(Gm(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i],o=s.instance;if(s.isPresent!==!1&&(!o||o.isConnected!==!1)){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender();const i=r.options.layoutDependency,s=t.options.layoutDependency;if(!(i!==void 0&&s!==void 0&&i===s)){const l=r.instance;l&&l.isConnected===!1&&!r.snapshot||(t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0))}const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Xp={hasAnimatedSinceResize:!0,hasEverUpdated:!1},C1=["","X","Y","Z"],kX=1e3;let CX=0;function S1(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function m6(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=I4(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Xe,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&m6(r)}function g6({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=t==null?void 0:t()){this.id=CX++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(TX),this.nodes.forEach(RX),this.nodes.forEach(NX),this.nodes.forEach(_X)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new vX)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new DC),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=YC(o)&&!EY(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let c,d=0;const f=()=>this.root.updateBlockedByResize=!1;Xe.read(()=>{d=window.innerWidth}),e(o,()=>{const h=window.innerWidth;h!==d&&(d=h,this.root.updateBlockedByResize=!0,c&&c(),c=xX(f,250),Xp.hasAnimatedSinceResize&&(Xp.hasAnimatedSinceResize=!1,this.nodes.forEach(fA)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:h})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||jX,{onLayoutAnimationStart:m,onLayoutAnimationComplete:g}=u.getProps(),b=!this.targetLayout||!f6(this.targetLayout,h),v=!d&&f;if(this.options.layoutRoot||this.resumeFrom||v||d&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...HC(p,"layout"),onPlay:m,onComplete:g};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(c,v)}else d||fA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=h})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),$o(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(DX),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&m6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(cA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(dA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(PX),this.nodes.forEach(SX),this.nodes.forEach(EX)):this.nodes.forEach(dA),this.clearAllSnapshots();const a=Sn.now();Zt.delta=Mi(0,1e3/60,a-Zt.timestamp),Zt.timestamp=a,Zt.isProcessing=!0,m1.update.process(Zt),m1.preRender.process(Zt),m1.render.process(Zt),Zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,JC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(AX),this.sharedNodes.forEach(MX)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!En(this.snapshot.measuredBox.x)&&!En(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!d6(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||da(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),LX(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return jt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(FX))){const{scroll:c}=this.root;c&&(lu(a.x,c.offset.x),lu(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=jt();if(zr(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&zr(a,o),lu(a.x,d.offset.x),lu(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=jt();zr(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&uu(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),da(c.latestValues)&&uu(l,c.latestValues)}return da(this.latestValues)&&uu(l,this.latestValues),l}removeTransform(o){const a=jt();zr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!da(u.latestValues))continue;$x(u.latestValues)&&u.updateSnapshot();const c=jt(),d=u.measurePageBox();zr(c,d),tA(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return da(this.latestValues)&&tA(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var h;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!this.layout||!(c||d))return;this.resolvedRelativeTargetAt=Zt.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aX(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zr(this.target,this.layout.layoutBox),Z4(this.target,this.targetDelta)):zr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||$x(this.parent.latestValues)||X4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),eg(this.relativeTargetOrigin,a,l),zr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var p;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Zt.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;zr(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;jY(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=jt());const{target:h}=o;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(J_(this.prevProjectionDelta.x,this.projectionDelta.x),J_(this.prevProjectionDelta.y,this.projectionDelta.y)),Ed(this.projectionDelta,this.layoutCorrected,h,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!oA(this.projectionDelta.x,this.prevProjectionDelta.x)||!oA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=au(),this.projectionDelta=au(),this.projectionDeltaWithTransform=au()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=au();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=jt(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=h!==p,g=this.getStack(),b=!g||g.members.length<=1,v=!!(m&&!b&&this.options.crossfade===!0&&!this.path.some(IX));this.animationProgress=0;let x;this.mixTargetDelta=k=>{const S=k/1e3;hA(d.x,o.x,S),hA(d.y,o.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(eg(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OX(this.relativeTarget,this.relativeTargetOrigin,f,S),x&&dX(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=jt()),zr(x,this.relativeTarget)),m&&(this.animationValues=c,pX(c,u,this.latestValues,S,v,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&($o(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Xe.update(()=>{Xp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ju(0)),this.currentAnimation=yX(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kX),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&y6(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||jt();const d=En(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=En(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}zr(a,l),uu(a,c),Ed(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new wX),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&S1("z",o,u,this.animationValues);for(let c=0;c<C1.length;c++)S1(`rotate${C1[c]}`,o,u,this.animationValues),S1(`skew${C1[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Yp(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Yp(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!da(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=fX(this.projectionDeltaWithTransform,this.treeScale,c);l&&(d=l(c,d)),o.transform=d;const{x:f,y:h}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${h.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in Bx){if(c[p]===void 0)continue;const{correct:m,applyTo:g,isCSSVariable:b}=Bx[p],v=d==="none"?c[p]:m(c[p],u);if(g){const x=g.length;for(let k=0;k<x;k++)o[g[k]]=v}else b?this.options.visualElement.renderState.vars[p]=v:o[p]=v}this.options.layoutId&&(o.pointerEvents=u===this?Yp(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(cA),this.root.sharedNodes.clear()}}}function SX(e){e.updateLayout()}function EX(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,o=t.source!==e.layout.source;s==="size"?hi(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],h=En(f);f.min=r[d].min,f.max=f.min+h}):y6(s,t.layoutBox,r)&&hi(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],h=En(r[d]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+h)});const a=au();Ed(a,r,t.layoutBox);const l=au();o?Ed(l,e.applyTransform(i,!0),t.measuredBox):Ed(l,r,t.layoutBox);const u=!d6(a);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const p=jt();eg(p,t.layoutBox,f.layoutBox);const m=jt();eg(m,r,h.layoutBox),f6(p,m)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=p,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function TX(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function _X(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function AX(e){e.clearSnapshot()}function cA(e){e.clearMeasurements()}function dA(e){e.isLayoutDirty=!1}function PX(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function fA(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function RX(e){e.resolveTargetDelta()}function NX(e){e.calcProjection()}function DX(e){e.resetSkewAndRotation()}function MX(e){e.removeLeadSnapshot()}function hA(e,t,n){e.translate=ft(t.translate,0,n),e.scale=ft(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function pA(e,t,n,r){e.min=ft(t.min,n.min,r),e.max=ft(t.max,n.max,r)}function OX(e,t,n,r){pA(e.x,t.x,n.x,r),pA(e.y,t.y,n.y,r)}function IX(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const jX={duration:.45,ease:[.4,0,.1,1]},mA=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),gA=mA("applewebkit/")&&!mA("chrome/")?Math.round:Tr;function yA(e){e.min=gA(e.min),e.max=gA(e.max)}function LX(e){yA(e.x),yA(e.y)}function y6(e,t,n){return e==="position"||e==="preserve-aspect"&&!oX(sA(t),sA(n),.2)}function FX(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const $X=g6({attachResizeListener:(e,t)=>Cf(e,"resize",t),measureScroll:()=>{var e,t;return{x:document.documentElement.scrollLeft||((e=document.body)==null?void 0:e.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),E1={current:void 0},b6=g6({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!E1.current){const e=new $X({});e.mount(window),e.setOptions({layoutScroll:!0}),E1.current=e}return E1.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),nS=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function bA(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function zX(...e){return t=>{let n=!1;const r=e.map(i=>{const s=bA(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():bA(e[i],null)}}}}function BX(...e){return w.useCallback(zX(...e),e)}class VX extends w.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,i=Lx(r)&&r.offsetWidth||0,s=Lx(r)&&r.offsetHeight||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left,o.bottom=s-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function UX({children:e,isPresent:t,anchorX:n,anchorY:r,root:i,pop:s}){var f;const o=w.useId(),a=w.useRef(null),l=w.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=w.useContext(nS),c=((f=e.props)==null?void 0:f.ref)??(e==null?void 0:e.ref),d=BX(a,c);return w.useInsertionEffect(()=>{const{width:h,height:p,top:m,left:g,right:b,bottom:v}=l.current;if(t||s===!1||!a.current||!h||!p)return;const x=n==="left"?`left: ${g}`:`right: ${b}`,k=r==="bottom"?`bottom: ${v}`:`top: ${m}`;a.current.dataset.motionPopId=o;const S=document.createElement("style");u&&(S.nonce=u);const C=i??document.head;return C.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${p}px !important;
            ${x}px !important;
            ${k}px !important;
          }
        `),()=>{C.contains(S)&&C.removeChild(S)}},[t]),y.jsx(VX,{isPresent:t,childRef:a,sizeRef:l,pop:s,children:s===!1?e:w.cloneElement(e,{ref:d})})}const HX=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,anchorY:l,root:u})=>{const c=PC(WX),d=w.useId();let f=!0,h=w.useMemo(()=>(f=!1,{id:d,initial:t,isPresent:n,custom:i,onExitComplete:p=>{c.set(p,!0);for(const m of c.values())if(!m)return;r&&r()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[n,c,r]);return s&&f&&(h={...h}),w.useMemo(()=>{c.forEach((p,m)=>c.set(m,!1))},[n]),w.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),e=y.jsx(UX,{pop:o==="popLayout",isPresent:n,anchorX:a,anchorY:l,root:u,children:e}),y.jsx(L0.Provider,{value:h,children:e})};function WX(){return new Map}function v6(e=!0){const t=w.useContext(L0);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=w.useId();w.useEffect(()=>{if(e)return i(s)},[e]);const o=w.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const tp=e=>e.key||"";function vA(e){const t=[];return w.Children.forEach(e,n=>{w.isValidElement(n)&&t.push(n)}),t}const nl=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",anchorY:l="top",root:u})=>{const[c,d]=v6(o),f=w.useMemo(()=>vA(e),[e]),h=o&&!c?[]:f.map(tp),p=w.useRef(!0),m=w.useRef(f),g=PC(()=>new Map),b=w.useRef(new Set),[v,x]=w.useState(f),[k,S]=w.useState(f);JI(()=>{p.current=!1,m.current=f;for(let P=0;P<k.length;P++){const R=tp(k[P]);h.includes(R)?(g.delete(R),b.current.delete(R)):g.get(R)!==!0&&g.set(R,!1)}},[k,h.length,h.join("-")]);const C=[];if(f!==v){let P=[...f];for(let R=0;R<k.length;R++){const A=k[R],L=tp(A);h.includes(L)||(P.splice(R,0,A),C.push(A))}return s==="wait"&&C.length&&(P=C),S(vA(P)),x(f),null}const{forceRender:E}=w.useContext(AC);return y.jsx(y.Fragment,{children:k.map(P=>{const R=tp(P),A=o&&!c?!1:f===k||h.includes(R),L=()=>{if(b.current.has(R))return;if(b.current.add(R),g.has(R))g.set(R,!0);else return;let I=!0;g.forEach(U=>{U||(I=!1)}),I&&(E==null||E(),S(m.current),o&&(d==null||d()),r&&r())};return y.jsx(HX,{isPresent:A,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:A?void 0:L,anchorX:a,anchorY:l,children:P},R)})})},x6=w.createContext({strict:!1}),xA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let wA=!1;function qX(){if(wA)return;const e={};for(const t in xA)e[t]={isEnabled:n=>xA[t].some(r=>!!n[r])};J4(e),wA=!0}function w6(){return qX(),DY()}function KX(e){const t=w6();for(const n in e)t[n]={...t[n],...e[n]};J4(t)}const GX=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function tg(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||GX.has(e)}let k6=e=>!tg(e);function JX(e){typeof e=="function"&&(k6=t=>t.startsWith("on")?!tg(t):e(t))}try{JX(require("@emotion/is-prop-valid").default)}catch{}function QX(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(k6(i)||n===!0&&tg(i)||!t&&!tg(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const B0=w.createContext({});function YX(e,t){if(z0(e)){const{initial:n,animate:r}=e;return{initial:n===!1||kf(n)?n:void 0,animate:kf(r)?r:void 0}}return e.inherit!==!1?t:{}}function XX(e){const{initial:t,animate:n}=YX(e,w.useContext(B0));return w.useMemo(()=>({initial:t,animate:n}),[kA(t),kA(n)])}function kA(e){return Array.isArray(e)?e.join(" "):e}const rS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function C6(e,t,n){for(const r in t)!fn(t[r])&&!n6(r,n)&&(e[r]=t[r])}function ZX({transformTemplate:e},t){return w.useMemo(()=>{const n=rS();return eS(n,t,e),Object.assign({},n.vars,n.style)},[t])}function eZ(e,t){const n=e.style||{},r={};return C6(r,n,e),Object.assign(r,ZX(e,t)),r}function tZ(e,t){const n={},r=eZ(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const S6=()=>({...rS(),attrs:{}});function nZ(e,t,n,r){const i=w.useMemo(()=>{const s=S6();return r6(s,t,s6(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};C6(s,e.style,e),i.style={...s,...i.style}}return i}const rZ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function iS(e){return typeof e!="string"||e.includes("-")?!1:!!(rZ.indexOf(e)>-1||/[A-Z]/u.test(e))}function iZ(e,t,n,{latestValues:r},i,s=!1,o){const l=(o??iS(e)?nZ:tZ)(t,r,i,e),u=QX(t,typeof e=="string",s),c=e!==w.Fragment?{...u,...l,ref:n}:{},{children:d}=t,f=w.useMemo(()=>fn(d)?d.get():d,[d]);return w.createElement(e,{...c,children:f})}function sZ({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:oZ(n,r,i,e),renderState:t()}}function oZ(e,t,n,r){const i={},s=r(e,{});for(const f in s)i[f]=Yp(s[f]);let{initial:o,animate:a}=e;const l=z0(e),u=K4(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const d=c?a:o;if(d&&typeof d!="boolean"&&!$0(d)){const f=Array.isArray(d)?d:[d];for(let h=0;h<f.length;h++){const p=qC(e,f[h]);if(p){const{transitionEnd:m,transition:g,...b}=p;for(const v in b){let x=b[v];if(Array.isArray(x)){const k=c?x.length-1:0;x=x[k]}x!==null&&(i[v]=x)}for(const v in m)i[v]=m[v]}}}return i}const E6=e=>(t,n)=>{const r=w.useContext(B0),i=w.useContext(L0),s=()=>sZ(e,t,r,i);return n?s():PC(s)},aZ=E6({scrapeMotionValuesFromProps:tS,createRenderState:rS}),lZ=E6({scrapeMotionValuesFromProps:o6,createRenderState:S6}),uZ=Symbol.for("motionComponentSymbol");function cZ(e,t,n){const r=w.useRef(n);w.useInsertionEffect(()=>{r.current=n});const i=w.useRef(null);return w.useCallback(s=>{var a;s&&((a=e.onMount)==null||a.call(e,s)),t&&(s?t.mount(s):t.unmount());const o=r.current;if(typeof o=="function")if(s){const l=o(s);typeof l=="function"&&(i.current=l)}else i.current?(i.current(),i.current=null):o(s);else o&&(o.current=s)},[t])}const T6=w.createContext({});function $l(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function dZ(e,t,n,r,i,s){var x,k;const{visualElement:o}=w.useContext(B0),a=w.useContext(x6),l=w.useContext(L0),u=w.useContext(nS),c=u.reducedMotion,d=u.skipAnimations,f=w.useRef(null),h=w.useRef(!1);r=r||a.renderer,!f.current&&r&&(f.current=r(e,{visualState:t,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c,skipAnimations:d,isSVG:s}),h.current&&f.current&&(f.current.manuallyAnimateOnMount=!0));const p=f.current,m=w.useContext(T6);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&fZ(f.current,n,i,m);const g=w.useRef(!1);w.useInsertionEffect(()=>{p&&g.current&&p.update(n,l)});const b=n[O4],v=w.useRef(!!b&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,b))&&((k=window.MotionHasOptimisedAnimation)==null?void 0:k.call(window,b)));return JI(()=>{h.current=!0,p&&(g.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),v.current&&p.animationState&&p.animationState.animateChanges())}),w.useEffect(()=>{p&&(!v.current&&p.animationState&&p.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,b)}),v.current=!1),p.enteringChildren=void 0)}),p}function fZ(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:_6(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&$l(a),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function _6(e){if(e)return e.options.allowProjection!==!1?e.projection:_6(e.parent)}function T1(e,{forwardMotionProps:t=!1,type:n}={},r,i){r&&KX(r);const s=n?n==="svg":iS(e),o=s?lZ:aZ;function a(u,c){let d;const f={...w.useContext(nS),...u,layoutId:hZ(u)},{isStatic:h}=f,p=XX(u),m=o(u,h);if(!h&&GI){pZ();const g=mZ(f);d=g.MeasureLayout,p.visualElement=dZ(e,m,f,i,g.ProjectionNode,s)}return y.jsxs(B0.Provider,{value:p,children:[d&&p.visualElement?y.jsx(d,{visualElement:p.visualElement,...f}):null,iZ(e,u,cZ(m,p.visualElement,c),m,h,t,s)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const l=w.forwardRef(a);return l[uZ]=e,l}function hZ({layoutId:e}){const t=w.useContext(AC).id;return t&&e!==void 0?t+"-"+e:e}function pZ(e,t){w.useContext(x6).strict}function mZ(e){const t=w6(),{drag:n,layout:r}=t;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(e)||r!=null&&r.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function gZ(e,t){if(typeof Proxy>"u")return T1;const n=new Map,r=(s,o)=>T1(s,o,e,t),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,T1(o,void 0,e,t)),n.get(o))})}const yZ=(e,t)=>t.isSVG??iS(e)?new JY(t):new UY(t,{allowProjection:e!==w.Fragment});class bZ extends Qo{constructor(t){super(t),t.animationState||(t.animationState=eX(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();$0(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let vZ=0;class xZ extends Qo{constructor(){super(...arguments),this.id=vZ++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const wZ={animation:{Feature:bZ},exit:{Feature:xZ}};function lh(e){return{point:{x:e.pageX,y:e.pageY}}}const kZ=e=>t=>QC(t)&&e(t,lh(t));function Td(e,t,n,r){return Cf(e,t,kZ(n),r)}const A6=({current:e})=>e?e.ownerDocument.defaultView:null,CA=(e,t)=>Math.abs(e-t);function CZ(e,t){const n=CA(e.x,t.x),r=CA(e.y,t.y);return Math.sqrt(n**2+r**2)}const SA=new Set(["auto","scroll"]);class P6{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=h=>{this.handleScroll(h.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=A1(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=CZ(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:g}=h,{timestamp:b}=Zt;this.history.push({...g,timestamp:b});const{onStart:v,onMove:x}=this.handlers;p||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=_1(p,this.transformPagePoint),Xe.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:b}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=A1(h.type==="pointercancel"?this.lastMoveEventInfo:_1(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,v),g&&g(h,v)},!QC(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=lh(t),u=_1(l,this.transformPagePoint),{point:c}=u,{timestamp:d}=Zt;this.history=[{...c,timestamp:d}];const{onSessionStart:f}=n;f&&f(t,A1(u,this.history)),this.removeListeners=sh(Td(this.contextWindow,"pointermove",this.handlePointerMove),Td(this.contextWindow,"pointerup",this.handlePointerUp),Td(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(t){let n=t.parentElement;for(;n;){const r=getComputedStyle(n);(SA.has(r.overflowX)||SA.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const n=this.scrollPositions.get(t);if(!n)return;const r=t===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},s={x:i.x-n.x,y:i.y-n.y};s.x===0&&s.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(t,i),Xe.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),$o(this.updatePoint)}}function _1(e,t){return t?{point:t(e.point)}:e}function EA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function A1({point:e},t){return{point:e,delta:EA(e,R6(t)),offset:EA(e,SZ(t)),velocity:EZ(t,.1)}}function SZ(e){return e[0]}function R6(e){return e[e.length-1]}function EZ(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=R6(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>_r(t)));)n--;if(!r)return{x:0,y:0};r===e[0]&&e.length>2&&i.timestamp-r.timestamp>_r(t)*2&&(r=e[1]);const s=Cr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function TZ(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ft(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ft(n,e,r.max):Math.min(e,n)),e}function TA(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function _Z(e,{top:t,left:n,bottom:r,right:i}){return{x:TA(e.x,n,i),y:TA(e.y,t,r)}}function _A(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function AZ(e,t){return{x:_A(e.x,t.x),y:_A(e.y,t.y)}}function PZ(e,t){let n=.5;const r=En(e),i=En(t);return i>r?n=vf(t.min,t.max-r,e.min):r>i&&(n=vf(e.min,e.max-i,t.min)),Mi(0,1,n)}function RZ(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Vx=.35;function NZ(e=Vx){return e===!1?e=0:e===!0&&(e=Vx),{x:AA(e,"left","right"),y:AA(e,"top","bottom")}}function AA(e,t,n){return{min:PA(e,t),max:PA(e,n)}}function PA(e,t){return typeof e=="number"?e:e[t]||0}const DZ=new WeakMap;class MZ{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{n&&this.snapToCursor(lh(d).point),this.stopAnimation()},o=(d,f)=>{const{drag:h,dragPropagation:p,onDragStart:m}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lY(h),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hi(b=>{let v=this.getAxisMotionValue(b).get()||0;if(Pi.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const k=x.layout.layoutBox[b];k&&(v=En(k)*(parseFloat(v)/100))}}this.originPoint[b]=v}),m&&Xe.update(()=>m(d,f),!1,!0),Ox(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:m,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:b}=f;if(p&&this.currentDirection===null){this.currentDirection=IZ(b),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),g&&Xe.update(()=>g(d,f),!1,!0)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>{const{dragSnapToOrigin:d}=this.getProps();(d||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:c}=this.getProps();this.panSession=new P6(t,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:A6(this.visualElement),element:this.visualElement.current})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Xe.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!np(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=TZ(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;t&&$l(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=_Z(r.layoutBox,t):this.constraints=!1,this.elastic=NZ(n),i!==this.constraints&&!$l(t)&&r&&this.constraints&&!this.hasMutatedConstraints&&hi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=RZ(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!$l(t))return!1;const r=t.current;Gu(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=LY(r,i.root,this.visualElement.getTransformPagePoint());let o=AZ(i.layout.layoutBox,s);if(n){const a=n(OY(o));this.hasMutatedConstraints=!!a,a&&(o=Y4(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=hi(c=>{if(!np(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const f=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?t[c]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Ox(this.visualElement,t),r.start(WC(t,r,0,n,this.visualElement,!1))}stopAnimation(){hi(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){hi(n=>{const{drag:r}=this.getProps();if(!np(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n],l=s.get()||0;s.set(t[n]-ft(o,a,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!$l(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};hi(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=PZ({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),hi(o=>{if(!np(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(ft(l,u,i[o]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;DZ.set(this.visualElement,this);const t=this.visualElement.current,n=Td(t,"pointerdown",u=>{const{drag:c,dragListener:d=!0}=this.getProps(),f=u.target,h=f!==t&&pY(f);c&&d&&!h&&this.start(u)});let r;const i=()=>{const{dragConstraints:u}=this.getProps();$l(u)&&u.current&&(this.constraints=this.resolveRefConstraints(),r||(r=OZ(t,u.current,()=>this.scalePositionWithinConstraints())))},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Xe.read(i);const a=Cf(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(hi(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=u[d].translate,f.set(f.get()+u[d].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),l&&l(),r&&r()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Vx,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function RA(e){let t=!0;return()=>{if(t){t=!1;return}e()}}function OZ(e,t,n){const r=L_(e,RA(n)),i=L_(t,RA(n));return()=>{r(),i()}}function np(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function IZ(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class jZ extends Qo{constructor(t){super(t),this.removeGroupControls=Tr,this.removeListeners=Tr,this.controls=new MZ(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Tr}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const P1=e=>(t,n)=>{e&&Xe.update(()=>e(t,n),!1,!0)};class LZ extends Qo{constructor(){super(...arguments),this.removePointerDownListener=Tr}onPointerDown(t){this.session=new P6(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:A6(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:P1(t),onStart:P1(n),onMove:P1(r),onEnd:(s,o)=>{delete this.session,i&&Xe.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Td(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let R1=!1;class FZ extends w.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),R1&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Xp.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,t.layoutDependency!==n&&o.setOptions({...o.options,layoutDependency:n}),R1=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||Xe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),JC.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;R1=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function N6(e){const[t,n]=v6(),r=w.useContext(AC);return y.jsx(FZ,{...e,layoutGroup:r,switchLayoutGroup:w.useContext(T6),isPresent:t,safeToRemove:n})}const $Z={pan:{Feature:LZ},drag:{Feature:jZ,ProjectionNode:b6,MeasureLayout:N6}};function NA(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Xe.postRender(()=>s(t,lh(t)))}class zZ extends Qo{mount(){const{current:t}=this.node;t&&(this.unmount=cY(t,(n,r)=>(NA(this.node,r,"Start"),i=>NA(this.node,i,"End"))))}unmount(){}}class BZ extends Qo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sh(Cf(this.node.current,"focus",()=>this.onFocus()),Cf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function DA(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Xe.postRender(()=>s(t,lh(t)))}class VZ extends Qo{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=gY(t,(i,s)=>(DA(this.node,s,"Start"),(o,{success:a})=>DA(this.node,o,a?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const Ux=new WeakMap,N1=new WeakMap,UZ=e=>{const t=Ux.get(e.target);t&&t(e)},HZ=e=>{e.forEach(UZ)};function WZ({root:e,...t}){const n=e||document;N1.has(n)||N1.set(n,{});const r=N1.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(HZ,{root:e,...t})),r[i]}function qZ(e,t,n){const r=WZ(t);return Ux.set(e,n),r.observe(e),()=>{Ux.delete(e),r.unobserve(e)}}const KZ={some:0,all:1};class GZ extends Qo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:KZ[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return qZ(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(JZ(t,n))&&this.startObserver()}unmount(){}}function JZ({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const QZ={inView:{Feature:GZ},tap:{Feature:VZ},focus:{Feature:BZ},hover:{Feature:zZ}},YZ={layout:{ProjectionNode:b6,MeasureLayout:N6}},XZ={...wZ,...QZ,...$Z,...YZ},Be=gZ(XZ,yZ),ZZ=({activeTab:e,setActiveTab:t})=>{const{profile:n,signOut:r}=j0(),i=[{id:"dashboard",label:"Dashboard"},{id:"playbook",label:"Playbook"},{id:"staging",label:"Review & Publish"},{id:"integrations",label:"Integrations"}],s=n!=null&&n.full_name?n.full_name.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2):"?";return y.jsx("header",{className:"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-40",children:y.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 flex items-center justify-between h-14",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 rounded-lg gradient-primary flex items-center justify-center",children:y.jsx(R7,{className:"w-4 h-4 text-primary-foreground"})}),y.jsx("span",{className:"text-sm text-foreground",children:"Playbook Manager"})]}),y.jsx("nav",{className:"flex items-center gap-1",children:i.map(o=>y.jsx("button",{onClick:()=>t(o.id),className:`px-3 py-1.5 rounded-lg text-xs font-subheading transition-colors ${e===o.id?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:o.label},o.id))}),y.jsxs("div",{className:"flex items-center gap-2",children:[(n==null?void 0:n.full_name)&&y.jsx("span",{className:"text-xs text-muted-foreground hidden sm:inline",children:n.full_name}),y.jsx("div",{className:"w-7 h-7 rounded-full bg-primary/20 flex items-center justify-center text-[11px] font-overline text-primary",children:s}),y.jsx("button",{onClick:r,className:"w-7 h-7 rounded-full hover:bg-muted flex items-center justify-center transition-colors",title:"Sign out",children:y.jsx(F7,{className:"w-3.5 h-3.5 text-muted-foreground"})})]})]})})};function sS(){const e=ws({queryKey:["skills"],queryFn:async()=>{const[t,n,r]=await Promise.all([ce.from("skill_categories").select("*").order("sort_order"),ce.from("skills").select("*").order("sort_order"),ce.from("user_skills").select("*")]);if(t.error)throw t.error;if(n.error)throw n.error;if(r.error)throw r.error;const i=new Map((r.data??[]).map(s=>[s.skill_id,s]));return(t.data??[]).map(s=>({id:s.id,name:s.name,skills:(n.data??[]).filter(o=>o.category_id===s.id).map(o=>{const a=i.get(o.id);return{id:o.id,name:o.name,status:(a==null?void 0:a.status)??"missing",lastUpdated:(a==null?void 0:a.last_updated)??void 0,section:(a==null?void 0:a.section_title)??void 0,coverageNote:(a==null?void 0:a.coverage_note)??void 0,fulfilled:(a==null?void 0:a.fulfilled)??!1}})}))}});return{...e,isRefetching:e.isFetching&&!e.isLoading}}function D6(){const e=Gt();return Nn({mutationFn:async({skillId:t,fulfilled:n})=>{const{error:r}=await ce.from("user_skills").update({fulfilled:n}).eq("skill_id",t);if(r)throw r},onSuccess:()=>e.invalidateQueries({queryKey:["skills"]})})}function eee(e,t){const n=e.length;if(n===0)return{score:0,covered:0,total:0,partial:0,missing:0,outdated:0,lastAnalyzed:t??null};const r=e.filter(u=>u.status==="covered").length,i=e.filter(u=>u.status==="partial").length,s=e.filter(u=>u.status==="missing").length,o=new Date,a=e.filter(u=>u.lastUpdated?o.getTime()-new Date(u.lastUpdated).getTime()>90*24*60*60*1e3:!1).length;return{score:Math.round((r+i*.5)/n*100),covered:r,total:n,partial:i,missing:s,outdated:a,lastAnalyzed:t??null}}function tee(){return ws({queryKey:["analyzed-at"],queryFn:async()=>{const{data:{user:e}}=await ce.auth.getUser();if(!e)return null;const{data:t,error:n}=await ce.from("profiles").select("analyzed_at").eq("id",e.id).single();if(n)throw n;return(t==null?void 0:t.analyzed_at)??null}})}function M6(){const{data:e,isLoading:t,isRefetching:n}=sS(),{data:r,isLoading:i}=tee();return{data:w.useMemo(()=>{if(!e)return;const o=e.flatMap(a=>a.skills);return eee(o,r)},[e,r]),isLoading:t||i,isRefetching:n}}function nee(){return ws({queryKey:["imports"],queryFn:async()=>{const{data:e,error:t}=await ce.from("imports").select("*").order("started_at",{ascending:!1});if(t)throw t;return e??[]}})}function O6(e){const t=Gt();return Nn({mutationFn:async({provider:n,content:r,pdfBase64:i})=>{e==null||e("extracting");const{data:s,error:o}=await ce.functions.invoke("import",{body:{provider:n,content:r,pdfBase64:i}});if(o)throw o;e==null||e("analyzing");const{error:a}=await ce.functions.invoke("analyze");if(a)throw a;return s},onSuccess:()=>{t.invalidateQueries({queryKey:["imports"]}),t.invalidateQueries({queryKey:["playbook-sections"]}),t.invalidateQueries({queryKey:["skills"]}),t.invalidateQueries({queryKey:["health-score"]}),t.invalidateQueries({queryKey:["analyzed-at"]})}})}function ree(){const e=Gt();return Nn({mutationFn:async()=>{const{data:t,error:n}=await ce.functions.invoke("analyze");if(n)throw n;return t},onSuccess:()=>{e.invalidateQueries({queryKey:["playbook-sections"]}),e.invalidateQueries({queryKey:["skills"]}),e.invalidateQueries({queryKey:["health-score"]}),e.invalidateQueries({queryKey:["analyzed-at"]})}})}function I6(){const e=Gt();return Nn({mutationFn:async()=>{const{data:t,error:n}=await ce.functions.invoke("import-notion");if(n)throw n;return t},onSuccess:()=>{e.invalidateQueries({queryKey:["imports"]}),e.invalidateQueries({queryKey:["playbook-sections"]}),e.invalidateQueries({queryKey:["skills"]}),e.invalidateQueries({queryKey:["connections"]})}})}function j6(){const e=Gt();return Nn({mutationFn:async t=>{const{data:n,error:r}=await ce.functions.invoke("import-confluence",{body:t?{pageIds:t}:{}});if(r)throw r;return n},onSuccess:()=>{e.invalidateQueries({queryKey:["imports"]}),e.invalidateQueries({queryKey:["playbook-sections"]}),e.invalidateQueries({queryKey:["skills"]}),e.invalidateQueries({queryKey:["connections"]})}})}const iee=({activeFilter:e,onFilterChange:t})=>{const{data:n,isLoading:r,isRefetching:i}=M6(),s=ree();if(r||!n)return y.jsx("div",{className:"rounded-xl border border-border bg-card px-5 py-3 shadow-card flex items-center justify-center min-h-[52px]",children:y.jsx(qe,{className:"w-4 h-4 text-primary animate-spin"})});const o=n.score>=70?"text-success":n.score>=40?"text-warning":"text-destructive";return y.jsx(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-xl border border-border bg-card px-5 py-3 shadow-card",children:y.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-sm font-subheading text-foreground",children:"Playbook Health"}),y.jsx("span",{className:`text-xl font-overline font-mono ${o}`,children:n.score}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"/ 100"}),y.jsxs(aI,{children:[y.jsx(lI,{asChild:!0,children:y.jsx(L7,{className:"w-3.5 h-3.5 text-muted-foreground cursor-help"})}),y.jsxs(mC,{side:"bottom",className:"max-w-xs text-xs leading-relaxed",children:[y.jsx("p",{children:"Score = (covered + partial  0.5) / total skills  100"}),y.jsx("p",{className:"mt-1 text-muted-foreground",children:"Fully covered skills count 100%, partially covered count 50%. Skills not updated in 90+ days are flagged as outdated."})]})]}),i&&y.jsx(qe,{className:"w-3 h-3 text-muted-foreground animate-spin"})]}),y.jsx("div",{className:"h-5 w-px bg-border"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(rp,{icon:ti,label:"Covered",value:n.covered,color:"text-success",active:e==="covered",onClick:()=>t("covered")}),y.jsx(rp,{icon:nh,label:"Partial",value:n.partial,color:"text-warning",active:e==="partial",onClick:()=>t("partial")}),y.jsx(rp,{icon:th,label:"Missing",value:n.missing,color:"text-destructive",active:e==="missing",onClick:()=>t("missing")}),y.jsx(rp,{icon:Zk,label:"Outdated",value:n.outdated,color:"text-muted-foreground",active:e==="outdated",onClick:()=>t("outdated")})]}),y.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[y.jsx("span",{className:"text-xs text-muted-foreground",children:n.lastAnalyzed?`Last analyzed ${see(n.lastAnalyzed)}`:"Not yet analyzed"}),y.jsxs("button",{disabled:s.isPending,onClick:()=>s.mutate(),className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-subheading bg-muted/50 hover:bg-muted/80 transition-all disabled:opacity-50",children:[y.jsx(bO,{className:`w-3.5 h-3.5 text-muted-foreground ${s.isPending?"animate-spin":""}`}),y.jsx("span",{className:"text-muted-foreground",children:s.isPending?"Analyzing":"Re-analyze"})]})]})]})})};function see(e){const t=Date.now()-new Date(e).getTime(),n=Math.floor(t/6e4);if(n<1)return"just now";if(n<60)return`${n}m ago`;const r=Math.floor(n/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}function rp({icon:e,label:t,value:n,color:r,active:i,onClick:s}){return y.jsxs("button",{className:`flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-subheading transition-all ${i?"bg-primary/10 ring-2 ring-primary/30":"bg-muted/50 hover:bg-muted/80"}`,onClick:s,children:[y.jsx(e,{className:`w-3.5 h-3.5 ${r}`}),y.jsx("span",{className:"text-muted-foreground",children:t}),y.jsx("span",{className:`font-overline font-mono ${r}`,children:n})]})}var D1,V0="HoverCard",[L6,Iwe]=xs(V0,[gc]),U0=gc(),[oee,oS]=L6(V0),F6=e=>{const{__scopeHoverCard:t,children:n,open:r,defaultOpen:i,onOpenChange:s,openDelay:o=700,closeDelay:a=300}=e,l=U0(t),u=w.useRef(0),c=w.useRef(0),d=w.useRef(!1),f=w.useRef(!1),[h,p]=ml({prop:r,defaultProp:i??!1,onChange:s,caller:V0}),m=w.useCallback(()=>{clearTimeout(c.current),u.current=window.setTimeout(()=>p(!0),o)},[o,p]),g=w.useCallback(()=>{clearTimeout(u.current),!d.current&&!f.current&&(c.current=window.setTimeout(()=>p(!1),a))},[a,p]),b=w.useCallback(()=>p(!1),[p]);return w.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(c.current)},[]),y.jsx(oee,{scope:t,open:h,onOpenChange:p,onOpen:m,onClose:g,onDismiss:b,hasSelectionRef:d,isPointerDownOnContentRef:f,children:y.jsx(dC,{...l,children:n})})};F6.displayName=V0;var $6="HoverCardTrigger",z6=w.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,i=oS($6,n),s=U0(n);return y.jsx(A0,{asChild:!0,...s,children:y.jsx(De.a,{"data-state":i.open?"open":"closed",...r,ref:t,onPointerEnter:Se(e.onPointerEnter,rg(i.onOpen)),onPointerLeave:Se(e.onPointerLeave,rg(i.onClose)),onFocus:Se(e.onFocus,i.onOpen),onBlur:Se(e.onBlur,i.onClose),onTouchStart:Se(e.onTouchStart,o=>o.preventDefault())})})});z6.displayName=$6;var aee="HoverCardPortal",[jwe,lee]=L6(aee,{forceMount:void 0}),ng="HoverCardContent",B6=w.forwardRef((e,t)=>{const n=lee(ng,e.__scopeHoverCard),{forceMount:r=n.forceMount,...i}=e,s=oS(ng,e.__scopeHoverCard);return y.jsx(oi,{present:r||s.open,children:y.jsx(uee,{"data-state":s.open?"open":"closed",...i,onPointerEnter:Se(e.onPointerEnter,rg(s.onOpen)),onPointerLeave:Se(e.onPointerLeave,rg(s.onClose)),ref:t})})});B6.displayName=ng;var uee=w.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,...a}=e,l=oS(ng,n),u=U0(n),c=w.useRef(null),d=Tt(t,c),[f,h]=w.useState(!1);return w.useEffect(()=>{if(f){const p=document.body;return D1=p.style.userSelect||p.style.webkitUserSelect,p.style.userSelect="none",p.style.webkitUserSelect="none",()=>{p.style.userSelect=D1,p.style.webkitUserSelect=D1}}},[f]),w.useEffect(()=>{if(c.current){const p=()=>{h(!1),l.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var g;((g=document.getSelection())==null?void 0:g.toString())!==""&&(l.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",p),()=>{document.removeEventListener("pointerup",p),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!1}}},[l.isPointerDownOnContentRef,l.hasSelectionRef]),w.useEffect(()=>{c.current&&fee(c.current).forEach(m=>m.setAttribute("tabindex","-1"))}),y.jsx(fc,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:o,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:Se(s,p=>{p.preventDefault()}),onDismiss:l.onDismiss,children:y.jsx(fC,{...u,...a,onPointerDown:Se(a.onPointerDown,p=>{p.currentTarget.contains(p.target)&&h(!0),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!0}),ref:d,style:{...a.style,userSelect:f?"text":void 0,WebkitUserSelect:f?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),cee="HoverCardArrow",dee=w.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,i=U0(n);return y.jsx(hC,{...i,...r,ref:t})});dee.displayName=cee;function rg(e){return t=>t.pointerType==="touch"?void 0:e()}function fee(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var hee=F6,pee=z6,V6=B6;const U6=hee,H6=pee,aS=w.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},i)=>y.jsx(V6,{ref:i,align:t,sideOffset:n,className:Ct("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));aS.displayName=V6.displayName;const mee={covered:{icon:ti,label:"Covered",color:"text-success",bg:"bg-success/10",border:"border-success/20"},partial:{icon:nh,label:"Partial",color:"text-warning",bg:"bg-warning/10",border:"border-warning/20"},missing:{icon:th,label:"Missing",color:"text-destructive",bg:"bg-destructive/10",border:"border-destructive/20"}},MA=e=>e?new Date().getTime()-new Date(e).getTime()>90*24*60*60*1e3:!1,gee=({onFillGap:e,statusFilter:t})=>{const{data:n,isLoading:r,isRefetching:i}=sS(),s=D6();return r||!n?y.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-card flex items-center justify-center min-h-[300px]",children:y.jsx(qe,{className:"w-6 h-6 text-primary animate-spin"})}):y.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"rounded-xl border border-border bg-card p-6 shadow-card",children:[y.jsx("div",{className:"flex items-center justify-between mb-5",children:y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h2",{className:"text-lg text-foreground",children:"Knowledge Areas"}),i&&y.jsx(qe,{className:"w-3.5 h-3.5 text-muted-foreground animate-spin"})]}),y.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Coverage across sales competencies"})]})}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:n.map((o,a)=>{const l=o.skills.filter(d=>d.status==="covered").length,u=Math.round(l/o.skills.length*100),c=t?o.skills.filter(d=>t==="outdated"?MA(d.lastUpdated):d.status===t):o.skills;return t&&c.length===0?null:y.jsxs(Be.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15+a*.04},className:"rounded-lg border border-border/60 bg-muted/20 p-4",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("span",{className:"text-sm font-subheading text-foreground",children:o.name}),y.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:t?`${c.length} of ${o.skills.length}`:`${u}%`})]}),!t&&y.jsx("div",{className:"h-1.5 rounded-full bg-muted mb-3 overflow-hidden",children:y.jsx(Be.div,{className:"h-full rounded-full gradient-primary",initial:{width:0},animate:{width:`${u}%`},transition:{duration:1,delay:.3+a*.08}})}),y.jsx("div",{className:`grid gap-1.5 ${t?"mt-1":""}`,children:c.map(d=>{const f=mee[d.status],h=f.icon,p=MA(d.lastUpdated),m=d.status==="missing"||d.status==="partial"||p,g=d.status!=="covered",b=y.jsxs("div",{className:`flex items-center justify-between rounded-lg px-3 py-2 border ${d.fulfilled?"bg-muted/30 border-border/40":`${f.bg} ${f.border}`} ${m&&!d.fulfilled?"cursor-pointer hover:brightness-110 transition-all":"transition-all"}`,onClick:()=>m&&!d.fulfilled&&(e==null?void 0:e(d.id,d.name)),children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(h,{className:`w-3.5 h-3.5 ${d.fulfilled?"text-muted-foreground":f.color}`}),y.jsx("span",{className:`text-sm font-subheading ${d.fulfilled?"text-muted-foreground line-through":"text-foreground"}`,children:d.name}),d.fulfilled&&y.jsx("span",{className:"text-[10px] text-muted-foreground italic",children:"Dismissed"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[d.lastUpdated&&!d.fulfilled&&y.jsx("span",{className:`text-[10px] font-mono ${p?"text-destructive font-caption":"text-muted-foreground"}`,children:new Date(d.lastUpdated).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),m&&!d.fulfilled&&y.jsx("span",{className:"text-[10px] font-caption text-primary",children:p&&d.status==="covered"?"Update ":"Fill "})]})]});return g?y.jsxs(U6,{openDelay:300,closeDelay:200,children:[y.jsx(H6,{asChild:!0,children:b}),y.jsx(aS,{side:"right",className:"w-auto max-w-xs p-2 text-xs",children:y.jsxs("div",{className:"flex flex-col gap-1.5",children:[d.coverageNote&&y.jsx("p",{className:"text-muted-foreground",children:d.coverageNote}),y.jsx("button",{onClick:v=>{v.stopPropagation(),s.mutate({skillId:d.id,fulfilled:!d.fulfilled})},className:"text-[11px] font-subheading text-foreground hover:text-primary transition-colors text-left",children:d.fulfilled?"Undo":"Dismiss"})]})})]},d.id):y.jsx("div",{children:b},d.id)})})]},o.id)})})]})};function yee(e){return ws({queryKey:["chat-history",e],queryFn:async()=>{const{data:t,error:n}=await ce.from("chat_messages").select("*, staged_edits:staged_edits(id, section_id, before_text, after_text, created_at, status, playbook_sections!inner(title))").eq("conversation_id",e).order("created_at",{ascending:!0});if(n)throw n;return(t??[]).map(r=>{const i=r.role==="assistant"&&Array.isArray(r.staged_edits)&&r.staged_edits.length>0?r.staged_edits.map(s=>({id:s.id,sectionId:s.section_id,sectionTitle:s.playbook_sections.title,before:s.before_text,after:s.after_text,rationale:"",timestamp:s.created_at,status:s.status})):void 0;return{id:r.id,role:r.role,content:r.content,timestamp:r.created_at,edits:i}})},enabled:!!e})}function bee(){const[e,t]=w.useState(!1),[n,r]=w.useState(""),[i,s]=w.useState([]),[o,a]=w.useState([]),[l,u]=w.useState(!1),c=w.useRef(null),d=Gt(),f=w.useCallback(async(m,g)=>{t(!0),r(""),s([]),a([]),u(!1);const b=new AbortController;c.current=b;try{const{error:v}=await ce.auth.getUser();if(v)throw new Error("Not authenticated");const{data:{session:x}}=await ce.auth.getSession();if(!x)throw new Error("Not authenticated");const k=await fetch("https://orflcgfllgepvemxusbx.supabase.co/functions/v1/chat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x.access_token}`},body:JSON.stringify({message:m,conversationId:g.conversationId,sectionContext:g.sectionContext}),signal:b.signal});if(!k.ok){let I="Chat request failed";try{I=(await k.json()).error||I}catch{}throw new Error(I)}if(!k.body)throw new Error("No response body");const S=k.body.getReader(),C=new TextDecoder;let E="";const P=[];let R=[],A="";for(;;){const{done:I,value:U}=await S.read();if(I)break;const F=C.decode(U,{stream:!0});A+=F;const B=A.split(`
`);A=B.pop()??"";for(const q of B)if(q.startsWith("data: ")){const H=q.slice(6);if(H==="[DONE]")continue;try{const M=JSON.parse(H);if(M.type==="text"){E+=M.text;const D=E.replace(/\n*\{?\{["']?suggest[\s\S]*$/,"");r(D)}else M.type==="suggestions"?(R=M.options,a(M.options)):M.type==="tool_start"?u(!0):M.type==="staged_edit"?(u(!1),P.push(M.edit),s(D=>[...D,M.edit])):M.type==="tool_error"&&(u(!1),E+=`

*Error: ${M.error}*`,r(E))}catch{}}}return d.invalidateQueries({queryKey:["chat-history",g.conversationId]}),P.length>0&&d.invalidateQueries({queryKey:["staged-edits"]}),{content:E.replace(/\n*\{?\{["']?suggest["']?:\s*\[.*?\]\}?\}\s*$/,""),edits:P,suggestions:R}}finally{t(!1),u(!1),c.current=null}},[d]),h=w.useCallback(()=>{r(""),s([]),a([])},[]),p=w.useCallback(()=>{var m;(m=c.current)==null||m.abort()},[]);return{sendMessage:f,isStreaming:e,streamingContent:n,stagedEdits:i,suggestions:o,isToolRunning:l,abort:p,clearStream:h}}function vee(){return ws({queryKey:["staged-edits"],queryFn:async()=>{const{data:e,error:t}=await ce.from("staged_edits").select("*, playbook_sections!inner(title)").order("created_at",{ascending:!1});if(t)throw t;return(e??[]).map(n=>({id:n.id,sectionId:n.section_id,section:n.playbook_sections.title,before:n.before_text,after:n.after_text,timestamp:n.created_at,status:n.status,source:n.source??void 0}))}})}function xee(){const e=Gt();return Nn({mutationFn:async t=>{const{data:{user:n}}=await ce.auth.getUser(),r={section_id:t.sectionId,before_text:t.before,after_text:t.after,source:t.source,created_by:(n==null?void 0:n.id)??null};t.autoApprove&&(r.status="approved",r.reviewed_by=(n==null?void 0:n.id)??null,r.reviewed_at=new Date().toISOString());const{error:i}=await ce.from("staged_edits").insert(r);if(i)throw i},onSuccess:()=>{e.invalidateQueries({queryKey:["staged-edits"]})}})}function W6(){const e=Gt();return Nn({mutationFn:async t=>{const{data:{user:n}}=await ce.auth.getUser(),{error:r}=await ce.rpc("approve_staged_edit",{edit_id:t,reviewer_id:(n==null?void 0:n.id)??null});if(r)throw r},onSuccess:()=>{e.invalidateQueries({queryKey:["staged-edits"]}),e.invalidateQueries({queryKey:["playbook-sections"]})}})}function q6(){const e=Gt();return Nn({mutationFn:async t=>{const{data:{user:n}}=await ce.auth.getUser(),{error:r}=await ce.from("staged_edits").update({status:"rejected",reviewed_by:(n==null?void 0:n.id)??null,reviewed_at:new Date().toISOString()}).eq("id",t);if(r)throw r},onSuccess:()=>{e.invalidateQueries({queryKey:["staged-edits"]})}})}function wee(){const e=Gt();return Nn({mutationFn:async t=>{const{data:{user:n}}=await ce.auth.getUser(),{error:r}=await ce.rpc("unapprove_staged_edit",{edit_id:t,reviewer_id:(n==null?void 0:n.id)??null});if(r)throw r},onSuccess:()=>{e.invalidateQueries({queryKey:["staged-edits"]}),e.invalidateQueries({queryKey:["playbook-sections"]})}})}function kee(){const e=Gt();return Nn({mutationFn:async t=>{const{error:n}=await ce.from("staged_edits").update({status:"pending",reviewed_by:null,reviewed_at:null}).eq("id",t);if(n)throw n},onSuccess:()=>{e.invalidateQueries({queryKey:["staged-edits"]})}})}function K6(){const e=Gt();return Nn({mutationFn:async({editId:t,afterText:n})=>{const{error:r}=await ce.from("staged_edits").update({after_text:n}).eq("id",t).eq("status","pending");if(r)throw r},onSuccess:()=>{e.invalidateQueries({queryKey:["staged-edits"]})}})}function Cee(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const See=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Eee=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Tee={};function OA(e,t){return(Tee.jsx?Eee:See).test(e)}const _ee=/[ \t\n\f\r]/g;function Aee(e){return typeof e=="object"?e.type==="text"?IA(e.value):!1:IA(e)}function IA(e){return e.replace(_ee,"")===""}let uh=class{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}};uh.prototype.normal={};uh.prototype.property={};uh.prototype.space=void 0;function G6(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new uh(n,r,t)}function Hx(e){return e.toLowerCase()}class Wn{constructor(t,n){this.attribute=n,this.property=t}}Wn.prototype.attribute="";Wn.prototype.booleanish=!1;Wn.prototype.boolean=!1;Wn.prototype.commaOrSpaceSeparated=!1;Wn.prototype.commaSeparated=!1;Wn.prototype.defined=!1;Wn.prototype.mustUseProperty=!1;Wn.prototype.number=!1;Wn.prototype.overloadedBoolean=!1;Wn.prototype.property="";Wn.prototype.spaceSeparated=!1;Wn.prototype.space=void 0;let Pee=0;const Ce=bl(),Pt=bl(),Wx=bl(),Q=bl(),Je=bl(),wu=bl(),Qn=bl();function bl(){return 2**++Pee}const qx=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ce,booleanish:Pt,commaOrSpaceSeparated:Qn,commaSeparated:wu,number:Q,overloadedBoolean:Wx,spaceSeparated:Je},Symbol.toStringTag,{value:"Module"})),M1=Object.keys(qx);class lS extends Wn{constructor(t,n,r,i){let s=-1;if(super(t,n),jA(this,"space",i),typeof r=="number")for(;++s<M1.length;){const o=M1[s];jA(this,M1[s],(r&qx[o])===qx[o])}}}lS.prototype.defined=!0;function jA(e,t,n){n&&(e[t]=n)}function Sc(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new lS(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Hx(r)]=r,n[Hx(s.attribute)]=r}return new uh(t,n,e.space)}const J6=Sc({properties:{ariaActiveDescendant:null,ariaAtomic:Pt,ariaAutoComplete:null,ariaBusy:Pt,ariaChecked:Pt,ariaColCount:Q,ariaColIndex:Q,ariaColSpan:Q,ariaControls:Je,ariaCurrent:null,ariaDescribedBy:Je,ariaDetails:null,ariaDisabled:Pt,ariaDropEffect:Je,ariaErrorMessage:null,ariaExpanded:Pt,ariaFlowTo:Je,ariaGrabbed:Pt,ariaHasPopup:null,ariaHidden:Pt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Je,ariaLevel:Q,ariaLive:null,ariaModal:Pt,ariaMultiLine:Pt,ariaMultiSelectable:Pt,ariaOrientation:null,ariaOwns:Je,ariaPlaceholder:null,ariaPosInSet:Q,ariaPressed:Pt,ariaReadOnly:Pt,ariaRelevant:null,ariaRequired:Pt,ariaRoleDescription:Je,ariaRowCount:Q,ariaRowIndex:Q,ariaRowSpan:Q,ariaSelected:Pt,ariaSetSize:Q,ariaSort:null,ariaValueMax:Q,ariaValueMin:Q,ariaValueNow:Q,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Q6(e,t){return t in e?e[t]:t}function Y6(e,t){return Q6(e,t.toLowerCase())}const Ree=Sc({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:wu,acceptCharset:Je,accessKey:Je,action:null,allow:null,allowFullScreen:Ce,allowPaymentRequest:Ce,allowUserMedia:Ce,alt:null,as:null,async:Ce,autoCapitalize:null,autoComplete:Je,autoFocus:Ce,autoPlay:Ce,blocking:Je,capture:null,charSet:null,checked:Ce,cite:null,className:Je,cols:Q,colSpan:null,content:null,contentEditable:Pt,controls:Ce,controlsList:Je,coords:Q|wu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ce,defer:Ce,dir:null,dirName:null,disabled:Ce,download:Wx,draggable:Pt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ce,formTarget:null,headers:Je,height:Q,hidden:Wx,high:Q,href:null,hrefLang:null,htmlFor:Je,httpEquiv:Je,id:null,imageSizes:null,imageSrcSet:null,inert:Ce,inputMode:null,integrity:null,is:null,isMap:Ce,itemId:null,itemProp:Je,itemRef:Je,itemScope:Ce,itemType:Je,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ce,low:Q,manifest:null,max:null,maxLength:Q,media:null,method:null,min:null,minLength:Q,multiple:Ce,muted:Ce,name:null,nonce:null,noModule:Ce,noValidate:Ce,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ce,optimum:Q,pattern:null,ping:Je,placeholder:null,playsInline:Ce,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ce,referrerPolicy:null,rel:Je,required:Ce,reversed:Ce,rows:Q,rowSpan:Q,sandbox:Je,scope:null,scoped:Ce,seamless:Ce,selected:Ce,shadowRootClonable:Ce,shadowRootDelegatesFocus:Ce,shadowRootMode:null,shape:null,size:Q,sizes:null,slot:null,span:Q,spellCheck:Pt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Q,step:null,style:null,tabIndex:Q,target:null,title:null,translate:null,type:null,typeMustMatch:Ce,useMap:null,value:Pt,width:Q,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Je,axis:null,background:null,bgColor:null,border:Q,borderColor:null,bottomMargin:Q,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ce,declare:Ce,event:null,face:null,frame:null,frameBorder:null,hSpace:Q,leftMargin:Q,link:null,longDesc:null,lowSrc:null,marginHeight:Q,marginWidth:Q,noResize:Ce,noHref:Ce,noShade:Ce,noWrap:Ce,object:null,profile:null,prompt:null,rev:null,rightMargin:Q,rules:null,scheme:null,scrolling:Pt,standby:null,summary:null,text:null,topMargin:Q,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Q,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ce,disableRemotePlayback:Ce,prefix:null,property:null,results:Q,security:null,unselectable:null},space:"html",transform:Y6}),Nee=Sc({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Qn,accentHeight:Q,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Q,amplitude:Q,arabicForm:null,ascent:Q,attributeName:null,attributeType:null,azimuth:Q,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Q,by:null,calcMode:null,capHeight:Q,className:Je,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Q,diffuseConstant:Q,direction:null,display:null,dur:null,divisor:Q,dominantBaseline:null,download:Ce,dx:null,dy:null,edgeMode:null,editable:null,elevation:Q,enableBackground:null,end:null,event:null,exponent:Q,externalResourcesRequired:null,fill:null,fillOpacity:Q,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:wu,g2:wu,glyphName:wu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Q,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Q,horizOriginX:Q,horizOriginY:Q,id:null,ideographic:Q,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Q,k:Q,k1:Q,k2:Q,k3:Q,k4:Q,kernelMatrix:Qn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Q,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Q,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Q,overlineThickness:Q,paintOrder:null,panose1:null,path:null,pathLength:Q,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Je,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Q,pointsAtY:Q,pointsAtZ:Q,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Qn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Qn,rev:Qn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Qn,requiredFeatures:Qn,requiredFonts:Qn,requiredFormats:Qn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Q,specularExponent:Q,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Q,strikethroughThickness:Q,string:null,stroke:null,strokeDashArray:Qn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Q,strokeOpacity:Q,strokeWidth:null,style:null,surfaceScale:Q,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Qn,tabIndex:Q,tableValues:null,target:null,targetX:Q,targetY:Q,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Qn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Q,underlineThickness:Q,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Q,values:null,vAlphabetic:Q,vMathematical:Q,vectorEffect:null,vHanging:Q,vIdeographic:Q,version:null,vertAdvY:Q,vertOriginX:Q,vertOriginY:Q,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Q,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Q6}),X6=Sc({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Z6=Sc({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Y6}),e5=Sc({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Dee={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Mee=/[A-Z]/g,LA=/-[a-z]/g,Oee=/^data[-\w.:]+$/i;function Iee(e,t){const n=Hx(t);let r=t,i=Wn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Oee.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(LA,Lee);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!LA.test(s)){let o=s.replace(Mee,jee);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=lS}return new i(r,t)}function jee(e){return"-"+e.toLowerCase()}function Lee(e){return e.charAt(1).toUpperCase()}const Fee=G6([J6,Ree,X6,Z6,e5],"html"),uS=G6([J6,Nee,X6,Z6,e5],"svg");function $ee(e){return e.join(" ").trim()}var cS={},FA=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,zee=/\n/g,Bee=/^\s*/,Vee=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Uee=/^:\s*/,Hee=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Wee=/^[;\s]*/,qee=/^\s+|\s+$/g,Kee=`
`,$A="/",zA="*",pa="",Gee="comment",Jee="declaration";function Qee(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(zee);m&&(n+=m.length);var g=p.lastIndexOf(Kee);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),u(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function l(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function u(){l(Bee)}function c(p){var m;for(p=p||[];m=d();)m!==!1&&p.push(m);return p}function d(){var p=s();if(!($A!=e.charAt(0)||zA!=e.charAt(1))){for(var m=2;pa!=e.charAt(m)&&(zA!=e.charAt(m)||$A!=e.charAt(m+1));)++m;if(m+=2,pa===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:Gee,comment:g})}}function f(){var p=s(),m=l(Vee);if(m){if(d(),!l(Uee))return a("property missing ':'");var g=l(Hee),b=p({type:Jee,property:BA(m[0].replace(FA,pa)),value:g?BA(g[0].replace(FA,pa)):pa});return l(Wee),b}}function h(){var p=[];c(p);for(var m;m=f();)m!==!1&&(p.push(m),c(p));return p}return u(),h()}function BA(e){return e?e.replace(qee,pa):pa}var Yee=Qee,Xee=dm&&dm.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cS,"__esModule",{value:!0});cS.default=ete;const Zee=Xee(Yee);function ete(e,t){let n=null;if(!e||typeof e!="string")return n;const r=(0,Zee.default)(e),i=typeof t=="function";return r.forEach(s=>{if(s.type!=="declaration")return;const{property:o,value:a}=s;i?t(o,a,s):a&&(n=n||{},n[o]=a)}),n}var H0={};Object.defineProperty(H0,"__esModule",{value:!0});H0.camelCase=void 0;var tte=/^--[a-zA-Z0-9_-]+$/,nte=/-([a-z])/g,rte=/^[^-]+$/,ite=/^-(webkit|moz|ms|o|khtml)-/,ste=/^-(ms)-/,ote=function(e){return!e||rte.test(e)||tte.test(e)},ate=function(e,t){return t.toUpperCase()},VA=function(e,t){return"".concat(t,"-")},lte=function(e,t){return t===void 0&&(t={}),ote(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(ste,VA):e=e.replace(ite,VA),e.replace(nte,ate))};H0.camelCase=lte;var ute=dm&&dm.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},cte=ute(cS),dte=H0;function Kx(e,t){var n={};return!e||typeof e!="string"||(0,cte.default)(e,function(r,i){r&&i&&(n[(0,dte.camelCase)(r,t)]=i)}),n}Kx.default=Kx;var fte=Kx;const hte=Gf(fte),t5=n5("end"),dS=n5("start");function n5(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function pte(e){const t=dS(e),n=t5(e);if(t&&n)return{start:t,end:n}}function _d(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?UA(e.position):"start"in e||"end"in e?UA(e):"line"in e||"column"in e?Gx(e):""}function Gx(e){return HA(e&&e.line)+":"+HA(e&&e.column)}function UA(e){return Gx(e&&e.start)+"-"+Gx(e&&e.end)}function HA(e){return e&&typeof e=="number"?e:1}class yn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=_d(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}yn.prototype.file="";yn.prototype.name="";yn.prototype.reason="";yn.prototype.message="";yn.prototype.stack="";yn.prototype.column=void 0;yn.prototype.line=void 0;yn.prototype.ancestors=void 0;yn.prototype.cause=void 0;yn.prototype.fatal=void 0;yn.prototype.place=void 0;yn.prototype.ruleId=void 0;yn.prototype.source=void 0;const fS={}.hasOwnProperty,mte=new Map,gte=/[A-Z]/g,yte=new Set(["table","tbody","thead","tfoot","tr"]),bte=new Set(["td","th"]),r5="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function vte(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=_te(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Tte(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?uS:Fee,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=i5(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function i5(e,t,n){if(t.type==="element")return xte(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return wte(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Cte(e,t,n);if(t.type==="mdxjsEsm")return kte(e,t);if(t.type==="root")return Ste(e,t,n);if(t.type==="text")return Ete(e,t)}function xte(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=uS,e.schema=i),e.ancestors.push(t);const s=o5(e,t.tagName,!1),o=Ate(e,t);let a=pS(e,t);return yte.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!Aee(l):!0})),s5(e,o,s,t),hS(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function wte(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Sf(e,t.position)}function kte(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Sf(e,t.position)}function Cte(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=uS,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:o5(e,t.name,!0),o=Pte(e,t),a=pS(e,t);return s5(e,o,s,t),hS(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Ste(e,t,n){const r={};return hS(r,pS(e,t)),e.create(t,e.Fragment,r,n)}function Ete(e,t){return t.value}function s5(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function hS(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Tte(e,t,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:t;return a?u(s,o,a):u(s,o)}}function _te(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=dS(r);return t(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function Ate(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&fS.call(t.properties,i)){const s=Rte(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&bte.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Pte(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else Sf(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else Sf(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function pS(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:mte;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=i5(e,s,o);a!==void 0&&n.push(a)}return n}function Rte(e,t,n){const r=Iee(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Cee(n):$ee(n)),r.property==="style"){let i=typeof n=="object"?n:Nte(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Dte(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?Dee[r.property]||r.property:r.attribute,n]}}function Nte(e,t){try{return hte(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new yn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=r5+"#cannot-parse-style-attribute",i}}function o5(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=OA(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=OA(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return fS.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);Sf(e)}function Sf(e,t){const n=new yn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=r5+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Dte(e){const t={};let n;for(n in e)fS.call(e,n)&&(t[Mte(n)]=e[n]);return t}function Mte(e){let t=e.replace(gte,Ote);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Ote(e){return"-"+e.toLowerCase()}const O1={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Ite={};function mS(e,t){const n=Ite,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return a5(e,r,i)}function a5(e,t,n){if(jte(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return WA(e.children,t,n)}return Array.isArray(e)?WA(e,t,n):""}function WA(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=a5(e[i],t,n);return r.join("")}function jte(e){return!!(e&&typeof e=="object")}const qA=document.createElement("i");function gS(e){const t="&"+e+";";qA.innerHTML=t;const n=qA.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function sr(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function xr(e,t){return e.length>0?(sr(e,e.length,0,t),e):t}const KA={}.hasOwnProperty;function l5(e){const t={};let n=-1;for(;++n<e.length;)Lte(t,e[n]);return t}function Lte(e,t){let n;for(n in t){const i=(KA.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){KA.call(i,o)||(i[o]=[]);const a=s[o];Fte(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Fte(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);sr(e,0,0,r)}function u5(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ni(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Cn=Yo(/[A-Za-z]/),hn=Yo(/[\dA-Za-z]/),$te=Yo(/[#-'*+\--9=?A-Z^-~]/);function ig(e){return e!==null&&(e<32||e===127)}const Jx=Yo(/\d/),zte=Yo(/[\dA-Fa-f]/),Bte=Yo(/[!-/:-@[-`{-~]/);function pe(e){return e!==null&&e<-2}function Ke(e){return e!==null&&(e<0||e===32)}function Re(e){return e===-2||e===-1||e===32}const W0=Yo(new RegExp("\\p{P}|\\p{S}","u")),rl=Yo(/\s/);function Yo(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Ec(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&hn(e.charCodeAt(n+1))&&hn(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Ie(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Re(l)?(e.enter(n),a(l)):t(l)}function a(l){return Re(l)&&s++<i?(e.consume(l),a):(e.exit(n),t(l))}}const Vte={tokenize:Ute};function Ute(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ie(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return pe(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Hte={tokenize:Wte},GA={tokenize:qte};function Wte(e){const t=this,n=[];let r=0,i,s,o;return a;function a(x){if(r<n.length){const k=n[r];return t.containerState=k[1],e.attempt(k[0].continuation,l,u)(x)}return u(x)}function l(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const k=t.events.length;let S=k,C;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){C=t.events[S][1].end;break}b(r);let E=k;for(;E<t.events.length;)t.events[E][1].end={...C},E++;return sr(t.events,S+1,0,t.events.slice(k)),t.events.length=E,u(x)}return a(x)}function u(x){if(r===n.length){if(!i)return f(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(GA,c,d)(x)}function c(x){return i&&v(),b(r),f(x)}function d(x){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(x)}function f(x){return t.containerState={},e.attempt(GA,h,p)(x)}function h(x){return r++,n.push([t.currentConstruct,t.containerState]),f(x)}function p(x){if(x===null){i&&v(),b(0),e.consume(x);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),m(x)}function m(x){if(x===null){g(e.exit("chunkFlow"),!0),b(0),e.consume(x);return}return pe(x)?(e.consume(x),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(x),m)}function g(x,k){const S=t.sliceStream(x);if(k&&S.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(S),t.parser.lazy[x.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const E=t.events.length;let P=E,R,A;for(;P--;)if(t.events[P][0]==="exit"&&t.events[P][1].type==="chunkFlow"){if(R){A=t.events[P][1].end;break}R=!0}for(b(r),C=E;C<t.events.length;)t.events[C][1].end={...A},C++;sr(t.events,P+1,0,t.events.slice(E)),t.events.length=C}}function b(x){let k=n.length;for(;k-- >x;){const S=n[k];t.containerState=S[1],S[0].exit.call(t,e)}n.length=x}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function qte(e,t,n){return Ie(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Qu(e){if(e===null||Ke(e)||rl(e))return 1;if(W0(e))return 2}function q0(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Qx={name:"attention",resolveAll:Kte,tokenize:Gte};function Kte(e,t){let n=-1,r,i,s,o,a,l,u,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},f={...e[n][1].start};JA(d,-l),JA(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},e[r][1].end={...o.start},e[n][1].start={...a.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=xr(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=xr(u,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=xr(u,q0(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=xr(u,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,u=xr(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,sr(e,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Gte(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Qu(r);let s;return o;function o(l){return s=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===s)return e.consume(l),a;const u=e.exit("attentionSequence"),c=Qu(l),d=!c||c===2&&i||n.includes(l),f=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?d:d&&(i||!f)),u._close=!!(s===42?f:f&&(c||!d)),t(l)}}function JA(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Jte={name:"autolink",tokenize:Qte};function Qte(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Cn(h)?(e.consume(h),o):h===64?n(h):u(h)}function o(h){return h===43||h===45||h===46||hn(h)?(r=1,a(h)):u(h)}function a(h){return h===58?(e.consume(h),r=0,l):(h===43||h===45||h===46||hn(h))&&r++<32?(e.consume(h),a):(r=0,u(h))}function l(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||ig(h)?n(h):(e.consume(h),l)}function u(h){return h===64?(e.consume(h),c):$te(h)?(e.consume(h),u):n(h)}function c(h){return hn(h)?d(h):n(h)}function d(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):f(h)}function f(h){if((h===45||hn(h))&&r++<63){const p=h===45?f:d;return e.consume(h),p}return n(h)}}const ch={partial:!0,tokenize:Yte};function Yte(e,t,n){return r;function r(s){return Re(s)?Ie(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||pe(s)?t(s):n(s)}}const c5={continuation:{tokenize:Zte},exit:ene,name:"blockQuote",tokenize:Xte};function Xte(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Re(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Zte(e,t,n){const r=this;return i;function i(o){return Re(o)?Ie(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(c5,t,n)(o)}}function ene(e){e.exit("blockQuote")}const d5={name:"characterEscape",tokenize:tne};function tne(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Bte(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const f5={name:"characterReference",tokenize:nne};function nne(e,t,n){const r=this;let i=0,s,o;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),l}function l(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=hn,c(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=zte,c):(e.enter("characterReferenceValue"),s=7,o=Jx,c(d))}function c(d){if(d===59&&i){const f=e.exit("characterReferenceValue");return o===hn&&!gS(r.sliceSerialize(f))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&i++<s?(e.consume(d),c):n(d)}}const QA={partial:!0,tokenize:ine},YA={concrete:!0,name:"codeFenced",tokenize:rne};function rne(e,t,n){const r=this,i={partial:!0,tokenize:S};let s=0,o=0,a;return l;function l(C){return u(C)}function u(C){const E=r.events[r.events.length-1];return s=E&&E[1].type==="linePrefix"?E[2].sliceSerialize(E[1],!0).length:0,a=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(C)}function c(C){return C===a?(o++,e.consume(C),c):o<3?n(C):(e.exit("codeFencedFenceSequence"),Re(C)?Ie(e,d,"whitespace")(C):d(C))}function d(C){return C===null||pe(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(QA,m,k)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(C))}function f(C){return C===null||pe(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(C)):Re(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ie(e,h,"whitespace")(C)):C===96&&C===a?n(C):(e.consume(C),f)}function h(C){return C===null||pe(C)?d(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||pe(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(C)):C===96&&C===a?n(C):(e.consume(C),p)}function m(C){return e.attempt(i,k,g)(C)}function g(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),b}function b(C){return s>0&&Re(C)?Ie(e,v,"linePrefix",s+1)(C):v(C)}function v(C){return C===null||pe(C)?e.check(QA,m,k)(C):(e.enter("codeFlowValue"),x(C))}function x(C){return C===null||pe(C)?(e.exit("codeFlowValue"),v(C)):(e.consume(C),x)}function k(C){return e.exit("codeFenced"),t(C)}function S(C,E,P){let R=0;return A;function A(B){return C.enter("lineEnding"),C.consume(B),C.exit("lineEnding"),L}function L(B){return C.enter("codeFencedFence"),Re(B)?Ie(C,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):I(B)}function I(B){return B===a?(C.enter("codeFencedFenceSequence"),U(B)):P(B)}function U(B){return B===a?(R++,C.consume(B),U):R>=o?(C.exit("codeFencedFenceSequence"),Re(B)?Ie(C,F,"whitespace")(B):F(B)):P(B)}function F(B){return B===null||pe(B)?(C.exit("codeFencedFence"),E(B)):P(B)}}}function ine(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const I1={name:"codeIndented",tokenize:one},sne={partial:!0,tokenize:ane};function one(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),Ie(e,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):pe(u)?e.attempt(sne,o,l)(u):(e.enter("codeFlowValue"),a(u))}function a(u){return u===null||pe(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),a)}function l(u){return e.exit("codeIndented"),t(u)}}function ane(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):pe(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Ie(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):pe(o)?i(o):n(o)}}const lne={name:"codeText",previous:cne,resolve:une,tokenize:dne};function une(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function cne(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function dne(e,t,n){let r=0,i,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),l):d===96?(s=e.enter("codeTextSequence"),i=0,c(d)):pe(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||pe(d)?(e.exit("codeTextData"),l(d)):(e.consume(d),u)}function c(d){return d===96?(e.consume(d),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",u(d))}}class fne{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Bc(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Bc(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Bc(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Bc(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Bc(this.left,n.reverse())}}}function Bc(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function h5(e){const t={};let n=-1,r,i,s,o,a,l,u;const c=new fne(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,hne(c,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return sr(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function hne(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let c,d,f=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),d&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),f=g.length;f--;){const b=a.slice(g[f],g[f+1]),v=s.pop();l.push([v,v+b.length-1]),e.splice(v,2,b)}for(l.reverse(),f=-1;++f<l.length;)u[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return u}const pne={resolve:gne,tokenize:yne},mne={partial:!0,tokenize:bne};function gne(e){return h5(e),e}function yne(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):pe(a)?e.check(mne,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function bne(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ie(e,s,"linePrefix")}function s(o){if(o===null||pe(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function p5(e,t,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return d;function d(b){return b===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(b),e.exit(s),f):b===null||b===32||b===41||ig(b)?n(b):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(b))}function f(b){return b===62?(e.enter(s),e.consume(b),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(b))}function h(b){return b===62?(e.exit("chunkString"),e.exit(a),f(b)):b===null||b===60||pe(b)?n(b):(e.consume(b),b===92?p:h)}function p(b){return b===60||b===62||b===92?(e.consume(b),h):h(b)}function m(b){return!c&&(b===null||b===41||Ke(b))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(b)):c<u&&b===40?(e.consume(b),c++,m):b===41?(e.consume(b),c--,m):b===null||b===32||b===40||ig(b)?n(b):(e.consume(b),b===92?g:m)}function g(b){return b===40||b===41||b===92?(e.consume(b),m):m(b)}}function m5(e,t,n,r,i,s){const o=this;let a=0,l;return u;function u(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!l||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):pe(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||pe(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),l||(l=!Re(h)),h===92?f:d)}function f(h){return h===91||h===92||h===93?(e.consume(h),a++,d):d(h)}}function g5(e,t,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(e.enter(r),e.enter(i),e.consume(f),e.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):(e.enter(s),u(f))}function u(f){return f===o?(e.exit(s),l(o)):f===null?n(f):pe(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),Ie(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||pe(f)?(e.exit("chunkString"),u(f)):(e.consume(f),f===92?d:c)}function d(f){return f===o||f===92?(e.consume(f),c):c(f)}}function Ad(e,t){let n;return r;function r(i){return pe(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Re(i)?Ie(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const vne={name:"definition",tokenize:wne},xne={partial:!0,tokenize:kne};function wne(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return m5.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=ni(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),l):n(h)}function l(h){return Ke(h)?Ad(e,u)(h):u(h)}function u(h){return p5(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(xne,d,d)(h)}function d(h){return Re(h)?Ie(e,f,"whitespace")(h):f(h)}function f(h){return h===null||pe(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function kne(e,t,n){return r;function r(a){return Ke(a)?Ad(e,i)(a):n(a)}function i(a){return g5(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Re(a)?Ie(e,o,"whitespace")(a):o(a)}function o(a){return a===null||pe(a)?t(a):n(a)}}const Cne={name:"hardBreakEscape",tokenize:Sne};function Sne(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return pe(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Ene={name:"headingAtx",resolve:Tne,tokenize:_ne};function Tne(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},sr(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function _ne(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Ke(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),l(c)):c===null||pe(c)?(e.exit("atxHeading"),t(c)):Re(c)?Ie(e,a,"whitespace")(c):(e.enter("atxHeadingText"),u(c))}function l(c){return c===35?(e.consume(c),l):(e.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||Ke(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),u)}}const Ane=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],XA=["pre","script","style","textarea"],Pne={concrete:!0,name:"htmlFlow",resolveTo:Dne,tokenize:Mne},Rne={partial:!0,tokenize:Ine},Nne={partial:!0,tokenize:One};function Dne(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Mne(e,t,n){const r=this;let i,s,o,a,l;return u;function u(_){return c(_)}function c(_){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(_),d}function d(_){return _===33?(e.consume(_),f):_===47?(e.consume(_),s=!0,m):_===63?(e.consume(_),i=3,r.interrupt?t:T):Cn(_)?(e.consume(_),o=String.fromCharCode(_),g):n(_)}function f(_){return _===45?(e.consume(_),i=2,h):_===91?(e.consume(_),i=5,a=0,p):Cn(_)?(e.consume(_),i=4,r.interrupt?t:T):n(_)}function h(_){return _===45?(e.consume(_),r.interrupt?t:T):n(_)}function p(_){const W="CDATA[";return _===W.charCodeAt(a++)?(e.consume(_),a===W.length?r.interrupt?t:I:p):n(_)}function m(_){return Cn(_)?(e.consume(_),o=String.fromCharCode(_),g):n(_)}function g(_){if(_===null||_===47||_===62||Ke(_)){const W=_===47,X=o.toLowerCase();return!W&&!s&&XA.includes(X)?(i=1,r.interrupt?t(_):I(_)):Ane.includes(o.toLowerCase())?(i=6,W?(e.consume(_),b):r.interrupt?t(_):I(_)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(_):s?v(_):x(_))}return _===45||hn(_)?(e.consume(_),o+=String.fromCharCode(_),g):n(_)}function b(_){return _===62?(e.consume(_),r.interrupt?t:I):n(_)}function v(_){return Re(_)?(e.consume(_),v):A(_)}function x(_){return _===47?(e.consume(_),A):_===58||_===95||Cn(_)?(e.consume(_),k):Re(_)?(e.consume(_),x):A(_)}function k(_){return _===45||_===46||_===58||_===95||hn(_)?(e.consume(_),k):S(_)}function S(_){return _===61?(e.consume(_),C):Re(_)?(e.consume(_),S):x(_)}function C(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(e.consume(_),l=_,E):Re(_)?(e.consume(_),C):P(_)}function E(_){return _===l?(e.consume(_),l=null,R):_===null||pe(_)?n(_):(e.consume(_),E)}function P(_){return _===null||_===34||_===39||_===47||_===60||_===61||_===62||_===96||Ke(_)?S(_):(e.consume(_),P)}function R(_){return _===47||_===62||Re(_)?x(_):n(_)}function A(_){return _===62?(e.consume(_),L):n(_)}function L(_){return _===null||pe(_)?I(_):Re(_)?(e.consume(_),L):n(_)}function I(_){return _===45&&i===2?(e.consume(_),q):_===60&&i===1?(e.consume(_),H):_===62&&i===4?(e.consume(_),J):_===63&&i===3?(e.consume(_),T):_===93&&i===5?(e.consume(_),D):pe(_)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Rne,O,U)(_)):_===null||pe(_)?(e.exit("htmlFlowData"),U(_)):(e.consume(_),I)}function U(_){return e.check(Nne,F,O)(_)}function F(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),B}function B(_){return _===null||pe(_)?U(_):(e.enter("htmlFlowData"),I(_))}function q(_){return _===45?(e.consume(_),T):I(_)}function H(_){return _===47?(e.consume(_),o="",M):I(_)}function M(_){if(_===62){const W=o.toLowerCase();return XA.includes(W)?(e.consume(_),J):I(_)}return Cn(_)&&o.length<8?(e.consume(_),o+=String.fromCharCode(_),M):I(_)}function D(_){return _===93?(e.consume(_),T):I(_)}function T(_){return _===62?(e.consume(_),J):_===45&&i===2?(e.consume(_),T):I(_)}function J(_){return _===null||pe(_)?(e.exit("htmlFlowData"),O(_)):(e.consume(_),J)}function O(_){return e.exit("htmlFlow"),t(_)}}function One(e,t,n){const r=this;return i;function i(o){return pe(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Ine(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(ch,t,n)}}const jne={name:"htmlText",tokenize:Lne};function Lne(e,t,n){const r=this;let i,s,o;return a;function a(T){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(T),l}function l(T){return T===33?(e.consume(T),u):T===47?(e.consume(T),S):T===63?(e.consume(T),x):Cn(T)?(e.consume(T),P):n(T)}function u(T){return T===45?(e.consume(T),c):T===91?(e.consume(T),s=0,p):Cn(T)?(e.consume(T),v):n(T)}function c(T){return T===45?(e.consume(T),h):n(T)}function d(T){return T===null?n(T):T===45?(e.consume(T),f):pe(T)?(o=d,H(T)):(e.consume(T),d)}function f(T){return T===45?(e.consume(T),h):d(T)}function h(T){return T===62?q(T):T===45?f(T):d(T)}function p(T){const J="CDATA[";return T===J.charCodeAt(s++)?(e.consume(T),s===J.length?m:p):n(T)}function m(T){return T===null?n(T):T===93?(e.consume(T),g):pe(T)?(o=m,H(T)):(e.consume(T),m)}function g(T){return T===93?(e.consume(T),b):m(T)}function b(T){return T===62?q(T):T===93?(e.consume(T),b):m(T)}function v(T){return T===null||T===62?q(T):pe(T)?(o=v,H(T)):(e.consume(T),v)}function x(T){return T===null?n(T):T===63?(e.consume(T),k):pe(T)?(o=x,H(T)):(e.consume(T),x)}function k(T){return T===62?q(T):x(T)}function S(T){return Cn(T)?(e.consume(T),C):n(T)}function C(T){return T===45||hn(T)?(e.consume(T),C):E(T)}function E(T){return pe(T)?(o=E,H(T)):Re(T)?(e.consume(T),E):q(T)}function P(T){return T===45||hn(T)?(e.consume(T),P):T===47||T===62||Ke(T)?R(T):n(T)}function R(T){return T===47?(e.consume(T),q):T===58||T===95||Cn(T)?(e.consume(T),A):pe(T)?(o=R,H(T)):Re(T)?(e.consume(T),R):q(T)}function A(T){return T===45||T===46||T===58||T===95||hn(T)?(e.consume(T),A):L(T)}function L(T){return T===61?(e.consume(T),I):pe(T)?(o=L,H(T)):Re(T)?(e.consume(T),L):R(T)}function I(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(e.consume(T),i=T,U):pe(T)?(o=I,H(T)):Re(T)?(e.consume(T),I):(e.consume(T),F)}function U(T){return T===i?(e.consume(T),i=void 0,B):T===null?n(T):pe(T)?(o=U,H(T)):(e.consume(T),U)}function F(T){return T===null||T===34||T===39||T===60||T===61||T===96?n(T):T===47||T===62||Ke(T)?R(T):(e.consume(T),F)}function B(T){return T===47||T===62||Ke(T)?R(T):n(T)}function q(T){return T===62?(e.consume(T),e.exit("htmlTextData"),e.exit("htmlText"),t):n(T)}function H(T){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),M}function M(T){return Re(T)?Ie(e,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):D(T)}function D(T){return e.enter("htmlTextData"),o(T)}}const yS={name:"labelEnd",resolveAll:Bne,resolveTo:Vne,tokenize:Une},Fne={tokenize:Hne},$ne={tokenize:Wne},zne={tokenize:qne};function Bne(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&sr(e,0,e.length,n),e}function Vne(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},c={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return a=[["enter",l,t],["enter",u,t]],a=xr(a,e.slice(s+1,s+r+3)),a=xr(a,[["enter",c,t]]),a=xr(a,q0(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=xr(a,[["exit",c,t],e[o-2],e[o-1],["exit",u,t]]),a=xr(a,e.slice(o+1)),a=xr(a,[["exit",l,t]]),sr(e,s,e.length,a),e}function Une(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?d(f):(o=r.parser.defined.includes(ni(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),l):n(f)}function l(f){return f===40?e.attempt(Fne,c,o?c:d)(f):f===91?e.attempt($ne,c,o?u:d)(f):o?c(f):d(f)}function u(f){return e.attempt(zne,c,d)(f)}function c(f){return t(f)}function d(f){return s._balanced=!0,n(f)}}function Hne(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return Ke(d)?Ad(e,s)(d):s(d)}function s(d){return d===41?c(d):p5(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Ke(d)?Ad(e,l)(d):c(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?g5(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function u(d){return Ke(d)?Ad(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function Wne(e,t,n){const r=this;return i;function i(a){return m5.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(ni(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function qne(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Kne={name:"labelStartImage",resolveAll:yS.resolveAll,tokenize:Gne};function Gne(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Jne={name:"labelStartLink",resolveAll:yS.resolveAll,tokenize:Qne};function Qne(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const j1={name:"lineEnding",tokenize:Yne};function Yne(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ie(e,t,"linePrefix")}}const Zp={name:"thematicBreak",tokenize:Xne};function Xne(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(e.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||pe(u))?(e.exit("thematicBreak"),t(u)):n(u)}function l(u){return u===i?(e.consume(u),r++,l):(e.exit("thematicBreakSequence"),Re(u)?Ie(e,a,"whitespace")(u):a(u))}}const Dn={continuation:{tokenize:nre},exit:ire,name:"list",tokenize:tre},Zne={partial:!0,tokenize:sre},ere={partial:!0,tokenize:rre};function tre(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:Jx(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(Zp,n,u)(h):u(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(h)}return n(h)}function l(h){return Jx(h)&&++o<10?(e.consume(h),l):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),u(h)):n(h)}function u(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(ch,r.interrupt?n:c,e.attempt(Zne,f,d))}function c(h){return r.containerState.initialBlankLine=!0,s++,f(h)}function d(h){return Re(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),f):n(h)}function f(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function nre(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ch,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ie(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Re(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(ere,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ie(e,e.attempt(Dn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function rre(e,t,n){const r=this;return Ie(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function ire(e){e.exit(this.containerState.type)}function sre(e,t,n){const r=this;return Ie(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Re(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const ZA={name:"setextUnderline",resolveTo:ore,tokenize:are};function ore(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function are(e,t,n){const r=this;let i;return s;function s(u){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(e.consume(u),a):(e.exit("setextHeadingLineSequence"),Re(u)?Ie(e,l,"lineSuffix")(u):l(u))}function l(u){return u===null||pe(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const lre={tokenize:ure};function ure(e){const t=this,n=e.attempt(ch,r,e.attempt(this.parser.constructs.flowInitial,i,Ie(e,e.attempt(this.parser.constructs.flow,i,e.attempt(pne,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const cre={resolveAll:b5()},dre=y5("string"),fre=y5("text");function y5(e){return{resolveAll:b5(e==="text"?hre:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const d=i[c];let f=-1;if(d)for(;++f<d.length;){const h=d[f];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function b5(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function hre(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const u={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const pre={42:Dn,43:Dn,45:Dn,48:Dn,49:Dn,50:Dn,51:Dn,52:Dn,53:Dn,54:Dn,55:Dn,56:Dn,57:Dn,62:c5},mre={91:vne},gre={[-2]:I1,[-1]:I1,32:I1},yre={35:Ene,42:Zp,45:[ZA,Zp],60:Pne,61:ZA,95:Zp,96:YA,126:YA},bre={38:f5,92:d5},vre={[-5]:j1,[-4]:j1,[-3]:j1,33:Kne,38:f5,42:Qx,60:[Jte,jne],91:Jne,92:[Cne,d5],93:yS,95:Qx,96:lne},xre={null:[Qx,cre]},wre={null:[42,95]},kre={null:[]},Cre=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:wre,contentInitial:mre,disable:kre,document:pre,flow:yre,flowInitial:gre,insideSpan:xre,string:bre,text:vre},Symbol.toStringTag,{value:"Module"}));function Sre(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:E(S),check:E(C),consume:v,enter:x,exit:k,interrupt:E(C,{interrupt:!0})},u={code:null,containerState:{},defineSkip:m,events:[],now:p,parser:e,previous:null,sliceSerialize:f,sliceStream:h,write:d};let c=t.tokenize.call(u,l);return t.resolveAll&&s.push(t),u;function d(L){return o=xr(o,L),g(),o[o.length-1]!==null?[]:(P(t,0),u.events=q0(s,u.events,u),u.events)}function f(L,I){return Tre(h(L),I)}function h(L){return Ere(o,L)}function p(){const{_bufferIndex:L,_index:I,line:U,column:F,offset:B}=r;return{_bufferIndex:L,_index:I,line:U,column:F,offset:B}}function m(L){i[L.line]=L.column,A()}function g(){let L;for(;r._index<o.length;){const I=o[r._index];if(typeof I=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<I.length;)b(I.charCodeAt(r._bufferIndex));else b(I)}}function b(L){c=c(L)}function v(L){pe(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,A()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=L}function x(L,I){const U=I||{};return U.type=L,U.start=p(),u.events.push(["enter",U,u]),a.push(U),U}function k(L){const I=a.pop();return I.end=p(),u.events.push(["exit",I,u]),I}function S(L,I){P(L,I.from)}function C(L,I){I.restore()}function E(L,I){return U;function U(F,B,q){let H,M,D,T;return Array.isArray(F)?O(F):"tokenize"in F?O([F]):J(F);function J(ne){return $;function $(ie){const be=ie!==null&&ne[ie],Me=ie!==null&&ne.null,gt=[...Array.isArray(be)?be:be?[be]:[],...Array.isArray(Me)?Me:Me?[Me]:[]];return O(gt)(ie)}}function O(ne){return H=ne,M=0,ne.length===0?q:_(ne[M])}function _(ne){return $;function $(ie){return T=R(),D=ne,ne.partial||(u.currentConstruct=ne),ne.name&&u.parser.constructs.disable.null.includes(ne.name)?X():ne.tokenize.call(I?Object.assign(Object.create(u),I):u,l,W,X)(ie)}}function W(ne){return L(D,T),B}function X(ne){return T.restore(),++M<H.length?_(H[M]):q}}}function P(L,I){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&sr(u.events,I,u.events.length-I,L.resolve(u.events.slice(I),u)),L.resolveTo&&(u.events=L.resolveTo(u.events,u))}function R(){const L=p(),I=u.previous,U=u.currentConstruct,F=u.events.length,B=Array.from(a);return{from:F,restore:q};function q(){r=L,u.previous=I,u.currentConstruct=U,u.events.length=F,a=B,A()}}function A(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Ere(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Tre(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function _re(e){const r={constructs:l5([Cre,...(e||{}).extensions||[]]),content:i(Vte),defined:[],document:i(Hte),flow:i(lre),lazy:{},string:i(dre),text:i(fre)};return r;function i(s){return o;function o(a){return Sre(r,s,a)}}}function Are(e){for(;!h5(e););return e}const e3=/[\0\t\n\r]/g;function Pre(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,d,f,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(e3.lastIndex=d,u=e3.exec(s),f=u&&u.index!==void 0?u.index:s.length,h=s.charCodeAt(f),!u){t=s.slice(d);break}if(h===10&&d===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<f&&(l.push(s.slice(d,f)),e+=f-d),h){case 0:{l.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,l.push(-2);e++<c;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}d=f+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const Rre=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Nre(e){return e.replace(Rre,Dre)}function Dre(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return u5(n.slice(s?2:1),s?16:10)}return gS(n)||e}const v5={}.hasOwnProperty;function Mre(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Ore(n)(Are(_re(n).document().write(Pre()(e,t,!0))))}function Ore(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Le),autolinkProtocol:R,autolinkEmail:R,atxHeading:s(ee),blockQuote:s(Me),characterEscape:R,characterReference:R,codeFenced:s(gt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(gt,o),codeText:s(on,o),codeTextData:R,data:R,codeFlowValue:R,definition:s(_t),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(j),hardBreakEscape:s(ae),hardBreakTrailing:s(ae),htmlFlow:s(xe,o),htmlFlowData:R,htmlText:s(xe,o),htmlTextData:R,image:s(Ee),label:o,link:s(Le),listItem:s(Mr),listItemValue:f,listOrdered:s(dr,d),listUnordered:s(dr),paragraph:s(wl),reference:_,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ee),strong:s(Vi),thematicBreak:s(Ey)},exit:{atxHeading:l(),atxHeadingSequence:S,autolink:l(),autolinkEmail:be,autolinkProtocol:ie,blockQuote:l(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:ne,characterReference:$,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:A,codeIndented:l(b),codeText:l(B),codeTextData:A,data:A,definition:l(),definitionDestinationString:k,definitionLabelString:v,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(I),hardBreakTrailing:l(I),htmlFlow:l(U),htmlFlowData:A,htmlText:l(F),htmlTextData:A,image:l(H),label:D,labelText:M,lineEnding:L,link:l(q),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:W,resourceDestinationString:T,resourceTitleString:J,resource:O,setextHeading:l(P),setextHeadingLineSequence:E,setextHeadingText:C,strong:l(),thematicBreak:l()}};x5(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(z){let Z={type:"root",children:[]};const ve={stack:[Z],tokenStack:[],config:t,enter:a,exit:u,buffer:o,resume:c,data:n},Pe=[];let Fe=-1;for(;++Fe<z.length;)if(z[Fe][1].type==="listOrdered"||z[Fe][1].type==="listUnordered")if(z[Fe][0]==="enter")Pe.push(Fe);else{const Kn=Pe.pop();Fe=i(z,Kn,Fe)}for(Fe=-1;++Fe<z.length;){const Kn=t[z[Fe][0]];v5.call(Kn,z[Fe][1].type)&&Kn[z[Fe][1].type].call(Object.assign({sliceSerialize:z[Fe][2].sliceSerialize},ve),z[Fe][1])}if(ve.tokenStack.length>0){const Kn=ve.tokenStack[ve.tokenStack.length-1];(Kn[1]||t3).call(ve,void 0,Kn[0])}for(Z.position={start:Ms(z.length>0?z[0][1].start:{line:1,column:1,offset:0}),end:Ms(z.length>0?z[z.length-2][1].end:{line:1,column:1,offset:0})},Fe=-1;++Fe<t.transforms.length;)Z=t.transforms[Fe](Z)||Z;return Z}function i(z,Z,ve){let Pe=Z-1,Fe=-1,Kn=!1,ci,Gn,fr,Es;for(;++Pe<=ve;){const At=z[Pe];switch(At[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{At[0]==="enter"?Fe++:Fe--,Es=void 0;break}case"lineEndingBlank":{At[0]==="enter"&&(ci&&!Es&&!Fe&&!fr&&(fr=Pe),Es=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Es=void 0}if(!Fe&&At[0]==="enter"&&At[1].type==="listItemPrefix"||Fe===-1&&At[0]==="exit"&&(At[1].type==="listUnordered"||At[1].type==="listOrdered")){if(ci){let Ts=Pe;for(Gn=void 0;Ts--;){const Or=z[Ts];if(Or[1].type==="lineEnding"||Or[1].type==="lineEndingBlank"){if(Or[0]==="exit")continue;Gn&&(z[Gn][1].type="lineEndingBlank",Kn=!0),Or[1].type="lineEnding",Gn=Ts}else if(!(Or[1].type==="linePrefix"||Or[1].type==="blockQuotePrefix"||Or[1].type==="blockQuotePrefixWhitespace"||Or[1].type==="blockQuoteMarker"||Or[1].type==="listItemIndent"))break}fr&&(!Gn||fr<Gn)&&(ci._spread=!0),ci.end=Object.assign({},Gn?z[Gn][1].start:At[1].end),z.splice(Gn||Pe,0,["exit",ci,At[2]]),Pe++,ve++}if(At[1].type==="listItemPrefix"){const Ts={type:"listItem",_spread:!1,start:Object.assign({},At[1].start),end:void 0};ci=Ts,z.splice(Pe,0,["enter",Ts,At[2]]),Pe++,ve++,fr=void 0,Es=!0}}}return z[Z][1]._spread=Kn,ve}function s(z,Z){return ve;function ve(Pe){a.call(this,z(Pe),Pe),Z&&Z.call(this,Pe)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(z,Z,ve){this.stack[this.stack.length-1].children.push(z),this.stack.push(z),this.tokenStack.push([Z,ve||void 0]),z.position={start:Ms(Z.start),end:void 0}}function l(z){return Z;function Z(ve){z&&z.call(this,ve),u.call(this,ve)}}function u(z,Z){const ve=this.stack.pop(),Pe=this.tokenStack.pop();if(Pe)Pe[0].type!==z.type&&(Z?Z.call(this,z,Pe[0]):(Pe[1]||t3).call(this,z,Pe[0]));else throw new Error("Cannot close `"+z.type+"` ("+_d({start:z.start,end:z.end})+"): its not open");ve.position.end=Ms(z.end)}function c(){return mS(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(z){if(this.data.expectingFirstListItemValue){const Z=this.stack[this.stack.length-2];Z.start=Number.parseInt(this.sliceSerialize(z),10),this.data.expectingFirstListItemValue=void 0}}function h(){const z=this.resume(),Z=this.stack[this.stack.length-1];Z.lang=z}function p(){const z=this.resume(),Z=this.stack[this.stack.length-1];Z.meta=z}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const z=this.resume(),Z=this.stack[this.stack.length-1];Z.value=z.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const z=this.resume(),Z=this.stack[this.stack.length-1];Z.value=z.replace(/(\r?\n|\r)$/g,"")}function v(z){const Z=this.resume(),ve=this.stack[this.stack.length-1];ve.label=Z,ve.identifier=ni(this.sliceSerialize(z)).toLowerCase()}function x(){const z=this.resume(),Z=this.stack[this.stack.length-1];Z.title=z}function k(){const z=this.resume(),Z=this.stack[this.stack.length-1];Z.url=z}function S(z){const Z=this.stack[this.stack.length-1];if(!Z.depth){const ve=this.sliceSerialize(z).length;Z.depth=ve}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function E(z){const Z=this.stack[this.stack.length-1];Z.depth=this.sliceSerialize(z).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function R(z){const ve=this.stack[this.stack.length-1].children;let Pe=ve[ve.length-1];(!Pe||Pe.type!=="text")&&(Pe=Sy(),Pe.position={start:Ms(z.start),end:void 0},ve.push(Pe)),this.stack.push(Pe)}function A(z){const Z=this.stack.pop();Z.value+=this.sliceSerialize(z),Z.position.end=Ms(z.end)}function L(z){const Z=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ve=Z.children[Z.children.length-1];ve.position.end=Ms(z.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Z.type)&&(R.call(this,z),A.call(this,z))}function I(){this.data.atHardBreak=!0}function U(){const z=this.resume(),Z=this.stack[this.stack.length-1];Z.value=z}function F(){const z=this.resume(),Z=this.stack[this.stack.length-1];Z.value=z}function B(){const z=this.resume(),Z=this.stack[this.stack.length-1];Z.value=z}function q(){const z=this.stack[this.stack.length-1];if(this.data.inReference){const Z=this.data.referenceType||"shortcut";z.type+="Reference",z.referenceType=Z,delete z.url,delete z.title}else delete z.identifier,delete z.label;this.data.referenceType=void 0}function H(){const z=this.stack[this.stack.length-1];if(this.data.inReference){const Z=this.data.referenceType||"shortcut";z.type+="Reference",z.referenceType=Z,delete z.url,delete z.title}else delete z.identifier,delete z.label;this.data.referenceType=void 0}function M(z){const Z=this.sliceSerialize(z),ve=this.stack[this.stack.length-2];ve.label=Nre(Z),ve.identifier=ni(Z).toLowerCase()}function D(){const z=this.stack[this.stack.length-1],Z=this.resume(),ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,ve.type==="link"){const Pe=z.children;ve.children=Pe}else ve.alt=Z}function T(){const z=this.resume(),Z=this.stack[this.stack.length-1];Z.url=z}function J(){const z=this.resume(),Z=this.stack[this.stack.length-1];Z.title=z}function O(){this.data.inReference=void 0}function _(){this.data.referenceType="collapsed"}function W(z){const Z=this.resume(),ve=this.stack[this.stack.length-1];ve.label=Z,ve.identifier=ni(this.sliceSerialize(z)).toLowerCase(),this.data.referenceType="full"}function X(z){this.data.characterReferenceType=z.type}function ne(z){const Z=this.sliceSerialize(z),ve=this.data.characterReferenceType;let Pe;ve?(Pe=u5(Z,ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Pe=gS(Z);const Fe=this.stack[this.stack.length-1];Fe.value+=Pe}function $(z){const Z=this.stack.pop();Z.position.end=Ms(z.end)}function ie(z){A.call(this,z);const Z=this.stack[this.stack.length-1];Z.url=this.sliceSerialize(z)}function be(z){A.call(this,z);const Z=this.stack[this.stack.length-1];Z.url="mailto:"+this.sliceSerialize(z)}function Me(){return{type:"blockquote",children:[]}}function gt(){return{type:"code",lang:null,meta:null,value:""}}function on(){return{type:"inlineCode",value:""}}function _t(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function j(){return{type:"emphasis",children:[]}}function ee(){return{type:"heading",depth:0,children:[]}}function ae(){return{type:"break"}}function xe(){return{type:"html",value:""}}function Ee(){return{type:"image",title:null,url:"",alt:null}}function Le(){return{type:"link",title:null,url:"",children:[]}}function dr(z){return{type:"list",ordered:z.type==="listOrdered",start:null,spread:z._spread,children:[]}}function Mr(z){return{type:"listItem",spread:z._spread,checked:null,children:[]}}function wl(){return{type:"paragraph",children:[]}}function Vi(){return{type:"strong",children:[]}}function Sy(){return{type:"text",value:""}}function Ey(){return{type:"thematicBreak"}}}function Ms(e){return{line:e.line,column:e.column,offset:e.offset}}function x5(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?x5(e,r):Ire(e,r)}}function Ire(e,t){let n;for(n in t)if(v5.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function t3(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+_d({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+_d({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+_d({start:t.start,end:t.end})+") is still open")}function jre(e){const t=this;t.parser=n;function n(r){return Mre(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Lre(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Fre(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function $re(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function zre(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Bre(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Vre(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Ec(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)}function Ure(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Hre(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function w5(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Wre(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return w5(e,t);const i={src:Ec(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function qre(e,t){const n={src:Ec(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Kre(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Gre(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return w5(e,t);const i={href:Ec(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Jre(e,t){const n={href:Ec(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Qre(e,t,n){const r=e.all(t),i=n?Yre(n):k5(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function Yre(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=k5(n[r])}return t}function k5(e){const t=e.spread;return t??e.children.length>1}function Xre(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Zre(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function eie(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function tie(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function nie(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=dS(t.children[1]),l=t5(t.children[t.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function rie(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let l=-1;const u=[];for(;++l<a;){const d=t.children[l],f={},h=o?o[l]:void 0;h&&(f.align=h);let p={type:"element",tagName:s,properties:f,children:[]};d&&(p.children=e.all(d),e.patch(d,p),p=e.applyData(d,p)),u.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,c),e.applyData(t,c)}function iie(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const n3=9,r3=32;function sie(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(i3(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(i3(t.slice(i),i>0,!1)),s.join("")}function i3(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===n3||s===r3;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===n3||s===r3;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function oie(e,t){const n={type:"text",value:sie(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function aie(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const lie={blockquote:Lre,break:Fre,code:$re,delete:zre,emphasis:Bre,footnoteReference:Vre,heading:Ure,html:Hre,imageReference:Wre,image:qre,inlineCode:Kre,linkReference:Gre,link:Jre,listItem:Qre,list:Xre,paragraph:Zre,root:eie,strong:tie,table:nie,tableCell:iie,tableRow:rie,text:oie,thematicBreak:aie,toml:ip,yaml:ip,definition:ip,footnoteDefinition:ip};function ip(){}const C5=-1,K0=0,Pd=1,sg=2,bS=3,vS=4,xS=5,wS=6,S5=7,E5=8,s3=typeof self=="object"?self:globalThis,uie=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case K0:case C5:return n(o,i);case Pd:{const a=n([],i);for(const l of o)a.push(r(l));return a}case sg:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case bS:return n(new Date(o),i);case vS:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case xS:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case wS:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case S5:{const{name:a,message:l}=o;return n(new s3[a](l),i)}case E5:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new s3[s](o),i)};return r},o3=e=>uie(new Map,e)(0),Pl="",{toString:cie}={},{keys:die}=Object,Vc=e=>{const t=typeof e;if(t!=="object"||!e)return[K0,t];const n=cie.call(e).slice(8,-1);switch(n){case"Array":return[Pd,Pl];case"Object":return[sg,Pl];case"Date":return[bS,Pl];case"RegExp":return[vS,Pl];case"Map":return[xS,Pl];case"Set":return[wS,Pl];case"DataView":return[Pd,n]}return n.includes("Array")?[Pd,n]:n.includes("Error")?[S5,n]:[sg,n]},sp=([e,t])=>e===K0&&(t==="function"||t==="symbol"),fie=(e,t,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=Vc(o);switch(a){case K0:{let c=o;switch(l){case"bigint":a=E5,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([C5],o)}return i([a,c],o)}case Pd:{if(l){let f=o;return l==="DataView"?f=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(o)),i([l,[...f]],o)}const c=[],d=i([a,c],o);for(const f of o)c.push(s(f));return d}case sg:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],d=i([a,c],o);for(const f of die(o))(e||!sp(Vc(o[f])))&&c.push([s(f),s(o[f])]);return d}case bS:return i([a,o.toISOString()],o);case vS:{const{source:c,flags:d}=o;return i([a,{source:c,flags:d}],o)}case xS:{const c=[],d=i([a,c],o);for(const[f,h]of o)(e||!(sp(Vc(f))||sp(Vc(h))))&&c.push([s(f),s(h)]);return d}case wS:{const c=[],d=i([a,c],o);for(const f of o)(e||!sp(Vc(f)))&&c.push(s(f));return d}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},a3=(e,{json:t,lossy:n}={})=>{const r=[];return fie(!(t||n),!!t,new Map,r)(e),r},og=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?o3(a3(e,t)):structuredClone(e):(e,t)=>o3(a3(e,t));function hie(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function pie(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function mie(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||hie,r=e.options.footnoteBackLabel||pie,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[l]);if(!u)continue;const c=e.all(u),d=String(u.identifier).toUpperCase(),f=Ec(d.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(d);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(l,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const b={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(c,!0)};e.patch(u,b),a.push(b)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...og(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const G0=function(e){if(e==null)return vie;if(typeof e=="function")return J0(e);if(typeof e=="object")return Array.isArray(e)?gie(e):yie(e);if(typeof e=="string")return bie(e);throw new Error("Expected function, string, or object as test")};function gie(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=G0(e[n]);return J0(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function yie(e){const t=e;return J0(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function bie(e){return J0(t);function t(n){return n&&n.type===e}}function J0(e){return t;function t(n,r,i){return!!(xie(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function vie(){return!0}function xie(e){return e!==null&&typeof e=="object"&&"type"in e}const T5=[],wie=!0,Yx=!1,kie="skip";function _5(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=G0(i),o=r?-1:1;a(e,void 0,[])();function a(l,u,c){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return f;function f(){let h=T5,p,m,g;if((!t||s(l,u,c[c.length-1]||void 0))&&(h=Cie(n(l,c)),h[0]===Yx))return h;if("children"in l&&l.children){const b=l;if(b.children&&h[0]!==kie)for(m=(r?b.children.length:-1)+o,g=c.concat(b);m>-1&&m<b.children.length;){const v=b.children[m];if(p=a(v,m,g)(),p[0]===Yx)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Cie(e){return Array.isArray(e)?e:typeof e=="number"?[wie,e]:e==null?T5:[e]}function kS(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),_5(e,s,a,i);function a(l,u){const c=u[u.length-1],d=c?c.children.indexOf(l):void 0;return o(l,d,c)}}const Xx={}.hasOwnProperty,Sie={};function Eie(e,t){const n=t||Sie,r=new Map,i=new Map,s=new Map,o={...lie,...n.handlers},a={all:u,applyData:_ie,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:Tie,wrap:Pie};return kS(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,f=String(c.identifier).toUpperCase();d.has(f)||d.set(f,c)}}),a;function l(c,d){const f=c.type,h=a.handlers[f];if(Xx.call(a.handlers,f)&&h)return h(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in c){const{children:m,...g}=c,b=og(g);return b.children=a.all(c),b}return og(c)}return(a.options.unknownHandler||Aie)(a,c,d)}function u(c){const d=[];if("children"in c){const f=c.children;let h=-1;for(;++h<f.length;){const p=a.one(f[h],c);if(p){if(h&&f[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=l3(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=l3(m.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function Tie(e,t){e.position&&(t.position=pte(e))}function _ie(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,og(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Aie(e,t){const n=t.data||{},r="value"in t&&!(Xx.call(n,"hProperties")||Xx.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Pie(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function l3(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function u3(e,t){const n=Eie(e,t),r=n.one(e,void 0),i=mie(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Rie(e,t){return e&&"run"in e?async function(n,r){const i=u3(n,{file:r,...t});await e.run(i,r)}:function(n,r){return u3(n,{file:r,...e||t})}}function c3(e){if(e)throw e}var em=Object.prototype.hasOwnProperty,A5=Object.prototype.toString,d3=Object.defineProperty,f3=Object.getOwnPropertyDescriptor,h3=function(t){return typeof Array.isArray=="function"?Array.isArray(t):A5.call(t)==="[object Array]"},p3=function(t){if(!t||A5.call(t)!=="[object Object]")return!1;var n=em.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&em.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||em.call(t,i)},m3=function(t,n){d3&&n.name==="__proto__"?d3(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},g3=function(t,n){if(n==="__proto__")if(em.call(t,n)){if(f3)return f3(t,n).value}else return;return t[n]},Nie=function e(){var t,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(t=arguments[l],t!=null)for(n in t)r=g3(a,n),i=g3(t,n),a!==i&&(c&&i&&(p3(i)||(s=h3(i)))?(s?(s=!1,o=r&&h3(r)?r:[]):o=r&&p3(r)?r:{},m3(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&m3(a,{name:n,newValue:i}));return a};const L1=Gf(Nie);function Zx(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Die(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=e[++s];let d=-1;if(l){o(l);return}for(;++d<i.length;)(u[d]===null||u[d]===void 0)&&(u[d]=i[d]);i=u,c?Mie(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Mie(e,t){let n;return r;function r(...o){const a=e.length>o.length;let l;a&&o.push(i);try{l=e.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const pi={basename:Oie,dirname:Iie,extname:jie,join:Lie,sep:"/"};function Oie(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');dh(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Iie(e){if(dh(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function jie(e){dh(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Lie(...e){let t=-1,n;for(;++t<e.length;)dh(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Fie(n)}function Fie(e){dh(e);const t=e.codePointAt(0)===47;let n=$ie(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function $ie(e,t){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function dh(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const zie={cwd:Bie};function Bie(){return"/"}function ew(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Vie(e){if(typeof e=="string")e=new URL(e);else if(!ew(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Uie(e)}function Uie(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const F1=["history","path","basename","stem","extname","dirname"];class P5{constructor(t){let n;t?ew(t)?n={path:t}:typeof t=="string"||Hie(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":zie.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<F1.length;){const s=F1[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)F1.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?pi.basename(this.path):void 0}set basename(t){z1(t,"basename"),$1(t,"basename"),this.path=pi.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?pi.dirname(this.path):void 0}set dirname(t){y3(this.basename,"dirname"),this.path=pi.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?pi.extname(this.path):void 0}set extname(t){if($1(t,"extname"),y3(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=pi.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){ew(t)&&(t=Vie(t)),z1(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?pi.basename(this.path,this.extname):void 0}set stem(t){z1(t,"stem"),$1(t,"stem"),this.path=pi.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new yn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function $1(e,t){if(e&&e.includes(pi.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+pi.sep+"`")}function z1(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function y3(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Hie(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Wie=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},qie={}.hasOwnProperty;class CS extends Wie{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Die()}copy(){const t=new CS;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(L1(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(U1("data",this.frozen),this.namespace[t]=n,this):qie.call(this.namespace,t)&&this.namespace[t]||void 0:t?(U1("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=op(t),r=this.parser||this.Parser;return B1("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),B1("process",this.parser||this.Parser),V1("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=op(t),l=r.parse(a);r.run(l,a,function(c,d,f){if(c||!d||!f)return u(c);const h=d,p=r.stringify(h,f);Jie(p)?f.value=p:f.result=p,u(c,f)});function u(c,d){c||!d?o(c):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),B1("processSync",this.parser||this.Parser),V1("processSync",this.compiler||this.Compiler),this.process(t,i),v3("processSync","process",n),r;function i(s,o){n=!0,c3(s),r=o}}run(t,n,r){b3(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=op(n);i.run(t,l,u);function u(c,d,f){const h=d||t;c?a(c):o?o(h):r(void 0,h,f)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),v3("runSync","run",r),i;function s(o,a){c3(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=op(n),i=this.compiler||this.Compiler;return V1("stringify",i),b3(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(U1("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...d]=u;l(c,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=L1(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const d=u[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let d=-1,f=-1;for(;++d<r.length;)if(r[d][0]===u){f=d;break}if(f===-1)r.push([u,...c]);else if(c.length>0){let[h,...p]=c;const m=r[f][1];Zx(m)&&Zx(h)&&(h=L1(!0,m,h)),r[f]=[u,h,...p]}}}}const Kie=new CS().freeze();function B1(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function V1(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function U1(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function b3(e){if(!Zx(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function v3(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function op(e){return Gie(e)?e:new P5(e)}function Gie(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Jie(e){return typeof e=="string"||Qie(e)}function Qie(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Yie="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",x3=[],w3={allowDangerousHtml:!0},Xie=/^(https?|ircs?|mailto|xmpp)$/i,Zie=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ese(e){const t=tse(e),n=nse(e);return rse(t.runSync(t.parse(n),n),e)}function tse(e){const t=e.rehypePlugins||x3,n=e.remarkPlugins||x3,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...w3}:w3;return Kie().use(jre).use(n).use(Rie,r).use(t)}function nse(e){const t=e.children||"",n=new P5;return typeof t=="string"&&(n.value=t),n}function rse(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,o=t.skipHtml,a=t.unwrapDisallowed,l=t.urlTransform||ise;for(const c of Zie)Object.hasOwn(t,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+Yie+c.id,void 0);return kS(e,u),vte(e,{Fragment:y.Fragment,components:i,ignoreInvalidStyle:!0,jsx:y.jsx,jsxs:y.jsxs,passKeys:!0,passNode:!0});function u(c,d,f){if(c.type==="raw"&&f&&typeof d=="number")return o?f.children.splice(d,1):f.children[d]={type:"text",value:c.value},d;if(c.type==="element"){let h;for(h in O1)if(Object.hasOwn(O1,h)&&Object.hasOwn(c.properties,h)){const p=c.properties[h],m=O1[h];(m===null||m.includes(c.tagName))&&(c.properties[h]=l(String(p||""),h,c))}}if(c.type==="element"){let h=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!h&&r&&typeof d=="number"&&(h=!r(c,d,f)),h&&f&&typeof d=="number")return a&&c.children?f.children.splice(d,1,...c.children):f.children.splice(d,1),d}}}function ise(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||Xie.test(e.slice(0,t))?e:""}function k3(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function sse(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function ose(e,t,n){const i=G0((n||{}).ignore||[]),s=ase(t);let o=-1;for(;++o<s.length;)_5(e,"text",a);function a(u,c){let d=-1,f;for(;++d<c.length;){const h=c[d],p=f?f.children:void 0;if(i(h,p?p.indexOf(h):void 0,f))return;f=h}if(f)return l(u,c)}function l(u,c){const d=c[c.length-1],f=s[o][0],h=s[o][1];let p=0;const g=d.children.indexOf(u);let b=!1,v=[];f.lastIndex=0;let x=f.exec(u.value);for(;x;){const k=x.index,S={index:x.index,input:x.input,stack:[...c,u]};let C=h(...x,S);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C===!1?f.lastIndex=k+1:(p!==k&&v.push({type:"text",value:u.value.slice(p,k)}),Array.isArray(C)?v.push(...C):C&&v.push(C),p=k+x[0].length,b=!0),!f.global)break;x=f.exec(u.value)}return b?(p<u.value.length&&v.push({type:"text",value:u.value.slice(p)}),d.children.splice(g,1,...v)):v=[u],g+v.length}}function ase(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([lse(i[0]),use(i[1])])}return t}function lse(e){return typeof e=="string"?new RegExp(sse(e),"g"):e}function use(e){return typeof e=="function"?e:function(){return e}}const H1="phrasing",W1=["autolink","link","image","label"];function cse(){return{transforms:[yse],enter:{literalAutolink:fse,literalAutolinkEmail:q1,literalAutolinkHttp:q1,literalAutolinkWww:q1},exit:{literalAutolink:gse,literalAutolinkEmail:mse,literalAutolinkHttp:hse,literalAutolinkWww:pse}}}function dse(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:H1,notInConstruct:W1},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:H1,notInConstruct:W1},{character:":",before:"[ps]",after:"\\/",inConstruct:H1,notInConstruct:W1}]}}function fse(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function q1(e){this.config.enter.autolinkProtocol.call(this,e)}function hse(e){this.config.exit.autolinkProtocol.call(this,e)}function pse(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function mse(e){this.config.exit.autolinkEmail.call(this,e)}function gse(e){this.exit(e)}function yse(e){ose(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,bse],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),vse]],{ignore:["link","linkReference"]})}function bse(e,t,n,r,i){let s="";if(!R5(i)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!xse(n)))return!1;const o=wse(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function vse(e,t,n,r){return!R5(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function xse(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function wse(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=k3(e,"(");let s=k3(e,")");for(;r!==-1&&i>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function R5(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||rl(n)||W0(n))&&(!t||n!==47)}N5.peek=Rse;function kse(){this.buffer()}function Cse(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Sse(){this.buffer()}function Ese(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Tse(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ni(this.sliceSerialize(e)).toLowerCase(),n.label=t}function _se(e){this.exit(e)}function Ase(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ni(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Pse(e){this.exit(e)}function Rse(){return"["}function N5(e,t,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(e),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function Nse(){return{enter:{gfmFootnoteCallString:kse,gfmFootnoteCall:Cse,gfmFootnoteDefinitionLabelString:Sse,gfmFootnoteDefinition:Ese},exit:{gfmFootnoteCallString:Tse,gfmFootnoteCall:_se,gfmFootnoteDefinitionLabelString:Ase,gfmFootnoteDefinition:Pse}}}function Dse(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:N5},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const u=s.enter("footnoteDefinition"),c=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),c(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),t?D5:Mse))),u(),l}}function Mse(e,t,n){return t===0?e:D5(e,t,n)}function D5(e,t,n){return(n?"":"    ")+e}const Ose=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];M5.peek=$se;function Ise(){return{canContainEols:["delete"],enter:{strikethrough:Lse},exit:{strikethrough:Fse}}}function jse(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Ose}],handlers:{delete:M5}}}function Lse(e){this.enter({type:"delete",children:[]},e)}function Fse(e){this.exit(e)}function M5(e,t,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(e,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function $se(){return"~"}function zse(e){return e.length}function Bse(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||zse,s=[],o=[],a=[],l=[];let u=0,c=-1;for(;++c<e.length;){const m=[],g=[];let b=-1;for(e[c].length>u&&(u=e[c].length);++b<e[c].length;){const v=Vse(e[c][b]);if(n.alignDelimiters!==!1){const x=i(v);g[b]=x,(l[b]===void 0||x>l[b])&&(l[b]=x)}m.push(v)}o[c]=m,a[c]=g}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<u;)s[d]=C3(r[d]);else{const m=C3(r);for(;++d<u;)s[d]=m}d=-1;const f=[],h=[];for(;++d<u;){const m=s[d];let g="",b="";m===99?(g=":",b=":"):m===108?g=":":m===114&&(b=":");let v=n.alignDelimiters===!1?1:Math.max(1,l[d]-g.length-b.length);const x=g+"-".repeat(v)+b;n.alignDelimiters!==!1&&(v=g.length+v+b.length,v>l[d]&&(l[d]=v),h[d]=v),f[d]=x}o.splice(1,0,f),a.splice(1,0,h),c=-1;const p=[];for(;++c<o.length;){const m=o[c],g=a[c];d=-1;const b=[];for(;++d<u;){const v=m[d]||"";let x="",k="";if(n.alignDelimiters!==!1){const S=l[d]-(g[d]||0),C=s[d];C===114?x=" ".repeat(S):C===99?S%2?(x=" ".repeat(S/2+.5),k=" ".repeat(S/2-.5)):(x=" ".repeat(S/2),k=x):k=" ".repeat(S)}n.delimiterStart!==!1&&!d&&b.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&v==="")&&(n.delimiterStart!==!1||d)&&b.push(" "),n.alignDelimiters!==!1&&b.push(x),b.push(v),n.alignDelimiters!==!1&&b.push(k),n.padding!==!1&&b.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&b.push("|")}p.push(n.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return p.join(`
`)}function Vse(e){return e==null?"":String(e)}function C3(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Use(e,t,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(e,s.current()),Hse);return i(),o}function Hse(e,t,n){return">"+(n?"":" ")+e}function Wse(e,t){return S3(e,t.inConstruct,!0)&&!S3(e,t.notInConstruct,!1)}function S3(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function E3(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&Wse(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function qse(e,t){const n=String(e);let r=n.indexOf(t),i=r,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+t.length,r=n.indexOf(t,i);return o}function Kse(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Gse(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Jse(e,t,n,r){const i=Gse(n),s=e.value||"",o=i==="`"?"GraveAccent":"Tilde";if(Kse(e,n)){const d=n.enter("codeIndented"),f=n.indentLines(s,Qse);return d(),f}const a=n.createTracker(r),l=i.repeat(Math.max(qse(s,i)+1,3)),u=n.enter("codeFenced");let c=a.move(l);if(e.lang){const d=n.enter(`codeFencedLang${o}`);c+=a.move(n.safe(e.lang,{before:c,after:" ",encode:["`"],...a.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${o}`);c+=a.move(" "),c+=a.move(n.safe(e.meta,{before:c,after:`
`,encode:["`"],...a.current()})),d()}return c+=a.move(`
`),s&&(c+=a.move(s+`
`)),c+=a.move(l),u(),c}function Qse(e,t,n){return(n?"":"    ")+e}function SS(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Yse(e,t,n,r){const i=SS(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(e),{before:u,after:"]",...l.current()})),u+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...l.current()}))),a(),e.title&&(a=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(e.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),o(),u}function Xse(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Ef(e){return"&#x"+e.toString(16).toUpperCase()+";"}function ag(e,t,n){const r=Qu(e),i=Qu(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}O5.peek=Zse;function O5(e,t,n,r){const i=Xse(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(e,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),c=ag(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=Ef(u)+l.slice(1));const d=l.charCodeAt(l.length-1),f=ag(r.after.charCodeAt(0),d,i);f.inside&&(l=l.slice(0,-1)+Ef(d));const h=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},a+l+h}function Zse(e,t,n){return n.options.emphasis||"*"}function eoe(e,t){let n=!1;return kS(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Yx}),!!((!e.depth||e.depth<3)&&mS(e)&&(t.options.setext||n))}function toe(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(eoe(e,n)){const c=n.enter("headingSetext"),d=n.enter("phrasing"),f=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return d(),c(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Ef(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),l(),a(),u}I5.peek=noe;function I5(e){return e.value||""}function noe(){return"<"}j5.peek=roe;function j5(e,t,n,r){const i=SS(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(e.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(e.url,{before:u,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(e.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),u+=l.move(")"),o(),u}function roe(){return"!"}L5.peek=ioe;function L5(e,t,n,r){const i=e.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const u=n.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const c=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return o(),n.stack=c,s(),i==="full"||!u||u!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function ioe(){return"!"}F5.peek=soe;function F5(e,t,n){let r=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function soe(){return"`"}function $5(e,t){const n=mS(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}z5.peek=ooe;function z5(e,t,n,r){const i=SS(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if($5(e,n)){const c=n.stack;n.stack=[],a=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(e,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),n.stack=c,d}a=n.enter("link"),l=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(l=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=o.move(" "+i),u+=o.move(n.safe(e.title,{before:u,after:i,...o.current()})),u+=o.move(i),l()),u+=o.move(")"),a(),u}function ooe(e,t,n){return $5(e,n)?"<":"["}B5.peek=aoe;function B5(e,t,n,r){const i=e.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const u=n.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const c=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return o(),n.stack=c,s(),i==="full"||!u||u!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function aoe(){return"["}function ES(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function loe(e){const t=ES(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function uoe(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function V5(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function coe(e,t,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=e.ordered?uoe(n):ES(n);const a=e.ordered?o==="."?")":".":loe(n);let l=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const c=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),V5(n)===o&&c){let d=-1;for(;++d<e.children.length;){const f=e.children[d];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const u=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),u}function doe(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function foe(e,t,n,r){const i=doe(n);let s=n.bulletCurrent||ES(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,a.current()),c);return l(),u;function c(d,f,h){return f?(h?"":" ".repeat(o))+d:(h?s:s+" ".repeat(o-s.length))+d}}function hoe(e,t,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(e,r);return s(),i(),o}const poe=G0(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function moe(e,t,n,r){return(e.children.some(function(o){return poe(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function goe(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}U5.peek=yoe;function U5(e,t,n,r){const i=goe(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(e,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),c=ag(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=Ef(u)+l.slice(1));const d=l.charCodeAt(l.length-1),f=ag(r.after.charCodeAt(0),d,i);f.inside&&(l=l.slice(0,-1)+Ef(d));const h=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},a+l+h}function yoe(e,t,n){return n.options.strong||"*"}function boe(e,t,n,r){return n.safe(e.value,r)}function voe(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function xoe(e,t,n){const r=(V5(n)+(n.options.ruleSpaces?" ":"")).repeat(voe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const H5={blockquote:Use,break:E3,code:Jse,definition:Yse,emphasis:O5,hardBreak:E3,heading:toe,html:I5,image:j5,imageReference:L5,inlineCode:F5,link:z5,linkReference:B5,list:coe,listItem:foe,paragraph:hoe,root:moe,strong:U5,text:boe,thematicBreak:xoe};function woe(){return{enter:{table:koe,tableData:T3,tableHeader:T3,tableRow:Soe},exit:{codeText:Eoe,table:Coe,tableData:K1,tableHeader:K1,tableRow:K1}}}function koe(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function Coe(e){this.exit(e),this.data.inTable=void 0}function Soe(e){this.enter({type:"tableRow",children:[]},e)}function K1(e){this.exit(e)}function T3(e){this.enter({type:"tableCell",children:[]},e)}function Eoe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Toe));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Toe(e,t){return t==="|"?t:e}function _oe(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:l,tableRow:a}};function o(h,p,m,g){return u(c(h,m,g),h.align)}function a(h,p,m,g){const b=d(h,m,g),v=u([b]);return v.slice(0,v.indexOf(`
`))}function l(h,p,m,g){const b=m.enter("tableCell"),v=m.enter("phrasing"),x=m.containerPhrasing(h,{...g,before:s,after:s});return v(),b(),x}function u(h,p){return Bse(h,{align:p,alignDelimiters:r,padding:n,stringLength:i})}function c(h,p,m){const g=h.children;let b=-1;const v=[],x=p.enter("table");for(;++b<g.length;)v[b]=d(g[b],p,m);return x(),v}function d(h,p,m){const g=h.children;let b=-1;const v=[],x=p.enter("tableRow");for(;++b<g.length;)v[b]=l(g[b],h,p,m);return x(),v}function f(h,p,m){let g=H5.inlineCode(h,p,m);return m.stack.includes("tableCell")&&(g=g.replace(/\|/g,"\\$&")),g}}function Aoe(){return{exit:{taskListCheckValueChecked:_3,taskListCheckValueUnchecked:_3,paragraph:Roe}}}function Poe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Noe}}}function _3(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Roe(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function Noe(e,t,n,r){const i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=H5.listItem(e,t,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(c){return c+o}}function Doe(){return[cse(),Nse(),Ise(),woe(),Aoe()]}function Moe(e){return{extensions:[dse(),Dse(e),jse(),_oe(e),Poe()]}}const Ooe={tokenize:zoe,partial:!0},W5={tokenize:Boe,partial:!0},q5={tokenize:Voe,partial:!0},K5={tokenize:Uoe,partial:!0},Ioe={tokenize:Hoe,partial:!0},G5={name:"wwwAutolink",tokenize:Foe,previous:Q5},J5={name:"protocolAutolink",tokenize:$oe,previous:Y5},Cs={name:"emailAutolink",tokenize:Loe,previous:X5},Li={};function joe(){return{text:Li}}let oa=48;for(;oa<123;)Li[oa]=Cs,oa++,oa===58?oa=65:oa===91&&(oa=97);Li[43]=Cs;Li[45]=Cs;Li[46]=Cs;Li[95]=Cs;Li[72]=[Cs,J5];Li[104]=[Cs,J5];Li[87]=[Cs,G5];Li[119]=[Cs,G5];function Loe(e,t,n){const r=this;let i,s;return o;function o(d){return!tw(d)||!X5.call(r,r.previous)||TS(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(d))}function a(d){return tw(d)?(e.consume(d),a):d===64?(e.consume(d),l):n(d)}function l(d){return d===46?e.check(Ioe,c,u)(d):d===45||d===95||hn(d)?(s=!0,e.consume(d),l):c(d)}function u(d){return e.consume(d),i=!0,l}function c(d){return s&&i&&Cn(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function Foe(e,t,n){const r=this;return i;function i(o){return o!==87&&o!==119||!Q5.call(r,r.previous)||TS(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Ooe,e.attempt(W5,e.attempt(q5,s),n),n)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function $oe(e,t,n){const r=this;let i="",s=!1;return o;function o(d){return(d===72||d===104)&&Y5.call(r,r.previous)&&!TS(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),e.consume(d),a):n(d)}function a(d){if(Cn(d)&&i.length<5)return i+=String.fromCodePoint(d),e.consume(d),a;if(d===58){const f=i.toLowerCase();if(f==="http"||f==="https")return e.consume(d),l}return n(d)}function l(d){return d===47?(e.consume(d),s?u:(s=!0,l)):n(d)}function u(d){return d===null||ig(d)||Ke(d)||rl(d)||W0(d)?n(d):e.attempt(W5,e.attempt(q5,c),n)(d)}function c(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function zoe(e,t,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),i):o===46&&r===3?(e.consume(o),s):n(o)}function s(o){return o===null?n(o):t(o)}}function Boe(e,t,n){let r,i,s;return o;function o(u){return u===46||u===95?e.check(K5,l,a)(u):u===null||Ke(u)||rl(u)||u!==45&&W0(u)?l(u):(s=!0,e.consume(u),o)}function a(u){return u===95?r=!0:(i=r,r=void 0),e.consume(u),o}function l(u){return i||r||!s?n(u):t(u)}}function Voe(e,t){let n=0,r=0;return i;function i(o){return o===40?(n++,e.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(K5,t,s)(o):o===null||Ke(o)||rl(o)?t(o):(e.consume(o),i)}function s(o){return o===41&&r++,e.consume(o),i}}function Uoe(e,t,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),r):a===38?(e.consume(a),s):a===93?(e.consume(a),i):a===60||a===null||Ke(a)||rl(a)?t(a):n(a)}function i(a){return a===null||a===40||a===91||Ke(a)||rl(a)?t(a):r(a)}function s(a){return Cn(a)?o(a):n(a)}function o(a){return a===59?(e.consume(a),r):Cn(a)?(e.consume(a),o):n(a)}}function Hoe(e,t,n){return r;function r(s){return e.consume(s),i}function i(s){return hn(s)?n(s):t(s)}}function Q5(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Ke(e)}function Y5(e){return!Cn(e)}function X5(e){return!(e===47||tw(e))}function tw(e){return e===43||e===45||e===46||e===95||hn(e)}function TS(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Woe={tokenize:Zoe,partial:!0};function qoe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Qoe,continuation:{tokenize:Yoe},exit:Xoe}},text:{91:{name:"gfmFootnoteCall",tokenize:Joe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Koe,resolveTo:Goe}}}}function Koe(e,t,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const u=ni(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function Goe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function Joe(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(d){if(s>999||d===93&&!o||d===null||d===91||Ke(d))return n(d);if(d===93){e.exit("chunkString");const f=e.exit("gfmFootnoteCallString");return i.includes(ni(r.sliceSerialize(f)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return Ke(d)||(o=!0),s++,e.consume(d),d===92?c:u}function c(d){return d===91||d===92||d===93?(e.consume(d),s++,u):u(d)}}function Qoe(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(p){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(p)}function c(p){if(o>999||p===93&&!a||p===null||p===91||Ke(p))return n(p);if(p===93){e.exit("chunkString");const m=e.exit("gfmFootnoteDefinitionLabelString");return s=ni(r.sliceSerialize(m)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),f}return Ke(p)||(a=!0),o++,e.consume(p),p===92?d:c}function d(p){return p===91||p===92||p===93?(e.consume(p),o++,c):c(p)}function f(p){return p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),i.includes(s)||i.push(s),Ie(e,h,"gfmFootnoteDefinitionWhitespace")):n(p)}function h(p){return t(p)}}function Yoe(e,t,n){return e.check(ch,t,e.attempt(Woe,t,n))}function Xoe(e){e.exit("gfmFootnoteDefinition")}function Zoe(e,t,n){const r=this;return Ie(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):n(s)}}function eae(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let u=l;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[l][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[l][1].end)},d={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",c,a],["enter",o[u][1],a],["exit",o[u][1],a],["enter",d,a]],h=a.parser.constructs.insideSpan.null;h&&sr(f,f.length,0,q0(h,o.slice(u+1,l),a)),sr(f,f.length,0,[["exit",d,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",c,a]]),sr(o,u-1,l-u+3,f),l=u+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const u=this.previous,c=this.events;let d=0;return f;function f(p){return u===126&&c[c.length-1][1].type!=="characterEscape"?l(p):(o.enter("strikethroughSequenceTemporary"),h(p))}function h(p){const m=Qu(u);if(p===126)return d>1?l(p):(o.consume(p),d++,h);if(d<2&&!n)return l(p);const g=o.exit("strikethroughSequenceTemporary"),b=Qu(p);return g._open=!b||b===2&&!!m,g._close=!m||m===2&&!!b,a(p)}}}class tae{constructor(){this.map=[]}add(t,n,r){nae(this,t,n,r)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const s of i)t.push(s);i=r.pop()}this.map.length=0}}function nae(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function rae(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function iae(){return{flow:{null:{name:"table",tokenize:sae,resolveAll:oae}}}}function sae(e,t,n){const r=this;let i=0,s=0,o;return a;function a(A){let L=r.events.length-1;for(;L>-1;){const F=r.events[L][1].type;if(F==="lineEnding"||F==="linePrefix")L--;else break}const I=L>-1?r.events[L][1].type:null,U=I==="tableHead"||I==="tableRow"?C:l;return U===C&&r.parser.lazy[r.now().line]?n(A):U(A)}function l(A){return e.enter("tableHead"),e.enter("tableRow"),u(A)}function u(A){return A===124||(o=!0,s+=1),c(A)}function c(A){return A===null?n(A):pe(A)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),h):n(A):Re(A)?Ie(e,c,"whitespace")(A):(s+=1,o&&(o=!1,i+=1),A===124?(e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),o=!0,c):(e.enter("data"),d(A)))}function d(A){return A===null||A===124||Ke(A)?(e.exit("data"),c(A)):(e.consume(A),A===92?f:d)}function f(A){return A===92||A===124?(e.consume(A),d):d(A)}function h(A){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(A):(e.enter("tableDelimiterRow"),o=!1,Re(A)?Ie(e,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):p(A))}function p(A){return A===45||A===58?g(A):A===124?(o=!0,e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),m):S(A)}function m(A){return Re(A)?Ie(e,g,"whitespace")(A):g(A)}function g(A){return A===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(A),e.exit("tableDelimiterMarker"),b):A===45?(s+=1,b(A)):A===null||pe(A)?k(A):S(A)}function b(A){return A===45?(e.enter("tableDelimiterFiller"),v(A)):S(A)}function v(A){return A===45?(e.consume(A),v):A===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(A),e.exit("tableDelimiterMarker"),x):(e.exit("tableDelimiterFiller"),x(A))}function x(A){return Re(A)?Ie(e,k,"whitespace")(A):k(A)}function k(A){return A===124?p(A):A===null||pe(A)?!o||i!==s?S(A):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(A)):S(A)}function S(A){return n(A)}function C(A){return e.enter("tableRow"),E(A)}function E(A){return A===124?(e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),E):A===null||pe(A)?(e.exit("tableRow"),t(A)):Re(A)?Ie(e,E,"whitespace")(A):(e.enter("data"),P(A))}function P(A){return A===null||A===124||Ke(A)?(e.exit("data"),E(A)):(e.consume(A),A===92?R:P)}function R(A){return A===92||A===124?(e.consume(A),P):P(A)}}function oae(e,t){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,u,c,d;const f=new tae;for(;++n<e.length;){const h=e[n],p=h[1];h[0]==="enter"?p.type==="tableHead"?(a=!1,l!==0&&(A3(f,t,l,u,c),c=void 0,l=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(n,0,[["enter",u,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,c={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(n,0,[["enter",c,t]])),i=p.type==="tableDelimiterRow"?2:c?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=ap(f,t,s,i,void 0,d),s=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],d=ap(f,t,s,i,void 0,d)),s=o,o=[s[1],n,0,0])):p.type==="tableHead"?(a=!0,l=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],d=ap(f,t,s,i,n,d)):o[1]!==0&&(d=ap(f,t,o,i,n,d)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&A3(f,t,l,u,c),f.consume(t.events),n=-1;++n<t.events.length;){const h=t.events[n];h[0]==="enter"&&h[1].type==="table"&&(h[1]._align=rae(t.events,n))}return e}function ap(e,t,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},zl(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const l=zl(t.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=zl(t.events,n[2]),c=zl(t.events,n[3]),d={type:a,start:Object.assign({},u),end:Object.assign({},c)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const f=t.events[n[2]],h=t.events[n[3]];if(f[1].end=Object.assign({},h[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,m=n[3]-n[2]-1;e.add(p,m,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return i!==void 0&&(s.end=Object.assign({},zl(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function A3(e,t,n,r,i){const s=[],o=zl(t.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,t])),r.end=Object.assign({},o),s.push(["exit",r,t]),e.add(n+1,0,s)}function zl(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const aae={name:"tasklistCheck",tokenize:uae};function lae(){return{text:{91:aae}}}function uae(e,t,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),s)}function s(l){return Ke(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(l)}function a(l){return pe(l)?t(l):Re(l)?e.check({tokenize:cae},t,n)(l):n(l)}}function cae(e,t,n){return Ie(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function dae(e){return l5([joe(),qoe(),eae(e),iae(),lae()])}const fae={};function hae(e){const t=this,n=e||fae,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(dae(n)),s.push(Doe()),o.push(Moe(n))}function sd(e){return typeof e=="string"?e:typeof e=="number"?String(e):w.isValidElement(e)?w.Children.toArray(e.props.children).map(sd).join(""):""}function pae(e){return e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}const Yr=({children:e,className:t=""})=>{const n=new Map;function r(i){let s=pae(i);const o=n.get(s)??0;return n.set(s,o+1),o>0&&(s=`${s}-${o+1}`),s}return y.jsx("div",{className:`text-sm leading-relaxed ${t}`,children:y.jsx(ese,{remarkPlugins:[hae],components:{h1:({children:i})=>{const s=r(sd(i));return y.jsx("h1",{id:s,className:"text-lg text-foreground mt-5 mb-2",children:i})},h2:({children:i})=>{const s=r(sd(i));return y.jsx("h2",{id:s,className:"text-base text-foreground mt-4 mb-2",children:i})},h3:({children:i})=>{const s=r(sd(i));return y.jsx("h3",{id:s,className:"text-sm text-foreground mt-3 mb-1.5",children:i})},h4:({children:i})=>{const s=r(sd(i));return y.jsx("h4",{id:s,className:"text-sm text-foreground mt-2 mb-1",children:i})},p:({children:i})=>y.jsx("p",{className:"text-sm text-secondary-foreground leading-relaxed mb-2",children:i}),ul:({children:i})=>y.jsx("ul",{className:"list-disc ml-4 mb-2 space-y-0.5",children:i}),ol:({children:i})=>y.jsx("ol",{className:"list-decimal ml-4 mb-2 space-y-0.5",children:i}),li:({children:i})=>y.jsx("li",{className:"text-sm text-secondary-foreground",children:i}),strong:({children:i})=>y.jsx("strong",{className:"font-subheading text-foreground",children:i}),em:({children:i})=>y.jsx("em",{className:"italic",children:i}),blockquote:({children:i})=>y.jsx("blockquote",{className:"border-l-2 border-primary pl-3 text-sm text-muted-foreground italic my-2",children:i}),code:({children:i})=>y.jsx("code",{className:"rounded bg-muted/50 px-1.5 py-0.5 text-xs font-mono text-foreground",children:i}),pre:({children:i})=>y.jsx("pre",{className:"rounded-lg bg-muted/50 border border-border p-3 my-2 overflow-x-auto text-xs font-mono text-foreground",children:i}),table:({children:i})=>y.jsx("div",{className:"overflow-x-auto my-3 rounded-lg border border-border",children:y.jsx("table",{className:"text-xs border-collapse w-full",children:i})}),thead:({children:i})=>y.jsx("thead",{className:"bg-muted/50",children:i}),tbody:({children:i})=>y.jsx("tbody",{children:i}),tr:({children:i})=>y.jsx("tr",{className:"border-b border-border/50 last:border-b-0",children:i}),th:({children:i})=>y.jsx("th",{className:"text-left px-3 py-2 font-subheading text-foreground border-b border-border",children:i}),td:({children:i})=>y.jsx("td",{className:"px-3 py-2 text-secondary-foreground",children:i}),hr:()=>y.jsx("hr",{className:"border-border my-4"}),a:({href:i,children:s})=>{const o=i&&/^javascript:/i.test(i)?void 0:i;return y.jsx("a",{href:o,className:"text-primary underline",target:"_blank",rel:"noopener noreferrer",children:s})}},children:e})})};var Z5={exports:{}},ej={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yu=w;function mae(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gae=typeof Object.is=="function"?Object.is:mae,yae=Yu.useState,bae=Yu.useEffect,vae=Yu.useLayoutEffect,xae=Yu.useDebugValue;function wae(e,t){var n=t(),r=yae({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return vae(function(){i.value=n,i.getSnapshot=t,G1(i)&&s({inst:i})},[e,n,t]),bae(function(){return G1(i)&&s({inst:i}),e(function(){G1(i)&&s({inst:i})})},[e]),xae(n),n}function G1(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gae(e,n)}catch{return!0}}function kae(e,t){return t()}var Cae=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kae:wae;ej.useSyncExternalStore=Yu.useSyncExternalStore!==void 0?Yu.useSyncExternalStore:Cae;Z5.exports=ej;var _S=Z5.exports;function Xt(e){this.content=e}Xt.prototype={constructor:Xt,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new Xt(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Xt(n)},addToStart:function(e,t){return new Xt([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Xt(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new Xt(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Xt.from(e),e.size?new Xt(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Xt.from(e),e.size?new Xt(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Xt.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Xt.from=function(e){if(e instanceof Xt)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Xt(t)};function tj(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=tj(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function nj(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),a=t.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let u=0,c=Math.min(o.text.length,a.text.length);for(;u<c&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let u=nj(o.content,a.content,n-1,r-1);if(u)return u}n-=l,r-=l}}class V{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],u=a+l.nodeSize;if(u>t&&r(l,i+a,s||null,o)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,t-c),Math.min(l.content.size,n-c),r,i+c)}a=u}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(a,l)=>{let u=a.isText?a.text.slice(Math.max(t,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=u},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new V(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>t&&((o<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new V(r,i)}cutByIndex(t,n){return t==n?V.empty:t==0&&n==this.content.length?this:new V(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new V(i,s)}addToStart(t){return new V([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new V(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return tj(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return nj(this,t,n,r)}findIndex(t){if(t==0)return lp(0,t);if(t==this.size)return lp(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?lp(n+1,s):lp(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return V.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new V(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return V.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new V(n||t,r)}static from(t){if(!t)return V.empty;if(t instanceof V)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new V([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}V.empty=new V([],0);const J1={index:0,offset:0};function lp(e,t){return J1.index=e,J1.offset=t,J1}function lg(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!lg(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!lg(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Ve=class nw{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&lg(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return nw.none;if(t instanceof nw)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Ve.none=[];class ug extends Error{}class te{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=ij(this.content,t+this.openStart,n);return r&&new te(r,this.openStart,this.openEnd)}removeBetween(t,n){return new te(rj(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return te.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new te(V.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new te(t,r,i)}}te.empty=new te(V.empty,0,0);function rj(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:a}=e.findIndex(n);if(i==t||s.isText){if(a!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(rj(s.content,t-i-1,n-i-1)))}function ij(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=ij(o.content,t-s-1,n,o);return a&&e.replaceChild(i,o.copy(a))}function Sae(e,t,n){if(n.openStart>e.depth)throw new ug("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new ug("Inconsistent open depths");return sj(e,t,n,0)}function sj(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=sj(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,a=o.content;return Va(o,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:o,end:a}=Eae(n,e);return Va(s,aj(e,o,a,t,r))}else return Va(s,cg(e,t,r))}function oj(e,t){if(!t.type.compatibleContent(e.type))throw new ug("Cannot join "+t.type.name+" onto "+e.type.name)}function rw(e,t,n){let r=e.node(n);return oj(r,t.node(n)),r}function Ba(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Rd(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(Ba(e.nodeAfter,r),s++));for(let a=s;a<o;a++)Ba(i.child(a),r);t&&t.depth==n&&t.textOffset&&Ba(t.nodeBefore,r)}function Va(e,t){return e.type.checkContent(t),e.copy(t)}function aj(e,t,n,r,i){let s=e.depth>i&&rw(e,t,i+1),o=r.depth>i&&rw(n,r,i+1),a=[];return Rd(null,e,i,a),s&&o&&t.index(i)==n.index(i)?(oj(s,o),Ba(Va(s,aj(e,t,n,r,i+1)),a)):(s&&Ba(Va(s,cg(e,t,i+1)),a),Rd(t,n,i,a),o&&Ba(Va(o,cg(n,r,i+1)),a)),Rd(r,null,i,a),new V(a)}function cg(e,t,n){let r=[];if(Rd(null,e,n,r),e.depth>n){let i=rw(e,t,n+1);Ba(Va(i,cg(e,t,n+1)),r)}return Rd(t,null,n,r),new V(r)}function Eae(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(V.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class Tf{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Ve.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new dg(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:a,offset:l}=o.content.findIndex(s),u=s-l;if(r.push(o,a,i+l),!u||(o=o.child(a),o.isText))break;s=u-1,i+=l+1}return new Tf(n,r,s)}static resolveCached(t,n){let r=P3.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else P3.set(t,r=new Tae);let i=r.elts[r.i]=Tf.resolve(t,n);return r.i=(r.i+1)%_ae,i}}class Tae{constructor(){this.elts=[],this.i=0}}const _ae=12,P3=new WeakMap;class dg{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Aae=Object.create(null);let Ro=class iw{constructor(t,n,r,i=Ve.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||V.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&lg(this.attrs,n||t.defaultAttrs||Aae)&&Ve.sameSet(this.marks,r||Ve.none)}copy(t=null){return t==this.content?this:new iw(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new iw(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return te.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),u=i.node(o).content.cut(i.pos-a,s.pos-a);return new te(u,i.depth-o,s.depth-o)}replace(t,n,r){return Sae(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return Tf.resolveCached(this,t)}resolveNoCache(t){return Tf.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),lj(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=V.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Ve.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Ve.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=V.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Ro.prototype.text=void 0;class fg extends Ro{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):lj(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new fg(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new fg(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function lj(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class il{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new Pae(t,n);if(r.next==null)return il.empty;let i=uj(r);r.next&&r.err("Unexpected trailing text");let s=jae(Iae(i));return Lae(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(t,r);if(l&&(!n||l.validEnd))return V.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:c,next:d}=o.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=s(d,a.concat(c));if(f)return f}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}il.empty=new il(!0);class Pae{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function uj(e){let t=[];do t.push(Rae(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function Rae(e){let t=[];do t.push(Nae(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function Nae(e){let t=Oae(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=Dae(e,t);else break;return t}function R3(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function Dae(e,t){let n=R3(e),r=n;return e.eat(",")&&(e.next!="}"?r=R3(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Mae(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function Oae(e){if(e.eat("(")){let t=uj(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=Mae(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function Iae(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,a,l){let u={term:l,to:a};return t[o].push(u),u}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(s(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=s(o.exprs[l],a);if(l==o.exprs.length-1)return u;i(u,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let c=n();i(s(o.expr,l),c),l=c}if(o.max==-1)i(s(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let c=n();r(l,c),i(s(o.expr,l),c),l=c}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function cj(e,t){return t-e}function N3(e,t){let n=[];return r(t),n.sort(cj);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function jae(e){let t=Object.create(null);return n(N3(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<i.length;c++)i[c][0]==a&&(u=i[c][1]);N3(e,l).forEach(c=>{u||i.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let s=t[r.join(",")]=new il(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(cj);s.next.push({type:i[o][0],next:t[a.join(",")]||n(a)})}return s}}function Lae(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function dj(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function fj(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function hj(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function pj(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new $ae(e,r,t[r]);return n}let D3=class mj{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=pj(t,r.attrs),this.defaultAttrs=dj(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==il.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:fj(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ro(this,this.computeAttrs(t),V.from(n),Ve.setFrom(r))}createChecked(t=null,n,r){return n=V.from(n),this.checkContent(n),new Ro(this,this.computeAttrs(t),n,Ve.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=V.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(V.empty,!0);return s?new Ro(this,t,n.append(s),Ve.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){hj(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Ve.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new mj(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Fae(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class $ae{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Fae(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Q0{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=pj(t,i.attrs),this.excluded=null;let s=dj(this.attrs);this.instance=s?new Ve(this,s):null}create(t=null){return!t&&this.instance?this.instance:new Ve(this,fj(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new Q0(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){hj(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class AS{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=Xt.from(t.nodes),n.marks=Xt.from(t.marks||{}),this.nodes=D3.compile(this.spec.nodes,this),this.marks=Q0.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=il.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?M3(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:M3(this,o.split(" "))}this.nodeFromJSON=i=>Ro.fromJSON(this,i),this.markFromJSON=i=>Ve.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof D3){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new fg(r,r.defaultAttrs,t,Ve.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function M3(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let a in e.marks){let l=e.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function zae(e){return e.tag!=null}function Bae(e){return e.style!=null}class us{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(zae(i))this.tags.push(i);else if(Bae(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new I3(this,n,!1);return r.addAll(t,Ve.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new I3(this,n,!0);return r.addAll(t,Ve.none,n.from,n.to),te.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Hae(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=j3(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=j3(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new us(t,us.schemaRules(t)))}}const gj={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Vae={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},yj={ol:!0,ul:!0},_f=1,sw=2,Nd=4;function O3(e,t,n){return t!=null?(t?_f:0)|(t==="full"?sw:0):e&&e.whitespace=="pre"?_f|sw:n&~Nd}class up{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Ve.none,this.match=s||(o&Nd?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(V.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&_f)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=V.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(V.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!gj.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class I3{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=O3(null,n.preserveWhitespace,0)|(r?Nd:0);i?s=new up(i.type,i.attrs,Ve.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new up(null,null,Ve.none,!0,null,o):s=new up(t.schema.topNodeType,null,Ve.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&sw?"full":this.localPreserveWS||(i.options&_f)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=t.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),a;yj.hasOwnProperty(o)&&this.parser.normalizeLists&&Uae(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(l?l.ignore:Vae.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let u,c=this.needsBlock;if(gj.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let d=l&&l.skip?n:this.readStyles(t,n);d&&this.addAll(t,d),u&&this.sync(s),this.needsBlock=c}else{let u=this.readStyles(t,n);u&&this.addElementByRule(t,l,u,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(u=>!l.clearMark(u)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}s&&this.sync(a)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,a=i==null?null:t.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(t);if(u&&(!i||i.length>u.length+a)&&(i=u,s=l,!u.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=Ve.none;for(let a of i.concat(t.marks))(s.type?s.type.allowsMarkType(a.type):L3(a.type,t.type))&&(o=a.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let a=O3(t,s,o.options);o.options&Nd&&o.content.length==0&&(a|=Nd);let l=Ve.none;return r=r.filter(u=>(o.type?o.type.allowsMarkType(u.type):L3(u.type,t))?(l=u.addToSet(l),!1):!0),this.nodes.push(new up(t,n,l,i,null,a)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=_f)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let u=n[a];if(u==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Uae(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&yj.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function Hae(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function j3(e){let t={};for(let n in e)t[n]=e[n];return t}function L3(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==t||s.indexOf(c)<0&&o(c))return!0}};if(o(i.contentMatch))return!0}}class vl{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=Q1(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(s[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],c=this.serializeMark(u,o.isInline,n);c&&(s.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=tm(Q1(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&tm(Q1(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return tm(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new vl(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=F3(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return F3(t.marks)}}function F3(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Q1(e){return e.document||window.document}const $3=new WeakMap;function Wae(e){let t=$3.get(e);return t===void 0&&$3.set(e,t=qae(e)),t}function qae(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function tm(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=Wae(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?e.createElementNS(n,i):e.createElement(i),u=t[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let d in u)if(u[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),u[d]):d=="style"&&l.style?l.style.cssText=u[d]:l.setAttribute(d,u[d])}}for(let d=c;d<t.length;d++){let f=t[d];if(f===0){if(d<t.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=tm(e,f,n,r);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const bj=65535,vj=Math.pow(2,16);function Kae(e,t){return e+t*vj}function z3(e){return e&bj}function Gae(e){return(e-(e&bj))/vj}const xj=1,wj=2,nm=4,kj=8;class ow{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&kj)>0}get deletedBefore(){return(this.delInfo&(xj|nm))>0}get deletedAfter(){return(this.delInfo&(wj|nm))>0}get deletedAcross(){return(this.delInfo&nm)>0}}class er{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&er.empty)return er.empty}recover(t){let n=0,r=z3(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Gae(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let u=this.ranges[a+s],c=this.ranges[a+o],d=l+u;if(t<=d){let f=u?t==l?-1:t==d?1:n:n,h=l+i+(f<0?0:c);if(r)return h;let p=t==(n<0?l:d)?null:Kae(a/3,t-l),m=t==l?wj:t==d?xj:nm;return(n<0?t!=l:t!=d)&&(m|=kj),new ow(h,m,p)}i+=c-u}return r?t+i:new ow(t+i,0,null)}touches(t,n){let r=0,i=z3(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let u=this.ranges[a+s],c=l+u;if(t<=c&&a==i*3)return!0;r+=this.ranges[a+o]-u}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),u=this.ranges[i+n],c=this.ranges[i+r];t(a,a+u,l,l+c),s+=c-u}}invert(){return new er(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?er.empty:new er(t<0?[0,-t,0]:[0,0,t])}}er.empty=new er([]);class Af{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Af(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new Af;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,t=a.pos}return r?t:new ow(t,i,null)}}const Y1=Object.create(null);class bn{getMap(){return er.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Y1[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Y1)throw new RangeError("Duplicate use of step JSON ID "+t);return Y1[t]=n,n.prototype.jsonID=t,n}}class Mt{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Mt(t,null)}static fail(t){return new Mt(null,t)}static fromReplace(t,n,r,i){try{return Mt.ok(t.replace(n,r,i))}catch(s){if(s instanceof ug)return Mt.fail(s.message);throw s}}}function PS(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(PS(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return V.fromArray(r)}class go extends bn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new te(PS(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Mt.fromReplace(t,this.from,this.to,s)}invert(){return new Xr(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new go(n.pos,r.pos,this.mark)}merge(t){return t instanceof go&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new go(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new go(n.from,n.to,t.markFromJSON(n.mark))}}bn.jsonID("addMark",go);class Xr extends bn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new te(PS(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Mt.fromReplace(t,this.from,this.to,r)}invert(){return new go(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Xr(n.pos,r.pos,this.mark)}merge(t){return t instanceof Xr&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Xr(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Xr(n.from,n.to,t.markFromJSON(n.mark))}}bn.jsonID("removeMark",Xr);class yo extends bn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Mt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Mt.fromReplace(t,this.pos,this.pos+1,new te(V.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new yo(this.pos,n.marks[i]);return new yo(this.pos,this.mark)}}return new sl(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new yo(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new yo(n.pos,t.markFromJSON(n.mark))}}bn.jsonID("addNodeMark",yo);class sl extends bn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Mt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Mt.fromReplace(t,this.pos,this.pos+1,new te(V.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new yo(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new sl(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new sl(n.pos,t.markFromJSON(n.mark))}}bn.jsonID("removeNodeMark",sl);class Vt extends bn{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&aw(t,this.from,this.to)?Mt.fail("Structure replace would overwrite content"):Mt.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new er([this.from,this.to-this.from,this.slice.size])}invert(t){return new Vt(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Vt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof Vt)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?te.empty:new te(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Vt(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?te.empty:new te(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Vt(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Vt(n.from,n.to,te.fromJSON(t,n.slice),!!n.structure)}}bn.jsonID("replace",Vt);class qt extends bn{constructor(t,n,r,i,s,o,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(t){if(this.structure&&(aw(t,this.from,this.gapFrom)||aw(t,this.gapTo,this.to)))return Mt.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Mt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Mt.fromReplace(t,this.from,this.to,r):Mt.fail("Content does not fit in gap")}getMap(){return new er([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new qt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new qt(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new qt(n.from,n.to,n.gapFrom,n.gapTo,te.fromJSON(t,n.slice),n.insert,!!n.structure)}}bn.jsonID("replaceAround",qt);function aw(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Jae(e,t,n,r){let i=[],s=[],o,a;e.doc.nodesBetween(t,n,(l,u,c)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let f=Math.max(u,t),h=Math.min(u+l.nodeSize,n),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(d[m])?o.to=h:i.push(o=new Xr(f,h,d[m])));a&&a.to==f?a.to=h:s.push(a=new go(f,h,r))}}),i.forEach(l=>e.step(l)),s.forEach(l=>e.step(l))}function Qae(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Q0){let u=o.marks,c;for(;c=r.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,n);for(let c=0;c<l.length;c++){let d=l[c],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==s-1&&d.eq(i[h].style)&&(f=p)}f?(f.to=u,f.step=s):i.push({style:d,from:Math.max(a,t),to:u,step:s})}}}),i.forEach(o=>e.step(new Xr(o.from,o.to,o.style)))}function RS(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],a=t+1;for(let l=0;l<s.childCount;l++){let u=s.child(l),c=a+u.nodeSize,d=r.matchType(u.type);if(!d)o.push(new Vt(a,c,te.empty));else{r=d;for(let f=0;f<u.marks.length;f++)n.allowsMarkType(u.marks[f].type)||e.step(new Xr(a,c,u.marks[f]));if(i&&u.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(u.text);)p||(p=new te(V.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),o.push(new Vt(a+f.index,a+f.index+f[0].length,p))}}a=c}if(!r.validEnd){let l=r.fillBefore(V.empty,!0);e.replace(a,a,new te(l,0,0))}for(let l=o.length-1;l>=0;l--)e.step(o[l])}function Yae(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Tc(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth,i=0,s=0;;--r){let o=e.$from.node(r),a=e.$from.index(r)+i,l=e.$to.indexAfter(r)-s;if(r<e.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!Yae(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function Xae(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),a=i.after(s+1),l=o,u=a,c=V.empty,d=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,c=V.from(r.node(p).copy(c)),d++):l--;let f=V.empty,h=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=V.from(i.node(p).copy(f)),h++):u++;e.step(new qt(l,u,o,a,new te(c.append(f),d,h),c.size-d,!0))}function NS(e,t,n=null,r=e){let i=Zae(e,t),s=i&&ele(r,t);return s?i.map(B3).concat({type:t,attrs:n}).concat(s.map(B3)):null}function B3(e){return{type:e,attrs:null}}function Zae(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function ele(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:o}function tle(e,t,n){let r=V.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=V.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new qt(i,s,i,s,new te(r,0,0),n.length,!0))}function nle(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&rle(e.doc,e.mapping.slice(s).map(a),r)){let u=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?u=!1:!h&&p&&(u=!0)}u===!1&&Sj(e,o,a,s),RS(e,e.mapping.slice(s).map(a,1),r,void 0,u===null);let c=e.mapping.slice(s),d=c.map(a,1),f=c.map(a+o.nodeSize,1);return e.step(new qt(d,f,d+1,f-1,new te(V.from(r.create(l,null,o.marks)),0,0),1,!0)),u===!0&&Cj(e,o,a,s),!1}})}function Cj(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function Sj(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function rle(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function ile(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new qt(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new te(V.from(o),0,0),1,!0))}function ku(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>s;u--,c--){let d=i.node(u),f=i.index(u);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[c+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[c]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function sle(e,t,n=1,r){let i=e.doc.resolve(t),s=V.empty,o=V.empty;for(let a=i.depth,l=i.depth-n,u=n-1;a>l;a--,u--){s=V.from(i.node(a).copy(s));let c=r&&r[u];o=V.from(c?c.type.create(c.attrs,o):i.node(a).copy(o))}e.step(new Vt(t,t,new te(s.append(o),n,n),!0))}function Xo(e,t){let n=e.resolve(t),r=n.index();return Ej(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function ole(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function Ej(e,t){return!!(e&&t&&!e.isLeaf&&ole(e,t))}function Y0(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&Ej(s,o)&&r.node(i).canReplace(a,a+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function ale(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let c=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);c&&!d?r=!1:!c&&d&&(r=!0)}let a=e.steps.length;if(r===!1){let c=e.doc.resolve(t+n);Sj(e,c.node(),c.before(),a)}o.inlineContent&&RS(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=e.mapping.slice(a),u=l.map(t-n);if(e.step(new Vt(u,l.map(t+n,-1),te.empty,!0)),r===!0){let c=e.doc.resolve(u);Cj(e,c.node(),c.before(),e.steps.length)}return e}function lle(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Tj(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),u=r.node(o),c=!1;if(s==1)c=u.canReplace(l,l,i);else{let d=u.contentMatchAt(l).findWrapping(i.firstChild.type);c=d&&u.canReplaceWith(l,l,d[0])}if(c)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function X0(e,t,n=t,r=te.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return _j(i,s,r)?new Vt(t,n,r):new ule(i,s,r).fit()}function _j(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class ule{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=V.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=V.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new te(s,o,a);return t>-1?new qt(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Vt(r.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=X1(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],c,d=null;if(n==1&&(o?u.matchType(o.type)||(d=u.fillBefore(V.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(c=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:c};if(s&&u.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=X1(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new te(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=X1(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new te(od(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new te(od(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-t,u=0,c=[],{match:d,type:f}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));d=d.matchFragment(i)}let h=a.size+t-(o.content.size-o.openEnd);for(;u<a.childCount;){let m=a.child(u),g=d.matchType(m.type);if(!g)break;u++,(u>1||l==0||m.content.size)&&(d=g,c.push(Aj(m.mark(f.allowedMarks(m.marks)),u==1?l:0,u==a.childCount?h:-1)))}let p=u==a.childCount;p||(h=-1),this.placed=ad(this.placed,n,V.from(c)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<h;m++){let b=g.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),g=b.content}this.unplaced=p?t==0?te.empty:new te(od(o.content,t-1,1),t-1,h<0?o.openEnd:t-1):new te(od(o.content,t,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!Z1(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=Z1(t,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=Z1(t,a,u,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ad(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=ad(this.placed,this.depth,V.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(V.empty,!0);n.childCount&&(this.placed=ad(this.placed,this.frontier.length,n))}}function od(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(od(e.firstChild.content,t-1,n)))}function ad(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(ad(e.lastChild.content,t-1,n)))}function X1(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function Aj(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,Aj(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(V.empty,!0)))),e.copy(r)}function Z1(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!cle(n,s.content,o)?a:null}function cle(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function dle(e){return e.spec.defining||e.spec.definingForContent}function fle(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(_j(i,s,r))return e.step(new Vt(t,n,r));let o=Rj(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:i.before(f)==h&&o.splice(1,0,-f)}let l=o.indexOf(a),u=[],c=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(u.push(p),h==r.openStart)break;f=p.content}for(let f=c-1;f>=0;f--){let h=u[f],p=dle(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(a)-1)))c=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+c+1)%(r.openStart+1),p=u[h];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],b=!0;g<0&&(b=!1,g=-g);let v=i.node(g-1),x=i.index(g-1);if(v.canReplaceWith(x,x,p.type,p.marks))return e.replace(i.before(g),b?s.after(g):n,new te(Pj(r.content,0,r.openStart,h),h,r.openEnd))}}let d=e.steps.length;for(let f=o.length-1;f>=0&&(e.replace(t,n,r),!(e.steps.length>d));f--){let h=o[f];h<0||(t=i.before(h),n=s.after(h))}}function Pj(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(Pj(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(V.empty,!0))}return e}function hle(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=lle(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new te(V.from(r),0,0))}function ple(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=Rj(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return e.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function Rj(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class Cu extends bn{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Mt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Mt.fromReplace(t,this.pos,this.pos+1,new te(V.from(i),0,n.isLeaf?0:1))}getMap(){return er.empty}invert(t){return new Cu(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Cu(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Cu(n.pos,n.attr,n.value)}}bn.jsonID("attr",Cu);class Pf extends bn{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Mt.ok(r)}getMap(){return er.empty}invert(t){return new Pf(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Pf(n.attr,n.value)}}bn.jsonID("docAttr",Pf);let Xu=class extends Error{};Xu=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Xu.prototype=Object.create(Error.prototype);Xu.prototype.constructor=Xu;Xu.prototype.name="TransformError";class DS{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Af}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Xu(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let t=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(t=i.map(t,1),n=i.map(n,-1)),i.forEach((s,o,a,l)=>{t=Math.min(t,a),n=Math.max(n,l)})}return t==1e9?null:{from:t,to:n}}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=te.empty){let i=X0(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new te(V.from(r),0,0))}delete(t,n){return this.replace(t,n,te.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return fle(this,t,n,r),this}replaceRangeWith(t,n,r){return hle(this,t,n,r),this}deleteRange(t,n){return ple(this,t,n),this}lift(t,n){return Xae(this,t,n),this}join(t,n=1){return ale(this,t,n),this}wrap(t,n){return tle(this,t,n),this}setBlockType(t,n=t,r,i=null){return nle(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return ile(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new Cu(t,n,r)),this}setDocAttribute(t,n){return this.step(new Pf(t,n)),this}addNodeMark(t,n){return this.step(new yo(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof Ve)n.isInSet(r.marks)&&this.step(new sl(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new sl(t,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(t,n=1,r){return sle(this,t,n,r),this}addMark(t,n,r){return Jae(this,t,n,r),this}removeMark(t,n,r){return Qae(this,t,n,r),this}clearIncompatible(t,n,r){return RS(this,t,n,r),this}}const eb=Object.create(null);class ye{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new Nj(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=te.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],c=t.mapping.slice(s);t.replaceRange(c.map(l.pos),c.map(u.pos),a?te.empty:n),a==0&&H3(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=t.mapping.slice(r),u=l.map(o.pos),c=l.map(a.pos);s?t.deleteRange(u,c):(t.replaceRangeWith(u,c,n),H3(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new he(t):Bl(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?Bl(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):Bl(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new Ar(t.node(0))}static atStart(t){return Bl(t,t,0,0,1)||new Ar(t)}static atEnd(t){return Bl(t,t,t.content.size,t.childCount,-1)||new Ar(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=eb[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in eb)throw new RangeError("Duplicate use of selection JSON ID "+t);return eb[t]=n,n.prototype.jsonID=t,n}getBookmark(){return he.between(this.$anchor,this.$head).getBookmark()}}ye.prototype.visible=!0;class Nj{constructor(t,n){this.$from=t,this.$to=n}}let V3=!1;function U3(e){!V3&&!e.parent.inlineContent&&(V3=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class he extends ye{constructor(t,n=t){U3(t),U3(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return ye.near(r);let i=t.resolve(n.map(this.anchor));return new he(i.parent.inlineContent?i:r,r)}replace(t,n=te.empty){if(super.replace(t,n),n==te.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof he&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Z0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new he(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=ye.findFrom(n,r,!0)||ye.findFrom(n,-r,!0);if(s)n=s.$head;else return ye.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(ye.findFrom(t,-r,!0)||ye.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new he(t,n)}}ye.jsonID("text",he);class Z0{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Z0(t.map(this.anchor),t.map(this.head))}resolve(t){return he.between(t.resolve(this.anchor),t.resolve(this.head))}}class de extends ye{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?ye.near(s):new de(s)}content(){return new te(V.from(this.node),0,0)}eq(t){return t instanceof de&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new MS(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new de(t.resolve(n.anchor))}static create(t,n){return new de(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}de.prototype.visible=!1;ye.jsonID("node",de);class MS{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new Z0(r,r):new MS(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&de.isSelectable(r)?new de(n):ye.near(n)}}class Ar extends ye{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=te.empty){if(n==te.empty){t.delete(0,t.doc.content.size);let r=ye.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new Ar(t)}map(t){return new Ar(t)}eq(t){return t instanceof Ar}getBookmark(){return mle}}ye.jsonID("all",Ar);const mle={map(){return this},resolve(e){return new Ar(e)}};function Bl(e,t,n,r,i,s=!1){if(t.inlineContent)return he.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let a=t.child(o);if(a.isAtom){if(!s&&de.isSelectable(a))return de.create(e,n-(i<0?a.nodeSize:0))}else{let l=Bl(e,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function H3(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof Vt||i instanceof qt))return;let s=e.mapping.maps[r],o;s.forEach((a,l,u,c)=>{o==null&&(o=c)}),e.setSelection(ye.near(e.doc.resolve(o),n))}const W3=1,cp=2,q3=4;class gle extends DS{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|W3)&~cp,this.storedMarks=null,this}get selectionSet(){return(this.updated&W3)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=cp,this}ensureMarks(t){return Ve.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&cp)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~cp,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ve.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),!this.selection.empty&&this.selection.to==n+t.length&&this.setSelection(ye.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=q3,this}get scrolledIntoView(){return(this.updated&q3)>0}}function K3(e,t){return!t||!e?e:e.bind(t)}class ld{constructor(t,n,r){this.name=t,this.init=K3(n.init,r),this.apply=K3(n.apply,r)}}const yle=[new ld("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new ld("selection",{init(e,t){return e.selection||ye.atStart(t.doc)},apply(e){return e.selection}}),new ld("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new ld("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class tb{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=yle.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ld(r.key,r.spec.state,r))})}}class cu{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,u=i?i[o].state:this,c=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,u,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",t),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new cu(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new gle(this)}static create(t){let n=new tb(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new cu(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new tb(this.schema,t.plugins),r=n.fields,i=new cu(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new tb(t.schema,t.plugins),s=new cu(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ro.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=ye.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=u.fromJSON.call(l,t,n[a],s);return}}s[o.name]=o.init(t,s)}}),s}}function Dj(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=Dj(i,t,{})),n[r]=i}return n}class tt{constructor(t){this.spec=t,this.props={},t.props&&Dj(t.props,this,this.props),this.key=t.key?t.key.key:Mj("plugin")}getState(t){return t[this.key]}}const nb=Object.create(null);function Mj(e){return e in nb?e+"$"+ ++nb[e]:(nb[e]=0,e+"$")}class mt{constructor(t="key"){this.key=Mj(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const ble=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function Oj(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const vle=(e,t,n)=>{let r=Oj(e,n);if(!r)return!1;let i=OS(r);if(!i){let o=r.blockRange(),a=o&&Tc(o);return a==null?!1:(t&&t(e.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(Fj(e,i,t,-1))return!0;if(r.parent.content.size==0&&(Zu(s,"end")||de.isSelectable(s)))for(let o=r.depth;;o--){let a=X0(e.doc,r.before(o),r.after(o),te.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(Zu(s,"end")?ye.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):de.create(l.doc,i.pos-s.nodeSize)),t(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},xle=(e,t,n)=>{let r=Oj(e,n);if(!r)return!1;let i=OS(r);return i?Ij(e,i,t):!1},wle=(e,t,n)=>{let r=jj(e,n);if(!r)return!1;let i=IS(r);return i?Ij(e,i,t):!1};function Ij(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let o=t.nodeAfter,a=o,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let u=X0(e.doc,s,l,te.empty);if(!u||u.from!=s||u instanceof Vt&&u.slice.size>=l-s)return!1;if(n){let c=e.tr.step(u);c.setSelection(he.create(c.doc,s)),n(c.scrollIntoView())}return!0}function Zu(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const kle=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=OS(r)}let o=s&&s.nodeBefore;return!o||!de.isSelectable(o)?!1:(t&&t(e.tr.setSelection(de.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function OS(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function jj(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const Cle=(e,t,n)=>{let r=jj(e,n);if(!r)return!1;let i=IS(r);if(!i)return!1;let s=i.nodeAfter;if(Fj(e,i,t,1))return!0;if(r.parent.content.size==0&&(Zu(s,"start")||de.isSelectable(s))){let o=X0(e.doc,r.before(),r.after(),te.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=e.tr.step(o);a.setSelection(Zu(s,"start")?ye.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):de.create(a.doc,a.mapping.map(i.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Sle=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=IS(r)}let o=s&&s.nodeAfter;return!o||!de.isSelectable(o)?!1:(t&&t(e.tr.setSelection(de.create(e.doc,s.pos)).scrollIntoView()),!0)};function IS(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const Ele=(e,t)=>{let n=e.selection,r=n instanceof de,i;if(r){if(n.node.isTextblock||!Xo(e.doc,n.from))return!1;i=n.from}else if(i=Y0(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(de.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},Tle=(e,t)=>{let n=e.selection,r;if(n instanceof de){if(n.node.isTextblock||!Xo(e.doc,n.to))return!1;r=n.to}else if(r=Y0(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},_le=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&Tc(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},Ale=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function Lj(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Ple=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=Lj(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,o.createAndFill());l.setSelection(ye.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},Rle=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof Ar||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Lj(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=e.tr.insert(o,s.createAndFill());a.setSelection(he.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},Nle=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(ku(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Tc(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},Dle=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(de.create(e.doc,i))),!0)};function Mle(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||Xo(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function Fj(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&Mle(e,t,n))return!0;let u=!l&&t.parent.canReplace(t.index(),t.index()+1);if(u&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let h=t.pos+s.nodeSize,p=V.empty;for(let b=o.length-1;b>=0;b--)p=V.from(o[b].create(null,p));p=V.from(i.copy(p));let m=e.tr.step(new qt(t.pos-1,h,t.pos,h,new te(p,1,0),o.length,!0)),g=m.doc.resolve(h+2*o.length);g.nodeAfter&&g.nodeAfter.type==i.type&&Xo(m.doc,g.pos)&&m.join(g.pos),n(m.scrollIntoView())}return!0}let c=s.type.spec.isolating||r>0&&l?null:ye.findFrom(t,1),d=c&&c.$from.blockRange(c.$to),f=d&&Tc(d);if(f!=null&&f>=t.depth)return n&&n(e.tr.lift(d,f).scrollIntoView()),!0;if(u&&Zu(s,"start",!0)&&Zu(i,"end")){let h=i,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let m=s,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(h.canReplace(h.childCount,h.childCount,m.content)){if(n){let b=V.empty;for(let x=p.length-1;x>=0;x--)b=V.from(p[x].copy(b));let v=e.tr.step(new qt(t.pos-p.length,t.pos+s.nodeSize,t.pos+g,t.pos+s.nodeSize-g,new te(b,p.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function $j(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(he.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const Ole=$j(-1),Ile=$j(1);function jle(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&NS(o,e,t);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function G3(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let c=n.doc.resolve(u),d=c.index();i=c.parent.canReplaceWith(d,d+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,e,t)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Lle(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return Fle(a,o,e,t)?(r&&r(a.scrollIntoView()),!0):!1}}function Fle(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=o.resolve(t.start-2);s=new dg(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new dg(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let a=NS(s,n,r,t);return a?(e&&$le(e,t,a,i,n),!0):!1}function $le(e,t,n,r,i){let s=V.empty;for(let c=n.length-1;c>=0;c--)s=V.from(n[c].type.create(n[c].attrs,s));e.step(new qt(t.start-(r?2:0),t.end,t.start,t.end,new te(s,0,0),n.length,!0));let o=0;for(let c=0;c<n.length;c++)n[c].type==i&&(o=c+1);let a=n.length-o,l=t.start+n.length-(r?2:0),u=t.parent;for(let c=t.startIndex,d=t.endIndex,f=!0;c<d;c++,f=!1)!f&&ku(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return e}function zle(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?Ble(t,n,e,s):Vle(t,n,s):!0:!1}}function Ble(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new qt(s-1,o,s,o,new te(V.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new dg(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=Tc(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return Xo(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}function Vle(e,t,n){let r=e.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,u=s.node(-1),c=s.index(-1);if(!u.canReplace(c+(a?0:1),c+1,o.content.append(l?V.empty:V.from(i))))return!1;let d=s.pos,f=d+o.nodeSize;return r.step(new qt(d-(a?1:0),f+(l?1:0),d+1,f-1,new te((a?V.empty:V.from(i.copy(V.empty))).append(l?V.empty:V.from(i.copy(V.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function Ule(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=e)return!1;if(n){let u=l.lastChild&&l.lastChild.type==a.type,c=V.from(u?e.create():null),d=new te(V.from(e.create(null,V.from(a.type.create(null,c)))),u?3:1,0),f=s.start,h=s.end;n(t.tr.step(new qt(f-(u?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}const en=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},ec=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let lw=null;const Zi=function(e,t,n){let r=lw||(lw=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},Hle=function(){lw=null},ol=function(e,t,n,r){return n&&(J3(e,t,n,r,-1)||J3(e,t,n,r,1))},Wle=/^(img|br|input|textarea|hr)$/i;function J3(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:wr(e))){let o=e.parentNode;if(!o||o.nodeType!=1||fh(e)||Wle.test(e.nodeName)||e.contentEditable=="false")return!1;t=en(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?wr(e):0}else return!1}}function wr(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function qle(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=wr(e)}else if(e.parentNode&&!fh(e))t=en(e),e=e.parentNode;else return null}}function Kle(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!fh(e))t=en(e)+1,e=e.parentNode;else return null}}function Gle(e,t,n){for(let r=t==0,i=t==wr(e);r||i;){if(e==n)return!0;let s=en(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==wr(e)}}function fh(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const ey=function(e){return e.focusNode&&ol(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function ma(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Jle(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Qle(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(wr(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(wr(r.startContainer),r.startOffset)}}}const Oi=typeof navigator<"u"?navigator:null,Q3=typeof document<"u"?document:null,Zo=Oi&&Oi.userAgent||"",uw=/Edge\/(\d+)/.exec(Zo),zj=/MSIE \d/.exec(Zo),cw=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Zo),Vn=!!(zj||cw||uw),No=zj?document.documentMode:cw?+cw[1]:uw?+uw[1]:0,Pr=!Vn&&/gecko\/(\d+)/i.test(Zo);Pr&&+(/Firefox\/(\d+)/.exec(Zo)||[0,0])[1];const dw=!Vn&&/Chrome\/(\d+)/.exec(Zo),nn=!!dw,Bj=dw?+dw[1]:0,mn=!Vn&&!!Oi&&/Apple Computer/.test(Oi.vendor),tc=mn&&(/Mobile\/\w+/.test(Zo)||!!Oi&&Oi.maxTouchPoints>2),yr=tc||(Oi?/Mac/.test(Oi.platform):!1),Vj=Oi?/Win/.test(Oi.platform):!1,ss=/Android \d/.test(Zo),hh=!!Q3&&"webkitFontSmoothing"in Q3.documentElement.style,Yle=hh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Xle(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Hi(e,t){return typeof e=="number"?e:e[t]}function Zle(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Y3(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=ec(o);continue}let a=o,l=a==s.body,u=l?Xle(s):Zle(a),c=0,d=0;if(t.top<u.top+Hi(r,"top")?d=-(u.top-t.top+Hi(i,"top")):t.bottom>u.bottom-Hi(r,"bottom")&&(d=t.bottom-t.top>u.bottom-u.top?t.top+Hi(i,"top")-u.top:t.bottom-u.bottom+Hi(i,"bottom")),t.left<u.left+Hi(r,"left")?c=-(u.left-t.left+Hi(i,"left")):t.right>u.right-Hi(r,"right")&&(c=t.right-u.right+Hi(i,"right")),c||d)if(l)s.defaultView.scrollBy(c,d);else{let h=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),c&&(a.scrollLeft+=c);let m=a.scrollLeft-h,g=a.scrollTop-p;t={left:t.left-m,top:t.top-g,right:t.right-m,bottom:t.bottom-g}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:ec(o)}}function eue(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let a=e.root.elementFromPoint(s,o);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:Uj(e.dom)}}function Uj(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=ec(r));return t}function tue({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;Hj(n,r==0?0:r-t)}function Hj(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Rl=null;function nue(e){if(e.setActive)return e.setActive();if(Rl)return e.focus(Rl);let t=Uj(e);e.focus(Rl==null?{get preventScroll(){return Rl={preventScroll:!0},!0}}:void 0),Rl||(Rl=!1,Hj(t,0))}function Wj(e,t){let n,r=2e8,i,s=0,o=t.top,a=t.top,l,u;for(let c=e.firstChild,d=0;c;c=c.nextSibling,d++){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=Zi(c).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(m<r){n=c,r=m,i=m&&n.nodeType==3?{left:p.right<t.left?p.right:p.left,top:t.top}:t,c.nodeType==1&&m&&(s=d+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!l&&p.left<=t.left&&p.right>=t.left&&(l=c,u={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=u,r=0),n&&n.nodeType==3?rue(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:Wj(n,i)}function rue(e,t){let n=e.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(e,s+1),r.setStart(e,s);let o=$s(r,1);if(o.top!=o.bottom&&jS(t,o)){i={node:e,offset:s+(t.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:e,offset:0}}function jS(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function iue(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function sue(e,t,n){let{node:r,offset:i}=Wj(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function oue(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let a=e.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function qj(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(jS(t,u))return qj(o,t,u)}}if((s=(s+1)%r)==i)break}return e}function aue(e,t){let n=e.dom.ownerDocument,r,i=0,s=Qle(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=e.dom.getBoundingClientRect();if(!jS(t,u)||(o=qj(e.dom,t,u),!o))return null}if(mn)for(let u=o;r&&u;u=ec(u))u.draggable&&(r=void 0);if(o=iue(o,t),r){if(Pr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}let u;hh&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=oue(e,r,i,t))}a==null&&(a=sue(e,o,t));let l=e.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function X3(e){return e.top<e.bottom||e.left<e.right}function $s(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(X3(r))return r}return Array.prototype.find.call(n,X3)||e.getBoundingClientRect()}const lue=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Kj(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=hh||Pr;if(r.nodeType==3)if(o&&(lue.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=$s(Zi(r,i,i),n);if(Pr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=$s(Zi(r,i-1,i-1),-1);if(u.top==l.top){let c=$s(Zi(r,i,i+1),-1);if(c.top!=l.top)return Uc(c,c.left<u.left)}}return l}else{let l=i,u=i,c=n<0?1:-1;return n<0&&!i?(u++,c=-1):n>=0&&i==r.nodeValue.length?(l--,c=1):n<0?l--:u++,Uc($s(Zi(r,l,u),c),c<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==wr(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return rb(l.getBoundingClientRect(),!1)}if(s==null&&i<wr(r)){let l=r.childNodes[i];if(l.nodeType==1)return rb(l.getBoundingClientRect(),!0)}return rb(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==wr(r))){let l=r.childNodes[i-1],u=l.nodeType==3?Zi(l,wr(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return Uc($s(u,1),!1)}if(s==null&&i<wr(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?Zi(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return Uc($s(u,-1),!0)}return Uc($s(r.nodeType==3?Zi(r):r,-n),n>=0)}function Uc(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function rb(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Gj(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function uue(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return Gj(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=Kj(e,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Zi(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(n=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const cue=/[\u0590-\u08ac]/;function due(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=e.domSelection();return a?!cue.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:Gj(e,t,()=>{let{focusNode:l,focusOffset:u,anchorNode:c,anchorOffset:d}=e.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:p,focusOffset:m}=e.domSelectionRange(),g=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&u==m;try{a.collapse(c,d),l&&(l!=c||u!=d)&&a.extend&&a.extend(l,u)}catch{}return f!=null&&(a.caretBidiLevel=f),g}):r.pos==r.start()||r.pos==r.end()}let Z3=null,eP=null,tP=!1;function fue(e,t,n){return Z3==t&&eP==n?tP:(Z3=t,eP=n,tP=n=="up"||n=="down"?uue(e,t,n):due(e,t,n))}const Rr=0,nP=1,Ea=2,Ii=3;class ph{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Rr,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>en(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>t||o instanceof Qj){i=t-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Jj&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?en(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?en(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],u=o+l.size;if(i==-1&&t<=u){let c=o+l.border;if(t>=c&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,c);t=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=en(f.dom)+1;break}t-=f.size}i==-1&&(i=0)}if(i>-1&&(u>n||a==this.children.length-1)){n=u;for(let c=a+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=en(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let h=0,p=0;h<this.children.length;h++){let m=this.children[h],g=p+m.size;if(s>p&&o<g)return m.setSelection(t-p-m.border,n-p-m.border,r,i);p=g}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((Pr||mn)&&t==n){let{node:h,offset:p}=a;if(h.nodeType==3){if(d=!!(p&&h.nodeValue[p-1]==`
`),d&&p==h.nodeValue.length)for(let m=h,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:en(g)+1});break}let b=m.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let m=h.childNodes[p-1];d=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Pr&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&mn)&&ol(a.node,a.offset,c.anchorNode,c.anchorOffset)&&ol(l.node,l.offset,c.focusNode,c.focusOffset))return;let f=!1;if((u.extend||t==n)&&!(d&&Pr)){u.collapse(a.node,a.offset);try{t!=n&&u.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(t>n){let p=a;a=l,l=p}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(h)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let a=r+s.border,l=o-s.border;if(t>=a&&n<=l){this.dirty=t==r||n==o?Ea:nP,t==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ii:s.markDirty(t-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ea:Ii}r=o}this.dirty=Ea}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Ea:nP;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class Jj extends ph{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==Rr&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class hue extends ph{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class al extends ph{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=vl.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new al(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Ii||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Ii&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Rr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Rr}}slice(t,n,r){let i=al.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=hw(s,n,o,r)),t>0&&(s=hw(s,0,t,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Do extends ph{constructor(t,n,r,i,s,o,a,l,u){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(t,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,u=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=u&&u.dom,d=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=vl.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let f=c;return c=Zj(c,r,n),u?l=new pue(t,n,r,i,c,d||null,f,u,s,o+1):n.isText?new ty(t,n,r,i,c,f,s):new Do(t,n,r,i,c,d||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>V.empty)}return t}matchesNode(t,n,r){return this.dirty==Rr&&t.eq(this.node)&&hg(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new gue(this,o&&o.node,t);vue(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,t,c):u.type.side>=0&&!d&&l.syncToMarks(c==this.node.childCount?Ve.none:this.node.child(c).marks,r,t,c),l.placeWidget(u,t,i)},(u,c,d,f)=>{l.syncToMarks(u.marks,r,t,f);let h;l.findNodeMatch(u,c,d,f)||a&&t.state.selection.from>i&&t.state.selection.to<i+u.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(u,c,d,h,t)||l.updateNextNode(u,c,d,t,f,i)||l.addNode(u,c,d,t,i),i+=u.nodeSize}),l.syncToMarks([],r,t,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ea)&&(o&&this.protectLocalComposition(t,o),Yj(this.contentDOM,this.children,t),tc&&xue(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof he)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=wue(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new hue(this,s,n,i);t.input.compositionNodes.push(o),this.children=hw(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==Ii||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Rr}updateOuterDeco(t){if(hg(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Xj(this.dom,this.nodeDOM,fw(this.outerDeco,this.node,n),fw(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function rP(e,t,n,r,i){Zj(r,t,e);let s=new Do(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class ty extends Do{constructor(t,n,r,i,s,o,a){super(t,n,r,i,s,null,o,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==Ii||this.dirty!=Rr&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Rr||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Rr,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new ty(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ii)}get domAtom(){return!1}isText(t){return this.node.text==t}}class Qj extends ph{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Rr&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class pue extends Do{constructor(t,n,r,i,s,o,a,l,u,c){super(t,n,r,i,s,o,a,u,c),this.spec=l}update(t,n,r,i){if(this.dirty==Ii)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function Yj(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],a=o.dom;if(a.parentNode==e){for(;a!=r;)r=iP(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(o instanceof al){let l=r?r.previousSibling:e.lastChild;Yj(o.contentDOM,o.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=iP(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const Dd=function(e){e&&(this.nodeName=e)};Dd.prototype=Object.create(null);const Ta=[new Dd];function fw(e,t,n){if(e.length==0)return Ta;let r=n?Ta[0]:new Dd,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new Dd(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new Dd(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function Xj(e,t,n,r){if(n==Ta&&r==Ta)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Ta[0]),i=l}mue(i,a||Ta[0],o)}return i}function mue(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function Zj(e,t,n){return Xj(e,e,Ta,fw(t,n,e.nodeType!=1))}function hg(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function iP(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class gue{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=yue(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r,i){let s=0,o=this.stack.length>>1,a=Math.min(o,t.length);for(;s<a&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&t[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=Rr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let l=-1,u=this.top.children.length;i<this.preMatch.index&&(u=Math.min(this.index+3,u));for(let c=this.index;c<u;c++){let d=this.top.children[c];if(d.matchesMark(t[o])&&!this.isLocked(d.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=al.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(t,n,r)&&!this.preMatch.matched.has(u)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==Ii&&o.dom==o.contentDOM&&(o.dirty=Ea),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Do){let u=this.preMatch.matched.get(l);if(u!=null&&u!=s)return!1;let c=l.dom,d,f=this.isLocked(c)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=Ii&&hg(n,l.outerDeco));if(!f&&l.update(t,n,r,i))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,t,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Ea,d.updateChildren(i,o+1),d.dirty=Rr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!hg(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let a=Do.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,n,r,i,s){let o=Do.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Jj(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof al;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof ty)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((mn||nn)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Qj(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function yue(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let u=n.children[r-1];if(u instanceof al)n=u,r=u.children.length;else{a=u,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function bue(e,t){return e.type.side-t.type.side}function vue(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let u=0;u<e.childCount;u++){let c=e.child(u);r(c,i,t.forChild(s,c),u),s+=c.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){let c,d;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(c?(d||(d=[c])).push(g):c=g)}if(c)if(d){d.sort(bue);for(let g=0;g<d.length;g++)n(d[g],u,!!l)}else n(c,u,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(u<e.childCount)h=u,f=e.child(u++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+f.nodeSize;if(f.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let b=0;b<a.length;b++)a[b].to<g&&(g=a[b].to);g<p&&(l=f.cut(g-s),f=f.cut(0,g-s),p=g,h=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=f.isInline&&!f.isLeaf?a.filter(g=>!g.inline):a.slice();r(f,m,t.forChild(s,f),h),s=p}}function xue(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function wue(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<e.childCount;){let u=e.child(i++);if(s+=u.nodeSize,!u.isText)break;l+=u.text}if(s>=n){if(s>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let u=a<r?l.lastIndexOf(t,r-a-1):-1;if(u>=0&&u+t.length+a>=n)return a+u;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function hw(e,t,n,r,i){let s=[];for(let o=0,a=0;o<e.length;o++){let l=e[o],u=a,c=a+=l.size;u>=n||c<=t?s.push(l):(u<t&&s.push(l.slice(0,t-u,r)),i&&(s.push(i),i=void 0),c>n&&s.push(l.slice(n-u,l.size,r)))}return s}function LS(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,u;if(ey(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&de.isSelectable(d)&&i.parent&&!(d.isInline&&Gle(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;u=new de(o==f?a:r.resolve(f))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let h=0;h<n.rangeCount;h++){let p=n.getRangeAt(h);d=Math.min(d,e.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,e.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,o]=f==e.state.selection.anchor?[f,d]:[d,f],a=r.resolve(o)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let c=r.resolve(l);if(!u){let d=t=="pointer"||e.state.selection.head<a.pos&&!s?1:-1;u=FS(e,c,a,d)}return u}function eL(e){return e.editable?e.hasFocus():nL(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function cs(e,t=!1){let n=e.state.selection;if(tL(e,n),!!eL(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&nn){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ol(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)Cue(e);else{let{anchor:r,head:i}=n,s,o;sP&&!(n instanceof he)&&(n.$from.parent.inlineContent||(s=oP(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=oP(e,n.to))),e.docView.setSelection(r,i,e,t),sP&&(s&&aP(s),o&&aP(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&kue(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const sP=mn||nn&&Bj<63;function oP(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(mn&&i&&i.contentEditable=="false")return ib(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return ib(i);if(s)return ib(s)}}function ib(e){return e.contentEditable="true",mn&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function aP(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function kue(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!eL(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function Cue(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,en(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&Vn&&No<=11&&(n.disabled=!0,n.disabled=!1)}function tL(e,t){if(t instanceof de){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(lP(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else lP(e)}function lP(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function FS(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||he.between(t,n,r)}function uP(e){return e.editable&&!e.hasFocus()?!1:nL(e)}function nL(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Sue(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return ol(t.node,t.offset,n.anchorNode,n.anchorOffset)}function pw(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&ye.findFrom(s,t)}function Hs(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function cP(e,t,n){let r=e.state.selection;if(r instanceof he)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Hs(e,new he(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=pw(e.state,t);return i&&i instanceof de?Hs(e,i):!1}else if(!(yr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(a))&&!o.contentDOM?de.isSelectable(s)?Hs(e,new de(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):hh?Hs(e,new he(e.state.doc.resolve(t<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof de&&r.node.isInline)return Hs(e,new he(t>0?r.$to:r.$from));{let i=pw(e.state,t);return i?Hs(e,i):!1}}}function pg(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Md(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Nl(e,t){return t<0?Eue(e):Tue(e)}function Eue(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(Pr&&n.nodeType==1&&r<pg(n)&&Md(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Md(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(rL(n))break;{let a=n.previousSibling;for(;a&&Md(a,-1);)i=n.parentNode,s=en(a),a=a.previousSibling;if(a)n=a,r=pg(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?mw(e,n,r):i&&mw(e,i,s)}function Tue(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=pg(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Md(a,1))s=n,o=++r;else break}else{if(rL(n))break;{let a=n.nextSibling;for(;a&&Md(a,1);)s=a.parentNode,o=en(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=pg(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&mw(e,s,o)}function rL(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function _ue(e,t){for(;e&&t==e.childNodes.length&&!fh(e);)t=en(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function Aue(e,t){for(;e&&!t&&!fh(e);)t=en(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function mw(e,t,n){if(t.nodeType!=3){let s,o;(o=_ue(t,n))?(t=o,n=0):(s=Aue(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(ey(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&cs(e)},50)}function dP(e,t){let n=e.state.doc.resolve(t);if(!(nn||Vj)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function fP(e,t,n){let r=e.state.selection;if(r instanceof he&&!r.empty||n.indexOf("s")>-1||yr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=pw(e.state,t);if(o&&o instanceof de)return Hs(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,a=r instanceof Ar?ye.near(o,t):ye.findFrom(o,t);return a?Hs(e,a):!1}return!1}function hP(e,t){if(!(e.state.selection instanceof he))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function pP(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Pue(e){if(!mn||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;pP(e,r,"true"),setTimeout(()=>pP(e,r,"false"),20)}return!1}function Rue(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Nue(e,t){let n=t.keyCode,r=Rue(t);if(n==8||yr&&n==72&&r=="c")return hP(e,-1)||Nl(e,-1);if(n==46&&!t.shiftKey||yr&&n==68&&r=="c")return hP(e,1)||Nl(e,1);if(n==13||n==27)return!0;if(n==37||yr&&n==66&&r=="c"){let i=n==37?dP(e,e.state.selection.from)=="ltr"?-1:1:-1;return cP(e,i,r)||Nl(e,i)}else if(n==39||yr&&n==70&&r=="c"){let i=n==39?dP(e,e.state.selection.from)=="ltr"?1:-1:1;return cP(e,i,r)||Nl(e,i)}else{if(n==38||yr&&n==80&&r=="c")return fP(e,-1,r)||Nl(e,-1);if(n==40||yr&&n==78&&r=="c")return Pue(e)||fP(e,1,r)||Nl(e,1);if(r==(yr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function $S(e,t){e.someProp("transformCopied",h=>{t=h(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=e.someProp("clipboardSerializer")||vl.fromSchema(e.state.schema),a=uL(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let u=l.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=lL[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let p=a.createElement(c[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=e.someProp("clipboardTextSerializer",h=>h(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:f,slice:t}}function iL(e,t,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!t)return null;let l=!!t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",f=>{t=f(t,s||r,e)}),s)return a=new te(V.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",f=>{a=f(a,e,!0)}),a;let d=e.someProp("clipboardTextParser",f=>f(t,i,r,e));if(d)a=d;else{let f=i.marks(),{schema:h}=e.state,p=vl.fromSchema(h);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,f)))})}}else e.someProp("transformPastedHTML",d=>{n=d(n,e)}),o=Iue(n),hh&&jue(o);let u=o&&o.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||us.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Due.test(f.parentNode.nodeName)?{ignore:!0}:null}})),c)a=Lue(mP(a,+c[1],+c[2]),c[4]);else if(a=te.maxOpen(Mue(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=mP(a,d,f)}return e.someProp("transformPasted",d=>{a=d(a,e,l)}),a}const Due=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Mue(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&s.length&&oL(l,s,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=aL(o[o.length-1],s.length));let c=sL(a,l);o.push(c),i=i.matchType(c.type),s=l}}),o)return V.from(o)}return e}function sL(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,V.from(e));return e}function oL(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=oL(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(V.from(sL(n,e,i+1))))}}function aL(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,aL(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(V.empty,!0);return e.copy(n.append(r))}function gw(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,a=o.content;return e.childCount>1&&(s=0),i<r-1&&(a=gw(a,t,n,r,i+1,s)),i>=n&&(a=t<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(V.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(a))}function mP(e,t,n){return t<e.openStart&&(e=new te(gw(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new te(gw(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const lL={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let gP=null;function uL(){return gP||(gP=document.implementation.createHTMLDocument("title"))}let sb=null;function Oue(e){let t=window.trustedTypes;return t?(sb||(sb=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),sb.createHTML(e)):e}function Iue(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=uL().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&lL[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=Oue(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function jue(e){let t=e.querySelectorAll(nn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function Lue(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=V.from(l.create(r[a+1],i)),s++,o++}return new te(i,s,o)}const _n={},An={},Fue={touchstart:!0,touchmove:!0};class $ue{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function zue(e){for(let t in _n){let n=_n[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{Vue(e,r)&&!zS(e,r)&&(e.editable||!(r.type in An))&&n(e,r)},Fue[t]?{passive:!0}:void 0)}mn&&e.dom.addEventListener("input",()=>null),yw(e)}function bo(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Bue(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function yw(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>zS(e,r))})}function zS(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function Vue(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Uue(e,t){!zS(e,t)&&_n[t.type]&&(e.editable||!(t.type in An))&&_n[t.type](e,t)}An.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!dL(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(ss&&nn&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),tc&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,ma(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||Nue(e,n)?n.preventDefault():bo(e,"key")};An.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};An.keypress=(e,t)=>{let n=t;if(dL(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||yr&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof he)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function ny(e){return{left:e.clientX,top:e.clientY}}function Hue(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function BS(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,a=>o>s.depth?a(e,n,s.nodeAfter,s.before(o),i,!0):a(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Su(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function Wue(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&de.isSelectable(r)?(Su(e,new de(n)),!0):!1}function que(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof de&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(de.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Su(e,de.create(e.state.doc,i)),!0):!1}function Kue(e,t,n,r,i){return BS(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?que(e,n):Wue(e,n))}function Gue(e,t,n,r){return BS(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function Jue(e,t,n,r){return BS(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||Que(e,n,r)}function Que(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Su(e,he.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Su(e,he.create(r,a+1,a+1+o.content.size));else if(de.isSelectable(o))Su(e,de.create(r,a));else continue;return!0}}function VS(e){return mg(e)}const cL=yr?"metaKey":"ctrlKey";_n.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=VS(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&Hue(n,e.input.lastClick)&&!n[cL]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(ny(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Yue(e,o,n,!!r)):(s=="doubleClick"?Gue:Jue)(e,o.pos,o.inside,n)?n.preventDefault():bo(e,"pointer"))};class Yue{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[cL],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let c=t.state.doc.resolve(n.pos);s=c.parent,o=c.depth?c.before():0}const a=i?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:u}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof de&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Pr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),bo(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>cs(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(ny(t))),this.updateAllowDefault(t),this.allowDefault||!n?bo(this.view,"pointer"):Kue(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||mn&&this.mightDrag&&!this.mightDrag.node.isAtom||nn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Su(this.view,ye.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):bo(this.view,"pointer")}move(t){this.updateAllowDefault(t),bo(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}_n.touchstart=e=>{e.input.lastTouch=Date.now(),VS(e),bo(e,"pointer")};_n.touchmove=e=>{e.input.lastTouch=Date.now(),bo(e,"pointer")};_n.contextmenu=e=>VS(e);function dL(e,t){return e.composing?!0:mn&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const Xue=ss?5e3:-1;An.compositionstart=An.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof he&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||nn&&Vj&&Zue(e)))e.markCursor=e.state.storedMarks||n.marks(),mg(e,!0),e.markCursor=null;else if(mg(e,!t.selection.empty),Pr&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=e.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}fL(e,Xue)};function Zue(e){let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(!t||t.nodeType!=1||n>=t.childNodes.length)return!1;let r=t.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}An.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.badSafariComposition?e.domObserver.forceFlush():e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,fL(e,20))};function fL(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>mg(e),t))}function hL(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=tce());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function ece(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=qle(t.focusNode,t.focusOffset),r=Kle(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function tce(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function mg(e,t=!1){if(!(ss&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),hL(e),t||e.docView&&e.docView.dirty){let n=LS(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function nce(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Rf=Vn&&No<15||tc&&Yle<604;_n.copy=An.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=Rf?null:n.clipboardData,o=r.content(),{dom:a,text:l}=$S(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):nce(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function rce(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function ice(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Nf(e,r.value,null,i,t):Nf(e,r.textContent,r.innerHTML,i,t)},50)}function Nf(e,t,n,r,i){let s=iL(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,s||te.empty)))return!0;if(!s)return!1;let o=rce(s),a=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function pL(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}An.paste=(e,t)=>{let n=t;if(e.composing&&!ss)return;let r=Rf?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Nf(e,pL(r),r.getData("text/html"),i,n)?n.preventDefault():ice(e,n)};class mL{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const sce=yr?"altKey":"ctrlKey";function gL(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[sce]}_n.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(ny(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof de?i.to-1:i.to))){if(r&&r.mightDrag)o=de.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=e.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=e.docView&&(o=de.create(e.state.doc,d.posBefore))}}let a=(o||e.state.selection).content(),{dom:l,text:u,slice:c}=$S(e,a);(!n.dataTransfer.files.length||!nn||Bj>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Rf?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Rf||n.dataTransfer.setData("text/plain",u),e.dragging=new mL(c,gL(e,n),o)};_n.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};An.dragover=An.dragenter=(e,t)=>t.preventDefault();An.drop=(e,t)=>{try{oce(e,t,e.dragging)}finally{e.dragging=null}};function oce(e,t,n){if(!t.dataTransfer)return;let r=e.posAtCoords(ny(t));if(!r)return;let i=e.state.doc.resolve(r.pos),s=n&&n.slice;s?e.someProp("transformPasted",h=>{s=h(s,e,!1)}):s=iL(e,pL(t.dataTransfer),Rf?null:t.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&gL(e,t));if(e.someProp("handleDrop",h=>h(e,t,s||te.empty,o))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?Tj(e.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=e.state.tr;if(o){let{node:h}=n;h?h.replace(l):l.deleteSelection()}let u=l.mapping.map(a),c=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=l.doc;if(c?l.replaceRangeWith(u,u,s.content.firstChild):l.replaceRange(u,u,s),l.doc.eq(d))return;let f=l.doc.resolve(u);if(c&&de.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new de(f));else{let h=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((p,m,g,b)=>h=b),l.setSelection(FS(e,f,l.doc.resolve(h)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}_n.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&cs(e)},20))};_n.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};_n.beforeinput=(e,t)=>{if(nn&&ss&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,ma(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in An)_n[e]=An[e];function Df(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class gg{constructor(t,n){this.toDOM=t,this.spec=n||Ua,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Ht(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof gg&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Df(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Mo{constructor(t,n){this.attrs=t,this.spec=n||Ua}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Ht(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Mo&&Df(this.attrs,t.attrs)&&Df(this.spec,t.spec)}static is(t){return t.type instanceof Mo}destroy(){}}class US{constructor(t,n){this.attrs=t,this.spec=n||Ua}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Ht(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof US&&Df(this.attrs,t.attrs)&&Df(this.spec,t.spec)}destroy(){}}class Ht{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Ht(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Ht(t,t,new gg(n,r))}static inline(t,n,r,i){return new Ht(t,n,new Mo(r,i))}static node(t,n,r,i){return new Ht(t,n,new US(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Mo}get widget(){return this.type instanceof gg}}const Vl=[],Ua={};class Qe{constructor(t,n){this.local=t.length?t:Vl,this.children=n.length?n:Vl}static create(t,n){return n.length?yg(n,t,0,Ua):cn}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=t&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let a=this.children[o]+1;this.children[o+2].findInner(t-a,n-a,r,i+a,s)}}map(t,n,r){return this==cn||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Ua)}mapInner(t,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?ace(this.children,o||[],t,n,r,i,s):o?new Qe(o.sort(Ha),Vl):cn}add(t,n){return n.length?this==cn?Qe.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((a,l)=>{let u=l+r,c;if(c=bL(n,a,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,c,u+1):i.splice(s,0,l,l+a.nodeSize,yg(c,a,u+1,Ua)),s+=3}});let o=yL(s?vL(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||o.splice(a--,1);return new Qe(o.length?this.local.concat(o).sort(Ha):this.local,i||this.children)}remove(t){return t.length==0||this==cn?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let c=0,d;c<t.length;c++)(d=t[c])&&d.from>a&&d.to<l&&(t[c]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(o,a+1);u!=cn?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Qe(i,r):cn}forChild(t,n){if(this==cn)return this;if(n.isLeaf)return Qe.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let s=t+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Mo){let u=Math.max(s,l.from)-s,c=Math.min(o,l.to)-s;u<c&&(i||(i=[])).push(l.copy(u,c))}}if(i){let a=new Qe(i.sort(Ha),Vl);return r?new Ys([a,r]):a}return r||cn}eq(t){if(this==t)return!0;if(!(t instanceof Qe)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return HS(this.localsInner(t))}localsInner(t){if(this==cn)return Vl;if(t.inlineContent||!this.local.some(Mo.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Mo||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Qe.empty=new Qe([],[]);Qe.removeOverlap=HS;const cn=Qe.empty;class Ys{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,Ua));return Ys.from(r)}forChild(t,n){if(n.isLeaf)return Qe.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=cn&&(s instanceof Ys?r=r.concat(s.members):r.push(s))}return Ys.from(r)}eq(t){if(!(t instanceof Ys)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?HS(r?n:n.sort(Ha)):Vl}static from(t){switch(t.length){case 0:return cn;case 1:return t[0];default:return new Ys(t.every(n=>n instanceof Qe)?t:t.reduce((n,r)=>n.concat(r instanceof Qe?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function ace(e,t,n,r,i,s,o){let a=e.slice();for(let u=0,c=s;u<n.maps.length;u++){let d=0;n.maps[u].forEach((f,h,p,m)=>{let g=m-p-(h-f);for(let b=0;b<a.length;b+=3){let v=a[b+1];if(v<0||f>v+c-d)continue;let x=a[b]+c-d;h>=x?a[b+1]=f<=x?-2:-1:f>=c&&g&&(a[b]+=g,a[b+1]+=g)}d+=g}),c=n.maps[u].map(c,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let c=n.map(e[u]+s),d=c-i;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(e[u+1]+s,-1),h=f-i,{index:p,offset:m}=r.content.findIndex(d),g=r.maybeChild(p);if(g&&m==d&&m+g.nodeSize==h){let b=a[u+2].mapInner(n,g,c+1,e[u]+s+1,o);b!=cn?(a[u]=d,a[u+1]=h,a[u+2]=b):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=lce(a,e,t,n,i,s,o),c=yg(u,r,0,o);t=c.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<c.children.length;d+=3){let h=c.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,c.children[d],c.children[d+1],c.children[d+2])}}return new Qe(t.sort(Ha),a)}function yL(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new Ht(i.from+t,i.to+t,i.type))}return n}function lce(e,t,n,r,i,s,o){function a(l,u){for(let c=0;c<l.local.length;c++){let d=l.local[c].map(r,i,u);d?n.push(d):o.onRemove&&o.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+s+1);return n}function bL(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function vL(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function yg(e,t,n,r){let i=[],s=!1;t.forEach((a,l)=>{let u=bL(e,a,l+n);if(u){s=!0;let c=yg(u,a,n+l+1,r);c!=cn&&i.push(l,l+a.nodeSize,c)}});let o=yL(s?vL(e):e,-n).sort(Ha);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Qe(o,i):cn}function Ha(e,t){return e.from-t.from||e.to-t.to}function HS(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),yP(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),yP(t,i,r.copy(s.from,r.to)));break}}}return t}function yP(e,t,n){for(;t<e.length&&Ha(n,e[t])>0;)t++;e.splice(t,0,n)}function ob(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=cn&&t.push(r)}),e.cursorWrapper&&t.push(Qe.create(e.state.doc,[e.cursorWrapper.deco])),Ys.from(t)}const uce={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},cce=Vn&&No<=11;class dce{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class fce{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new dce,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Vn&&No<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():mn&&t.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(t.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),cce&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,uce)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(uP(this.view)){if(this.suppressingSelectionUpdates)return cs(this.view);if(Vn&&No<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&ol(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=ec(s))n.add(s);for(let s=t.anchorNode;s;s=ec(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&uP(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(t.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(l.some(c=>c.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let c of l)if(c.nodeName=="BR"&&c.parentNode){let d=c.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&c.parentNode.removeChild(c)}}else if(Pr&&l.length){let c=l.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,f]=c;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of c){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||mce(t,d)!=h)&&f.remove()}}}let u=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&ey(r)&&(u=LS(t))&&u.eq(ye.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,cs(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),hce(t)),t.input.badSafariComposition&&(t.input.badSafariComposition=!1,gce(t,l)),this.handleDOMChange(s,o,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||cs(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let c=0;c<t.addedNodes.length;c++){let d=t.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(Vn&&No<=11&&t.addedNodes.length)for(let c=0;c<t.addedNodes.length;c++){let{previousSibling:d,nextSibling:f}=t.addedNodes[c];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==t.target?en(i)+1:0,a=r.localPosFromDOM(t.target,o,-1),l=s&&s.parentNode==t.target?en(s):t.target.childNodes.length,u=r.localPosFromDOM(t.target,l,1);return{from:a,to:u}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let bP=new WeakMap,vP=!1;function hce(e){if(!bP.has(e)&&(bP.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Pr,vP)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),vP=!0}}function xP(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return ol(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function pce(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return xP(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?xP(e,n):null}function mce(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function gce(e,t){var n;let{focusNode:r,focusOffset:i}=e.domSelectionRange();for(let s of t)if(((n=s.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let o=s.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let a=o;for(;;){let l=a.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;a=l}a.insertBefore(s,a.firstChild),r==s&&e.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function yce(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),u,c=l.anchorNode;if(c&&e.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],ey(l)||u.push({node:l.focusNode,offset:l.focusOffset})),nn&&e.input.lastKeyCode===8)for(let g=s;g>i;g--){let b=r.childNodes[g-1],v=b.pmViewDesc;if(b.nodeName=="BR"&&!v){s=g;break}if(!v||v.size)break}let d=e.state.doc,f=e.someProp("domParser")||us.fromSchema(e.state.schema),h=d.resolve(o),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:bce,context:h});if(u&&u[0].pos!=null){let g=u[0].pos,b=u[1]&&u[1].pos;b==null&&(b=g),p={anchor:g+o,head:b+o}}return{doc:m,sel:p,from:o,to:a}}function bce(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(mn&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||mn&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const vce=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function xce(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let E=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,P=LS(e,E);if(P&&!e.state.selection.eq(P)){if(nn&&ss&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",A=>A(e,ma(13,"Enter"))))return;let R=e.state.tr.setSelection(P);E=="pointer"?R.setMeta("pointer",!0):E=="key"&&R.scrollIntoView(),s&&R.setMeta("composition",s),e.dispatch(R)}return}let o=e.state.doc.resolve(t),a=o.sharedDepth(n);t=o.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,u=yce(e,t,n),c=e.state.doc,d=c.slice(u.from,u.to),f,h;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(f=e.state.selection.to,h="end"):(f=e.state.selection.from,h="start"),e.input.lastKeyCode=null;let p=Cce(d.content,u.doc.content,u.from,f,h);if(p&&e.input.domChangeCount++,(tc&&e.input.lastIOSEnter>Date.now()-225||ss)&&i.some(E=>E.nodeType==1&&!vce.test(E.nodeName))&&(!p||p.endA>=p.endB)&&e.someProp("handleKeyDown",E=>E(e,ma(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof he&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let E=wP(e,e.state.doc,u.sel);if(E&&!E.eq(e.state.selection)){let P=e.state.tr.setSelection(E);s&&P.setMeta("composition",s),e.dispatch(P)}}return}e.state.selection.from<e.state.selection.to&&p.start==p.endB&&e.state.selection instanceof he&&(p.start>e.state.selection.from&&p.start<=e.state.selection.from+2&&e.state.selection.from>=u.from?p.start=e.state.selection.from:p.endA<e.state.selection.to&&p.endA>=e.state.selection.to-2&&e.state.selection.to<=u.to&&(p.endB+=e.state.selection.to-p.endA,p.endA=e.state.selection.to)),Vn&&No<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>u.from&&u.doc.textBetween(p.start-u.from-1,p.start-u.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=u.doc.resolveNoCache(p.start-u.from),g=u.doc.resolveNoCache(p.endB-u.from),b=c.resolve(p.start),v=m.sameParent(g)&&m.parent.inlineContent&&b.end()>=p.endA;if((tc&&e.input.lastIOSEnter>Date.now()-225&&(!v||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!v&&m.pos<u.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&m.pos<g.pos&&!/\S/.test(u.doc.textBetween(m.pos,g.pos,"","")))&&e.someProp("handleKeyDown",E=>E(e,ma(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>p.start&&kce(c,p.start,p.endA,m,g)&&e.someProp("handleKeyDown",E=>E(e,ma(8,"Backspace")))){ss&&nn&&e.domObserver.suppressSelectionUpdates();return}nn&&p.endB==p.start&&(e.input.lastChromeDelete=Date.now()),ss&&!v&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==p.endA&&(p.endB-=2,g=u.doc.resolveNoCache(p.endB-u.from),setTimeout(()=>{e.someProp("handleKeyDown",function(E){return E(e,ma(13,"Enter"))})},20));let x=p.start,k=p.endA,S=E=>{let P=E||e.state.tr.replace(x,k,u.doc.slice(p.start-u.from,p.endB-u.from));if(u.sel){let R=wP(e,P.doc,u.sel);R&&!(nn&&e.composing&&R.empty&&(p.start!=p.endB||e.input.lastChromeDelete<Date.now()-100)&&(R.head==x||R.head==P.mapping.map(k)-1)||Vn&&R.empty&&R.head==x)&&P.setSelection(R)}return s&&P.setMeta("composition",s),P.scrollIntoView()},C;if(v)if(m.pos==g.pos){Vn&&No<=11&&m.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>cs(e),20));let E=S(e.state.tr.delete(x,k)),P=c.resolve(p.start).marksAcross(c.resolve(p.endA));P&&E.ensureMarks(P),e.dispatch(E)}else if(p.endA==p.endB&&(C=wce(m.parent.content.cut(m.parentOffset,g.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start())))){let E=S(e.state.tr);C.type=="add"?E.addMark(x,k,C.mark):E.removeMark(x,k,C.mark),e.dispatch(E)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let E=m.parent.textBetween(m.parentOffset,g.parentOffset),P=()=>S(e.state.tr.insertText(E,x,k));e.someProp("handleTextInput",R=>R(e,x,k,E,P))||e.dispatch(P())}else e.dispatch(S());else e.dispatch(S())}function wP(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:FS(e,t.resolve(n.anchor),t.resolve(n.head))}function wce(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,a,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)s=n[c].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<t.childCount;c++)u.push(l(t.child(c)));if(V.from(u).eq(e))return{mark:a,type:o}}function kce(e,t,n,r,i){if(n-t<=i.pos-r.pos||ab(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==t+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(ab(s,!0,!0));return!o.parent.isTextblock||o.pos>n||ab(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function ab(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Cce(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&e.size<t.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<t.size&&kP(t.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<e.size&&kP(e.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function kP(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class xL{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new $ue,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(_P),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=EP(this),SP(this),this.nodeViews=TP(this),this.docView=rP(this.state.doc,CP(this),ob(this),this.dom,this),this.domObserver=new fce(this,(r,i,s,o)=>xce(this,r,i,s,o)),this.domObserver.start(),zue(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&yw(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(_P),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(hL(this),o=!0),this.state=t;let a=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=TP(this);Ece(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&yw(this),this.editable=EP(this),SP(this);let l=ob(this),u=CP(this),c=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(t.doc,u,l);(d||!t.selection.eq(i.selection))&&(o=!0);let f=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&eue(this);if(o){this.domObserver.stop();let h=d&&(Vn||nn)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&Sce(i.selection,t.selection);if(d){let p=nn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=ece(this)),(s||!this.docView.update(t.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=rP(t.doc,u,l,this.dom,this)),p&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Sue(this))?cs(this,h):(tL(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&tue(f)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof de){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Y3(this,n.getBoundingClientRect(),t)}else Y3(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new mL(t.slice,t.move,i<0?void 0:de.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[t];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[t];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Vn){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&nue(this.dom),cs(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return aue(this,t)}coordsAtPos(t,n=1){return Kj(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return fue(this,n||this.state,t)}pasteHTML(t,n){return Nf(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Nf(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return $S(this,t)}destroy(){this.docView&&(Bue(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ob(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Hle())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Uue(this,t)}domSelectionRange(){let t=this.domSelection();return t?mn&&this.root.nodeType===11&&Jle(this.dom.ownerDocument)==this.dom&&pce(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}xL.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function CP(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Ht.node(0,e.state.doc.content.size,t)]}function SP(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Ht.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function EP(e){return!e.someProp("editable",t=>t(e.state)===!1)}function Sce(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function TP(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function Ece(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function _P(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Bo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},bg={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Tce=typeof navigator<"u"&&/Mac/.test(navigator.platform),_ce=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var tn=0;tn<10;tn++)Bo[48+tn]=Bo[96+tn]=String(tn);for(var tn=1;tn<=24;tn++)Bo[tn+111]="F"+tn;for(var tn=65;tn<=90;tn++)Bo[tn]=String.fromCharCode(tn+32),bg[tn]=String.fromCharCode(tn);for(var lb in Bo)bg.hasOwnProperty(lb)||(bg[lb]=Bo[lb]);function Ace(e){var t=Tce&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||_ce&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?bg:Bo)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Pce=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Rce=typeof navigator<"u"&&/Win/.test(navigator.platform);function Nce(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Pce?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function Dce(e){let t=Object.create(null);for(let n in e)t[Nce(n)]=e[n];return t}function ub(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function Mce(e){return new tt({props:{handleKeyDown:WS(e)}})}function WS(e){let t=Dce(e);return function(n,r){let i=Ace(r),s,o=t[ub(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=t[ub(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Rce&&r.ctrlKey&&r.altKey)&&(s=Bo[r.keyCode])&&s!=i){let a=t[ub(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var Oce=Object.defineProperty,qS=(e,t)=>{for(var n in t)Oce(e,n,{get:t[n],enumerable:!0})};function ry(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var iy=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,a])=>[o,(...u)=>{const c=a(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],a=!!e,l=e||i.tr,u=()=>(!a&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(d=>d===!0)),c={...Object.fromEntries(Object.entries(n).map(([d,f])=>[d,(...p)=>{const m=this.buildProps(l,t),g=f(...p)(m);return o.push(g),c}])),run:u};return c}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...u)=>l(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:ry({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...u)=>l(...u)(o)]))}};return o}},wL={};qS(wL,{blur:()=>Ice,clearContent:()=>jce,clearNodes:()=>Lce,command:()=>Fce,createParagraphNear:()=>$ce,cut:()=>zce,deleteCurrentNode:()=>Bce,deleteNode:()=>Vce,deleteRange:()=>Uce,deleteSelection:()=>Hce,enter:()=>Wce,exitCode:()=>qce,extendMarkRange:()=>Kce,first:()=>Gce,focus:()=>Qce,forEach:()=>Yce,insertContent:()=>Xce,insertContentAt:()=>tde,joinBackward:()=>ide,joinDown:()=>rde,joinForward:()=>sde,joinItemBackward:()=>ode,joinItemForward:()=>ade,joinTextblockBackward:()=>lde,joinTextblockForward:()=>ude,joinUp:()=>nde,keyboardShortcut:()=>dde,lift:()=>fde,liftEmptyBlock:()=>hde,liftListItem:()=>pde,newlineInCode:()=>mde,resetAttributes:()=>gde,scrollIntoView:()=>yde,selectAll:()=>bde,selectNodeBackward:()=>vde,selectNodeForward:()=>xde,selectParentNode:()=>wde,selectTextblockEnd:()=>kde,selectTextblockStart:()=>Cde,setContent:()=>Sde,setMark:()=>Ude,setMeta:()=>Hde,setNode:()=>Wde,setNodeSelection:()=>qde,setTextDirection:()=>Kde,setTextSelection:()=>Gde,sinkListItem:()=>Jde,splitBlock:()=>Qde,splitListItem:()=>Yde,toggleList:()=>Xde,toggleMark:()=>Zde,toggleNode:()=>efe,toggleWrap:()=>tfe,undoInputRule:()=>nfe,unsetAllMarks:()=>rfe,unsetMark:()=>ife,unsetTextDirection:()=>sfe,updateAttributes:()=>ofe,wrapIn:()=>afe,wrapInList:()=>lfe});var Ice=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),jce=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),Lce=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:c}=t,d=u.resolve(c.map(l)),f=u.resolve(c.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=Tc(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());t.setNodeMarkup(h.start,m)}(p||p===0)&&t.lift(h,p)})}),!0},Fce=e=>t=>e(t),$ce=()=>({state:e,dispatch:t})=>Rle(e,t),zce=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new he(r.doc.resolve(Math.max(o-1,0)))),!0},Bce=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const a=i.before(s),l=i.after(s);e.delete(a,l).scrollIntoView()}return!0}return!1};function Ot(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var Vce=e=>({tr:t,state:n,dispatch:r})=>{const i=Ot(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),u=s.after(o);t.delete(l,u).scrollIntoView()}return!0}return!1},Uce=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},Hce=()=>({state:e,dispatch:t})=>ble(e,t),Wce=()=>({commands:e})=>e.keyboardShortcut("Enter"),qce=()=>({state:e,dispatch:t})=>Ple(e,t);function KS(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function vg(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:KS(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function kL(e,t,n={}){return e.find(r=>r.type===t&&vg(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function AP(e,t,n={}){return!!kL(e,t,n)}function GS(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!kL([...i.node.marks],t,n)))return;let o=i.index,a=e.start()+i.offset,l=o+1,u=a+i.node.nodeSize;for(;o>0&&AP([...e.parent.child(o-1).marks],t,n);)o-=1,a-=e.parent.child(o).nodeSize;for(;l<e.parent.childCount&&AP([...e.parent.child(l).marks],t,n);)u+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:u}}function Ss(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var Kce=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=Ss(e,r.schema),{doc:o,selection:a}=n,{$from:l,from:u,to:c}=a;if(i){const d=GS(l,s,t);if(d&&d.from<=u&&d.to>=c){const f=he.create(o,d.from,d.to);n.setSelection(f)}}return!0},Gce=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function CL(e){return e instanceof he}function _a(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function SL(e,t=null){if(!t)return null;const n=ye.atStart(e),r=ye.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?he.create(e,_a(0,i,s),_a(e.content.size,i,s)):he.create(e,_a(t,i,s),_a(t,i,s))}function PP(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function xg(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Jce(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Qce=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(xg()||PP())&&r.dom.focus(),Jce()&&!xg()&&!PP()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&e===null||e===!1)return!0}catch{return!1}if(s&&e===null&&!CL(n.state.selection))return o(),!0;const a=SL(i.doc,e)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Yce=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),Xce=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),EL=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&EL(r)}return e};function dp(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return EL(n)}function Mf(e,t,n){if(e instanceof Ro||e instanceof V)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return V.fromArray(e.map(a=>t.nodeFromJSON(a)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),Mf("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new AS({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?us.fromSchema(l).parseSlice(dp(e),n.parseOptions):us.fromSchema(l).parse(dp(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=us.fromSchema(t);return n.slice?s.parseSlice(dp(e),n.parseOptions).content:s.parse(dp(e),n.parseOptions)}return Mf("",t,n)}function Zce(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof Vt||i instanceof qt))return;const s=e.mapping.maps[r];let o=0;s.forEach((a,l,u,c)=>{o===0&&(o=c)}),e.setSelection(ye.near(e.doc.resolve(o),n))}var ede=e=>!("type"in e),tde=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=g=>{s.emit("contentError",{editor:s,error:g,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Mf(t,s.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(g){l(g)}try{a=Mf(t,s.schema,{parseOptions:u,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(g){return l(g),!1}let{from:c,to:d}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},f=!0,h=!0;if((ede(a)?a:[a]).forEach(g=>{g.check(),f=f?g.isText&&g.marks.length===0:!1,h=h?g.isBlock:!1}),c===d&&h){const{parent:g}=r.doc.resolve(c);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(c-=1,d+=1)}let m;if(f){if(Array.isArray(t))m=t.map(g=>g.text||"").join("");else if(t instanceof V){let g="";t.forEach(b=>{b.text&&(g+=b.text)}),m=g}else typeof t=="object"&&t&&t.text?m=t.text:m=t;r.insertText(m,c,d)}else{m=a;const g=r.doc.resolve(c),b=g.node(),v=g.parentOffset===0,x=b.isText||b.isTextblock,k=b.content.size>0;v&&x&&k&&(c=Math.max(0,c-1)),r.replaceWith(c,d,m)}n.updateSelection&&Zce(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:m})}return!0},nde=()=>({state:e,dispatch:t})=>Ele(e,t),rde=()=>({state:e,dispatch:t})=>Tle(e,t),ide=()=>({state:e,dispatch:t})=>vle(e,t),sde=()=>({state:e,dispatch:t})=>Cle(e,t),ode=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Y0(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},ade=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Y0(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},lde=()=>({state:e,dispatch:t})=>xle(e,t),ude=()=>({state:e,dispatch:t})=>wle(e,t);function TL(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function cde(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))xg()||TL()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var dde=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=cde(e).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,a))});return l==null||l.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function Vo(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Ot(t,e.schema):null,a=[];e.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=i-r,u=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>vg(d.node.attrs,n,{strict:!1}));return s?!!u.length:u.reduce((d,f)=>d+f.to-f.from,0)>=l}var fde=(e,t={})=>({state:n,dispatch:r})=>{const i=Ot(e,n.schema);return Vo(n,i,t)?_le(n,r):!1},hde=()=>({state:e,dispatch:t})=>Nle(e,t),pde=e=>({state:t,dispatch:n})=>{const r=Ot(e,t.schema);return zle(r)(t,n)},mde=()=>({state:e,dispatch:t})=>Ale(e,t);function sy(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function RP(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var gde=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=sy(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(s=Ot(e,r.schema)),a==="mark"&&(o=Ss(e,r.schema));let l=!1;return n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(c,d)=>{s&&s===c.type&&(l=!0,i&&n.setNodeMarkup(d,void 0,RP(c.attrs,t))),o&&c.marks.length&&c.marks.forEach(f=>{o===f.type&&(l=!0,i&&n.addMark(d,d+c.nodeSize,o.create(RP(f.attrs,t))))})})}),l},yde=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),bde=()=>({tr:e,dispatch:t})=>{if(t){const n=new Ar(e.doc);e.setSelection(n)}return!0},vde=()=>({state:e,dispatch:t})=>kle(e,t),xde=()=>({state:e,dispatch:t})=>Sle(e,t),wde=()=>({state:e,dispatch:t})=>Dle(e,t),kde=()=>({state:e,dispatch:t})=>Ile(e,t),Cde=()=>({state:e,dispatch:t})=>Ole(e,t);function bw(e,t,n={},r={}){return Mf(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var Sde=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(r.preserveWhitespace!=="full"){const u=bw(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,u).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function _L(e,t){const n=Ss(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function AL(e,t){const n=new DS(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function Ede(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Tde(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function PL(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function oy(e){return t=>PL(t.$from,e)}function ue(e,t,n){return e.config[t]===void 0&&e.parent?ue(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?ue(e.parent,t,n):null}):e.config[t]}function JS(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=ue(t,"addExtensions",n);return r?[t,...JS(r())]:t}).flat(10)}function mh(e,t){const n=vl.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function RL(e){return typeof e=="function"}function ze(e,t=void 0,...n){return RL(e)?t?e.bind(t)(...n):e(...n):e}function _de(e={}){return Object.keys(e).length===0&&e.constructor===Object}function nc(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function NL(e){const t=[],{nodeExtensions:n,markExtensions:r}=nc(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1},o=n.filter(u=>u.name!=="text").map(u=>u.name),a=r.map(u=>u.name),l=[...o,...a];return e.forEach(u=>{const c={name:u.name,options:u.options,storage:u.storage,extensions:i},d=ue(u,"addGlobalAttributes",c);if(!d)return;d().forEach(h=>{let p;Array.isArray(h.types)?p=h.types:h.types==="*"?p=l:h.types==="nodes"?p=o:h.types==="marks"?p=a:p=[],p.forEach(m=>{Object.entries(h.attributes).forEach(([g,b])=>{t.push({type:m,name:g,attribute:{...s,...b}})})})})}),i.forEach(u=>{const c={name:u.name,options:u.options,storage:u.storage},d=ue(u,"addAttributes",c);if(!d)return;const f=d();Object.entries(f).forEach(([h,p])=>{const m={...s,...p};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,t.push({type:u.name,name:h,attribute:m})})}),t}function ut(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],u=a.filter(c=>!l.includes(c));r[i]=[...l,...u].join(" ")}else if(i==="style"){const a=s?s.split(";").map(c=>c.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;l.forEach(c=>{const[d,f]=c.split(":").map(h=>h.trim());u.set(d,f)}),a.forEach(c=>{const[d,f]=c.split(":").map(h=>h.trim());u.set(d,f)}),r[i]=Array.from(u.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[i]=s}),r},{})}function Of(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>ut(n,r),{})}function Ade(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function NP(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):Ade(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function DP(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&_de(n)?!1:n!=null))}function MP(e){var t,n;const r={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(r.default=e.attribute.default),((n=e==null?void 0:e.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=e.attribute.validate),[e.name,r]}function Pde(e,t){var n;const r=NL(e),{nodeExtensions:i,markExtensions:s}=nc(e),o=(n=i.find(u=>ue(u,"topNode")))==null?void 0:n.name,a=Object.fromEntries(i.map(u=>{const c=r.filter(b=>b.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:t},f=e.reduce((b,v)=>{const x=ue(v,"extendNodeSchema",d);return{...b,...x?x(u):{}}},{}),h=DP({...f,content:ze(ue(u,"content",d)),marks:ze(ue(u,"marks",d)),group:ze(ue(u,"group",d)),inline:ze(ue(u,"inline",d)),atom:ze(ue(u,"atom",d)),selectable:ze(ue(u,"selectable",d)),draggable:ze(ue(u,"draggable",d)),code:ze(ue(u,"code",d)),whitespace:ze(ue(u,"whitespace",d)),linebreakReplacement:ze(ue(u,"linebreakReplacement",d)),defining:ze(ue(u,"defining",d)),isolating:ze(ue(u,"isolating",d)),attrs:Object.fromEntries(c.map(MP))}),p=ze(ue(u,"parseHTML",d));p&&(h.parseDOM=p.map(b=>NP(b,c)));const m=ue(u,"renderHTML",d);m&&(h.toDOM=b=>m({node:b,HTMLAttributes:Of(b,c)}));const g=ue(u,"renderText",d);return g&&(h.toText=g),[u.name,h]})),l=Object.fromEntries(s.map(u=>{const c=r.filter(g=>g.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:t},f=e.reduce((g,b)=>{const v=ue(b,"extendMarkSchema",d);return{...g,...v?v(u):{}}},{}),h=DP({...f,inclusive:ze(ue(u,"inclusive",d)),excludes:ze(ue(u,"excludes",d)),group:ze(ue(u,"group",d)),spanning:ze(ue(u,"spanning",d)),code:ze(ue(u,"code",d)),attrs:Object.fromEntries(c.map(MP))}),p=ze(ue(u,"parseHTML",d));p&&(h.parseDOM=p.map(g=>NP(g,c)));const m=ue(u,"renderHTML",d);return m&&(h.toDOM=g=>m({mark:g,HTMLAttributes:Of(g,c)})),[u.name,h]}));return new AS({topNode:o,nodes:a,marks:l})}function Rde(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function Od(e){return e.sort((n,r)=>{const i=ue(n,"priority")||100,s=ue(r,"priority")||100;return i>s?-1:i<s?1:0})}function DL(e){const t=Od(JS(e)),n=Rde(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function ML(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return e.nodesBetween(r,i,(l,u,c,d)=>{var f;l.isBlock&&u>r&&(a+=s);const h=o==null?void 0:o[l.type.name];if(h)return c&&(a+=h({node:l,pos:u,parent:c,index:d,range:t})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(r,u)-u,i-u))}),a}function Nde(e,t){const n={from:0,to:e.content.size};return ML(e,n,t)}function OL(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function Dde(e,t){const n=Ot(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function IL(e,t){const n=sy(typeof t=="string"?t:t.name,e.schema);return n==="node"?Dde(e,t):n==="mark"?_L(e,t):{}}function Mde(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function Ode(e){const t=Mde(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function jL(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const u=t.slice(s).map(a,-1),c=t.slice(s).map(l),d=t.invert().map(u,-1),f=t.invert().map(c);r.push({oldRange:{from:d,to:f},newRange:{from:u,to:c}})})}),Ode(r)}function QS(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=GS(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var Ide=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===t?o=a:s-=1}return[o,s]};function Hc(e,t){return t.nodes[e]||t.marks[e]||null}function rm(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var jde=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,a)=>{var l,u;const c=((u=(l=i.type.spec).toText)==null?void 0:u.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-s))}),n};function vw(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?Ss(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>vg(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;e.doc.nodesBetween(h,p,(m,g)=>{if(s&&m.inlineContent&&!m.type.allowsMarkType(s))return!1;if(!m.isText&&!m.marks.length)return;const b=Math.max(h,g),v=Math.min(p,g+m.nodeSize),x=v-b;o+=x,a.push(...m.marks.map(k=>({mark:k,from:b,to:v})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>vg(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),u=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+u:l)>=o}function Lde(e,t,n={}){if(!t)return Vo(e,null,n)||vw(e,null,n);const r=sy(t,e.schema);return r==="node"?Vo(e,t,n):r==="mark"?vw(e,t,n):!1}var Fde=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=oy(a=>a.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},$de=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function OP(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function IP(e,t){const{nodeExtensions:n}=nc(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ze(ue(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function ay(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(ay(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function LL(e){return e instanceof de}var FL=class $L{constructor(t){this.position=t}static fromJSON(t){return new $L(t.position)}toJSON(){return{position:this.position}}};function zde(e,t){const n=t.mapping.mapResult(e.position);return{position:new FL(n.pos),mapResult:n}}function Bde(e){return new FL(e)}function Vde(e,t,n){var r;const{selection:i}=t;let s=null;if(CL(i)&&(s=i.$cursor),s){const a=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(u=>u.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let u=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(c,d,f)=>{if(u)return!1;if(c.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(n));u=h&&p}return!u}),u})}var Ude=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=Ss(e,r.schema);if(i)if(o){const u=_L(r,l);n.addStoredMark(l.create({...u,...t}))}else a.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(c,d,(f,h)=>{const p=Math.max(h,c),m=Math.min(h+f.nodeSize,d);f.marks.find(b=>b.type===l)?f.marks.forEach(b=>{l===b.type&&n.addMark(p,m,l.create({...b.attrs,...t}))}):n.addMark(p,m,l.create(t))})});return Vde(r,n,l)},Hde=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),Wde=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Ot(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>G3(s,{...o,...t})(n)?!0:a.clearNodes()).command(({state:a})=>G3(s,{...o,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},qde=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=_a(e,0,r.content.size),s=de.create(r,i);t.setSelection(s)}return!0},Kde=(e,t)=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=r;let o,a;return typeof t=="number"?(o=t,a=t):t&&"from"in t&&"to"in t?(o=t.from,a=t.to):(o=s.from,a=s.to),i&&n.doc.nodesBetween(o,a,(l,u)=>{l.isText||n.setNodeMarkup(u,void 0,{...l.attrs,dir:e})}),!0},Gde=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=he.atStart(r).from,a=he.atEnd(r).to,l=_a(i,o,a),u=_a(s,o,a),c=he.create(r,l,u);t.setSelection(c)}return!0},Jde=e=>({state:t,dispatch:n})=>{const r=Ot(e,t.schema);return Ule(r)(t,n)};function jP(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(r)}}var Qde=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:a,$to:l}=s,u=i.extensionManager.attributes,c=rm(u,a.node().type.name,a.node().attrs);if(s instanceof de&&s.node.isBlock)return!a.parentOffset||!ku(o,a.pos)?!1:(r&&(e&&jP(n,i.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:Ede(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:c}]:void 0,p=ku(t.doc,t.mapping.map(a.pos),1,h);if(!h&&!p&&ku(t.doc,t.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:c}]:void 0),r){if(p&&(s instanceof he&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=t.mapping.map(a.before()),g=t.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&t.setNodeMarkup(t.mapping.map(a.before()),f)}e&&jP(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return p},Yde=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=Ot(e,r.schema),{$from:l,$to:u}=r.selection,c=r.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(u))return!1;const d=l.node(-1);if(d.type!==a)return!1;const f=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let b=V.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let P=l.depth-v;P>=l.depth-3;P-=1)b=V.from(l.node(P).copy(b));const x=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k={...rm(f,l.node().type.name,l.node().attrs),...t},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(k))||void 0;b=b.append(V.from(a.createAndFill(null,S)||void 0));const C=l.before(l.depth-(v-1));n.replace(C,l.after(-x),new te(b,4-v,0));let E=-1;n.doc.nodesBetween(C,n.doc.content.size,(P,R)=>{if(E>-1)return!1;P.isTextblock&&P.content.size===0&&(E=R+1)}),E>-1&&n.setSelection(he.near(n.doc.resolve(E))),n.scrollIntoView()}return!0}const h=u.pos===l.end()?d.contentMatchAt(0).defaultType:null,p={...rm(f,d.type.name,d.attrs),...t},m={...rm(f,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,u.pos);const g=h?[{type:a,attrs:p},{type:h,attrs:m}]:[{type:a,attrs:p}];if(!ku(n.doc,l.pos,2))return!1;if(i){const{selection:b,storedMarks:v}=r,{splittableMarks:x}=s.extensionManager,k=v||b.$to.parentOffset&&b.$from.marks();if(n.split(l.pos,2,g).scrollIntoView(),!k||!i)return!0;const S=k.filter(C=>x.includes(C.type.name));n.ensureMarks(S)}return!0},cb=(e,t)=>{const n=oy(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Xo(e.doc,n.pos)&&e.join(n.pos),!0},db=(e,t)=>{const n=oy(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Xo(e.doc,r)&&e.join(r),!0},Xde=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:u,can:c})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=Ot(e,o.schema),p=Ot(t,o.schema),{selection:m,storedMarks:g}=o,{$from:b,$to:v}=m,x=b.blockRange(v),k=g||m.$to.parentOffset&&m.$from.marks();if(!x)return!1;const S=oy(C=>IP(C.type.name,d))(m);if(x.depth>=1&&S&&x.depth-S.depth<=1){if(S.node.type===h)return u.liftListItem(p);if(IP(S.node.type.name,d)&&h.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,h),!0)).command(()=>cb(s,h)).command(()=>db(s,h)).run()}return!n||!k||!a?l().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>cb(s,h)).command(()=>db(s,h)).run():l().command(()=>{const C=c().wrapInList(h,r),E=k.filter(P=>f.includes(P.type.name));return s.ensureMarks(E),C?!0:u.clearNodes()}).wrapInList(h,r).command(()=>cb(s,h)).command(()=>db(s,h)).run()},Zde=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Ss(e,r.schema);return vw(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},efe=(e,t,n={})=>({state:r,commands:i})=>{const s=Ot(e,r.schema),o=Ot(t,r.schema),a=Vo(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},tfe=(e,t={})=>({state:n,commands:r})=>{const i=Ot(e,n.schema);return Vo(n,i,t)?r.lift(i):r.wrapIn(i,t)},nfe=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},rfe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},ife=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=n,l=Ss(e,r.schema),{$from:u,empty:c,ranges:d}=a;if(!i)return!0;if(c&&o){let{from:f,to:h}=a;const p=(s=u.marks().find(g=>g.type===l))==null?void 0:s.attrs,m=GS(u,l,p);m&&(f=m.from,h=m.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},sfe=e=>({tr:t,state:n,dispatch:r})=>{const{selection:i}=n;let s,o;return typeof e=="number"?(s=e,o=e):e&&"from"in e&&"to"in e?(s=e.from,o=e.to):(s=i.from,o=i.to),r&&t.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const u={...a.attrs};delete u.dir,t.setNodeMarkup(l,void 0,u)}),!0},ofe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=sy(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(s=Ot(e,r.schema)),a==="mark"&&(o=Ss(e,r.schema));let l=!1;return n.selection.ranges.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;let f,h,p,m;n.selection.empty?r.doc.nodesBetween(c,d,(g,b)=>{s&&s===g.type&&(l=!0,p=Math.max(b,c),m=Math.min(b+g.nodeSize,d),f=b,h=g)}):r.doc.nodesBetween(c,d,(g,b)=>{b<c&&s&&s===g.type&&(l=!0,p=Math.max(b,c),m=Math.min(b+g.nodeSize,d),f=b,h=g),b>=c&&b<=d&&(s&&s===g.type&&(l=!0,i&&n.setNodeMarkup(b,void 0,{...g.attrs,...t})),o&&g.marks.length&&g.marks.forEach(v=>{if(o===v.type&&(l=!0,i)){const x=Math.max(b,c),k=Math.min(b+g.nodeSize,d);n.addMark(x,k,o.create({...v.attrs,...t}))}}))}),h&&(f!==void 0&&i&&n.setNodeMarkup(f,void 0,{...h.attrs,...t}),o&&h.marks.length&&h.marks.forEach(g=>{o===g.type&&i&&n.addMark(p,m,o.create({...g.attrs,...t}))}))}),l},afe=(e,t={})=>({state:n,dispatch:r})=>{const i=Ot(e,n.schema);return jle(i,t)(n,r)},lfe=(e,t={})=>({state:n,dispatch:r})=>{const i=Ot(e,n.schema);return Lle(i,t)(n,r)},ufe=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},ly=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},cfe=(e,t)=>{if(KS(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function fp(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||(t=u.nodeBefore||u.nodeAfter)!=null&&t.marks.find(f=>f.type.spec.code))return!1;let c=!1;const d=jde(u)+s;return o.forEach(f=>{if(c)return;const h=cfe(d,f.find);if(!h)return;const p=l.state.tr,m=ry({state:l.state,transaction:p}),g={from:r-(h[0].length-s.length),to:i},{commands:b,chain:v,can:x}=new iy({editor:n,state:m});f.handler({state:m,range:g,match:h,commands:b,chain:v,can:x})===null||!p.steps.length||(f.undoable&&p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),c=!0)}),c}function dfe(e){const{editor:t,rules:n}=e,r=new tt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=mh(V.from(c),o.schema);const{from:d}=l,f=d+c.length;fp({editor:t,from:d,to:f,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return fp({editor:t,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&fp({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?fp({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function ffe(e){return Object.prototype.toString.call(e).slice(8,-1)}function hp(e){return ffe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function zL(e,t){const n={...e};return hp(e)&&hp(t)&&Object.keys(t).forEach(r=>{hp(t[r])&&hp(e[r])?n[r]=zL(e[r],t[r]):n[r]=t[r]}),n}var YS=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...ze(ue(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ze(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>zL(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},cr=class BL extends YS{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new BL(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const l=o.find(u=>(u==null?void 0:u.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function hfe(e){return typeof e=="number"}var pfe=class{constructor(e){this.find=e.find,this.handler=e.handler}},mfe=(e,t,n)=>{if(KS(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function gfe(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=e,{commands:l,chain:u,can:c}=new iy({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,p)=>{var m,g,b,v,x;if((g=(m=h.type)==null?void 0:m.spec)!=null&&g.code||!(h.isText||h.isTextblock||h.isInline))return;const k=(x=(v=(b=h.content)==null?void 0:b.size)!=null?v:h.nodeSize)!=null?x:0,S=Math.max(r,p),C=Math.min(i,p+k);if(S>=C)return;const E=h.isText?h.text||"":h.textBetween(S-p,C-p,void 0,"");mfe(E,s.find,o).forEach(R=>{if(R.index===void 0)return;const A=S+R.index+1,L=A+R[0].length,I={from:n.tr.mapping.map(A),to:n.tr.mapping.map(L)},U=s.handler({state:n,range:I,match:R,commands:l,chain:u,can:c,pasteEvent:o,dropEvent:a});d.push(U)})}),d.every(h=>h!==null)}var pp=null,yfe=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function bfe(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:c,from:d,to:f,rule:h,pasteEvt:p})=>{const m=c.tr,g=ry({state:c,transaction:m});if(!(!gfe({editor:t,state:g,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:a})||!m.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(c=>new tt({view(d){const f=p=>{var m;r=(m=d.dom.parentElement)!=null&&m.contains(p.target)?d.dom.parentElement:null,r&&(pp=t)},h=()=>{pp&&(pp=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(s=r===d.dom.parentElement,a=f,!s){const h=pp;h!=null&&h.isEditable&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,f)=>{var h;const p=(h=f.clipboardData)==null?void 0:h.getData("text/html");return o=f,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const p=d[0],m=p.getMeta("uiEvent")==="paste"&&!i,g=p.getMeta("uiEvent")==="drop"&&!s,b=p.getMeta("applyPasteRules"),v=!!b;if(!m&&!g&&!v)return;if(v){let{text:S}=b;typeof S=="string"?S=S:S=mh(V.from(S),h.schema);const{from:C}=b,E=C+S.length,P=yfe(S);return l({rule:c,state:h,from:C,to:{b:E},pasteEvt:P})}const x=f.doc.content.findDiffStart(h.doc.content),k=f.doc.content.findDiffEnd(h.doc.content);if(!(!hfe(x)||!k||x===k.b))return l({rule:c,state:h,from:x,to:k,pasteEvt:o})}}))}var uy=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=DL(e),this.schema=Pde(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Hc(t.name,this.schema)},r=ue(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return Od([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:Hc(r.name,this.schema)},s=[],o=ue(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&ue(r,"exitable",i)&&(a.ArrowRight=()=>cr.handleExit({editor:e,mark:r})),o){const f=Object.fromEntries(Object.entries(o()).map(([h,p])=>[h,()=>p({editor:e})]));a={...a,...f}}const l=Mce(a);s.push(l);const u=ue(r,"addInputRules",i);if(OP(r,e.options.enableInputRules)&&u){const f=u();if(f&&f.length){const h=dfe({editor:e,rules:f}),p=Array.isArray(h)?h:[h];s.push(...p)}}const c=ue(r,"addPasteRules",i);if(OP(r,e.options.enablePasteRules)&&c){const f=c();if(f&&f.length){const h=bfe({editor:e,rules:f});s.push(...h)}}const d=ue(r,"addProseMirrorPlugins",i);if(d){const f=d();s.push(...f)}return s})}get attributes(){return NL(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=nc(this.extensions);return Object.fromEntries(t.filter(n=>!!ue(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Ot(n.name,this.schema)},s=ue(n,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,u,c,d,f)=>{const h=Of(l,r);return o({node:l,view:u,getPos:c,decorations:d,innerDecorations:f,editor:e,extension:n,HTMLAttributes:h})};return[n.name,a]}))}dispatchTransaction(e){const{editor:t}=this;return Od([...this.extensions].reverse()).reduceRight((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:Hc(i.name,this.schema)},o=ue(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:r})}:r},e)}transformPastedHTML(e){const{editor:t}=this;return Od([...this.extensions]).reduce((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:Hc(i.name,this.schema)},o=ue(i,"transformPastedHTML",s);return o?(a,l)=>{const u=r(a,l);return o.call(s,u)}:r},e||(r=>r))}get markViews(){const{editor:e}=this,{markExtensions:t}=nc(this.extensions);return Object.fromEntries(t.filter(n=>!!ue(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Ss(n.name,this.schema)},s=ue(n,"addMarkView",i);if(!s)return[];const o=(a,l,u)=>{const c=Of(a,r);return s()({mark:a,view:l,inline:u,editor:e,extension:n,HTMLAttributes:c,updateAttributes:d=>{Nfe(a,e,d)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Hc(t.name,this.schema)};t.type==="mark"&&((n=ze(ue(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=ue(t,"onBeforeCreate",r),s=ue(t,"onCreate",r),o=ue(t,"onUpdate",r),a=ue(t,"onSelectionUpdate",r),l=ue(t,"onTransaction",r),u=ue(t,"onFocus",r),c=ue(t,"onBlur",r),d=ue(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}};uy.resolve=DL;uy.sort=Od;uy.flatten=JS;var VL={};qS(VL,{ClipboardTextSerializer:()=>HL,Commands:()=>WL,Delete:()=>qL,Drop:()=>KL,Editable:()=>GL,FocusEvents:()=>QL,Keymap:()=>YL,Paste:()=>XL,Tabindex:()=>ZL,TextDirection:()=>e8,focusEventsPluginKey:()=>JL});var ot=class UL extends YS{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new UL(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},HL=ot.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new tt({key:new mt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(c=>c.$from.pos)),a=Math.max(...s.map(c=>c.$to.pos)),l=OL(n);return ML(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),WL=ot.create({name:"commands",addCommands(){return{...wL}}}),qL=ot.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,a,l,u;if((u=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,e))!=null?u:e.getMeta("y-sync$"))return;const c=AL(e.before,[e,...t]);jL(c).forEach(h=>{c.mapping.mapResult(h.oldRange.from).deletedAfter&&c.mapping.mapResult(h.oldRange.to).deletedBefore&&c.before.nodesBetween(h.oldRange.from,h.oldRange.to,(p,m)=>{const g=m+p.nodeSize-2,b=h.oldRange.from<=m&&g<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:p,from:m,to:g,newFrom:c.mapping.map(m),newTo:c.mapping.map(g),deletedRange:h.oldRange,newRange:h.newRange,partial:!b,editor:this.editor,transaction:e,combinedTransform:c})})});const f=c.mapping;c.steps.forEach((h,p)=>{var m,g;if(h instanceof Xr){const b=f.slice(p).map(h.from,-1),v=f.slice(p).map(h.to),x=f.invert().map(b,-1),k=f.invert().map(v),S=(m=c.doc.nodeAt(b-1))==null?void 0:m.marks.some(E=>E.eq(h.mark)),C=(g=c.doc.nodeAt(v))==null?void 0:g.marks.some(E=>E.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:x,to:k},newRange:{from:b,to:v},partial:!!(C||S),editor:this.editor,transaction:e,combinedTransform:c})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),KL=ot.create({name:"drop",addProseMirrorPlugins(){return[new tt({key:new mt("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),GL=ot.create({name:"editable",addProseMirrorPlugins(){return[new tt({key:new mt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),JL=new mt("focusEvents"),QL=ot.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new tt({key:JL,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),YL=ot.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:c,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,b=m&&p.parent.childCount===1?g===d.pos:ye.atStart(u).from===f;return!c||!h.type.isTextblock||h.textContent.length||!b||b&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return xg()||TL()?s:i},addProseMirrorPlugins(){return[new tt({key:new mt("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(m=>m.getMeta("composition")))return;const r=e.some(m=>m.docChanged)&&!t.doc.eq(n.doc),i=e.some(m=>m.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=t.selection,l=ye.atStart(t.doc).from,u=ye.atEnd(t.doc).to;if(s||!(o===l&&a===u)||!ay(n.doc))return;const f=n.tr,h=ry({state:n,transaction:f}),{commands:p}=new iy({editor:this.editor,state:h});if(p.clearNodes(),!!f.steps.length)return f}})]}}),XL=ot.create({name:"paste",addProseMirrorPlugins(){return[new tt({key:new mt("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),ZL=ot.create({name:"tabindex",addProseMirrorPlugins(){return[new tt({key:new mt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),e8=ot.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=nc(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const n=t.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new tt({key:new mt("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),vfe=class ud{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new ud(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new ud(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new ud(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=n.isInline,a=this.pos+r+(s?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(a);if(!i&&!o&&l.depth<=this.depth)return;const u=new ud(l,this.editor,i,i||o?n:null);i&&(u.actualDepth=this.depth+1),t.push(u)}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},xfe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function wfe(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var kfe=class extends ufe{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:zde,createMappablePosition:Bde},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=SL(t,this.options.autofocus);this.editorState=cu.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=wfe(xfe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=RL(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[GL,HL.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),WL,QL,YL,ZL,KL,XL,qL,e8.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new uy(r,this)}createCommandManager(){this.commandManager=new iy({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=bw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=bw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){const{editorProps:t,enableExtensionDispatchTransaction:n}=this.options,r=t.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r,s=t.transformPastedHTML,o=this.extensionManager.transformPastedHTML(s);this.editorView=new xL(e,{...t,attributes:{role:"textbox",...t==null?void 0:t.attributes},dispatchTransaction:i,transformPastedHTML:o,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const a=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(a),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(u=>{var c;return(c=this.capturedTransaction)==null?void 0:c.step(u)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(u=>u.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return IL(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return Lde(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return mh(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return Nde(this.state.doc,{blockSeparator:t,textSerializers:{...OL(this.schema),...n}})}get isEmpty(){return ay(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new vfe(t,this)}get $doc(){return this.$pos(0)}};function rc(e){return new ly({find:e.find,handler:({state:t,range:n,match:r})=>{const i=ze(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),u=n.from+a.indexOf(o),c=u+o.length;if(QS(n.from,n.to,t.doc).filter(h=>h.mark.type.excluded.find(m=>m===e.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;c<n.to&&s.delete(c,n.to),u>n.from&&s.delete(n.from+l,u);const f=n.from+l+o.length;s.addMark(n.from+l,f,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function Cfe(e){return new ly({find:e.find,handler:({state:t,range:n,match:r})=>{const i=ze(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let a=n.to;const l=e.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=o+u;c>a?c=a:a=c+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(c,a,l)}else if(r[0]){const u=e.type.isInline?o:o-1;s.insert(u,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:e.undoable})}function xw(e){return new ly({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=ze(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function ic(e){return new ly({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=ze(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),u=l&&NS(l,e.type,s);if(!u)return null;if(o.wrap(l,u),e.keepMarks&&e.editor){const{selection:d,storedMarks:f}=t,{splittableMarks:h}=e.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const m=p.filter(g=>h.includes(g.type.name));o.ensureMarks(m)}}if(e.keepAttributes){const d=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&Xo(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&o.join(n.from-1)},undoable:e.undoable})}function Sfe(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof de){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}var Efe={};qS(Efe,{createAtomBlockMarkdownSpec:()=>Tfe,createBlockMarkdownSpec:()=>_fe,createInlineMarkdownSpec:()=>Rfe,parseAttributes:()=>XS,parseIndentedBlocks:()=>ww,renderNestedMarkdownContent:()=>e2,serializeAttributes:()=>ZS});function XS(e){if(!(e!=null&&e.trim()))return{};const t={},n=[],r=e.replace(/["']([^"']*)["']/g,u=>(n.push(u),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(c=>c.trim().slice(1));t.class=u.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(t.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,u,c])=>{var d;const f=parseInt(((d=c.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),h=n[f];h&&(t[u]=h.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(c=>{c.match(/^[a-zA-Z][\w-]*$/)&&(t[c]=!0)}),t}function ZS(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?t.push(n):r!==!1&&r!=null&&t.push(`${n}="${String(r)}"`))}),t.join(" ")}function Tfe(e){const{nodeName:t,name:n,parseAttributes:r=XS,serializeAttributes:i=ZS,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=e,l=n||t,u=c=>{if(!a)return c;const d={};return a.forEach(f=>{f in c&&(d[f]=c[f])}),d};return{parseMarkdown:(c,d)=>{const f={...s,...c.attributes};return d.createNode(t,f,[])},markdownTokenizer:{name:t,level:"block",start(c){var d;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),h=(d=c.match(f))==null?void 0:d.index;return h!==void 0?h:-1},tokenize(c,d,f){const h=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),p=c.match(h);if(!p)return;const m=p[1]||"",g=r(m);if(!o.find(v=>!(v in g)))return{type:t,raw:p[0],attributes:g}}},renderMarkdown:c=>{const d=u(c.attrs||{}),f=i(d),h=f?` {${f}}`:"";return`:::${l}${h} :::`}}}function _fe(e){const{nodeName:t,name:n,getContent:r,parseAttributes:i=XS,serializeAttributes:s=ZS,defaultAttributes:o={},content:a="block",allowedAttributes:l}=e,u=n||t,c=d=>{if(!l)return d;const f={};return l.forEach(h=>{h in d&&(f[h]=d[h])}),f};return{parseMarkdown:(d,f)=>{let h;if(r){const m=r(d);h=typeof m=="string"?[{type:"text",text:m}]:m}else a==="block"?h=f.parseChildren(d.tokens||[]):h=f.parseInline(d.tokens||[]);const p={...o,...d.attributes};return f.createNode(t,p,h)},markdownTokenizer:{name:t,level:"block",start(d){var f;const h=new RegExp(`^:::${u}`,"m"),p=(f=d.match(h))==null?void 0:f.index;return p!==void 0?p:-1},tokenize(d,f,h){var p;const m=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),g=d.match(m);if(!g)return;const[b,v=""]=g,x=i(v);let k=1;const S=b.length;let C="";const E=/^:::([\w-]*)(\s.*)?/gm,P=d.slice(S);for(E.lastIndex=0;;){const R=E.exec(P);if(R===null)break;const A=R.index,L=R[1];if(!((p=R[2])!=null&&p.endsWith(":::"))){if(L)k+=1;else if(k-=1,k===0){const I=P.slice(0,A);C=I.trim();const U=d.slice(0,S+A+R[0].length);let F=[];if(C)if(a==="block")for(F=h.blockTokens(I),F.forEach(B=>{B.text&&(!B.tokens||B.tokens.length===0)&&(B.tokens=h.inlineTokens(B.text))});F.length>0;){const B=F[F.length-1];if(B.type==="paragraph"&&(!B.text||B.text.trim()===""))F.pop();else break}else F=h.inlineTokens(C);return{type:t,raw:U,attributes:x,content:C,tokens:F}}}}}},renderMarkdown:(d,f)=>{const h=c(d.attrs||{}),p=s(h),m=p?` {${p}}`:"",g=f.renderChildren(d.content||[],`

`);return`:::${u}${m}

${g}

:::`}}}function Afe(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(e);for(;r!==null;){const[,i,s,o]=r;t[i]=s||o,r=n.exec(e)}return t}function Pfe(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function Rfe(e){const{nodeName:t,name:n,getContent:r,parseAttributes:i=Afe,serializeAttributes:s=Pfe,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=e,u=n||t,c=f=>{if(!l)return f;const h={};return l.forEach(p=>{const m=typeof p=="string"?p:p.name,g=typeof p=="string"?void 0:p.skipIfDefault;if(m in f){const b=f[m];if(g!==void 0&&b===g)return;h[m]=b}}),h},d=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,h)=>{const p={...o,...f.attributes};if(a)return h.createNode(t,p);const m=r?r(f):f.content||"";return m?h.createNode(t,p,[h.createTextNode(m)]):h.createNode(t,p,[])},markdownTokenizer:{name:t,level:"inline",start(f){const h=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),p=f.match(h),m=p==null?void 0:p.index;return m!==void 0?m:-1},tokenize(f,h,p){const m=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),g=f.match(m);if(!g)return;let b="",v="";if(a){const[,k]=g;v=k}else{const[,k,S]=g;v=k,b=S||""}const x=i(v.trim());return{type:t,raw:g[0],content:b.trim(),attributes:x}}},renderMarkdown:f=>{let h="";r?h=r(f):f.content&&f.content.length>0&&(h=f.content.filter(b=>b.type==="text").map(b=>b.text).join(""));const p=c(f.attrs||{}),m=s(p),g=m?` ${m}`:"";return a?`[${u}${g}]`:`[${u}${g}]${h}[/${u}]`}}}function ww(e,t,n){var r,i,s,o;const a=e.split(`
`),l=[];let u="",c=0;const d=t.baseIndentSize||2;for(;c<a.length;){const f=a[c],h=f.match(t.itemPattern);if(!h){if(l.length>0)break;if(f.trim()===""){c+=1,u=`${u}${f}
`;continue}else return}const p=t.extractItemData(h),{indentLevel:m,mainContent:g}=p;u=`${u}${f}
`;const b=[g];for(c+=1;c<a.length;){const S=a[c];if(S.trim()===""){const E=a.slice(c+1).findIndex(A=>A.trim()!=="");if(E===-1)break;if((((i=(r=a[c+1+E].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>m){b.push(S),u=`${u}${S}
`,c+=1;continue}else break}if((((o=(s=S.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>m)b.push(S),u=`${u}${S}
`,c+=1;else break}let v;const x=b.slice(1);if(x.length>0){const S=x.map(C=>C.slice(m+d)).join(`
`);S.trim()&&(t.customNestedParser?v=t.customNestedParser(S):v=n.blockTokens(S))}const k=t.createToken(p,v);l.push(k)}if(l.length!==0)return{items:l,raw:u}}function e2(e,t,n,r){if(!e||!Array.isArray(e.content))return"";const i=typeof n=="function"?n(r):n,[s,...o]=e.content,a=t.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(u=>{const c=t.renderChildren([u]);if(c){const d=c.split(`
`).map(f=>f?t.indent(f):"").join(`
`);l.push(d)}}),l.join(`
`)}function Nfe(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((a,l)=>{const u=s.mapping.map(l),c=s.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(h=>{if(h!==o)return!1;d=h}),!d)return;let f=!1;if(Object.keys(n).forEach(h=>{n[h]!==d.attrs[h]&&(f=!0)}),f){const h=e.type.create({...e.attrs,...n});s.removeMark(u,c,e.type),s.addMark(u,c,h)}}),s.docChanged&&t.view.dispatch(s)}var $e=class t8 extends YS{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new t8(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function ll(e){return new pfe({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=ze(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,a=r[r.length-1],l=r[0];let u=n.to;if(a){const c=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(QS(n.from,n.to,t.doc).filter(p=>p.mark.type.excluded.find(g=>g===e.type&&g!==p.mark.type)).filter(p=>p.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+c,d),u=n.from+c+a.length,o.addMark(n.from+c,u,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}const{getOwnPropertyNames:Dfe,getOwnPropertySymbols:Mfe}=Object,{hasOwnProperty:Ofe}=Object.prototype;function fb(e,t){return function(r,i,s){return e(r,i,s)&&t(r,i,s)}}function mp(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);const{cache:s}=i,o=s.get(n),a=s.get(r);if(o&&a)return o===r&&a===n;s.set(n,r),s.set(r,n);const l=e(n,r,i);return s.delete(n),s.delete(r),l}}function Ife(e){return e!=null?e[Symbol.toStringTag]:void 0}function LP(e){return Dfe(e).concat(Mfe(e))}const jfe=Object.hasOwn||((e,t)=>Ofe.call(e,t));function xl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Lfe="__v",Ffe="__o",$fe="_owner",{getOwnPropertyDescriptor:FP,keys:$P}=Object;function zfe(e,t){return e.byteLength===t.byteLength&&wg(new Uint8Array(e),new Uint8Array(t))}function Bfe(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Vfe(e,t){return e.byteLength===t.byteLength&&wg(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Ufe(e,t){return xl(e.getTime(),t.getTime())}function Hfe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Wfe(e,t){return e===t}function zP(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const u=t.entries();let c=!1,d=0;for(;(a=u.next())&&!a.done;){if(i[d]){d++;continue}const f=o.value,h=a.value;if(n.equals(f[0],h[0],l,d,e,t,n)&&n.equals(f[1],h[1],f[0],h[0],e,t,n)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}const qfe=xl;function Kfe(e,t,n){const r=$P(e);let i=r.length;if($P(t).length!==i)return!1;for(;i-- >0;)if(!n8(e,t,n,r[i]))return!1;return!0}function Wc(e,t,n){const r=LP(e);let i=r.length;if(LP(t).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=r[i],!n8(e,t,n,s)||(o=FP(e,s),a=FP(t,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function Gfe(e,t){return xl(e.valueOf(),t.valueOf())}function Jfe(e,t){return e.source===t.source&&e.flags===t.flags}function BP(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.values();let o,a;for(;(o=s.next())&&!o.done;){const l=t.values();let u=!1,c=0;for(;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(o.value,a.value,o.value,a.value,e,t,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function wg(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Qfe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function n8(e,t,n,r){return(r===$fe||r===Ffe||r===Lfe)&&(e.$$typeof||t.$$typeof)?!0:jfe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const Yfe="[object ArrayBuffer]",Xfe="[object Arguments]",Zfe="[object Boolean]",ehe="[object DataView]",the="[object Date]",nhe="[object Error]",rhe="[object Map]",ihe="[object Number]",she="[object Object]",ohe="[object RegExp]",ahe="[object Set]",lhe="[object String]",uhe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},che="[object URL]",dhe=Object.prototype.toString;function fhe({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:c,areSetsEqual:d,areTypedArraysEqual:f,areUrlsEqual:h,unknownTagComparators:p}){return function(g,b,v){if(g===b)return!0;if(g==null||b==null)return!1;const x=typeof g;if(x!==typeof b)return!1;if(x!=="object")return x==="number"?a(g,b,v):x==="function"?s(g,b,v):!1;const k=g.constructor;if(k!==b.constructor)return!1;if(k===Object)return l(g,b,v);if(Array.isArray(g))return t(g,b,v);if(k===Date)return r(g,b,v);if(k===RegExp)return c(g,b,v);if(k===Map)return o(g,b,v);if(k===Set)return d(g,b,v);const S=dhe.call(g);if(S===the)return r(g,b,v);if(S===ohe)return c(g,b,v);if(S===rhe)return o(g,b,v);if(S===ahe)return d(g,b,v);if(S===she)return typeof g.then!="function"&&typeof b.then!="function"&&l(g,b,v);if(S===che)return h(g,b,v);if(S===nhe)return i(g,b,v);if(S===Xfe)return l(g,b,v);if(uhe[S])return f(g,b,v);if(S===Yfe)return e(g,b,v);if(S===ehe)return n(g,b,v);if(S===Zfe||S===ihe||S===lhe)return u(g,b,v);if(p){let C=p[S];if(!C){const E=Ife(g);E&&(C=p[E])}if(C)return C(g,b,v)}return!1}}function hhe({circular:e,createCustomConfig:t,strict:n}){let r={areArrayBuffersEqual:zfe,areArraysEqual:n?Wc:Bfe,areDataViewsEqual:Vfe,areDatesEqual:Ufe,areErrorsEqual:Hfe,areFunctionsEqual:Wfe,areMapsEqual:n?fb(zP,Wc):zP,areNumbersEqual:qfe,areObjectsEqual:n?Wc:Kfe,arePrimitiveWrappersEqual:Gfe,areRegExpsEqual:Jfe,areSetsEqual:n?fb(BP,Wc):BP,areTypedArraysEqual:n?fb(wg,Wc):wg,areUrlsEqual:Qfe,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){const i=mp(r.areArraysEqual),s=mp(r.areMapsEqual),o=mp(r.areObjectsEqual),a=mp(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return r}function phe(e){return function(t,n,r,i,s,o,a){return e(t,n,a)}}function mhe({circular:e,comparator:t,createState:n,equals:r,strict:i}){if(n)return function(a,l){const{cache:u=e?new WeakMap:void 0,meta:c}=n();return t(a,l,{cache:u,equals:r,meta:c,strict:i})};if(e)return function(a,l){return t(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,l){return t(a,l,s)}}const ghe=ea();ea({strict:!0});ea({circular:!0});ea({circular:!0,strict:!0});ea({createInternalComparator:()=>xl});ea({strict:!0,createInternalComparator:()=>xl});ea({circular:!0,createInternalComparator:()=>xl});ea({circular:!0,createInternalComparator:()=>xl,strict:!0});function ea(e={}){const{circular:t=!1,createInternalComparator:n,createState:r,strict:i=!1}=e,s=hhe(e),o=fhe(s),a=n?n(o):phe(o);return mhe({circular:t,comparator:o,createState:r,equals:a,strict:i})}var r8={exports:{}},i8={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy=w,yhe=_S;function bhe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vhe=typeof Object.is=="function"?Object.is:bhe,xhe=yhe.useSyncExternalStore,whe=cy.useRef,khe=cy.useEffect,Che=cy.useMemo,She=cy.useDebugValue;i8.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=whe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Che(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return d=p}return d=h}if(p=d,vhe(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?(c=h,p):(c=h,d=m)}var u=!1,c,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,r,i]);var a=xhe(e,s[0],s[1]);return khe(function(){o.hasValue=!0,o.value=a},[a]),She(a),a};r8.exports=i8;var Ehe=r8.exports,The=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},_he=({contentComponent:e})=>{const t=_S.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return y.jsx(y.Fragment,{children:Object.values(t)})};function Ahe(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:Gk.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var Phe=class extends Y.Component{constructor(e){var t;super(e),this.editorContentRef=Y.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var e;const t=this.props.editor;if(t&&!t.isDestroyed&&((e=t.view.dom)!=null&&e.parentNode)){if(t.contentComponent)return;const n=this.editorContentRef.current;n.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:n}),t.contentComponent=Ahe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.parentNode))return;const n=document.createElement("div");n.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return y.jsxs(y.Fragment,{children:[y.jsx("div",{ref:The(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&y.jsx(_he,{contentComponent:e.contentComponent})]})}},Rhe=w.forwardRef((e,t)=>{const n=Y.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Y.createElement(Phe,{key:n,innerRef:t,...e})}),t2=Y.memo(Rhe),Nhe=typeof window<"u"?w.useLayoutEffect:w.useEffect,Dhe=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function Mhe(e){var t;const[n]=w.useState(()=>new Dhe(e.editor)),r=Ehe.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:ghe);return Nhe(()=>n.watch(e.editor),[e.editor,n]),w.useDebugValue(r),r}var Ohe=!1,kw=typeof window>"u",Ihe=kw||!!(typeof window<"u"&&window.next),jhe=class s8{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return kw||Ihe?null:this.createEditor();if(this.options.current.immediatelyRender&&kw&&Ohe)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new kfe(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?s8.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function o8(e={},t=[]){const n=w.useRef(e);n.current=e;const[r]=w.useState(()=>new jhe(n)),i=_S.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return w.useDebugValue(i),w.useEffect(r.onRender(t)),Mhe({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var a8=w.createContext({editor:null});a8.Consumer;var Lhe=w.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Fhe=()=>w.useContext(Lhe);Y.forwardRef((e,t)=>{const{onDragStart:n}=Fhe(),r=e.as||"div";return y.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Y.createContext({markViewContentRef:()=>{}});var n2=w.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});n2.displayName="TiptapContext";var $he=()=>w.useContext(n2);function l8({editor:e,instance:t,children:n}){const r=e??t;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const i=w.useMemo(()=>({editor:r}),[r]),s=w.useMemo(()=>({editor:r}),[r]);return y.jsx(a8.Provider,{value:s,children:y.jsx(n2.Provider,{value:i,children:n})})}l8.displayName="Tiptap";function u8({...e}){const{editor:t}=$he();return y.jsx(t2,{editor:t,...e})}u8.displayName="Tiptap.Content";Object.assign(l8,{Content:u8});var kg=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},zhe=/^\s*>\s$/,Bhe=$e.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return kg("blockquote",{...ut(this.options.HTMLAttributes,e),children:kg("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=">",r=[];return e.content.forEach(i=>{const a=t.renderChildren([i]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ic({find:zhe,type:this.type})]}}),Vhe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Uhe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Hhe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Whe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,qhe=cr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return kg("strong",{...ut(this.options.HTMLAttributes,e),children:kg("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[rc({find:Vhe,type:this.type}),rc({find:Hhe,type:this.type})]},addPasteRules(){return[ll({find:Uhe,type:this.type}),ll({find:Whe,type:this.type})]}}),Khe=/(^|[^`])`([^`]+)`(?!`)$/,Ghe=/(^|[^`])`([^`]+)`(?!`)/g,Jhe=cr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",ut(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[rc({find:Khe,type:this.type})]},addPasteRules(){return[ll({find:Ghe,type:this.type})]}}),hb=4,Qhe=/^```([a-z]+)?[\s\n]$/,Yhe=/^~~~([a-z]+)?[\s\n]$/,Xhe=$e.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:hb,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",ut(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let r="";const i=((n=e.attrs)==null?void 0:n.language)||"";return e.content?r=[`\`\`\`${i}`,t.renderChildren(e.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:hb,{state:r}=e,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?e.commands.insertContent(a):e.commands.command(({tr:l})=>{const{from:u,to:c}=i,h=r.doc.textBetween(u,c,`
`,`
`).split(`
`).map(p=>a+p).join(`
`);return l.replaceWith(u,c,r.schema.text(h)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:hb,{state:r}=e,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?e.commands.command(({tr:a})=>{var l;const{pos:u}=s,c=s.start(),d=s.end(),h=r.doc.textBetween(c,d,`
`,`
`).split(`
`);let p=0,m=0;const g=u-c;for(let C=0;C<h.length;C+=1){if(m+h[C].length>=g){p=C;break}m+=h[C].length+1}const v=((l=h[p].match(/^ */))==null?void 0:l[0])||"",x=Math.min(v.length,n);if(x===0)return!0;let k=c;for(let C=0;C<p;C+=1)k+=h[C].length+1;return a.delete(k,k+x),u-k<=x&&a.setSelection(he.create(a.doc,k)),!0}):e.commands.command(({tr:a})=>{const{from:l,to:u}=i,f=r.doc.textBetween(l,u,`
`,`
`).split(`
`).map(h=>{var p;const m=((p=h.match(/^ */))==null?void 0:p[0])||"",g=Math.min(m.length,n);return h.slice(g)}).join(`
`);return a.replaceWith(l,u,r.schema.text(f)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?e.commands.command(({tr:u})=>(u.setSelection(ye.near(r.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[xw({find:Qhe,type:this.type,getAttributes:e=>({language:e[1]})}),xw({find:Yhe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new tt({key:new mt("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(he.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),Zhe=$e.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),epe=$e.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",ut(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&o){const d=l.filter(f=>a.includes(f.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),tpe=$e.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,ut(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const r=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,i="#".repeat(r);return e.content?`${i} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>xw({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),npe=$e.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",ut(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!Sfe(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return LL(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,u=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(he.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(de.create(o.doc,l.pos)):o.setSelection(he.create(o.doc,l.pos));else{const c=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=c==null?void 0:c.create();d&&(o.insert(u,d),o.setSelection(he.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Cfe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),rpe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,ipe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,spe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ope=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,ape=cr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",ut(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[rc({find:rpe,type:this.type}),rc({find:spe,type:this.type})]},addPasteRules(){return[ll({find:ipe,type:this.type}),ll({find:ope,type:this.type})]}});const lpe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",upe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Cw="numeric",Sw="ascii",Ew="alpha",Id="asciinumeric",cd="alphanumeric",Tw="domain",c8="emoji",cpe="scheme",dpe="slashscheme",pb="whitespace";function fpe(e,t){return e in t||(t[e]=[]),t[e]}function Aa(e,t,n){t[Cw]&&(t[Id]=!0,t[cd]=!0),t[Sw]&&(t[Id]=!0,t[Ew]=!0),t[Id]&&(t[cd]=!0),t[Ew]&&(t[cd]=!0),t[cd]&&(t[Tw]=!0),t[c8]&&(t[Tw]=!0);for(const r in t){const i=fpe(r,n);i.indexOf(e)<0&&i.push(e)}}function hpe(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Ln(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Ln.groups={};Ln.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Ln.groups;let i;return t&&t.j?i=t:(i=new Ln(t),n&&r&&Aa(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Ln.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,a=i.go(e);if(a?(o=new Ln,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Ln,s){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(hpe(o.t,r),n);Aa(s,l,r)}else n&&Aa(s,n,r);o.t=s}return i.j[e]=o,o}};const _e=(e,t,n,r,i)=>e.ta(t,n,r,i),yt=(e,t,n,r,i)=>e.tr(t,n,r,i),VP=(e,t,n,r,i)=>e.ts(t,n,r,i),K=(e,t,n,r,i)=>e.tt(t,n,r,i),Ji="WORD",_w="UWORD",d8="ASCIINUMERICAL",f8="ALPHANUMERICAL",If="LOCALHOST",Aw="TLD",Pw="UTLD",im="SCHEME",Ul="SLASH_SCHEME",r2="NUM",Rw="WS",i2="NL",jd="OPENBRACE",Ld="CLOSEBRACE",Cg="OPENBRACKET",Sg="CLOSEBRACKET",Eg="OPENPAREN",Tg="CLOSEPAREN",_g="OPENANGLEBRACKET",Ag="CLOSEANGLEBRACKET",Pg="FULLWIDTHLEFTPAREN",Rg="FULLWIDTHRIGHTPAREN",Ng="LEFTCORNERBRACKET",Dg="RIGHTCORNERBRACKET",Mg="LEFTWHITECORNERBRACKET",Og="RIGHTWHITECORNERBRACKET",Ig="FULLWIDTHLESSTHAN",jg="FULLWIDTHGREATERTHAN",Lg="AMPERSAND",Fg="APOSTROPHE",$g="ASTERISK",Ws="AT",zg="BACKSLASH",Bg="BACKTICK",Vg="CARET",Xs="COLON",s2="COMMA",Ug="DOLLAR",mi="DOT",Hg="EQUALS",o2="EXCLAMATION",pr="HYPHEN",Fd="PERCENT",Wg="PIPE",qg="PLUS",Kg="POUND",$d="QUERY",a2="QUOTE",h8="FULLWIDTHMIDDLEDOT",l2="SEMI",gi="SLASH",zd="TILDE",Gg="UNDERSCORE",p8="EMOJI",Jg="SYM";var m8=Object.freeze({__proto__:null,ALPHANUMERICAL:f8,AMPERSAND:Lg,APOSTROPHE:Fg,ASCIINUMERICAL:d8,ASTERISK:$g,AT:Ws,BACKSLASH:zg,BACKTICK:Bg,CARET:Vg,CLOSEANGLEBRACKET:Ag,CLOSEBRACE:Ld,CLOSEBRACKET:Sg,CLOSEPAREN:Tg,COLON:Xs,COMMA:s2,DOLLAR:Ug,DOT:mi,EMOJI:p8,EQUALS:Hg,EXCLAMATION:o2,FULLWIDTHGREATERTHAN:jg,FULLWIDTHLEFTPAREN:Pg,FULLWIDTHLESSTHAN:Ig,FULLWIDTHMIDDLEDOT:h8,FULLWIDTHRIGHTPAREN:Rg,HYPHEN:pr,LEFTCORNERBRACKET:Ng,LEFTWHITECORNERBRACKET:Mg,LOCALHOST:If,NL:i2,NUM:r2,OPENANGLEBRACKET:_g,OPENBRACE:jd,OPENBRACKET:Cg,OPENPAREN:Eg,PERCENT:Fd,PIPE:Wg,PLUS:qg,POUND:Kg,QUERY:$d,QUOTE:a2,RIGHTCORNERBRACKET:Dg,RIGHTWHITECORNERBRACKET:Og,SCHEME:im,SEMI:l2,SLASH:gi,SLASH_SCHEME:Ul,SYM:Jg,TILDE:zd,TLD:Aw,UNDERSCORE:Gg,UTLD:Pw,UWORD:_w,WORD:Ji,WS:Rw});const Wi=/[a-z]/,qc=new RegExp("\\p{L}","u"),mb=new RegExp("\\p{Emoji}","u"),qi=/\d/,gb=/\s/,UP="\r",yb=`
`,ppe="",mpe="",bb="";let gp=null,yp=null;function gpe(e=[]){const t={};Ln.groups=t;const n=new Ln;gp==null&&(gp=HP(lpe)),yp==null&&(yp=HP(upe)),K(n,"'",Fg),K(n,"{",jd),K(n,"}",Ld),K(n,"[",Cg),K(n,"]",Sg),K(n,"(",Eg),K(n,")",Tg),K(n,"<",_g),K(n,">",Ag),K(n,"",Pg),K(n,"",Rg),K(n,"",Ng),K(n,"",Dg),K(n,"",Mg),K(n,"",Og),K(n,"",Ig),K(n,"",jg),K(n,"&",Lg),K(n,"*",$g),K(n,"@",Ws),K(n,"`",Bg),K(n,"^",Vg),K(n,":",Xs),K(n,",",s2),K(n,"$",Ug),K(n,".",mi),K(n,"=",Hg),K(n,"!",o2),K(n,"-",pr),K(n,"%",Fd),K(n,"|",Wg),K(n,"+",qg),K(n,"#",Kg),K(n,"?",$d),K(n,'"',a2),K(n,"/",gi),K(n,";",l2),K(n,"~",zd),K(n,"_",Gg),K(n,"\\",zg),K(n,"",h8);const r=yt(n,qi,r2,{[Cw]:!0});yt(r,qi,r);const i=yt(r,Wi,d8,{[Id]:!0}),s=yt(r,qc,f8,{[cd]:!0}),o=yt(n,Wi,Ji,{[Sw]:!0});yt(o,qi,i),yt(o,Wi,o),yt(i,qi,i),yt(i,Wi,i);const a=yt(n,qc,_w,{[Ew]:!0});yt(a,Wi),yt(a,qi,s),yt(a,qc,a),yt(s,qi,s),yt(s,Wi),yt(s,qc,s);const l=K(n,yb,i2,{[pb]:!0}),u=K(n,UP,Rw,{[pb]:!0}),c=yt(n,gb,Rw,{[pb]:!0});K(n,bb,c),K(u,yb,l),K(u,bb,c),yt(u,gb,c),K(c,UP),K(c,yb),yt(c,gb,c),K(c,bb,c);const d=yt(n,mb,p8,{[c8]:!0});K(d,"#"),yt(d,mb,d),K(d,ppe,d);const f=K(d,mpe);K(f,"#"),yt(f,mb,d);const h=[[Wi,o],[qi,i]],p=[[Wi,null],[qc,a],[qi,s]];for(let m=0;m<gp.length;m++)Os(n,gp[m],Aw,Ji,h);for(let m=0;m<yp.length;m++)Os(n,yp[m],Pw,_w,p);Aa(Aw,{tld:!0,ascii:!0},t),Aa(Pw,{utld:!0,alpha:!0},t),Os(n,"file",im,Ji,h),Os(n,"mailto",im,Ji,h),Os(n,"http",Ul,Ji,h),Os(n,"https",Ul,Ji,h),Os(n,"ftp",Ul,Ji,h),Os(n,"ftps",Ul,Ji,h),Aa(im,{scheme:!0,ascii:!0},t),Aa(Ul,{slashscheme:!0,ascii:!0},t),e=e.sort((m,g)=>m[0]>g[0]?1:-1);for(let m=0;m<e.length;m++){const g=e[m][0],v=e[m][1]?{[cpe]:!0}:{[dpe]:!0};g.indexOf("-")>=0?v[Tw]=!0:Wi.test(g)?qi.test(g)?v[Id]=!0:v[Sw]=!0:v[Cw]=!0,VP(n,g,g,v)}return VP(n,"localhost",If,{ascii:!0}),n.jd=new Ln(Jg),{start:n,tokens:Object.assign({groups:t},m8)}}function g8(e,t){const n=ype(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let a=e,l=null,u=0,c=null,d=-1,f=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,f=0,c=a):d>=0&&(d+=n[o].length,f++),u+=n[o].length,s+=n[o].length,o++;s-=d,o-=f,u-=d,i.push({t:c.t,v:t.slice(s-u,s),s:s-u,e:s})}return i}function ype(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function Os(e,t,n,r,i){let s;const o=t.length;for(let a=0;a<o-1;a++){const l=t[a];e.j[l]?s=e.j[l]:(s=new Ln(r),s.jr=i.slice(),e.j[l]=s),e=s}return s=new Ln(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function HP(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const jf={defaultProtocol:"http",events:null,format:WP,formatHref:WP,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function u2(e,t=null){let n=Object.assign({},jf);e&&(n=Object.assign(n,e instanceof u2?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}u2.prototype={o:jf,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:jf[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function WP(e){return e}function y8(e,t){this.t="token",this.v=e,this.tk=t}y8.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=jf.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},a=e.get("className",n,t),l=e.get("target",n,t),u=e.get("rel",n,t),c=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return o.href=r,a&&(o.class=a),l&&(o.target=l),u&&(o.rel=u),c&&Object.assign(o,c),{tagName:i,attributes:o,content:s,eventListeners:d}}};function dy(e,t){class n extends y8{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const qP=dy("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),KP=dy("text"),bpe=dy("nl"),bp=dy("url",{isLink:!0,toHref(e=jf.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==If&&e[1].t===Xs}}),hr=e=>new Ln(e);function vpe({groups:e}){const t=e.domain.concat([Lg,$g,Ws,zg,Bg,Vg,Ug,Hg,pr,r2,Fd,Wg,qg,Kg,gi,Jg,zd,Gg]),n=[Fg,Xs,s2,mi,o2,Fd,$d,a2,l2,_g,Ag,jd,Ld,Sg,Cg,Eg,Tg,Pg,Rg,Ng,Dg,Mg,Og,Ig,jg],r=[Lg,Fg,$g,zg,Bg,Vg,Ug,Hg,pr,jd,Ld,Fd,Wg,qg,Kg,$d,gi,Jg,zd,Gg],i=hr(),s=K(i,zd);_e(s,r,s),_e(s,e.domain,s);const o=hr(),a=hr(),l=hr();_e(i,e.domain,o),_e(i,e.scheme,a),_e(i,e.slashscheme,l),_e(o,r,s),_e(o,e.domain,o);const u=K(o,Ws);K(s,Ws,u),K(a,Ws,u),K(l,Ws,u);const c=K(s,mi);_e(c,r,s),_e(c,e.domain,s);const d=hr();_e(u,e.domain,d),_e(d,e.domain,d);const f=K(d,mi);_e(f,e.domain,d);const h=hr(qP);_e(f,e.tld,h),_e(f,e.utld,h),K(u,If,h);const p=K(d,pr);K(p,pr,p),_e(p,e.domain,d),_e(h,e.domain,d),K(h,mi,f),K(h,pr,p);const m=K(h,Xs);_e(m,e.numeric,qP);const g=K(o,pr),b=K(o,mi);K(g,pr,g),_e(g,e.domain,o),_e(b,r,s),_e(b,e.domain,o);const v=hr(bp);_e(b,e.tld,v),_e(b,e.utld,v),_e(v,e.domain,o),_e(v,r,s),K(v,mi,b),K(v,pr,g),K(v,Ws,u);const x=K(v,Xs),k=hr(bp);_e(x,e.numeric,k);const S=hr(bp),C=hr();_e(S,t,S),_e(S,n,C),_e(C,t,S),_e(C,n,C),K(v,gi,S),K(k,gi,S);const E=K(a,Xs),P=K(l,Xs),R=K(P,gi),A=K(R,gi);_e(a,e.domain,o),K(a,mi,b),K(a,pr,g),_e(l,e.domain,o),K(l,mi,b),K(l,pr,g),_e(E,e.domain,S),K(E,gi,S),K(E,$d,S),_e(A,e.domain,S),_e(A,t,S),K(A,gi,S);const L=[[jd,Ld],[Cg,Sg],[Eg,Tg],[_g,Ag],[Pg,Rg],[Ng,Dg],[Mg,Og],[Ig,jg]];for(let I=0;I<L.length;I++){const[U,F]=L[I],B=K(S,U);K(C,U,B),K(B,F,S);const q=hr(bp);_e(B,t,q);const H=hr();_e(B,n),_e(q,t,q),_e(q,n,H),_e(H,t,q),_e(H,n,H),K(q,F,S),K(H,F,S)}return K(i,If,v),K(i,i2,bpe),{start:i,tokens:m8}}function xpe(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let a=e,l=null,u=null,c=0,d=null,f=-1;for(;i<r&&!(l=a.go(n[i].t));)o.push(n[i++]);for(;i<r&&(u=l||a.go(n[i].t));)l=null,a=u,a.accepts()?(f=0,d=a):f>=0&&f++,i++,c++;if(f<0)i-=c,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(vb(KP,t,o)),o=[]),i-=f,c-=f;const h=d.t,p=n.slice(i-c,i);s.push(vb(h,t,p))}}return o.length>0&&s.push(vb(KP,t,o)),s}function vb(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const wpe=typeof console<"u"&&console&&console.warn||(()=>{}),kpe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",it={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Cpe(){return Ln.groups={},it.scanner=null,it.parser=null,it.tokenQueue=[],it.pluginQueue=[],it.customSchemes=[],it.initialized=!1,it}function GP(e,t=!1){if(it.initialized&&wpe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${kpe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);it.customSchemes.push([e,t])}function Spe(){it.scanner=gpe(it.customSchemes);for(let e=0;e<it.tokenQueue.length;e++)it.tokenQueue[e][1]({scanner:it.scanner});it.parser=vpe(it.scanner.tokens);for(let e=0;e<it.pluginQueue.length;e++)it.pluginQueue[e][1]({scanner:it.scanner,parser:it.parser});return it.initialized=!0,it}function c2(e){return it.initialized||Spe(),xpe(it.parser.start,e,g8(it.scanner.start,e))}c2.scan=g8;function b8(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new u2(n),i=c2(e),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!t||a.t===t)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}var d2="[\0- -\u2029]",Epe=new RegExp(d2),Tpe=new RegExp(`${d2}$`),_pe=new RegExp(d2,"g");function Ape(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function Ppe(e){return new tt({key:new mt("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(u=>u.docChanged)&&!n.doc.eq(r.doc),s=t.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=AL(n.doc,[...t]);if(jL(a).forEach(({newRange:u})=>{const c=Tde(r.doc,u,h=>h.isTextblock);let d,f;if(c.length>1)d=c[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(c.length){const h=r.doc.textBetween(u.from,u.to," "," ");if(!Tpe.test(h))return;d=c[0],f=r.doc.textBetween(d.pos,u.to,void 0," ")}if(d&&f){const h=f.split(Epe).filter(Boolean);if(h.length<=0)return!1;const p=h[h.length-1],m=d.pos+f.lastIndexOf(p);if(!p)return!1;const g=c2(p).map(b=>b.toObject(e.defaultProtocol));if(!Ape(g))return!1;g.filter(b=>b.isLink).map(b=>({...b,from:m+b.start+1,to:m+b.end+1})).filter(b=>r.schema.marks.code?!r.doc.rangeHasMark(b.from,b.to,r.schema.marks.code):!0).filter(b=>e.validate(b.value)).filter(b=>e.shouldAutoLink(b.value)).forEach(b=>{QS(b.from,b.to,r.doc).some(v=>v.mark.type===e.type)||o.addMark(b.from,b.to,e.type.create({href:b.href}))})}}),!!o.steps.length)return o}})}function Rpe(e){return new tt({key:new mt("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{const l=r.target;if(!l)return!1;const u=e.editor.view.dom;o=l.closest("a"),o&&!u.contains(o)&&(o=null)}if(!o)return!1;let a=!1;if(e.enableClickSelection&&(a=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){const l=IL(t.state,e.type.name),u=(i=o.href)!=null?i:l.href,c=(s=o.target)!=null?s:l.target;u&&(window.open(u,c),a=!0)}return a}}})}function Npe(e){return new tt({key:new mt("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{shouldAutoLink:i}=e,{state:s}=t,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const u=b8(l,{defaultProtocol:e.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!u||i!==void 0&&!i(u.value)?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function aa(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(_pe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var v8=cr.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){GP(e);return}GP(e.scheme,e.optionalSlashes)})},onDestroy(){Cpe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!aa(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>{const t=/^[a-z][a-z0-9+.-]*:\/\//i.test(e),n=/^[a-z][a-z0-9+.-]*:/i.test(e);if(t||n&&!e.includes("@"))return!0;const i=(e.includes("@")?e.split("@").pop():e).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!aa(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!aa(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",ut(this.options.HTMLAttributes,e),0]:["a",ut(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n,r,i,s;const o=(r=(n=e.attrs)==null?void 0:n.href)!=null?r:"",a=(s=(i=e.attrs)==null?void 0:i.title)!=null?s:"",l=t.renderChildren(e);return a?`[${l}](${o} "${a}")`:`[${l}](${o})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!aa(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!aa(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ll({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=b8(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!aa(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&t.push({text:s.value,data:{href:s.href},index:s.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(Ppe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!aa(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),e.push(Rpe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(Npe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),x8=v8,Dpe=Object.defineProperty,Mpe=(e,t)=>{for(var n in t)Dpe(e,n,{get:t[n],enumerable:!0})},Ope="listItem",JP="textStyle",QP=/^\s*([-+*])\s$/,w8=$e.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",ut(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Ope,this.editor.getAttributes(JP)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=ic({find:QP,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=ic({find:QP,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(JP),editor:this.editor})),[e]}}),k8=$e.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",ut(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(i=>i.type==="paragraph"))n=t.parseChildren(e.tokens);else{const i=e.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(i.tokens)}],e.tokens.length>1){const o=e.tokens.slice(1),a=t.parseChildren(o);n.push(...a)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>e2(e,t,r=>{var i,s;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((s=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:s.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Ipe={};Mpe(Ipe,{findListItemPos:()=>gh,getNextListDepth:()=>f2,handleBackspace:()=>Nw,handleDelete:()=>Dw,hasListBefore:()=>C8,hasListItemAfter:()=>jpe,hasListItemBefore:()=>S8,listItemHasSubList:()=>E8,nextListIsDeeper:()=>T8,nextListIsHigher:()=>_8});var gh=(e,t)=>{const{$from:n}=t.selection,r=Ot(e,t.schema);let i=null,s=n.depth,o=n.pos,a=null;for(;s>0&&a===null;)i=n.node(s),i.type===r?a=s:(s-=1,o-=1);return a===null?null:{$pos:t.doc.resolve(o),depth:a}},f2=(e,t)=>{const n=gh(e,t);if(!n)return!1;const[,r]=Ide(t,e,n.$pos.pos+4);return r},C8=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},S8=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},E8=(e,t,n)=>{if(!n)return!1;const r=Ot(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},Nw=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Vo(e.state,t)&&C8(e.state,t,n)){const{$anchor:a}=e.state.selection,l=e.state.doc.resolve(a.before()-1),u=[];l.node().descendants((f,h)=>{f.type.name===t&&u.push({node:f,pos:h})});const c=u.at(-1);if(!c)return!1;const d=e.state.doc.resolve(l.start()+c.pos+1);return e.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!Vo(e.state,t)||!$de(e.state))return!1;const r=gh(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=E8(t,e.state,s);return S8(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},T8=(e,t)=>{const n=f2(e,t),r=gh(e,t);return!r||!n?!1:n>r.depth},_8=(e,t)=>{const n=f2(e,t),r=gh(e,t);return!r||!n?!1:n<r.depth},Dw=(e,t)=>{if(!Vo(e.state,t)||!Fde(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:T8(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():_8(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},jpe=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},A8=ot.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&Dw(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&Dw(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&Nw(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&Nw(e,n,r)&&(t=!0)}),t}}}}),YP=/^(\s*)(\d+)\.\s+(.*)$/,Lpe=/^\s/;function Fpe(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n],s=i.match(YP);if(!s)break;const[,o,a,l]=s,u=o.length;let c=l,d=n+1;const f=[i];for(;d<e.length;){const h=e[d];if(h.match(YP))break;if(h.trim()==="")f.push(h),c+=`
`,d+=1;else if(h.match(Lpe))f.push(h),c+=`
${h.slice(u+2)}`,d+=1;else break}t.push({indent:u,number:parseInt(a,10),content:c.trim(),raw:f.join(`
`)}),r=d,n=d}return[t,r]}function P8(e,t,n){var r;const i=[];let s=0;for(;s<e.length;){const o=e[s];if(o.indent===t){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",u=[];l&&u.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const c=a.slice(1).join(`
`).trim();if(c){const h=n.blockTokens(c);u.push(...h)}let d=s+1;const f=[];for(;d<e.length&&e[d].indent>t;)f.push(e[d]),d+=1;if(f.length>0){const h=Math.min(...f.map(m=>m.indent)),p=P8(f,h,n);u.push({type:"list",ordered:!0,start:f[0].number,items:p,raw:f.map(m=>m.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:u}),s=d}else s+=1}return i}function $pe(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...t.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=t.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=t.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var zpe="listItem",XP="textStyle",ZP=/^(\d+)\.\s$/,R8=$e.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",ut(this.options.HTMLAttributes,n),0]:["ol",ut(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,r=e.items?$pe(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t==null?void 0:t.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var r;const i=e.split(`
`),[s,o]=Fpe(i);if(s.length===0)return;const a=P8(s,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(zpe,this.editor.getAttributes(XP)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=ic({find:ZP,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=ic({find:ZP,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(XP)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),Bpe=/^\s*(\[([( |x])?\])\s$/,Vpe=$e.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",ut(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const r=t.parseChildren(e.nestedTokens);n.push(...r)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const i=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return e2(e,t,i)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),u=d=>{var f,h;a.ariaLabel=((h=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:h.call(f,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};u(e),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const p=n();if(typeof p!="number")return!1;const m=h.doc.nodeAt(p);return h.setNodeMarkup(p,void 0,{...m==null?void 0:m.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{i.setAttribute(d,f)}),i.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(t).forEach(([d,f])=>{i.setAttribute(d,f)});let c=new Set(Object.keys(t));return{dom:i,contentDOM:l,update:d=>{if(d.type!==this.type)return!1;i.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,u(d);const f=r.extensionManager.attributes,h=Of(d,f),p=new Set(Object.keys(h)),m=this.options.HTMLAttributes;return c.forEach(g=>{p.has(g)||(g in m?i.setAttribute(g,m[g]):i.removeAttribute(g))}),Object.entries(h).forEach(([g,b])=>{b==null?g in m?i.setAttribute(g,m[g]):i.removeAttribute(g):i.setAttribute(g,b)}),c=p,!0}}}},addInputRules(){return[ic({find:Bpe,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),Upe=$e.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",ut(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const r=s=>{const o=ww(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(s)},i=ww(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ot.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(w8.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(k8.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(A8.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(R8.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(Vpe.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(Upe.configure(this.options.taskList)),e}});var eR="&nbsp;",Hpe="",Wpe=$e.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",ut(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];if(n.length===1&&n[0].type==="image")return t.parseChildren([n[0]]);const r=t.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===eR||r[0].text===Hpe)?t.createNode("paragraph",void 0,[]):t.createNode("paragraph",void 0,r)},renderMarkdown:(e,t)=>{if(!e)return"";const n=Array.isArray(e.content)?e.content:[];return n.length===0?eR:t.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),qpe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Kpe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Gpe=cr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",ut(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[rc({find:qpe,type:this.type})]},addPasteRules(){return[ll({find:Kpe,type:this.type})]}}),Jpe=$e.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),Qpe=cr.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",ut(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Ype(e={}){return new tt({view(t){return new Xpe(t,e)}})}class Xpe{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let d=t.nodeBefore,f=t.nodeAfter;if(d||f){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let p=h.getBoundingClientRect(),m=d?p.bottom:p.top;d&&f&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let g=this.width/2*a;r={left:p.left,right:p.right,top:m-g,bottom:m+g}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;r={left:d.left-f,right:d.left+f,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,c=-pageYOffset;else{let d=l.getBoundingClientRect(),f=d.width/l.offsetWidth,h=d.height/l.offsetHeight;u=d.left-l.scrollLeft*f,c=d.top-l.scrollTop*h}this.element.style.left=(r.left-u)/o+"px",this.element.style.top=(r.top-c)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Tj(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class wt extends ye{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return wt.valid(r)?new wt(r):ye.near(r)}content(){return te.empty}eq(t){return t instanceof wt&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new wt(t.resolve(n.pos))}getBookmark(){return new h2(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Zpe(t)||!eme(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&wt.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let a=t.node(o);if(n>0?t.indexAfter(o)<a.childCount:t.index(o)>0){s=a.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let l=t.doc.resolve(i);if(wt.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!de.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=t.doc.resolve(i);if(wt.valid(a))return a}return null}}}wt.prototype.visible=!1;wt.findFrom=wt.findGapCursorFrom;ye.jsonID("gapcursor",wt);class h2{constructor(t){this.pos=t}map(t){return new h2(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return wt.valid(n)?new wt(n):ye.near(n)}}function N8(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function Zpe(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||N8(i.type))return!0;if(i.inlineContent)return!1}}return!0}function eme(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||N8(i.type))return!0;if(i.inlineContent)return!1}}return!0}function tme(){return new tt({props:{decorations:sme,createSelectionBetween(e,t,n){return t.pos==n.pos&&wt.valid(n)?new wt(n):null},handleClick:rme,handleKeyDown:nme,handleDOMEvents:{beforeinput:ime}}})}const nme=WS({ArrowLeft:vp("horiz",-1),ArrowRight:vp("horiz",1),ArrowUp:vp("vert",-1),ArrowDown:vp("vert",1)});function vp(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,a=t>0?o.$to:o.$from,l=o.empty;if(o instanceof he){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let u=wt.findGapCursorFrom(a,t,l);return u?(i&&i(r.tr.setSelection(new wt(u))),!0):!1}}function rme(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!wt.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&de.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new wt(r))),!0)}function ime(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof wt))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=V.empty;for(let o=r.length-1;o>=0;o--)i=V.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new te(i,0,0));return s.setSelection(he.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function sme(e){if(!(e.selection instanceof wt))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Qe.create(e.doc,[Ht.widget(e.selection.head,t,{key:"gapcursor"})])}var Qg=200,Kt=function(){};Kt.prototype.append=function(t){return t.length?(t=Kt.from(t),!this.length&&t||t.length<Qg&&this.leafAppend(t)||this.length<Qg&&t.leafPrepend(this)||this.appendInner(t)):this};Kt.prototype.prepend=function(t){return t.length?Kt.from(t).append(this):this};Kt.prototype.appendInner=function(t){return new ome(this,t)};Kt.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Kt.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Kt.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Kt.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Kt.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};Kt.from=function(t){return t instanceof Kt?t:t&&t.length?new D8(t):Kt.empty};var D8=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=Qg)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=Qg)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Kt);Kt.empty=new D8([]);var ome=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Kt);const ame=500;class Qr{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,a,l,u=[],c=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,c.push(d);return}if(i){c.push(new yi(d.map));let h=d.step.map(i.slice(s)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],u.push(new yi(p,void 0,void 0,u.length+c.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new Qr(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(t,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<t.steps.length;c++){let d=t.steps[c].invert(t.docs[c]),f=new yi(t.mapping.maps[c],d,n),h;(h=l&&l.merge(f))&&(f=h,c?s.pop():a=a.slice(0,a.length-1)),s.push(f),n&&(o++,n=void 0),i||(l=f)}let u=o-r.depth;return u>ume&&(a=lme(a,u),o-=u),new Qr(a.append(s),o)}remapping(t,n){let r=new Af;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new Qr(this.items.append(t.map(n=>new yi(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=n;this.items.forEach(f=>{let h=s.getMirror(--l);if(h==null)return;o=Math.min(o,h);let p=s.maps[h];if(f.step){let m=t.steps[h].invert(t.docs[h]),g=f.selection&&f.selection.map(s.slice(l+1,h));g&&a++,r.push(new yi(p,m,g))}else r.push(new yi(p))},i);let u=[];for(let f=n;f<o;f++)u.push(new yi(s.maps[f]));let c=this.items.slice(0,i).append(u).append(r),d=new Qr(c,a);return d.emptyItemCount()>ame&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=t)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){let c=o.selection&&o.selection.map(n.slice(r));c&&s++;let d=new yi(u.invert(),l,c),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else o.map&&r--},this.items.length,0),new Qr(Kt.from(i.reverse()),s)}}Qr.empty=new Qr(Kt.empty,0);function lme(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class yi{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new yi(n.getMap().invert(),n,this.selection)}}}class qs{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const ume=20;function cme(e,t,n,r){let i=n.getMeta(Wa),s;if(i)return i.historyState;n.getMeta(hme)&&(e=new qs(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(Wa))return o.getMeta(Wa).redo?new qs(e.done.addTransform(n,void 0,r,sm(t)),e.undone,tR(n.mapping.maps),e.prevTime,e.prevComposition):new qs(e.done,e.undone.addTransform(n,void 0,r,sm(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!o&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!dme(n,e.prevRanges)),u=o?xb(e.prevRanges,n.mapping):tR(n.mapping.maps);return new qs(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,sm(t)),Qr.empty,u,n.time,a??e.prevComposition)}else return(s=n.getMeta("rebased"))?new qs(e.done.rebased(n,s),e.undone.rebased(n,s),xb(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new qs(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),xb(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function dme(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function tR(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function xb(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function fme(e,t,n){let r=sm(t),i=Wa.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),l=new qs(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Wa,{redo:n,historyState:l})}let wb=!1,nR=null;function sm(e){let t=e.plugins;if(nR!=t){wb=!1,nR=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){wb=!0;break}}return wb}const Wa=new mt("history"),hme=new mt("closeHistory");function pme(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new tt({key:Wa,state:{init(){return new qs(Qr.empty,Qr.empty,null,0,-1)},apply(t,n,r){return cme(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?O8:r=="historyRedo"?I8:null;return!i||!t.editable?!1:(n.preventDefault(),i(t.state,t.dispatch))}}}})}function M8(e,t){return(n,r)=>{let i=Wa.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=fme(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const O8=M8(!1,!0),I8=M8(!0,!0);ot.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new tt({key:new mt("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(a,l);return e=!0,u}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const a=t.selection.$head.pos,l=s-r,u=a-l,c=a;return t.deleteRange(u,c),!(this.storage.characters({node:t.doc})>r)}})]}});var mme=ot.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Ype(this.options)]}});ot.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new tt({key:new mt("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return Qe.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((l,u)=>{if(l.isText)return;if(!(i>=u&&i<=u+l.nodeSize-1))return!1;o+=1});let a=0;return e.descendants((l,u)=>{if(l.isText||!(i>=u&&i<=u+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(Ht.node(u,u+l.nodeSize,{class:this.options.className}))}),Qe.create(e,s)}}})]}});var gme=ot.create({name:"gapCursor",addProseMirrorPlugins(){return[tme()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=ze(ue(e,"allowGapCursor",n)))!=null?t:null}}}),rR="placeholder";function yme(e){return e.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var bme=ot.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:rR,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const e=this.options.dataAttribute?`data-${yme(this.options.dataAttribute)}`:`data-${rR}`;return[new tt({key:new mt("placeholder"),props:{decorations:({doc:t,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=n,s=[];if(!r)return null;const o=this.editor.isEmpty;return t.descendants((a,l)=>{const u=i>=l&&i<=l+a.nodeSize,c=!a.isLeaf&&ay(a);if((u||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];o&&d.push(this.options.emptyEditorClass);const f=Ht.node(l,l+a.nodeSize,{class:d.join(" "),[e]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:u}):this.options.placeholder});s.push(f)}return this.options.includeChildren}),Qe.create(t,s)}}})]}});ot.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new tt({key:new mt("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||LL(n.selection)||e.view.dragging?null:Qe.create(n.doc,[Ht.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function iR({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var vme=ot.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new mt(this.name),n=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new tt({key:t,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:u}=o,c=t.getState(o),d=a.content.size,f=u.nodes[n];if(c)return l.insert(d,f.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!iR({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!iR({node:o,types:r})}}})]}}),xme=ot.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>O8(e,t),redo:()=>({state:e,dispatch:t})=>I8(e,t)}},addProseMirrorPlugins(){return[pme(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),wme=ot.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(qhe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(Bhe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(w8.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Jhe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Xhe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Zhe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(mme.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(gme.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(epe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(tpe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(xme.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(npe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(ape.configure(this.options.italic)),this.options.listItem!==!1&&i.push(k8.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(A8.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(v8.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(R8.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Wpe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Gpe.configure(this.options.strike)),this.options.text!==!1&&i.push(Jpe.configure(this.options.text)),this.options.underline!==!1&&i.push(Qpe.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(vme.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),j8=wme;let Mw,Ow;if(typeof WeakMap<"u"){let e=new WeakMap;Mw=t=>e.get(t),Ow=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;Mw=r=>{for(let i=0;i<e.length;i+=2)if(e[i]==r)return e[i+1]},Ow=(r,i)=>(n==10&&(n=0),e[n++]=r,e[n++]=i)}var kt=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,i=t/this.width|0;let s=r+1,o=i+1;for(let a=1;s<this.width&&this.map[t+a]==n;a++)s++;for(let a=1;o<this.height&&this.map[t+this.width*a]==n;a++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(e);return t=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(e,t){const{left:n,right:r,top:i,bottom:s}=this.findCell(e),{left:o,right:a,top:l,bottom:u}=this.findCell(t);return{left:Math.min(n,o),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(s,u)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let i=e.left;i<e.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,!(i==e.left&&i&&this.map[s-1]==o||r==e.top&&r&&this.map[s-this.width]==o)&&t.push(o))}return t}positionAt(e,t,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==e){let o=t+e*this.width;const a=(e+1)*this.width;for(;o<a&&this.map[o]<i;)o++;return o==a?s-1:this.map[o]}i=s}}static get(e){return Mw(e)||Ow(e,kme(e))}};function kme(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=Cme(e),n=e.childCount,r=[];let i=0,s=null;const o=[];for(let u=0,c=t*n;u<c;u++)r[u]=0;for(let u=0,c=0;u<n;u++){const d=e.child(u);c++;for(let p=0;;p++){for(;i<r.length&&r[i]!=0;)i++;if(p==d.childCount)break;const m=d.child(p),{colspan:g,rowspan:b,colwidth:v}=m.attrs;for(let x=0;x<b;x++){if(x+u>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:c,n:b-x});break}const k=i+x*t;for(let S=0;S<g;S++){r[k+S]==0?r[k+S]=c:(s||(s=[])).push({type:"collision",row:u,pos:c,n:g-S});const C=v&&v[S];if(C){const E=(k+S)%t*2,P=o[E];P==null||P!=C&&o[E+1]==1?(o[E]=C,o[E+1]=1):P==C&&o[E+1]++}}}i+=g,c+=m.nodeSize}const f=(u+1)*t;let h=0;for(;i<f;)r[i++]==0&&h++;h&&(s||(s=[])).push({type:"missing",row:u,n:h}),c++}(t===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new kt(t,n,r,s);let l=!1;for(let u=0;!l&&u<o.length;u+=2)o[u]!=null&&o[u+1]<n&&(l=!0);return l&&Sme(a,o,e),a}function Cme(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const i=e.child(r);let s=0;if(n)for(let o=0;o<r;o++){const a=e.child(o);for(let l=0;l<a.childCount;l++){const u=a.child(l);o+u.attrs.rowspan>r&&(s+=u.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const a=i.child(o);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}t==-1?t=s:t!=s&&(t=Math.max(t,s))}return t}function Sme(e,t,n){e.problems||(e.problems=[]);const r={};for(let i=0;i<e.map.length;i++){const s=e.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=o.attrs;for(let u=0;u<l.colspan;u++){const c=t[(i+u)%e.width*2];c!=null&&(!l.colwidth||l.colwidth[u]!=c)&&((a||(a=Eme(l)))[u]=c)}a&&e.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function Eme(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function gn(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}}return t}const Zs=new mt("selectingCells");function ul(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function Tme(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if(n==="cell"||n==="header_cell")return e.node(t)}return null}function ai(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function fy(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=ul(t.$head)||_me(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function _me(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function Iw(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function Ame(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function p2(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function L8(e,t,n){const r=e.node(-1),i=kt.get(r),s=e.start(-1),o=i.nextCell(e.pos-s,t,n);return o==null?null:e.node(0).resolve(s+o)}function cl(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function F8(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(t,0,0)}return r}function Pme(e,t,n){const r=gn(t.type.schema).header_cell;for(let i=0;i<e.height;i++)if(t.nodeAt(e.map[n+i*e.width]).type!=r)return!1;return!0}var et=class Qi extends ye{constructor(t,n=t){const r=t.node(-1),i=kt.get(r),s=t.start(-1),o=i.rectBetween(t.pos-s,n.pos-s),a=t.node(0),l=i.cellsInRect(o).filter(c=>c!=n.pos-s);l.unshift(n.pos-s);const u=l.map(c=>{const d=r.nodeAt(c);if(!d)throw new RangeError(`No cell with offset ${c} found`);const f=s+c+1;return new Nj(a.resolve(f),a.resolve(f+d.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(Iw(r)&&Iw(i)&&p2(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Qi.rowSelection(r,i):s&&this.isColSelection()?Qi.colSelection(r,i):new Qi(r,i)}return he.between(r,i)}content(){const t=this.$anchorCell.node(-1),n=kt.get(t),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let l=i.top;l<i.bottom;l++){const u=[];for(let c=l*n.width+i.left,d=i.left;d<i.right;d++,c++){const f=n.map[c];if(s[f])continue;s[f]=!0;const h=n.findCell(f);let p=t.nodeAt(f);if(!p)throw new RangeError(`No cell with offset ${f} found`);const m=i.left-h.left,g=h.right-i.right;if(m>0||g>0){let b=p.attrs;if(m>0&&(b=cl(b,0,m)),g>0&&(b=cl(b,b.colspan-g,g)),h.left<i.left){if(p=p.type.createAndFill(b),!p)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(b)}`)}else p=p.type.create(b,p.content)}if(h.top<i.top||h.bottom>i.bottom){const b={...p.attrs,rowspan:Math.min(h.bottom,i.bottom)-Math.max(h.top,i.top)};h.top<i.top?p=p.type.createAndFill(b):p=p.type.create(b,p.content)}u.push(p)}o.push(t.child(l).copy(V.from(u)))}const a=this.isColSelection()&&this.isRowSelection()?t:o;return new te(V.from(a),1,1)}replace(t,n=te.empty){const r=t.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:a,$to:l}=i[o],u=t.mapping.slice(r);t.replace(u.map(a.pos),u.map(l.pos),o?te.empty:n)}const s=ye.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);s&&t.setSelection(s)}replaceWith(t,n){this.replace(t,new te(V.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=kt.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)t(n.nodeAt(s[o]),i+s[o])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),i=kt.get(r),s=t.start(-1),o=i.findCell(t.pos-s),a=i.findCell(n.pos-s),l=t.node(0);return o.top<=a.top?(o.top>0&&(t=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(n=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(t=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new Qi(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=kt.get(t),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==n.width}eq(t){return t instanceof Qi&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),i=kt.get(r),s=t.start(-1),o=i.findCell(t.pos-s),a=i.findCell(n.pos-s),l=t.node(0);return o.left<=a.left?(o.left>0&&(t=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(n=l.resolve(s+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(t=l.resolve(s+i.map[i.width*(o.top+1)-1]))),new Qi(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new Qi(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new Qi(t.resolve(n),t.resolve(r))}getBookmark(){return new Rme(this.$anchorCell.pos,this.$headCell.pos)}};et.prototype.visible=!1;ye.jsonID("cell",et);var Rme=class $8{constructor(t,n){this.anchor=t,this.head=n}map(t){return new $8(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&p2(n,r)?new et(n,r):ye.near(r,1)}};function Nme(e){if(!(e.selection instanceof et))return null;const t=[];return e.selection.forEachCell((n,r)=>{t.push(Ht.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Qe.create(e.doc,t)}function Dme({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,r=t.pos,i=e.depth;for(;i>=0&&!(e.after(i+1)<e.end(i));i--,n++);for(let s=t.depth;s>=0&&!(t.before(s+1)>t.start(s));s--,r--);return n==r&&/row|table/.test(e.node(i).type.spec.tableRole)}function Mme({$from:e,$to:t}){let n,r;for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&t.parentOffset===0}function Ome(e,t,n){const r=(t||e).selection,i=(t||e).doc;let s,o;if(r instanceof de&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=et.create(i,r.from);else if(o=="row"){const a=i.resolve(r.from+1);s=et.rowSelection(a,a)}else if(!n){const a=kt.get(r.node),l=r.from+1,u=l+a.map[a.width*a.height-1];s=et.create(i,l+1,u)}}else r instanceof he&&Dme(r)?s=he.create(i,r.from):r instanceof he&&Mme(r)&&(s=he.create(i,r.$from.start(),r.$from.end()));return s&&(t||(t=e.tr)).setSelection(s),t}const Ime=new mt("fix-tables");function z8(e,t,n,r){const i=e.childCount,s=t.childCount;e:for(let o=0,a=0;o<s;o++){const l=t.child(o);for(let u=a,c=Math.min(i,o+3);u<c;u++)if(e.child(u)==l){a=u+1,n+=l.nodeSize;continue e}r(l,n),a<i&&e.child(a).sameMarkup(l)?z8(e.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function B8(e,t){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=jme(e,i,s,n))};return t?t.doc!=e.doc&&z8(t.doc,e.doc,0,r):e.doc.descendants(r),n}function jme(e,t,n,r){const i=kt.get(t);if(!i.problems)return r;r||(r=e.tr);const s=[];for(let l=0;l<i.height;l++)s.push(0);for(let l=0;l<i.problems.length;l++){const u=i.problems[l];if(u.type=="collision"){const c=t.nodeAt(u.pos);if(!c)continue;const d=c.attrs;for(let f=0;f<d.rowspan;f++)s[u.row+f]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,cl(d,d.colspan-u.n,u.n))}else if(u.type=="missing")s[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const c=t.nodeAt(u.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...c.attrs,rowspan:c.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const c=t.nodeAt(u.pos);if(!c)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...c.attrs,colwidth:u.colwidth})}else if(u.type=="zero_sized"){const c=r.mapping.map(n);r.delete(c,c+t.nodeSize)}}let o,a;for(let l=0;l<s.length;l++)s[l]&&(o==null&&(o=l),a=l);for(let l=0,u=n+1;l<i.height;l++){const c=t.child(l),d=u+c.nodeSize,f=s[l];if(f>0){let h="cell";c.firstChild&&(h=c.firstChild.type.spec.tableRole);const p=[];for(let g=0;g<f;g++){const b=gn(e.schema)[h].createAndFill();b&&p.push(b)}const m=(l==0||o==l-1)&&a==l?u+1:d-1;r.insert(r.mapping.map(m),p)}u=d}return r.setMeta(Ime,{fixTables:!0})}function Fi(e){const t=e.selection,n=fy(e),r=n.node(-1),i=n.start(-1),s=kt.get(r);return{...t instanceof et?s.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function V8(e,{map:t,tableStart:n,table:r},i){let s=i>0?-1:0;Pme(t,r,i+s)&&(s=i==0||i==t.width?null:0);for(let o=0;o<t.height;o++){const a=o*t.width+i;if(i>0&&i<t.width&&t.map[a-1]==t.map[a]){const l=t.map[a],u=r.nodeAt(l);e.setNodeMarkup(e.mapping.map(n+l),null,F8(u.attrs,i-t.colCount(l))),o+=u.attrs.rowspan-1}else{const l=s==null?gn(r.type.schema).cell:r.nodeAt(t.map[a+s]).type,u=t.positionAt(o,i,r);e.insert(e.mapping.map(n+u),l.createAndFill())}}return e}function Lme(e,t){if(!ai(e))return!1;if(t){const n=Fi(e);t(V8(e.tr,n,n.left))}return!0}function Fme(e,t){if(!ai(e))return!1;if(t){const n=Fi(e);t(V8(e.tr,n,n.right))}return!0}function $me(e,{map:t,table:n,tableStart:r},i){const s=e.mapping.maps.length;for(let o=0;o<t.height;){const a=o*t.width+i,l=t.map[a],u=n.nodeAt(l),c=u.attrs;if(i>0&&t.map[a-1]==l||i<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(s).map(r+l),null,cl(c,i-t.colCount(l)));else{const d=e.mapping.slice(s).map(r+l);e.delete(d,d+u.nodeSize)}o+=c.rowspan}}function zme(e,t){if(!ai(e))return!1;if(t){const n=Fi(e),r=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;$me(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw new RangeError("No table found");n.table=s,n.map=kt.get(s)}t(r)}return!0}function Bme(e,t,n){var r;const i=gn(t.type.schema).header_cell;for(let s=0;s<e.width;s++)if(((r=t.nodeAt(e.map[s+n*e.width]))===null||r===void 0?void 0:r.type)!=i)return!1;return!0}function U8(e,{map:t,tableStart:n,table:r},i){let s=n;for(let u=0;u<i;u++)s+=r.child(u).nodeSize;const o=[];let a=i>0?-1:0;Bme(t,r,i+a)&&(a=i==0||i==t.height?null:0);for(let u=0,c=t.width*i;u<t.width;u++,c++)if(i>0&&i<t.height&&t.map[c]==t.map[c-t.width]){const d=t.map[c],f=r.nodeAt(d).attrs;e.setNodeMarkup(n+d,null,{...f,rowspan:f.rowspan+1}),u+=f.colspan-1}else{var l;const d=a==null?gn(r.type.schema).cell:(l=r.nodeAt(t.map[c+a*t.width]))===null||l===void 0?void 0:l.type,f=d==null?void 0:d.createAndFill();f&&o.push(f)}return e.insert(s,gn(r.type.schema).row.create(null,o)),e}function Vme(e,t){if(!ai(e))return!1;if(t){const n=Fi(e);t(U8(e.tr,n,n.top))}return!0}function Ume(e,t){if(!ai(e))return!1;if(t){const n=Fi(e);t(U8(e.tr,n,n.bottom))}return!0}function Hme(e,{map:t,table:n,tableStart:r},i){let s=0;for(let u=0;u<i;u++)s+=n.child(u).nodeSize;const o=s+n.child(i).nodeSize,a=e.mapping.maps.length;e.delete(s+r,o+r);const l=new Set;for(let u=0,c=i*t.width;u<t.width;u++,c++){const d=t.map[c];if(!l.has(d)){if(l.add(d),i>0&&d==t.map[c-t.width]){const f=n.nodeAt(d).attrs;e.setNodeMarkup(e.mapping.slice(a).map(d+r),null,{...f,rowspan:f.rowspan-1}),u+=f.colspan-1}else if(i<t.height&&d==t.map[c+t.width]){const f=n.nodeAt(d),h=f.attrs,p=f.type.create({...h,rowspan:f.attrs.rowspan-1},f.content),m=t.positionAt(i+1,u,n);e.insert(e.mapping.slice(a).map(r+m),p),u+=h.colspan-1}}}}function Wme(e,t){if(!ai(e))return!1;if(t){const n=Fi(e),r=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;Hme(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw new RangeError("No table found");n.table=s,n.map=kt.get(n.table)}t(r)}return!0}function sR(e){const t=e.content;return t.childCount==1&&t.child(0).isTextblock&&t.child(0).childCount==0}function qme({width:e,height:t,map:n},r){let i=r.top*e+r.left,s=i,o=(r.bottom-1)*e+r.left,a=i+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<e&&n[a]==n[a+1])return!0;s+=e,a+=e}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[i]==n[i-e]||r.bottom<t&&n[o]==n[o+e])return!0;i++,o++}return!1}function oR(e,t){const n=e.selection;if(!(n instanceof et)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Fi(e),{map:i}=r;if(qme(i,r))return!1;if(t){const s=e.tr,o={};let a=V.empty,l,u;for(let c=r.top;c<r.bottom;c++)for(let d=r.left;d<r.right;d++){const f=i.map[c*i.width+d],h=r.table.nodeAt(f);if(!(o[f]||!h))if(o[f]=!0,l==null)l=f,u=h;else{sR(h)||(a=a.append(h.content));const p=s.mapping.map(f+r.tableStart);s.delete(p,p+h.nodeSize)}}if(l==null||u==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...F8(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),rowspan:r.bottom-r.top}),a.size>0){const c=l+1+u.content.size,d=sR(u)?l+1:c;s.replaceWith(d+r.tableStart,c+r.tableStart,a)}s.setSelection(new et(s.doc.resolve(l+r.tableStart))),t(s)}return!0}function aR(e,t){const n=gn(e.schema);return Kme(({node:r})=>n[r.type.spec.tableRole])(e,t)}function Kme(e){return(t,n)=>{const r=t.selection;let i,s;if(r instanceof et){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;i=r.$anchorCell.nodeAfter,s=r.$anchorCell.pos}else{var o;if(i=Tme(r.$from),!i)return!1;s=(o=ul(r.$from))===null||o===void 0?void 0:o.pos}if(i==null||s==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(n){let a=i.attrs;const l=[],u=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const c=Fi(t),d=t.tr;for(let h=0;h<c.right-c.left;h++)l.push(u?{...a,colwidth:u&&u[h]?[u[h]]:null}:a);let f;for(let h=c.top;h<c.bottom;h++){let p=c.map.positionAt(h,c.left,c.table);h==c.top&&(p+=i.nodeSize);for(let m=c.left,g=0;m<c.right;m++,g++)m==c.left&&h==c.top||d.insert(f=d.mapping.map(p+c.tableStart,1),e({node:i,row:h,col:m}).createAndFill(l[g]))}d.setNodeMarkup(s,e({node:i,row:c.top,col:c.left}),l[0]),r instanceof et&&d.setSelection(new et(d.doc.resolve(r.$anchorCell.pos),f?d.doc.resolve(f):void 0)),n(d)}return!0}}function Gme(e,t){return function(n,r){if(!ai(n))return!1;const i=fy(n);if(i.nodeAfter.attrs[e]===t)return!1;if(r){const s=n.tr;n.selection instanceof et?n.selection.forEachCell((o,a)=>{o.attrs[e]!==t&&s.setNodeMarkup(a,null,{...o.attrs,[e]:t})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[e]:t}),r(s)}return!0}}function Jme(e){return function(t,n){if(!ai(t))return!1;if(n){const r=gn(t.schema),i=Fi(t),s=t.tr,o=i.map.cellsInRect(e=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:e=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=o.map(l=>i.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[l],r.cell,a[l].attrs);if(s.steps.length===0)for(let l=0;l<o.length;l++)s.setNodeMarkup(i.tableStart+o[l],r.header_cell,a[l].attrs);n(s)}return!0}}function lR(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let i=0;i<r.length;i++){const s=t.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function Lf(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?Jme(e):function(n,r){if(!ai(n))return!1;if(r){const i=gn(n.schema),s=Fi(n),o=n.tr,a=lR("row",s,i),l=lR("column",s,i),u=(e==="column"?a:e==="row"&&l)?1:0,c=e=="column"?{left:0,top:u,right:1,bottom:s.map.height}:e=="row"?{left:u,top:0,right:s.map.width,bottom:1}:s,d=e=="column"?l?i.cell:i.header_cell:e=="row"?a?i.cell:i.header_cell:i.cell;s.map.cellsInRect(c).forEach(f=>{const h=f+s.tableStart,p=o.doc.nodeAt(h);p&&o.setNodeMarkup(h,d,p.attrs)}),r(o)}return!0}}Lf("row",{useDeprecatedLogic:!0});Lf("column",{useDeprecatedLogic:!0});const Qme=Lf("cell",{useDeprecatedLogic:!0});function Yme(e,t){if(t<0){const n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let r=e.index(-1)-1,i=e.before();r>=0;r--){const s=e.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const n=e.node(-1);for(let r=e.indexAfter(-1),i=e.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function uR(e){return function(t,n){if(!ai(t))return!1;const r=Yme(fy(t),e);if(r==null)return!1;if(n){const i=t.doc.resolve(r);n(t.tr.setSelection(he.between(i,Ame(i))).scrollIntoView())}return!0}}function Xme(e,t){const n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function xp(e,t){const n=e.selection;if(!(n instanceof et))return!1;if(t){const r=e.tr,i=gn(e.schema).cell.createAndFill().content;n.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new te(i,0,0))}),r.docChanged&&t(r)}return!0}function Zme(e){if(e.size===0)return null;let{content:t,openStart:n,openEnd:r}=e;for(;t.childCount==1&&(n>0&&r>0||t.child(0).type.spec.tableRole=="table");)n--,r--,t=t.child(0).content;const i=t.child(0),s=i.type.spec.tableRole,o=i.type.schema,a=[];if(s=="row")for(let l=0;l<t.childCount;l++){let u=t.child(l).content;const c=l?0:Math.max(0,n-1),d=l<t.childCount-1?0:Math.max(0,r-1);(c||d)&&(u=jw(gn(o).row,new te(u,c,d)).content),a.push(u)}else if(s=="cell"||s=="header_cell")a.push(n||r?jw(gn(o).row,new te(t,n,r)).content:t);else return null;return ege(o,a)}function ege(e,t){const n=[];for(let i=0;i<t.length;i++){const s=t[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:a,colspan:l}=s.child(o).attrs;for(let u=i;u<i+a;u++)n[u]=(n[u]||0)+l}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=t.length&&t.push(V.empty),n[i]<r){const s=gn(e).cell.createAndFill(),o=[];for(let a=n[i];a<r;a++)o.push(s);t[i]=t[i].append(V.from(o))}return{height:t.length,width:r,rows:t}}function jw(e,t){const n=e.createAndFill();return new DS(n).replace(0,n.content.size,t).doc}function tge({width:e,height:t,rows:n},r,i){if(e!=r){const s=[],o=[];for(let a=0;a<n.length;a++){const l=n[a],u=[];for(let c=s[a]||0,d=0;c<r;d++){let f=l.child(d%l.childCount);c+f.attrs.colspan>r&&(f=f.type.createChecked(cl(f.attrs,f.attrs.colspan,c+f.attrs.colspan-r),f.content)),u.push(f),c+=f.attrs.colspan;for(let h=1;h<f.attrs.rowspan;h++)s[a+h]=(s[a+h]||0)+f.attrs.colspan}o.push(V.from(u))}n=o,e=r}if(t!=i){const s=[];for(let o=0,a=0;o<i;o++,a++){const l=[],u=n[a%t];for(let c=0;c<u.childCount;c++){let d=u.child(c);o+d.attrs.rowspan>i&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,i-d.attrs.rowspan)},d.content)),l.push(d)}s.push(V.from(l))}n=s,t=i}return{width:e,height:t,rows:n}}function nge(e,t,n,r,i,s,o){const a=e.doc.type.schema,l=gn(a);let u,c;if(i>t.width)for(let d=0,f=0;d<t.height;d++){const h=n.child(d);f+=h.nodeSize;const p=[];let m;h.lastChild==null||h.lastChild.type==l.cell?m=u||(u=l.cell.createAndFill()):m=c||(c=l.header_cell.createAndFill());for(let g=t.width;g<i;g++)p.push(m);e.insert(e.mapping.slice(o).map(f-1+r),p)}if(s>t.height){const d=[];for(let p=0,m=(t.height-1)*t.width;p<Math.max(t.width,i);p++){const g=p>=t.width?!1:n.nodeAt(t.map[m+p]).type==l.header_cell;d.push(g?c||(c=l.header_cell.createAndFill()):u||(u=l.cell.createAndFill()))}const f=l.row.create(null,V.from(d)),h=[];for(let p=t.height;p<s;p++)h.push(f);e.insert(e.mapping.slice(o).map(r+n.nodeSize-2),h)}return!!(u||c)}function cR(e,t,n,r,i,s,o,a){if(o==0||o==t.height)return!1;let l=!1;for(let u=i;u<s;u++){const c=o*t.width+u,d=t.map[c];if(t.map[c-t.width]==d){l=!0;const f=n.nodeAt(d),{top:h,left:p}=t.findCell(d);e.setNodeMarkup(e.mapping.slice(a).map(d+r),null,{...f.attrs,rowspan:o-h}),e.insert(e.mapping.slice(a).map(t.positionAt(o,p,n)),f.type.createAndFill({...f.attrs,rowspan:h+f.attrs.rowspan-o})),u+=f.attrs.colspan-1}}return l}function dR(e,t,n,r,i,s,o,a){if(o==0||o==t.width)return!1;let l=!1;for(let u=i;u<s;u++){const c=u*t.width+o,d=t.map[c];if(t.map[c-1]==d){l=!0;const f=n.nodeAt(d),h=t.colCount(d),p=e.mapping.slice(a).map(d+r);e.setNodeMarkup(p,null,cl(f.attrs,o-h,f.attrs.colspan-(o-h))),e.insert(p+f.nodeSize,f.type.createAndFill(cl(f.attrs,0,o-h))),u+=f.attrs.rowspan-1}}return l}function fR(e,t,n,r,i){let s=n?e.doc.nodeAt(n-1):e.doc;if(!s)throw new Error("No table found");let o=kt.get(s);const{top:a,left:l}=r,u=l+i.width,c=a+i.height,d=e.tr;let f=0;function h(){if(s=n?d.doc.nodeAt(n-1):d.doc,!s)throw new Error("No table found");o=kt.get(s),f=d.mapping.maps.length}nge(d,o,s,n,u,c,f)&&h(),cR(d,o,s,n,l,u,a,f)&&h(),cR(d,o,s,n,l,u,c,f)&&h(),dR(d,o,s,n,a,c,l,f)&&h(),dR(d,o,s,n,a,c,u,f)&&h();for(let p=a;p<c;p++){const m=o.positionAt(p,l,s),g=o.positionAt(p,u,s);d.replace(d.mapping.slice(f).map(m+n),d.mapping.slice(f).map(g+n),new te(i.rows[p-a],0,0))}h(),d.setSelection(new et(d.doc.resolve(n+o.positionAt(a,l,s)),d.doc.resolve(n+o.positionAt(c-1,u-1,s)))),t(d)}const rge=WS({ArrowLeft:wp("horiz",-1),ArrowRight:wp("horiz",1),ArrowUp:wp("vert",-1),ArrowDown:wp("vert",1),"Shift-ArrowLeft":kp("horiz",-1),"Shift-ArrowRight":kp("horiz",1),"Shift-ArrowUp":kp("vert",-1),"Shift-ArrowDown":kp("vert",1),Backspace:xp,"Mod-Backspace":xp,Delete:xp,"Mod-Delete":xp});function om(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function wp(e,t){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof et)return om(n,r,ye.near(s.$headCell,t));if(e!="horiz"&&!s.empty)return!1;const o=H8(i,e,t);if(o==null)return!1;if(e=="horiz")return om(n,r,ye.near(n.doc.resolve(s.head+t),t));{const a=n.doc.resolve(o),l=L8(a,e,t);let u;return l?u=ye.near(l,1):t<0?u=ye.near(n.doc.resolve(a.before(-1)),-1):u=ye.near(n.doc.resolve(a.after(-1)),1),om(n,r,u)}}}function kp(e,t){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof et)o=s;else{const l=H8(i,e,t);if(l==null)return!1;o=new et(n.doc.resolve(l))}const a=L8(o.$headCell,e,t);return a?om(n,r,new et(o.$anchorCell,a)):!1}}function ige(e,t){const n=e.state.doc,r=ul(n.resolve(t));return r?(e.dispatch(e.state.tr.setSelection(new et(r))),!0):!1}function sge(e,t,n){if(!ai(e.state))return!1;let r=Zme(n);const i=e.state.selection;if(i instanceof et){r||(r={width:1,height:1,rows:[V.from(jw(gn(e.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),a=kt.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=tge(r,a.right-a.left,a.bottom-a.top),fR(e.state,e.dispatch,o,a,r),!0}else if(r){const s=fy(e.state),o=s.start(-1);return fR(e.state,e.dispatch,o,kt.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function oge(e,t){var n;if(t.button!=0||t.ctrlKey||t.metaKey)return;const r=hR(e,t.target);let i;if(t.shiftKey&&e.state.selection instanceof et)s(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&(i=ul(e.state.selection.$anchor))!=null&&((n=kb(e,t))===null||n===void 0?void 0:n.pos)!=i.pos)s(i,t),t.preventDefault();else if(!r)return;function s(l,u){let c=kb(e,u);const d=Zs.getState(e.state)==null;if(!c||!p2(l,c))if(d)c=l;else return;const f=new et(l,c);if(d||!e.state.selection.eq(f)){const h=e.state.tr.setSelection(f);d&&h.setMeta(Zs,l.pos),e.dispatch(h)}}function o(){e.root.removeEventListener("mouseup",o),e.root.removeEventListener("dragstart",o),e.root.removeEventListener("mousemove",a),Zs.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(Zs,-1))}function a(l){const u=l,c=Zs.getState(e.state);let d;if(c!=null)d=e.state.doc.resolve(c);else if(hR(e,u.target)!=r&&(d=kb(e,t),!d))return o();d&&s(d,u)}e.root.addEventListener("mouseup",o),e.root.addEventListener("dragstart",o),e.root.addEventListener("mousemove",a)}function H8(e,t,n){if(!(e.state.selection instanceof he))return null;const{$head:r}=e.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const o=r.before(i),a=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(a)?o:null}}return null}function hR(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function kb(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});if(!n)return null;let{inside:r,pos:i}=n;return r>=0&&ul(e.state.doc.resolve(r))||ul(e.state.doc.resolve(i))}var age=class{constructor(t,n){this.node=t,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Lw(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,Lw(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function Lw(e,t,n,r,i,s){let o=0,a=!0,l=t.firstChild;const u=e.firstChild;if(u){for(let d=0,f=0;d<u.childCount;d++){const{colspan:h,colwidth:p}=u.child(d).attrs;for(let m=0;m<h;m++,f++){const g=i==f?s:p&&p[m],b=g?g+"px":"";if(o+=g||r,g||(a=!1),l)l.style.width!=b&&(l.style.width=b),l=l.nextSibling;else{const v=document.createElement("col");v.style.width=b,t.appendChild(v)}}}for(;l;){var c;const d=l.nextSibling;(c=l.parentNode)===null||c===void 0||c.removeChild(l),l=d}a?(n.style.width=o+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=o+"px")}}const tr=new mt("tableColumnResizing");function lge({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:r=age,lastColumnResizable:i=!0}={}){const s=new tt({key:tr,state:{init(o,a){var l;const u=(l=s.spec)===null||l===void 0||(l=l.props)===null||l===void 0?void 0:l.nodeViews,c=gn(a.schema).table.name;return r&&u&&(u[c]=(d,f)=>new r(d,n,f)),new uge(-1,!1)},apply(o,a){return a.apply(o)}},props:{attributes:o=>{const a=tr.getState(o);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,a)=>{cge(o,a,e,i)},mouseleave:o=>{dge(o)},mousedown:(o,a)=>{fge(o,a,t,n)}},decorations:o=>{const a=tr.getState(o);if(a&&a.activeHandle>-1)return yge(o,a.activeHandle)},nodeViews:{}}});return s}var uge=class am{constructor(t,n){this.activeHandle=t,this.dragging=n}apply(t){const n=this,r=t.getMeta(tr);if(r&&r.setHandle!=null)return new am(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new am(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){let i=t.mapping.map(n.activeHandle,-1);return Iw(t.doc.resolve(i))||(i=-1),new am(i,n.dragging)}return n}};function cge(e,t,n,r){if(!e.editable)return;const i=tr.getState(e.state);if(i&&!i.dragging){const s=pge(t.target);let o=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();t.clientX-a<=n?o=pR(e,t,"left",n):l-t.clientX<=n&&(o=pR(e,t,"right",n))}if(o!=i.activeHandle){if(!r&&o!==-1){const a=e.state.doc.resolve(o),l=a.node(-1),u=kt.get(l),c=a.start(-1);if(u.colCount(a.pos-c)+a.nodeAfter.attrs.colspan-1==u.width-1)return}W8(e,o)}}}function dge(e){if(!e.editable)return;const t=tr.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&W8(e,-1)}function fge(e,t,n,r){var i;if(!e.editable)return!1;const s=(i=e.dom.ownerDocument.defaultView)!==null&&i!==void 0?i:window,o=tr.getState(e.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const a=e.state.doc.nodeAt(o.activeHandle),l=hge(e,o.activeHandle,a.attrs);e.dispatch(e.state.tr.setMeta(tr,{setDragging:{startX:t.clientX,startWidth:l}}));function u(d){s.removeEventListener("mouseup",u),s.removeEventListener("mousemove",c);const f=tr.getState(e.state);f!=null&&f.dragging&&(mge(e,f.activeHandle,mR(f.dragging,d,n)),e.dispatch(e.state.tr.setMeta(tr,{setDragging:null})))}function c(d){if(!d.which)return u(d);const f=tr.getState(e.state);if(f&&f.dragging){const h=mR(f.dragging,d,n);gR(e,f.activeHandle,h,r)}}return gR(e,o.activeHandle,l,r),s.addEventListener("mouseup",u),s.addEventListener("mousemove",c),t.preventDefault(),!0}function hge(e,t,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=e.domAtPos(t);let o=s.node.childNodes[s.offset].offsetWidth,a=n;if(r)for(let l=0;l<n;l++)r[l]&&(o-=r[l],a--);return o/a}function pge(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function pR(e,t,n,r){const i=n=="right"?-r:r,s=e.posAtCoords({left:t.clientX+i,top:t.clientY});if(!s)return-1;const{pos:o}=s,a=ul(e.state.doc.resolve(o));if(!a)return-1;if(n=="right")return a.pos;const l=kt.get(a.node(-1)),u=a.start(-1),c=l.map.indexOf(a.pos-u);return c%l.width==0?-1:u+l.map[c-1]}function mR(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function W8(e,t){e.dispatch(e.state.tr.setMeta(tr,{setHandle:t}))}function mge(e,t,n){const r=e.state.doc.resolve(t),i=r.node(-1),s=kt.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let u=0;u<s.height;u++){const c=u*s.width+a;if(u&&s.map[c]==s.map[c-s.width])continue;const d=s.map[c],f=i.nodeAt(d).attrs,h=f.colspan==1?0:a-s.colCount(d);if(f.colwidth&&f.colwidth[h]==n)continue;const p=f.colwidth?f.colwidth.slice():gge(f.colspan);p[h]=n,l.setNodeMarkup(o+d,null,{...f,colwidth:p})}l.docChanged&&e.dispatch(l)}function gR(e,t,n,r){const i=e.state.doc.resolve(t),s=i.node(-1),o=i.start(-1),a=kt.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let l=e.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&Lw(s,l.firstChild,l,r,a,n)}function gge(e){return Array(e).fill(0)}function yge(e,t){const n=[],r=e.doc.resolve(t),i=r.node(-1);if(!i)return Qe.empty;const s=kt.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1;for(let u=0;u<s.height;u++){const c=a+u*s.width;if((a==s.width-1||s.map[c]!=s.map[c+1])&&(u==0||s.map[c]!=s.map[c-s.width])){var l;const d=s.map[c],f=o+d+i.nodeAt(d).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",!((l=tr.getState(e))===null||l===void 0)&&l.dragging&&n.push(Ht.node(o+d,o+d+i.nodeAt(d).nodeSize,{class:"column-resize-dragging"})),n.push(Ht.widget(f,h))}}return Qe.create(e.doc,n)}function bge({allowTableNodeSelection:e=!1}={}){return new tt({key:Zs,state:{init(){return null},apply(t,n){const r=t.getMeta(Zs);if(r!=null)return r==-1?null:r;if(n==null||!t.docChanged)return n;const{deleted:i,pos:s}=t.mapping.mapResult(n);return i?null:s}},props:{decorations:Nme,handleDOMEvents:{mousedown:oge},createSelectionBetween(t){return Zs.getState(t.state)!=null?t.state.selection:null},handleTripleClick:ige,handleKeyDown:rge,handlePaste:sge},appendTransaction(t,n,r){return Ome(r,B8(r,n),e)}})}var m2=$e.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{var t,n;const r=e.getAttribute("colwidth"),i=r?r.split(",").map(s=>parseInt(s,10)):null;if(!i){const s=(t=e.closest("table"))==null?void 0:t.querySelectorAll("colgroup > col"),o=Array.from(((n=e.parentElement)==null?void 0:n.children)||[]).indexOf(e);if(o&&o>-1&&s&&s[o]){const a=s[o].getAttribute("width");return a?[parseInt(a,10)]:null}}return i}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:e}){return["td",ut(this.options.HTMLAttributes,e),0]}}),g2=$e.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",ut(this.options.HTMLAttributes,e),0]}}),y2=$e.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",ut(this.options.HTMLAttributes,e),0]}});function Fw(e,t){return t?["width",`${Math.max(t,e)}px`]:["min-width",`${e}px`]}function yR(e,t,n,r,i,s){var o;let a=0,l=!0,u=t.firstChild;const c=e.firstChild;if(c!==null)for(let f=0,h=0;f<c.childCount;f+=1){const{colspan:p,colwidth:m}=c.child(f).attrs;for(let g=0;g<p;g+=1,h+=1){const b=i===h?s:m&&m[g],v=b?`${b}px`:"";if(a+=b||r,b||(l=!1),u){if(u.style.width!==v){const[x,k]=Fw(r,b);u.style.setProperty(x,k)}u=u.nextSibling}else{const x=document.createElement("col"),[k,S]=Fw(r,b);x.style.setProperty(k,S),t.appendChild(x)}}}for(;u;){const f=u.nextSibling;(o=u.parentNode)==null||o.removeChild(u),u=f}const d=e.attrs.style&&typeof e.attrs.style=="string"&&/\bwidth\s*:/i.test(e.attrs.style);l&&!d?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}var vge=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),e.attrs.style&&(this.table.style.cssText=e.attrs.style),this.colgroup=this.table.appendChild(document.createElement("colgroup")),yR(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,yR(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){const t=e.target,n=this.dom.contains(t),r=this.contentDOM.contains(t);return!!(n&&!r&&(e.type==="attributes"||e.type==="childList"||e.type==="characterData"))}};function xge(e,t,n,r){let i=0,s=!0;const o=[],a=e.firstChild;if(!a)return{};for(let d=0,f=0;d<a.childCount;d+=1){const{colspan:h,colwidth:p}=a.child(d).attrs;for(let m=0;m<h;m+=1,f+=1){const g=n===f?r:p&&p[m];i+=g||t,g||(s=!1);const[b,v]=Fw(t,g);o.push(["col",{style:`${b}: ${v}`}])}}const l=s?`${i}px`:"",u=s?"":`${i}px`;return{colgroup:["colgroup",{},...o],tableWidth:l,tableMinWidth:u}}function bR(e,t){return e.createAndFill()}function wge(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach(n=>{const r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}function kge(e,t,n,r,i){const s=wge(e),o=[],a=[];for(let u=0;u<n;u+=1){const c=bR(s.cell);if(c&&a.push(c),r){const d=bR(s.header_cell);d&&o.push(d)}}const l=[];for(let u=0;u<t;u+=1)l.push(s.row.createChecked(null,r&&u===0?o:a));return s.table.createChecked(null,l)}function Cge(e){return e instanceof et}var Cp=({editor:e})=>{const{selection:t}=e.state;if(!Cge(t))return!1;let n=0;const r=PL(t.ranges[0].$from,s=>s.type.name==="table");return r==null||r.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===t.ranges.length?(e.commands.deleteTable(),!0):!1},Sge="";function Ege(e){return(e||"").replace(/\s+/g," ").trim()}function Tge(e,t,n={}){var r;const i=(r=n.cellLineSeparator)!=null?r:Sge;if(!e||!e.content||e.content.length===0)return"";const s=[];e.content.forEach(p=>{const m=[];p.content&&p.content.forEach(g=>{let b="";g.content&&Array.isArray(g.content)&&g.content.length>1?b=g.content.map(S=>t.renderChildren(S)).join(i):b=g.content?t.renderChildren(g.content):"";const v=Ege(b),x=g.type==="tableHeader";m.push({text:v,isHeader:x})}),s.push(m)});const o=s.reduce((p,m)=>Math.max(p,m.length),0);if(o===0)return"";const a=new Array(o).fill(0);s.forEach(p=>{var m;for(let g=0;g<o;g+=1){const v=(((m=p[g])==null?void 0:m.text)||"").length;v>a[g]&&(a[g]=v),a[g]<3&&(a[g]=3)}});const l=(p,m)=>p+" ".repeat(Math.max(0,m-p.length)),u=s[0],c=u.some(p=>p.isHeader);let d=`
`;const f=new Array(o).fill(0).map((p,m)=>c&&u[m]&&u[m].text||"");return d+=`| ${f.map((p,m)=>l(p,a[m])).join(" | ")} |
`,d+=`| ${a.map(p=>"-".repeat(Math.max(3,p))).join(" | ")} |
`,(c?s.slice(1):s).forEach(p=>{d+=`| ${new Array(o).fill(0).map((m,g)=>l(p[g]&&p[g].text||"",a[g])).join(" | ")} |
`}),d}var _ge=Tge,b2=$e.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:vge,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:e,HTMLAttributes:t}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=xge(e,this.options.cellMinWidth),s=t.style;function o(){return s||(r?`width: ${r}`:`min-width: ${i}`)}const a=["table",ut(this.options.HTMLAttributes,t,{style:o()}),n,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},a]:a},parseMarkdown:(e,t)=>{const n=[];if(e.header){const r=[];e.header.forEach(i=>{r.push(t.createNode("tableHeader",{},[{type:"paragraph",content:t.parseInline(i.tokens)}]))}),n.push(t.createNode("tableRow",{},r))}return e.rows&&e.rows.forEach(r=>{const i=[];r.forEach(s=>{i.push(t.createNode("tableCell",{},[{type:"paragraph",content:t.parseInline(s.tokens)}]))}),n.push(t.createNode("tableRow",{},i))}),t.createNode("table",void 0,n)},renderMarkdown:(e,t)=>_ge(e,t),addCommands(){return{insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const o=kge(s.schema,e,t,n);if(i){const a=r.selection.from+1;r.replaceSelectionWith(o).scrollIntoView().setSelection(he.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>Lme(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>Fme(e,t),deleteColumn:()=>({state:e,dispatch:t})=>zme(e,t),addRowBefore:()=>({state:e,dispatch:t})=>Vme(e,t),addRowAfter:()=>({state:e,dispatch:t})=>Ume(e,t),deleteRow:()=>({state:e,dispatch:t})=>Wme(e,t),deleteTable:()=>({state:e,dispatch:t})=>Xme(e,t),mergeCells:()=>({state:e,dispatch:t})=>oR(e,t),splitCell:()=>({state:e,dispatch:t})=>aR(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>Lf("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>Lf("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>Qme(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>oR(e,t)?!0:aR(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:r})=>Gme(e,t)(n,r),goToNextCell:()=>({state:e,dispatch:t})=>uR(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>uR(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&B8(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){const r=et.create(t.doc,e.anchorCell,e.headCell);t.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Cp,"Mod-Backspace":Cp,Delete:Cp,"Mod-Delete":Cp}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[lge({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],bge({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){const t={name:e.name,options:e.options,storage:e.storage};return{tableRole:ze(ue(e,"tableRole",t))}}});ot.create({name:"tableKit",addExtensions(){const e=[];return this.options.table!==!1&&e.push(b2.configure(this.options.table)),this.options.tableCell!==!1&&e.push(m2.configure(this.options.tableCell)),this.options.tableHeader!==!1&&e.push(g2.configure(this.options.tableHeader)),this.options.tableRow!==!1&&e.push(y2.configure(this.options.tableRow)),e}});var Age=bme;const vR={};function Pge(e){let t=vR[e];if(t)return t;t=vR[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function sc(e,t){typeof t!="string"&&(t=sc.defaultChars);const n=Pge(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let s=0,o=r.length;s<o;s+=3){const a=parseInt(r.slice(s+1,s+3),16);if(a<128){i+=n[a];continue}if((a&224)===192&&s+3<o){const l=parseInt(r.slice(s+4,s+6),16);if((l&192)===128){const u=a<<6&1984|l&63;u<128?i+="":i+=String.fromCharCode(u),s+=3;continue}}if((a&240)===224&&s+6<o){const l=parseInt(r.slice(s+4,s+6),16),u=parseInt(r.slice(s+7,s+9),16);if((l&192)===128&&(u&192)===128){const c=a<<12&61440|l<<6&4032|u&63;c<2048||c>=55296&&c<=57343?i+="":i+=String.fromCharCode(c),s+=6;continue}}if((a&248)===240&&s+9<o){const l=parseInt(r.slice(s+4,s+6),16),u=parseInt(r.slice(s+7,s+9),16),c=parseInt(r.slice(s+10,s+12),16);if((l&192)===128&&(u&192)===128&&(c&192)===128){let d=a<<18&1835008|l<<12&258048|u<<6&4032|c&63;d<65536||d>1114111?i+="":(d-=65536,i+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),s+=9;continue}}i+=""}return i})}sc.defaultChars=";/?:@&=+$,#";sc.componentChars="";const xR={};function Rge(e){let t=xR[e];if(t)return t;t=xR[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function yh(e,t,n){typeof t!="string"&&(n=t,t=yh.defaultChars),typeof n>"u"&&(n=!0);const r=Rge(t);let i="";for(let s=0,o=e.length;s<o;s++){const a=e.charCodeAt(s);if(n&&a===37&&s+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(s+1,s+3))){i+=e.slice(s,s+3),s+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&s+1<o){const l=e.charCodeAt(s+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(e[s]+e[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(e[s])}return i}yh.defaultChars=";/?:@&=+$,-_.!~*'()#";yh.componentChars="-_.!~*'()";function v2(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Yg(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Nge=/^([a-z0-9.+-]+:)/i,Dge=/:[0-9]*$/,Mge=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Oge=["<",">",'"',"`"," ","\r",`
`,"	"],Ige=["{","}","|","\\","^","`"].concat(Oge),jge=["'"].concat(Ige),wR=["%","/","?",";","#"].concat(jge),kR=["/","?","#"],Lge=255,CR=/^[+a-z0-9A-Z_-]{0,63}$/,Fge=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,SR={javascript:!0,"javascript:":!0},ER={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function x2(e,t){if(e&&e instanceof Yg)return e;const n=new Yg;return n.parse(e,t),n}Yg.prototype.parse=function(e,t){let n,r,i,s=e;if(s=s.trim(),!t&&e.split("#").length===1){const u=Mge.exec(s);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let o=Nge.exec(s);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,s=s.substr(o.length)),(t||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(o&&SR[o])&&(s=s.substr(2),this.slashes=!0)),!SR[o]&&(i||o&&!ER[o])){let u=-1;for(let p=0;p<kR.length;p++)r=s.indexOf(kR[p]),r!==-1&&(u===-1||r<u)&&(u=r);let c,d;u===-1?d=s.lastIndexOf("@"):d=s.lastIndexOf("@",u),d!==-1&&(c=s.slice(0,d),s=s.slice(d+1),this.auth=c),u=-1;for(let p=0;p<wR.length;p++)r=s.indexOf(wR[p]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=s.length),s[u-1]===":"&&u--;const f=s.slice(0,u);s=s.slice(u),this.parseHost(f),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let m=0,g=p.length;m<g;m++){const b=p[m];if(b&&!b.match(CR)){let v="";for(let x=0,k=b.length;x<k;x++)b.charCodeAt(x)>127?v+="x":v+=b[x];if(!v.match(CR)){const x=p.slice(0,m),k=p.slice(m+1),S=b.match(Fge);S&&(x.push(S[1]),k.unshift(S[2])),k.length&&(s=k.join(".")+s),this.hostname=x.join(".");break}}}}this.hostname.length>Lge&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=s.indexOf("#");a!==-1&&(this.hash=s.substr(a),s=s.slice(0,a));const l=s.indexOf("?");return l!==-1&&(this.search=s.substr(l),s=s.slice(0,l)),s&&(this.pathname=s),ER[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Yg.prototype.parseHost=function(e){let t=Dge.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const $ge=Object.freeze(Object.defineProperty({__proto__:null,decode:sc,encode:yh,format:v2,parse:x2},Symbol.toStringTag,{value:"Module"})),q8=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,K8=/[\0-\x1F\x7F-\x9F]/,zge=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,w2=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,G8=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,J8=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Bge=Object.freeze(Object.defineProperty({__proto__:null,Any:q8,Cc:K8,Cf:zge,P:w2,S:G8,Z:J8},Symbol.toStringTag,{value:"Module"})),Vge=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Uge=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Cb;const Hge=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Wge=(Cb=String.fromCodePoint)!==null&&Cb!==void 0?Cb:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function qge(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Hge.get(e))!==null&&t!==void 0?t:e}var Ut;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ut||(Ut={}));const Kge=32;var vo;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(vo||(vo={}));function $w(e){return e>=Ut.ZERO&&e<=Ut.NINE}function Gge(e){return e>=Ut.UPPER_A&&e<=Ut.UPPER_F||e>=Ut.LOWER_A&&e<=Ut.LOWER_F}function Jge(e){return e>=Ut.UPPER_A&&e<=Ut.UPPER_Z||e>=Ut.LOWER_A&&e<=Ut.LOWER_Z||$w(e)}function Qge(e){return e===Ut.EQUALS||Jge(e)}var zt;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(zt||(zt={}));var eo;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(eo||(eo={}));class Yge{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=zt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=eo.Strict}startEntity(t){this.decodeMode=t,this.state=zt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case zt.EntityStart:return t.charCodeAt(n)===Ut.NUM?(this.state=zt.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=zt.NamedEntity,this.stateNamedEntity(t,n));case zt.NumericStart:return this.stateNumericStart(t,n);case zt.NumericDecimal:return this.stateNumericDecimal(t,n);case zt.NumericHex:return this.stateNumericHex(t,n);case zt.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Kge)===Ut.LOWER_X?(this.state=zt.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=zt.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if($w(i)||Gge(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if($w(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ut.SEMI)this.consumed+=1;else if(this.decodeMode===eo.Strict)return 0;return this.emitCodePoint(qge(this.result),this.consumed),this.errors&&(t!==Ut.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&vo.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Xge(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===eo.Attribute&&(s===0||Qge(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&vo.VALUE_LENGTH)>>14,s!==0){if(o===Ut.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==eo.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&vo.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~vo.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case zt.NamedEntity:return this.result!==0&&(this.decodeMode!==eo.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case zt.NumericDecimal:return this.emitNumericEntity(0,2);case zt.NumericHex:return this.emitNumericEntity(0,3);case zt.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case zt.EntityStart:return 0}}}function Q8(e){let t="";const n=new Yge(e,r=>t+=Wge(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const u=n.write(i,a+1);if(u<0){o=a+n.end();break}o=a+u,a=u===0?o+1:o}const l=t+i.slice(o);return t="",l}}function Xge(e,t,n,r){const i=(t&vo.BRANCH_LENGTH)>>7,s=t&vo.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:e[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,u=e[l];if(u<r)o=l+1;else if(u>r)a=l-1;else return e[l+i]}return-1}const Zge=Q8(Vge);Q8(Uge);function Y8(e,t=eo.Legacy){return Zge(e,t)}function e0e(e){return Object.prototype.toString.call(e)}function k2(e){return e0e(e)==="[object String]"}const t0e=Object.prototype.hasOwnProperty;function n0e(e,t){return t0e.call(e,t)}function hy(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function X8(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function C2(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Xg(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const Z8=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,r0e=/&([a-z#][a-z0-9]{1,31});/gi,i0e=new RegExp(Z8.source+"|"+r0e.source,"gi"),s0e=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function o0e(e,t){if(t.charCodeAt(0)===35&&s0e.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return C2(r)?Xg(r):e}const n=Y8(e);return n!==e?n:e}function a0e(e){return e.indexOf("\\")<0?e:e.replace(Z8,"$1")}function oc(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(i0e,function(t,n,r){return n||o0e(t,r)})}const l0e=/[&<>"]/,u0e=/[&<>"]/g,c0e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function d0e(e){return c0e[e]}function Uo(e){return l0e.test(e)?e.replace(u0e,d0e):e}const f0e=/[.?*+^$[\]\\(){}|-]/g;function h0e(e){return e.replace(f0e,"\\$&")}function Ze(e){switch(e){case 9:case 32:return!0}return!1}function Ff(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function $f(e){return w2.test(e)||G8.test(e)}function zf(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function py(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const p0e={mdurl:$ge,ucmicro:Bge},m0e=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:X8,assign:hy,escapeHtml:Uo,escapeRE:h0e,fromCodePoint:Xg,has:n0e,isMdAsciiPunct:zf,isPunctChar:$f,isSpace:Ze,isString:k2,isValidEntityCode:C2,isWhiteSpace:Ff,lib:p0e,normalizeReference:py,unescapeAll:oc,unescapeMd:a0e},Symbol.toStringTag,{value:"Module"}));function g0e(e,t,n){let r,i,s,o;const a=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<a;){if(s=e.src.charCodeAt(e.pos),s===93&&(r--,r===0)){i=!0;break}if(o=e.pos,e.md.inline.skipToken(e),s===91){if(o===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return i&&(u=e.pos),e.pos=l,u}function y0e(e,t,n){let r,i=t;const s={ok:!1,pos:0,str:""};if(e.charCodeAt(i)===60){for(i++;i<n;){if(r=e.charCodeAt(i),r===10||r===60)return s;if(r===62)return s.pos=i+1,s.str=oc(e.slice(t+1,i)),s.ok=!0,s;if(r===92&&i+1<n){i+=2;continue}i++}return s}let o=0;for(;i<n&&(r=e.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(e.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(o++,o>32))return s;if(r===41){if(o===0)break;o--}i++}return t===i||o!==0||(s.str=oc(e.slice(t,i)),s.pos=i,s.ok=!0),s}function b0e(e,t,n,r){let i,s=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(s>=n)return o;let a=e.charCodeAt(s);if(a!==34&&a!==39&&a!==40)return o;t++,s++,a===40&&(a=41),o.marker=a}for(;s<n;){if(i=e.charCodeAt(s),i===o.marker)return o.pos=s+1,o.str+=oc(e.slice(t,s)),o.ok=!0,o;if(i===40&&o.marker===41)return o;i===92&&s+1<n&&s++,s++}return o.can_continue=!0,o.str+=oc(e.slice(t,s)),o}const v0e=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:y0e,parseLinkLabel:g0e,parseLinkTitle:b0e},Symbol.toStringTag,{value:"Module"})),$i={};$i.code_inline=function(e,t,n,r,i){const s=e[t];return"<code"+i.renderAttrs(s)+">"+Uo(s.content)+"</code>"};$i.code_block=function(e,t,n,r,i){const s=e[t];return"<pre"+i.renderAttrs(s)+"><code>"+Uo(e[t].content)+`</code></pre>
`};$i.fence=function(e,t,n,r,i){const s=e[t],o=s.info?oc(s.info).trim():"";let a="",l="";if(o){const c=o.split(/(\s+)/g);a=c[0],l=c.slice(2).join("")}let u;if(n.highlight?u=n.highlight(s.content,a,l)||Uo(s.content):u=Uo(s.content),u.indexOf("<pre")===0)return u+`
`;if(o){const c=s.attrIndex("class"),d=s.attrs?s.attrs.slice():[];c<0?d.push(["class",n.langPrefix+a]):(d[c]=d[c].slice(),d[c][1]+=" "+n.langPrefix+a);const f={attrs:d};return`<pre><code${i.renderAttrs(f)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${u}</code></pre>
`};$i.image=function(e,t,n,r,i){const s=e[t];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,n,r),i.renderToken(e,t,n)};$i.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};$i.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};$i.text=function(e,t){return Uo(e[t].content)};$i.html_block=function(e,t){return e[t].content};$i.html_inline=function(e,t){return e[t].content};function _c(){this.rules=hy({},$i)}_c.prototype.renderAttrs=function(t){let n,r,i;if(!t.attrs)return"";for(i="",n=0,r=t.attrs.length;n<r;n++)i+=" "+Uo(t.attrs[n][0])+'="'+Uo(t.attrs[n][1])+'"';return i};_c.prototype.renderToken=function(t,n,r){const i=t[n];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&t[n-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(s+=" /");let o=!1;if(i.block&&(o=!0,i.nesting===1&&n+1<t.length)){const a=t[n+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(o=!1)}return s+=o?`>
`:">",s};_c.prototype.renderInline=function(e,t,n){let r="";const i=this.rules;for(let s=0,o=e.length;s<o;s++){const a=e[s].type;typeof i[a]<"u"?r+=i[a](e,s,t,n,this):r+=this.renderToken(e,s,t)}return r};_c.prototype.renderInlineAsText=function(e,t,n){let r="";for(let i=0,s=e.length;i<s;i++)switch(e[i].type){case"text":r+=e[i].content;break;case"image":r+=this.renderInlineAsText(e[i].children,t,n);break;case"html_inline":case"html_block":r+=e[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};_c.prototype.render=function(e,t,n){let r="";const i=this.rules;for(let s=0,o=e.length;s<o;s++){const a=e[s].type;a==="inline"?r+=this.renderInline(e[s].children,t,n):typeof i[a]<"u"?r+=i[a](e,s,t,n,this):r+=this.renderToken(e,s,t,n)}return r};function Un(){this.__rules__=[],this.__cache__=null}Un.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Un.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Un.prototype.at=function(e,t,n){const r=this.__find__(e),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Un.prototype.before=function(e,t,n,r){const i=this.__find__(e),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Un.prototype.after=function(e,t,n,r){const i=this.__find__(e),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Un.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Un.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Un.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Un.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Un.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function li(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}li.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===t)return r;return-1};li.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};li.prototype.attrSet=function(t,n){const r=this.attrIndex(t),i=[t,n];r<0?this.attrPush(i):this.attrs[r]=i};li.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};li.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function eF(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}eF.prototype.Token=li;const x0e=/\r\n?|\n/g,w0e=/\0/g;function k0e(e){let t;t=e.src.replace(x0e,`
`),t=t.replace(w0e,""),e.src=t}function C0e(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function S0e(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const i=t[n];i.type==="inline"&&e.md.inline.parse(i.content,e.md,e.env,i.children)}}function E0e(e){return/^<a[>\s]/i.test(e)}function T0e(e){return/^<\/a\s*>/i.test(e)}function _0e(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let i=t[n].children,s=0;for(let o=i.length-1;o>=0;o--){const a=i[o];if(a.type==="link_close"){for(o--;i[o].level!==a.level&&i[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(E0e(a.content)&&s>0&&s--,T0e(a.content)&&s++),!(s>0)&&a.type==="text"&&e.md.linkify.test(a.content)){const l=a.content;let u=e.md.linkify.match(l);const c=[];let d=a.level,f=0;u.length>0&&u[0].index===0&&o>0&&i[o-1].type==="text_special"&&(u=u.slice(1));for(let h=0;h<u.length;h++){const p=u[h].url,m=e.md.normalizeLink(p);if(!e.md.validateLink(m))continue;let g=u[h].text;u[h].schema?u[h].schema==="mailto:"&&!/^mailto:/i.test(g)?g=e.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=e.md.normalizeLinkText(g):g=e.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,"");const b=u[h].index;if(b>f){const S=new e.Token("text","",0);S.content=l.slice(f,b),S.level=d,c.push(S)}const v=new e.Token("link_open","a",1);v.attrs=[["href",m]],v.level=d++,v.markup="linkify",v.info="auto",c.push(v);const x=new e.Token("text","",0);x.content=g,x.level=d,c.push(x);const k=new e.Token("link_close","a",-1);k.level=--d,k.markup="linkify",k.info="auto",c.push(k),f=u[h].lastIndex}if(f<l.length){const h=new e.Token("text","",0);h.content=l.slice(f),h.level=d,c.push(h)}t[n].children=i=X8(i,o,c)}}}}const tF=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,A0e=/\((c|tm|r)\)/i,P0e=/\((c|tm|r)\)/ig,R0e={c:"",r:"",tm:""};function N0e(e,t){return R0e[t.toLowerCase()]}function D0e(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(P0e,N0e)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function M0e(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&tF.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function O0e(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(A0e.test(e.tokens[t].content)&&D0e(e.tokens[t].children),tF.test(e.tokens[t].content)&&M0e(e.tokens[t].children))}const I0e=/['"]/,TR=/['"]/g,_R="";function Sp(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function j0e(e,t){let n;const r=[];for(let i=0;i<e.length;i++){const s=e[i],o=e[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,s.type!=="text")continue;let a=s.content,l=0,u=a.length;e:for(;l<u;){TR.lastIndex=l;const c=TR.exec(a);if(!c)break;let d=!0,f=!0;l=c.index+1;const h=c[0]==="'";let p=32;if(c.index-1>=0)p=a.charCodeAt(c.index-1);else for(n=i-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){p=e[n].content.charCodeAt(e[n].content.length-1);break}let m=32;if(l<u)m=a.charCodeAt(l);else for(n=i+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){m=e[n].content.charCodeAt(0);break}const g=zf(p)||$f(String.fromCharCode(p)),b=zf(m)||$f(String.fromCharCode(m)),v=Ff(p),x=Ff(m);if(x?d=!1:b&&(v||g||(d=!1)),v?f=!1:g&&(x||b||(f=!1)),m===34&&c[0]==='"'&&p>=48&&p<=57&&(f=d=!1),d&&f&&(d=g,f=b),!d&&!f){h&&(s.content=Sp(s.content,c.index,_R));continue}if(f)for(n=r.length-1;n>=0;n--){let k=r[n];if(r[n].level<o)break;if(k.single===h&&r[n].level===o){k=r[n];let S,C;h?(S=t.md.options.quotes[2],C=t.md.options.quotes[3]):(S=t.md.options.quotes[0],C=t.md.options.quotes[1]),s.content=Sp(s.content,c.index,C),e[k.token].content=Sp(e[k.token].content,k.pos,S),l+=C.length-1,k.token===i&&(l+=S.length-1),a=s.content,u=a.length,r.length=n;continue e}}d?r.push({token:i,pos:c.index,single:h,level:o}):f&&h&&(s.content=Sp(s.content,c.index,_R))}}}function L0e(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!I0e.test(e.tokens[t].content)||j0e(e.tokens[t].children,e)}function F0e(e){let t,n;const r=e.tokens,i=r.length;for(let s=0;s<i;s++){if(r[s].type!=="inline")continue;const o=r[s].children,a=o.length;for(t=0;t<a;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<a;t++)o[t].type==="text"&&t+1<a&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const Sb=[["normalize",k0e],["block",C0e],["inline",S0e],["linkify",_0e],["replacements",O0e],["smartquotes",L0e],["text_join",F0e]];function S2(){this.ruler=new Un;for(let e=0;e<Sb.length;e++)this.ruler.push(Sb[e][0],Sb[e][1])}S2.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};S2.prototype.State=eF;function zi(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,o=0,a=0,l=0,u=i.length,c=!1;o<u;o++){const d=i.charCodeAt(o);if(!c)if(Ze(d)){a++,d===9?l+=4-l%4:l++;continue}else c=!0;(d===10||o===u-1)&&(d!==10&&o++,this.bMarks.push(s),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),c=!1,a=0,l=0,s=o+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}zi.prototype.push=function(e,t,n){const r=new li(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};zi.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};zi.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};zi.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Ze(r))break}return t};zi.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Ze(this.src.charCodeAt(--t)))return t+1;return t};zi.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};zi.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};zi.prototype.getLines=function(t,n,r,i){if(t>=n)return"";const s=new Array(n-t);for(let o=0,a=t;a<n;a++,o++){let l=0;const u=this.bMarks[a];let c=u,d;for(a+1<n||i?d=this.eMarks[a]+1:d=this.eMarks[a];c<d&&l<r;){const f=this.src.charCodeAt(c);if(Ze(f))f===9?l+=4-(l+this.bsCount[a])%4:l++;else if(c-u<this.tShift[a])l++;else break;c++}l>r?s[o]=new Array(l-r+1).join(" ")+this.src.slice(c,d):s[o]=this.src.slice(c,d)}return s.join("")};zi.prototype.Token=li;const $0e=65536;function Eb(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function AR(e){const t=[],n=e.length;let r=0,i=e.charCodeAt(r),s=!1,o=0,a="";for(;r<n;)i===124&&(s?(a+=e.substring(o,r-1),o=r):(t.push(a+e.substring(o,r)),a="",o=r+1)),s=i===92,r++,i=e.charCodeAt(r);return t.push(a+e.substring(o)),t}function z0e(e,t,n,r){if(t+2>n)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent||e.sCount[i]-e.blkIndent>=4)return!1;let s=e.bMarks[i]+e.tShift[i];if(s>=e.eMarks[i])return!1;const o=e.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58||s>=e.eMarks[i])return!1;const a=e.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58&&!Ze(a)||o===45&&Ze(a))return!1;for(;s<e.eMarks[i];){const k=e.src.charCodeAt(s);if(k!==124&&k!==45&&k!==58&&!Ze(k))return!1;s++}let l=Eb(e,t+1),u=l.split("|");const c=[];for(let k=0;k<u.length;k++){const S=u[k].trim();if(!S){if(k===0||k===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(S))return!1;S.charCodeAt(S.length-1)===58?c.push(S.charCodeAt(0)===58?"center":"right"):S.charCodeAt(0)===58?c.push("left"):c.push("")}if(l=Eb(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=AR(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const d=u.length;if(d===0||d!==c.length)return!1;if(r)return!0;const f=e.parentType;e.parentType="table";const h=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),m=[t,0];p.map=m;const g=e.push("thead_open","thead",1);g.map=[t,t+1];const b=e.push("tr_open","tr",1);b.map=[t,t+1];for(let k=0;k<u.length;k++){const S=e.push("th_open","th",1);c[k]&&(S.attrs=[["style","text-align:"+c[k]]]);const C=e.push("inline","",0);C.content=u[k].trim(),C.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let v,x=0;for(i=t+2;i<n&&!(e.sCount[i]<e.blkIndent);i++){let k=!1;for(let C=0,E=h.length;C<E;C++)if(h[C](e,i,n,!0)){k=!0;break}if(k||(l=Eb(e,i).trim(),!l)||e.sCount[i]-e.blkIndent>=4||(u=AR(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),x+=d-u.length,x>$0e))break;if(i===t+2){const C=e.push("tbody_open","tbody",1);C.map=v=[t+2,0]}const S=e.push("tr_open","tr",1);S.map=[i,i+1];for(let C=0;C<d;C++){const E=e.push("td_open","td",1);c[C]&&(E.attrs=[["style","text-align:"+c[C]]]);const P=e.push("inline","",0);P.content=u[C]?u[C].trim():"",P.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return v&&(e.push("tbody_close","tbody",-1),v[1]=i),e.push("table_close","table",-1),m[1]=i,e.parentType=f,e.line=i,!0}function B0e(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,i=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,i=r;continue}break}e.line=i;const s=e.push("code_block","code",0);return s.content=e.getLines(t,i,4+e.blkIndent,!1)+`
`,s.map=[t,e.line],!0}function V0e(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||i+3>s)return!1;const o=e.src.charCodeAt(i);if(o!==126&&o!==96)return!1;let a=i;i=e.skipChars(i,o);let l=i-a;if(l<3)return!1;const u=e.src.slice(a,i),c=e.src.slice(i,s);if(o===96&&c.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let d=t,f=!1;for(;d++,!(d>=n||(i=a=e.bMarks[d]+e.tShift[d],s=e.eMarks[d],i<s&&e.sCount[d]<e.blkIndent));)if(e.src.charCodeAt(i)===o&&!(e.sCount[d]-e.blkIndent>=4)&&(i=e.skipChars(i,o),!(i-a<l)&&(i=e.skipSpaces(i),!(i<s)))){f=!0;break}l=e.sCount[t],e.line=d+(f?1:0);const h=e.push("fence","code",0);return h.info=c,h.content=e.getLines(t+1,d,l,!0),h.markup=u,h.map=[t,e.line],!0}function U0e(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],l=[],u=[],c=[],d=e.md.block.ruler.getRules("blockquote"),f=e.parentType;e.parentType="blockquote";let h=!1,p;for(p=t;p<n;p++){const x=e.sCount[p]<e.blkIndent;if(i=e.bMarks[p]+e.tShift[p],s=e.eMarks[p],i>=s)break;if(e.src.charCodeAt(i++)===62&&!x){let S=e.sCount[p]+1,C,E;e.src.charCodeAt(i)===32?(i++,S++,E=!1,C=!0):e.src.charCodeAt(i)===9?(C=!0,(e.bsCount[p]+S)%4===3?(i++,S++,E=!1):E=!0):C=!1;let P=S;for(a.push(e.bMarks[p]),e.bMarks[p]=i;i<s;){const R=e.src.charCodeAt(i);if(Ze(R))R===9?P+=4-(P+e.bsCount[p]+(E?1:0))%4:P++;else break;i++}h=i>=s,l.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(C?1:0),u.push(e.sCount[p]),e.sCount[p]=P-S,c.push(e.tShift[p]),e.tShift[p]=i-e.bMarks[p];continue}if(h)break;let k=!1;for(let S=0,C=d.length;S<C;S++)if(d[S](e,p,n,!0)){k=!0;break}if(k){e.lineMax=p,e.blkIndent!==0&&(a.push(e.bMarks[p]),l.push(e.bsCount[p]),c.push(e.tShift[p]),u.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}a.push(e.bMarks[p]),l.push(e.bsCount[p]),c.push(e.tShift[p]),u.push(e.sCount[p]),e.sCount[p]=-1}const m=e.blkIndent;e.blkIndent=0;const g=e.push("blockquote_open","blockquote",1);g.markup=">";const b=[t,0];g.map=b,e.md.block.tokenize(e,t,p);const v=e.push("blockquote_close","blockquote",-1);v.markup=">",e.lineMax=o,e.parentType=f,b[1]=e.line;for(let x=0;x<c.length;x++)e.bMarks[x+t]=a[x],e.tShift[x+t]=c[x],e.sCount[x+t]=u[x],e.bsCount[x+t]=l[x];return e.blkIndent=m,!0}function H0e(e,t,n,r){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(s++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;s<i;){const u=e.src.charCodeAt(s++);if(u!==o&&!Ze(u))return!1;u===o&&a++}if(a<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(a+1).join(String.fromCharCode(o)),!0}function PR(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const s=e.src.charCodeAt(r);if(!Ze(s))return-1}return r}function RR(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let i=n;if(i+1>=r)return-1;let s=e.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=r)return-1;if(s=e.src.charCodeAt(i++),s>=48&&s<=57){if(i-n>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<r&&(s=e.src.charCodeAt(i),!Ze(s))?-1:i}function W0e(e,t){const n=e.level+2;for(let r=t+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function q0e(e,t,n,r){let i,s,o,a,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let c=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(c=!0);let d,f,h;if((h=RR(e,l))>=0){if(d=!0,o=e.bMarks[l]+e.tShift[l],f=Number(e.src.slice(o,h-1)),c&&f!==1)return!1}else if((h=PR(e,l))>=0)d=!1;else return!1;if(c&&e.skipSpaces(h)>=e.eMarks[l])return!1;if(r)return!0;const p=e.src.charCodeAt(h-1),m=e.tokens.length;d?(a=e.push("ordered_list_open","ol",1),f!==1&&(a.attrs=[["start",f]])):a=e.push("bullet_list_open","ul",1);const g=[l,0];a.map=g,a.markup=String.fromCharCode(p);let b=!1;const v=e.md.block.ruler.getRules("list"),x=e.parentType;for(e.parentType="list";l<n;){s=h,i=e.eMarks[l];const k=e.sCount[l]+h-(e.bMarks[l]+e.tShift[l]);let S=k;for(;s<i;){const B=e.src.charCodeAt(s);if(B===9)S+=4-(S+e.bsCount[l])%4;else if(B===32)S++;else break;s++}const C=s;let E;C>=i?E=1:E=S-k,E>4&&(E=1);const P=k+E;a=e.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const R=[l,0];a.map=R,d&&(a.info=e.src.slice(o,h-1));const A=e.tight,L=e.tShift[l],I=e.sCount[l],U=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=P,e.tight=!0,e.tShift[l]=C-e.bMarks[l],e.sCount[l]=S,C>=i&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||b)&&(u=!1),b=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=U,e.tShift[l]=L,e.sCount[l]=I,e.tight=A,a=e.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),l=e.line,R[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let F=!1;for(let B=0,q=v.length;B<q;B++)if(v[B](e,l,n,!0)){F=!0;break}if(F)break;if(d){if(h=RR(e,l),h<0)break;o=e.bMarks[l]+e.tShift[l]}else if(h=PR(e,l),h<0)break;if(p!==e.src.charCodeAt(h-1))break}return d?a=e.push("ordered_list_close","ol",-1):a=e.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),g[1]=l,e.line=l,e.parentType=x,u&&W0e(e,m),!0}function K0e(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==91)return!1;function a(v){const x=e.lineMax;if(v>=x||e.isEmpty(v))return null;let k=!1;if(e.sCount[v]-e.blkIndent>3&&(k=!0),e.sCount[v]<0&&(k=!0),!k){const E=e.md.block.ruler.getRules("reference"),P=e.parentType;e.parentType="reference";let R=!1;for(let A=0,L=E.length;A<L;A++)if(E[A](e,v,x,!0)){R=!0;break}if(e.parentType=P,R)return null}const S=e.bMarks[v]+e.tShift[v],C=e.eMarks[v];return e.src.slice(S,C+1)}let l=e.src.slice(i,s+1);s=l.length;let u=-1;for(i=1;i<s;i++){const v=l.charCodeAt(i);if(v===91)return!1;if(v===93){u=i;break}else if(v===10){const x=a(o);x!==null&&(l+=x,s=l.length,o++)}else if(v===92&&(i++,i<s&&l.charCodeAt(i)===10)){const x=a(o);x!==null&&(l+=x,s=l.length,o++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(i=u+2;i<s;i++){const v=l.charCodeAt(i);if(v===10){const x=a(o);x!==null&&(l+=x,s=l.length,o++)}else if(!Ze(v))break}const c=e.md.helpers.parseLinkDestination(l,i,s);if(!c.ok)return!1;const d=e.md.normalizeLink(c.str);if(!e.md.validateLink(d))return!1;i=c.pos;const f=i,h=o,p=i;for(;i<s;i++){const v=l.charCodeAt(i);if(v===10){const x=a(o);x!==null&&(l+=x,s=l.length,o++)}else if(!Ze(v))break}let m=e.md.helpers.parseLinkTitle(l,i,s);for(;m.can_continue;){const v=a(o);if(v===null)break;l+=v,i=s,s=l.length,o++,m=e.md.helpers.parseLinkTitle(l,i,s,m)}let g;for(i<s&&p!==i&&m.ok?(g=m.str,i=m.pos):(g="",i=f,o=h);i<s;){const v=l.charCodeAt(i);if(!Ze(v))break;i++}if(i<s&&l.charCodeAt(i)!==10&&g)for(g="",i=f,o=h;i<s;){const v=l.charCodeAt(i);if(!Ze(v))break;i++}if(i<s&&l.charCodeAt(i)!==10)return!1;const b=py(l.slice(1,u));return b?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[b]>"u"&&(e.env.references[b]={title:g,href:d}),e.line=o),!0):!1}const G0e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],J0e="[a-zA-Z_:][a-zA-Z0-9:._-]*",Q0e="[^\"'=<>`\\x00-\\x20]+",Y0e="'[^']*'",X0e='"[^"]*"',Z0e="(?:"+Q0e+"|"+Y0e+"|"+X0e+")",eye="(?:\\s+"+J0e+"(?:\\s*=\\s*"+Z0e+")?)",nF="<[A-Za-z][A-Za-z0-9\\-]*"+eye+"*\\s*\\/?>",rF="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",tye="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",nye="<[?][\\s\\S]*?[?]>",rye="<![A-Za-z][^>]*>",iye="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",sye=new RegExp("^(?:"+nF+"|"+rF+"|"+tye+"|"+nye+"|"+rye+"|"+iye+")"),oye=new RegExp("^(?:"+nF+"|"+rF+")"),Dl=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+G0e.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(oye.source+"\\s*$"),/^$/,!1]];function aye(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(i)!==60)return!1;let o=e.src.slice(i,s),a=0;for(;a<Dl.length&&!Dl[a][0].test(o);a++);if(a===Dl.length)return!1;if(r)return Dl[a][2];let l=t+1;if(!Dl[a][1].test(o)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(i=e.bMarks[l]+e.tShift[l],s=e.eMarks[l],o=e.src.slice(i,s),Dl[a][1].test(o)){o.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function lye(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(i);if(o!==35||i>=s)return!1;let a=1;for(o=e.src.charCodeAt(++i);o===35&&i<s&&a<=6;)a++,o=e.src.charCodeAt(++i);if(a>6||i<s&&!Ze(o))return!1;if(r)return!0;s=e.skipSpacesBack(s,i);const l=e.skipCharsBack(s,35,i);l>i&&Ze(e.src.charCodeAt(l-1))&&(s=l),e.line=t+1;const u=e.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[t,e.line];const c=e.push("inline","",0);c.content=e.src.slice(i,s).trim(),c.map=[t,e.line],c.children=[];const d=e.push("heading_close","h"+String(a),-1);return d.markup="########".slice(0,a),!0}function uye(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let s=0,o,a=t+1;for(;a<n&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3)continue;if(e.sCount[a]>=e.blkIndent){let h=e.bMarks[a]+e.tShift[a];const p=e.eMarks[a];if(h<p&&(o=e.src.charCodeAt(h),(o===45||o===61)&&(h=e.skipChars(h,o),h=e.skipSpaces(h),h>=p))){s=o===61?1:2;break}}if(e.sCount[a]<0)continue;let f=!1;for(let h=0,p=r.length;h<p;h++)if(r[h](e,a,n,!0)){f=!0;break}if(f)break}if(!s)return!1;const l=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a+1;const u=e.push("heading_open","h"+String(s),1);u.markup=String.fromCharCode(o),u.map=[t,e.line];const c=e.push("inline","",0);c.content=l,c.map=[t,e.line-1],c.children=[];const d=e.push("heading_close","h"+String(s),-1);return d.markup=String.fromCharCode(o),e.parentType=i,!0}function cye(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let s=t+1;for(e.parentType="paragraph";s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3||e.sCount[s]<0)continue;let u=!1;for(let c=0,d=r.length;c<d;c++)if(r[c](e,s,n,!0)){u=!0;break}if(u)break}const o=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s;const a=e.push("paragraph_open","p",1);a.map=[t,e.line];const l=e.push("inline","",0);return l.content=o,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}const Ep=[["table",z0e,["paragraph","reference"]],["code",B0e],["fence",V0e,["paragraph","reference","blockquote","list"]],["blockquote",U0e,["paragraph","reference","blockquote","list"]],["hr",H0e,["paragraph","reference","blockquote","list"]],["list",q0e,["paragraph","reference","blockquote"]],["reference",K0e],["html_block",aye,["paragraph","reference","blockquote"]],["heading",lye,["paragraph","reference","blockquote"]],["lheading",uye],["paragraph",cye]];function my(){this.ruler=new Un;for(let e=0;e<Ep.length;e++)this.ruler.push(Ep[e][0],Ep[e][1],{alt:(Ep[e][2]||[]).slice()})}my.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),i=r.length,s=e.md.options.maxNesting;let o=t,a=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=s){e.line=n;break}const l=e.line;let u=!1;for(let c=0;c<i;c++)if(u=r[c](e,o,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),o=e.line,o<n&&e.isEmpty(o)&&(a=!0,o++,e.line=o)}};my.prototype.parse=function(e,t,n,r){if(!e)return;const i=new this.State(e,t,n,r);this.tokenize(i,i.line,i.lineMax)};my.prototype.State=zi;function bh(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}bh.prototype.pushPending=function(){const e=new li("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};bh.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new li(e,t,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};bh.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let s=e;for(;s<n&&this.src.charCodeAt(s)===r;)s++;const o=s-e,a=s<n?this.src.charCodeAt(s):32,l=zf(i)||$f(String.fromCharCode(i)),u=zf(a)||$f(String.fromCharCode(a)),c=Ff(i),d=Ff(a),f=!d&&(!u||c||l),h=!c&&(!l||d||u);return{can_open:f&&(t||!h||l),can_close:h&&(t||!f||u),length:o}};bh.prototype.Token=li;function dye(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function fye(e,t){let n=e.pos;for(;n<e.posMax&&!dye(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const hye=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function pye(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const i=e.pending.match(hye);if(!i)return!1;const s=i[1],o=e.md.linkify.matchAtStart(e.src.slice(n-s.length));if(!o)return!1;let a=o.url;if(a.length<=s.length)return!1;let l=a.length;for(;l>0&&a.charCodeAt(l-1)===42;)l--;l!==a.length&&(a=a.slice(0,l));const u=e.md.normalizeLink(a);if(!e.md.validateLink(u))return!1;if(!t){e.pending=e.pending.slice(0,-s.length);const c=e.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(a);const f=e.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return e.pos+=a.length-s.length,!0}function mye(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,i=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&e.pending.charCodeAt(s-1)===32;)s--;e.pending=e.pending.slice(0,s),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<i&&Ze(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const E2=[];for(let e=0;e<256;e++)E2.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){E2[e.charCodeAt(0)]=1});function gye(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=e.src.charCodeAt(n);if(i===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(i=e.src.charCodeAt(n),!!Ze(i));)n++;return e.pos=n,!0}let s=e.src[n];if(i>=55296&&i<=56319&&n+1<r){const a=e.src.charCodeAt(n+1);a>=56320&&a<=57343&&(s+=e.src[n+1],n++)}const o="\\"+s;if(!t){const a=e.push("text_special","",0);i<256&&E2[i]!==0?a.content=s:a.content=o,a.markup=o,a.info="escape"}return e.pos=n+1,!0}function yye(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const i=n;n++;const s=e.posMax;for(;n<s&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(i,n),a=o.length;if(e.backticksScanned&&(e.backticks[a]||0)<=i)return t||(e.pending+=o),e.pos+=a,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<s&&e.src.charCodeAt(l)===96;)l++;const c=l-u;if(c===a){if(!t){const d=e.push("code_inline","code",0);d.markup=o,d.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[c]=u}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=a,!0}function bye(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const i=e.scanDelims(e.pos,!0);let s=i.length;const o=String.fromCharCode(r);if(s<2)return!1;let a;s%2&&(a=e.push("text","",0),a.content=o,s--);for(let l=0;l<s;l+=2)a=e.push("text","",0),a.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0}function NR(e,t){let n;const r=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];if(o.marker!==126||o.end===-1)continue;const a=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[a.token-1].type==="text"&&e.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const s=r.pop();let o=s+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,s!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[s],e.tokens[s]=n)}}function vye(e){const t=e.tokens_meta,n=e.tokens_meta.length;NR(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&NR(e,t[r].delimiters)}const iF={tokenize:bye,postProcess:vye};function xye(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const i=e.scanDelims(e.pos,r===42);for(let s=0;s<i.length;s++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return e.pos+=i.length,!0}function DR(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const i=t[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=t[i.end],o=r>0&&t[r-1].end===i.end+1&&t[r-1].marker===i.marker&&t[r-1].token===i.token-1&&t[i.end+1].token===s.token+1,a=String.fromCharCode(i.marker),l=e.tokens[i.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?a+a:a,l.content="";const u=e.tokens[s.token];u.type=o?"strong_close":"em_close",u.tag=o?"strong":"em",u.nesting=-1,u.markup=o?a+a:a,u.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[i.end+1].token].content="",r--)}}function wye(e){const t=e.tokens_meta,n=e.tokens_meta.length;DR(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&DR(e,t[r].delimiters)}const sF={tokenize:xye,postProcess:wye};function kye(e,t){let n,r,i,s,o="",a="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const c=e.pos,d=e.posMax,f=e.pos+1,h=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(h<0)return!1;let p=h+1;if(p<d&&e.src.charCodeAt(p)===40){for(u=!1,p++;p<d&&(n=e.src.charCodeAt(p),!(!Ze(n)&&n!==10));p++);if(p>=d)return!1;if(l=p,i=e.md.helpers.parseLinkDestination(e.src,p,e.posMax),i.ok){for(o=e.md.normalizeLink(i.str),e.md.validateLink(o)?p=i.pos:o="",l=p;p<d&&(n=e.src.charCodeAt(p),!(!Ze(n)&&n!==10));p++);if(i=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<d&&l!==p&&i.ok)for(a=i.str,p=i.pos;p<d&&(n=e.src.charCodeAt(p),!(!Ze(n)&&n!==10));p++);}(p>=d||e.src.charCodeAt(p)!==41)&&(u=!0),p++}if(u){if(typeof e.env.references>"u")return!1;if(p<d&&e.src.charCodeAt(p)===91?(l=p+1,p=e.md.helpers.parseLinkLabel(e,p),p>=0?r=e.src.slice(l,p++):p=h+1):p=h+1,r||(r=e.src.slice(f,h)),s=e.env.references[py(r)],!s)return e.pos=c,!1;o=s.href,a=s.title}if(!t){e.pos=f,e.posMax=h;const m=e.push("link_open","a",1),g=[["href",o]];m.attrs=g,a&&g.push(["title",a]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=d,!0}function Cye(e,t){let n,r,i,s,o,a,l,u,c="";const d=e.pos,f=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const h=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if(s=p+1,s<f&&e.src.charCodeAt(s)===40){for(s++;s<f&&(n=e.src.charCodeAt(s),!(!Ze(n)&&n!==10));s++);if(s>=f)return!1;for(u=s,a=e.md.helpers.parseLinkDestination(e.src,s,e.posMax),a.ok&&(c=e.md.normalizeLink(a.str),e.md.validateLink(c)?s=a.pos:c=""),u=s;s<f&&(n=e.src.charCodeAt(s),!(!Ze(n)&&n!==10));s++);if(a=e.md.helpers.parseLinkTitle(e.src,s,e.posMax),s<f&&u!==s&&a.ok)for(l=a.str,s=a.pos;s<f&&(n=e.src.charCodeAt(s),!(!Ze(n)&&n!==10));s++);else l="";if(s>=f||e.src.charCodeAt(s)!==41)return e.pos=d,!1;s++}else{if(typeof e.env.references>"u")return!1;if(s<f&&e.src.charCodeAt(s)===91?(u=s+1,s=e.md.helpers.parseLinkLabel(e,s),s>=0?i=e.src.slice(u,s++):s=p+1):s=p+1,i||(i=e.src.slice(h,p)),o=e.env.references[py(i)],!o)return e.pos=d,!1;c=o.href,l=o.title}if(!t){r=e.src.slice(h,p);const m=[];e.md.inline.parse(r,e.md,e.env,m);const g=e.push("image","img",0),b=[["src",c],["alt",""]];g.attrs=b,g.children=m,g.content=r,l&&b.push(["title",l])}return e.pos=s,e.posMax=f,!0}const Sye=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Eye=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function Tye(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,i=e.posMax;for(;;){if(++n>=i)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const s=e.src.slice(r+1,n);if(Eye.test(s)){const o=e.md.normalizeLink(s);if(!e.md.validateLink(o))return!1;if(!t){const a=e.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(s);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=s.length+2,!0}if(Sye.test(s)){const o=e.md.normalizeLink("mailto:"+s);if(!e.md.validateLink(o))return!1;if(!t){const a=e.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(s);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=s.length+2,!0}return!1}function _ye(e){return/^<a[>\s]/i.test(e)}function Aye(e){return/^<\/a\s*>/i.test(e)}function Pye(e){const t=e|32;return t>=97&&t<=122}function Rye(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=e.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!Pye(i))return!1;const s=e.src.slice(r).match(sye);if(!s)return!1;if(!t){const o=e.push("html_inline","",0);o.content=s[0],_ye(o.content)&&e.linkLevel++,Aye(o.content)&&e.linkLevel--}return e.pos+=s[0].length,!0}const Nye=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Dye=/^&([a-z][a-z0-9]{1,31});/i;function Mye(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const s=e.src.slice(n).match(Nye);if(s){if(!t){const o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),a=e.push("text_special","",0);a.content=C2(o)?Xg(o):Xg(65533),a.markup=s[0],a.info="entity"}return e.pos+=s[0].length,!0}}else{const s=e.src.slice(n).match(Dye);if(s){const o=Y8(s[0]);if(o!==s[0]){if(!t){const a=e.push("text_special","",0);a.content=o,a.markup=s[0],a.info="entity"}return e.pos+=s[0].length,!0}}}return!1}function MR(e){const t={},n=e.length;if(!n)return;let r=0,i=-2;const s=[];for(let o=0;o<n;o++){const a=e[o];if(s.push(0),(e[r].marker!==a.marker||i!==a.token-1)&&(r=o),i=a.token,a.length=a.length||0,!a.close)continue;t.hasOwnProperty(a.marker)||(t[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[a.marker][(a.open?3:0)+a.length%3];let u=r-s[r]-1,c=u;for(;u>l;u-=s[u]+1){const d=e[u];if(d.marker===a.marker&&d.open&&d.end<0){let f=!1;if((d.close||a.open)&&(d.length+a.length)%3===0&&(d.length%3!==0||a.length%3!==0)&&(f=!0),!f){const h=u>0&&!e[u-1].open?s[u-1]+1:0;s[o]=o-u+h,s[u]=h,a.open=!1,d.end=o,d.close=!1,c=-1,i=-2;break}}}c!==-1&&(t[a.marker][(a.open?3:0)+(a.length||0)%3]=c)}}function Oye(e){const t=e.tokens_meta,n=e.tokens_meta.length;MR(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&MR(t[r].delimiters)}function Iye(e){let t,n,r=0;const i=e.tokens,s=e.tokens.length;for(t=n=0;t<s;t++)i[t].nesting<0&&r--,i[t].level=r,i[t].nesting>0&&r++,i[t].type==="text"&&t+1<s&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}const Tb=[["text",fye],["linkify",pye],["newline",mye],["escape",gye],["backticks",yye],["strikethrough",iF.tokenize],["emphasis",sF.tokenize],["link",kye],["image",Cye],["autolink",Tye],["html_inline",Rye],["entity",Mye]],_b=[["balance_pairs",Oye],["strikethrough",iF.postProcess],["emphasis",sF.postProcess],["fragments_join",Iye]];function vh(){this.ruler=new Un;for(let e=0;e<Tb.length;e++)this.ruler.push(Tb[e][0],Tb[e][1]);this.ruler2=new Un;for(let e=0;e<_b.length;e++)this.ruler2.push(_b[e][0],_b[e][1])}vh.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,i=e.md.options.maxNesting,s=e.cache;if(typeof s[t]<"u"){e.pos=s[t];return}let o=!1;if(e.level<i){for(let a=0;a<r;a++)if(e.level++,o=n[a](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,s[t]=e.pos};vh.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,i=e.md.options.maxNesting;for(;e.pos<r;){const s=e.pos;let o=!1;if(e.level<i){for(let a=0;a<n;a++)if(o=t[a](e,!1),o){if(s>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};vh.prototype.parse=function(e,t,n,r){const i=new this.State(e,t,n,r);this.tokenize(i);const s=this.ruler2.getRules(""),o=s.length;for(let a=0;a<o;a++)s[a](i)};vh.prototype.State=bh;function jye(e){const t={};e=e||{},t.src_Any=q8.source,t.src_Cc=K8.source,t.src_Z=J8.source,t.src_P=w2.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function zw(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function gy(e){return Object.prototype.toString.call(e)}function Lye(e){return gy(e)==="[object String]"}function Fye(e){return gy(e)==="[object Object]"}function $ye(e){return gy(e)==="[object RegExp]"}function OR(e){return gy(e)==="[object Function]"}function zye(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const oF={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Bye(e){return Object.keys(e||{}).reduce(function(t,n){return t||oF.hasOwnProperty(n)},!1)}const Vye={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},Uye="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Hye="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Wye(e){e.__index__=-1,e.__text_cache__=""}function qye(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function IR(){return function(e,t){t.normalize(e)}}function Zg(e){const t=e.re=jye(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(Uye),n.push(t.src_xn),t.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const i=[];e.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(e.__schemas__).forEach(function(a){const l=e.__schemas__[a];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[a]=u,Fye(l)){$ye(l.validate)?u.validate=qye(l.validate):OR(l.validate)?u.validate=l.validate:s(a,l),OR(l.normalize)?u.normalize=l.normalize:l.normalize?s(a,l):u.normalize=IR();return}if(Lye(l)){i.push(a);return}s(a,l)}),i.forEach(function(a){e.__compiled__[e.__schemas__[a]]&&(e.__compiled__[a].validate=e.__compiled__[e.__schemas__[a]].validate,e.__compiled__[a].normalize=e.__compiled__[e.__schemas__[a]].normalize)}),e.__compiled__[""]={validate:null,normalize:IR()};const o=Object.keys(e.__compiled__).filter(function(a){return a.length>0&&e.__compiled__[a]}).map(zye).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Wye(e)}function Kye(e,t){const n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function Bw(e,t){const n=new Kye(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function ar(e,t){if(!(this instanceof ar))return new ar(e,t);t||Bye(e)&&(t=e,e={}),this.__opts__=zw({},oF,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=zw({},Vye,e),this.__compiled__={},this.__tlds__=Hye,this.__tlds_replaced__=!1,this.re={},Zg(this)}ar.prototype.add=function(t,n){return this.__schemas__[t]=n,Zg(this),this};ar.prototype.set=function(t){return this.__opts__=zw(this.__opts__,t),this};ar.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,i,s,o,a,l,u,c;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(s=this.testSchemaAt(t,n[2],l.lastIndex),s){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=t.indexOf("@"),c>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};ar.prototype.pretest=function(t){return this.re.pretest.test(t)};ar.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};ar.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Bw(this,r)),r=this.__last_index__);let i=r?t.slice(r):t;for(;this.test(i);)n.push(Bw(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};ar.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Bw(this,0)):null};ar.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),Zg(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Zg(this),this)};ar.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};ar.prototype.onCompile=function(){};const Eu=2147483647,Si=36,T2=1,Bf=26,Gye=38,Jye=700,aF=72,lF=128,uF="-",Qye=/^xn--/,Yye=/[^\0-\x7F]/,Xye=/[\x2E\u3002\uFF0E\uFF61]/g,Zye={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ab=Si-T2,Ei=Math.floor,Pb=String.fromCharCode;function Ks(e){throw new RangeError(Zye[e])}function e1e(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function cF(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(Xye,".");const i=e.split("."),s=e1e(i,t).join(".");return r+s}function dF(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=e.charCodeAt(n++);(s&64512)==56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}const t1e=e=>String.fromCodePoint(...e),n1e=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Si},jR=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},fF=function(e,t,n){let r=0;for(e=n?Ei(e/Jye):e>>1,e+=Ei(e/t);e>Ab*Bf>>1;r+=Si)e=Ei(e/Ab);return Ei(r+(Ab+1)*e/(e+Gye))},hF=function(e){const t=[],n=e.length;let r=0,i=lF,s=aF,o=e.lastIndexOf(uF);o<0&&(o=0);for(let a=0;a<o;++a)e.charCodeAt(a)>=128&&Ks("not-basic"),t.push(e.charCodeAt(a));for(let a=o>0?o+1:0;a<n;){const l=r;for(let c=1,d=Si;;d+=Si){a>=n&&Ks("invalid-input");const f=n1e(e.charCodeAt(a++));f>=Si&&Ks("invalid-input"),f>Ei((Eu-r)/c)&&Ks("overflow"),r+=f*c;const h=d<=s?T2:d>=s+Bf?Bf:d-s;if(f<h)break;const p=Si-h;c>Ei(Eu/p)&&Ks("overflow"),c*=p}const u=t.length+1;s=fF(r-l,u,l==0),Ei(r/u)>Eu-i&&Ks("overflow"),i+=Ei(r/u),r%=u,t.splice(r++,0,i)}return String.fromCodePoint(...t)},pF=function(e){const t=[];e=dF(e);const n=e.length;let r=lF,i=0,s=aF;for(const l of e)l<128&&t.push(Pb(l));const o=t.length;let a=o;for(o&&t.push(uF);a<n;){let l=Eu;for(const c of e)c>=r&&c<l&&(l=c);const u=a+1;l-r>Ei((Eu-i)/u)&&Ks("overflow"),i+=(l-r)*u,r=l;for(const c of e)if(c<r&&++i>Eu&&Ks("overflow"),c===r){let d=i;for(let f=Si;;f+=Si){const h=f<=s?T2:f>=s+Bf?Bf:f-s;if(d<h)break;const p=d-h,m=Si-h;t.push(Pb(jR(h+p%m,0))),d=Ei(p/m)}t.push(Pb(jR(d,0))),s=fF(i,u,a===o),i=0,++a}++i,++r}return t.join("")},r1e=function(e){return cF(e,function(t){return Qye.test(t)?hF(t.slice(4).toLowerCase()):t})},i1e=function(e){return cF(e,function(t){return Yye.test(t)?"xn--"+pF(t):t})},mF={version:"2.3.1",ucs2:{decode:dF,encode:t1e},decode:hF,encode:pF,toASCII:i1e,toUnicode:r1e},s1e={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},o1e={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},a1e={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},l1e={default:s1e,zero:o1e,commonmark:a1e},u1e=/^(vbscript|javascript|file|data):/,c1e=/^data:image\/(gif|png|jpeg|webp);/;function d1e(e){const t=e.trim().toLowerCase();return u1e.test(t)?c1e.test(t):!0}const gF=["http:","https:","mailto:"];function f1e(e){const t=x2(e,!0);if(t.hostname&&(!t.protocol||gF.indexOf(t.protocol)>=0))try{t.hostname=mF.toASCII(t.hostname)}catch{}return yh(v2(t))}function h1e(e){const t=x2(e,!0);if(t.hostname&&(!t.protocol||gF.indexOf(t.protocol)>=0))try{t.hostname=mF.toUnicode(t.hostname)}catch{}return sc(v2(t),sc.defaultChars+"%")}function Hn(e,t){if(!(this instanceof Hn))return new Hn(e,t);t||k2(e)||(t=e||{},e="default"),this.inline=new vh,this.block=new my,this.core=new S2,this.renderer=new _c,this.linkify=new ar,this.validateLink=d1e,this.normalizeLink=f1e,this.normalizeLinkText=h1e,this.utils=m0e,this.helpers=hy({},v0e),this.options={},this.configure(e),t&&this.set(t)}Hn.prototype.set=function(e){return hy(this.options,e),this};Hn.prototype.configure=function(e){const t=this;if(k2(e)){const n=e;if(e=l1e[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Hn.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Hn.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Hn.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Hn.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Hn.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Hn.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Hn.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const p1e=new AS({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(e){return["h"+e.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>({params:e.getAttribute("data-params")||""})}],toDOM(e){return["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")}}}],toDOM(e){return["ol",{start:e.attrs.order==1?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:e=>({tight:e.hasAttribute("data-tight")})}],toDOM(e){return["ul",{"data-tight":e.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM(e){return["img",e.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:e=>e.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM(e){return["a",e.attrs]}},code:{code:!0,parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function m1e(e,t){if(e.isText&&t.isText&&Ve.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)}class g1e{constructor(t,n){this.schema=t,this.tokenHandlers=n,this.stack=[{type:t.topNodeType,attrs:null,content:[],marks:Ve.none}]}top(){return this.stack[this.stack.length-1]}push(t){this.stack.length&&this.top().content.push(t)}addText(t){if(!t)return;let n=this.top(),r=n.content,i=r[r.length-1],s=this.schema.text(t,n.marks),o;i&&(o=m1e(i,s))?r[r.length-1]=o:r.push(s)}openMark(t){let n=this.top();n.marks=t.addToSet(n.marks)}closeMark(t){let n=this.top();n.marks=t.removeFromSet(n.marks)}parseTokens(t){for(let n=0;n<t.length;n++){let r=t[n],i=this.tokenHandlers[r.type];if(!i)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");i(this,r,t,n)}}addNode(t,n,r){let i=this.top(),s=t.createAndFill(n,r,i?i.marks:[]);return s?(this.push(s),s):null}openNode(t,n){this.stack.push({type:t,attrs:n,content:[],marks:Ve.none})}closeNode(){let t=this.stack.pop();return this.addNode(t.type,t.attrs,t.content)}}function Kc(e,t,n,r){return e.getAttrs?e.getAttrs(t,n,r):e.attrs instanceof Function?e.attrs(t):e.attrs}function Rb(e,t){return e.noCloseToken||t=="code_inline"||t=="code_block"||t=="fence"}function LR(e){return e[e.length-1]==`
`?e.slice(0,e.length-1):e}function Nb(){}function y1e(e,t){let n=Object.create(null);for(let r in t){let i=t[r];if(i.block){let s=e.nodeType(i.block);Rb(i,r)?n[r]=(o,a,l,u)=>{o.openNode(s,Kc(i,a,l,u)),o.addText(LR(a.content)),o.closeNode()}:(n[r+"_open"]=(o,a,l,u)=>o.openNode(s,Kc(i,a,l,u)),n[r+"_close"]=o=>o.closeNode())}else if(i.node){let s=e.nodeType(i.node);n[r]=(o,a,l,u)=>o.addNode(s,Kc(i,a,l,u))}else if(i.mark){let s=e.marks[i.mark];Rb(i,r)?n[r]=(o,a,l,u)=>{o.openMark(s.create(Kc(i,a,l,u))),o.addText(LR(a.content)),o.closeMark(s)}:(n[r+"_open"]=(o,a,l,u)=>o.openMark(s.create(Kc(i,a,l,u))),n[r+"_close"]=o=>o.closeMark(s))}else if(i.ignore)Rb(i,r)?n[r]=Nb:(n[r+"_open"]=Nb,n[r+"_close"]=Nb);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(i))}return n.text=(r,i)=>r.addText(i.content),n.inline=(r,i)=>r.parseTokens(i.children),n.softbreak=n.softbreak||(r=>r.addText(" ")),n}let b1e=class{constructor(t,n,r){this.schema=t,this.tokenizer=n,this.tokens=r,this.tokenHandlers=y1e(t,r)}parse(t,n={}){let r=new g1e(this.schema,this.tokenHandlers),i;r.parseTokens(this.tokenizer.parse(t,n));do i=r.closeNode();while(r.stack.length);return i||this.schema.topNodeType.createAndFill()}};function FR(e,t){for(;++t<e.length;)if(e[t].type!="list_item_open")return e[t].hidden;return!1}new b1e(p1e,Hn("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(e,t,n)=>({tight:FR(t,n)})},ordered_list:{block:"ordered_list",getAttrs:(e,t,n)=>({order:+e.attrGet("start")||1,tight:FR(t,n)})},heading:{block:"heading",getAttrs:e=>({level:+e.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:e=>({params:e.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:e=>({src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});const v1e={open:"",close:"",mixable:!0};let x1e=class{constructor(t,n,r={}){this.nodes=t,this.marks=n,this.options=r}serialize(t,n={}){n=Object.assign({},this.options,n);let r=new yF(this.nodes,this.marks,n);return r.renderContent(t),r.out}};const Bi=new x1e({blockquote(e,t){e.wrapBlock("> ",null,t,()=>e.renderContent(t))},code_block(e,t){const n=t.textContent.match(/`{3,}/gm),r=n?n.sort().slice(-1)[0]+"`":"```";e.write(r+(t.attrs.params||"")+`
`),e.text(t.textContent,!1),e.write(`
`),e.write(r),e.closeBlock(t)},heading(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t,!1),e.closeBlock(t)},horizontal_rule(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},bullet_list(e,t){e.renderList(t,"  ",()=>(t.attrs.bullet||"*")+" ")},ordered_list(e,t){let n=t.attrs.order||1,r=String(n+t.childCount-1).length,i=e.repeat(" ",r+2);e.renderList(t,i,s=>{let o=String(n+s);return e.repeat(" ",r-o.length)+o+". "})},list_item(e,t){e.renderContent(t)},paragraph(e,t){e.renderInline(t),e.closeBlock(t)},image(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+t.attrs.src.replace(/[\(\)]/g,"\\$&")+(t.attrs.title?' "'+t.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(e,t,n,r){for(let i=r+1;i<n.childCount;i++)if(n.child(i).type!=t.type){e.write(`\\
`);return}},text(e,t){e.text(t.text,!e.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open(e,t,n,r){return e.inAutolink=w1e(t,n,r),e.inAutolink?"<":"["},close(e,t,n,r){let{inAutolink:i}=e;return e.inAutolink=void 0,i?">":"]("+t.attrs.href.replace(/[\(\)"]/g,"\\$&")+(t.attrs.title?` "${t.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open(e,t,n,r){return $R(n.child(r),-1)},close(e,t,n,r){return $R(n.child(r-1),1)},escape:!1}});function $R(e,t){let n=/`+/g,r,i=0;if(e.isText)for(;r=n.exec(e.text);)i=Math.max(i,r[0].length);let s=i>0&&t>0?" `":"`";for(let o=0;o<i;o++)s+="`";return i>0&&t<0&&(s+=" "),s}function w1e(e,t,n){if(e.attrs.title||!/^\w+:/.test(e.attrs.href))return!1;let r=t.child(n);return!r.isText||r.text!=e.attrs.href||r.marks[r.marks.length-1]!=e?!1:n==t.childCount-1||!e.isInSet(t.child(n+1).marks)}let yF=class{constructor(t,n,r){this.nodes=t,this.marks=n,this.options=r,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(t=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),t>1){let n=this.delim,r=/\s+$/.exec(n);r&&(n=n.slice(0,n.length-r[0].length));for(let i=1;i<t;i++)this.out+=n+`
`}this.closed=null}}getMark(t){let n=this.marks[t];if(!n){if(this.options.strict!==!1)throw new Error(`Mark type \`${t}\` not supported by Markdown renderer`);n=v1e}return n}wrapBlock(t,n,r,i){let s=this.delim;this.write(n??t),this.delim+=t,i(),this.delim=s,this.closeBlock(r)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(t){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),t&&(this.out+=t)}closeBlock(t){this.closed=t}text(t,n=!0){let r=t.split(`
`);for(let i=0;i<r.length;i++)this.write(),!n&&r[i][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=n?this.esc(r[i],this.atBlockStart):r[i],i!=r.length-1&&(this.out+=`
`)}render(t,n,r){if(this.nodes[t.type.name])this.nodes[t.type.name](this,t,n,r);else{if(this.options.strict!==!1)throw new Error("Token type `"+t.type.name+"` not supported by Markdown renderer");t.type.isLeaf||(t.type.inlineContent?this.renderInline(t):this.renderContent(t),t.isBlock&&this.closeBlock(t))}}renderContent(t){t.forEach((n,r,i)=>this.render(n,t,i))}renderInline(t,n=!0){this.atBlockStart=n;let r=[],i="",s=(o,a,l)=>{let u=o?o.marks:[];o&&o.type.name===this.options.hardBreakNodeName&&(u=u.filter(m=>{if(l+1==t.childCount)return!1;let g=t.child(l+1);return m.isInSet(g.marks)&&(!g.isText||/\S/.test(g.text))}));let c=i;if(i="",o&&o.isText&&u.some(m=>{let g=this.getMark(m.type.name);return g&&g.expelEnclosingWhitespace&&!m.isInSet(r)})){let[m,g,b]=/^(\s*)(.*)$/m.exec(o.text);g&&(c+=g,o=b?o.withText(b):null,o||(u=r))}if(o&&o.isText&&u.some(m=>{let g=this.getMark(m.type.name);return g&&g.expelEnclosingWhitespace&&!this.isMarkAhead(t,l+1,m)})){let[m,g,b]=/^(.*?)(\s*)$/m.exec(o.text);b&&(i=b,o=g?o.withText(g):null,o||(u=r))}let d=u.length?u[u.length-1]:null,f=d&&this.getMark(d.type.name).escape===!1,h=u.length-(f?1:0);e:for(let m=0;m<h;m++){let g=u[m];if(!this.getMark(g.type.name).mixable)break;for(let b=0;b<r.length;b++){let v=r[b];if(!this.getMark(v.type.name).mixable)break;if(g.eq(v)){m>b?u=u.slice(0,b).concat(g).concat(u.slice(b,m)).concat(u.slice(m+1,h)):b>m&&(u=u.slice(0,m).concat(u.slice(m+1,b)).concat(g).concat(u.slice(b,h)));continue e}}}let p=0;for(;p<Math.min(r.length,h)&&u[p].eq(r[p]);)++p;for(;p<r.length;)this.text(this.markString(r.pop(),!1,t,l),!1);if(c&&this.text(c),o){for(;r.length<h;){let m=u[r.length];r.push(m),this.text(this.markString(m,!0,t,l),!1),this.atBlockStart=!1}f&&o.isText?this.text(this.markString(d,!0,t,l)+o.text+this.markString(d,!1,t,l+1),!1):this.render(o,t,l),this.atBlockStart=!1}o!=null&&o.isText&&o.nodeSize>0&&(this.atBlockStart=!1)};t.forEach(s),s(null,0,t.childCount),this.atBlockStart=!1}renderList(t,n,r){this.closed&&this.closed.type==t.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let i=typeof t.attrs.tight<"u"?t.attrs.tight:this.options.tightLists,s=this.inTightList;this.inTightList=i,t.forEach((o,a,l)=>{l&&i&&this.flushClose(1),this.wrapBlock(n,r(l),t,()=>this.render(o,t,l))}),this.inTightList=s}esc(t,n=!1){return t=t.replace(/[`*\\~\[\]_]/g,(r,i)=>r=="_"&&i>0&&i+1<t.length&&t[i-1].match(/\w/)&&t[i+1].match(/\w/)?r:"\\"+r),n&&(t=t.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(t=t.replace(this.options.escapeExtraCharacters,"\\$&")),t}quote(t){let n=t.indexOf('"')==-1?'""':t.indexOf("'")==-1?"''":"()";return n[0]+t+n[1]}repeat(t,n){let r="";for(let i=0;i<n;i++)r+=t;return r}markString(t,n,r,i){let s=this.getMark(t.type.name),o=n?s.open:s.close;return typeof o=="string"?o:o(this,t,r,i)}getEnclosingWhitespace(t){return{leading:(t.match(/^(\s+)/)||[void 0])[0],trailing:(t.match(/(\s+)$/)||[void 0])[0]}}isMarkAhead(t,n,r){for(;;n++){if(n>=t.childCount)return!1;let i=t.child(n);if(i.type.name!=this.options.hardBreakNodeName)return r.isInSet(i.marks);n++}}};var Vw=!0,bF=!1,vF=!1,k1e=function(e,t){t&&(Vw=!t.enabled,bF=!!t.label,vF=!!t.labelAfter),e.core.ruler.after("inline","github-task-lists",function(n){for(var r=n.tokens,i=2;i<r.length;i++)S1e(r,i)&&(E1e(r[i],n.Token),zR(r[i-2],"class","task-list-item"+(Vw?"":" enabled")),zR(r[C1e(r,i-2)],"class","contains-task-list"))})};function zR(e,t,n){var r=e.attrIndex(t),i=[t,n];r<0?e.attrPush(i):e.attrs[r]=i}function C1e(e,t){for(var n=e[t].level-1,r=t-1;r>=0;r--)if(e[r].level===n)return r;return-1}function S1e(e,t){return R1e(e[t])&&N1e(e[t-1])&&D1e(e[t-2])&&M1e(e[t])}function E1e(e,t){if(e.children.unshift(T1e(e,t)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),bF)if(vF){e.children.pop();var n="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+n+'">',e.children.push(P1e(e.content,n,t))}else e.children.unshift(_1e(t)),e.children.push(A1e(t))}function T1e(e,t){var n=new t("html_inline","",0),r=Vw?' disabled="" ':"";return e.content.indexOf("[ ] ")===0?n.content='<input class="task-list-item-checkbox"'+r+'type="checkbox">':(e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0)&&(n.content='<input class="task-list-item-checkbox" checked=""'+r+'type="checkbox">'),n}function _1e(e){var t=new e("html_inline","",0);return t.content="<label>",t}function A1e(e){var t=new e("html_inline","",0);return t.content="</label>",t}function P1e(e,t,n){var r=new n("html_inline","",0);return r.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",r.attrs=[{for:t}],r}function R1e(e){return e.type==="inline"}function N1e(e){return e.type==="paragraph_open"}function D1e(e){return e.type==="list_item_open"}function M1e(e){return e.content.indexOf("[ ] ")===0||e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0}const O1e=Gf(k1e);var I1e=Object.defineProperty,j1e=(e,t,n)=>t in e?I1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,e0=(e,t,n)=>(j1e(e,typeof t!="symbol"?t+"":t,n),n);const L1e=ot.create({name:"markdownTightLists",addOptions:()=>({tight:!0,tightClass:"tight",listTypes:["bulletList","orderedList"]}),addGlobalAttributes(){return[{types:this.options.listTypes,attributes:{tight:{default:this.options.tight,parseHTML:e=>e.getAttribute("data-tight")==="true"||!e.querySelector("p"),renderHTML:e=>({class:e.tight?this.options.tightClass:null,"data-tight":e.tight?"true":null})}}}]},addCommands(){var e=this;return{toggleTight:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return n=>{let{editor:r,commands:i}=n;function s(o){if(!r.isActive(o))return!1;const a=r.getAttributes(o);return i.updateAttributes(o,{tight:t??!(a!=null&&a.tight)})}return e.options.listTypes.some(o=>s(o))}}}}}),BR=Hn();function xF(e,t){return BR.inline.State.prototype.scanDelims.call({src:e,posMax:e.length}),new BR.inline.State(e,null,null,[]).scanDelims(t,!0)}function wF(e,t,n,r){let i=e.substring(0,n)+e.substring(n+t.length);return i=i.substring(0,n+r)+t+i.substring(n+r),i}function F1e(e,t,n,r){let i=n,s=e;for(;i<r&&!xF(s,i).can_open;)s=wF(s,t,i,1),i++;return{text:s,from:i,to:r}}function $1e(e,t,n,r){let i=r,s=e;for(;i>n&&!xF(s,i).can_close;)s=wF(s,t,i,-1),i--;return{text:s,from:n,to:i}}function z1e(e,t,n,r){let i={text:e,from:n,to:r};return i=F1e(i.text,t,i.from,i.to),i=$1e(i.text,t,i.from,i.to),i.to-i.from<t.length+1&&(i.text=i.text.substring(0,i.from)+i.text.substring(i.to+t.length)),i.text}class B1e extends yF{constructor(t,n,r){super(t,n,r??{}),e0(this,"inTable",!1),this.inlines=[]}render(t,n,r){super.render(t,n,r);const i=this.inlines[this.inlines.length-1];if(i!=null&&i.start&&i!==null&&i!==void 0&&i.end){const{delimiter:s,start:o,end:a}=this.normalizeInline(i);this.out=z1e(this.out,s,o,a),this.inlines.pop()}}markString(t,n,r,i){const s=this.marks[t.type.name];if(s.expelEnclosingWhitespace)if(n)this.inlines.push({start:this.out.length,delimiter:s.open});else{const o=this.inlines.pop();this.inlines.push({...o,end:this.out.length})}return super.markString(t,n,r,i)}normalizeInline(t){let{start:n,end:r}=t;for(;this.out.charAt(n).match(/\s/);)n++;return{...t,start:n}}}const kF=cr.create({name:"markdownHTMLMark",addStorage(){return{markdown:{serialize:{open(e,t){var n,r;return this.editor.storage.markdown.options.html?(n=(r=VR(t))===null||r===void 0?void 0:r[0])!==null&&n!==void 0?n:"":(console.warn(`Tiptap Markdown: "${t.type.name}" mark is only available in html mode`),"")},close(e,t){var n,r;return this.editor.storage.markdown.options.html&&(n=(r=VR(t))===null||r===void 0?void 0:r[1])!==null&&n!==void 0?n:""}},parse:{}}}}});function VR(e){const t=e.type.schema,n=t.text(" ",[e]),i=mh(V.from(n),t).match(/^(<.*?>) (<\/.*?>)$/);return i?[i[1],i[2]]:null}function _2(e){const t=`<body>${e}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}function V1e(e){return e==null?void 0:e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function U1e(e){const t=e.parentElement,n=t.cloneNode();for(;t.firstChild&&t.firstChild!==e;)n.appendChild(t.firstChild);n.childNodes.length>0&&t.parentElement.insertBefore(n,t),t.parentElement.insertBefore(e,t),t.childNodes.length===0&&t.remove()}function H1e(e){const t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}const yy=$e.create({name:"markdownHTMLNode",addStorage(){return{markdown:{serialize(e,t,n){this.editor.storage.markdown.options.html?e.write(W1e(t,n)):(console.warn(`Tiptap Markdown: "${t.type.name}" node is only available in html mode`),e.write(`[${t.type.name}]`)),t.isBlock&&e.closeBlock(t)},parse:{}}}}});function W1e(e,t){const n=e.type.schema,r=mh(V.from(e),n);return e.isBlock&&(t instanceof V||t.type.name===n.topNodeType.name)?q1e(r):r}function q1e(e){const n=_2(e).firstElementChild;return n.innerHTML=n.innerHTML.trim()?`
${n.innerHTML}
`:`
`,n.outerHTML}const K1e=$e.create({name:"blockquote"}),G1e=K1e.extend({addStorage(){return{markdown:{serialize:Bi.nodes.blockquote,parse:{}}}}}),J1e=$e.create({name:"bulletList"}),CF=J1e.extend({addStorage(){return{markdown:{serialize(e,t){return e.renderList(t,"  ",()=>(this.editor.storage.markdown.options.bulletListMarker||"-")+" ")},parse:{}}}}}),Q1e=$e.create({name:"codeBlock"}),Y1e=Q1e.extend({addStorage(){return{markdown:{serialize(e,t){e.write("```"+(t.attrs.language||"")+`
`),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},parse:{setup(e){var t;e.set({langPrefix:(t=this.options.languageClassPrefix)!==null&&t!==void 0?t:"language-"})},updateDOM(e){e.innerHTML=e.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}}}}),X1e=$e.create({name:"hardBreak"}),SF=X1e.extend({addStorage(){return{markdown:{serialize(e,t,n,r){for(let i=r+1;i<n.childCount;i++)if(n.child(i).type!=t.type){e.write(e.inTable?yy.storage.markdown.serialize.call(this,e,t,n):`\\
`);return}},parse:{}}}}}),Z1e=$e.create({name:"heading"}),ebe=Z1e.extend({addStorage(){return{markdown:{serialize:Bi.nodes.heading,parse:{}}}}}),tbe=$e.create({name:"horizontalRule"}),nbe=tbe.extend({addStorage(){return{markdown:{serialize:Bi.nodes.horizontal_rule,parse:{}}}}}),rbe=$e.create({name:"image"}),ibe=rbe.extend({addStorage(){return{markdown:{serialize:Bi.nodes.image,parse:{}}}}}),sbe=$e.create({name:"listItem"}),obe=sbe.extend({addStorage(){return{markdown:{serialize:Bi.nodes.list_item,parse:{}}}}}),abe=$e.create({name:"orderedList"});function lbe(e,t,n){let r=0;for(;n-r>0&&t.child(n-r-1).type.name===e.type.name;r++);return r}const ube=abe.extend({addStorage(){return{markdown:{serialize(e,t,n,r){const i=t.attrs.start||1,s=String(i+t.childCount-1).length,o=e.repeat(" ",s+2),l=lbe(t,n,r)%2?") ":". ";e.renderList(t,o,u=>{const c=String(i+u);return e.repeat(" ",s-c.length)+c+l})},parse:{}}}}}),cbe=$e.create({name:"paragraph"}),dbe=cbe.extend({addStorage(){return{markdown:{serialize:Bi.nodes.paragraph,parse:{}}}}});function Db(e){var t,n;return(t=e==null||(n=e.content)===null||n===void 0?void 0:n.content)!==null&&t!==void 0?t:[]}const fbe=$e.create({name:"table"}),hbe=fbe.extend({addStorage(){return{markdown:{serialize(e,t,n){if(!pbe(t)){yy.storage.markdown.serialize.call(this,e,t,n);return}e.inTable=!0,t.forEach((r,i,s)=>{if(e.write("| "),r.forEach((o,a,l)=>{l&&e.write(" | ");const u=o.firstChild;u.textContent.trim()&&e.renderInline(u)}),e.write(" |"),e.ensureNewLine(),!s){const o=Array.from({length:r.childCount}).map(()=>"---").join(" | ");e.write(`| ${o} |`),e.ensureNewLine()}}),e.closeBlock(t),e.inTable=!1},parse:{}}}}});function UR(e){return e.attrs.colspan>1||e.attrs.rowspan>1}function pbe(e){const t=Db(e),n=t[0],r=t.slice(1);return!(Db(n).some(i=>i.type.name!=="tableHeader"||UR(i)||i.childCount>1)||r.some(i=>Db(i).some(s=>s.type.name==="tableHeader"||UR(s)||s.childCount>1)))}const mbe=$e.create({name:"taskItem"}),gbe=mbe.extend({addStorage(){return{markdown:{serialize(e,t){const n=t.attrs.checked?"[x]":"[ ]";e.write(`${n} `),e.renderContent(t)},parse:{updateDOM(e){[...e.querySelectorAll(".task-list-item")].forEach(t=>{const n=t.querySelector("input");t.setAttribute("data-type","taskItem"),n&&(t.setAttribute("data-checked",n.checked),n.remove())})}}}}}}),ybe=$e.create({name:"taskList"}),bbe=ybe.extend({addStorage(){return{markdown:{serialize:CF.storage.markdown.serialize,parse:{setup(e){e.use(O1e)},updateDOM(e){[...e.querySelectorAll(".contains-task-list")].forEach(t=>{t.setAttribute("data-type","taskList")})}}}}}}),vbe=$e.create({name:"text"}),xbe=vbe.extend({addStorage(){return{markdown:{serialize(e,t){e.text(V1e(t.text))},parse:{}}}}}),wbe=cr.create({name:"bold"}),kbe=wbe.extend({addStorage(){return{markdown:{serialize:Bi.marks.strong,parse:{}}}}}),Cbe=cr.create({name:"code"}),Sbe=Cbe.extend({addStorage(){return{markdown:{serialize:Bi.marks.code,parse:{}}}}}),Ebe=cr.create({name:"italic"}),Tbe=Ebe.extend({addStorage(){return{markdown:{serialize:Bi.marks.em,parse:{}}}}}),_be=cr.create({name:"link"}),Abe=_be.extend({addStorage(){return{markdown:{serialize:Bi.marks.link,parse:{}}}}}),Pbe=cr.create({name:"strike"}),Rbe=Pbe.extend({addStorage(){return{markdown:{serialize:{open:"~~",close:"~~",expelEnclosingWhitespace:!0},parse:{}}}}}),Nbe=[G1e,CF,Y1e,SF,ebe,nbe,yy,ibe,obe,ube,dbe,hbe,gbe,bbe,xbe,kbe,Sbe,kF,Tbe,Abe,Rbe];function t0(e){var t,n;const r=(t=e.storage)===null||t===void 0?void 0:t.markdown,i=(n=Nbe.find(s=>s.name===e.name))===null||n===void 0?void 0:n.storage.markdown;return r||i?{...i,...r}:null}class Dbe{constructor(t){e0(this,"editor",null),this.editor=t}serialize(t){const n=new B1e(this.nodes,this.marks,{hardBreakNodeName:SF.name});return n.renderContent(t),n.out}get nodes(){var t;return{...Object.fromEntries(Object.keys(this.editor.schema.nodes).map(n=>[n,this.serializeNode(yy)])),...Object.fromEntries((t=this.editor.extensionManager.extensions.filter(n=>n.type==="node"&&this.serializeNode(n)).map(n=>[n.name,this.serializeNode(n)]))!==null&&t!==void 0?t:[])}}get marks(){var t;return{...Object.fromEntries(Object.keys(this.editor.schema.marks).map(n=>[n,this.serializeMark(kF)])),...Object.fromEntries((t=this.editor.extensionManager.extensions.filter(n=>n.type==="mark"&&this.serializeMark(n)).map(n=>[n.name,this.serializeMark(n)]))!==null&&t!==void 0?t:[])}}serializeNode(t){var n;return(n=t0(t))===null||n===void 0||(n=n.serialize)===null||n===void 0?void 0:n.bind({editor:this.editor,options:t.options})}serializeMark(t){var n;const r=(n=t0(t))===null||n===void 0?void 0:n.serialize;return r?{...r,open:typeof r.open=="function"?r.open.bind({editor:this.editor,options:t.options}):r.open,close:typeof r.close=="function"?r.close.bind({editor:this.editor,options:t.options}):r.close}:null}}class Mbe{constructor(t,n){e0(this,"editor",null),e0(this,"md",null);let{html:r,linkify:i,breaks:s}=n;this.editor=t,this.md=this.withPatchedRenderer(Hn({html:r,linkify:i,breaks:s}))}parse(t){let{inline:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string"){this.editor.extensionManager.extensions.forEach(s=>{var o;return(o=t0(s))===null||o===void 0||(o=o.parse)===null||o===void 0||(o=o.setup)===null||o===void 0?void 0:o.call({editor:this.editor,options:s.options},this.md)});const r=this.md.render(t),i=_2(r);return this.editor.extensionManager.extensions.forEach(s=>{var o;return(o=t0(s))===null||o===void 0||(o=o.parse)===null||o===void 0||(o=o.updateDOM)===null||o===void 0?void 0:o.call({editor:this.editor,options:s.options},i)}),this.normalizeDOM(i,{inline:n,content:t}),i.innerHTML}return t}normalizeDOM(t,n){let{inline:r,content:i}=n;return this.normalizeBlocks(t),t.querySelectorAll("*").forEach(s=>{var o;((o=s.nextSibling)===null||o===void 0?void 0:o.nodeType)===Node.TEXT_NODE&&!s.closest("pre")&&(s.nextSibling.textContent=s.nextSibling.textContent.replace(/^\n/,""))}),r&&this.normalizeInline(t,i),t}normalizeBlocks(t){const r=Object.values(this.editor.schema.nodes).filter(i=>i.isBlock).map(i=>{var s;return(s=i.spec.parseDOM)===null||s===void 0?void 0:s.map(o=>o.tag)}).flat().filter(Boolean).join(",");r&&[...t.querySelectorAll(r)].forEach(i=>{i.parentElement.matches("p")&&U1e(i)})}normalizeInline(t,n){var r;if((r=t.firstElementChild)!==null&&r!==void 0&&r.matches("p")){var i,s,o,a;const l=t.firstElementChild,{nextElementSibling:u}=l,c=(i=(s=n.match(/^\s+/))===null||s===void 0?void 0:s[0])!==null&&i!==void 0?i:"",d=u?"":(o=(a=n.match(/\s+$/))===null||a===void 0?void 0:a[0])!==null&&o!==void 0?o:"";if(n.match(/^\n\n/)){l.innerHTML=`${l.innerHTML}${d}`;return}H1e(l),t.innerHTML=`${c}${t.innerHTML}${d}`}}withPatchedRenderer(t){const n=r=>function(){const i=r(...arguments);return i===`
`?i:i[i.length-1]===`
`?i.slice(0,-1):i};return t.renderer.rules.hardbreak=n(t.renderer.rules.hardbreak),t.renderer.rules.softbreak=n(t.renderer.rules.softbreak),t.renderer.rules.fence=n(t.renderer.rules.fence),t.renderer.rules.code_block=n(t.renderer.rules.code_block),t.renderer.renderToken=n(t.renderer.renderToken.bind(t.renderer)),t}}const Obe=ot.create({name:"markdownClipboard",addOptions(){return{transformPastedText:!1,transformCopiedText:!1}},addProseMirrorPlugins(){return[new tt({key:new mt("markdownClipboard"),props:{clipboardTextParser:(e,t,n)=>{if(n||!this.options.transformPastedText)return null;const r=this.editor.storage.markdown.parser.parse(e,{inline:!0});return us.fromSchema(this.editor.schema).parseSlice(_2(r),{preserveWhitespace:!0,context:t})},clipboardTextSerializer:e=>this.options.transformCopiedText?this.editor.storage.markdown.serializer.serialize(e.content):null}})]}}),EF=ot.create({name:"markdown",priority:50,addOptions(){return{html:!0,tightLists:!0,tightListClass:"tight",bulletListMarker:"-",linkify:!1,breaks:!1,transformPastedText:!1,transformCopiedText:!1}},addCommands(){const e=VL.Commands.config.addCommands();return{setContent:(t,n)=>r=>e.setContent(r.editor.storage.markdown.parser.parse(t),n)(r),insertContentAt:(t,n,r)=>i=>e.insertContentAt(t,i.editor.storage.markdown.parser.parse(n,{inline:!0}),r)(i)}},onBeforeCreate(){this.editor.storage.markdown={options:{...this.options},parser:new Mbe(this.editor,this.options),serializer:new Dbe(this.editor),getMarkdown:()=>this.editor.storage.markdown.serializer.serialize(this.editor.state.doc)},this.editor.options.initialContent=this.editor.options.content,this.editor.options.content=this.editor.storage.markdown.parser.parse(this.editor.options.content)},onCreate(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent},addStorage(){return{}},addExtensions(){return[L1e.configure({tight:this.options.tightLists,tightClass:this.options.tightListClass}),Obe.configure({transformPastedText:this.options.transformPastedText,transformCopiedText:this.options.transformCopiedText})]}});function Ibe(e){return Uw(e.content??[]).trimEnd()+`
`}function Uw(e,t=0){let n="";for(const r of e)n+=TF(r,t);return n}function TF(e,t=0){var n,r;switch(e.type){case"paragraph":return Vf(e.content??[])+`

`;case"heading":{const i=((n=e.attrs)==null?void 0:n.level)??1;return"#".repeat(i)+" "+Vf(e.content??[])+`

`}case"bulletList":return n0(e.content??[],"bullet",t);case"orderedList":return n0(e.content??[],"ordered",t);case"listItem":return"";case"codeBlock":{const i=((r=e.attrs)==null?void 0:r.language)??"",s=(e.content??[]).map(o=>o.text??"").join("");return"```"+i+`
`+s+"\n```\n\n"}case"blockquote":return Uw(e.content??[]).split(`
`).map(s=>s?`> ${s}`:">").join(`
`)+`
`;case"table":return jbe(e)+`
`;case"horizontalRule":return`---

`;case"text":return _F(e);default:return e.content?Uw(e.content,t):e.text??""}}function n0(e,t,n){let r="";for(let i=0;i<e.length;i++){const s=e[i],o="  ".repeat(n)+(t==="bullet"?"- ":`${i+1}. `),a=s.content??[];for(let l=0;l<a.length;l++){const u=a[l];u.type==="paragraph"?l===0?r+=o+Vf(u.content??[])+`
`:r+="  ".repeat(n)+"  "+Vf(u.content??[])+`
`:u.type==="bulletList"?r+=n0(u.content??[],"bullet",n+1):u.type==="orderedList"?r+=n0(u.content??[],"ordered",n+1):r+=TF(u,n+1)}}return r+=`
`,r}function Vf(e){return e.map(_F).join("")}function _F(e){var n;if(e.type!=="text"||!e.text)return"";let t=e.text;if(!e.marks||e.marks.length===0)return t;for(const r of e.marks)switch(r.type){case"bold":t=`**${t}**`;break;case"italic":t=`_${t}_`;break;case"code":t="`"+t+"`";break;case"link":{const i=((n=r.attrs)==null?void 0:n.href)??"";t=`[${t}](${i})`;break}}return t}function jbe(e){var l;const t=e.content??[];if(t.length===0)return"";const n=[];let r=!1;for(let u=0;u<t.length;u++){const c=t[u],d=(c.content??[]).map(f=>Vf((f.content??[]).flatMap(h=>h.content??[])));u===0&&((l=c.content)!=null&&l.some(f=>f.type==="tableHeader"))&&(r=!0),n.push(d)}if(n.length===0)return"";const i=Math.max(...n.map(u=>u.length)),s=[],o=n[0].map(u=>u||" ");for(;o.length<i;)o.push(" ");s.push("| "+o.join(" | ")+" |"),s.push("| "+Array(i).fill("---").join(" | ")+" |");const a=r?1:0;for(let u=a;u<n.length;u++){const c=n[u];for(;c.length<i;)c.push(" ");s.push("| "+c.join(" | ")+" |")}return s.join(`
`)+`
`}function Mb(e){const t=e.storage.markdown.getMarkdown();return t.includes("[table]")?Ibe(e.getJSON()):t}const A2=({markdown:e,onChange:t,onJsonChange:n,onReady:r})=>{const i=o8({extensions:[j8.configure({codeBlock:{HTMLAttributes:{class:"tiptap-code-block"}}}),x8.configure({openOnClick:!1,HTMLAttributes:{class:"tiptap-link"}}),b2.configure({resizable:!1}),y2,m2,g2,Age.configure({placeholder:"Start writing..."}),EF.configure({html:!1,transformPastedText:!0,transformCopiedText:!0})],content:e,onCreate:({editor:o})=>{r==null||r(Mb(o))},onUpdate:({editor:o})=>{t(Mb(o)),n==null||n(o.getJSON())},editorProps:{attributes:{class:"tiptap-editor-content"}}});w.useEffect(()=>{if(!i)return;Mb(i)!==e&&i.commands.setContent(e)},[e,i]);const s=w.useCallback(()=>{if(!i)return;const o=i.getAttributes("link").href,a=window.prompt("URL",o);a!==null&&(a===""?i.chain().focus().extendMarkRange("link").unsetLink().run():i.chain().focus().extendMarkRange("link").setLink({href:a}).run())},[i]);return i?y.jsxs("div",{className:"rounded-lg border border-border overflow-hidden",children:[y.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 bg-muted/50 border-b border-border flex-wrap",children:[y.jsx(Ki,{label:"Bold",shortcut:"B",active:i.isActive("bold"),onClick:()=>i.chain().focus().toggleBold().run()}),y.jsx(Ki,{label:"Italic",shortcut:"I",active:i.isActive("italic"),onClick:()=>i.chain().focus().toggleItalic().run()}),y.jsx(Ki,{label:"Code",shortcut:"E",active:i.isActive("code"),onClick:()=>i.chain().focus().toggleCode().run()}),y.jsx(Ki,{label:"Link",shortcut:"K",active:i.isActive("link"),onClick:s}),y.jsx("div",{className:"w-px h-4 bg-border mx-1"}),y.jsx(Ki,{label:"H2",active:i.isActive("heading",{level:2}),onClick:()=>i.chain().focus().toggleHeading({level:2}).run()}),y.jsx(Ki,{label:"H3",active:i.isActive("heading",{level:3}),onClick:()=>i.chain().focus().toggleHeading({level:3}).run()}),y.jsx(Ki,{label:"List",active:i.isActive("bulletList"),onClick:()=>i.chain().focus().toggleBulletList().run()}),y.jsx(Ki,{label:"1. List",active:i.isActive("orderedList"),onClick:()=>i.chain().focus().toggleOrderedList().run()}),y.jsx(Ki,{label:"Quote",active:i.isActive("blockquote"),onClick:()=>i.chain().focus().toggleBlockquote().run()})]}),y.jsx(t2,{editor:i})]}):null};function Ki({label:e,shortcut:t,active:n,onClick:r}){return y.jsx("button",{type:"button",onClick:r,title:t?`${e} (Cmd+${t})`:e,className:`px-2 py-1 text-[11px] font-caption rounded transition-colors ${n?"bg-primary/15 text-primary":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:e})}class AF{diff(t,n,r={}){let i;typeof r=="function"?(i=r,r={}):"callback"in r&&(i=r.callback);const s=this.castInput(t,r),o=this.castInput(n,r),a=this.removeEmpty(this.tokenize(s,r)),l=this.removeEmpty(this.tokenize(o,r));return this.diffWithOptionsObj(a,l,r,i)}diffWithOptionsObj(t,n,r,i){var s;const o=v=>{if(v=this.postProcess(v,r),i){setTimeout(function(){i(v)},0);return}else return v},a=n.length,l=t.length;let u=1,c=a+l;r.maxEditLength!=null&&(c=Math.min(c,r.maxEditLength));const d=(s=r.timeout)!==null&&s!==void 0?s:1/0,f=Date.now()+d,h=[{oldPos:-1,lastComponent:void 0}];let p=this.extractCommon(h[0],n,t,0,r);if(h[0].oldPos+1>=l&&p+1>=a)return o(this.buildValues(h[0].lastComponent,n,t));let m=-1/0,g=1/0;const b=()=>{for(let v=Math.max(m,-u);v<=Math.min(g,u);v+=2){let x;const k=h[v-1],S=h[v+1];k&&(h[v-1]=void 0);let C=!1;if(S){const P=S.oldPos-v;C=S&&0<=P&&P<a}const E=k&&k.oldPos+1<l;if(!C&&!E){h[v]=void 0;continue}if(!E||C&&k.oldPos<S.oldPos?x=this.addToPath(S,!0,!1,0,r):x=this.addToPath(k,!1,!0,1,r),p=this.extractCommon(x,n,t,v,r),x.oldPos+1>=l&&p+1>=a)return o(this.buildValues(x.lastComponent,n,t))||!0;h[v]=x,x.oldPos+1>=l&&(g=Math.min(g,v-1)),p+1>=a&&(m=Math.max(m,v+1))}u++};if(i)(function v(){setTimeout(function(){if(u>c||Date.now()>f)return i(void 0);b()||v()},0)})();else for(;u<=c&&Date.now()<=f;){const v=b();if(v)return v}}addToPath(t,n,r,i,s){const o=t.lastComponent;return o&&!s.oneChangePerToken&&o.added===n&&o.removed===r?{oldPos:t.oldPos+i,lastComponent:{count:o.count+1,added:n,removed:r,previousComponent:o.previousComponent}}:{oldPos:t.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:o}}}extractCommon(t,n,r,i,s){const o=n.length,a=r.length;let l=t.oldPos,u=l-i,c=0;for(;u+1<o&&l+1<a&&this.equals(r[l+1],n[u+1],s);)u++,l++,c++,s.oneChangePerToken&&(t.lastComponent={count:1,previousComponent:t.lastComponent,added:!1,removed:!1});return c&&!s.oneChangePerToken&&(t.lastComponent={count:c,previousComponent:t.lastComponent,added:!1,removed:!1}),t.oldPos=l,u}equals(t,n,r){return r.comparator?r.comparator(t,n):t===n||!!r.ignoreCase&&t.toLowerCase()===n.toLowerCase()}removeEmpty(t){const n=[];for(let r=0;r<t.length;r++)t[r]&&n.push(t[r]);return n}castInput(t,n){return t}tokenize(t,n){return Array.from(t)}join(t){return t.join("")}postProcess(t,n){return t}get useLongestToken(){return!1}buildValues(t,n,r){const i=[];let s;for(;t;)i.push(t),s=t.previousComponent,delete t.previousComponent,t=s;i.reverse();const o=i.length;let a=0,l=0,u=0;for(;a<o;a++){const c=i[a];if(c.removed)c.value=this.join(r.slice(u,u+c.count)),u+=c.count;else{if(!c.added&&this.useLongestToken){let d=n.slice(l,l+c.count);d=d.map(function(f,h){const p=r[u+h];return p.length>f.length?p:f}),c.value=this.join(d)}else c.value=this.join(n.slice(l,l+c.count));l+=c.count,c.added||(u+=c.count)}}return i}}function HR(e,t){let n;for(n=0;n<e.length&&n<t.length;n++)if(e[n]!=t[n])return e.slice(0,n);return e.slice(0,n)}function WR(e,t){let n;if(!e||!t||e[e.length-1]!=t[t.length-1])return"";for(n=0;n<e.length&&n<t.length;n++)if(e[e.length-(n+1)]!=t[t.length-(n+1)])return e.slice(-n);return e.slice(-n)}function Hw(e,t,n){if(e.slice(0,t.length)!=t)throw Error(`string ${JSON.stringify(e)} doesn't start with prefix ${JSON.stringify(t)}; this is a bug`);return n+e.slice(t.length)}function Ww(e,t,n){if(!t)return e+n;if(e.slice(-t.length)!=t)throw Error(`string ${JSON.stringify(e)} doesn't end with suffix ${JSON.stringify(t)}; this is a bug`);return e.slice(0,-t.length)+n}function Gc(e,t){return Hw(e,t,"")}function Tp(e,t){return Ww(e,t,"")}function qR(e,t){return t.slice(0,Lbe(e,t))}function Lbe(e,t){let n=0;e.length>t.length&&(n=e.length-t.length);let r=t.length;e.length<t.length&&(r=e.length);const i=Array(r);let s=0;i[0]=0;for(let o=1;o<r;o++){for(t[o]==t[s]?i[o]=i[s]:i[o]=s;s>0&&t[o]!=t[s];)s=i[s];t[o]==t[s]&&s++}s=0;for(let o=n;o<e.length;o++){for(;s>0&&e[o]!=t[s];)s=i[s];e[o]==t[s]&&s++}return s}function Jc(e){let t;for(t=e.length-1;t>=0&&e[t].match(/\s/);t--);return e.substring(t+1)}function Is(e){const t=e.match(/^\s*/);return t?t[0]:""}const KR="a-zA-Z0-9_\\u{AD}\\u{C0}-\\u{D6}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Fbe=new RegExp(`[${KR}]+|\\s+|[^${KR}]`,"ug");class $be extends AF{equals(t,n,r){return r.ignoreCase&&(t=t.toLowerCase(),n=n.toLowerCase()),t.trim()===n.trim()}tokenize(t,n={}){let r;if(n.intlSegmenter){const o=n.intlSegmenter;if(o.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=[];for(const a of Array.from(o.segment(t))){const l=a.segment;r.length&&/\s/.test(r[r.length-1])&&/\s/.test(l)?r[r.length-1]+=l:r.push(l)}}else r=t.match(Fbe)||[];const i=[];let s=null;return r.forEach(o=>{/\s/.test(o)?s==null?i.push(o):i.push(i.pop()+o):s!=null&&/\s/.test(s)?i[i.length-1]==s?i.push(i.pop()+o):i.push(s+o):i.push(o),s=o}),i}join(t){return t.map((n,r)=>r==0?n:n.replace(/^\s+/,"")).join("")}postProcess(t,n){if(!t||n.oneChangePerToken)return t;let r=null,i=null,s=null;return t.forEach(o=>{o.added?i=o:o.removed?s=o:((i||s)&&GR(r,s,i,o),r=o,i=null,s=null)}),(i||s)&&GR(r,s,i,null),t}}const zbe=new $be;function Bbe(e,t,n){return zbe.diff(e,t,n)}function GR(e,t,n,r){if(t&&n){const i=Is(t.value),s=Jc(t.value),o=Is(n.value),a=Jc(n.value);if(e){const l=HR(i,o);e.value=Ww(e.value,o,l),t.value=Gc(t.value,l),n.value=Gc(n.value,l)}if(r){const l=WR(s,a);r.value=Hw(r.value,a,l),t.value=Tp(t.value,l),n.value=Tp(n.value,l)}}else if(n){if(e){const i=Is(n.value);n.value=n.value.substring(i.length)}if(r){const i=Is(r.value);r.value=r.value.substring(i.length)}}else if(e&&r){const i=Is(r.value),s=Is(t.value),o=Jc(t.value),a=HR(i,s);t.value=Gc(t.value,a);const l=WR(Gc(i,a),o);t.value=Tp(t.value,l),r.value=Hw(r.value,i,l),e.value=Ww(e.value,i,i.slice(0,i.length-l.length))}else if(r){const i=Is(r.value),s=Jc(t.value),o=qR(s,i);t.value=Tp(t.value,o)}else if(e){const i=Jc(e.value),s=Is(t.value),o=qR(i,s);t.value=Gc(t.value,o)}}class Vbe extends AF{tokenize(t){return t.slice()}join(t){return t}removeEmpty(t){return t}}const Ube=new Vbe;function Hbe(e,t,n){return Ube.diff(e,t,n)}function JR(e,t){return e===t?[{text:e,type:"unchanged"}]:Bbe(e,t).map(n=>({text:n.value,type:n.added?"added":n.removed?"removed":"unchanged"}))}function QR({segments:e}){return y.jsx(y.Fragment,{children:e.map((t,n)=>y.jsx("span",{className:t.type==="added"?"bg-success/15 rounded-sm":t.type==="removed"?"bg-destructive/15 line-through rounded-sm":"",children:t.text},n))})}const Wbe=({before:e,after:t})=>{const n=Math.max(e.headers.length,t.headers.length),r=Math.max(e.rows.length,t.rows.length),i=w.useMemo(()=>{const o=[];for(let a=0;a<n;a++){const l=e.headers[a]??"",u=t.headers[a]??"";o.push(JR(l,u))}return o},[e.headers,t.headers,n]),s=w.useMemo(()=>{const o=[];for(let a=0;a<r;a++){const l=e.rows[a],u=t.rows[a];if(l)if(u){const c=[];let d=!1;for(let f=0;f<n;f++){const h=l[f]??"",p=u[f]??"",m=JR(h,p);h!==p&&(d=!0),c.push(m)}o.push({cells:c,rowType:d?"changed":"unchanged"})}else{const c=l.map(d=>[{text:d,type:"removed"}]);for(;c.length<n;)c.push([{text:"",type:"unchanged"}]);o.push({cells:c,rowType:"removed"})}else{const c=(u??[]).map(d=>[{text:d,type:"added"}]);for(;c.length<n;)c.push([{text:"",type:"unchanged"}]);o.push({cells:c,rowType:"added"})}}return o},[e.rows,t.rows,r,n]);return y.jsx("div",{className:"overflow-x-auto rounded-lg border border-border",children:y.jsxs("table",{className:"text-xs border-collapse w-full",children:[y.jsx("thead",{className:"bg-muted/50",children:y.jsx("tr",{className:"border-b border-border/50",children:i.map((o,a)=>y.jsx("th",{className:"text-left px-3 py-2 font-subheading text-foreground border-b border-border",children:y.jsx(QR,{segments:o})},a))})}),y.jsx("tbody",{children:s.map((o,a)=>y.jsx("tr",{className:`border-b border-border/50 last:border-b-0 ${o.rowType==="added"?"bg-success/5":o.rowType==="removed"?"bg-destructive/5":""}`,children:o.cells.map((l,u)=>y.jsx("td",{className:"px-3 py-2 text-secondary-foreground",children:y.jsx(QR,{segments:l})},u))},a))})]})})};function as(e){const t=e.split(`
`),n=[];let r=0;for(;r<t.length;){const i=t[r];if(n.push(i),i.trimStart().startsWith("|")&&r+1<t.length&&t[r+1].trimStart().startsWith("|")&&!PF(t[r+1])&&!(r>0&&t[r-1].trimStart().startsWith("|"))){const o=lm(i).length,a="| "+Array(o).fill("---").join(" | ")+" |";n.push(a)}r++}return n.join(`
`)}function PF(e){const t=e.trim();return/^\|[\s|:\-]+\|$/.test(t)&&t.includes("---")}function lm(e){const t=e.trim(),n=t.startsWith("|")?t.slice(1):t;return(n.endsWith("|")?n.slice(0,-1):n).split("|").map(i=>i.trim())}function YR(e){const t=e.split(`
`).map(o=>o.trim()).filter(o=>o.length>0);if(t.length<1)return null;const n=t.filter(o=>o.startsWith("|")&&lm(o).length>=2);if(n.length<1||n.length<t.length/2)return null;const r=n.filter(o=>!PF(o));if(r.length<1)return null;const i=lm(r[0]),s=r.slice(1).map(o=>lm(o));return{headers:i,rows:s}}function qbe(e){return e.replace(/\*\*(.+?)\*\*/g,"$1").replace(/__(.+?)__/g,"$1").replace(/\*(.+?)\*/g,"$1").replace(/_(.+?)_/g,"$1").replace(/`(.+?)`/g,"$1").replace(/\*{2,}/g,"")}function XR(e){const t=e.split(`
`),n=[];let r=[],i=!1;for(const s of t){if(/^```/.test(s.trimStart())){i=!i,r.push(s);continue}if(i){r.push(s);continue}s.trim()===""?r.length>0&&(n.push(r.join(`
`)),r=[]):r.push(s)}return r.length>0&&n.push(r.join(`
`)),n}function ZR(e){return qbe(e).replace(/[\u00A0\u200B\u200C\u200D\uFEFF]/g," ").replace(/\s+/g," ").trim().toLowerCase()}function Kbe(e,t){const n=XR(e),r=XR(t),i=Hbe(n,r,{comparator:(l,u)=>ZR(l)===ZR(u)}),s=[];for(const l of i){const u=l.added?"added":l.removed?"removed":"unchanged";for(const c of l.value)s.push({tag:u,block:c})}const o=[];let a=0;for(;a<s.length;){const l=s[a];if(l.tag==="unchanged"){const u=[];for(;a<s.length&&s[a].tag==="unchanged";)u.push(s[a].block),a++;o.push({type:"unchanged",blocks:u});continue}if(l.tag==="removed"){const u=[];for(;a<s.length&&s[a].tag==="removed";)u.push(s[a].block),a++;const c=[];for(;a<s.length&&s[a].tag==="added";)c.push(s[a].block),a++;const d=Math.min(u.length,c.length);for(let f=0;f<d;f++)o.push({type:"modified",before:u[f],after:c[f]});for(let f=d;f<u.length;f++)o.push({type:"removed",block:u[f]});for(let f=d;f<c.length;f++)o.push({type:"added",block:c[f]});continue}if(l.tag==="added"){o.push({type:"added",block:l.block}),a++;continue}a++}return o}const RF=({before:e,after:t,fullSize:n=!1})=>{const r=n?"max-h-[60vh] overflow-y-auto":"max-h-[200px] overflow-y-auto";if(!e)return y.jsx("div",{className:`text-sm leading-relaxed diff-added-text ${r}`,children:y.jsx(Yr,{children:as(t)})});if(e===t)return y.jsx("div",{className:`text-sm leading-relaxed text-muted-foreground ${r}`,children:y.jsx(Yr,{children:as(t)})});const i=YR(e),s=YR(t);return i&&s?y.jsx("div",{className:r,children:y.jsx(Wbe,{before:i,after:s})}):y.jsx(Gbe,{before:e,after:t,maxH:r})},Gbe=({before:e,after:t,maxH:n})=>{const r=w.useMemo(()=>Kbe(e,t),[e,t]);return y.jsx("div",{className:`text-sm leading-relaxed space-y-2 ${n}`,children:r.map((i,s)=>y.jsx(Jbe,{entry:i},s))})},Jbe=({entry:e})=>{switch(e.type){case"unchanged":return y.jsx(Xbe,{blocks:e.blocks});case"added":return y.jsx("div",{className:"diff-added-text",children:y.jsx(Yr,{children:as(e.block)})});case"removed":return y.jsx("div",{className:"diff-removed-text",children:y.jsx(Yr,{children:as(e.block)})});case"modified":return y.jsxs("div",{children:[y.jsx("div",{className:"diff-removed-text",children:y.jsx(Yr,{children:as(e.before)})}),y.jsx("div",{className:"diff-added-text",children:y.jsx(Yr,{children:as(e.after)})})]})}},Qbe=3,Ybe=10,Xbe=({blocks:e})=>{const[t,n]=w.useState(!1),r=e.reduce((s,o)=>s+o.split(`
`).length,0);return!(e.length>Qbe||r>Ybe)||t?y.jsxs("div",{className:"text-muted-foreground",children:[e.map((s,o)=>y.jsx(Yr,{children:as(s)},o)),t&&y.jsx("button",{onClick:()=>n(!1),className:"text-[10px] text-muted-foreground/50 hover:text-muted-foreground transition-colors",children:"Collapse"})]}):y.jsxs("div",{className:"text-muted-foreground",children:[y.jsx(Yr,{children:as(e[0])}),y.jsx("button",{onClick:()=>n(!0),className:"text-[10px] text-muted-foreground/40 hover:text-muted-foreground transition-colors py-0.5",children:""}),y.jsx(Yr,{children:as(e[e.length-1])})]})},Zbe=({title:e,onClick:t})=>y.jsxs("button",{onClick:t,className:"inline-flex items-center gap-1.5 rounded-full border border-primary/20 bg-primary/5 hover:bg-primary/10 pl-2 pr-2.5 py-1 text-left transition-colors group flex-shrink-0",children:[y.jsx(jm,{className:"w-3 h-3 text-primary flex-shrink-0"}),y.jsx("span",{className:"text-[11px] font-subheading text-foreground whitespace-nowrap",children:e}),y.jsx(va,{className:"w-3 h-3 text-primary opacity-50 group-hover:opacity-100 group-hover:translate-x-0.5 transition-all flex-shrink-0"})]});function NF(e){return e.replace(/^[\s\u00A0]+|[\s\u00A0]+$/g,"")}function eve(e){return e.replace(/\*\*(.+?)\*\*/g,"$1").replace(/\*(.+?)\*/g,"$1").replace(/__(.+?)__/g,"$1").replace(/_(.+?)_/g,"$1").replace(/`(.+?)`/g,"$1").replace(/\[(.+?)\]\(.+?\)/g,"$1").replace(/["""\u201C\u201D]/g,"")}function eN(e,t,n){const r=eve(e).toLowerCase();return t.filter(i=>{if(i.id===n)return!1;const s=NF(i.title);return s.length<5?!1:r.includes(s.toLowerCase())})}const Ob=({edit:e,onAccept:t,onReject:n,status:r,isProcessing:i})=>{const s=r!=="pending",[o,a]=w.useState(!1),[l,u]=w.useState(!1),[c,d]=w.useState(""),[f,h]=w.useState(null),p=K6(),m=f??e.after,g=()=>{d(m),u(!0)},b=()=>{p.mutate({editId:e.id,afterText:c},{onSuccess:()=>{h(c),u(!1)}})},v=k=>l?y.jsxs("div",{className:"space-y-3",children:[y.jsx(A2,{markdown:c,onChange:d}),y.jsxs("div",{className:"flex gap-2 justify-end",children:[y.jsx("button",{onClick:()=>u(!1),className:"rounded-lg px-3 py-1.5 text-xs font-subheading text-muted-foreground hover:text-foreground transition-colors",children:"Cancel"}),y.jsx("button",{disabled:!c.trim()||c===m||p.isPending,onClick:b,className:"rounded-lg bg-primary px-3 py-1.5 text-xs font-subheading text-primary-foreground disabled:opacity-30 transition-opacity",children:p.isPending?"Saving...":"Save"})]})]}):y.jsx(RF,{before:e.before,after:m,fullSize:k}),x=k=>!s&&!l?y.jsxs("div",{className:`flex gap-2 ${k?"pt-2":"pt-1"}`,children:[y.jsxs("button",{onClick:g,className:`flex items-center justify-center gap-1 rounded-md border border-border hover:bg-muted/50 px-2 ${k?"py-2 text-sm":"py-1.5 text-[11px]"} font-subheading text-muted-foreground hover:text-foreground transition-colors`,children:[y.jsx(eC,{className:"w-3 h-3"}),"Edit"]}),y.jsxs("button",{onClick:()=>{n(e.id),a(!1)},disabled:i,className:`flex-1 flex items-center justify-center gap-1 rounded-md bg-destructive/15 hover:bg-destructive/25 px-2 ${k?"py-2 text-sm":"py-1.5 text-[11px]"} font-subheading text-destructive transition-colors disabled:opacity-30`,children:[i?y.jsx(qe,{className:"w-3 h-3 animate-spin"}):y.jsx(Xa,{className:"w-3 h-3"}),"Reject"]}),y.jsxs("button",{onClick:()=>{t(e.id),a(!1)},disabled:i,className:`flex-1 flex items-center justify-center gap-1 rounded-md bg-success/15 hover:bg-success/25 px-2 ${k?"py-2 text-sm":"py-1.5 text-[11px]"} font-subheading text-success transition-colors disabled:opacity-30`,children:[i?y.jsx(qe,{className:"w-3 h-3 animate-spin"}):y.jsx(of,{className:"w-3 h-3"}),"Accept"]})]}):null;return y.jsxs(y.Fragment,{children:[y.jsxs(Be.div,{initial:{opacity:0,scale:.97},animate:{opacity:1,scale:1},className:`rounded-lg border p-3 space-y-2 ${s?r==="accepted"?"border-success/30 bg-success/5":"border-destructive/30 bg-destructive/5 opacity-60":"border-primary/30 bg-primary/5"}`,children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx(uT,{className:"w-3 h-3 text-primary"}),y.jsx("span",{className:"text-[11px] font-subheading text-foreground",children:e.sectionTitle}),s&&y.jsx("span",{className:`rounded px-1.5 py-0.5 text-[9px] font-mono font-caption ${r==="accepted"?"bg-success/15 text-success":"bg-destructive/15 text-destructive"}`,children:r})]}),!l&&y.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-1 text-[9px] font-caption text-muted-foreground hover:text-foreground transition-colors",children:[y.jsx($7,{className:"w-3 h-3"}),"Expand"]})]}),e.rationale&&!l&&y.jsx("p",{className:"text-[11px] text-muted-foreground italic leading-snug",children:e.rationale}),v(!1),x(!1)]}),o&&dc.createPortal(y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-8",onClick:()=>a(!1),children:[y.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm"}),y.jsxs(Be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},onClick:k=>k.stopPropagation(),className:"relative w-full max-w-4xl rounded-xl border border-border bg-card shadow-lg p-6 space-y-4 max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(uT,{className:"w-4 h-4 text-primary"}),y.jsx("span",{className:"text-sm font-subheading text-foreground",children:e.sectionTitle}),s&&y.jsx("span",{className:`rounded px-1.5 py-0.5 text-[10px] font-mono font-caption ${r==="accepted"?"bg-success/15 text-success":"bg-destructive/15 text-destructive"}`,children:r})]}),y.jsx("button",{onClick:()=>a(!1),className:"rounded-md p-1 hover:bg-muted transition-colors",children:y.jsx(Xa,{className:"w-4 h-4 text-muted-foreground"})})]}),e.rationale&&!l&&y.jsx("p",{className:"text-sm text-muted-foreground italic leading-snug",children:e.rationale}),v(!0),x(!0)]})]}),document.body)]})},DF=({currentSection:e,sectionId:t,isEmbedded:n=!1,prefillMessage:r,prefillKey:i,onNavigateToSection:s,sections:o})=>{const a=w.useMemo(()=>t?`section-${t}`:"dashboard",[t]),{data:l}=yee(a),{sendMessage:u,isStreaming:c,streamingContent:d,stagedEdits:f,suggestions:h,isToolRunning:p,clearStream:m}=bee(),g=W6(),b=q6(),[v,x]=w.useState([]),[k,S]=w.useState(""),[C,E]=w.useState({}),[P,R]=w.useState([]),[A,L]=w.useState(null),I=w.useRef(null),U=w.useRef(null);w.useEffect(()=>{var $;r&&(S(r),($=U.current)==null||$.focus())},[i]);const[F,B]=w.useState(!1),q=w.useRef(null),H=typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window),M=()=>{var Me;if(F){(Me=q.current)==null||Me.stop();return}const $=window.SpeechRecognition||window.webkitSpeechRecognition,ie=new $;ie.continuous=!0,ie.interimResults=!0,ie.lang="en-US";const be=k.trim()?k.trimEnd()+" ":"";ie.onresult=gt=>{let on="";for(let _t=0;_t<gt.results.length;_t++)on+=gt.results[_t][0].transcript;S(be+on)},ie.onend=()=>B(!1),ie.onerror=()=>B(!1),q.current=ie,ie.start(),B(!0)},D=w.useMemo(()=>[{id:"initial",role:"assistant",content:n&&e?`You're viewing: **${e}**

Just tell me what you want to add or change  I'll figure out where it belongs in the playbook. It doesn't have to be about this section.

I can also help with gaps, questions, or drafting new content.`:`Hi! I'm your playbook assistant. Just tell me what you want to add or change  I'll figure out where it goes.

You can paste notes, describe a new technique, or ask me to fill a gap. I'll draft the content and place it in the right section for your review.`,timestamp:new Date().toISOString()},...l??[],...v],[l,v,n,e]);w.useEffect(()=>{x([]),E({}),R([])},[a]);const T=w.useRef(0);w.useEffect(()=>{l&&l.length>T.current&&v.length>0&&!c&&x([]),T.current=(l==null?void 0:l.length)??0},[l,c,v.length]),w.useEffect(()=>{var $;($=I.current)==null||$.scrollTo({top:I.current.scrollHeight,behavior:"smooth"})},[D,d,f]);const[J,O]=w.useState([]);w.useEffect(()=>{if(!o||!s)return;if(d){O(eN(d,o,t));return}const $=[...D].reverse().find(ie=>ie.role==="assistant"&&ie.id!=="initial");$&&O(eN($.content,o,t))},[d,D,o,t,s]);const _=async $=>{L($);try{await g.mutateAsync($),E(ie=>({...ie,[$]:"accepted"})),wa.success("Edit approved and applied!")}catch{wa.error("Failed to approve edit")}finally{L(null)}},W=async $=>{L($);try{await b.mutateAsync($),E(ie=>({...ie,[$]:"rejected"})),wa.success("Edit rejected")}catch{wa.error("Failed to reject edit")}finally{L(null)}},X=async $=>{var be;if(!$.trim()||c)return;(be=q.current)==null||be.stop(),R([]);const ie={id:`local-${Date.now()}`,role:"user",content:$,timestamp:new Date().toISOString()};x(Me=>[...Me,ie]),S(""),U.current&&(U.current.style.height="auto");try{const Me=await u($,{conversationId:a,sectionContext:t?{sectionId:t,sectionTitle:e??""}:void 0});(Me.edits.length>0||Me.content.trim())&&x(gt=>[...gt,{id:`assistant-${Date.now()}`,role:"assistant",content:Me.content,timestamp:new Date().toISOString(),edits:Me.edits.length>0?Me.edits:void 0}]),R(Me.suggestions),m()}catch{m()}},ne=()=>X(k);return y.jsxs(Be.div,{initial:{opacity:0,y:n?0:20},animate:{opacity:1,y:0},transition:{delay:n?0:.2},className:`flex flex-col ${n?"h-full bg-muted/30":"rounded-xl border border-border bg-card shadow-card h-[600px]"}`,children:[y.jsxs("div",{className:`flex items-center gap-2 px-5 py-4 ${n?"border-b border-border/50":"border-b border-border"}`,children:[y.jsx("div",{className:"w-7 h-7 rounded-lg gradient-primary flex items-center justify-center",children:y.jsx(tC,{className:"w-4 h-4 text-primary-foreground"})}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-sm text-foreground",children:"AI Assistant"}),y.jsx("p",{className:"text-[11px] text-muted-foreground",children:n?"Context-aware help":"Draft and edit playbook content"})]})]}),y.jsxs("div",{ref:I,className:"flex-1 overflow-y-auto px-5 py-4 space-y-4",children:[y.jsx(nl,{children:D.map($=>{var ie;return y.jsxs(Be.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:`flex gap-3 ${$.role==="user"?"flex-row-reverse":""}`,children:[y.jsx("div",{className:`w-7 h-7 rounded-lg flex items-center justify-center flex-shrink-0 ${$.role==="assistant"?"bg-primary/10 text-primary":"bg-secondary text-secondary-foreground"}`,children:$.role==="assistant"?y.jsx(jc,{className:"w-4 h-4"}):y.jsx(K7,{className:"w-4 h-4"})}),y.jsxs("div",{className:"max-w-[80%] space-y-2",children:[$.content&&y.jsx("div",{className:`rounded-xl px-4 py-3 text-sm leading-relaxed ${$.role==="assistant"?"bg-muted text-foreground":"bg-primary text-primary-foreground"}`,children:$.role==="assistant"?y.jsx(Yr,{children:$.content}):y.jsx("div",{className:"whitespace-pre-wrap",children:$.content})}),(ie=$.edits)==null?void 0:ie.map(be=>y.jsx(Ob,{edit:be,onAccept:_,onReject:W,status:C[be.id]??be.status??"pending",isProcessing:A===be.id},be.id))]})]},$.id)})}),d&&y.jsxs(Be.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"flex gap-3",children:[y.jsx("div",{className:"w-7 h-7 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:y.jsx(jc,{className:"w-4 h-4 text-primary"})}),y.jsxs("div",{className:"max-w-[80%] space-y-2",children:[y.jsx("div",{className:"rounded-xl px-4 py-3 text-sm leading-relaxed bg-muted text-foreground",children:y.jsx(Yr,{children:d})}),f.map($=>y.jsx(Ob,{edit:$,onAccept:_,onReject:W,status:C[$.id]??$.status??"pending",isProcessing:A===$.id},$.id))]})]}),!d&&f.length>0&&y.jsxs(Be.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"flex gap-3",children:[y.jsx("div",{className:"w-7 h-7 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:y.jsx(jc,{className:"w-4 h-4 text-primary"})}),y.jsx("div",{className:"max-w-[80%] space-y-2",children:f.map($=>y.jsx(Ob,{edit:$,onAccept:_,onReject:W,status:C[$.id]??$.status??"pending",isProcessing:A===$.id},$.id))})]}),c&&p&&y.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-3",children:[y.jsx("div",{className:"w-7 h-7 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:y.jsx(jc,{className:"w-4 h-4 text-primary"})}),y.jsxs("div",{className:"bg-muted rounded-xl px-4 py-3 flex items-center gap-2",children:[y.jsx(qe,{className:"w-3.5 h-3.5 text-primary animate-spin"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Staging edit..."})]})]}),c&&!d&&!p&&f.length===0&&y.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-3",children:[y.jsx("div",{className:"w-7 h-7 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:y.jsx(jc,{className:"w-4 h-4 text-primary"})}),y.jsx("div",{className:"bg-muted rounded-xl px-4 py-3",children:y.jsx("div",{className:"flex gap-1",children:[0,1,2].map($=>y.jsx(Be.div,{className:"w-1.5 h-1.5 rounded-full bg-muted-foreground",animate:{opacity:[.3,1,.3]},transition:{duration:1,repeat:1/0,delay:$*.2}},$))})})]}),c&&!p&&(d||f.length>0)&&y.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-2 pl-10 py-1",children:[y.jsx("div",{className:"flex gap-1",children:[0,1,2].map($=>y.jsx(Be.div,{className:"w-1 h-1 rounded-full bg-primary/40",animate:{opacity:[.3,1,.3]},transition:{duration:1,repeat:1/0,delay:$*.2}},$))}),y.jsx("span",{className:"text-[11px] text-muted-foreground",children:"Still working"})]}),(h.length>0||P.length>0)&&!c&&y.jsx(Be.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},className:"flex gap-3 pl-10",children:y.jsx("div",{className:"flex flex-wrap gap-2",children:(h.length>0?h:P).map($=>y.jsx("button",{onClick:()=>X($),className:"rounded-full border border-primary/20 bg-primary/10 hover:bg-primary/20 px-3 py-1.5 text-xs font-subheading text-primary transition-colors",children:$},$))})})]}),y.jsx("div",{className:"px-4 py-3 border-t border-border",children:y.jsxs("div",{className:"flex items-end gap-2 bg-muted rounded-xl px-4 py-2",children:[y.jsx("textarea",{ref:U,value:k,onChange:$=>{S($.target.value),$.target.style.height="auto",$.target.style.height=Math.min($.target.scrollHeight,120)+"px"},onKeyDown:$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),ne())},placeholder:"Ask me to draft content, fill gaps, or edit sections...",className:"flex-1 bg-transparent text-sm text-foreground placeholder:text-muted-foreground outline-none resize-none leading-relaxed py-1",rows:1,disabled:c}),H&&y.jsx("button",{onClick:M,disabled:c,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all disabled:opacity-30 ${F?"bg-red-500/15 text-red-500 animate-pulse":"text-muted-foreground hover:text-foreground"}`,title:F?"Stop listening":"Voice input",children:F?y.jsx(z7,{className:"w-4 h-4"}):y.jsx(B7,{className:"w-4 h-4"})}),y.jsx("button",{onClick:ne,disabled:!k.trim()||c,className:"w-8 h-8 rounded-lg gradient-primary flex items-center justify-center disabled:opacity-30 transition-opacity",children:y.jsx(vO,{className:"w-4 h-4 text-primary-foreground"})})]})}),J.length>0&&s&&y.jsxs("div",{className:"border-t border-border px-3 py-2 flex items-center gap-2 overflow-x-auto",children:[y.jsx("span",{className:"text-[10px] font-caption text-muted-foreground uppercase tracking-wide whitespace-nowrap flex-shrink-0",children:"Go to"}),J.map($=>y.jsx(Zbe,{title:NF($.title),onClick:()=>s($.id)},$.id))]})]})};function tve(){const e=Gt();return Nn({mutationFn:async t=>{const{data:n,error:r}=await ce.functions.invoke("publish",{body:{provider:t}});if(r)throw new Error(r.message||"Publish failed");return n},onSuccess:()=>{e.invalidateQueries({queryKey:["staged-edits"]})}})}function MF(){return ws({queryKey:["connections"],queryFn:async()=>{const{data:e,error:t}=await ce.from("connections").select("id, provider, workspace_id, connected_by, created_at").order("created_at",{ascending:!1});if(t)throw t;return e??[]}})}function OF(){return async e=>{const{data:t,error:n}=await ce.functions.invoke(`auth-${e}`,{body:{action:"connect"}});if(n)throw n;if(!(t!=null&&t.url))throw new Error("No OAuth URL returned");window.location.href=t.url}}const nve={confluence:"Confluence",notion:"Notion"},rve=()=>{var C;const{data:e,isLoading:t}=vee(),{data:n}=MF(),r=W6(),i=q6(),s=wee(),o=kee(),a=K6(),l=tve(),[u,c]=w.useState(!1),[d,f]=w.useState(null),[h,p]=w.useState(""),m=((C=n==null?void 0:n.find(E=>E.provider==="confluence"||E.provider==="notion"))==null?void 0:C.provider)??null,g=m?nve[m]??m:null;if(t||!e)return y.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-card flex items-center justify-center min-h-[300px]",children:y.jsx(qe,{className:"w-6 h-6 text-primary animate-spin"})});const b=e.filter(E=>E.status==="pending"),v=e.filter(E=>E.status==="rejected"),x=e.some(E=>E.status==="approved"),k=u?e:e.filter(E=>E.status!=="rejected"),S=async()=>{if(m)try{const E=await l.mutateAsync(m);wa.success(`Published ${E.published} section(s) to ${g}`)}catch(E){wa.error(E.message)}};return y.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"rounded-xl border border-border bg-card p-6 shadow-card",children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(D7,{className:"w-5 h-5 text-primary"}),y.jsx("h2",{className:"text-lg text-foreground",children:"Review & Publish"}),b.length>0&&y.jsxs("span",{className:"rounded-full bg-warning/15 text-warning text-xs font-caption px-2.5 py-0.5",children:[b.length," to review"]}),v.length>0&&y.jsxs("button",{onClick:()=>c(E=>!E),className:"flex items-center gap-1 rounded-full px-2.5 py-0.5 text-xs font-subheading text-muted-foreground hover:text-foreground transition-colors",children:[u?y.jsx(O7,{className:"w-3.5 h-3.5"}):y.jsx(I7,{className:"w-3.5 h-3.5"}),v.length," dismissed"]})]}),y.jsxs("div",{className:"flex gap-2",children:[g&&y.jsxs("button",{disabled:!x||l.isPending,onClick:S,className:"flex items-center gap-1.5 rounded-lg bg-primary px-4 py-2 text-sm font-subheading text-primary-foreground disabled:opacity-30 transition-opacity",children:[l.isPending?y.jsx(qe,{className:"w-3.5 h-3.5 animate-spin"}):y.jsx(vO,{className:"w-3.5 h-3.5"}),l.isSuccess?"Published!":`Publish to ${g}`]}),y.jsxs(aI,{children:[y.jsx(lI,{asChild:!0,children:y.jsxs("button",{className:"flex items-center gap-1.5 rounded-lg bg-secondary px-4 py-2 text-sm font-subheading text-secondary-foreground opacity-50 cursor-default",children:[y.jsx(P7,{className:"w-3.5 h-3.5"}),"Notify team"]})}),y.jsx(mC,{children:"Only available for users who have linked the Taskbase Sales Coach"})]})]})]}),y.jsxs("div",{className:"space-y-4",children:[k.map(E=>y.jsxs(Be.div,{layout:"position",className:`rounded-xl border p-5 transition-colors ${E.status==="approved"?"border-success/30 bg-card":E.status==="rejected"?"border-destructive/30 bg-destructive/5 opacity-50":"border-border bg-muted/30"}`,children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"flex items-center gap-2.5",children:[y.jsx("span",{className:"text-sm font-subheading text-foreground",children:E.section}),y.jsx("span",{className:`rounded-full px-2.5 py-0.5 text-xs font-caption ${E.status==="approved"?"bg-success/15 text-success":E.status==="rejected"?"bg-destructive/15 text-destructive":"bg-warning/15 text-warning"}`,children:E.status==="approved"?"Accepted":E.status==="rejected"?"Dismissed":"Needs review"}),E.source&&y.jsx("div",{className:`flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-subheading ${E.source==="chat"?"bg-primary/10 text-primary":"bg-secondary/50 text-secondary-foreground"}`,children:E.source==="chat"?y.jsxs(y.Fragment,{children:[y.jsx(tC,{className:"w-3 h-3"}),y.jsx("span",{children:"AI suggestion"})]}):y.jsxs(y.Fragment,{children:[y.jsx(H7,{className:"w-3 h-3"}),y.jsx("span",{children:"Your edit"})]})})]}),E.status==="approved"&&y.jsxs("button",{onClick:()=>s.mutate(E.id),disabled:s.isPending,className:"flex items-center gap-1.5 rounded-lg bg-muted px-3 py-1.5 text-xs font-subheading text-muted-foreground hover:text-foreground transition-colors",children:[y.jsx(cT,{className:"w-3 h-3"}),"Undo"]}),E.status==="rejected"&&y.jsxs("button",{onClick:()=>o.mutate(E.id),disabled:o.isPending,className:"flex items-center gap-1.5 rounded-lg bg-muted px-3 py-1.5 text-xs font-subheading text-muted-foreground hover:text-foreground transition-colors",children:[y.jsx(cT,{className:"w-3 h-3"}),"Undo"]})]}),d===E.id?y.jsxs("div",{className:"space-y-3",children:[y.jsx(A2,{markdown:h,onChange:p}),y.jsxs("div",{className:"flex gap-2 justify-end",children:[y.jsx("button",{onClick:()=>f(null),className:"rounded-lg px-4 py-2 text-sm font-subheading text-muted-foreground hover:text-foreground transition-colors",children:"Cancel"}),y.jsx("button",{disabled:!h.trim()||h===E.after||a.isPending,onClick:()=>{a.mutate({editId:E.id,afterText:h},{onSuccess:()=>f(null)})},className:"rounded-lg bg-primary px-4 py-2 text-sm font-subheading text-primary-foreground disabled:opacity-30 transition-opacity",children:a.isPending?"Saving...":"Save"})]})]}):y.jsxs("div",{children:[y.jsx(RF,{before:E.before,after:E.after,fullSize:!0}),y.jsx("div",{className:"flex items-center justify-end mt-3",children:E.status==="pending"&&y.jsxs("div",{className:"flex gap-2",children:[y.jsxs("button",{onClick:()=>{f(E.id),p(E.after)},className:"flex items-center gap-1.5 rounded-lg border border-border px-3 py-1.5 text-xs font-subheading text-muted-foreground hover:text-foreground hover:bg-muted/50 transition-colors",children:[y.jsx(eC,{className:"w-3 h-3"}),"Edit"]}),y.jsxs("button",{onClick:()=>i.mutate(E.id),disabled:i.isPending,className:"flex items-center gap-1.5 rounded-lg border border-destructive/30 px-3 py-1.5 text-xs font-subheading text-destructive hover:bg-destructive/10 transition-colors",children:[y.jsx(Xa,{className:"w-3.5 h-3.5"}),"Dismiss"]}),y.jsxs("button",{onClick:()=>r.mutate(E.id),disabled:r.isPending,className:"flex items-center gap-1.5 rounded-lg bg-success/15 px-4 py-1.5 text-xs font-overline text-success hover:bg-success/25 transition-colors",children:[y.jsx(of,{className:"w-3.5 h-3.5"}),"Accept"]})]})})]})]},E.id)),k.length===0&&y.jsx("div",{className:"text-center py-10 text-muted-foreground text-sm",children:e.length===0?"No suggested changes yet. Use the chat to get started.":'All suggestions have been dismissed. Click "dismissed" above to review them.'})]})]})};function P2(){const e=ws({queryKey:["playbook-sections"],queryFn:async()=>{const{data:t,error:n}=await ce.from("playbook_sections").select("*").order("sort_order");if(n)throw n;const{data:r,error:i}=await ce.from("section_skills").select("*");if(i)throw i;return(t??[]).map(s=>({id:s.id,title:s.title,content:s.content,contentJson:s.content_json??null,depth:s.depth??0,lastUpdated:s.last_updated,provider:s.provider??"pdf",skillsCovered:(r??[]).filter(o=>o.section_id===s.id).map(o=>({skillId:o.skill_id,coverageNote:o.coverage_note??null}))}))}});return{...e,isRefetching:e.isFetching&&!e.isLoading}}function ive(){const e=Gt();return Nn({mutationFn:async()=>{const t=[ce.from("section_skills").delete().neq("skill_id",""),ce.from("staged_edits").delete().neq("id","00000000-0000-0000-0000-000000000000"),ce.from("chat_messages").delete().neq("id","00000000-0000-0000-0000-000000000000")];for(const o of t){const{error:a}=await o;if(a)throw a}const{error:n}=await ce.from("playbook_sections").delete().neq("id","00000000-0000-0000-0000-000000000000");if(n)throw n;const{error:r}=await ce.from("imports").delete().neq("id","00000000-0000-0000-0000-000000000000");if(r)throw r;const{error:i}=await ce.from("connections").delete().neq("id","00000000-0000-0000-0000-000000000000");if(i)throw i;const{error:s}=await ce.from("user_skills").update({status:"missing",last_updated:null,section_title:null,coverage_note:null,fulfilled:!1}).neq("skill_id","");if(s)throw s},onSuccess:()=>{e.invalidateQueries({queryKey:["playbook-sections"]}),e.invalidateQueries({queryKey:["skills"]}),e.invalidateQueries({queryKey:["health-score"]}),e.invalidateQueries({queryKey:["analyzed-at"]}),e.invalidateQueries({queryKey:["staged-edits"]}),e.invalidateQueries({queryKey:["imports"]}),e.invalidateQueries({queryKey:["connections"]})}})}function sve(){const e=Gt();return Nn({mutationFn:async t=>{const{data:n,error:r}=await ce.from("playbook_sections").select("id").eq("provider",t);if(r)throw r;const i=(n??[]).map(a=>a.id);if(i.length===0)return;for(const a of i)await ce.from("section_skills").delete().eq("section_id",a);for(const a of i)await ce.from("staged_edits").delete().eq("section_id",a);const{error:s}=await ce.from("playbook_sections").delete().eq("provider",t);if(s)throw s;const{error:o}=await ce.functions.invoke("analyze");if(o)throw o},onSuccess:()=>{e.invalidateQueries({queryKey:["playbook-sections"]}),e.invalidateQueries({queryKey:["skills"]}),e.invalidateQueries({queryKey:["health-score"]}),e.invalidateQueries({queryKey:["analyzed-at"]}),e.invalidateQueries({queryKey:["staged-edits"]})}})}function ove(){const e=Gt();return Nn({mutationFn:async({id:t,content:n,contentJson:r})=>{const i={content:n,last_updated:new Date().toISOString().split("T")[0]};r!==void 0&&(i.content_json=r);const{error:s}=await ce.from("playbook_sections").update(i).eq("id",t);if(s)throw s},onSuccess:()=>{e.invalidateQueries({queryKey:["playbook-sections"]})}})}function IF(e){return e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function ave(e){const t=[],n=new Map;for(const r of e.split(`
`)){const i=r.match(/^(#{2,4})\s+(.+)/);if(!i)continue;const s=i[1].length,o=i[2].replace(/\*\*/g,"").replace(/`/g,"").trim();let a=IF(o);const l=n.get(a)??0;n.set(a,l+1),l>0&&(a=`${a}-${l+1}`),t.push({text:o,level:s,slug:a})}return t}const jF={pdf:"PDF Upload",taskbase:"Taskbase Template",notion:"Notion",confluence:"Confluence"},lve=({content:e,contentJson:t,className:n=""})=>{const r=w.useRef({content:e,contentJson:t}),i=o8({extensions:[j8.configure({codeBlock:{HTMLAttributes:{class:"tiptap-code-block"}}}),x8.configure({openOnClick:!0,HTMLAttributes:{class:"tiptap-link",target:"_blank",rel:"noopener noreferrer"}}),b2.configure({resizable:!1}),y2,m2,g2,EF.configure({html:!1})],content:t??e,editable:!1,editorProps:{attributes:{class:"tiptap-viewer-content"}}});return w.useEffect(()=>{if(!i)return;const s=r.current;s.content===e&&s.contentJson===t||(r.current={content:e,contentJson:t},t?i.commands.setContent(t):i.commands.setContent(e))},[e,t,i]),w.useEffect(()=>{if(!i)return;const o=i.options.element.querySelectorAll("h1, h2, h3, h4, h5, h6"),a=new Map;o.forEach(l=>{const u=(l.textContent??"").replace(/\*\*/g,"").replace(/`/g,"").trim();let c=IF(u);const d=a.get(c)??0;a.set(c,d+1),d>0&&(c=`${c}-${d+1}`),l.id=c})},[i,e,t]),i?y.jsx("div",{className:`text-sm leading-relaxed ${n}`,children:y.jsx(t2,{editor:i})}):null};var Ib=0;function LF(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??tN()),document.body.insertAdjacentElement("beforeend",e[1]??tN()),Ib++,()=>{Ib===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ib--}},[])}function tN(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var jb="focusScope.autoFocusOnMount",Lb="focusScope.autoFocusOnUnmount",nN={bubbles:!1,cancelable:!0},uve="FocusScope",R2=w.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=e,[a,l]=w.useState(null),u=Ri(i),c=Ri(s),d=w.useRef(null),f=Tt(t,m=>l(m)),h=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let m=function(x){if(h.paused||!a)return;const k=x.target;a.contains(k)?d.current=k:zs(d.current,{select:!0})},g=function(x){if(h.paused||!a)return;const k=x.relatedTarget;k!==null&&(a.contains(k)||zs(d.current,{select:!0}))},b=function(x){if(document.activeElement===document.body)for(const S of x)S.removedNodes.length>0&&zs(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const v=new MutationObserver(b);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),v.disconnect()}}},[r,a,h.paused]),w.useEffect(()=>{if(a){iN.add(h);const m=document.activeElement;if(!a.contains(m)){const b=new CustomEvent(jb,nN);a.addEventListener(jb,u),a.dispatchEvent(b),b.defaultPrevented||(cve(mve(FF(a)),{select:!0}),document.activeElement===m&&zs(a))}return()=>{a.removeEventListener(jb,u),setTimeout(()=>{const b=new CustomEvent(Lb,nN);a.addEventListener(Lb,c),a.dispatchEvent(b),b.defaultPrevented||zs(m??document.body,{select:!0}),a.removeEventListener(Lb,c),iN.remove(h)},0)}}},[a,u,c,h]);const p=w.useCallback(m=>{if(!n&&!r||h.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(g&&b){const v=m.currentTarget,[x,k]=dve(v);x&&k?!m.shiftKey&&b===k?(m.preventDefault(),n&&zs(x,{select:!0})):m.shiftKey&&b===x&&(m.preventDefault(),n&&zs(k,{select:!0})):b===v&&m.preventDefault()}},[n,r,h.paused]);return y.jsx(De.div,{tabIndex:-1,...o,ref:f,onKeyDown:p})});R2.displayName=uve;function cve(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(zs(r,{select:t}),document.activeElement!==n)return}function dve(e){const t=FF(e),n=rN(t,e),r=rN(t.reverse(),e);return[n,r]}function FF(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function rN(e,t){for(const n of e)if(!fve(n,{upTo:t}))return n}function fve(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function hve(e){return e instanceof HTMLInputElement&&"select"in e}function zs(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&hve(e)&&t&&e.select()}}var iN=pve();function pve(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=sN(e,t),e.unshift(t)},remove(t){var n;e=sN(e,t),(n=e[0])==null||n.resume()}}}function sN(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function mve(e){return e.filter(t=>t.tagName!=="A")}var gve=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ml=new WeakMap,_p=new WeakMap,Ap={},Fb=0,$F=function(e){return e&&(e.host||$F(e.parentNode))},yve=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=$F(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},bve=function(e,t,n,r){var i=yve(t,Array.isArray(e)?e:[e]);Ap[n]||(Ap[n]=new WeakMap);var s=Ap[n],o=[],a=new Set,l=new Set(i),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};i.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))c(f);else try{var h=f.getAttribute(r),p=h!==null&&h!=="false",m=(Ml.get(f)||0)+1,g=(s.get(f)||0)+1;Ml.set(f,m),s.set(f,g),o.push(f),m===1&&p&&_p.set(f,!0),g===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return c(t),a.clear(),Fb++,function(){o.forEach(function(d){var f=Ml.get(d)-1,h=s.get(d)-1;Ml.set(d,f),s.set(d,h),f||(_p.has(d)||d.removeAttribute(r),_p.delete(d)),h||d.removeAttribute(n)}),Fb--,Fb||(Ml=new WeakMap,Ml=new WeakMap,_p=new WeakMap,Ap={})}},zF=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=gve(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),bve(r,i,n,"aria-hidden")):function(){return null}},um="right-scroll-bar-position",cm="width-before-scroll-bar",vve="with-scroll-bars-hidden",xve="--removed-body-scroll-bar-size";function $b(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function wve(e,t){var n=w.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var kve=typeof window<"u"?w.useLayoutEffect:w.useEffect,oN=new WeakMap;function Cve(e,t){var n=wve(null,function(r){return e.forEach(function(i){return $b(i,r)})});return kve(function(){var r=oN.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||$b(a,null)}),s.forEach(function(a){i.has(a)||$b(a,o)})}oN.set(n,e)},[e]),n}function Sve(e){return e}function Eve(e,t){t===void 0&&(t=Sve);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return i}function Tve(e){e===void 0&&(e={});var t=Eve(null);return t.options=ki({async:!0,ssr:!1},e),t}var BF=function(e){var t=e.sideCar,n=vc(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,ki({},n))};BF.isSideCarExport=!0;function _ve(e,t){return e.useMedium(t),BF}var VF=Tve(),zb=function(){},by=w.forwardRef(function(e,t){var n=w.useRef(null),r=w.useState({onScrollCapture:zb,onWheelCapture:zb,onTouchMoveCapture:zb}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,d=e.shards,f=e.sideCar,h=e.noRelative,p=e.noIsolation,m=e.inert,g=e.allowPinchZoom,b=e.as,v=b===void 0?"div":b,x=e.gapMode,k=vc(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,C=Cve([n,t]),E=ki(ki({},k),i);return w.createElement(w.Fragment,null,c&&w.createElement(S,{sideCar:VF,removeScrollBar:u,shards:d,noRelative:h,noIsolation:p,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:x}),o?w.cloneElement(w.Children.only(a),ki(ki({},E),{ref:C})):w.createElement(v,ki({},E,{className:l,ref:C}),a))});by.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};by.classNames={fullWidth:cm,zeroRight:um};var Ave=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Pve(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ave();return t&&e.setAttribute("nonce",t),e}function Rve(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Nve(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Dve=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Pve())&&(Rve(t,n),Nve(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Mve=function(){var e=Dve();return function(t,n){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},UF=function(){var e=Mve(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Ove={left:0,top:0,right:0,gap:0},Bb=function(e){return parseInt(e||"",10)||0},Ive=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Bb(n),Bb(r),Bb(i)]},jve=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ove;var t=Ive(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Lve=UF(),Tu="data-scroll-locked",Fve=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(vve,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Tu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(um,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(cm,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(um," .").concat(um,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(cm," .").concat(cm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Tu,`] {
    `).concat(xve,": ").concat(a,`px;
  }
`)},aN=function(){var e=parseInt(document.body.getAttribute(Tu)||"0",10);return isFinite(e)?e:0},$ve=function(){w.useEffect(function(){return document.body.setAttribute(Tu,(aN()+1).toString()),function(){var e=aN()-1;e<=0?document.body.removeAttribute(Tu):document.body.setAttribute(Tu,e.toString())}},[])},zve=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;$ve();var s=w.useMemo(function(){return jve(i)},[i]);return w.createElement(Lve,{styles:Fve(s,!t,i,n?"":"!important")})},qw=!1;if(typeof window<"u")try{var Pp=Object.defineProperty({},"passive",{get:function(){return qw=!0,!0}});window.addEventListener("test",Pp,Pp),window.removeEventListener("test",Pp,Pp)}catch{qw=!1}var Ol=qw?{passive:!1}:!1,Bve=function(e){return e.tagName==="TEXTAREA"},HF=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Bve(e)&&n[t]==="visible")},Vve=function(e){return HF(e,"overflowY")},Uve=function(e){return HF(e,"overflowX")},lN=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=WF(e,r);if(i){var s=qF(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Hve=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Wve=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},WF=function(e,t){return e==="v"?Vve(t):Uve(t)},qF=function(e,t){return e==="v"?Hve(t):Wve(t)},qve=function(e,t){return e==="h"&&t==="rtl"?-1:1},Kve=function(e,t,n,r,i){var s=qve(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,l=t.contains(a),u=!1,c=o>0,d=0,f=0;do{if(!a)break;var h=qF(e,a),p=h[0],m=h[1],g=h[2],b=m-g-s*p;(p||b)&&WF(e,a)&&(d+=b,f+=p);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&(Math.abs(d)<1||!i)||!c&&(Math.abs(f)<1||!i))&&(u=!0),u},Rp=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},uN=function(e){return[e.deltaX,e.deltaY]},cN=function(e){return e&&"current"in e?e.current:e},Gve=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Jve=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Qve=0,Il=[];function Yve(e){var t=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),i=w.useState(Qve++)[0],s=w.useState(UF)[0],o=w.useRef(e);w.useEffect(function(){o.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=_q([e.lockRef.current],(e.shards||[]).map(cN),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=w.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var b=Rp(m),v=n.current,x="deltaX"in m?m.deltaX:v[0]-b[0],k="deltaY"in m?m.deltaY:v[1]-b[1],S,C=m.target,E=Math.abs(x)>Math.abs(k)?"h":"v";if("touches"in m&&E==="h"&&C.type==="range")return!1;var P=lN(E,C);if(!P)return!0;if(P?S=E:(S=E==="v"?"h":"v",P=lN(E,C)),!P)return!1;if(!r.current&&"changedTouches"in m&&(x||k)&&(r.current=S),!S)return!0;var R=r.current||S;return Kve(R,g,m,R==="h"?x:k,!0)},[]),l=w.useCallback(function(m){var g=m;if(!(!Il.length||Il[Il.length-1]!==s)){var b="deltaY"in g?uN(g):Rp(g),v=t.current.filter(function(S){return S.name===g.type&&(S.target===g.target||g.target===S.shadowParent)&&Gve(S.delta,b)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var x=(o.current.shards||[]).map(cN).filter(Boolean).filter(function(S){return S.contains(g.target)}),k=x.length>0?a(g,x[0]):!o.current.noIsolation;k&&g.cancelable&&g.preventDefault()}}},[]),u=w.useCallback(function(m,g,b,v){var x={name:m,delta:g,target:b,should:v,shadowParent:Xve(b)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(k){return k!==x})},1)},[]),c=w.useCallback(function(m){n.current=Rp(m),r.current=void 0},[]),d=w.useCallback(function(m){u(m.type,uN(m),m.target,a(m,e.lockRef.current))},[]),f=w.useCallback(function(m){u(m.type,Rp(m),m.target,a(m,e.lockRef.current))},[]);w.useEffect(function(){return Il.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ol),document.addEventListener("touchmove",l,Ol),document.addEventListener("touchstart",c,Ol),function(){Il=Il.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Ol),document.removeEventListener("touchmove",l,Ol),document.removeEventListener("touchstart",c,Ol)}},[]);var h=e.removeScrollBar,p=e.inert;return w.createElement(w.Fragment,null,p?w.createElement(s,{styles:Jve(i)}):null,h?w.createElement(zve,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Xve(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Zve=_ve(VF,Yve);var N2=w.forwardRef(function(e,t){return w.createElement(by,ki({},e,{ref:t,sideCar:Zve}))});N2.classNames=by.classNames;var vy="Popover",[KF,Vwe]=xs(vy,[gc]),xh=gc(),[exe,ta]=KF(vy),GF=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=e,a=xh(t),l=w.useRef(null),[u,c]=w.useState(!1),[d,f]=ml({prop:r,defaultProp:i??!1,onChange:s,caller:vy});return y.jsx(dC,{...a,children:y.jsx(exe,{scope:t,contentId:Er(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:w.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:u,onCustomAnchorAdd:w.useCallback(()=>c(!0),[]),onCustomAnchorRemove:w.useCallback(()=>c(!1),[]),modal:o,children:n})})};GF.displayName=vy;var JF="PopoverAnchor",txe=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ta(JF,n),s=xh(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return w.useEffect(()=>(o(),()=>a()),[o,a]),y.jsx(A0,{...s,...r,ref:t})});txe.displayName=JF;var QF="PopoverTrigger",YF=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ta(QF,n),s=xh(n),o=Tt(t,i.triggerRef),a=y.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":n$(i.open),...r,ref:o,onClick:Se(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:y.jsx(A0,{asChild:!0,...s,children:a})});YF.displayName=QF;var D2="PopoverPortal",[nxe,rxe]=KF(D2,{forceMount:void 0}),XF=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,s=ta(D2,t);return y.jsx(nxe,{scope:t,forceMount:n,children:y.jsx(oi,{present:n||s.open,children:y.jsx(w0,{asChild:!0,container:i,children:r})})})};XF.displayName=D2;var ac="PopoverContent",ZF=w.forwardRef((e,t)=>{const n=rxe(ac,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,s=ta(ac,e.__scopePopover);return y.jsx(oi,{present:r||s.open,children:s.modal?y.jsx(sxe,{...i,ref:t}):y.jsx(oxe,{...i,ref:t})})});ZF.displayName=ac;var ixe=sf("PopoverContent.RemoveScroll"),sxe=w.forwardRef((e,t)=>{const n=ta(ac,e.__scopePopover),r=w.useRef(null),i=Tt(t,r),s=w.useRef(!1);return w.useEffect(()=>{const o=r.current;if(o)return zF(o)},[]),y.jsx(N2,{as:ixe,allowPinchZoom:!0,children:y.jsx(e$,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Se(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,u=a.button===2||l;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Se(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),oxe=w.forwardRef((e,t)=>{const n=ta(ac,e.__scopePopover),r=w.useRef(!1),i=w.useRef(!1);return y.jsx(e$,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),e$=w.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:c,...d}=e,f=ta(ac,n),h=xh(n);return LF(),y.jsx(R2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:y.jsx(fc,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:y.jsx(fC,{"data-state":n$(f.open),role:"dialog",id:f.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),t$="PopoverClose",axe=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=ta(t$,n);return y.jsx(De.button,{type:"button",...r,ref:t,onClick:Se(e.onClick,()=>i.onOpenChange(!1))})});axe.displayName=t$;var lxe="PopoverArrow",uxe=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=xh(n);return y.jsx(hC,{...i,...r,ref:t})});uxe.displayName=lxe;function n$(e){return e?"open":"closed"}var cxe=GF,dxe=YF,fxe=XF,r$=ZF;const hxe=cxe,pxe=dxe,i$=w.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},i)=>y.jsx(fxe,{children:y.jsx(r$,{ref:i,align:t,sideOffset:n,className:Ct("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));i$.displayName=r$.displayName;var dN=1,mxe=.9,gxe=.8,yxe=.17,Vb=.1,Ub=.999,bxe=.9999,vxe=.99,xxe=/[\\\/_+.#"@\[\(\{&]/,wxe=/[\\\/_+.#"@\[\(\{&]/g,kxe=/[\s-]/,s$=/[\s-]/g;function Kw(e,t,n,r,i,s,o){if(s===t.length)return i===e.length?dN:vxe;var a=`${i},${s}`;if(o[a]!==void 0)return o[a];for(var l=r.charAt(s),u=n.indexOf(l,i),c=0,d,f,h,p;u>=0;)d=Kw(e,t,n,r,u+1,s+1,o),d>c&&(u===i?d*=dN:xxe.test(e.charAt(u-1))?(d*=gxe,h=e.slice(i,u-1).match(wxe),h&&i>0&&(d*=Math.pow(Ub,h.length))):kxe.test(e.charAt(u-1))?(d*=mxe,p=e.slice(i,u-1).match(s$),p&&i>0&&(d*=Math.pow(Ub,p.length))):(d*=yxe,i>0&&(d*=Math.pow(Ub,u-i))),e.charAt(u)!==t.charAt(s)&&(d*=bxe)),(d<Vb&&n.charAt(u-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(u-1)!==r.charAt(s))&&(f=Kw(e,t,n,r,u+1,s+2,o),f*Vb>d&&(d=f*Vb)),d>c&&(c=d),u=n.indexOf(l,u+1);return o[a]=c,c}function fN(e){return e.toLowerCase().replace(s$," ")}function Cxe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,Kw(e,t,fN(e),fN(t),0,0,{})}var xy="Dialog",[o$,Uwe]=xs(xy),[Sxe,ui]=o$(xy),a$=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,a=w.useRef(null),l=w.useRef(null),[u,c]=ml({prop:r,defaultProp:i??!1,onChange:s,caller:xy});return y.jsx(Sxe,{scope:t,triggerRef:a,contentRef:l,contentId:Er(),titleId:Er(),descriptionId:Er(),open:u,onOpenChange:c,onOpenToggle:w.useCallback(()=>c(d=>!d),[c]),modal:o,children:n})};a$.displayName=xy;var l$="DialogTrigger",Exe=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ui(l$,n),s=Tt(t,i.triggerRef);return y.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":I2(i.open),...r,ref:s,onClick:Se(e.onClick,i.onOpenToggle)})});Exe.displayName=l$;var M2="DialogPortal",[Txe,u$]=o$(M2,{forceMount:void 0}),c$=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,s=ui(M2,t);return y.jsx(Txe,{scope:t,forceMount:n,children:w.Children.map(r,o=>y.jsx(oi,{present:n||s.open,children:y.jsx(w0,{asChild:!0,container:i,children:o})}))})};c$.displayName=M2;var r0="DialogOverlay",d$=w.forwardRef((e,t)=>{const n=u$(r0,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=ui(r0,e.__scopeDialog);return s.modal?y.jsx(oi,{present:r||s.open,children:y.jsx(Axe,{...i,ref:t})}):null});d$.displayName=r0;var _xe=sf("DialogOverlay.RemoveScroll"),Axe=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ui(r0,n);return y.jsx(N2,{as:_xe,allowPinchZoom:!0,shards:[i.contentRef],children:y.jsx(De.div,{"data-state":I2(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),dl="DialogContent",f$=w.forwardRef((e,t)=>{const n=u$(dl,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=ui(dl,e.__scopeDialog);return y.jsx(oi,{present:r||s.open,children:s.modal?y.jsx(Pxe,{...i,ref:t}):y.jsx(Rxe,{...i,ref:t})})});f$.displayName=dl;var Pxe=w.forwardRef((e,t)=>{const n=ui(dl,e.__scopeDialog),r=w.useRef(null),i=Tt(t,n.contentRef,r);return w.useEffect(()=>{const s=r.current;if(s)return zF(s)},[]),y.jsx(h$,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Se(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Se(e.onFocusOutside,s=>s.preventDefault())})}),Rxe=w.forwardRef((e,t)=>{const n=ui(dl,e.__scopeDialog),r=w.useRef(!1),i=w.useRef(!1);return y.jsx(h$,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),h$=w.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=e,a=ui(dl,n),l=w.useRef(null),u=Tt(t,l);return LF(),y.jsxs(y.Fragment,{children:[y.jsx(R2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:y.jsx(fc,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":I2(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(Nxe,{titleId:a.titleId}),y.jsx(Mxe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),O2="DialogTitle",p$=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ui(O2,n);return y.jsx(De.h2,{id:i.titleId,...r,ref:t})});p$.displayName=O2;var m$="DialogDescription",g$=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ui(m$,n);return y.jsx(De.p,{id:i.descriptionId,...r,ref:t})});g$.displayName=m$;var y$="DialogClose",b$=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ui(y$,n);return y.jsx(De.button,{type:"button",...r,ref:t,onClick:Se(e.onClick,()=>i.onOpenChange(!1))})});b$.displayName=y$;function I2(e){return e?"open":"closed"}var v$="DialogTitleWarning",[Hwe,x$]=MB(v$,{contentName:dl,titleName:O2,docsSlug:"dialog"}),Nxe=({titleId:e})=>{const t=x$(v$),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Dxe="DialogDescriptionWarning",Mxe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${x$(Dxe).contentName}}.`;return w.useEffect(()=>{var s;const i=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Oxe=a$,w$=c$,j2=d$,L2=f$,k$=p$,C$=g$,Ixe=b$,Qc='[cmdk-group=""]',Hb='[cmdk-group-items=""]',jxe='[cmdk-group-heading=""]',S$='[cmdk-item=""]',hN=`${S$}:not([aria-disabled="true"])`,Gw="cmdk-item-select",Hl="data-value",Lxe=(e,t,n)=>Cxe(e,t,n),E$=w.createContext(void 0),wh=()=>w.useContext(E$),T$=w.createContext(void 0),F2=()=>w.useContext(T$),_$=w.createContext(void 0),A$=w.forwardRef((e,t)=>{let n=Wl(()=>{var O,_;return{search:"",value:(_=(O=e.value)!=null?O:e.defaultValue)!=null?_:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Wl(()=>new Set),i=Wl(()=>new Map),s=Wl(()=>new Map),o=Wl(()=>new Set),a=P$(e),{label:l,children:u,value:c,onValueChange:d,filter:f,shouldFilter:h,loop:p,disablePointerSelection:m=!1,vimBindings:g=!0,...b}=e,v=Er(),x=Er(),k=Er(),S=w.useRef(null),C=Gxe();fl(()=>{if(c!==void 0){let O=c.trim();n.current.value=O,E.emit()}},[c]),fl(()=>{C(6,U)},[]);let E=w.useMemo(()=>({subscribe:O=>(o.current.add(O),()=>o.current.delete(O)),snapshot:()=>n.current,setState:(O,_,W)=>{var X,ne,$,ie;if(!Object.is(n.current[O],_)){if(n.current[O]=_,O==="search")I(),A(),C(1,L);else if(O==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let be=document.getElementById(k);be?be.focus():(X=document.getElementById(v))==null||X.focus()}if(C(7,()=>{var be;n.current.selectedItemId=(be=F())==null?void 0:be.id,E.emit()}),W||C(5,U),((ne=a.current)==null?void 0:ne.value)!==void 0){let be=_??"";(ie=($=a.current).onValueChange)==null||ie.call($,be);return}}E.emit()}},emit:()=>{o.current.forEach(O=>O())}}),[]),P=w.useMemo(()=>({value:(O,_,W)=>{var X;_!==((X=s.current.get(O))==null?void 0:X.value)&&(s.current.set(O,{value:_,keywords:W}),n.current.filtered.items.set(O,R(_,W)),C(2,()=>{A(),E.emit()}))},item:(O,_)=>(r.current.add(O),_&&(i.current.has(_)?i.current.get(_).add(O):i.current.set(_,new Set([O]))),C(3,()=>{I(),A(),n.current.value||L(),E.emit()}),()=>{s.current.delete(O),r.current.delete(O),n.current.filtered.items.delete(O);let W=F();C(4,()=>{I(),(W==null?void 0:W.getAttribute("id"))===O&&L(),E.emit()})}),group:O=>(i.current.has(O)||i.current.set(O,new Set),()=>{s.current.delete(O),i.current.delete(O)}),filter:()=>a.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:v,inputId:k,labelId:x,listInnerRef:S}),[]);function R(O,_){var W,X;let ne=(X=(W=a.current)==null?void 0:W.filter)!=null?X:Lxe;return O?ne(O,n.current.search,_):0}function A(){if(!n.current.search||a.current.shouldFilter===!1)return;let O=n.current.filtered.items,_=[];n.current.filtered.groups.forEach(X=>{let ne=i.current.get(X),$=0;ne.forEach(ie=>{let be=O.get(ie);$=Math.max(be,$)}),_.push([X,$])});let W=S.current;B().sort((X,ne)=>{var $,ie;let be=X.getAttribute("id"),Me=ne.getAttribute("id");return(($=O.get(Me))!=null?$:0)-((ie=O.get(be))!=null?ie:0)}).forEach(X=>{let ne=X.closest(Hb);ne?ne.appendChild(X.parentElement===ne?X:X.closest(`${Hb} > *`)):W.appendChild(X.parentElement===W?X:X.closest(`${Hb} > *`))}),_.sort((X,ne)=>ne[1]-X[1]).forEach(X=>{var ne;let $=(ne=S.current)==null?void 0:ne.querySelector(`${Qc}[${Hl}="${encodeURIComponent(X[0])}"]`);$==null||$.parentElement.appendChild($)})}function L(){let O=B().find(W=>W.getAttribute("aria-disabled")!=="true"),_=O==null?void 0:O.getAttribute(Hl);E.setState("value",_||void 0)}function I(){var O,_,W,X;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let ne=0;for(let $ of r.current){let ie=(_=(O=s.current.get($))==null?void 0:O.value)!=null?_:"",be=(X=(W=s.current.get($))==null?void 0:W.keywords)!=null?X:[],Me=R(ie,be);n.current.filtered.items.set($,Me),Me>0&&ne++}for(let[$,ie]of i.current)for(let be of ie)if(n.current.filtered.items.get(be)>0){n.current.filtered.groups.add($);break}n.current.filtered.count=ne}function U(){var O,_,W;let X=F();X&&(((O=X.parentElement)==null?void 0:O.firstChild)===X&&((W=(_=X.closest(Qc))==null?void 0:_.querySelector(jxe))==null||W.scrollIntoView({block:"nearest"})),X.scrollIntoView({block:"nearest"}))}function F(){var O;return(O=S.current)==null?void 0:O.querySelector(`${S$}[aria-selected="true"]`)}function B(){var O;return Array.from(((O=S.current)==null?void 0:O.querySelectorAll(hN))||[])}function q(O){let _=B()[O];_&&E.setState("value",_.getAttribute(Hl))}function H(O){var _;let W=F(),X=B(),ne=X.findIndex(ie=>ie===W),$=X[ne+O];(_=a.current)!=null&&_.loop&&($=ne+O<0?X[X.length-1]:ne+O===X.length?X[0]:X[ne+O]),$&&E.setState("value",$.getAttribute(Hl))}function M(O){let _=F(),W=_==null?void 0:_.closest(Qc),X;for(;W&&!X;)W=O>0?qxe(W,Qc):Kxe(W,Qc),X=W==null?void 0:W.querySelector(hN);X?E.setState("value",X.getAttribute(Hl)):H(O)}let D=()=>q(B().length-1),T=O=>{O.preventDefault(),O.metaKey?D():O.altKey?M(1):H(1)},J=O=>{O.preventDefault(),O.metaKey?q(0):O.altKey?M(-1):H(-1)};return w.createElement(De.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:O=>{var _;(_=b.onKeyDown)==null||_.call(b,O);let W=O.nativeEvent.isComposing||O.keyCode===229;if(!(O.defaultPrevented||W))switch(O.key){case"n":case"j":{g&&O.ctrlKey&&T(O);break}case"ArrowDown":{T(O);break}case"p":case"k":{g&&O.ctrlKey&&J(O);break}case"ArrowUp":{J(O);break}case"Home":{O.preventDefault(),q(0);break}case"End":{O.preventDefault(),D();break}case"Enter":{O.preventDefault();let X=F();if(X){let ne=new Event(Gw);X.dispatchEvent(ne)}}}}},w.createElement("label",{"cmdk-label":"",htmlFor:P.inputId,id:P.labelId,style:Qxe},l),wy(e,O=>w.createElement(T$.Provider,{value:E},w.createElement(E$.Provider,{value:P},O))))}),Fxe=w.forwardRef((e,t)=>{var n,r;let i=Er(),s=w.useRef(null),o=w.useContext(_$),a=wh(),l=P$(e),u=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;fl(()=>{if(!u)return a.item(i,o==null?void 0:o.id)},[u]);let c=R$(i,s,[e.value,e.children,s],e.keywords),d=F2(),f=Ho(C=>C.value&&C.value===c.current),h=Ho(C=>u||a.filter()===!1?!0:C.search?C.filtered.items.get(i)>0:!0);w.useEffect(()=>{let C=s.current;if(!(!C||e.disabled))return C.addEventListener(Gw,p),()=>C.removeEventListener(Gw,p)},[h,e.onSelect,e.disabled]);function p(){var C,E;m(),(E=(C=l.current).onSelect)==null||E.call(C,c.current)}function m(){d.setState("value",c.current,!0)}if(!h)return null;let{disabled:g,value:b,onSelect:v,forceMount:x,keywords:k,...S}=e;return w.createElement(De.div,{ref:Ya(s,t),...S,id:i,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!f,"data-disabled":!!g,"data-selected":!!f,onPointerMove:g||a.getDisablePointerSelection()?void 0:m,onClick:g?void 0:p},e.children)}),$xe=w.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...s}=e,o=Er(),a=w.useRef(null),l=w.useRef(null),u=Er(),c=wh(),d=Ho(h=>i||c.filter()===!1?!0:h.search?h.filtered.groups.has(o):!0);fl(()=>c.group(o),[]),R$(o,a,[e.value,e.heading,l]);let f=w.useMemo(()=>({id:o,forceMount:i}),[i]);return w.createElement(De.div,{ref:Ya(a,t),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&w.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),wy(e,h=>w.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},w.createElement(_$.Provider,{value:f},h))))}),zxe=w.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=w.useRef(null),s=Ho(o=>!o.search);return!n&&!s?null:w.createElement(De.div,{ref:Ya(i,t),...r,"cmdk-separator":"",role:"separator"})}),Bxe=w.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=e.value!=null,s=F2(),o=Ho(u=>u.search),a=Ho(u=>u.selectedItemId),l=wh();return w.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),w.createElement(De.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":a,id:l.inputId,type:"text",value:i?e.value:o,onChange:u=>{i||s.setState("search",u.target.value),n==null||n(u.target.value)}})}),Vxe=w.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...i}=e,s=w.useRef(null),o=w.useRef(null),a=Ho(u=>u.selectedItemId),l=wh();return w.useEffect(()=>{if(o.current&&s.current){let u=o.current,c=s.current,d,f=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let h=u.offsetHeight;c.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return f.observe(u),()=>{cancelAnimationFrame(d),f.unobserve(u)}}},[]),w.createElement(De.div,{ref:Ya(s,t),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:l.listId},wy(e,u=>w.createElement("div",{ref:Ya(o,l.listInnerRef),"cmdk-list-sizer":""},u)))}),Uxe=w.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:s,container:o,...a}=e;return w.createElement(Oxe,{open:n,onOpenChange:r},w.createElement(w$,{container:o},w.createElement(j2,{"cmdk-overlay":"",className:i}),w.createElement(L2,{"aria-label":e.label,"cmdk-dialog":"",className:s},w.createElement(A$,{ref:t,...a}))))}),Hxe=w.forwardRef((e,t)=>Ho(n=>n.filtered.count===0)?w.createElement(De.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Wxe=w.forwardRef((e,t)=>{let{progress:n,children:r,label:i="Loading...",...s}=e;return w.createElement(De.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},wy(e,o=>w.createElement("div",{"aria-hidden":!0},o)))}),qn=Object.assign(A$,{List:Vxe,Item:Fxe,Input:Bxe,Group:$xe,Separator:zxe,Dialog:Uxe,Empty:Hxe,Loading:Wxe});function qxe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Kxe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function P$(e){let t=w.useRef(e);return fl(()=>{t.current=e}),t}var fl=typeof window>"u"?w.useEffect:w.useLayoutEffect;function Wl(e){let t=w.useRef();return t.current===void 0&&(t.current=e()),t}function Ho(e){let t=F2(),n=()=>e(t.snapshot());return w.useSyncExternalStore(t.subscribe,n,n)}function R$(e,t,n,r=[]){let i=w.useRef(),s=wh();return fl(()=>{var o;let a=(()=>{var u;for(let c of n){if(typeof c=="string")return c.trim();if(typeof c=="object"&&"current"in c)return c.current?(u=c.current.textContent)==null?void 0:u.trim():i.current}})(),l=r.map(u=>u.trim());s.value(e,a,l),(o=t.current)==null||o.setAttribute(Hl,a),i.current=a}),i}var Gxe=()=>{let[e,t]=w.useState(),n=Wl(()=>new Map);return fl(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,i)=>{n.current.set(r,i),t({})}};function Jxe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function wy({asChild:e,children:t},n){return e&&w.isValidElement(t)?w.cloneElement(Jxe(t),{ref:t.ref},n(t.props.children)):n(t)}var Qxe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Yxe=w$,N$=w.forwardRef(({className:e,...t},n)=>y.jsx(j2,{ref:n,className:Ct("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));N$.displayName=j2.displayName;const Xxe=w.forwardRef(({className:e,children:t,...n},r)=>y.jsxs(Yxe,{children:[y.jsx(N$,{}),y.jsxs(L2,{ref:r,className:Ct("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,y.jsxs(Ixe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[y.jsx(Xa,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Xxe.displayName=L2.displayName;const Zxe=w.forwardRef(({className:e,...t},n)=>y.jsx(k$,{ref:n,className:Ct("text-lg font-semibold leading-none tracking-tight",e),...t}));Zxe.displayName=k$.displayName;const ewe=w.forwardRef(({className:e,...t},n)=>y.jsx(C$,{ref:n,className:Ct("text-sm text-muted-foreground",e),...t}));ewe.displayName=C$.displayName;const D$=w.forwardRef(({className:e,...t},n)=>y.jsx(qn,{ref:n,className:Ct("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));D$.displayName=qn.displayName;const M$=w.forwardRef(({className:e,...t},n)=>y.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[y.jsx(q7,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),y.jsx(qn.Input,{ref:n,className:Ct("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));M$.displayName=qn.Input.displayName;const O$=w.forwardRef(({className:e,...t},n)=>y.jsx(qn.List,{ref:n,className:Ct("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));O$.displayName=qn.List.displayName;const I$=w.forwardRef((e,t)=>y.jsx(qn.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));I$.displayName=qn.Empty.displayName;const Jw=w.forwardRef(({className:e,...t},n)=>y.jsx(qn.Group,{ref:n,className:Ct("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Jw.displayName=qn.Group.displayName;const twe=w.forwardRef(({className:e,...t},n)=>y.jsx(qn.Separator,{ref:n,className:Ct("-mx-1 h-px bg-border",e),...t}));twe.displayName=qn.Separator.displayName;const Qw=w.forwardRef(({className:e,...t},n)=>y.jsx(qn.Item,{ref:n,className:Ct("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));Qw.displayName=qn.Item.displayName;var ky="Collapsible",[nwe,Wwe]=xs(ky),[rwe,$2]=nwe(ky),j$=w.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...a}=e,[l,u]=ml({prop:r,defaultProp:i??!1,onChange:o,caller:ky});return y.jsx(rwe,{scope:n,disabled:s,contentId:Er(),open:l,onOpenToggle:w.useCallback(()=>u(c=>!c),[u]),children:y.jsx(De.div,{"data-state":B2(l),"data-disabled":s?"":void 0,...a,ref:t})})});j$.displayName=ky;var L$="CollapsibleTrigger",iwe=w.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,i=$2(L$,n);return y.jsx(De.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":B2(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:t,onClick:Se(e.onClick,i.onOpenToggle)})});iwe.displayName=L$;var z2="CollapsibleContent",F$=w.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=$2(z2,e.__scopeCollapsible);return y.jsx(oi,{present:n||i.open,children:({present:s})=>y.jsx(swe,{...r,ref:t,present:s})})});F$.displayName=z2;var swe=w.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=e,o=$2(z2,n),[a,l]=w.useState(r),u=w.useRef(null),c=Tt(t,u),d=w.useRef(0),f=d.current,h=w.useRef(0),p=h.current,m=o.open||a,g=w.useRef(m),b=w.useRef(void 0);return w.useEffect(()=>{const v=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(v)},[]),Ni(()=>{const v=u.current;if(v){b.current=b.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const x=v.getBoundingClientRect();d.current=x.height,h.current=x.width,g.current||(v.style.transitionDuration=b.current.transitionDuration,v.style.animationName=b.current.animationName),l(r)}},[o.open,r]),y.jsx(De.div,{"data-state":B2(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!m,...s,ref:c,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...e.style},children:m&&i})});function B2(e){return e?"open":"closed"}var owe=j$;const awe=owe,lwe=F$,uwe={covered:{icon:ti,color:"text-success",bg:"bg-success/10"},partial:{icon:nh,color:"text-warning",bg:"bg-warning/10"},missing:{icon:th,color:"text-destructive",bg:"bg-destructive/10"}},pN=e=>e?new Date().getTime()-new Date(e).getTime()>90*24*60*60*1e3:!1,mN=[{key:"covered",icon:ti,label:"Covered",color:"text-success"},{key:"partial",icon:nh,label:"Partial",color:"text-warning"},{key:"missing",icon:th,label:"Missing",color:"text-destructive"},{key:"outdated",icon:Zk,label:"Outdated",color:"text-muted-foreground"}],gN={covered:{Icon:ti,color:"text-success"},partial:{Icon:nh,color:"text-warning"},missing:{Icon:th,color:"text-destructive"}};function cwe({skillFilter:e,skillsFramework:t,allSkills:n,onSkillFilterChange:r}){const[i,s]=w.useState(!1);return y.jsx("div",{className:"px-3 py-2 border-b border-border/50",children:y.jsxs(hxe,{open:i,onOpenChange:s,children:[y.jsx(pxe,{asChild:!0,children:y.jsxs("button",{role:"combobox","aria-expanded":i,className:"flex w-full items-center justify-between rounded-md border border-border bg-muted/30 px-2 py-1.5 text-[11px] text-foreground outline-none focus:ring-1 focus:ring-primary/30 hover:bg-muted/50 transition-colors",children:[e?y.jsx("span",{className:"flex items-center gap-1.5 truncate",children:(()=>{const o=n.find(u=>u.id===e.skillId);if(!o)return e.skillName;const{Icon:a,color:l}=gN[o.status];return y.jsxs(y.Fragment,{children:[y.jsx(a,{className:`w-3 h-3 flex-shrink-0 ${l}`}),y.jsx("span",{className:"truncate",children:o.name})]})})()}):y.jsx("span",{className:"text-muted-foreground",children:"All sections"}),y.jsx(N7,{className:"ml-1 h-3 w-3 shrink-0 opacity-50"})]})}),y.jsx(i$,{className:"w-56 p-0",align:"start",children:y.jsxs(D$,{children:[y.jsx(M$,{placeholder:"Filter by skill...",className:"h-8 text-xs"}),y.jsxs(O$,{children:[y.jsx(I$,{children:"No skill found."}),y.jsx(Jw,{children:y.jsxs(Qw,{value:"__all__",onSelect:()=>{r(null),s(!1)},className:"text-xs",children:[y.jsx(of,{className:`mr-1.5 h-3 w-3 ${e?"opacity-0":"opacity-100"}`}),"All sections"]})}),t==null?void 0:t.map(o=>y.jsx(Jw,{heading:o.name,children:o.skills.map(a=>{const{Icon:l,color:u}=gN[a.status],c=(e==null?void 0:e.skillId)===a.id;return y.jsxs(Qw,{value:a.name,onSelect:()=>{r({skillId:a.id,skillName:a.name}),s(!1)},className:"text-xs",children:[y.jsx(of,{className:`mr-1.5 h-3 w-3 flex-shrink-0 ${c?"opacity-100":"opacity-0"}`}),y.jsx(l,{className:`mr-1.5 h-3 w-3 flex-shrink-0 ${u}`}),y.jsx("span",{className:"truncate",children:a.name})]},a.id)})},o.id))]})]})})]})})}function yN(e){const t=[],n=[];for(const r of e){const i={...r,children:[]};for(;n.length>0&&n[n.length-1].depth>=r.depth;)n.pop();n.length===0?t.push(i):n[n.length-1].children.push(i),n.push(i)}return t}function Yw({node:e,currentId:t,expandedSections:n,headingsMap:r,getSkillsForSection:i,onSelect:s,onToggle:o,level:a}){const l=t===e.id,u=n.has(e.id),c=r.get(e.id)??[],d=e.children.length>0||c.length>0,f=i(e.id),h=f.filter(g=>g.status==="covered").length,p=f.length,m=a*12+8;return y.jsxs("div",{children:[y.jsxs("div",{className:`flex items-start text-xs transition-colors ${l?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,style:{paddingLeft:`${m}px`},children:[y.jsx("button",{onClick:g=>{g.stopPropagation(),d&&o(e.id)},className:`w-5 h-7 flex items-center justify-center flex-shrink-0 ${d?"cursor-pointer":"invisible"}`,tabIndex:d?0:-1,children:y.jsx(Xk,{className:`w-3 h-3 transition-transform ${u?"rotate-90":""}`})}),y.jsxs("button",{onClick:()=>s(e.id),className:"flex-1 text-left py-2 pr-3 flex items-start gap-1.5 min-w-0",children:[y.jsx(jm,{className:"w-3 h-3 mt-0.5 flex-shrink-0 opacity-50"}),y.jsxs("div",{className:"min-w-0",children:[y.jsx("span",{className:"block truncate",children:e.title}),p>0&&y.jsxs("span",{className:`text-[10px] font-mono ${h===p?"text-success":"text-muted-foreground"}`,children:[h,"/",p," skills"]})]})]})]}),d&&y.jsx(awe,{open:u,children:y.jsxs(lwe,{children:[e.children.map(g=>y.jsx(Yw,{node:g,currentId:t,expandedSections:n,headingsMap:r,getSkillsForSection:i,onSelect:s,onToggle:o,level:a+1},g.id)),l&&c.length>0&&y.jsx("div",{className:"pb-1",children:c.map(g=>y.jsx("button",{onClick:()=>{var b;return(b=document.getElementById(g.slug))==null?void 0:b.scrollIntoView({behavior:"smooth",block:"start"})},className:"w-full text-left text-[11px] py-1 text-muted-foreground hover:text-foreground hover:bg-muted/30 transition-colors truncate",style:{paddingLeft:`${m+20+(g.level-2)*12}px`},title:g.text,children:g.text},g.slug))})]})})]})}const dwe=({skillFilter:e,onSkillFilterChange:t,initialSectionId:n,onInitialSectionConsumed:r})=>{var _t;const{data:i,isLoading:s,isRefetching:o}=P2(),{data:a,isLoading:l}=sS(),u=ove(),c=xee(),d=D6(),[f,h]=w.useState(null),[p,m]=w.useState(!1),[g,b]=w.useState(""),[v,x]=w.useState(null),k=w.useRef(""),[S,C]=w.useState(!1),[E,P]=w.useState(null),[R,A]=w.useState(new Set),[L,I]=w.useState(!0),[U,F]=w.useState(),B=w.useRef(0),q=w.useMemo(()=>(a==null?void 0:a.flatMap(j=>j.skills))??[],[a]),H=w.useMemo(()=>{const j=new Map;if(i){const ee=new Map(q.map(ae=>[ae.id,ae]));for(const ae of i){const xe=[];for(const Ee of ae.skillsCovered){const Le=ee.get(Ee.skillId);Le&&xe.push({...Le,sectionNote:Ee.coverageNote??void 0})}xe.length>0&&j.set(ae.id,xe)}}return ee=>j.get(ee)??[]},[q,i]),{displaySections:M,filterMode:D}=w.useMemo(()=>{if(!i)return{displaySections:[],filterMode:"none"};let j=i,ee="none";if(e){const ae=q.find(Ee=>Ee.id===e.skillId),xe=i.filter(Ee=>!!(Ee.skillsCovered.some(Le=>Le.skillId===e.skillId)||ae!=null&&ae.section&&ae.section===Ee.title));if(xe.length>0)j=xe,ee="direct";else{const Ee=a==null?void 0:a.find(Le=>Le.skills.some(dr=>dr.id===e.skillId));if(Ee){const Le=new Set(Ee.skills.map(Mr=>Mr.id)),dr=i.filter(Mr=>Mr.skillsCovered.some(wl=>Le.has(wl.skillId)));dr.length>0?(j=dr,ee="category"):ee="unlinked"}else ee="unlinked"}}return E&&(j=j.filter(ae=>{const xe=H(ae.id);return xe.length===0?!1:E==="outdated"?xe.some(Ee=>pN(Ee.lastUpdated)):xe.some(Ee=>Ee.status===E)})),{displaySections:j,filterMode:ee}},[e,E,i,q,a,H]),T=w.useMemo(()=>{const j={covered:0,partial:0,missing:0,outdated:0};for(const ee of q)ee.status==="covered"&&j.covered++,ee.status==="partial"&&j.partial++,ee.status==="missing"&&j.missing++,pN(ee.lastUpdated)&&j.outdated++;return j},[q]),J=w.useMemo(()=>{const j=new Map;for(const ee of M){const ae=ave(ee.content);ae.length>0&&j.set(ee.id,ae)}return j},[M]),O=w.useMemo(()=>yN(M),[M]),_=w.useMemo(()=>{const j=[],ee=new Set;for(const ae of M)if(!ee.has(ae.provider)){ee.add(ae.provider);const xe=M.filter(Ee=>Ee.provider===ae.provider);j.push({provider:ae.provider,label:jF[ae.provider]??ae.provider,count:xe.length,tree:yN(xe)})}return j},[M]),W=_.length>1,X=w.useCallback(j=>{A(ee=>{const ae=new Set(ee);return ae.has(j)?ae.delete(j):ae.add(j),ae})},[]),ne=w.useCallback(j=>{h(j),m(!1),A(ee=>{const ae=new Set(ee);return ae.add(j),ae})},[]);if(w.useEffect(()=>{(e||E)&&M.length>0&&(h(M[0].id),m(!1))},[e==null?void 0:e.skillId,E,M]),w.useEffect(()=>{n&&(i!=null&&i.some(j=>j.id===n))&&(h(n),A(j=>new Set([...j,n])),m(!1),r==null||r())},[n,i]),s||l||!i||!a)return y.jsx("div",{className:"rounded-xl border border-border bg-card shadow-card flex items-center justify-center h-[calc(100vh-180px)]",children:y.jsx(qe,{className:"w-6 h-6 text-primary animate-spin"})});const $=f??((_t=M[0])==null?void 0:_t.id),ie=M.find(j=>j.id===$)??M[0];if(!ie)return y.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"rounded-xl border border-border bg-card shadow-card flex flex-col h-[calc(100vh-180px)]",children:[y.jsx("div",{className:"px-5 py-3 border-b border-border",children:y.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(jm,{className:"w-4 h-4 text-primary"}),y.jsx("h2",{className:"text-sm text-foreground",children:"Playbook Content"})]}),y.jsx("div",{className:"h-5 w-px bg-border"}),y.jsx("div",{className:"flex items-center gap-2",children:mN.map(({key:j,icon:ee,label:ae,color:xe})=>{const Ee=T[j],Le=E===j;return y.jsxs("button",{onClick:()=>P(Le?null:j),className:`flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-subheading transition-all ${Le?"bg-primary/10 ring-2 ring-primary/30":"bg-muted/50 hover:bg-muted/80"}`,children:[y.jsx(ee,{className:`w-3.5 h-3.5 ${xe}`}),y.jsx("span",{className:"text-muted-foreground",children:ae}),y.jsx("span",{className:`font-overline font-mono ${xe}`,children:Ee})]},j)})})]})}),y.jsx("div",{className:"flex-1 flex items-center justify-center text-sm text-muted-foreground",children:"No sections match this filter."})]});const be=H(ie.id),Me=()=>{b(ie.content),x(ie.contentJson),m(!0)},gt=()=>{m(!1),b(""),x(null)},on=async()=>{const j=k.current||ie.content;if(g===j){m(!1);return}try{await u.mutateAsync({id:ie.id,content:g,contentJson:v}),await c.mutateAsync({sectionId:ie.id,before:j,after:g,source:"manual",autoApprove:!0}),m(!1),b(""),x(null),C(!0),setTimeout(()=>C(!1),2e3)}catch{wa.error("Failed to save edit")}};return y.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"rounded-xl border border-border bg-card shadow-card flex flex-col h-[calc(100vh-180px)]",children:[y.jsx("div",{className:"px-5 py-3 border-b border-border",children:y.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(jm,{className:"w-4 h-4 text-primary"}),y.jsx("h2",{className:"text-sm text-foreground",children:"Playbook Content"}),o&&y.jsx(qe,{className:"w-3.5 h-3.5 text-muted-foreground animate-spin"})]}),y.jsx("div",{className:"h-5 w-px bg-border"}),y.jsx("div",{className:"flex items-center gap-2",children:mN.map(({key:j,icon:ee,label:ae,color:xe})=>{const Ee=T[j],Le=E===j;return y.jsxs("button",{onClick:()=>P(Le?null:j),className:`flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-subheading transition-all ${Le?"bg-primary/10 ring-2 ring-primary/30":"bg-muted/50 hover:bg-muted/80"}`,children:[y.jsx(ee,{className:`w-3.5 h-3.5 ${xe}`}),y.jsx("span",{className:"text-muted-foreground",children:ae}),y.jsx("span",{className:`font-overline font-mono ${xe}`,children:Ee})]},j)})}),e&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx(j7,{className:"w-3 h-3 text-primary"}),y.jsxs("span",{className:"text-[11px] text-muted-foreground",children:[D==="direct"&&`${M.length} section${M.length!==1?"s":""} for`,D==="category"&&`${M.length} related section${M.length!==1?"s":""} for`,D==="unlinked"&&"No linked sections for"]}),y.jsx("span",{className:"text-[11px] font-caption text-primary",children:e.skillName}),D==="unlinked"&&y.jsx("span",{className:"text-[11px] text-muted-foreground",children:" consider adding a new section"})]}),y.jsxs("button",{onClick:()=>t(null),className:"flex items-center gap-1 rounded-lg bg-muted px-2 py-0.5 text-[10px] font-caption text-muted-foreground hover:bg-muted/80 transition-colors",children:[y.jsx(Xa,{className:"w-2.5 h-2.5"}),"Clear"]})]}),y.jsx(nl,{mode:"wait",children:S&&y.jsxs(Be.span,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex items-center gap-1 text-[10px] text-success font-subheading",children:[y.jsx(ti,{className:"w-3 h-3"}),"Saved  staged for review"]},"saved")}),y.jsx("button",{onClick:()=>I(j=>!j),className:"ml-auto flex items-center gap-1.5 rounded-lg bg-muted/50 px-2.5 py-1.5 text-[11px] font-subheading text-muted-foreground hover:bg-muted/80 hover:text-foreground transition-colors",title:L?"Hide chat panel":"Show chat panel",children:L?y.jsx(V7,{className:"w-3.5 h-3.5"}):y.jsx(U7,{className:"w-3.5 h-3.5"})})]})}),y.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[y.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[y.jsxs("div",{className:"w-56 border-r border-border flex-shrink-0 flex flex-col",children:[y.jsx(cwe,{skillFilter:e,skillsFramework:a,allSkills:q,onSkillFilterChange:t}),y.jsx("div",{className:"flex-1 overflow-y-auto py-1",children:W?_.map(j=>y.jsxs("div",{children:[y.jsx("div",{className:"px-3 pt-3 pb-1",children:y.jsxs("span",{className:"text-[10px] font-overline uppercase tracking-wider text-muted-foreground",children:[j.label," (",j.count,")"]})}),j.tree.map(ee=>y.jsx(Yw,{node:ee,currentId:$,expandedSections:R,headingsMap:J,getSkillsForSection:H,onSelect:ne,onToggle:X,level:0},ee.id))]},j.provider)):O.map(j=>y.jsx(Yw,{node:j,currentId:$,expandedSections:R,headingsMap:J,getSkillsForSection:H,onSelect:ne,onToggle:X,level:0},j.id))})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[y.jsxs("div",{className:"mb-4",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[y.jsx("h3",{className:"text-lg text-foreground",children:ie.title.replace(/^\u00A0+/,"")}),y.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground font-mono bg-muted rounded px-2 py-0.5",children:[y.jsx(Zk,{className:"w-2.5 h-2.5"}),new Date(ie.lastUpdated).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})]}),p?y.jsxs("div",{className:"flex items-center gap-1.5 ml-auto",children:[y.jsxs("button",{onClick:gt,className:"flex items-center gap-1 rounded-lg bg-muted px-2.5 py-1 text-[11px] font-caption text-muted-foreground hover:bg-muted/80 transition-colors",children:[y.jsx(Xa,{className:"w-3 h-3"}),"Cancel"]}),y.jsxs("button",{onClick:on,disabled:u.isPending,className:"flex items-center gap-1 rounded-lg gradient-primary px-2.5 py-1 text-[11px] font-caption text-primary-foreground transition-opacity disabled:opacity-50",children:[u.isPending?y.jsx(qe,{className:"w-3 h-3 animate-spin"}):y.jsx(W7,{className:"w-3 h-3"}),"Save"]})]}):y.jsxs("button",{onClick:Me,className:"flex items-center gap-1 rounded-lg bg-secondary px-2.5 py-1 text-[11px] font-subheading text-secondary-foreground hover:bg-secondary/80 transition-colors ml-auto",children:[y.jsx(eC,{className:"w-3 h-3"}),"Edit"]})]}),be.length>0&&y.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-4",children:[be.map(j=>{const ee=uwe[j.status],ae=ee.icon,xe=j.status!=="covered",Ee=y.jsxs("span",{className:`inline-flex items-center gap-1 rounded-md px-2 py-1 text-[11px] font-subheading border ${j.fulfilled?"bg-muted/30 border-border/40 text-muted-foreground":`${ee.bg} border-transparent`} ${xe?"cursor-help":""}`,children:[y.jsx(ae,{className:`w-3 h-3 ${j.fulfilled?"text-muted-foreground":ee.color}`}),y.jsx("span",{className:j.fulfilled?"line-through":"",children:j.name}),j.fulfilled&&y.jsx("span",{className:"text-[10px] text-muted-foreground italic",children:"Dismissed"})]});return xe?y.jsxs(U6,{openDelay:300,closeDelay:200,children:[y.jsx(H6,{asChild:!0,children:Ee}),y.jsx(aS,{side:"bottom",className:"w-auto max-w-xs p-2 text-xs",children:y.jsxs("div",{className:"flex flex-col gap-1.5",children:[j.sectionNote&&y.jsx("p",{className:"text-muted-foreground",children:j.sectionNote}),y.jsx("button",{onClick:Le=>{Le.stopPropagation(),d.mutate({skillId:j.id,fulfilled:!j.fulfilled})},className:"text-[11px] font-subheading text-foreground hover:text-primary transition-colors text-left",children:j.fulfilled?"Undo":"Dismiss"})]})})]},j.id):y.jsx("span",{children:Ee},j.id)}),(()=>{const j=be.filter(ee=>ee.status!=="covered"&&ee.sectionNote);return j.length===0?null:y.jsxs("button",{onClick:()=>{const ae=`Help me improve this section. Here are the skill gaps:

${j.map(xe=>`- **${xe.name}** (${xe.status}): ${xe.sectionNote}`).join(`
`)}`;B.current+=1,F({text:ae,key:B.current}),L||I(!0)},className:"inline-flex items-center gap-1 rounded-md px-2 py-1 text-[11px] font-subheading text-primary bg-primary/10 hover:bg-primary/20 transition-colors",children:[y.jsx(tC,{className:"w-3 h-3"}),"Improve with AI"]})})()]})]}),p?y.jsx(A2,{markdown:g,onChange:b,onJsonChange:x,onReady:j=>{k.current=j}}):y.jsx(lve,{content:ie.content,contentJson:ie.contentJson})]})]}),y.jsx(nl,{initial:!1,children:L&&y.jsx(Be.div,{initial:{width:0,opacity:0},animate:{width:400,opacity:1},exit:{width:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"flex-shrink-0 border-l border-border overflow-hidden",children:y.jsx(DF,{currentSection:ie.title,sectionId:ie.id,isEmbedded:!0,prefillMessage:U==null?void 0:U.text,prefillKey:U==null?void 0:U.key})})})]})]})};function $$(e){return ws({queryKey:["confluence-spaces"],queryFn:async()=>{const{data:t,error:n}=await ce.functions.invoke("confluence-browse",{body:{action:"list-spaces"}});if(n)throw n;return t.spaces},enabled:e})}function z$(e){return ws({queryKey:["confluence-pages",e],queryFn:async()=>{const{data:t,error:n}=await ce.functions.invoke("confluence-browse",{body:{action:"list-pages",spaceId:e}});if(n)throw n;return t.pages},enabled:!!e})}function fwe(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Cy="Checkbox",[hwe,qwe]=xs(Cy),[pwe,V2]=hwe(Cy);function mwe(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:i,disabled:s,form:o,name:a,onCheckedChange:l,required:u,value:c="on",internal_do_not_use_render:d}=e,[f,h]=ml({prop:n,defaultProp:i??!1,onChange:l,caller:Cy}),[p,m]=w.useState(null),[g,b]=w.useState(null),v=w.useRef(!1),x=p?!!o||!!p.closest("form"):!0,k={checked:f,disabled:s,setChecked:h,control:p,setControl:m,name:a,form:o,value:c,hasConsumerStoppedPropagationRef:v,required:u,defaultChecked:Oo(i)?!1:i,isFormControl:x,bubbleInput:g,setBubbleInput:b};return y.jsx(pwe,{scope:t,...k,children:gwe(d)?d(k):r})}var B$="CheckboxTrigger",V$=w.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},i)=>{const{control:s,value:o,disabled:a,checked:l,required:u,setControl:c,setChecked:d,hasConsumerStoppedPropagationRef:f,isFormControl:h,bubbleInput:p}=V2(B$,e),m=Tt(i,c),g=w.useRef(l);return w.useEffect(()=>{const b=s==null?void 0:s.form;if(b){const v=()=>d(g.current);return b.addEventListener("reset",v),()=>b.removeEventListener("reset",v)}},[s,d]),y.jsx(De.button,{type:"button",role:"checkbox","aria-checked":Oo(l)?"mixed":l,"aria-required":u,"data-state":K$(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:m,onKeyDown:Se(t,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:Se(n,b=>{d(v=>Oo(v)?!0:!v),p&&h&&(f.current=b.isPropagationStopped(),f.current||b.stopPropagation())})})});V$.displayName=B$;var U2=w.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l,onCheckedChange:u,form:c,...d}=e;return y.jsx(mwe,{__scopeCheckbox:n,checked:i,defaultChecked:s,disabled:a,required:o,onCheckedChange:u,name:r,form:c,value:l,internal_do_not_use_render:({isFormControl:f})=>y.jsxs(y.Fragment,{children:[y.jsx(V$,{...d,ref:t,__scopeCheckbox:n}),f&&y.jsx(q$,{__scopeCheckbox:n})]})})});U2.displayName=Cy;var U$="CheckboxIndicator",H$=w.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,s=V2(U$,n);return y.jsx(oi,{present:r||Oo(s.checked)||s.checked===!0,children:y.jsx(De.span,{"data-state":K$(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});H$.displayName=U$;var W$="CheckboxBubbleInput",q$=w.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:a,disabled:l,name:u,value:c,form:d,bubbleInput:f,setBubbleInput:h}=V2(W$,e),p=Tt(n,h),m=fwe(s),g=UO(r);w.useEffect(()=>{const v=f;if(!v)return;const x=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(x,"checked").set,C=!i.current;if(m!==s&&S){const E=new Event("click",{bubbles:C});v.indeterminate=Oo(s),S.call(v,Oo(s)?!1:s),v.dispatchEvent(E)}},[f,m,s,i]);const b=w.useRef(Oo(s)?!1:s);return y.jsx(De.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:a,disabled:l,name:u,value:c,form:d,...t,tabIndex:-1,ref:p,style:{...t.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});q$.displayName=W$;function gwe(e){return typeof e=="function"}function Oo(e){return e==="indeterminate"}function K$(e){return Oo(e)?"indeterminate":e?"checked":"unchecked"}const Uf=w.forwardRef(({className:e,...t},n)=>y.jsx(U2,{ref:n,className:Ct("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(H$,{className:Ct("flex items-center justify-center text-current"),children:y.jsx(of,{className:"h-4 w-4"})})}));Uf.displayName=U2.displayName;function i0({className:e,...t}){return y.jsx("div",{className:Ct("animate-pulse rounded-md bg-muted",e),...t})}function ywe(e){const t=new Set(e.map(i=>i.id)),n=new Map;for(const i of e){const s=i.parentId&&t.has(i.parentId)?i.parentId:null,o=n.get(s)??[];o.push(i),n.set(s,o)}function r(i,s){return(n.get(i)??[]).map(o=>({...o,depth:s,children:r(o.id,s+1)}))}return r(null,0)}function G$(e){const t=[];for(const n of e)t.push(n),t.push(...G$(n.children));return t}function J$(e){const t=[];for(const n of e.children)t.push(n.id),t.push(...J$(n));return t}const Xw={confluence:{name:"Confluence",icon:"C"},notion:{name:"Notion",icon:"N"},pdf:{name:"PDF Upload",icon:"P"}};function bwe(e){const t=Date.now()-new Date(e).getTime(),n=Math.floor(t/6e4);if(n<1)return"just now";if(n<60)return`${n}m ago`;const r=Math.floor(n/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}const vwe=()=>{const{data:e,isLoading:t}=MF(),{data:n,isLoading:r}=nee(),{data:i}=P2(),s=OF(),[o,a]=w.useState("extracting"),[l,u]=w.useState(!1),c=O6(a),d=I6(),f=j6(),h=w.useRef(null),p=ive(),m=sve(),[g,b]=w.useState(!1),[v,x]=w.useState(null),[k,S]=w.useState(!1),[C,E]=w.useState(null),[P,R]=w.useState(null),[A,L]=w.useState(null),[I,U]=w.useState(null),[F,B]=w.useState(new Set),[q,H]=w.useState(new Set),M=$$(A==="pick-space"),D=z$(A==="pick-pages"?I:null),T=w.useMemo(()=>ywe(D.data??[]),[D.data]),J=w.useMemo(()=>G$(T),[T]),O=w.useMemo(()=>{const j=new Map;for(const ee of J)j.set(ee.id,ee);return j},[J]);w.useEffect(()=>{new URLSearchParams(window.location.search).get("connected")==="confluence"&&(window.history.replaceState({},"",window.location.pathname),L("pick-space"))},[]);const _=(i==null?void 0:i.length)??0;n==null||n[0];const W=(()=>{if(!i||i.length===0)return[];const j=new Map;for(const ee of i)j.set(ee.provider,(j.get(ee.provider)??0)+1);return Array.from(j.entries()).map(([ee,ae])=>({provider:ee,label:jF[ee]??ee,count:ae}))})(),X=async j=>{var ae;const ee=(ae=j.target.files)==null?void 0:ae[0];if(ee){R(null),b(!0),u(!0),a("extracting");try{if(ee.name.endsWith(".pdf")){const xe=await ee.arrayBuffer(),Ee=btoa(new Uint8Array(xe).reduce((Le,dr)=>Le+String.fromCharCode(dr),""));await c.mutateAsync({provider:"pdf",pdfBase64:Ee})}else{const xe=await ee.text();await c.mutateAsync({provider:"pdf",content:xe})}}catch(xe){R(xe.message)}finally{b(!1),u(!1),h.current&&(h.current.value="")}}},ne=async j=>{R(null),x(j);try{j==="notion"?await d.mutateAsync():j==="confluence"&&await f.mutateAsync(void 0)}catch(ee){R(ee.message)}finally{x(null)}},$=j=>{U(j),B(new Set),H(new Set),L("pick-pages")},ie=j=>{const ee=O.get(j);if(!ee)return;const ae=J$(ee);B(xe=>{const Ee=new Set(xe);if(Ee.has(j)){Ee.delete(j);for(const Le of ae)Ee.delete(Le)}else{Ee.add(j);for(const Le of ae)Ee.add(Le)}return Ee})},be=j=>{H(ee=>{const ae=new Set(ee);return ae.has(j)?ae.delete(j):ae.add(j),ae})},Me=()=>{const j=D.data??[];F.size===j.length?B(new Set):B(new Set(j.map(ee=>ee.id)))},gt=async()=>{R(null),L(null),x("confluence");try{await f.mutateAsync([...F])}catch(j){R(j.message)}finally{x(null)}},on=async j=>{R(null);try{await s(j)}catch(ee){R(ee.message)}},_t=new Set((e??[]).map(j=>j.provider));return y.jsxs("div",{className:"max-w-2xl space-y-6",children:[y.jsx(nl,{children:l&&y.jsx(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:y.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-border bg-card p-8 shadow-card text-center",children:[y.jsx(qe,{className:"w-10 h-10 text-primary mx-auto mb-4 animate-spin"}),y.jsx("h2",{className:"text-xl text-foreground mb-2",children:o==="extracting"?"Extracting content":"Analyzing your playbook"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:o==="extracting"?"Reading and converting your document to structured content":"Mapping sections to knowledge areas"}),y.jsxs("div",{className:"mt-6 space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 justify-center text-xs text-muted-foreground",children:[o==="extracting"?y.jsx(qe,{className:"w-3 h-3 animate-spin text-primary"}):y.jsx(ti,{className:"w-3 h-3 text-success"}),"Extracting content"]}),y.jsxs("div",{className:"flex items-center gap-2 justify-center text-xs text-muted-foreground",children:[o==="analyzing"?y.jsx(qe,{className:"w-3 h-3 animate-spin text-primary"}):y.jsx("span",{className:"w-3 h-3 rounded-full border border-muted-foreground/30"}),"Mapping skills"]})]}),y.jsx("p",{className:"mt-4 text-xs text-muted-foreground",children:"This can take up to 5 minutes"})]})})}),y.jsx(nl,{children:A&&y.jsx(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:y.jsxs("div",{className:"w-full max-w-lg rounded-2xl border border-border bg-card p-8 shadow-card",children:[A==="pick-space"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsx("h2",{className:"text-xl text-foreground",children:"Select a space"}),y.jsx("button",{onClick:()=>L(null),className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Cancel"})]}),y.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Choose the Confluence space that contains your playbook"}),M.isLoading&&y.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((j,ee)=>y.jsx(i0,{className:"h-14 w-full rounded-xl"},ee))}),M.error&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-destructive/30 bg-destructive/5 p-3",children:[y.jsx(xa,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),y.jsx("p",{className:"text-xs text-destructive",children:M.error.message})]}),M.data&&y.jsx("div",{className:"max-h-72 overflow-y-auto pr-1",children:y.jsx("div",{className:"space-y-2",children:M.data.map(j=>y.jsxs("button",{onClick:()=>$(j.id),className:"w-full flex items-center gap-4 rounded-xl p-4 border border-border bg-muted/30 hover:border-muted-foreground/30 transition-all text-left",children:[y.jsx("span",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-xs font-overline text-primary uppercase",children:j.key.slice(0,2)}),y.jsxs("div",{className:"min-w-0 flex-1",children:[y.jsx("div",{className:"text-sm font-subheading text-foreground truncate",children:j.name}),y.jsx("div",{className:"text-xs text-muted-foreground",children:j.key})]}),y.jsx(va,{className:"w-4 h-4 text-muted-foreground shrink-0"})]},j.id))})})]}),A==="pick-pages"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsxs("button",{onClick:()=>{L("pick-space"),U(null),B(new Set)},className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[y.jsx(Bv,{className:"w-3 h-3"})," Back"]}),y.jsx("button",{onClick:()=>L(null),className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Cancel"})]}),y.jsx("h2",{className:"text-xl text-foreground mb-1 mt-3",children:"Select pages"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose which pages to import. Unpublished edits on existing Confluence sections will be lost."}),D.isLoading&&y.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((j,ee)=>y.jsx(i0,{className:"h-10 w-full rounded-lg"},ee))}),D.error&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-destructive/30 bg-destructive/5 p-3 mb-3",children:[y.jsx(xa,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),y.jsx("p",{className:"text-xs text-destructive",children:D.error.message})]}),D.data&&D.data.length>0&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[y.jsx(Uf,{checked:F.size===D.data.length,onCheckedChange:Me}),y.jsxs("span",{className:"text-xs text-muted-foreground",children:["Select all (",D.data.length," pages)"]})]}),y.jsx("div",{className:"max-h-60 overflow-y-auto pr-1 mb-4",children:y.jsx("div",{className:"space-y-0.5",children:y.jsx(Q$,{nodes:T,selectedPageIds:F,expandedIds:q,onTogglePage:ie,onToggleExpand:be})})}),y.jsxs("button",{onClick:gt,disabled:F.size===0,className:"w-full flex items-center justify-center gap-2 rounded-xl gradient-primary py-3 text-sm font-subheading text-primary-foreground disabled:opacity-30 transition-opacity",children:["Import ",F.size," ",F.size===1?"page":"pages",y.jsx(va,{className:"w-4 h-4"})]})]}),D.data&&D.data.length===0&&y.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"No pages found in this space."})]})]})})}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-lg text-foreground",children:"Integrations"}),y.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Importing from a new source adds to your playbook without affecting other sources.",_>0&&y.jsxs("span",{className:"text-foreground font-subheading",children:[" ",_," sections currently loaded."]})]})]}),P&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-destructive/30 bg-destructive/5 p-3",children:[y.jsx(xa,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),y.jsx("p",{className:"text-xs text-destructive",children:P})]}),y.jsx("input",{ref:h,type:"file",accept:".pdf,.txt,.md",className:"hidden",onChange:X}),y.jsxs("div",{className:"space-y-3",children:[y.jsx(bN,{provider:"confluence",connected:_t.has("confluence"),loading:t,reimporting:v==="confluence",onConnect:()=>on("confluence"),onReimport:()=>ne("confluence")}),y.jsx(bN,{provider:"notion",connected:_t.has("notion"),loading:t,reimporting:v==="notion",onConnect:()=>on("notion"),onReimport:()=>ne("notion")}),y.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-border bg-card p-4",children:[y.jsx("span",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-sm font-overline text-primary shrink-0",children:"P"}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("div",{className:"text-sm text-foreground",children:"PDF / Text Upload"}),y.jsx("div",{className:"text-xs text-muted-foreground",children:"Upload a .pdf, .txt, or .md file"})]}),y.jsx("button",{onClick:()=>{var j;return(j=h.current)==null?void 0:j.click()},disabled:g,className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-subheading transition-colors gradient-primary text-primary-foreground disabled:opacity-50",children:g?y.jsxs(y.Fragment,{children:[y.jsx(qe,{className:"w-3.5 h-3.5 animate-spin"})," Uploading..."]}):y.jsxs(y.Fragment,{children:[y.jsx(xO,{className:"w-3.5 h-3.5"})," Upload"]})})]})]}),W.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm text-foreground mb-3",children:"Active sources"}),y.jsx("div",{className:"space-y-2",children:W.map(j=>{const ee=Xw[j.provider]??{name:j.provider,icon:"?"},ae=C===j.provider;return y.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-muted/30 px-4 py-2.5",children:[y.jsx("span",{className:"w-7 h-7 rounded-md bg-primary/10 flex items-center justify-center text-[11px] font-overline text-primary shrink-0",children:ee.icon}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("span",{className:"text-xs font-subheading text-foreground",children:j.label}),y.jsxs("span",{className:"text-xs text-muted-foreground ml-1.5",children:[" ",j.count," section",j.count!==1?"s":""]})]}),ae?y.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[y.jsx("button",{onClick:()=>E(null),className:"rounded-lg px-2 py-1 text-[11px] font-subheading bg-muted hover:bg-muted/80 text-foreground transition-colors",children:"Cancel"}),y.jsx("button",{onClick:async()=>{R(null);try{await m.mutateAsync(j.provider),E(null)}catch(xe){R(xe.message)}},disabled:m.isPending,className:"flex items-center gap-1 rounded-lg px-2 py-1 text-[11px] font-subheading bg-destructive text-destructive-foreground hover:bg-destructive/90 transition-colors disabled:opacity-50",children:m.isPending?y.jsxs(y.Fragment,{children:[y.jsx(qe,{className:"w-3 h-3 animate-spin"})," Removing..."]}):y.jsxs(y.Fragment,{children:[y.jsx(Vh,{className:"w-3 h-3"})," Confirm"]})})]}):y.jsxs("button",{onClick:()=>E(j.provider),className:"flex items-center gap-1 rounded-lg px-2 py-1 text-[11px] font-subheading text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors shrink-0",children:[y.jsx(Vh,{className:"w-3 h-3"})," Remove"]})]},j.provider)})})]}),!r&&n&&n.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm text-foreground mb-3",children:"Import history"}),y.jsx("div",{className:"space-y-2",children:n.slice(0,5).map(j=>{const ee=Xw[j.provider]??{name:j.provider,icon:"?"};return y.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-muted/30 px-4 py-2.5",children:[y.jsx("span",{className:"w-7 h-7 rounded-md bg-primary/10 flex items-center justify-center text-[11px] font-overline text-primary shrink-0",children:ee.icon}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("span",{className:"text-xs font-subheading text-foreground",children:ee.name}),j.metadata&&j.metadata.sections_created!=null&&y.jsxs("span",{className:"text-xs text-muted-foreground ml-1.5",children:[" ",String(j.metadata.sections_created)," sections"]})]}),y.jsx("span",{className:`text-[11px] font-subheading ${j.status==="completed"?"text-success":j.status==="failed"?"text-destructive":"text-muted-foreground"}`,children:j.status==="completed"?"Completed":j.status==="failed"?"Failed":j.status==="processing"?"Processing...":"Pending"}),y.jsx("span",{className:"text-[11px] text-muted-foreground shrink-0",children:bwe(j.started_at)})]},j.id)})})]}),_>0&&y.jsx("div",{className:"rounded-xl border border-destructive/20 bg-destructive/5 p-4",children:y.jsxs("div",{className:"flex items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm text-foreground",children:"Start over"}),y.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Wipe all playbook sections, staged edits, chat history, and connections."})]}),k?y.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[y.jsx("button",{onClick:()=>S(!1),className:"rounded-lg px-3 py-1.5 text-xs font-subheading bg-muted hover:bg-muted/80 text-foreground transition-colors",children:"Cancel"}),y.jsx("button",{onClick:async()=>{R(null);try{await p.mutateAsync(),S(!1)}catch(j){R(j.message)}},disabled:p.isPending,className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-subheading bg-destructive text-destructive-foreground hover:bg-destructive/90 transition-colors disabled:opacity-50",children:p.isPending?y.jsxs(y.Fragment,{children:[y.jsx(qe,{className:"w-3.5 h-3.5 animate-spin"})," Wiping..."]}):y.jsxs(y.Fragment,{children:[y.jsx(Vh,{className:"w-3.5 h-3.5"})," Confirm wipe"]})})]}):y.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-subheading bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors shrink-0",children:[y.jsx(Vh,{className:"w-3.5 h-3.5"})," Restart"]})]})})]})};function bN({provider:e,connected:t,loading:n,reimporting:r,onConnect:i,onReimport:s}){const o=Xw[e]??{name:e,icon:"?"};return y.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-border bg-card p-4",children:[y.jsx("span",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-sm font-overline text-primary shrink-0",children:o.icon}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-sm text-foreground",children:o.name}),t&&y.jsxs("span",{className:"flex items-center gap-1 text-[11px] text-success font-subheading",children:[y.jsx(ti,{className:"w-3 h-3"})," Connected"]})]}),y.jsx("div",{className:"text-xs text-muted-foreground",children:t?`Re-import to refresh ${o.name} sections. Unpublished edits on those sections will be lost.`:`Connect your ${o.name} workspace`})]}),n?y.jsx(qe,{className:"w-4 h-4 text-muted-foreground animate-spin"}):t?y.jsx("button",{onClick:s,disabled:r,className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-subheading transition-colors bg-muted hover:bg-muted/80 text-foreground disabled:opacity-50",children:r?y.jsxs(y.Fragment,{children:[y.jsx(qe,{className:"w-3.5 h-3.5 animate-spin"})," Importing..."]}):y.jsxs(y.Fragment,{children:[y.jsx(bO,{className:"w-3.5 h-3.5"})," Re-import"]})}):y.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-xs font-subheading transition-colors gradient-primary text-primary-foreground",children:[y.jsx(M7,{className:"w-3.5 h-3.5"})," Connect"]})]})}function Q$({nodes:e,selectedPageIds:t,expandedIds:n,onTogglePage:r,onToggleExpand:i}){return y.jsx(y.Fragment,{children:e.map(s=>{const o=s.children.length>0,a=n.has(s.id);return y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 rounded-lg py-2 hover:bg-muted/50 transition-colors",style:{paddingLeft:`${s.depth*20+12}px`,paddingRight:12},children:[o?y.jsx("button",{onClick:()=>i(s.id),className:"w-5 h-5 flex items-center justify-center shrink-0 text-muted-foreground hover:text-foreground",children:y.jsx(Xk,{className:`w-3.5 h-3.5 transition-transform ${a?"rotate-90":""}`})}):y.jsx("span",{className:"w-5"}),y.jsxs("label",{className:"flex items-center gap-2.5 min-w-0 flex-1 cursor-pointer",children:[y.jsx(Uf,{checked:t.has(s.id),onCheckedChange:()=>r(s.id)}),y.jsx("span",{className:"text-sm text-foreground truncate",children:s.title}),o&&y.jsx("span",{className:"text-[10px] text-muted-foreground shrink-0",children:s.children.length})]})]}),o&&a&&y.jsx(Q$,{nodes:s.children,selectedPageIds:t,expandedIds:n,onTogglePage:r,onToggleExpand:i})]},s.id)})})}const xwe=`# **1. Introduction & Purpose**

## **1.1. What This Playbook Covers :)**

This playbook outlines Taskbases end-to-end revenue motionsfrom market targeting and messaging to process, tools, and handoffs. It provides the what good looks like across roles and stages so every rep can execute confidently and consistently.

* Strategy: ICP, personas, value proposition, and competitive positioning  
* Execution: outreach templates, discovery flows, demos, proposals, and negotiations  
* Process: sales stages, MEDDICC/BANT-based qualification, exit criteria, and forecasting discipline  
* Collaboration: handoffs (MQLSQL, SDRAE, AECS), ABM with Marketing, and product feedback loops  
* Enablement: tools, dashboards, coaching, metrics, and continuous improvement

## **1.2. Who Should Use This Guide**

* AI Coach: We deploy an AI Coach who teaches all sales functions in their job how to do their job better. The AI Coach will take all the information from that guide. This guide needs to be adjusted to GenAI readability  
* SDRs: Pipeline creation, prospecting, meeting setting, qualification support  
* AEs: Discovery, solution mapping, ROI, deal strategy, multi-threading, closing  
* AMs: Adoption, value realization, renewals, expansion, executive alignment

## **1.3. How to Apply It in Your Daily Workflow**

* Start your day with intent: review your priority accounts, top 10 targets, and next best actions per stage.  
* Use the stage checklists and exit criteria to progress deals deliberatelydont skip discovery validation or mutual action plans.  
* Personalize messaging from persona pain points and industry use cases. Log all activities to maintain CRM hygiene.

## **1.4. Playbook Updates & Ownership**

notecddccfa1-e16a-4f28-b33a-6dbfa3a7e62dPlaybook Owner: [Add Head of Sales]. Editors: [Add Sales Enablement], [Add RevOps]. Contributors: [Add SDR Lead], [Add AE Lead], [Add AM Lead].

Playbook Owner: [Add Head of Sales]. Editors: [Add Sales Enablement], [Add RevOps]. Contributors: [Add SDR Lead], [Add AE Lead], [Add AM Lead].

Update cadence, change control, and feedback loop are defined in Section 15.

## **1.5. Glossary of Key Terms**

* ICP: Ideal Customer Profilecompany-level fit for Taskbases value proposition  
* MQL/SQL: Qualified lead definitions by Marketing and Sales acceptance and criteria alignment  
* MEDDICC/BANT: Standard qualification frameworks to drive rigor and forecast accuracy

Here is where we defined all words: [https://taskbase.atlassian.net/wiki/x/BIB9H](https://taskbase.atlassian.net/wiki/x/BIB9H)

## **1.6. Sales Organisation & Org Chart**

Teams: SDR, AE, AM/CS, Sales Engineering, Enablement, RevOps. Clear swimlanes for ownership by stage and activity ensure speed and quality.

Reference:

## **1.7. Vision, Mission and Values**

Vision: Enable Humanity through learning

Mission:

* Values: Customer impact, ownership, clarity, speed, integrity  
* Sales principles: Coachable mindset, data-driven decisions, and crisp communication

# **2. Ideal Customer Profile (ICP) & Buyer Personas**

## **2.1. Company-Level Criteria (ICP)**

| Criteria | Summary |
| :---- | :---- |
| Size | 10-100 sales employees (Scale-up) (Hint for LinkedIn: You have to create an Account list first in order to filter for number of salespeople) |
| Market | 1st prio: Patricks followers 2nd prio: DACH, UK, BENELUX, Nordics, Spain, France, US |
| Industry (LinkedIn Categories) | The most innovative ones: Software Development (SaaS) IT & Services Technology companies (Fintech, Payments {e.g. Stripe}, HR Tech, etc.) |
| Necessary factors | - BtoB Sales - Product sales, NOT Service sales |
| Important factors that increase challenge | - Repeatable sales process - Remote work focused - A lot of On-boardings (Growth of sales department >10% or high fluctuation) - A lot of Junior Sales reps - Implemented a new framework recently - International organisation with different languages spoken (because reps in other languages usually get less coaching) |
| Factors that make the sale weaker | - They are selling through resellers and have no direct sales |
| Triggers overall (LinkedIn, TechCrunch, etc.) | - Funding round (carefully use that one) - Growing sales team / Hiring salespeople Open sales positions - Remote work advocates - Coaching advocates |
| Technolographics | - CRM: Salesforce or Hubspot - Chat: Slack, MS Teams or Google Chat - Already use a recording tool |
| Language Chat | Output - English - German |

## **2.2. Segmenting by Industry, Size & Geography**

Prioritize verticals with repeatable wins and clear pains (e.g., SaaS, Professional Services, Fintech). Segment by headcount, ACV potential, and regions where we can support timezone, language, and compliance requirements.

## **2.3. Key Buyer Personas, Roles and Challenges/ Use cases**

| Title | CEO | CRO / Head of Sales / VP of Sales | Sales Enablement Manager / Director of Sales Enablement |
| :---- | :---- | :---- | :---- |
| **Buyer Persona** | Economic Buyer | Economic Buyer / Champion | Champion |
| **Challenges we solve for them** | - Behind with revenue - Drive new strategy with salespeople faster - Needs to have arguments for the Board in case salespeople are not reaching targets - Show the board they train and develop their people - More reliable forecasting and better growth plan - There is always a small doubt that salespeople are not good enough. Erase that doubt. | - Being able to report skill development to their boss - Being able to cancel out lack of development as a reason for not reaching the growth targets - Faster implementation of new sales methodology, changes in SalesPlaybook and new product developments - Transparency of training and very structured approach to coaching - Alignment of sales organisation to the same methodologies. - Reduce coaching costs over the year. - Reliable forecasting - Long sales cycles: Ramp up measurement of sales reps in case they did not close a deal yet. You can see their skills. | - Deliver on Upskilling without much additional costs or invested hours. - Invoke changes of behaviour thanks to repetitive coachings. (People change behaviour if reminded all the time or with a very intense one-time coaching) - Reduce coaching costs over the year with a stronger impact on changing behaviour. - Instead of coaching internally (resources!) have AI do it. - Individual coaching for every single rep with an evolving skill map. - Middle-managers are not skilled enough to give trainings. |
| **Impact of not solving challenges** | - Faster growth - Selling of new product / features much faster - Outpace competitors, increase win rate - Peace of mind | - More revenue - Keep their job (because they can show progress) - Peace of mind - Ramp time reduced by 20% - Forecasting more accurate. |  |
| **Goals** |  | #### **1. Revenue Growth & Expansion** - Achieve/exceed annual revenue targets - Increase deal size (upselling/cross-selling) - Acquire new customers - Expand market share #### **2. Team Optimization & Development** - Increase sales efficiency (processes, tools) - Continuous coaching & training - Shorten sales cycles - Retain and motivate talent - Set clear goals & expectations |  |

## **2.4. Decision-Making Dynamics & Buying Committees**

Buying groups typically include economic buyer (CRO/CFO), technical approver (RevOps/IT), champions (Sales Managers/Directors and Sales Enablement Directors), and users (SDRs/AEs). Multi-thread early, co-create business case (for >50k deals), and align on procurement steps.

# **3. Product Overview & Value Proposition**

## **3.1. Core Concept of Taskbase**

### **3.1.1 What Taskbase Is**

* **Taskbase is an AI coaching and learning platform for sales teams.**  
* **It learns directly from real sales interactions, not from hypothetical inputs.**  
* **It builds a dynamic skill profile for each rep based on observed behavior.**

### **3.1.2 How Taskbase Learns**

* **Input sources: cold calls, emails, CRM updates, Slack/Teams/Google Chat interactions with the AI coach.**  
* **Taskbase continuously analyzes these interactions to identify skills and gaps.**  
* **The skill profile evolves as reps improve or change behavior.**

### **3.1.3 Skill Profile Components**

**Taskbase evaluates skills across areas such as:**

* **Cold calling**  
* **Cold messaging**  
* **Discovery**  
* **Demo execution**  
* **Objection handling**  
* **Deal urgency**  
* **Follow-up and qualification**  
* **General communication effectiveness**

# **3.2. Proactive Coaching**

### **3.2.1 How Proactive Coaching Works**

* **After a rep completes a sales action (e.g., a cold call), Taskbase checks the interaction against the sales playbook.**  
* **The AI proactively messages reps in Slack, Teams, or Google Chat.**  
* **Example trigger message: I listened to your openerwant feedback?**

### **3.2.2 Adaptive Feedback**

* **Feedback adjusts to the reps current skill level.**  
* **If a rep implements changes, Taskbase registers this behavior as learning.**  
* **This creates a constant loop: action  feedback  improvement  profile update.**

# **3.3. Reactive Selling Support (Knowledge Retrieval)**

### **3.3.1 How Reps Use Taskbase on Demand**

**Examples of questions reps can ask taskbase:**

* **Who fits our ICP?**  
* **Which customer is a relevant reference for a fintech prospect?**  
* **Whats the recommended objection response for pricing pushback?**

### **3.3.2 Retrieval Source**

* **Answers are grounded in the companys sales playbook and product knowledge.**  
* **The same engine that coaches reps also retrieves operational guidance.**

# **3.4. Content Maintenance & Data Requirements**

### **3.4.1 Content Updates**

* **Playbook updates (messaging, objections, ICP shifts) must flow into Taskbase to maintain coaching accuracy.**  
* **New patterns from calls should be added to the playbook regularly.**

### **3.4.2 Call Data**

* **Taskbase does not record calls.**  
* **It processes call recordings from external platforms.**  
* **Any standard recording tool is sufficient as long as the data is accessible.**

### **3.4.3 Language Support**

* **Highest coaching quality is currently available in English and German.**  
* **Languages requiring specific phrasing (e.g., cold calling) benefit most from these two.**

# **3.5. Integrations**

### **3.5.1 CRM & Data Integrations**

* **Salesforce**  
* **HubSpot**  
* **KickScale**  
* **Call-recording tools (via standard APIs)**

### **3.5.2 Communication Integrations**

* **Slack**  
* **Microsoft Teams**  
* **Google Chat**

### **3.5.3 Leadership Dashboard**

* **Real-time view of each reps skill development.**  
* **Shows improvement, stagnation, or decline.**  
* **Helps identify root causes of missed quota without reviewing every call.**

# **3.6. Personas & Use Cases**

### **3.6.1 Sales Reps**

**Primary benefits:**

* **Day-to-day skill development based on actual work.**  
* **Continuous feedback instead of quarterly trainings.**  
* **Instant reactive answers (ICP, messaging, objections, references).**  
* **Support for cold calling, messaging, discovery, demos, and more.**

### **3.6.2 Sales Leaders / Managers**

**Primary benefits:**

* **Visibility into skill gaps rather than only activity metrics.**  
* **Insight into discovery, demo quality, objection handling, and more.**  
* **Faster identification of issues when reps miss quota.**  
* **Less manual call review.**

### **3.6.3 Enablement Teams**

**Primary benefits:**

* **Scalable daily coaching without increasing human workload.**  
* **AI handles repetitive coaching.**  
* **Enablement focuses on playbook quality, objection monitoring, and updates.**  
* **Continuous learning replaces workshop-only models.**

### **3.6.4 CROs / Revenue Executives**

**Primary benefits:**

* **Scalable coaching without proportional headcount growth.**  
* **Predictable cost structure per rep license.**  
* **Standardization of high-quality coaching across the organization.**  
* **Faster onboarding and ramp time.**

# **3.7. Differentiating Value (USPs)**

### **3.7.1 Personalized, Contextual Coaching**

* **Feedback is based on the reps latest activity.**  
* **Not generic modules; real situational guidance.**  
* **Feels like a personal coach reacting in real time.**

### **3.7.2 Skill Visibility for Leaders**

* **Converts qualitative selling behavior into measurable skill insights.**  
* **Removes the need for leaders to manually diagnose performance gaps.**

### **3.7.3 Scalable Enablement**

* **Automates repetitive coaching interactions.**  
* **Frees enablement to work on strategy and content.**  
* **Works with thousands of reps simultaneously.**

### **3.7.4 Expert Source Content**

* **Trained on advanced sales methodologies and proven talk tracks.**  
* **Can incorporate expert content from Patrick or external creators.**  
* **Allows companies to adopt frameworks from top industry voices.**

### **3.7.5 Proactive Coaching as a Differentiator**

* **Taskbase reaches out automatically.**  
* **Reps dont need to remember to ask for help.**  
* **Creates continuous learning embedded in daily workflow.**

# **3.8. Ecosystem Benefits**

### **3.8.1 KickScale Integration**

* **KickScale highlights common objections and struggle points.**  
* **Taskbase uses these insights to update the playbook after human validation.**  
* **Ensures coaching aligns with real customer conversations.**

### **3.8.2 Expert Content Ecosystem**

* **Companies can inject methodologies from influencers, trainers, or frameworks.**  
* **AI coach trains reps based on selected content.**

### **3.8.3 Automatic Update Loop**

* **New objections, fresh messaging, and new patterns flow into the playbook.**  
* **Taskbase updates coaching automatically once the playbook changes.**  
* **Keeps learning relevant and aligned with current market realities.**

### **3.8.4 Low-Friction Integration Philosophy**

* **Taskbase lives inside existing workflows.**  
* **No new UI required.**  
* **Designed as an intelligent layer across the sales tech stack.**

## **3.5. Customer Stories & Proof Points**

[https://taskbase.atlassian.net/wiki/x/AgCKS](https://taskbase.atlassian.net/wiki/x/AgCKS)

# **4. Sales Process Overview**

## **4.1. Sales Stages, Required Activities per Stage & Exit Criteria**

Use stage checklists to prevent slippage. Each stage requires validated pains, stakeholders, next steps, and calendarized actions. Tie every commit to a mutual action plan.

|  | Meeting Booked | 1: Problem/ Use Case Agreement | 2: Priority Agreement | 3: Solution/Value Agreement | 4: Power Agreement | 5: Commercial Agreement |
| :---- | :---- | :---- | :---- | :---- | :---- | :---- |
| **Seminal Question:** The question you are trying to answer | Do we have a meeting booked with an ICP? | Do they have a problem we can solve? Do they want to achieve something they cannot achieve without us? | Are the problems big enough to prioritize solving? Can we get a good business case? | Is this solution worth putting money into? Can our solution solve their problem thoroughly? | Does the Economic Buyer agree to Solution and Problem? | Are you gonna buy this thing? |
| **Exit Criteria:** Proof that youve answered the question | - Accepted by Sales Rep/ Account Executive - Match of LinkedIn profile to our ICP and Persona criteria | - 2-3 biz initiatives (not problems, projects) - Do they understand the org structure? (3-2-1) | - Quantified business initiatives | - They think our solution is good enough to solve the problem. | - Approved proposal above the line - Required capabilities - Implementation date - MAP in place | - Executed contract - Notes to post-sales |
| **People Involved:** Who should answer that question | Director, Sales or Enablement CRO / VP Sales | Director, Sales or Enablement, VP Sales | Director, Sales or Enablement, VP Sales (or ++) | Director, Sales CRO / VP Sales IT / Finance | CRO / VP Sales | Director, Sales CRO / VP Sales IT / Finance Legal |
| **Tools:** Things you can do to get the answer | - Cold Calls - Cold emails - Social Selling - LinkedIn Messages - Sequences | - Discovery Call - Problem Hypothesis - Audits / Comparisons - Demo (Before / After) | - Value engineering (ROI calculator) - Super detailed demos (before vs after) - Workflow interviews / reverse demos - Case study | - Super detailed demos (before vs after) - Pilots & Trials - Business cases / ROI studies | - Champion 1:1s - Exec meetings - Case studies | - Proposal - Post-sales people - Discounts & negotiation |
| **Risk Criteria:** How well youve achieved the exit criteria | CRO VP Sales Director Enablement Director Sales | Initiative Problem Pain No Pain | Massive Metrics Clear Metrics Not Meaningful No Metrics | Differentiated Value Clear Some differentiated value Competitors in deal Local competitor they already talk to | We met Economic Buyer Our Champion is same level as EB Champion below EB Champion two below EB | They're Driving We're Driving Falling Behind Nothing Started |

# **5. Qualification Framework**

## **5.1. Overview of Qualification Methods used**

Primary: MEDDICC for enterprise/mid-market; BANT for high-velocity SMB; SPICED-style discovery for problem depth. Choose depth by ACV and complexity.

## **5.2. Discovery Question Library**

* Impact: What happens if this problem persists another two quarters?  
* Process: How do stage changes, approvals, and forecasting work today?  
* Metrics: Which KPIs define success for you and your leadership?

## **5.3. How to Score and Disqualify Opportunities**

Use a lead/deal score blending ICP fit, intent, pain severity, stakeholder access, and timing. Disqualify respectfully when lack of fit, authority, or compelling event is evident; leave the door open for nurture.

## **5.4. Qualification Tools and Templates**

In deal reviews, we use a specific framework so that we can focus on what really matters in every deal. The goal of deal reviews:

* Mitigate the risks we identify by talking through them  
* Discover questions we still need to ask our buyer so that we can better evaluate the deal

Here are categories (5Ps) and the respective questions you want to have an answer for before going into a deal review meeting:

### **5Ps Framework for Deal Reviews:**

The 5Ps Framework to use for Deal Reviews760Pain

* Do they already have a concrete project with a concrete goal?  
* What is the (quantifiable) business pain we are solving for the customer?  
* What is the impact of that pain (if not solved)?  
* What are the criteria they want to work with a company?  
* Where is the information coming from?

Priority

* Metrics are large or small?  
* Can the project be tied to a business initiative?

Power

* Who has the authority to release the funds and who will sign the deal?  
* Who is the true economic buyer?  
* Do we know some or have connections to some people who are high in the organisation?  
* Where is the information coming from?

People

* Who is your champion? How do you know they are a champion?  
* Who are the lend of people we are working with on this deal? In what way is each involved? What does each care about?  
* Where is the information coming from?

Process

* What steps do they as a company need to make to get to a buying decision?  
* Is the close date of that opportunity set into stone and discussed with the prospect?  
* Do we have something in place (Compelling event, specific customer urgency, pilot expiration, or other) that will drive the timeline?  
* Have we asked the client if theyve thought about an appropriate range of investments to solve their problem? How do they plan on funding this?  
* Do we understand the decision criteria for the people involved in the decision-making steps?  
* Are they looking into other competitors as well?  
* Where is the information coming from?

## **5.5. Qualification for Expansion or Cross-Sell**

For existing customers, anchor on adoption, value realization, and executive alignment. Score expansion potential by usage breadth, champion influence, and upcoming initiatives.

# **6. Messaging, Scripts & Talk Tracks**

## **6.1. Cold Outreach Templates (Email, Phone, LinkedIn)**

Principles: Personalize to persona pain + proof, one CTA, 35 sentences, plain language, clear pain in the first line.

## **6.2. Persona-Specific Value Messaging**

* CRO: Confident commits via stage governance and risk surfacing  
* RevOps: Fewer manual audits; enforce hygiene automatically; reliable reporting  
* Sales Managers: Ready-made deal reviews and coaching with less prep

## **6.3. Discovery Call Structure**

* Align on agenda and outcomes; get consent to ask tough questions and to share context  
* Probe problem, impact, stakeholders, and timing; quantify pains and define success metrics  
* Close by booking the next meeting in the call. Never leave without.

## **6.4. Objection Handling Scripts**

Acknowledge, Accept, Adjust, Ask

## **6.5. Demo Scripts & Positioning**

    :

* Did you kick off with a What We Heard slide to recap their top goals and pain points?  
* Did you check in with new stakeholders to confirm those priorities still hold  and get their lens on it too?  
* Did you ask how they do it today before jumping into how it could work with your platform?  
* Did you stick to only the features that directly solve their core use case or pain?  
* Did you lead with the flashiest, most value-packed feature and build momentum fast?  
* Did you give a clear why before each feature  the business reason they should care?  
* Did you dig into their internal process and team structure to set up smart multithreading plays?  
* Did you clearly explain how your product is different  and why that matters to them?  
* After each feature, did you ask what was going through your mind as I walked through that? instead of any questions?

10. Did you lock in the next call live, with a clear reason why its valuable and who else should be there?

Intro

For many salespeople, a demo is treated as a one-time event in the sales process. The pattern is familiar: run a discovery call, gather some information, then schedule a demo meeting to present the product. This approach has worked in the past  but todays world looks very different. Buyers are busier, better informed, and have higher expectations.

In lower-cost deals (say, below $10,000 a year), many buyers can self-educate and purchase without ever needing a demo. Theyll happily watch a pre-recorded product tour or click through an online sandbox. But once deal sizes climb, **personalized demos remain essential.**

Trmpis Substack is a reader-supported publication. To receive new posts and support my work, consider becoming a free or paid subscriber.

And heres the critical point: if youre delivering the same generic demo over and over, your role as a salesperson adds little value. In that case, you might as well send a video link. The only advantage left would be the human factorthat someone booked time with you and stayed to watch live. But thats a thin reason for your existence.

Great demos, in contrast, are **personalized, dynamic, and context-driven.** They connect directly to the buyers situation and pains. They dont follow a rigid structure  they adapt. And most importantly, they arent confined to a single meeting slot on the calendar.

### **Demos as a Tool, Not Just a Meeting**

Too often, demos are seen only as a fixed stage in the process. But a demo is a **tool**  just like discovery questions, case studies, or proof of value. You can use a demo at any moment if it helps the conversation.

Imagine youre ten minutes into a discovery call. The buyer describes a painful, time-consuming process. If you know your solution can cut that process in half, why wait until a later demo? Show them right then. Anchor it in their reality by asking:

* *Can you see yourself using this?*  
* *If you did, how much time would it save you exactly?*

Suddenly, youve moved from features to impact. Youve built a business case live in the meeting  and you can close that mini-demo before pivoting to another use case.

This is how modern salespeople should think: not in terms of demo meeting versus discovery meeting, but in terms of **use cases, tools, and value delivery.**

### **Delivering Value Early**

This mindset becomes even more critical in outbound sales. Inbound prospects may happily go through a clean sequence of discovery first, demo second. But outbound prospects have less patience. They didnt ask to talk to you. If you spend thirty minutes asking questions without showing anything of value, chances are you wont earn a second meeting.

Thats why the best sellers learn to **deliver value quickly**  weaving in snippets of demo during the very first call, always tailored to what the buyer has just said.

### **Yes, Theres Still a Demo Meeting**

That said, most sales processes still contain a dedicated demo-heavy meeting. This article will cover how to structure and run those demos for maximum impact. But keep this perspective in the back of your mind:

* A demo is not confined to one meeting.  
* A demo is a flexible tool.  
* And the best demos dont show everything  they show what matters most to the buyer.

With that foundation set, lets dive deeper into how to design, deliver, and master sales demos.

Chapter 1: How to Structure a Demo

A demo is not about showing everything your product can do. Its about showing the *right things* in the *right order* so that the buyer connects what they see with their real challenges and goals. Whether youre running a full demo meeting or dropping a quick demo snippet into a discovery call, the structure is the same.

Think of the demo as a sequence of four steps:

* **Recap**  Align on what youve heard.  
* **Permission**  Set expectations for the flow.  
* **Show**  Present the most relevant feature first.  
* **Ask**  Confirm value and anchor it in their reality.

This framework ensures your demos are focused, conversational, and tied to business impact  not a product tour. Lets break it down.

Step 1: Recap What Youve Heard

The first thing you do in a demo is **recap what you understood from the buyer.**

* In a scheduled demo meeting, recap what came out of your discovery call.  
* In a quick on-the-spot demo, recap what they just told you in the conversation.

Dont just say: *Let me show you the product.*  
Instead say:

From our last call, I understood three main points. First, coaching reps takes a lot of time, and managers cant scale it effectively. Second, reporting is slow and manual. And third, youre missing insights into which deals are actually at risk. Does that sound right?

Make it **visual.** Put a slide on screen that summarizes:

* **Use Case 1**  
* **Use Case 2**  
* **Use Case 3**  
* **Negative impact if not solved**

The last part  the negative impact  is crucial. What happens if they keep doing things the old way? What are the ripple effects if nothing changes? (Chris Orlob calls these ripple effects.) For example:

* If coaching doesnt scale, managers stay overloaded, and reps dont change behavior.  
* If reporting remains manual, leadership decisions are always based on outdated data.

Then **confirm with them:**

Did I capture that correctly? Would you add or adjust anything?

This is more than a check-in. Buyers nearly always correct or add details when you recap, which gives you richer information. And it shows them youve been listening  a huge trust builder.

 *Pro tip:* Recap is not just for demos. Use it everywhere  cold calls, discovery, even email follow-ups. Reformulating what youve heard is one of the fastest ways to create alignment and open the door to more information.

Step 2: Get Permission to Proceed

Once youve confirmed the recap, explain whats coming next and ask for permission.

For example:

Heres what Id like to do. Ill walk you through how we handle [challenge], and then we can discuss whether that would work in your process. Does that sound okay?

This small step makes the buyer feel in control. It also removes resistance because youre not pushing a flow onto them  youre inviting them to agree.

Youve used this same technique before:

* In a cold call: *Do you mind if I take 30 seconds to explain why Im calling?*  
* In discovery: *Can I propose an agenda for todays call?*

The psychology is the same: **permission creates alignment.**

Step 3: Show the Best Feature First

Now its time to show your product. But heres the rule: **show as little as possible, and start with the most important thing.**

* Dont go in order: challenge 1, challenge 2, challenge 3.  
* Start with the *hair-on-fire problem* that matters most to them. Or simply your most amazing feature (hopefully powered by AI).

For example: if they said coaching their reps is the hardest and most costly issue, dont start with reporting  start with the coaching feature.

Sometimes you need to give context first (like where the feature lives in the platform). But keep that to **30 seconds max.** You want to land the killer feature first, and here is why:

* Attention is highest at the beginning. If you bury your best feature, you risk losing them before they see the real value.  
* Solving their top challenge first creates immediate urgency and relevance.

Remember: youre not running a **tour.** Youre running a **business case in action.**

Step 4: Ask the Right Questions

Heres where many reps go wrong. They show a feature, then immediately jump to the next one. Dont do that. After every feature, you must **ask.**

There are two questions you should cycle through:

* **Do you see yourself using this?**

Simple, but powerful. Forces them to visualize themselves in the workflow.

* **Do you see value from this compared to how you do it today?**

Even better if you make it concrete:

Compared to the way youre doing this now, do you think this would make you more efficient?  
If you had this in place, how much time do you think your managers would save each week?

These questions are not throwaways. They do three things:

* They force the buyer to process what theyve seen.  
* They tie the feature back to *their* workflow.  
* They often surface numbers or impact statements you can use later in the business case.

Example talk track:

You mentioned earlier that reporting takes your team about two days each month. If you had this workflow in place, do you think that time would shrink? By how much?

Now youre not just showing a feature  youre co-building ROI with the buyer.

Bringing It Together

So, the structure of a great demo looks like this:

* **Recap**  Summarize their situation, challenges, and impacts. Confirm.  
* **Permission**  Lay out whats next and ask if its okay.  
* **Show**  Deliver the most relevant feature first. Keep it tight.  
* **Ask**  Anchor the feature in their world. Confirm value and impact.

This structure works for both a full demo meeting and a quick five-minute demo snippet mid-discovery. It keeps the conversation tied to business outcomes instead of product features, and it ensures the buyer is engaged throughout  not just sitting back passively watching your screen.

Chapter 2: Running the Demo

I cant teach you a one-size-fits-all demo for your product, because great demos are specific. Theyre built on the pains, use cases, and opportunities we uncovered with the buyer. Thats the point: we demo *their world*, not *our product*. What I *can* teach is how to think about the moving parts so you can adapt in real time.

Dont Script a Live DemoScript the Use Cases

I recently watched a startups recorded demo. They had scripted the entire thing end-to-end. Thats advanced and not advanced at the same time. If a demo can be fully scripted and only works when you follow the script, you dont need a rep to perform it live. Record it. Keep it under ten minutes. Host it on Loom, Vidyardwhatever. Send it *before* the meeting and use the live time to discuss what matters.

Ive done exactly that for a new ICP. Our flow only worked if I clicked in a precise sequence. Rather than risk a live stumble, I recorded an eight-minute walkthrough and sent it ahead of the first call. It worked. If your demo is always the same, dont perform it*package* it.

What deserves scripting is different:

* **Challenge/Use Case #1  the smallest possible demo slice that proves you solve it.**  
* **Challenge/Use Case #2  the slice that proves you solve it.**  
* **Challenge/Use Case #3  same.**

That belongs in the playbook. Not a start-to-finish tour, just modular slices tied to problems.

Cut the Interface Tour

Too many reps log in and narrate the screen: Top right are settings. Heres the admin. This is the dashboard. Over here we set up tutors Boring. Useless. Buyers dont need a museum guide; they need relief.

Show the *one* thing that relieves pressure **right now**. If context is absolutely required, keep it to thirty seconds, then land the punch.

Prepare Your Tabs Like a Pro

If discovery and demo are in separate meetings, prepare for speed:

* Open **one browser tab per use case**, each already positioned on the exact screen that proves value for that use case.  
* Start with the hair-on-fire problem. No warm-up lap.

This tiny bit of prep prevents rambling navigation and keeps the flow tight.

Whenever Possible, Demo a Real Environment

Ive often had the luxury of showing live, real environments because we could provision them cheaply. If you can show the real thing, do it. Priority number one.

When thats not possibleclient-specific data, privacy concernsclone a realistic environment. Anonymize what you must, but make it look and feel exactly like what they would use. If your tool requires special scaffolding to stage a believable scenario, invest the time once and duplicate it forever.

The Four-Step Flow Still Rules (Even Mid-Call)

Whether youre in a full demo or dropping a mid-discovery snippet, the same flow applies:

* **Recap** what I understood (use cases + ripple effects if nothing changes), confirm it.  
* **Permission** to proceed: Heres what Id like to do does that sound okay?  
* **Show** the most important feature first, as little as possible to prove the point.  
* **Ask** immediately after each feature:  
* **Do you see yourself using this?**  
* **Compared to how youve been doing this before, do you think youll be more effective and efficient with the way Ive shown you in this demo?**  
* If I already know their workflow: If you had this in place, how much time would your managers save each week?

This turns features into impact. We co-author the business case in real time.

Chapter 3: Closing the Demo: Summarise, Score, Decide

At the end, I bring the conversation back to clarity and commitment.

I summarize in their words:

Let me quickly summarize. We discussed challenge #1, challenge #2, and challenge #3. For #1, I asked if you see yourselves using thisyou said definitely yes.

Then I quantify *importance* with a clean scale:

From **0 to 10**, given your challenge and what you saw today, how important is it for you to solve this **the way we showed**?

I do this for each use case when there are multiple. If its messy or we only covered one, I still ask for an overall score.

Heres my rule of thumb: **anything below 8, I pause.** I ask:

Typically when clients are below eight, it isnt worth pushing internally right now. **What would need to be true** for this to move to an eight or nine?

Now I learn whether its missing features, timing, budget, strategy, or stakeholders. If theres nothing I can influence, I *dont chase*. Ill suggest:

Lets revisit in six months when priorities may shift. Shall we schedule that follow-up now?

If they score **810**, I tighten the loop:

Greatwhat would bring this to a nine or ten?

I capture the specifics; those become my next-step inputs.

Add Stakeholders the Right Way

In most demo calls, I ask the stakeholder question explicitlythis is the exact line:

**Who else does want to be involved in a project like this somewhere on the way before it is signed, or before we decide that were actually going to work together for sure? Who else would be interested in being part of this journey?**

Theyll give me names. I dont leave them to carry the message internally. I propose the next step immediately:

Perfect. Rather than you relaying everythingwhich is time-consuming and invites technical questionsyou cant be expected to answer**lets bring them in**. Ill re-summarize the situation, the challenges, the impact, and show the specific slices we covered today. Does that work? When should we meet?

Deal size dictates structure. For **<10k**, I compress and often go for signature. Around **1050k**, I still keep it lean but may add one stakeholder meeting. At **50300k+**, I invest: multiple stakeholder demos, sometimes short intros first, never a single massive meeting with CFO + CEO + COO + CSO. If there are multiple departments, we go one by one.

### **When My Boss Needs to See This Appears**

If my champion says, I need to ask my boss, I steer toward a business case:

Your boss probably cares about **[KPI X]**is that right? Often leaders want three things:

* What we invest.  
* What we get back over time.  
* How this ties to a **strategic initiative**.

Lets prepare that. Ill assemble the numbers we discussed and map it to the initiative. **When should we do the ROI meeting?**

For larger deals, once a few people are engaged, I may recommend a focused **workshop**but only when theres clear buy-in and agenda.

### **What I Leave Behind (or Use to Open the Next Call)**

I create a **single, tight slide** we can circulate internally and reuse to kick off the next meeting. It includes:

* **Situation / Use Cases** (their language)  
* **Impact / Ripple Effects** if nothing changes  
* **Solution Description** (only the slices we showed)  
* **How Well Measure Impact** (time saved, error rate reduced, pipeline hygienewhatever they named)  
* **Specifics** that matter to them (data protection, where we start, rollout plan)  
* **Top 23 Objections + crisp answers**

This becomes the internal memo my champion wishes they had time to write. I write it for them.

### **Putting It All Together (Flow I Actually Use)**

* Recap (slide visible)  Confirm.  
* Permission to proceed  Does that sound okay?  
* Show slice #1 (hair-on-fire)  Ask: Do you see yourself using this? + Compared to today more effective and efficient?  quantify time/money.  
* Show slice #2  Ask again.  
* Show slice #3 (if needed)  Ask again.  
* Summarize  Importance 010 per slice or overall.  
* If <7  clarify what would move it up; park with a date.  
* If 810  add stakeholders with a concrete invite; or propose ROI meeting/workshop.  
* Send the one-slide recap/business case.

Thats the craft. Im not proving that my product is big; Im proving that their problem can be smalland soon.

## **6.6. C-level Presentation**

Three slides: business impact, risk mitigation, and implementation confidence. Keep detail in appendix.

## **6.7. Workshop**

Collaborative mapping of current vs. future-state process; co-create a mutual action plan with owners and dates.

# **7. Objection Handling & Competitive Intelligence**

## **7.1. Most Common Objections and Responses**

Budget, timing, security, integration, change management. Use evidence, ROI math, and customer proof to de-risk decisions.

| Cold Call Objections | Best Answer |
| :---- | :---- |
| Could you send the demo link because i get many calls and email about sales Tech? | I gladly share a demo with you. Now, if your sales reps will get that question with the email, what would you teach them? You would not allow them to get off and just send the email, right? My AI Tutor does not allow me to do that either. It asks whether we can book a meeting next week and in case you do not like the demo I send you, you can still cancel. Should we quickly look in our calendars next week? |
| We already have trainings in place. | That is great. Our AI Tutors teach the reps exactly what you already have in your trainings. What we realised with our clients is that only about 5-10% of reps actually consume those ressources and can keep their content over time and actually put them into practice. Is that something that sounds familiar for you as well? |
| Are you a training provider? | Are you looking for one? |
| We already have a training provider | That is fantastic, almost all our clients have and implemented such methodologies as Sandler, MEDDIC or SPICED or have done other trainings. One challenge we have seen with these is that reps learn them in an intense course but forget more than 90% of it again after 2-3 months. Is that something that sounds familiar? |
| Are you a sales enablement provider? | Are you looking for one? |
| We have enablement team in-house. | That is fantastic, almost all our clients have a sales enablement team in place that is responsible for training. Is that what your sales enablement team does as well on their own? |
| How do you measure how people change their behaviour? | We usually have two approaches. First, we choose specific skills that we want to develop in your sales reps. For instance uncovering urgency and lets say cold call skills. Now, the tutor autonomously develops those skills in your reps during the day. After a short periode, lets say 3 months, we can analyse the cold calls and see whether they have improved in quality. Another way is the tutor actually delivers points to the reps for getting those skills right. If the points have improved on their personal skill table, it is a good sign they actually have improved and the conversion rates, sales cycles and deal sizes will follow. Do you have specific skills you see in your reps that need continuous development? |
| We do not have the culture that supports learning | Yeah we have seen that in some other organisations as well. Does that mean you are not investing in learning at all? |
| We have it covered | - You have it covered? - Do you mean you have people who train your team? |
| Im in a meeting | That must be a really boring meeting? (smile) |
| Send me an email | Sure, that is a great suggestion. Can I add something to that? Lets book a meeting already in 1 or 2 weeks, I send you the material, and in case you do not like it, you can still cancel. This way, we safe each others time. When works for you? |
| Data privacy (Betriebsrat in Germany): we cant get access to CRM data and evaluate individual performance. | Anonymized data  however, can this be used for coaching? |
| We are good right now |  |
| We have highly skilled reps that follow all of our trainings | Oh wow, I never heard that before. Are you interested in selling your methodology, could be a million dollar training idea (laugh a little) |
| That is right now not in our priority list | What needs to happen in order for that to change? Until when? |
| Are you another recording tool such as Gong, Kickscale, etc.? | Are you using a recording tool already? We do not record calls - that already needs to be in place in order to work with us on some skills. The challenge with Gong is that nobody uses their coaching feature because no rep is proactively watching the overwhelming feedback of this coaching feature. So they never learn. Then explain what Taskbase does differently (proactively, skill development, data from CRM) |
| It wont work in our environment? |  |
| We just implemented something very similar internally |  |
| **Discovery Objections** | **Best Answer** |
| How do you measure how people change their behaviour? | We usually have two approaches. First, we choose specific skills that we want to develop in your sales reps. For instance uncovering urgency and lets say cold call skills. Now, the tutor autonomously develops those skills in your reps during the day. After a short periode, lets say 3 months, we can analyse the cold calls and see whether they have improved in quality. Another way is the tutor actually delivers points to the reps for getting those skills right. If the points have improved on their personal skill table, it is a good sign they actually have improved and the conversion rates, sales cycles and deal sizes will follow. Do you have specific skills you see in your reps that need continuous development? |
| We do not have the culture that supports learning. What do you suggest? | Yeah we have seen that in some other organisations as well. Does that mean you are not investing in learning at all? |
| Data privacy (Betriebsrat in Germany): we cant get access to CRM data and evaluate individual performance. | Anonymized data  however, can this be used for coaching? |
| That is right now not in our priority list | What needs to happen in order for that to change? Until when? |
| Are you another recording tool such as Gong, Kickscale, etc.? | Are you using a recording tool already? We do not record calls - that already needs to be in place in order to work with us on some skills. The challenge with Gong is that nobody uses their coaching feature because no rep is proactively watching the overwhelming feedback of this coaching feature. So they never learn. Then explain what Taskbase does differently (proactively, skill development, data from CRM) |
| Where does it live? Like does it live in HubSpot or does it live in a separate page? |  |
| Do you have any examples of sales playbooks like best you have somehow anonymized? |  |
| Five skills are included. And how many skills do you have? |  |
| Does this work for customer success as well? | Yes, of course. The skills are a bit different but we use it with our CS team too. |
| **Demo Objections** | **Best Answer** |
| How do you measure how people change their behaviour? | We usually have two approaches. First, we choose specific skills that we want to develop in your sales reps. For instance uncovering urgency and lets say cold call skills. Now, the tutor autonomously develops those skills in your reps during the day. After a short periode, lets say 3 months, we can analyse the cold calls and see whether they have improved in quality. Another way is the tutor actually delivers points to the reps for getting those skills right. If the points have improved on their personal skill table, it is a good sign they actually have improved and the conversion rates, sales cycles and deal sizes will follow. Do you have specific skills you see in your reps that need continuous development? |
| We do not have the culture that supports learning | Yeah we have seen that in some other organisations as well. Does that mean you are not investing in learning at all? |
| Data privacy (Betriebsrat in Germany): we cant get access to CRM data and evaluate individual performance. | Anonymized data  however, can this be used for coaching? |
| Are you another recording tool such as Gong, Kickscale, etc.? | Are you using a recording tool already? We do not record calls - that already needs to be in place in order to work with us on some skills. The challenge with Gong is that nobody uses their coaching feature because no rep is proactively watching the overwhelming feedback of this coaching feature. So they never learn. Then explain what Taskbase does differently (proactively, skill development, data from CRM) |

## **7.2. Competitor Overview & Strengths/Weaknesses**

Map by use case, integration approach, admin overhead, and time-to-value. Position Taskbase on governance depth and adoption ease.

| Name | Website | Information | Relevance | Region | Their ICP | Category | Differentiated Value (Strengths / Weaknesses) | Customers | Pricing | Added By |
| :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- |
| Arist | [http://Arist.com](http://Arist.com) | [https://www.youtube.com/watch?v=KnfVCd6dfko](https://www.youtube.com/watch?v=KnfVCd6dfko) |  | World | NGOs, Software companies | Learning for Sales Teams | We are based on skills and really develop those. That gives an extremely structured approach to development. At any time, a manager can add a skill and the Tutor will get the work done. | Dealfront | [https://www.arist.co/pricing](https://www.arist.co/pricing) | Patrick Trmpi |
| Pitchmonster | [https://www.pitchmonster.io/](https://www.pitchmonster.io/) |  |  |  |  |  |  |  |  |  |
| Seismic | [https://www.seismic.com/](https://www.seismic.com/) |  |  |  |  | Sales Enablement plattform |  |  |  |  |
| Highspot | [https://www.highspot.com/de/](https://www.highspot.com/de/) |  |  |  |  | Sales Enablement plattform |  |  |  |  |
| ChatGPT | [https://openai.com/index/chatgpt-study-mode/](https://openai.com/index/chatgpt-study-mode/) |  |  |  |  |  |  |  |  |  |
| SalesHood | [http://saleshood.com](http://saleshood.com) |  |  |  |  | Sales Enablement plattform |  |  |  |  |
| wejam | [https://www.wejam.ai/](https://www.wejam.ai/) |  |  | DACH | Sales | AI Role Play |  |  |  | Samir |
| Zenarate | [http://zenarate.com](http://zenarate.com) |  |  |  |  | Role play and recording feedback / Sales Enablement plattform |  |  |  |  |
| Pepsales AI | [https://www.pepsales.ai/](https://www.pepsales.ai/) |  |  |  |  |  |  |  |  |  |
| Retorio | [https://www.retorio.com/product](https://www.retorio.com/product) |  |  |  |  |  |  |  |  |  |
| Jiminny | [http://www.jiminny.com](http://www.jiminny.com) |  |  |  |  |  |  |  |  |  |
| Setero | [https://www.setero.io/home](https://www.setero.io/home) |  |  |  |  |  |  |  |  |  |
| High Five Academy | [https://www.high-five.ai/de/business](https://www.high-five.ai/de/business) |  |  |  |  |  |  |  |  |  |
| Learn.xyz | [https://www.learn.xyz/companies](https://www.learn.xyz/companies) |  |  |  |  |  |  |  |  |  |
| Bliro | [https://www.bliro.io/en/sales](https://www.bliro.io/en/sales) | Personal AI Sales Assistant |  | DACH |  |  |  |  |  |  |
| Reflact | [https://reflact.com/](https://reflact.com/) | LMS + Simulation |  |  |  |  |  |  | - Simulation Pricing 3-5k (3-5MT) initial fr 1 Bot & Training. - Autor: 800eur/Jahr. - Pro Lernender 20eur/Jahr. - Nutzen: ChatGPT, inkl Feedback. Kriterien. Content kann Autor erstellen oder sie. - Inkl Video fr Avatar, ist langsamer als Audiobot (Telekom, Feuerwehr in WBT, LMS in Flugbranche) |  |
| Mindtickle | [https://www.mindtickle.com/](https://www.mindtickle.com/) |  |  |  |  |  |  |  |  |  |
| Spekit | [https://www.spekit.com/](https://www.spekit.com/) | AI Learning Enablement |  |  |  |  |  |  |  |  |
| Demodesk | [https://demodesk.com/comparison/demodesk-vs-gong](https://demodesk.com/comparison/demodesk-vs-gong) | AI assistant with real-time coaching |  |  |  |  |  |  |  |  |
| flowit | [http://flowit.com](http://flowit.com) | AI Coaching |  | CH | HR department of large companies |  |  |  |  |  |
| Glyphic | [https://www.glyphic.ai/](https://www.glyphic.ai/) | Recording |  | EU |  |  | They have GTM insights other than the coaching |  |  |  |
| Skylar | [https://www.getskylar.com/](https://www.getskylar.com/) | AI Role-play coaching |  | EU |  |  |  |  |  |  |
| Zick learn | [https://www.zicklearn.com/en](https://www.zicklearn.com/en) | Microlearning |  | Ireland |  |  |  |  |  |  |
| Blify | [https://www.blify.co/](https://www.blify.co/) | Microlearning |  |  |  |  |  |  |  |  |
| Salesfox | [https://salesfox.io/](https://salesfox.io/) | Cold Calling AI coach |  |  |  |  |  |  |  |  |
| Docebo | [https://www.docebo.com/de/](https://www.docebo.com/de/) | LMS for sales reps |  | World |  |  |  |  |  |  |
| Workday |  |  |  |  |  |  |  |  |  |  |
| Successfactors |  |  |  |  |  |  |  |  |  |  |
| Hyperbound | [https://www.hyperbound.ai/](https://www.hyperbound.ai/) | AI Sales Coaching |  |  |  |  |  |  |  |  |
| ENZRA( Ranjit de Souza invested here, co-built it) | - [https://www.helloezra.com/en-gb/sales-leadership-coaching-for-tech](https://www.helloezra.com/en-gb/sales-leadership-coaching-for-tech) |  |  |  |  |  |  |  |  |  |
| BetterUp | - [https://www.betterup.com/solutions/sales-coaching](https://www.betterup.com/solutions/sales-coaching) |  |  |  |  |  |  |  |  |  |
| Coachhub | - [https://www.coachhub.com/](https://www.coachhub.com/) |  |  |  |  |  |  |  |  |  |
| Avarra |  |  |  |  |  |  | Only role play |  |  |  |

## **7.3. Trap Setting and Landmine Questions**

* How does your tool enforce stage exit criteria without admin-heavy workarounds?  
* Whats your plan when reps skip fieldsdo you detect and fix it automatically?

## **7.4. Win/Loss Analysis Snippets**

Capture top 3 reasons per segment; feed insights into messaging, roadmap, and enablement priorities.

## **7.5. Positioning Against Incumbents and Challengers**

Lead with business outcomes and governance, not feature parity. Prove faster time-to-adoption and lower admin cost.

# **8. Tools & Tech Stack**

## **8.1. CRM Guidelines and Hygiene (e.g., Salesforce)**

* Every meeting logged same day; next step and date always present; close dates realistic with mutual plan alignment  
* Mandatory fields enforced by validation; no free-text where picklists exist

## **8.2. Sales Engagement Tools (e.g., Outreach, Apollo)**

Use persona-based sequences; personalize first touch; measure reply rates, meetings set, and conversion.

## **8.3. Demo Platforms and Usage**

Standardize flows, record reference demos, and keep an appendix of role-specific paths.

## **8.4. Enablement Tools (e.g., Gong, Taskbase)**

Tag calls, create libraries by persona and stage, and maintain a shared repository of best-practice clips and deal briefs.

## **8.5. Data & Enrichment Tools (e.g., Clearbit, ZoomInfo)**

Enrich accounts for ICP fit; use intent signals to prioritize outreach; keep DNC and compliance lists current.

## **8.6. Other tools**

Scheduling, proposal, signature, and project tools integrated with CRM for end-to-end visibility.

# **9. KPIs, Metrics & Compensation**

## **9.1. Daily/Weekly Activity Metrics**

* SDR: quality touches, meetings set, meeting acceptance rate, show rate, SALs created  
* AE: stage progression, demos, multi-thread ratio, mutual plans created, proposals sent

## **9.2. Stage-by-Stage Conversion Benchmarks**

Track conversion by segment and persona. Inspect drop-offs; improve messaging, qualification, or proof assets accordingly.

## **9.3. Quota and Compensation Structure**

Align on role-specific targets with accelerators for overachievement and quality gates for pipeline hygiene.

## **9.4. Pipeline Health Metrics**

* Coverage ratio, aged deals, stage velocity, push rate, and commit accuracy  
* Leading indicators: meetings, qualified opps, multi-threading depth

## **9.5. Forecasting Best Practices**

Top-down and bottom-up triangulation; weekly cadence; commit based on evidence and verified next steps.

# **10. Onboarding & Training**

## **10.1. 30/60/90-Day Ramp Plan**

30: Foundations and shadowing. 60: Run full-cycle on smaller deals. 90: Full quota-bearing with manager sign-off.

## **10.2. Certification Paths**

Role certifications for product, discovery, demo, and process adherence; must-pass call reviews and scenario role-plays.

## **10.3. Shadowing and Role-Play Programs**

Structured observation  co-pilot  lead; weekly role-plays with calibrated rubrics and feedback loops.

## **10.4. Learning Management Systems & Resources**

Centralize assets, micro-learnings, and checklists. Track completion and knowledge retention.

## **10.5. Performance Evaluation During Onboarding**

Clear expectations, milestone reviews, and remediation plans when needed.

# **11. Sales Enablement & Content**

## **11.1. Sales Decks and One-Pagers**

Persona-specific decks; concise problem  value  proof  next steps. Include appendix for technical deep-dives.

## **11.2. Case Studies by Vertical**

Focus on outcomes, not featureswin rate lift, ramp acceleration, and governance improvements.

## **11.3. Proposal & Quote Templates**

Standard SKUs, tiering, legal terms insertions, and approval rules. Dynamic pricing guardrails.

## **11.4. Competitive Battle Cards**

If they say X, we say Y talk tracks, proof assets, and trap questions. Keep current with win/loss inputs.

## **11.5. Customization Guidelines for Content**

What can be tailored vs. must remain standardized; brand and compliance checks before external use.

# **12. Handoff & Collaboration**

## **12.1. MQL  SQL Handoff Process**

Define acceptance criteria, SLA, required data fields, and feedback loop with Marketing for quality enforcement.

## **12.2. SDR to AE Handoff Checklist**

* Confirmed meeting, agenda, persona, pains, and desired outcomes  
* Account notes with triggers, stakeholders, and data hygiene validated

## **12.3. AE to Customer Success Handoff**

Share business case, success plan, timeline, risks, and stakeholders. Ensure kickoff readiness and adoption plan.

## **12.4. Working with Marketing for ABM & Content**

Target lists, messaging tests, intent data, and persona asset packs; weekly sync and quarterly retro.

## **12.5. Product Feedback Loop**

Collect feature requests and objections; tag by segment and ARR; route to Product with priority scores and examples.

# **13. Legal, Pricing & Procurement**

## **13.1. Pricing Tiers and Packaging**

Good/Better/Best tiers by feature and usage. Align packaging to personas and deal complexity.

## **13.2. Discounting Rules and Approval Workflows**

Guardrails by segment and ACV; approvals routed via RevOps and Finance; never trade price for silencetrade for references, term, or scope.

## **13.3. Procurement & Legal Redline Playbook**

Keep standard clause library, fallback provisions, and escalation matrix. Pre-empt InfoSec/security reviews with documentation packs.

## **13.4. Standard Contract Templates**

MSA, Order Form, DPA, and SOW templates maintained by Legal; versioned and centrally accessible.

## **13.5. Security & Compliance Documents**

**Understanding Data Privacy, Data Protection, and Works Council Requirements for Skill Profiles**

This article clarifies common misconceptions about why certain employee-related featuresespecially skill profilesmay or may not be displayed in a product. Discussions often reference data privacy issues, yet the underlying constraints usually lie elsewhere. The goal here is to distinguish between the relevant domains: **data protection**, **security**, **works council requirements**, and **legal considerations**, with a focus on the German regulatory context.

## **13.5.1. Data Protection: What It Actually Regulates**

Data protection authorities primarily assess **which types of data are being collected** and how they are processed. Different data types carry different levels of risk:

* **Low-risk data** (e.g., name, email address) typically triggers minimal scrutiny.  
* **Higher-risk data**, such as **skill profiles**, **audio recordings**, or **video data**, requires more attention regarding:

Storage location (e.g., country-specific restrictions)

* Data handling and retention  
* Subprocessors and third-party access

A key point:  
**Data protection rules rarely prohibit displaying a skill profile.**  
The assessment focuses on **storage, processing, and data flows**, not on whether the information can be shown in the interface.

## **13.5.2. Security Considerations**

Security requirements run in parallel with data protection. As data sensitivity increases, customers expect stronger guarantees around:

* Infrastructure and storage  
* Access control  
* Internal and external data transfers

Although important, these concerns do not directly affect whether a skill profile can be displayed.

## **13.5.3. Works Council (Betriebsrat): The Real Visibility Constraint**

In Germany, works councils play a decisive role when technology could be interpreted as **employee monitoring**. Under relevant labor laws, they have a right of co-determination for tools that:

* Collect behavioral data  
* Infer performance- or skill-related insights  
* Could create pressure on employees to behave in particular ways

Because skill profiles often rely on user interactions and behavioral signals, they may fall under this category. Typical works council concerns include:

* Displaying the profile might create **implicit performance pressure**.  
* Managers could theoretically use the data to evaluate individuals or tie compensation to AI-inferred metrics.  
* As a result, councils may require:

Limiting visibility

* Providing only a private view to the employee  
* Renaming or reframing the feature (e.g., wallet)  
* Adjusting how the data is generated or presented

In previous implementations with similar functionality, works councils have imposed restrictions even when data protection authorities had no objections.

## **13.5.4. Legal Topics and Customer Maturity**

Legal considerations vary by country, but in Germany they typically intersect with the works councils rights. Many early-stage customers do not have a works council yet, meaning these constraints become relevant only as organizations grow.

## **Summary**

* **Data privacy** is not the reason skill profiles cannot be shown; its focus lies on data categories and processing.  
* **Works council requirements**, particularly regarding employee monitoring, are the primary factor influencing whether and how such profiles can be displayed.  
* Visibility limitations, naming adjustments, and display rules typically originate from **co-determination rights**, not from data protection law.

# **14. Playbooks for Specific Scenarios**

## **14.1. Enterprise vs. SMB Sales Plays**

Enterprise: MEDDICC rigor, executive alignment, mutual action plans. SMB: velocity, lighter discovery, faster proof.

## **14.2. Upsell & Expansion Playbooks**

Land-and-expand motions mapped to adoption milestones; cadence with sponsor QBRs.

## **14.3. Selling During a Recession or Budget Freeze**

Lead with risk and cost reduction; offer pilots with clear success criteria and executive readouts.

## **14.4. Renewal Management & Retention**

Start early, validate value realization, identify churn risks, and align on next-phase roadmap.

## **14.5. Product-Led Sales Motions (PLG)**

Usage signals to upsell; trigger AE engagement when activation and team invites hit thresholds.

# **15. Continuous Improvement & Feedback Loop**

## **15.1. How to Submit Feedback**

Use the Playbook Feedback form linked in CRM and weekly team channels. Include example, impact, and suggested change.

## **15.2. Cadence for Playbook Reviews**

Monthly micro-updates; quarterly deep reviews with cross-functional stakeholders.

## **15.3. KPI-Based Playbook Optimisation**

Tie changes to KPI shifts (win rate, cycle time, forecast accuracy). A/B test scripts and stage criteria adjustments.

## **15.4. Involving Top Reps in Playbook Evolution**

Rotate a Deal Doctors council of top SDRs, AEs, and AMs; capture field-proven tactics and codify into process.

## **15.5. Playbook Change Log & Versioning**

Maintain semantic versions, summary of changes, and owners. Archive outdated assets.

# **16. Commission, Development Plans & PIP**

## **16.1. Commission Sheets and Structure**

Clear OTE splits by role, accelerators, and claw-back rules. Tie SPIFFs to strategic initiatives (e.g., stage adoption, multi-threading).

## **16.2. Development Plans**

Individual growth plans mapped to competencies: product mastery, deal strategy, storytelling, negotiation, and collaboration.

## **16.3. Performance Improvement Plan (PIP)**

Time-bound plan with clear KPIs, enablement support, and review checkpoints. Focus on coaching and measurable progress.

## **Operational Milestones & Ownership**

| Milestone | Target Date | Owner | Status |
| :---- | :---- | :---- | :---- |
| Publish v1 Playbook (Sections 19) |  | [Add Sales Enablement] | In ProgressBlue |
| Roll out Stage Exit Criteria in CRM |  | [Add RevOps] | ReviewYellow |
| Complete Discovery & Demo Certifications |  | [Add SDR/AE Managers] | PlannedGreen |

## **Quarterly Enablement Tasks**

4  
ee210ba6-ee0a-426a-a839-13b2402bd349  
incomplete  
Large SalesPlaybook Update

Risk watchouts: skipping exit criteria, poor CRM hygiene, single-threaded deals, and late involvement of RevOps/Legal lead to slippage and forecast misses. Mitigate by enforcing governance and using mutual action plans.
`;function wwe(e){const t=new Set(e.map(i=>i.id)),n=new Map;for(const i of e){const s=i.parentId&&t.has(i.parentId)?i.parentId:null,o=n.get(s)??[];o.push(i),n.set(s,o)}function r(i,s){return(n.get(i)??[]).map(o=>({...o,depth:s,children:r(o.id,s+1)}))}return r(null,0)}function Y$(e){const t=[];for(const n of e)t.push(n),t.push(...Y$(n.children));return t}function X$(e){const t=[];for(const n of e.children)t.push(n.id),t.push(...X$(n));return t}const vN=[{id:"taskbase",name:"Taskbase Playbook",icon:"TB",desc:"Start with our ready-made sales playbook",isOAuth:!1},{id:"notion",name:"Notion",icon:"N",desc:"Connect your Notion workspace",isOAuth:!0},{id:"confluence",name:"Confluence",icon:"C",desc:"Link your Confluence space",isOAuth:!0},{id:"pdf",name:"PDF Upload",icon:"P",desc:"Upload a playbook PDF",isOAuth:!1}],kwe=({onComplete:e})=>{const{data:t}=M6(),n=t?t.missing+t.partial:0,r=OF(),i=w.useRef(null),[s,o]=w.useState("source"),[a,l]=w.useState("extracting"),u=O6(l),c=I6(),d=j6(),[f,h]=w.useState(null),[p,m]=w.useState(null),[g,b]=w.useState(null),[v,x]=w.useState(new Set),[k,S]=w.useState(new Set),C=$$(s==="pick-space"),E=z$(s==="pick-pages"?g:null),P=w.useMemo(()=>wwe(E.data??[]),[E.data]),R=w.useMemo(()=>Y$(P),[P]),A=w.useMemo(()=>{const D=new Map;for(const T of R)D.set(T.id,T);return D},[R]);w.useEffect(()=>{const D=new URLSearchParams(window.location.search),T=D.get("connected"),J=D.get("error");if((T||J)&&window.history.replaceState({},"",window.location.pathname),J){m(`OAuth failed: ${J.replace(/_/g," ")}`);return}T==="notion"&&(l("extracting"),o("analyzing"),c.mutate(void 0,{onSuccess:()=>e(),onError:O=>{m(O.message),o("source")}})),T==="confluence"&&o("pick-space")},[]);const L=async()=>{var T;if(!f)return;m(null);const D=vN.find(J=>J.id===f);if(D)if(f==="taskbase"){o("analyzing");try{l("extracting"),await u.mutateAsync({provider:"taskbase",content:xwe}),e()}catch(J){m(J.message),o("source")}}else if(D.isOAuth)try{await r(f)}catch{m(`Could not start ${D.name} OAuth. Make sure the edge functions are running (supabase functions serve).`)}else f==="pdf"&&((T=i.current)==null||T.click())},I=async D=>{var J;const T=(J=D.target.files)==null?void 0:J[0];if(T){o("analyzing");try{if(l("extracting"),T.name.endsWith(".pdf")){const O=await T.arrayBuffer(),_=btoa(new Uint8Array(O).reduce((W,X)=>W+String.fromCharCode(X),""));await u.mutateAsync({provider:"pdf",pdfBase64:_})}else{const O=await T.text();await u.mutateAsync({provider:"pdf",content:O})}e()}catch(O){m(O.message),o("source")}}},U=D=>{b(D),x(new Set),S(new Set),o("pick-pages")},F=D=>{const T=A.get(D);if(!T)return;const J=X$(T);x(O=>{const _=new Set(O);if(_.has(D)){_.delete(D);for(const W of J)_.delete(W)}else{_.add(D);for(const W of J)_.add(W)}return _})},B=D=>{S(T=>{const J=new Set(T);return J.has(D)?J.delete(D):J.add(D),J})},q=()=>{const D=E.data??[];v.size===D.length?x(new Set):x(new Set(D.map(T=>T.id)))},H=D=>D.map(T=>{const J=T.children.length>0,O=k.has(T.id);return y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 rounded-lg py-2 hover:bg-muted/50 transition-colors",style:{paddingLeft:`${T.depth*20+12}px`,paddingRight:12},children:[J?y.jsx("button",{onClick:()=>B(T.id),className:"w-5 h-5 flex items-center justify-center shrink-0 text-muted-foreground hover:text-foreground",children:y.jsx(Xk,{className:`w-3.5 h-3.5 transition-transform ${O?"rotate-90":""}`})}):y.jsx("span",{className:"w-5"}),y.jsxs("label",{className:"flex items-center gap-2.5 min-w-0 flex-1 cursor-pointer",children:[y.jsx(Uf,{checked:v.has(T.id),onCheckedChange:()=>F(T.id)}),y.jsx("span",{className:"text-sm text-foreground truncate",children:T.title}),J&&y.jsx("span",{className:"text-[10px] text-muted-foreground shrink-0",children:T.children.length})]})]}),J&&O&&H(T.children)]},T.id)}),M=()=>{m(null),l("extracting"),o("analyzing"),d.mutate([...v],{onSuccess:()=>e(),onError:D=>{m(D.message),o("pick-pages")}})};return y.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:y.jsxs(Be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-lg rounded-2xl border border-border bg-card p-8 shadow-card",children:[y.jsx("input",{ref:i,type:"file",accept:".pdf,.txt,.md",className:"hidden",onChange:I}),y.jsxs(nl,{mode:"wait",children:[s==="source"&&y.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[y.jsx("h2",{className:"text-2xl text-foreground mb-1",children:"Connect your playbook"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Choose where your sales playbook lives"}),y.jsx("p",{className:"text-xs text-muted-foreground/70 mb-6",children:"You can add more sources later from the Integrations panel."}),y.jsx("div",{className:"space-y-2 mb-6",children:vN.map(D=>y.jsxs("button",{onClick:()=>h(D.id),className:`w-full flex items-center gap-4 rounded-xl p-4 border transition-all ${f===D.id?"border-primary bg-primary/5 shadow-glow":"border-border bg-muted/30 hover:border-muted-foreground/30"}`,children:[y.jsx("span",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-sm font-overline text-primary",children:D.icon}),y.jsxs("div",{className:"text-left",children:[y.jsx("div",{className:"text-sm font-subheading text-foreground",children:D.name}),y.jsx("div",{className:"text-xs text-muted-foreground",children:D.desc})]}),f===D.id&&y.jsx(ti,{className:"w-5 h-5 text-primary ml-auto"})]},D.id))}),p&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-destructive/30 bg-destructive/5 p-3 mb-3",children:[y.jsx(xa,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),y.jsx("p",{className:"text-xs text-destructive",children:p})]}),y.jsx("button",{onClick:L,disabled:!f,className:"w-full flex items-center justify-center gap-2 rounded-xl gradient-primary py-3 text-sm font-subheading text-primary-foreground disabled:opacity-30 transition-opacity",children:f==="taskbase"?y.jsxs(y.Fragment,{children:["Use Template & Analyze",y.jsx(va,{className:"w-4 h-4"})]}):f==="pdf"?y.jsxs(y.Fragment,{children:[y.jsx(xO,{className:"w-4 h-4"}),"Upload & Analyze"]}):y.jsxs(y.Fragment,{children:["Connect & Analyze",y.jsx(va,{className:"w-4 h-4"})]})})]},"source"),s==="pick-space"&&y.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[y.jsxs("button",{onClick:()=>o("source"),className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground mb-4 transition-colors",children:[y.jsx(Bv,{className:"w-3 h-3"}),"Back"]}),y.jsx("h2",{className:"text-2xl text-foreground mb-1",children:"Select a space"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Choose the Confluence space that contains your playbook"}),C.isLoading&&y.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((D,T)=>y.jsx(i0,{className:"h-14 w-full rounded-xl"},T))}),C.error&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-destructive/30 bg-destructive/5 p-3",children:[y.jsx(xa,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),y.jsx("p",{className:"text-xs text-destructive",children:C.error.message})]}),C.data&&y.jsx("div",{className:"max-h-72 overflow-y-auto pr-1",children:y.jsx("div",{className:"space-y-2",children:C.data.map(D=>y.jsxs("button",{onClick:()=>U(D.id),className:"w-full flex items-center gap-4 rounded-xl p-4 border border-border bg-muted/30 hover:border-muted-foreground/30 transition-all text-left",children:[y.jsx("span",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-xs font-overline text-primary uppercase",children:D.key.slice(0,2)}),y.jsxs("div",{className:"min-w-0 flex-1",children:[y.jsx("div",{className:"text-sm font-subheading text-foreground truncate",children:D.name}),y.jsx("div",{className:"text-xs text-muted-foreground",children:D.key})]}),y.jsx(va,{className:"w-4 h-4 text-muted-foreground shrink-0"})]},D.id))})})]},"pick-space"),s==="pick-pages"&&y.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[y.jsxs("button",{onClick:()=>{o("pick-space"),b(null),x(new Set)},className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground mb-4 transition-colors",children:[y.jsx(Bv,{className:"w-3 h-3"}),"Back"]}),y.jsx("h2",{className:"text-2xl text-foreground mb-1",children:"Select pages"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose which pages contain your sales playbook"}),E.isLoading&&y.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((D,T)=>y.jsx(i0,{className:"h-10 w-full rounded-lg"},T))}),E.error&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-destructive/30 bg-destructive/5 p-3 mb-3",children:[y.jsx(xa,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),y.jsx("p",{className:"text-xs text-destructive",children:E.error.message})]}),p&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-destructive/30 bg-destructive/5 p-3 mb-3",children:[y.jsx(xa,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),y.jsx("p",{className:"text-xs text-destructive",children:p})]}),E.data&&E.data.length>0&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[y.jsx(Uf,{checked:v.size===E.data.length,onCheckedChange:q}),y.jsxs("span",{className:"text-xs text-muted-foreground",children:["Select all (",E.data.length," pages)"]})]}),y.jsx("div",{className:"max-h-60 overflow-y-auto pr-1 mb-4",children:y.jsx("div",{className:"space-y-0.5",children:H(P)})}),y.jsxs("button",{onClick:M,disabled:v.size===0,className:"w-full flex items-center justify-center gap-2 rounded-xl gradient-primary py-3 text-sm font-subheading text-primary-foreground disabled:opacity-30 transition-opacity",children:["Import ",v.size," ",v.size===1?"page":"pages",y.jsx(va,{className:"w-4 h-4"})]})]}),E.data&&E.data.length===0&&y.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"No pages found in this space."})]},"pick-pages"),s==="analyzing"&&y.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8",children:[y.jsx(qe,{className:"w-10 h-10 text-primary mx-auto mb-4 animate-spin"}),y.jsx("h2",{className:"text-xl text-foreground mb-2",children:a==="extracting"?"Extracting content":"Analyzing your playbook"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:a==="extracting"?"Reading and converting your document to structured content":"Mapping sections to knowledge areas"}),y.jsxs("div",{className:"mt-6 space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 justify-center text-xs text-muted-foreground",children:[a==="extracting"?y.jsx(qe,{className:"w-3 h-3 animate-spin text-primary"}):y.jsx(ti,{className:"w-3 h-3 text-success"}),"Extracting content"]}),y.jsxs("div",{className:"flex items-center gap-2 justify-center text-xs text-muted-foreground",children:[a==="analyzing"?y.jsx(qe,{className:"w-3 h-3 animate-spin text-primary"}):y.jsx("span",{className:"w-3 h-3 rounded-full border border-muted-foreground/30"}),"Mapping skills"]})]}),y.jsx("p",{className:"mt-4 text-xs text-muted-foreground",children:"This can take up to 5 minutes"})]},"analyzing"),s==="done"&&y.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8",children:[y.jsx("div",{className:"w-14 h-14 rounded-2xl gradient-primary mx-auto mb-4 flex items-center justify-center",children:y.jsx(ti,{className:"w-7 h-7 text-primary-foreground"})}),y.jsx("h2",{className:"text-xl text-foreground mb-2",children:"Playbook connected!"}),y.jsxs("p",{className:"text-sm text-muted-foreground mb-6",children:["We found ",n," gaps in your skills coverage. Let's fix them."]}),y.jsx("button",{onClick:e,className:"rounded-xl gradient-primary px-6 py-3 text-sm font-subheading text-primary-foreground",children:"View Dashboard"})]},"done")]})]})})},Cwe=()=>{const{data:e,isLoading:t}=P2(),n=((e==null?void 0:e.length)??0)>0,[r,i]=w.useState("dashboard"),[s,o]=w.useState(!1);w.useEffect(()=>{!t&&!n&&o(!0)},[t,n]),w.useEffect(()=>{new URLSearchParams(window.location.search).get("connected")==="confluence"&&n&&i("integrations")},[n]);const[a,l]=w.useState(null),[u,c]=w.useState(null),[d,f]=w.useState(null),h=(m,g)=>{c({skillId:m,skillName:g}),i("playbook")},p=m=>{f(m),i("playbook")};return y.jsxs("div",{className:"min-h-screen bg-background",children:[y.jsx(nl,{children:s&&y.jsx(kwe,{onComplete:()=>{o(!1),i("dashboard")}})}),y.jsx(ZZ,{activeTab:r,setActiveTab:i}),y.jsxs("main",{className:"max-w-[1600px] mx-auto px-6 py-8 min-h-[calc(100vh-8rem)]",children:[r==="dashboard"&&y.jsxs("div",{className:"space-y-5",children:[y.jsx(iee,{activeFilter:a,onFilterChange:m=>l(m===a?null:m)}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_480px] gap-5 items-start",children:[y.jsx(gee,{onFillGap:h,statusFilter:a}),y.jsx("div",{className:"lg:sticky lg:top-20",children:y.jsx(DF,{onNavigateToSection:p,sections:e})})]})]}),r==="playbook"&&y.jsx(dwe,{skillFilter:u,onSkillFilterChange:c,initialSectionId:d,onInitialSectionConsumed:()=>f(null)}),r==="staging"&&y.jsx(rve,{}),r==="integrations"&&y.jsx(vwe,{})]}),y.jsx("footer",{className:"border-t border-border py-4 mt-8",children:y.jsxs("p",{className:"text-center text-xs text-muted-foreground",children:["Powered by ",y.jsx("a",{href:"https://taskbase.com",target:"_blank",rel:"noopener noreferrer",className:"font-subheading text-primary hover:underline",children:"Taskbase"})]})})]})};function xN(){const{signIn:e,signUp:t}=j0(),n=EC(),i=yl().pathname==="/signup"?"signup":"login",[s,o]=w.useState(null),[a,l]=w.useState(!1),[u,c]=w.useState(!1),d=async h=>{h.preventDefault(),o(null),l(!0);const p=new FormData(h.currentTarget),m=await e(p.get("email"),p.get("password"));l(!1),m.error?o(m.error.message):n("/")},f=async h=>{h.preventDefault(),o(null);const p=new FormData(h.currentTarget);if(!u){o("You must accept the prototype disclaimer to sign up.");return}l(!0);const m=await t(p.get("email"),p.get("password"),p.get("name"));l(!1),m.error?o(m.error.message):n("/")};return y.jsxs("div",{className:"login-bg min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[y.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-[2]",children:[y.jsx("div",{className:"absolute -top-20 -left-20 w-72 h-72 rounded-full bg-[#D1B0FC]/[0.06] blur-2xl"}),y.jsx("div",{className:"absolute top-1/4 -right-16 w-56 h-56 rounded-full bg-[#95ABF4]/[0.05] blur-xl"}),y.jsx("div",{className:"absolute bottom-1/4 left-[10%] w-40 h-40 rounded-full bg-[#6D57D1]/[0.08] blur-lg"}),y.jsx("div",{className:"absolute -bottom-10 right-[20%] w-64 h-64 rounded-full bg-[#95ABF4]/[0.04] blur-2xl"}),y.jsx("div",{className:"absolute top-[15%] left-[25%] w-2 h-2 rounded-full bg-[#D1B0FC]/30"}),y.jsx("div",{className:"absolute top-[30%] right-[30%] w-1.5 h-1.5 rounded-full bg-[#95ABF4]/25"}),y.jsx("div",{className:"absolute bottom-[20%] left-[40%] w-2.5 h-2.5 rounded-full bg-[#D1B0FC]/20"}),y.jsx("div",{className:"absolute top-[60%] right-[15%] w-2 h-2 rounded-full bg-[#6D57D1]/30"}),y.jsx("div",{className:"absolute top-[45%] left-[12%] w-1.5 h-1.5 rounded-full bg-[#95ABF4]/25"})]}),y.jsx("div",{className:"w-full max-w-sm flex-1 flex flex-col justify-center relative z-10",children:y.jsxs("div",{className:"rounded-xl bg-white p-5 shadow-2xl",children:[y.jsx("h2",{className:"text-lg text-foreground mb-1",children:i==="login"?"Sign in":"Create account"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:i==="login"?"Enter your credentials to continue":"Fill in your details below"}),i==="login"?y.jsxs("form",{onSubmit:d,className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"login-email",className:"block text-xs font-caption text-foreground mb-1.5",children:"Email"}),y.jsx("input",{type:"email",id:"login-email",name:"email",autoComplete:"email",required:!0,className:"w-full rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",placeholder:"you@company.com"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"login-password",className:"block text-xs font-caption text-foreground mb-1.5",children:"Password"}),y.jsx("input",{type:"password",id:"login-password",name:"password",autoComplete:"current-password",required:!0,minLength:6,className:"w-full rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",placeholder:""})]}),y.jsx("div",{className:"flex justify-end",children:y.jsx(VT,{to:"/forgot-password",className:"text-xs text-primary hover:underline",children:"Forgot password?"})}),s&&y.jsx("p",{className:"text-xs text-destructive font-caption",children:s}),y.jsxs("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center gap-2 rounded-lg gradient-primary py-2.5 text-sm font-subheading text-primary-foreground disabled:opacity-50 transition-opacity",children:[a&&y.jsx(qe,{className:"w-4 h-4 animate-spin"}),"Sign in"]})]}):y.jsxs("form",{onSubmit:f,className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"signup-name",className:"block text-xs font-caption text-foreground mb-1.5",children:"Full name"}),y.jsx("input",{type:"text",id:"signup-name",name:"name",autoComplete:"off",required:!0,className:"w-full rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",placeholder:"Jane Smith"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"signup-email",className:"block text-xs font-caption text-foreground mb-1.5",children:"Email"}),y.jsx("input",{type:"email",id:"signup-email",name:"email",autoComplete:"email",required:!0,className:"w-full rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",placeholder:"you@company.com"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"signup-password",className:"block text-xs font-caption text-foreground mb-1.5",children:"Password"}),y.jsx("input",{type:"password",id:"signup-password",name:"password",autoComplete:"new-password",required:!0,minLength:6,className:"w-full rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",placeholder:""})]}),y.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:u,onChange:h=>c(h.target.checked),className:"mt-0.5 rounded border-border"}),y.jsx("span",{className:"text-xs text-muted-foreground leading-relaxed",children:"This is an early-stage prototype with limited spots. If no spots are available you'll be placed on a waiting list. Features may change and data may be reset without notice. No warranties are provided. By signing up you agree to be contacted by Taskbase."})]}),s&&y.jsx("p",{className:"text-xs text-destructive font-caption",children:s}),y.jsxs("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center gap-2 rounded-lg gradient-primary py-2.5 text-sm font-subheading text-primary-foreground disabled:opacity-50 transition-opacity",children:[a&&y.jsx(qe,{className:"w-4 h-4 animate-spin"}),"Create account"]})]}),y.jsx("div",{className:"mt-4 text-center",children:y.jsx(VT,{to:i==="login"?"/signup":"/login",onClick:()=>o(null),className:"text-xs text-primary hover:underline",children:i==="login"?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})}),y.jsxs("p",{className:"py-4 text-xs text-white/60 relative z-10",children:["Powered by ",y.jsx("a",{href:"https://taskbase.com",target:"_blank",rel:"noopener noreferrer",className:"font-subheading text-white/80 hover:text-white transition-colors",children:"Taskbase"})]})]})}const Swe=()=>{const e=yl();return w.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),y.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"mb-4 text-4xl",children:"404"}),y.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),y.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},Ewe=new cW;function Twe({children:e}){const{session:t,loading:n}=j0();return n?y.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:y.jsx(qe,{className:"w-6 h-6 text-primary animate-spin"})}):t?y.jsx(y.Fragment,{children:e}):y.jsx(RI,{to:"/login",replace:!0})}function wN({children:e}){const{session:t,loading:n}=j0();return n?y.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:y.jsx(qe,{className:"w-6 h-6 text-primary animate-spin"})}):t?y.jsx(RI,{to:"/",replace:!0}):y.jsx(y.Fragment,{children:e})}const _we=()=>y.jsx(mW,{client:Ewe,children:y.jsx(sJ,{children:y.jsxs(GH,{children:[y.jsx(PV,{}),y.jsx(aU,{}),y.jsx(kq,{children:y.jsxs(mq,{children:[y.jsx(nd,{path:"/login",element:y.jsx(wN,{children:y.jsx(xN,{})})}),y.jsx(nd,{path:"/signup",element:y.jsx(wN,{children:y.jsx(xN,{})})}),y.jsx(nd,{path:"/",element:y.jsx(Twe,{children:y.jsx(Cwe,{})})}),y.jsx(nd,{path:"*",element:y.jsx(Swe,{})})]})})]})})});HM(document.getElementById("root")).render(y.jsx(_we,{}));
